// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_76443_total_runtime;
    int *futhark_mc_segmap_parloop_76443_runs;
    int64_t *futhark_mc_segmap_parloop_76443_iter;
    int64_t futhark_mc_segmap_parloop_76443_total_total_runtime;
    int futhark_mc_segmap_parloop_76443_total_runs;
    int64_t futhark_mc_segmap_parloop_76443_total_iter;
    int64_t *futhark_mc_segmap_task_76441_total_runtime;
    int *futhark_mc_segmap_task_76441_runs;
    int64_t *futhark_mc_segmap_task_76441_iter;
    int64_t futhark_mc_segmap_task_76441_total_time;
    int64_t futhark_mc_segmap_task_76441_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76467_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76467_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76467_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76467_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76467_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76467_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76469_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76469_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76469_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76469_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76469_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76469_total_iter;
    int64_t *futhark_mc_segscan_task_76464_total_runtime;
    int *futhark_mc_segscan_task_76464_runs;
    int64_t *futhark_mc_segscan_task_76464_iter;
    int64_t futhark_mc_segscan_task_76464_total_time;
    int64_t futhark_mc_segscan_task_76464_total_iter;
    int64_t *futhark_mc_segmap_parloop_76473_total_runtime;
    int *futhark_mc_segmap_parloop_76473_runs;
    int64_t *futhark_mc_segmap_parloop_76473_iter;
    int64_t futhark_mc_segmap_parloop_76473_total_total_runtime;
    int futhark_mc_segmap_parloop_76473_total_runs;
    int64_t futhark_mc_segmap_parloop_76473_total_iter;
    int64_t *futhark_mc_segmap_task_76471_total_runtime;
    int *futhark_mc_segmap_task_76471_runs;
    int64_t *futhark_mc_segmap_task_76471_iter;
    int64_t futhark_mc_segmap_task_76471_total_time;
    int64_t futhark_mc_segmap_task_76471_total_iter;
    int64_t *futhark_mc_segmap_parloop_76477_total_runtime;
    int *futhark_mc_segmap_parloop_76477_runs;
    int64_t *futhark_mc_segmap_parloop_76477_iter;
    int64_t futhark_mc_segmap_parloop_76477_total_total_runtime;
    int futhark_mc_segmap_parloop_76477_total_runs;
    int64_t futhark_mc_segmap_parloop_76477_total_iter;
    int64_t *futhark_mc_segmap_task_76475_total_runtime;
    int *futhark_mc_segmap_task_76475_runs;
    int64_t *futhark_mc_segmap_task_76475_iter;
    int64_t futhark_mc_segmap_task_76475_total_time;
    int64_t futhark_mc_segmap_task_76475_total_iter;
    int64_t *futhark_mc_segmap_parloop_76481_total_runtime;
    int *futhark_mc_segmap_parloop_76481_runs;
    int64_t *futhark_mc_segmap_parloop_76481_iter;
    int64_t futhark_mc_segmap_parloop_76481_total_total_runtime;
    int futhark_mc_segmap_parloop_76481_total_runs;
    int64_t futhark_mc_segmap_parloop_76481_total_iter;
    int64_t *futhark_mc_segmap_task_76479_total_runtime;
    int *futhark_mc_segmap_task_76479_runs;
    int64_t *futhark_mc_segmap_task_76479_iter;
    int64_t futhark_mc_segmap_task_76479_total_time;
    int64_t futhark_mc_segmap_task_76479_total_iter;
    int64_t *futhark_mc_segmap_parloop_76485_total_runtime;
    int *futhark_mc_segmap_parloop_76485_runs;
    int64_t *futhark_mc_segmap_parloop_76485_iter;
    int64_t futhark_mc_segmap_parloop_76485_total_total_runtime;
    int futhark_mc_segmap_parloop_76485_total_runs;
    int64_t futhark_mc_segmap_parloop_76485_total_iter;
    int64_t *futhark_mc_segmap_task_76483_total_runtime;
    int *futhark_mc_segmap_task_76483_runs;
    int64_t *futhark_mc_segmap_task_76483_iter;
    int64_t futhark_mc_segmap_task_76483_total_time;
    int64_t futhark_mc_segmap_task_76483_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76493_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76493_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76493_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76493_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76493_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76493_total_iter;
    int64_t *futhark_mc_segred_task_76490_total_runtime;
    int *futhark_mc_segred_task_76490_runs;
    int64_t *futhark_mc_segred_task_76490_iter;
    int64_t futhark_mc_segred_task_76490_total_time;
    int64_t futhark_mc_segred_task_76490_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76498_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76498_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76498_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76498_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76498_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76498_total_iter;
    int64_t *futhark_mc_segred_task_76495_total_runtime;
    int *futhark_mc_segred_task_76495_runs;
    int64_t *futhark_mc_segred_task_76495_iter;
    int64_t futhark_mc_segred_task_76495_total_time;
    int64_t futhark_mc_segred_task_76495_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76503_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76503_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76503_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76503_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76503_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76503_total_iter;
    int64_t *futhark_mc_segred_task_76500_total_runtime;
    int *futhark_mc_segred_task_76500_runs;
    int64_t *futhark_mc_segred_task_76500_iter;
    int64_t futhark_mc_segred_task_76500_total_time;
    int64_t futhark_mc_segred_task_76500_total_iter;
    int64_t *futhark_mc_segmap_parloop_76488_total_runtime;
    int *futhark_mc_segmap_parloop_76488_runs;
    int64_t *futhark_mc_segmap_parloop_76488_iter;
    int64_t futhark_mc_segmap_parloop_76488_total_total_runtime;
    int futhark_mc_segmap_parloop_76488_total_runs;
    int64_t futhark_mc_segmap_parloop_76488_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76486_total_runtime;
    int *futhark_mc_segmap_nested_task_76486_runs;
    int64_t *futhark_mc_segmap_nested_task_76486_iter;
    int64_t *futhark_mc_segmap_parloop_76454_total_runtime;
    int *futhark_mc_segmap_parloop_76454_runs;
    int64_t *futhark_mc_segmap_parloop_76454_iter;
    int64_t futhark_mc_segmap_parloop_76454_total_total_runtime;
    int futhark_mc_segmap_parloop_76454_total_runs;
    int64_t futhark_mc_segmap_parloop_76454_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76452_total_runtime;
    int *futhark_mc_segmap_nested_task_76452_runs;
    int64_t *futhark_mc_segmap_nested_task_76452_iter;
    int64_t *futhark_mc_segmap_parloop_76507_total_runtime;
    int *futhark_mc_segmap_parloop_76507_runs;
    int64_t *futhark_mc_segmap_parloop_76507_iter;
    int64_t futhark_mc_segmap_parloop_76507_total_total_runtime;
    int futhark_mc_segmap_parloop_76507_total_runs;
    int64_t futhark_mc_segmap_parloop_76507_total_iter;
    int64_t *futhark_mc_segmap_task_76505_total_runtime;
    int *futhark_mc_segmap_task_76505_runs;
    int64_t *futhark_mc_segmap_task_76505_iter;
    int64_t futhark_mc_segmap_task_76505_total_time;
    int64_t futhark_mc_segmap_task_76505_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76533_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76533_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76533_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76533_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76533_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76533_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76535_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76535_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76535_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76535_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76535_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76535_total_iter;
    int64_t *futhark_mc_segscan_task_76530_total_runtime;
    int *futhark_mc_segscan_task_76530_runs;
    int64_t *futhark_mc_segscan_task_76530_iter;
    int64_t futhark_mc_segscan_task_76530_total_time;
    int64_t futhark_mc_segscan_task_76530_total_iter;
    int64_t *futhark_mc_segmap_parloop_76539_total_runtime;
    int *futhark_mc_segmap_parloop_76539_runs;
    int64_t *futhark_mc_segmap_parloop_76539_iter;
    int64_t futhark_mc_segmap_parloop_76539_total_total_runtime;
    int futhark_mc_segmap_parloop_76539_total_runs;
    int64_t futhark_mc_segmap_parloop_76539_total_iter;
    int64_t *futhark_mc_segmap_task_76537_total_runtime;
    int *futhark_mc_segmap_task_76537_runs;
    int64_t *futhark_mc_segmap_task_76537_iter;
    int64_t futhark_mc_segmap_task_76537_total_time;
    int64_t futhark_mc_segmap_task_76537_total_iter;
    int64_t *futhark_mc_segmap_parloop_76543_total_runtime;
    int *futhark_mc_segmap_parloop_76543_runs;
    int64_t *futhark_mc_segmap_parloop_76543_iter;
    int64_t futhark_mc_segmap_parloop_76543_total_total_runtime;
    int futhark_mc_segmap_parloop_76543_total_runs;
    int64_t futhark_mc_segmap_parloop_76543_total_iter;
    int64_t *futhark_mc_segmap_task_76541_total_runtime;
    int *futhark_mc_segmap_task_76541_runs;
    int64_t *futhark_mc_segmap_task_76541_iter;
    int64_t futhark_mc_segmap_task_76541_total_time;
    int64_t futhark_mc_segmap_task_76541_total_iter;
    int64_t *futhark_mc_segmap_parloop_76547_total_runtime;
    int *futhark_mc_segmap_parloop_76547_runs;
    int64_t *futhark_mc_segmap_parloop_76547_iter;
    int64_t futhark_mc_segmap_parloop_76547_total_total_runtime;
    int futhark_mc_segmap_parloop_76547_total_runs;
    int64_t futhark_mc_segmap_parloop_76547_total_iter;
    int64_t *futhark_mc_segmap_task_76545_total_runtime;
    int *futhark_mc_segmap_task_76545_runs;
    int64_t *futhark_mc_segmap_task_76545_iter;
    int64_t futhark_mc_segmap_task_76545_total_time;
    int64_t futhark_mc_segmap_task_76545_total_iter;
    int64_t *futhark_mc_segmap_parloop_76551_total_runtime;
    int *futhark_mc_segmap_parloop_76551_runs;
    int64_t *futhark_mc_segmap_parloop_76551_iter;
    int64_t futhark_mc_segmap_parloop_76551_total_total_runtime;
    int futhark_mc_segmap_parloop_76551_total_runs;
    int64_t futhark_mc_segmap_parloop_76551_total_iter;
    int64_t *futhark_mc_segmap_task_76549_total_runtime;
    int *futhark_mc_segmap_task_76549_runs;
    int64_t *futhark_mc_segmap_task_76549_iter;
    int64_t futhark_mc_segmap_task_76549_total_time;
    int64_t futhark_mc_segmap_task_76549_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76559_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76559_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76559_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76559_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76559_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76559_total_iter;
    int64_t *futhark_mc_segred_task_76556_total_runtime;
    int *futhark_mc_segred_task_76556_runs;
    int64_t *futhark_mc_segred_task_76556_iter;
    int64_t futhark_mc_segred_task_76556_total_time;
    int64_t futhark_mc_segred_task_76556_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76566_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76566_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76566_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76566_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76566_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76566_total_iter;
    int64_t *futhark_mc_segred_task_76561_total_runtime;
    int *futhark_mc_segred_task_76561_runs;
    int64_t *futhark_mc_segred_task_76561_iter;
    int64_t futhark_mc_segred_task_76561_total_time;
    int64_t futhark_mc_segred_task_76561_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76572_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76572_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76572_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76572_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76572_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76572_total_iter;
    int64_t *futhark_mc_segred_task_76568_total_runtime;
    int *futhark_mc_segred_task_76568_runs;
    int64_t *futhark_mc_segred_task_76568_iter;
    int64_t futhark_mc_segred_task_76568_total_time;
    int64_t futhark_mc_segred_task_76568_total_iter;
    int64_t *futhark_mc_segmap_parloop_76554_total_runtime;
    int *futhark_mc_segmap_parloop_76554_runs;
    int64_t *futhark_mc_segmap_parloop_76554_iter;
    int64_t futhark_mc_segmap_parloop_76554_total_total_runtime;
    int futhark_mc_segmap_parloop_76554_total_runs;
    int64_t futhark_mc_segmap_parloop_76554_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76552_total_runtime;
    int *futhark_mc_segmap_nested_task_76552_runs;
    int64_t *futhark_mc_segmap_nested_task_76552_iter;
    int64_t *futhark_mc_segmap_parloop_76519_total_runtime;
    int *futhark_mc_segmap_parloop_76519_runs;
    int64_t *futhark_mc_segmap_parloop_76519_iter;
    int64_t futhark_mc_segmap_parloop_76519_total_total_runtime;
    int futhark_mc_segmap_parloop_76519_total_runs;
    int64_t futhark_mc_segmap_parloop_76519_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76517_total_runtime;
    int *futhark_mc_segmap_nested_task_76517_runs;
    int64_t *futhark_mc_segmap_nested_task_76517_iter;
    int64_t *futhark_mc_segmap_parloop_76576_total_runtime;
    int *futhark_mc_segmap_parloop_76576_runs;
    int64_t *futhark_mc_segmap_parloop_76576_iter;
    int64_t futhark_mc_segmap_parloop_76576_total_total_runtime;
    int futhark_mc_segmap_parloop_76576_total_runs;
    int64_t futhark_mc_segmap_parloop_76576_total_iter;
    int64_t *futhark_mc_segmap_task_76574_total_runtime;
    int *futhark_mc_segmap_task_76574_runs;
    int64_t *futhark_mc_segmap_task_76574_iter;
    int64_t futhark_mc_segmap_task_76574_total_time;
    int64_t futhark_mc_segmap_task_76574_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76602_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76602_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76602_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76602_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76602_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76602_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76604_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76604_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76604_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76604_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76604_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76604_total_iter;
    int64_t *futhark_mc_segscan_task_76599_total_runtime;
    int *futhark_mc_segscan_task_76599_runs;
    int64_t *futhark_mc_segscan_task_76599_iter;
    int64_t futhark_mc_segscan_task_76599_total_time;
    int64_t futhark_mc_segscan_task_76599_total_iter;
    int64_t *futhark_mc_segmap_parloop_76608_total_runtime;
    int *futhark_mc_segmap_parloop_76608_runs;
    int64_t *futhark_mc_segmap_parloop_76608_iter;
    int64_t futhark_mc_segmap_parloop_76608_total_total_runtime;
    int futhark_mc_segmap_parloop_76608_total_runs;
    int64_t futhark_mc_segmap_parloop_76608_total_iter;
    int64_t *futhark_mc_segmap_task_76606_total_runtime;
    int *futhark_mc_segmap_task_76606_runs;
    int64_t *futhark_mc_segmap_task_76606_iter;
    int64_t futhark_mc_segmap_task_76606_total_time;
    int64_t futhark_mc_segmap_task_76606_total_iter;
    int64_t *futhark_mc_segmap_parloop_76612_total_runtime;
    int *futhark_mc_segmap_parloop_76612_runs;
    int64_t *futhark_mc_segmap_parloop_76612_iter;
    int64_t futhark_mc_segmap_parloop_76612_total_total_runtime;
    int futhark_mc_segmap_parloop_76612_total_runs;
    int64_t futhark_mc_segmap_parloop_76612_total_iter;
    int64_t *futhark_mc_segmap_task_76610_total_runtime;
    int *futhark_mc_segmap_task_76610_runs;
    int64_t *futhark_mc_segmap_task_76610_iter;
    int64_t futhark_mc_segmap_task_76610_total_time;
    int64_t futhark_mc_segmap_task_76610_total_iter;
    int64_t *futhark_mc_segmap_parloop_76616_total_runtime;
    int *futhark_mc_segmap_parloop_76616_runs;
    int64_t *futhark_mc_segmap_parloop_76616_iter;
    int64_t futhark_mc_segmap_parloop_76616_total_total_runtime;
    int futhark_mc_segmap_parloop_76616_total_runs;
    int64_t futhark_mc_segmap_parloop_76616_total_iter;
    int64_t *futhark_mc_segmap_task_76614_total_runtime;
    int *futhark_mc_segmap_task_76614_runs;
    int64_t *futhark_mc_segmap_task_76614_iter;
    int64_t futhark_mc_segmap_task_76614_total_time;
    int64_t futhark_mc_segmap_task_76614_total_iter;
    int64_t *futhark_mc_segmap_parloop_76620_total_runtime;
    int *futhark_mc_segmap_parloop_76620_runs;
    int64_t *futhark_mc_segmap_parloop_76620_iter;
    int64_t futhark_mc_segmap_parloop_76620_total_total_runtime;
    int futhark_mc_segmap_parloop_76620_total_runs;
    int64_t futhark_mc_segmap_parloop_76620_total_iter;
    int64_t *futhark_mc_segmap_task_76618_total_runtime;
    int *futhark_mc_segmap_task_76618_runs;
    int64_t *futhark_mc_segmap_task_76618_iter;
    int64_t futhark_mc_segmap_task_76618_total_time;
    int64_t futhark_mc_segmap_task_76618_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76628_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76628_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76628_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76628_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76628_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76628_total_iter;
    int64_t *futhark_mc_segred_task_76625_total_runtime;
    int *futhark_mc_segred_task_76625_runs;
    int64_t *futhark_mc_segred_task_76625_iter;
    int64_t futhark_mc_segred_task_76625_total_time;
    int64_t futhark_mc_segred_task_76625_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76637_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76637_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76637_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76637_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76637_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76637_total_iter;
    int64_t *futhark_mc_segred_task_76630_total_runtime;
    int *futhark_mc_segred_task_76630_runs;
    int64_t *futhark_mc_segred_task_76630_iter;
    int64_t futhark_mc_segred_task_76630_total_time;
    int64_t futhark_mc_segred_task_76630_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76643_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76643_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76643_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76643_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76643_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76643_total_iter;
    int64_t *futhark_mc_segred_task_76639_total_runtime;
    int *futhark_mc_segred_task_76639_runs;
    int64_t *futhark_mc_segred_task_76639_iter;
    int64_t futhark_mc_segred_task_76639_total_time;
    int64_t futhark_mc_segred_task_76639_total_iter;
    int64_t *futhark_mc_segmap_parloop_76623_total_runtime;
    int *futhark_mc_segmap_parloop_76623_runs;
    int64_t *futhark_mc_segmap_parloop_76623_iter;
    int64_t futhark_mc_segmap_parloop_76623_total_total_runtime;
    int futhark_mc_segmap_parloop_76623_total_runs;
    int64_t futhark_mc_segmap_parloop_76623_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76621_total_runtime;
    int *futhark_mc_segmap_nested_task_76621_runs;
    int64_t *futhark_mc_segmap_nested_task_76621_iter;
    int64_t *futhark_mc_segmap_parloop_76588_total_runtime;
    int *futhark_mc_segmap_parloop_76588_runs;
    int64_t *futhark_mc_segmap_parloop_76588_iter;
    int64_t futhark_mc_segmap_parloop_76588_total_total_runtime;
    int futhark_mc_segmap_parloop_76588_total_runs;
    int64_t futhark_mc_segmap_parloop_76588_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76586_total_runtime;
    int *futhark_mc_segmap_nested_task_76586_runs;
    int64_t *futhark_mc_segmap_nested_task_76586_iter;
    int64_t *futhark_mc_segmap_parloop_76647_total_runtime;
    int *futhark_mc_segmap_parloop_76647_runs;
    int64_t *futhark_mc_segmap_parloop_76647_iter;
    int64_t futhark_mc_segmap_parloop_76647_total_total_runtime;
    int futhark_mc_segmap_parloop_76647_total_runs;
    int64_t futhark_mc_segmap_parloop_76647_total_iter;
    int64_t *futhark_mc_segmap_task_76645_total_runtime;
    int *futhark_mc_segmap_task_76645_runs;
    int64_t *futhark_mc_segmap_task_76645_iter;
    int64_t futhark_mc_segmap_task_76645_total_time;
    int64_t futhark_mc_segmap_task_76645_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76672_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76672_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76672_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76672_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76672_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76672_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76674_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76674_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76674_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76674_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76674_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76674_total_iter;
    int64_t *futhark_mc_segscan_task_76669_total_runtime;
    int *futhark_mc_segscan_task_76669_runs;
    int64_t *futhark_mc_segscan_task_76669_iter;
    int64_t futhark_mc_segscan_task_76669_total_time;
    int64_t futhark_mc_segscan_task_76669_total_iter;
    int64_t *futhark_mc_segmap_parloop_76678_total_runtime;
    int *futhark_mc_segmap_parloop_76678_runs;
    int64_t *futhark_mc_segmap_parloop_76678_iter;
    int64_t futhark_mc_segmap_parloop_76678_total_total_runtime;
    int futhark_mc_segmap_parloop_76678_total_runs;
    int64_t futhark_mc_segmap_parloop_76678_total_iter;
    int64_t *futhark_mc_segmap_task_76676_total_runtime;
    int *futhark_mc_segmap_task_76676_runs;
    int64_t *futhark_mc_segmap_task_76676_iter;
    int64_t futhark_mc_segmap_task_76676_total_time;
    int64_t futhark_mc_segmap_task_76676_total_iter;
    int64_t *futhark_mc_segmap_parloop_76682_total_runtime;
    int *futhark_mc_segmap_parloop_76682_runs;
    int64_t *futhark_mc_segmap_parloop_76682_iter;
    int64_t futhark_mc_segmap_parloop_76682_total_total_runtime;
    int futhark_mc_segmap_parloop_76682_total_runs;
    int64_t futhark_mc_segmap_parloop_76682_total_iter;
    int64_t *futhark_mc_segmap_task_76680_total_runtime;
    int *futhark_mc_segmap_task_76680_runs;
    int64_t *futhark_mc_segmap_task_76680_iter;
    int64_t futhark_mc_segmap_task_76680_total_time;
    int64_t futhark_mc_segmap_task_76680_total_iter;
    int64_t *futhark_mc_segmap_parloop_76686_total_runtime;
    int *futhark_mc_segmap_parloop_76686_runs;
    int64_t *futhark_mc_segmap_parloop_76686_iter;
    int64_t futhark_mc_segmap_parloop_76686_total_total_runtime;
    int futhark_mc_segmap_parloop_76686_total_runs;
    int64_t futhark_mc_segmap_parloop_76686_total_iter;
    int64_t *futhark_mc_segmap_task_76684_total_runtime;
    int *futhark_mc_segmap_task_76684_runs;
    int64_t *futhark_mc_segmap_task_76684_iter;
    int64_t futhark_mc_segmap_task_76684_total_time;
    int64_t futhark_mc_segmap_task_76684_total_iter;
    int64_t *futhark_mc_segmap_parloop_76690_total_runtime;
    int *futhark_mc_segmap_parloop_76690_runs;
    int64_t *futhark_mc_segmap_parloop_76690_iter;
    int64_t futhark_mc_segmap_parloop_76690_total_total_runtime;
    int futhark_mc_segmap_parloop_76690_total_runs;
    int64_t futhark_mc_segmap_parloop_76690_total_iter;
    int64_t *futhark_mc_segmap_task_76688_total_runtime;
    int *futhark_mc_segmap_task_76688_runs;
    int64_t *futhark_mc_segmap_task_76688_iter;
    int64_t futhark_mc_segmap_task_76688_total_time;
    int64_t futhark_mc_segmap_task_76688_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76700_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76700_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76700_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76700_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76700_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76700_total_iter;
    int64_t *futhark_mc_segred_task_76697_total_runtime;
    int *futhark_mc_segred_task_76697_runs;
    int64_t *futhark_mc_segred_task_76697_iter;
    int64_t futhark_mc_segred_task_76697_total_time;
    int64_t futhark_mc_segred_task_76697_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76705_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76705_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76705_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76705_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76705_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76705_total_iter;
    int64_t *futhark_mc_segred_task_76702_total_runtime;
    int *futhark_mc_segred_task_76702_runs;
    int64_t *futhark_mc_segred_task_76702_iter;
    int64_t futhark_mc_segred_task_76702_total_time;
    int64_t futhark_mc_segred_task_76702_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76710_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76710_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76710_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76710_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76710_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76710_total_iter;
    int64_t *futhark_mc_segred_task_76707_total_runtime;
    int *futhark_mc_segred_task_76707_runs;
    int64_t *futhark_mc_segred_task_76707_iter;
    int64_t futhark_mc_segred_task_76707_total_time;
    int64_t futhark_mc_segred_task_76707_total_iter;
    int64_t *futhark_mc_segmap_parloop_76694_total_runtime;
    int *futhark_mc_segmap_parloop_76694_runs;
    int64_t *futhark_mc_segmap_parloop_76694_iter;
    int64_t futhark_mc_segmap_parloop_76694_total_total_runtime;
    int futhark_mc_segmap_parloop_76694_total_runs;
    int64_t futhark_mc_segmap_parloop_76694_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76692_total_runtime;
    int *futhark_mc_segmap_nested_task_76692_runs;
    int64_t *futhark_mc_segmap_nested_task_76692_iter;
    int64_t *futhark_mc_segmap_parloop_76659_total_runtime;
    int *futhark_mc_segmap_parloop_76659_runs;
    int64_t *futhark_mc_segmap_parloop_76659_iter;
    int64_t futhark_mc_segmap_parloop_76659_total_total_runtime;
    int futhark_mc_segmap_parloop_76659_total_runs;
    int64_t futhark_mc_segmap_parloop_76659_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76657_total_runtime;
    int *futhark_mc_segmap_nested_task_76657_runs;
    int64_t *futhark_mc_segmap_nested_task_76657_iter;
    int64_t *futhark_mc_segmap_parloop_76714_total_runtime;
    int *futhark_mc_segmap_parloop_76714_runs;
    int64_t *futhark_mc_segmap_parloop_76714_iter;
    int64_t futhark_mc_segmap_parloop_76714_total_total_runtime;
    int futhark_mc_segmap_parloop_76714_total_runs;
    int64_t futhark_mc_segmap_parloop_76714_total_iter;
    int64_t *futhark_mc_segmap_task_76712_total_runtime;
    int *futhark_mc_segmap_task_76712_runs;
    int64_t *futhark_mc_segmap_task_76712_iter;
    int64_t futhark_mc_segmap_task_76712_total_time;
    int64_t futhark_mc_segmap_task_76712_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76742_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76742_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76742_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76742_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76742_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76742_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76744_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76744_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76744_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76744_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76744_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76744_total_iter;
    int64_t *futhark_mc_segscan_task_76739_total_runtime;
    int *futhark_mc_segscan_task_76739_runs;
    int64_t *futhark_mc_segscan_task_76739_iter;
    int64_t futhark_mc_segscan_task_76739_total_time;
    int64_t futhark_mc_segscan_task_76739_total_iter;
    int64_t *futhark_mc_segmap_parloop_76748_total_runtime;
    int *futhark_mc_segmap_parloop_76748_runs;
    int64_t *futhark_mc_segmap_parloop_76748_iter;
    int64_t futhark_mc_segmap_parloop_76748_total_total_runtime;
    int futhark_mc_segmap_parloop_76748_total_runs;
    int64_t futhark_mc_segmap_parloop_76748_total_iter;
    int64_t *futhark_mc_segmap_task_76746_total_runtime;
    int *futhark_mc_segmap_task_76746_runs;
    int64_t *futhark_mc_segmap_task_76746_iter;
    int64_t futhark_mc_segmap_task_76746_total_time;
    int64_t futhark_mc_segmap_task_76746_total_iter;
    int64_t *futhark_mc_segmap_parloop_76752_total_runtime;
    int *futhark_mc_segmap_parloop_76752_runs;
    int64_t *futhark_mc_segmap_parloop_76752_iter;
    int64_t futhark_mc_segmap_parloop_76752_total_total_runtime;
    int futhark_mc_segmap_parloop_76752_total_runs;
    int64_t futhark_mc_segmap_parloop_76752_total_iter;
    int64_t *futhark_mc_segmap_task_76750_total_runtime;
    int *futhark_mc_segmap_task_76750_runs;
    int64_t *futhark_mc_segmap_task_76750_iter;
    int64_t futhark_mc_segmap_task_76750_total_time;
    int64_t futhark_mc_segmap_task_76750_total_iter;
    int64_t *futhark_mc_segmap_parloop_76756_total_runtime;
    int *futhark_mc_segmap_parloop_76756_runs;
    int64_t *futhark_mc_segmap_parloop_76756_iter;
    int64_t futhark_mc_segmap_parloop_76756_total_total_runtime;
    int futhark_mc_segmap_parloop_76756_total_runs;
    int64_t futhark_mc_segmap_parloop_76756_total_iter;
    int64_t *futhark_mc_segmap_task_76754_total_runtime;
    int *futhark_mc_segmap_task_76754_runs;
    int64_t *futhark_mc_segmap_task_76754_iter;
    int64_t futhark_mc_segmap_task_76754_total_time;
    int64_t futhark_mc_segmap_task_76754_total_iter;
    int64_t *futhark_mc_segmap_parloop_76760_total_runtime;
    int *futhark_mc_segmap_parloop_76760_runs;
    int64_t *futhark_mc_segmap_parloop_76760_iter;
    int64_t futhark_mc_segmap_parloop_76760_total_total_runtime;
    int futhark_mc_segmap_parloop_76760_total_runs;
    int64_t futhark_mc_segmap_parloop_76760_total_iter;
    int64_t *futhark_mc_segmap_task_76758_total_runtime;
    int *futhark_mc_segmap_task_76758_runs;
    int64_t *futhark_mc_segmap_task_76758_iter;
    int64_t futhark_mc_segmap_task_76758_total_time;
    int64_t futhark_mc_segmap_task_76758_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76772_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76772_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76772_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76772_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76772_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76772_total_iter;
    int64_t *futhark_mc_segred_task_76769_total_runtime;
    int *futhark_mc_segred_task_76769_runs;
    int64_t *futhark_mc_segred_task_76769_iter;
    int64_t futhark_mc_segred_task_76769_total_time;
    int64_t futhark_mc_segred_task_76769_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76779_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76779_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76779_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76779_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76779_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76779_total_iter;
    int64_t *futhark_mc_segred_task_76774_total_runtime;
    int *futhark_mc_segred_task_76774_runs;
    int64_t *futhark_mc_segred_task_76774_iter;
    int64_t futhark_mc_segred_task_76774_total_time;
    int64_t futhark_mc_segred_task_76774_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76785_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76785_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76785_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76785_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76785_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76785_total_iter;
    int64_t *futhark_mc_segred_task_76781_total_runtime;
    int *futhark_mc_segred_task_76781_runs;
    int64_t *futhark_mc_segred_task_76781_iter;
    int64_t futhark_mc_segred_task_76781_total_time;
    int64_t futhark_mc_segred_task_76781_total_iter;
    int64_t *futhark_mc_segmap_parloop_76765_total_runtime;
    int *futhark_mc_segmap_parloop_76765_runs;
    int64_t *futhark_mc_segmap_parloop_76765_iter;
    int64_t futhark_mc_segmap_parloop_76765_total_total_runtime;
    int futhark_mc_segmap_parloop_76765_total_runs;
    int64_t futhark_mc_segmap_parloop_76765_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76763_total_runtime;
    int *futhark_mc_segmap_nested_task_76763_runs;
    int64_t *futhark_mc_segmap_nested_task_76763_iter;
    int64_t *futhark_mc_segmap_parloop_76728_total_runtime;
    int *futhark_mc_segmap_parloop_76728_runs;
    int64_t *futhark_mc_segmap_parloop_76728_iter;
    int64_t futhark_mc_segmap_parloop_76728_total_total_runtime;
    int futhark_mc_segmap_parloop_76728_total_runs;
    int64_t futhark_mc_segmap_parloop_76728_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76726_total_runtime;
    int *futhark_mc_segmap_nested_task_76726_runs;
    int64_t *futhark_mc_segmap_nested_task_76726_iter;
    int64_t *futhark_mc_segmap_parloop_76789_total_runtime;
    int *futhark_mc_segmap_parloop_76789_runs;
    int64_t *futhark_mc_segmap_parloop_76789_iter;
    int64_t futhark_mc_segmap_parloop_76789_total_total_runtime;
    int futhark_mc_segmap_parloop_76789_total_runs;
    int64_t futhark_mc_segmap_parloop_76789_total_iter;
    int64_t *futhark_mc_segmap_task_76787_total_runtime;
    int *futhark_mc_segmap_task_76787_runs;
    int64_t *futhark_mc_segmap_task_76787_iter;
    int64_t futhark_mc_segmap_task_76787_total_time;
    int64_t futhark_mc_segmap_task_76787_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76819_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76819_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76819_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76819_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76819_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76819_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76821_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76821_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76821_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76821_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76821_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76821_total_iter;
    int64_t *futhark_mc_segscan_task_76816_total_runtime;
    int *futhark_mc_segscan_task_76816_runs;
    int64_t *futhark_mc_segscan_task_76816_iter;
    int64_t futhark_mc_segscan_task_76816_total_time;
    int64_t futhark_mc_segscan_task_76816_total_iter;
    int64_t *futhark_mc_segmap_parloop_76825_total_runtime;
    int *futhark_mc_segmap_parloop_76825_runs;
    int64_t *futhark_mc_segmap_parloop_76825_iter;
    int64_t futhark_mc_segmap_parloop_76825_total_total_runtime;
    int futhark_mc_segmap_parloop_76825_total_runs;
    int64_t futhark_mc_segmap_parloop_76825_total_iter;
    int64_t *futhark_mc_segmap_task_76823_total_runtime;
    int *futhark_mc_segmap_task_76823_runs;
    int64_t *futhark_mc_segmap_task_76823_iter;
    int64_t futhark_mc_segmap_task_76823_total_time;
    int64_t futhark_mc_segmap_task_76823_total_iter;
    int64_t *futhark_mc_segmap_parloop_76829_total_runtime;
    int *futhark_mc_segmap_parloop_76829_runs;
    int64_t *futhark_mc_segmap_parloop_76829_iter;
    int64_t futhark_mc_segmap_parloop_76829_total_total_runtime;
    int futhark_mc_segmap_parloop_76829_total_runs;
    int64_t futhark_mc_segmap_parloop_76829_total_iter;
    int64_t *futhark_mc_segmap_task_76827_total_runtime;
    int *futhark_mc_segmap_task_76827_runs;
    int64_t *futhark_mc_segmap_task_76827_iter;
    int64_t futhark_mc_segmap_task_76827_total_time;
    int64_t futhark_mc_segmap_task_76827_total_iter;
    int64_t *futhark_mc_segmap_parloop_76833_total_runtime;
    int *futhark_mc_segmap_parloop_76833_runs;
    int64_t *futhark_mc_segmap_parloop_76833_iter;
    int64_t futhark_mc_segmap_parloop_76833_total_total_runtime;
    int futhark_mc_segmap_parloop_76833_total_runs;
    int64_t futhark_mc_segmap_parloop_76833_total_iter;
    int64_t *futhark_mc_segmap_task_76831_total_runtime;
    int *futhark_mc_segmap_task_76831_runs;
    int64_t *futhark_mc_segmap_task_76831_iter;
    int64_t futhark_mc_segmap_task_76831_total_time;
    int64_t futhark_mc_segmap_task_76831_total_iter;
    int64_t *futhark_mc_segmap_parloop_76837_total_runtime;
    int *futhark_mc_segmap_parloop_76837_runs;
    int64_t *futhark_mc_segmap_parloop_76837_iter;
    int64_t futhark_mc_segmap_parloop_76837_total_total_runtime;
    int futhark_mc_segmap_parloop_76837_total_runs;
    int64_t futhark_mc_segmap_parloop_76837_total_iter;
    int64_t *futhark_mc_segmap_task_76835_total_runtime;
    int *futhark_mc_segmap_task_76835_runs;
    int64_t *futhark_mc_segmap_task_76835_iter;
    int64_t futhark_mc_segmap_task_76835_total_time;
    int64_t futhark_mc_segmap_task_76835_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76853_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76853_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76853_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76853_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76853_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76853_total_iter;
    int64_t *futhark_mc_segred_task_76850_total_runtime;
    int *futhark_mc_segred_task_76850_runs;
    int64_t *futhark_mc_segred_task_76850_iter;
    int64_t futhark_mc_segred_task_76850_total_time;
    int64_t futhark_mc_segred_task_76850_total_iter;
    int64_t *futhark_mc_segmap_parloop_76857_total_runtime;
    int *futhark_mc_segmap_parloop_76857_runs;
    int64_t *futhark_mc_segmap_parloop_76857_iter;
    int64_t futhark_mc_segmap_parloop_76857_total_total_runtime;
    int futhark_mc_segmap_parloop_76857_total_runs;
    int64_t futhark_mc_segmap_parloop_76857_total_iter;
    int64_t *futhark_mc_segmap_task_76855_total_runtime;
    int *futhark_mc_segmap_task_76855_runs;
    int64_t *futhark_mc_segmap_task_76855_iter;
    int64_t futhark_mc_segmap_task_76855_total_time;
    int64_t futhark_mc_segmap_task_76855_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76866_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76866_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76866_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76866_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76866_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76866_total_iter;
    int64_t *futhark_mc_segred_task_76859_total_runtime;
    int *futhark_mc_segred_task_76859_runs;
    int64_t *futhark_mc_segred_task_76859_iter;
    int64_t futhark_mc_segred_task_76859_total_time;
    int64_t futhark_mc_segred_task_76859_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76872_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76872_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76872_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76872_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76872_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76872_total_iter;
    int64_t *futhark_mc_segred_task_76868_total_runtime;
    int *futhark_mc_segred_task_76868_runs;
    int64_t *futhark_mc_segred_task_76868_iter;
    int64_t futhark_mc_segred_task_76868_total_time;
    int64_t futhark_mc_segred_task_76868_total_iter;
    int64_t *futhark_mc_segmap_parloop_76844_total_runtime;
    int *futhark_mc_segmap_parloop_76844_runs;
    int64_t *futhark_mc_segmap_parloop_76844_iter;
    int64_t futhark_mc_segmap_parloop_76844_total_total_runtime;
    int futhark_mc_segmap_parloop_76844_total_runs;
    int64_t futhark_mc_segmap_parloop_76844_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76842_total_runtime;
    int *futhark_mc_segmap_nested_task_76842_runs;
    int64_t *futhark_mc_segmap_nested_task_76842_iter;
    int64_t *futhark_mc_segmap_parloop_76805_total_runtime;
    int *futhark_mc_segmap_parloop_76805_runs;
    int64_t *futhark_mc_segmap_parloop_76805_iter;
    int64_t futhark_mc_segmap_parloop_76805_total_total_runtime;
    int futhark_mc_segmap_parloop_76805_total_runs;
    int64_t futhark_mc_segmap_parloop_76805_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76803_total_runtime;
    int *futhark_mc_segmap_nested_task_76803_runs;
    int64_t *futhark_mc_segmap_nested_task_76803_iter;
    int64_t *futhark_mc_segmap_parloop_76876_total_runtime;
    int *futhark_mc_segmap_parloop_76876_runs;
    int64_t *futhark_mc_segmap_parloop_76876_iter;
    int64_t futhark_mc_segmap_parloop_76876_total_total_runtime;
    int futhark_mc_segmap_parloop_76876_total_runs;
    int64_t futhark_mc_segmap_parloop_76876_total_iter;
    int64_t *futhark_mc_segmap_task_76874_total_runtime;
    int *futhark_mc_segmap_task_76874_runs;
    int64_t *futhark_mc_segmap_task_76874_iter;
    int64_t futhark_mc_segmap_task_76874_total_time;
    int64_t futhark_mc_segmap_task_76874_total_iter;
    int64_t *futhark_mc_segmap_parloop_76885_total_runtime;
    int *futhark_mc_segmap_parloop_76885_runs;
    int64_t *futhark_mc_segmap_parloop_76885_iter;
    int64_t futhark_mc_segmap_parloop_76885_total_total_runtime;
    int futhark_mc_segmap_parloop_76885_total_runs;
    int64_t futhark_mc_segmap_parloop_76885_total_iter;
    int64_t *futhark_mc_segmap_task_76883_total_runtime;
    int *futhark_mc_segmap_task_76883_runs;
    int64_t *futhark_mc_segmap_task_76883_iter;
    int64_t futhark_mc_segmap_task_76883_total_time;
    int64_t futhark_mc_segmap_task_76883_total_iter;
    int64_t *futhark_mc_segmap_parloop_76880_total_runtime;
    int *futhark_mc_segmap_parloop_76880_runs;
    int64_t *futhark_mc_segmap_parloop_76880_iter;
    int64_t futhark_mc_segmap_parloop_76880_total_total_runtime;
    int futhark_mc_segmap_parloop_76880_total_runs;
    int64_t futhark_mc_segmap_parloop_76880_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76878_total_runtime;
    int *futhark_mc_segmap_nested_task_76878_runs;
    int64_t *futhark_mc_segmap_nested_task_76878_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_76443_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76443_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76443_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76443_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76443_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76443_total_iter = 0;
    ctx->futhark_mc_segmap_task_76441_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76441_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76441_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76441_total_time = 0;
    ctx->futhark_mc_segmap_task_76441_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76467_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76467_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76467_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76469_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76469_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76469_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter = 0;
    ctx->futhark_mc_segscan_task_76464_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76464_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76464_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76464_total_time = 0;
    ctx->futhark_mc_segscan_task_76464_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76473_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76473_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76473_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76473_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76473_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76473_total_iter = 0;
    ctx->futhark_mc_segmap_task_76471_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76471_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76471_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76471_total_time = 0;
    ctx->futhark_mc_segmap_task_76471_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76477_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76477_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76477_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76477_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76477_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76477_total_iter = 0;
    ctx->futhark_mc_segmap_task_76475_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76475_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76475_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76475_total_time = 0;
    ctx->futhark_mc_segmap_task_76475_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76481_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76481_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76481_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76481_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76481_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76481_total_iter = 0;
    ctx->futhark_mc_segmap_task_76479_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76479_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76479_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76479_total_time = 0;
    ctx->futhark_mc_segmap_task_76479_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76485_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76485_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76485_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76485_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76485_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76485_total_iter = 0;
    ctx->futhark_mc_segmap_task_76483_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76483_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76483_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76483_total_time = 0;
    ctx->futhark_mc_segmap_task_76483_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76493_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76493_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76493_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter = 0;
    ctx->futhark_mc_segred_task_76490_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76490_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76490_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76490_total_time = 0;
    ctx->futhark_mc_segred_task_76490_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76498_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76498_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76498_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter = 0;
    ctx->futhark_mc_segred_task_76495_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76495_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76495_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76495_total_time = 0;
    ctx->futhark_mc_segred_task_76495_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76503_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76503_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76503_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter = 0;
    ctx->futhark_mc_segred_task_76500_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76500_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76500_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76500_total_time = 0;
    ctx->futhark_mc_segred_task_76500_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76488_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76488_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76488_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76488_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76488_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76488_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76486_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76486_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76486_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76454_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76454_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76454_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76454_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76454_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76454_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76452_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76452_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76452_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76507_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76507_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76507_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76507_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76507_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76507_total_iter = 0;
    ctx->futhark_mc_segmap_task_76505_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76505_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76505_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76505_total_time = 0;
    ctx->futhark_mc_segmap_task_76505_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76533_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76533_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76533_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76535_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76535_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76535_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter = 0;
    ctx->futhark_mc_segscan_task_76530_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76530_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76530_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76530_total_time = 0;
    ctx->futhark_mc_segscan_task_76530_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76539_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76539_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76539_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76539_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76539_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76539_total_iter = 0;
    ctx->futhark_mc_segmap_task_76537_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76537_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76537_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76537_total_time = 0;
    ctx->futhark_mc_segmap_task_76537_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76543_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76543_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76543_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76543_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76543_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76543_total_iter = 0;
    ctx->futhark_mc_segmap_task_76541_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76541_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76541_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76541_total_time = 0;
    ctx->futhark_mc_segmap_task_76541_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76547_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76547_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76547_total_iter = 0;
    ctx->futhark_mc_segmap_task_76545_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76545_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76545_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76545_total_time = 0;
    ctx->futhark_mc_segmap_task_76545_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76551_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76551_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76551_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76551_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76551_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76551_total_iter = 0;
    ctx->futhark_mc_segmap_task_76549_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76549_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76549_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76549_total_time = 0;
    ctx->futhark_mc_segmap_task_76549_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76559_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76559_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76559_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter = 0;
    ctx->futhark_mc_segred_task_76556_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76556_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76556_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76556_total_time = 0;
    ctx->futhark_mc_segred_task_76556_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76566_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76566_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76566_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter = 0;
    ctx->futhark_mc_segred_task_76561_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76561_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76561_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76561_total_time = 0;
    ctx->futhark_mc_segred_task_76561_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76572_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76572_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76572_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter = 0;
    ctx->futhark_mc_segred_task_76568_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76568_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76568_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76568_total_time = 0;
    ctx->futhark_mc_segred_task_76568_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76554_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76554_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76554_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76554_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76554_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76554_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76552_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76552_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76552_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76519_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76519_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76519_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76519_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76519_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76519_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76517_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76517_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76517_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76576_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76576_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76576_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76576_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76576_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76576_total_iter = 0;
    ctx->futhark_mc_segmap_task_76574_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76574_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76574_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76574_total_time = 0;
    ctx->futhark_mc_segmap_task_76574_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76602_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76602_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76602_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76604_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76604_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76604_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter = 0;
    ctx->futhark_mc_segscan_task_76599_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76599_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76599_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76599_total_time = 0;
    ctx->futhark_mc_segscan_task_76599_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76608_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76608_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76608_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76608_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76608_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76608_total_iter = 0;
    ctx->futhark_mc_segmap_task_76606_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76606_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76606_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76606_total_time = 0;
    ctx->futhark_mc_segmap_task_76606_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76612_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76612_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76612_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76612_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76612_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76612_total_iter = 0;
    ctx->futhark_mc_segmap_task_76610_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76610_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76610_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76610_total_time = 0;
    ctx->futhark_mc_segmap_task_76610_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76616_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76616_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76616_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76616_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76616_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76616_total_iter = 0;
    ctx->futhark_mc_segmap_task_76614_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76614_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76614_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76614_total_time = 0;
    ctx->futhark_mc_segmap_task_76614_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76620_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76620_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76620_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76620_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76620_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76620_total_iter = 0;
    ctx->futhark_mc_segmap_task_76618_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76618_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76618_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76618_total_time = 0;
    ctx->futhark_mc_segmap_task_76618_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76628_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76628_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76628_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter = 0;
    ctx->futhark_mc_segred_task_76625_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76625_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76625_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76625_total_time = 0;
    ctx->futhark_mc_segred_task_76625_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76637_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76637_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76637_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter = 0;
    ctx->futhark_mc_segred_task_76630_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76630_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76630_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76630_total_time = 0;
    ctx->futhark_mc_segred_task_76630_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76643_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76643_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76643_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter = 0;
    ctx->futhark_mc_segred_task_76639_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76639_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76639_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76639_total_time = 0;
    ctx->futhark_mc_segred_task_76639_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76623_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76623_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76623_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76623_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76623_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76623_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76621_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76621_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76621_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76588_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76588_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76588_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76588_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76588_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76588_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76586_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76586_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76586_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76647_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76647_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76647_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76647_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76647_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76647_total_iter = 0;
    ctx->futhark_mc_segmap_task_76645_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76645_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76645_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76645_total_time = 0;
    ctx->futhark_mc_segmap_task_76645_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76672_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76672_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76672_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76674_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76674_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76674_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter = 0;
    ctx->futhark_mc_segscan_task_76669_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76669_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76669_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76669_total_time = 0;
    ctx->futhark_mc_segscan_task_76669_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76678_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76678_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76678_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76678_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76678_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76678_total_iter = 0;
    ctx->futhark_mc_segmap_task_76676_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76676_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76676_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76676_total_time = 0;
    ctx->futhark_mc_segmap_task_76676_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76682_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76682_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76682_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76682_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76682_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76682_total_iter = 0;
    ctx->futhark_mc_segmap_task_76680_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76680_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76680_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76680_total_time = 0;
    ctx->futhark_mc_segmap_task_76680_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76686_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76686_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76686_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76686_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76686_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76686_total_iter = 0;
    ctx->futhark_mc_segmap_task_76684_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76684_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76684_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76684_total_time = 0;
    ctx->futhark_mc_segmap_task_76684_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76690_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76690_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76690_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76690_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76690_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76690_total_iter = 0;
    ctx->futhark_mc_segmap_task_76688_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76688_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76688_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76688_total_time = 0;
    ctx->futhark_mc_segmap_task_76688_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76700_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76700_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76700_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter = 0;
    ctx->futhark_mc_segred_task_76697_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76697_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76697_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76697_total_time = 0;
    ctx->futhark_mc_segred_task_76697_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76705_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76705_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76705_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter = 0;
    ctx->futhark_mc_segred_task_76702_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76702_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76702_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76702_total_time = 0;
    ctx->futhark_mc_segred_task_76702_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76710_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76710_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76710_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter = 0;
    ctx->futhark_mc_segred_task_76707_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76707_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76707_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76707_total_time = 0;
    ctx->futhark_mc_segred_task_76707_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76694_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76694_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76694_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76694_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76694_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76694_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76692_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76692_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76692_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76659_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76659_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76659_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76659_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76659_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76659_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76657_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76657_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76657_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76714_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76714_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76714_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76714_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76714_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76714_total_iter = 0;
    ctx->futhark_mc_segmap_task_76712_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76712_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76712_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76712_total_time = 0;
    ctx->futhark_mc_segmap_task_76712_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76742_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76742_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76742_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76744_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76744_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76744_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter = 0;
    ctx->futhark_mc_segscan_task_76739_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76739_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76739_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76739_total_time = 0;
    ctx->futhark_mc_segscan_task_76739_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76748_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76748_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76748_total_iter = 0;
    ctx->futhark_mc_segmap_task_76746_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_total_time = 0;
    ctx->futhark_mc_segmap_task_76746_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76752_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76752_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76752_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76752_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76752_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76752_total_iter = 0;
    ctx->futhark_mc_segmap_task_76750_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76750_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76750_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76750_total_time = 0;
    ctx->futhark_mc_segmap_task_76750_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76756_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76756_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76756_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76756_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76756_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76756_total_iter = 0;
    ctx->futhark_mc_segmap_task_76754_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76754_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76754_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76754_total_time = 0;
    ctx->futhark_mc_segmap_task_76754_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76760_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76760_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76760_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76760_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76760_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76760_total_iter = 0;
    ctx->futhark_mc_segmap_task_76758_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76758_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76758_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76758_total_time = 0;
    ctx->futhark_mc_segmap_task_76758_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76772_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76772_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76772_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter = 0;
    ctx->futhark_mc_segred_task_76769_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76769_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76769_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76769_total_time = 0;
    ctx->futhark_mc_segred_task_76769_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76779_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76779_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76779_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter = 0;
    ctx->futhark_mc_segred_task_76774_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76774_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76774_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76774_total_time = 0;
    ctx->futhark_mc_segred_task_76774_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76785_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76785_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76785_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter = 0;
    ctx->futhark_mc_segred_task_76781_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76781_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76781_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76781_total_time = 0;
    ctx->futhark_mc_segred_task_76781_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76765_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76765_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76765_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76765_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76765_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76765_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76763_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76763_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76763_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76728_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76728_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76728_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76728_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76728_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76728_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76726_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76726_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76726_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76789_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76789_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76789_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76789_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76789_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76789_total_iter = 0;
    ctx->futhark_mc_segmap_task_76787_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76787_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76787_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76787_total_time = 0;
    ctx->futhark_mc_segmap_task_76787_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76819_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76819_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76819_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76821_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76821_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76821_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter = 0;
    ctx->futhark_mc_segscan_task_76816_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76816_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76816_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76816_total_time = 0;
    ctx->futhark_mc_segscan_task_76816_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76825_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76825_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76825_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76825_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76825_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76825_total_iter = 0;
    ctx->futhark_mc_segmap_task_76823_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76823_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76823_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76823_total_time = 0;
    ctx->futhark_mc_segmap_task_76823_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76829_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76829_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76829_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76829_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76829_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76829_total_iter = 0;
    ctx->futhark_mc_segmap_task_76827_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76827_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76827_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76827_total_time = 0;
    ctx->futhark_mc_segmap_task_76827_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76833_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76833_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76833_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76833_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76833_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76833_total_iter = 0;
    ctx->futhark_mc_segmap_task_76831_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76831_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76831_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76831_total_time = 0;
    ctx->futhark_mc_segmap_task_76831_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76837_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76837_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76837_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76837_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76837_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76837_total_iter = 0;
    ctx->futhark_mc_segmap_task_76835_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76835_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76835_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76835_total_time = 0;
    ctx->futhark_mc_segmap_task_76835_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76853_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76853_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76853_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter = 0;
    ctx->futhark_mc_segred_task_76850_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76850_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76850_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76850_total_time = 0;
    ctx->futhark_mc_segred_task_76850_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76857_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76857_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76857_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76857_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76857_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76857_total_iter = 0;
    ctx->futhark_mc_segmap_task_76855_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76855_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76855_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76855_total_time = 0;
    ctx->futhark_mc_segmap_task_76855_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76866_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76866_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76866_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter = 0;
    ctx->futhark_mc_segred_task_76859_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76859_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76859_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76859_total_time = 0;
    ctx->futhark_mc_segred_task_76859_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76872_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76872_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76872_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter = 0;
    ctx->futhark_mc_segred_task_76868_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76868_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76868_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76868_total_time = 0;
    ctx->futhark_mc_segred_task_76868_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76842_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76842_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76842_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76805_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76805_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76805_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76805_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76805_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76805_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76803_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76803_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76803_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76876_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76876_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76876_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76876_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76876_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76876_total_iter = 0;
    ctx->futhark_mc_segmap_task_76874_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76874_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76874_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76874_total_time = 0;
    ctx->futhark_mc_segmap_task_76874_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76885_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76885_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76885_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76885_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76885_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76885_total_iter = 0;
    ctx->futhark_mc_segmap_task_76883_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76883_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76883_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76883_total_time = 0;
    ctx->futhark_mc_segmap_task_76883_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76880_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76880_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76880_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76880_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76880_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76880_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76878_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76878_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76878_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76443          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76443_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76443_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76443_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76443_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76443_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76443_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76443_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76443_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76443_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76443_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76443_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76443_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76443_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76443_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76443_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76443_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76443_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76443_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76443_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76443_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76443_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76443_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76443_total_iter /
                (ctx->futhark_mc_segmap_parloop_76443_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76443_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76443_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76443_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76467    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76467_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76467_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76467_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76467_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76467_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76467_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76467_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76467_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76467_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76467_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76467_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76469    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76469_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76469_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76469_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76469_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76469_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76469_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76469_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76469_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76469_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76469_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76469_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76464            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76464_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76464_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76464_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76464_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76464_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76464_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76464_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76464_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76464_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76464_iter[i] /
                    (ctx->futhark_mc_segscan_task_76464_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76464_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76473          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76473_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76473_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76473_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76473_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76473_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76473_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76473_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76473_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76473_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76473_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76473_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76473_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76473_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76473_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76473_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76473_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76473_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76473_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76473_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76473_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76473_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76473_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76473_total_iter /
                (ctx->futhark_mc_segmap_parloop_76473_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76473_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76473_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76473_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76471             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76471_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76471_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76471_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76471_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76471_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76471_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76471_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76471_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76471_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76471_iter[i] /
                    (ctx->futhark_mc_segmap_task_76471_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76471_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76477          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76477_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76477_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76477_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76477_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76477_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76477_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76477_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76477_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76477_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76477_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76477_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76477_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76477_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76477_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76477_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76477_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76477_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76477_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76477_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76477_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76477_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76477_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76477_total_iter /
                (ctx->futhark_mc_segmap_parloop_76477_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76477_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76477_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76477_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76475             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76475_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76475_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76475_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76475_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76475_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76475_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76475_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76475_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76475_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76475_iter[i] /
                    (ctx->futhark_mc_segmap_task_76475_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76475_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76481          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76481_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76481_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76481_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76481_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76481_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76481_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76481_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76481_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76481_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76481_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76481_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76481_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76481_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76481_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76481_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76481_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76481_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76481_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76481_total_iter /
                (ctx->futhark_mc_segmap_parloop_76481_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76481_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76481_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76481_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76479             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76479_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76479_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76479_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76479_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76479_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76479_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76479_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76479_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76479_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76479_iter[i] /
                    (ctx->futhark_mc_segmap_task_76479_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76479_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76485          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76485_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76485_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76485_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76485_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76485_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76485_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76485_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76485_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76485_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76485_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76485_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76485_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76485_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76485_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76485_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76485_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76485_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76485_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76485_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76485_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76485_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76485_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76485_total_iter /
                (ctx->futhark_mc_segmap_parloop_76485_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76485_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76485_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76485_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76493  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76493_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76493_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76493_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76493_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76493_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76493_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76493_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76493_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76493_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76493_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76493_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76490             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76490_runs[i],
                    (long) ctx->futhark_mc_segred_task_76490_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76490_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76490_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76490_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76490_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76490_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76490_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76490_iter[i],
                    (long) ctx->futhark_mc_segred_task_76490_iter[i] /
                    (ctx->futhark_mc_segred_task_76490_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76490_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76498  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76498_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76498_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76498_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76498_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76498_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76498_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76498_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76498_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76498_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76495             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76495_runs[i],
                    (long) ctx->futhark_mc_segred_task_76495_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76495_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76495_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76495_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76495_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76495_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76495_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76495_iter[i],
                    (long) ctx->futhark_mc_segred_task_76495_iter[i] /
                    (ctx->futhark_mc_segred_task_76495_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76495_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76503  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76503_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76503_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76503_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76503_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76503_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76503_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76503_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76503_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76503_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76503_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76503_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76500             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76500_runs[i],
                    (long) ctx->futhark_mc_segred_task_76500_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76500_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76500_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76500_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76500_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76500_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76500_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76500_iter[i],
                    (long) ctx->futhark_mc_segred_task_76500_iter[i] /
                    (ctx->futhark_mc_segred_task_76500_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76500_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76488          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76488_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76488_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76488_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76488_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76488_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76488_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76488_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76488_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76488_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76488_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76488_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76488_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76488_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76488_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76488_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76488_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76488_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76488_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76488_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76488_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76488_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76488_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76488_total_iter /
                (ctx->futhark_mc_segmap_parloop_76488_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76488_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76488_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76488_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76483             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76483_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76483_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76483_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76483_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76483_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76483_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76483_iter[i] /
                    (ctx->futhark_mc_segmap_task_76483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76483_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76486      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76486_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76486_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76486_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76486_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76486_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76486_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76486_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76486_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76486_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76486_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76486_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76486_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76454          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76454_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76454_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76454_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76454_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76454_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76454_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76454_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76454_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76454_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76454_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76454_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76454_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76454_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76454_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76454_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76454_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76454_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76454_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76454_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76454_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76454_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76454_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76454_total_iter /
                (ctx->futhark_mc_segmap_parloop_76454_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76454_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76454_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76454_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76441             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76441_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76441_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76441_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76441_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76441_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76441_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76441_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76441_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76441_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76441_iter[i] /
                    (ctx->futhark_mc_segmap_task_76441_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76441_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76452      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76452_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76452_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76452_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76452_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76452_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76452_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76452_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76452_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76452_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76452_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76452_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76452_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76507          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76507_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76507_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76507_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76507_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76507_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76507_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76507_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76507_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76507_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76507_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76507_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76507_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76507_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76507_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76507_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76507_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76507_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76507_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76507_total_iter /
                (ctx->futhark_mc_segmap_parloop_76507_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76507_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76507_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76507_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76533    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76533_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76533_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76533_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76533_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76533_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76533_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76533_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76533_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76533_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76533_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76533_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76535    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76535_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76535_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76535_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76535_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76535_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76535_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76535_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76535_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76535_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76535_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76535_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76530            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76530_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76530_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76530_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76530_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76530_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76530_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76530_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76530_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76530_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76530_iter[i] /
                    (ctx->futhark_mc_segscan_task_76530_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76530_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76539          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76539_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76539_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76539_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76539_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76539_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76539_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76539_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76539_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76539_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76539_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76539_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76539_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76539_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76539_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76539_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76539_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76539_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76539_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76539_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76539_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76539_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76539_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76539_total_iter /
                (ctx->futhark_mc_segmap_parloop_76539_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76539_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76539_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76539_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76537             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76537_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76537_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76537_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76537_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76537_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76537_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76537_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76537_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76537_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76537_iter[i] /
                    (ctx->futhark_mc_segmap_task_76537_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76537_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76543          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76543_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76543_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76543_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76543_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76543_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76543_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76543_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76543_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76543_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76543_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76543_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76543_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76543_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76543_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76543_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76543_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76543_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76543_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76543_total_iter /
                (ctx->futhark_mc_segmap_parloop_76543_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76543_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76543_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76543_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76541             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76541_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76541_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76541_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76541_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76541_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76541_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76541_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76541_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76541_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76541_iter[i] /
                    (ctx->futhark_mc_segmap_task_76541_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76541_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76547          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76547_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76547_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76547_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76547_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76547_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76547_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76547_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76547_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76547_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76547_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76547_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76547_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76547_total_iter /
                (ctx->futhark_mc_segmap_parloop_76547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76547_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76547_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76547_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76545             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76545_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76545_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76545_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76545_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76545_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76545_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76545_iter[i] /
                    (ctx->futhark_mc_segmap_task_76545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76545_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76551          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76551_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76551_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76551_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76551_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76551_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76551_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76551_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76551_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76551_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76551_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76551_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76551_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76551_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76551_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76551_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76551_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76551_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76551_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76551_total_iter /
                (ctx->futhark_mc_segmap_parloop_76551_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76551_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76551_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76551_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76559  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76559_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76559_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76559_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76559_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76559_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76559_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76559_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76559_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76559_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76559_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76559_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76556             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76556_runs[i],
                    (long) ctx->futhark_mc_segred_task_76556_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76556_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76556_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76556_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76556_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76556_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76556_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76556_iter[i],
                    (long) ctx->futhark_mc_segred_task_76556_iter[i] /
                    (ctx->futhark_mc_segred_task_76556_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76556_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76566  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76566_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76566_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76566_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76566_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76566_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76566_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76566_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76566_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76566_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76566_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76566_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76561             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76561_runs[i],
                    (long) ctx->futhark_mc_segred_task_76561_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76561_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76561_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76561_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76561_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76561_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76561_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76561_iter[i],
                    (long) ctx->futhark_mc_segred_task_76561_iter[i] /
                    (ctx->futhark_mc_segred_task_76561_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76561_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76572  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76572_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76572_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76572_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76572_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76572_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76572_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76572_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76572_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76572_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76572_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76572_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76568             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76568_runs[i],
                    (long) ctx->futhark_mc_segred_task_76568_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76568_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76568_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76568_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76568_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76568_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76568_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76568_iter[i],
                    (long) ctx->futhark_mc_segred_task_76568_iter[i] /
                    (ctx->futhark_mc_segred_task_76568_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76568_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76554          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76554_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76554_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76554_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76554_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76554_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76554_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76554_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76554_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76554_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76554_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76554_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76554_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76554_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76554_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76554_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76554_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76554_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76554_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76554_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76554_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76554_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76554_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76554_total_iter /
                (ctx->futhark_mc_segmap_parloop_76554_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76554_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76554_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76554_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76549             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76549_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76549_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76549_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76549_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76549_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76549_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76549_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76549_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76549_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76549_iter[i] /
                    (ctx->futhark_mc_segmap_task_76549_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76549_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76552      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76552_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76552_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76552_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76552_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76552_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76552_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76552_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76552_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76552_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76552_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76552_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76552_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76519          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76519_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76519_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76519_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76519_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76519_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76519_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76519_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76519_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76519_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76519_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76519_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76519_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76519_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76519_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76519_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76519_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76519_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76519_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76519_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76519_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76519_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76519_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76519_total_iter /
                (ctx->futhark_mc_segmap_parloop_76519_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76519_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76519_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76519_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76505             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76505_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76505_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76505_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76505_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76505_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76505_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76505_iter[i] /
                    (ctx->futhark_mc_segmap_task_76505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76505_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76517      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76517_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76517_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76517_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76517_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76517_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76517_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76517_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76517_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76576          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76576_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76576_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76576_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76576_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76576_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76576_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76576_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76576_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76576_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76576_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76576_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76576_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76576_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76576_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76576_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76576_total_iter /
                (ctx->futhark_mc_segmap_parloop_76576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76576_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76576_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76576_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76602    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76602_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76602_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76602_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76602_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76602_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76602_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76602_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76602_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76602_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76602_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76602_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76604    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76604_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76604_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76604_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76604_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76604_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76604_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76604_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76604_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76604_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76604_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76604_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76599            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76599_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76599_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76599_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76599_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76599_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76599_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76599_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76599_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76599_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76599_iter[i] /
                    (ctx->futhark_mc_segscan_task_76599_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76599_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76608          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76608_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76608_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76608_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76608_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76608_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76608_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76608_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76608_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76608_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76608_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76608_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76608_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76608_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76608_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76608_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76608_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76608_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76608_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76608_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76608_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76608_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76608_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76608_total_iter /
                (ctx->futhark_mc_segmap_parloop_76608_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76608_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76608_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76608_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76606             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76606_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76606_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76606_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76606_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76606_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76606_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76606_iter[i] /
                    (ctx->futhark_mc_segmap_task_76606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76606_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76612          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76612_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76612_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76612_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76612_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76612_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76612_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76612_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76612_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76612_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76612_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76612_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76612_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76612_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76612_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76612_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76612_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76612_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76612_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76612_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76612_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76612_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76612_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76612_total_iter /
                (ctx->futhark_mc_segmap_parloop_76612_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76612_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76612_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76612_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76610             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76610_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76610_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76610_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76610_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76610_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76610_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76610_iter[i] /
                    (ctx->futhark_mc_segmap_task_76610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76610_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76616          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76616_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76616_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76616_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76616_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76616_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76616_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76616_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76616_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76616_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76616_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76616_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76616_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76616_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76616_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76616_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76616_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76616_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76616_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76616_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76616_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76616_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76616_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76616_total_iter /
                (ctx->futhark_mc_segmap_parloop_76616_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76616_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76616_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76616_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76614             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76614_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76614_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76614_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76614_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76614_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76614_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76614_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76614_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76614_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76614_iter[i] /
                    (ctx->futhark_mc_segmap_task_76614_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76614_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76620          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76620_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76620_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76620_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76620_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76620_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76620_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76620_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76620_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76620_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76620_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76620_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76620_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76620_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76620_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76620_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76620_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76620_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76620_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76620_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76620_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76620_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76620_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76620_total_iter /
                (ctx->futhark_mc_segmap_parloop_76620_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76620_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76620_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76620_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76628  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76628_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76628_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76628_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76628_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76628_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76628_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76628_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76628_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76628_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76628_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76628_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76625             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76625_runs[i],
                    (long) ctx->futhark_mc_segred_task_76625_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76625_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76625_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76625_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76625_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76625_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76625_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76625_iter[i],
                    (long) ctx->futhark_mc_segred_task_76625_iter[i] /
                    (ctx->futhark_mc_segred_task_76625_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76625_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76637  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76637_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76637_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76637_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76637_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76637_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76637_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76637_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76637_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76637_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76637_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76637_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76630             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76630_runs[i],
                    (long) ctx->futhark_mc_segred_task_76630_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76630_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76630_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76630_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76630_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76630_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76630_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76630_iter[i],
                    (long) ctx->futhark_mc_segred_task_76630_iter[i] /
                    (ctx->futhark_mc_segred_task_76630_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76630_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76643  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76643_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76643_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76643_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76643_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76643_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76643_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76643_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76643_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76643_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76643_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76643_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76639             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76639_runs[i],
                    (long) ctx->futhark_mc_segred_task_76639_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76639_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76639_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76639_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76639_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76639_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76639_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76639_iter[i],
                    (long) ctx->futhark_mc_segred_task_76639_iter[i] /
                    (ctx->futhark_mc_segred_task_76639_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76639_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76623          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76623_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76623_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76623_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76623_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76623_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76623_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76623_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76623_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76623_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76623_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76623_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76623_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76623_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76623_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76623_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76623_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76623_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76623_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76623_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76623_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76623_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76623_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76623_total_iter /
                (ctx->futhark_mc_segmap_parloop_76623_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76623_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76623_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76623_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76618             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76618_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76618_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76618_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76618_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76618_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76618_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76618_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76618_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76618_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76618_iter[i] /
                    (ctx->futhark_mc_segmap_task_76618_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76618_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76621      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76621_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76621_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76621_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76621_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76621_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76621_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76621_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76621_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76621_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76621_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76621_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76621_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76588          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76588_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76588_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76588_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76588_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76588_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76588_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76588_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76588_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76588_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76588_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76588_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76588_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76588_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76588_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76588_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76588_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76588_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76588_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76588_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76588_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76588_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76588_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76588_total_iter /
                (ctx->futhark_mc_segmap_parloop_76588_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76588_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76588_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76588_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76574             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76574_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76574_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76574_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76574_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76574_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76574_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76574_iter[i] /
                    (ctx->futhark_mc_segmap_task_76574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76574_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76586      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76586_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76586_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76586_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76586_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76586_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76586_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76586_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76586_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76586_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76586_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76586_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76586_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76647          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76647_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76647_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76647_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76647_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76647_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76647_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76647_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76647_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76647_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76647_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76647_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76647_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76647_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76647_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76647_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76647_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76647_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76647_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76647_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76647_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76647_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76647_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76647_total_iter /
                (ctx->futhark_mc_segmap_parloop_76647_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76647_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76647_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76647_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76672    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76672_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76672_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76672_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76672_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76672_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76672_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76672_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76672_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76672_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76672_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76672_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76674    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76674_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76674_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76674_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76674_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76674_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76674_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76674_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76674_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76674_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76674_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76674_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76669            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76669_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76669_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76669_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76669_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76669_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76669_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76669_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76669_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76669_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76669_iter[i] /
                    (ctx->futhark_mc_segscan_task_76669_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76669_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76678          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76678_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76678_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76678_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76678_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76678_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76678_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76678_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76678_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76678_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76678_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76678_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76678_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76678_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76678_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76678_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76678_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76678_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76678_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76678_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76678_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76678_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76678_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76678_total_iter /
                (ctx->futhark_mc_segmap_parloop_76678_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76678_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76678_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76678_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76676             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76676_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76676_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76676_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76676_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76676_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76676_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76676_iter[i] /
                    (ctx->futhark_mc_segmap_task_76676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76676_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76682          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76682_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76682_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76682_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76682_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76682_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76682_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76682_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76682_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76682_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76682_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76682_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76682_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76682_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76682_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76682_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76682_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76682_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76682_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76682_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76682_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76682_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76682_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76682_total_iter /
                (ctx->futhark_mc_segmap_parloop_76682_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76682_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76682_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76682_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76680             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76680_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76680_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76680_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76680_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76680_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76680_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76680_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76680_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76680_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76680_iter[i] /
                    (ctx->futhark_mc_segmap_task_76680_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76680_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76686          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76686_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76686_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76686_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76686_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76686_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76686_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76686_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76686_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76686_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76686_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76686_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76686_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76686_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76686_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76686_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76686_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76686_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76686_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76686_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76686_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76686_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76686_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76686_total_iter /
                (ctx->futhark_mc_segmap_parloop_76686_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76686_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76686_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76686_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76684             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76684_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76684_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76684_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76684_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76684_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76684_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76684_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76684_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76684_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76684_iter[i] /
                    (ctx->futhark_mc_segmap_task_76684_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76684_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76690          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76690_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76690_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76690_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76690_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76690_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76690_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76690_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76690_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76690_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76690_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76690_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76690_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76690_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76690_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76690_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76690_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76690_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76690_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76690_total_iter /
                (ctx->futhark_mc_segmap_parloop_76690_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76690_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76690_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76690_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76700  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76700_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76700_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76700_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76700_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76700_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76700_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76700_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76700_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76700_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76700_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76700_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76697             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76697_runs[i],
                    (long) ctx->futhark_mc_segred_task_76697_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76697_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76697_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76697_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76697_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76697_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76697_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76697_iter[i],
                    (long) ctx->futhark_mc_segred_task_76697_iter[i] /
                    (ctx->futhark_mc_segred_task_76697_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76697_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76705  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76705_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76705_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76705_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76705_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76705_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76705_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76705_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76705_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76705_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76705_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76705_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76702             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76702_runs[i],
                    (long) ctx->futhark_mc_segred_task_76702_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76702_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76702_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76702_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76702_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76702_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76702_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76702_iter[i],
                    (long) ctx->futhark_mc_segred_task_76702_iter[i] /
                    (ctx->futhark_mc_segred_task_76702_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76702_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76710  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76710_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76710_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76710_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76710_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76710_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76710_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76710_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76710_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76710_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76710_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76710_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76707             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76707_runs[i],
                    (long) ctx->futhark_mc_segred_task_76707_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76707_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76707_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76707_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76707_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76707_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76707_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76707_iter[i],
                    (long) ctx->futhark_mc_segred_task_76707_iter[i] /
                    (ctx->futhark_mc_segred_task_76707_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76707_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76694          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76694_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76694_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76694_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76694_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76694_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76694_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76694_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76694_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76694_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76694_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76694_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76694_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76694_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76694_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76694_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76694_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76694_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76694_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76694_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76694_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76694_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76694_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76694_total_iter /
                (ctx->futhark_mc_segmap_parloop_76694_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76694_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76694_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76694_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76688             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76688_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76688_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76688_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76688_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76688_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76688_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76688_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76688_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76688_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76688_iter[i] /
                    (ctx->futhark_mc_segmap_task_76688_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76688_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76692      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76692_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76692_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76692_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76692_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76692_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76692_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76692_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76692_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76659          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76659_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76659_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76659_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76659_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76659_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76659_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76659_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76659_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76659_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76659_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76659_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76659_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76659_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76659_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76659_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76659_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76659_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76659_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76659_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76659_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76659_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76659_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76659_total_iter /
                (ctx->futhark_mc_segmap_parloop_76659_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76659_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76659_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76659_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76645             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76645_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76645_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76645_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76645_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76645_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76645_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76645_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76645_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76645_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76645_iter[i] /
                    (ctx->futhark_mc_segmap_task_76645_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76645_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76657      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76657_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76657_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76657_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76657_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76657_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76657_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76657_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76657_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76657_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76657_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76657_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76657_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76714          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76714_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76714_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76714_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76714_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76714_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76714_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76714_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76714_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76714_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76714_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76714_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76714_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76714_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76714_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76714_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76714_total_iter /
                (ctx->futhark_mc_segmap_parloop_76714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76714_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76714_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76714_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76742    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76742_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76742_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76742_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76742_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76742_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76742_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76742_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76742_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76742_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76742_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76742_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76744    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76744_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76744_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76744_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76744_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76744_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76744_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76744_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76744_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76744_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76744_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76744_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76739            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76739_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76739_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76739_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76739_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76739_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76739_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76739_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76739_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76739_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76739_iter[i] /
                    (ctx->futhark_mc_segscan_task_76739_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76739_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76748          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76748_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76748_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76748_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76748_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76748_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76748_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76748_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76748_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76748_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76748_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76748_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76748_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76748_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76748_total_iter /
                (ctx->futhark_mc_segmap_parloop_76748_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76748_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76748_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76748_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76746             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76746_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76746_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76746_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76746_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76746_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76746_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76746_iter[i] /
                    (ctx->futhark_mc_segmap_task_76746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76746_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76752          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76752_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76752_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76752_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76752_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76752_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76752_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76752_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76752_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76752_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76752_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76752_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76752_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76752_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76752_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76752_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76752_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76752_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76752_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76752_total_iter /
                (ctx->futhark_mc_segmap_parloop_76752_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76752_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76752_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76752_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76750             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76750_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76750_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76750_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76750_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76750_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76750_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76750_iter[i] /
                    (ctx->futhark_mc_segmap_task_76750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76750_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76756          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76756_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76756_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76756_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76756_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76756_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76756_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76756_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76756_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76756_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76756_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76756_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76756_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76756_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76756_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76756_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76756_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76756_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76756_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76756_total_iter /
                (ctx->futhark_mc_segmap_parloop_76756_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76756_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76756_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76756_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76754             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76754_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76754_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76754_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76754_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76754_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76754_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76754_iter[i] /
                    (ctx->futhark_mc_segmap_task_76754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76754_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76760          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76760_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76760_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76760_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76760_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76760_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76760_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76760_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76760_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76760_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76760_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76760_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76760_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76760_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76760_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76760_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76760_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76760_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76760_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76760_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76760_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76760_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76760_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76760_total_iter /
                (ctx->futhark_mc_segmap_parloop_76760_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76760_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76760_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76760_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76772  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76772_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76772_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76772_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76772_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76772_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76772_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76772_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76772_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76772_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76772_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76772_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76769             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76769_runs[i],
                    (long) ctx->futhark_mc_segred_task_76769_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76769_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76769_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76769_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76769_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76769_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76769_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76769_iter[i],
                    (long) ctx->futhark_mc_segred_task_76769_iter[i] /
                    (ctx->futhark_mc_segred_task_76769_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76769_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76779  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76779_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76779_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76779_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76779_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76779_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76779_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76779_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76779_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76779_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76779_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76779_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76774             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76774_runs[i],
                    (long) ctx->futhark_mc_segred_task_76774_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76774_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76774_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76774_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76774_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76774_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76774_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76774_iter[i],
                    (long) ctx->futhark_mc_segred_task_76774_iter[i] /
                    (ctx->futhark_mc_segred_task_76774_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76774_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76785  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76785_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76785_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76785_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76785_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76785_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76785_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76785_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76785_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76785_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76785_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76785_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76781             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76781_runs[i],
                    (long) ctx->futhark_mc_segred_task_76781_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76781_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76781_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76781_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76781_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76781_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76781_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76781_iter[i],
                    (long) ctx->futhark_mc_segred_task_76781_iter[i] /
                    (ctx->futhark_mc_segred_task_76781_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76781_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76765          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76765_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76765_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76765_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76765_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76765_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76765_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76765_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76765_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76765_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76765_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76765_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76765_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76765_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76765_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76765_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76765_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76765_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76765_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76765_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76765_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76765_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76765_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76765_total_iter /
                (ctx->futhark_mc_segmap_parloop_76765_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76765_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76765_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76765_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76758             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76758_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76758_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76758_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76758_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76758_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76758_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76758_iter[i] /
                    (ctx->futhark_mc_segmap_task_76758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76758_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76763      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76763_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76763_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76763_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76763_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76763_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76763_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76763_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76763_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76763_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76763_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76763_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76763_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76728          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76728_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76728_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76728_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76728_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76728_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76728_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76728_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76728_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76728_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76728_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76728_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76728_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76728_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76728_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76728_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76728_total_iter /
                (ctx->futhark_mc_segmap_parloop_76728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76728_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76728_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76728_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76712             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76712_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76712_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76712_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76712_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76712_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76712_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76712_iter[i] /
                    (ctx->futhark_mc_segmap_task_76712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76712_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76726      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76726_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76726_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76726_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76726_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76726_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76726_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76726_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76726_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76789          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76789_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76789_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76789_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76789_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76789_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76789_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76789_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76789_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76789_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76789_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76789_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76789_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76789_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76789_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76789_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76789_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76789_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76789_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76789_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76789_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76789_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76789_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76789_total_iter /
                (ctx->futhark_mc_segmap_parloop_76789_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76789_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76789_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76789_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76819    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76819_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76819_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76819_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76819_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76819_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76819_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76819_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76819_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76819_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76819_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76819_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76821    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76821_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76821_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76821_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76821_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76821_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76821_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76821_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76821_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76821_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76821_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76821_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76816            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76816_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76816_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76816_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76816_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76816_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76816_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76816_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76816_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76816_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76816_iter[i] /
                    (ctx->futhark_mc_segscan_task_76816_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76816_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76825          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76825_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76825_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76825_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76825_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76825_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76825_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76825_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76825_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76825_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76825_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76825_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76825_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76825_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76825_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76825_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76825_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76825_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76825_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76825_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76825_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76825_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76825_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76825_total_iter /
                (ctx->futhark_mc_segmap_parloop_76825_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76825_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76825_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76825_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76823             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76823_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76823_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76823_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76823_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76823_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76823_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76823_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76823_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76823_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76823_iter[i] /
                    (ctx->futhark_mc_segmap_task_76823_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76823_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76829          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76829_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76829_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76829_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76829_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76829_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76829_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76829_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76829_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76829_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76829_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76829_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76829_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76829_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76829_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76829_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76829_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76829_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76829_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76829_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76829_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76829_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76829_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76829_total_iter /
                (ctx->futhark_mc_segmap_parloop_76829_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76829_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76829_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76829_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76827             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76827_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76827_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76827_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76827_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76827_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76827_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76827_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76827_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76827_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76827_iter[i] /
                    (ctx->futhark_mc_segmap_task_76827_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76827_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76833          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76833_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76833_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76833_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76833_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76833_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76833_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76833_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76833_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76833_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76833_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76833_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76833_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76833_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76833_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76833_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76833_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76833_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76833_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76833_total_iter /
                (ctx->futhark_mc_segmap_parloop_76833_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76833_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76833_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76833_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76831             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76831_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76831_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76831_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76831_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76831_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76831_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76831_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76831_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76831_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76831_iter[i] /
                    (ctx->futhark_mc_segmap_task_76831_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76831_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76837          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76837_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76837_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76837_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76837_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76837_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76837_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76837_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76837_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76837_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76837_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76837_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76837_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76837_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76837_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76837_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76837_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76837_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76837_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76837_total_iter /
                (ctx->futhark_mc_segmap_parloop_76837_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76837_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76837_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76837_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76853  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76853_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76853_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76853_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76853_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76853_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76853_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76853_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76853_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76853_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76853_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76853_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76850             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76850_runs[i],
                    (long) ctx->futhark_mc_segred_task_76850_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76850_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76850_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76850_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76850_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76850_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76850_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76850_iter[i],
                    (long) ctx->futhark_mc_segred_task_76850_iter[i] /
                    (ctx->futhark_mc_segred_task_76850_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76850_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76857          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76857_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76857_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76857_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76857_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76857_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76857_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76857_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76857_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76857_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76857_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76857_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76857_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76857_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76857_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76857_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76857_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76857_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76857_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76857_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76857_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76857_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76857_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76857_total_iter /
                (ctx->futhark_mc_segmap_parloop_76857_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76857_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76857_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76857_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76855             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76855_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76855_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76855_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76855_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76855_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76855_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76855_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76855_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76855_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76855_iter[i] /
                    (ctx->futhark_mc_segmap_task_76855_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76855_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76866  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76866_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76866_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76866_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76866_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76866_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76866_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76866_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76866_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76866_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76866_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76866_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76859             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76859_runs[i],
                    (long) ctx->futhark_mc_segred_task_76859_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76859_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76859_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76859_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76859_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76859_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76859_iter[i],
                    (long) ctx->futhark_mc_segred_task_76859_iter[i] /
                    (ctx->futhark_mc_segred_task_76859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76859_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76872  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76872_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76872_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76872_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76872_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76872_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76872_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76872_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76872_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76872_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76872_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76872_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76868             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76868_runs[i],
                    (long) ctx->futhark_mc_segred_task_76868_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76868_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76868_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76868_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76868_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76868_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76868_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76868_iter[i],
                    (long) ctx->futhark_mc_segred_task_76868_iter[i] /
                    (ctx->futhark_mc_segred_task_76868_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76868_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76844          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76844_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76844_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76844_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76844_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76844_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76844_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76844_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76844_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76844_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76844_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76844_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76844_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76844_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76844_total_iter /
                (ctx->futhark_mc_segmap_parloop_76844_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76844_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76844_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76844_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76835             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76835_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76835_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76835_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76835_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76835_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76835_iter[i] /
                    (ctx->futhark_mc_segmap_task_76835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76835_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76842      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76842_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76842_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76842_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76842_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76842_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76842_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76842_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76842_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76805          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76805_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76805_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76805_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76805_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76805_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76805_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76805_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76805_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76805_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76805_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76805_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76805_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76805_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76805_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76805_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76805_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76805_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76805_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76805_total_iter /
                (ctx->futhark_mc_segmap_parloop_76805_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76805_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76805_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76805_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76787             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76787_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76787_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76787_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76787_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76787_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76787_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76787_iter[i] /
                    (ctx->futhark_mc_segmap_task_76787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76787_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76803      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76803_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76803_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76803_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76803_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76803_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76876          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76876_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76876_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76876_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76876_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76876_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76876_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76876_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76876_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76876_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76876_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76876_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76876_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76876_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76876_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76876_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76876_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76876_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76876_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76876_total_iter /
                (ctx->futhark_mc_segmap_parloop_76876_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76876_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76876_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76876_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76885          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76885_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76885_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76885_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76885_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76885_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76885_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76885_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76885_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76885_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76885_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76885_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76885_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76885_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76885_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76885_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76885_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76885_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76885_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76885_total_iter /
                (ctx->futhark_mc_segmap_parloop_76885_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76885_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76885_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76885_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76883             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76883_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76883_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76883_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76883_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76883_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76883_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76883_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76883_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76883_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76883_iter[i] /
                    (ctx->futhark_mc_segmap_task_76883_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76883_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76880          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76880_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76880_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76880_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76880_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76880_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76880_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76880_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76880_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76880_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76880_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76880_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76880_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76880_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76880_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76880_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76880_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76880_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76880_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76880_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76880_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76880_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76880_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76880_total_iter /
                (ctx->futhark_mc_segmap_parloop_76880_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76880_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76880_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76880_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76874             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76874_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76874_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76874_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76874_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76874_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76874_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76874_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76874_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76874_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76874_iter[i] /
                    (ctx->futhark_mc_segmap_task_76874_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76874_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76878      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76878_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76878_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76878_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76878_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76878_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76878_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76878_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76878_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_76439,
                             struct memblock Y_mem_69593, int64_t m_64063,
                             int64_t n_64064, int64_t q_64066,
                             int64_t degree_64067, int64_t jump_64068,
                             int64_t jump_threshold_64069,
                             int64_t q_threshold_64070);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_76440 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69598;
    int64_t free_bytes_69601;
    int64_t free_bytes_69616;
    int64_t free_bytes_69619;
    char *free_mem_69745;
};
struct futhark_mc_segmap_parloop_struct_76442 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69598;
    int64_t free_bytes_69601;
    int64_t free_bytes_69616;
    int64_t free_bytes_69619;
    char *free_mem_69745;
};
static int futhark_mc_segmap_parloop_76443(void *args, int64_t start,
                                           int64_t end, int flat_tid_65553,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76442
    *futhark_mc_segmap_parloop_struct_76442 =
    (struct futhark_mc_segmap_parloop_struct_76442 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76442->ctx;
    uint64_t futhark_mc_segmap_parloop_76443_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76443_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76442->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76442->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76442->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76442->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76442->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76442->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76442->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76442->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76442->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76442->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76442->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76442->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69598 =
            futhark_mc_segmap_parloop_struct_76442->free_bytes_69598;
    int64_t bytes_69601 =
            futhark_mc_segmap_parloop_struct_76442->free_bytes_69601;
    int64_t bytes_69616 =
            futhark_mc_segmap_parloop_struct_76442->free_bytes_69616;
    int64_t bytes_69619 =
            futhark_mc_segmap_parloop_struct_76442->free_bytes_69619;
    struct memblock mem_69745 = {.desc ="mem_69745", .mem =
                                 futhark_mc_segmap_parloop_struct_76442->free_mem_69745,
                                 .size =0, .references =NULL};
    size_t mem_69624_cached_sizze_76444 = 0;
    char *mem_69624 = NULL;
    size_t mem_69639_cached_sizze_76445 = 0;
    char *mem_69639 = NULL;
    size_t mem_69642_cached_sizze_76446 = 0;
    char *mem_69642 = NULL;
    size_t mem_69669_cached_sizze_76447 = 0;
    char *mem_69669 = NULL;
    size_t mem_69672_cached_sizze_76448 = 0;
    char *mem_69672 = NULL;
    size_t mem_69675_cached_sizze_76449 = 0;
    char *mem_69675 = NULL;
    size_t mem_69714_cached_sizze_76450 = 0;
    char *mem_69714 = NULL;
    size_t mem_69729_cached_sizze_76451 = 0;
    char *mem_69729 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70862 = start;
    
    if (mem_69624_cached_sizze_76444 < (size_t) bytes_69598) {
        mem_69624 = realloc(mem_69624, bytes_69598);
        mem_69624_cached_sizze_76444 = bytes_69598;
    }
    if (mem_69639_cached_sizze_76445 < (size_t) bytes_69601) {
        mem_69639 = realloc(mem_69639, bytes_69601);
        mem_69639_cached_sizze_76445 = bytes_69601;
    }
    if (mem_69642_cached_sizze_76446 < (size_t) bytes_69598) {
        mem_69642 = realloc(mem_69642, bytes_69598);
        mem_69642_cached_sizze_76446 = bytes_69598;
    }
    if (mem_69669_cached_sizze_76447 < (size_t) bytes_69601) {
        mem_69669 = realloc(mem_69669, bytes_69601);
        mem_69669_cached_sizze_76447 = bytes_69601;
    }
    if (mem_69672_cached_sizze_76448 < (size_t) bytes_69598) {
        mem_69672 = realloc(mem_69672, bytes_69598);
        mem_69672_cached_sizze_76448 = bytes_69598;
    }
    if (mem_69675_cached_sizze_76449 < (size_t) bytes_69598) {
        mem_69675 = realloc(mem_69675, bytes_69598);
        mem_69675_cached_sizze_76449 = bytes_69598;
    }
    if (mem_69714_cached_sizze_76450 < (size_t) bytes_69616) {
        mem_69714 = realloc(mem_69714, bytes_69616);
        mem_69714_cached_sizze_76450 = bytes_69616;
    }
    if (mem_69729_cached_sizze_76451 < (size_t) bytes_69619) {
        mem_69729 = realloc(mem_69729, bytes_69619);
        mem_69729_cached_sizze_76451 = bytes_69619;
    }
    for (; iter_70862 < end; iter_70862++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71047 = m_64063;
        int64_t gtid_65554 = iter_70862;
        int64_t remnant_71048 = iter_70862 - gtid_65554;
        int64_t discard_69138;
        int64_t scanacc_70864 = (int64_t) 0;
        
        for (int64_t i_70863 = 0; i_70863 < n_64064; i_70863++) {
            float x_70866 = ((float *) Y_mem_69593.mem)[gtid_65554 * n_64064 +
                                                        i_70863];
            bool isnan_res_70867;
            
            isnan_res_70867 = futrts_isnan32(x_70866);
            
            bool defunc_0_p_res_70868 = !isnan_res_70867;
            int64_t defunc_0_f_res_70869 = btoi_bool_i64(defunc_0_p_res_70868);
            int64_t defunc_1_op_res_70870 = add64(defunc_0_f_res_70869,
                                                  scanacc_70864);
            
            ((int64_t *) mem_69624)[i_70863] = defunc_1_op_res_70870;
            
            int64_t scanacc_tmp_71049 = defunc_1_op_res_70870;
            
            scanacc_70864 = scanacc_tmp_71049;
        }
        discard_69138 = scanacc_70864;
        
        int64_t last_res_64114 = ((int64_t *) mem_69624)[i_64078];
        
        for (int64_t i_71051 = 0; i_71051 < n_64064; i_71051++) {
            ((float *) mem_69639)[i_71051] = 0.0F;
        }
        for (int64_t i_71052 = 0; i_71052 < n_64064; i_71052++) {
            ((int64_t *) mem_69642)[i_71052] = (int64_t) -1;
        }
        for (int64_t write_iter_70872 = 0; write_iter_70872 < n_64064;
             write_iter_70872++) {
            float write_iv_70875 = ((float *) Y_mem_69593.mem)[gtid_65554 *
                                                               n_64064 +
                                                               write_iter_70872];
            bool isnan_res_70876;
            
            isnan_res_70876 = futrts_isnan32(write_iv_70875);
            
            bool defunc_0_p_res_70877 = !isnan_res_70876;
            int64_t defunc_1_f_res_70878;
            
            if (defunc_0_p_res_70877) {
                int64_t write_iv_70879 =
                        ((int64_t *) mem_69624)[write_iter_70872];
                int64_t defunc_1_f_res_t_res_70880 = sub64(write_iv_70879,
                                                           (int64_t) 1);
                
                defunc_1_f_res_70878 = defunc_1_f_res_t_res_70880;
            } else {
                defunc_1_f_res_70878 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70878) &&
                slt64(defunc_1_f_res_70878, n_64064)) {
                ((int64_t *) mem_69642)[defunc_1_f_res_70878] =
                    write_iter_70872;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70878) &&
                slt64(defunc_1_f_res_70878, n_64064)) {
                memmove(mem_69639 + defunc_1_f_res_70878 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_65554 * n_64064 +
                                           write_iter_70872) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64132 = sub64(last_res_64114, min_res_64084);
        float i64_res_64133 = sitofp_i64_f32(last_res_64114);
        float x_64134 = i64_res_64091 - i64_res_64133;
        float max_arg_64135 = x_64134 / 2.0F;
        float max_res_64136 = fmax32(0.0F, max_arg_64135);
        
        for (int64_t i_70884 = 0; i_70884 < n_64064; i_70884++) {
            int64_t x_70888 = ((int64_t *) mem_69642)[i_70884];
            int64_t defunc_0_f_res_70889 = add64((int64_t) 1, x_70888);
            bool cond_70890 = slt64(defunc_0_f_res_70889, (int64_t) 0);
            int64_t defunc_0_f_res_70891;
            
            if (cond_70890) {
                defunc_0_f_res_70891 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_70891 = defunc_0_f_res_70889;
            }
            
            float defunc_0_f_res_70892 = sitofp_i64_f32(x_70888);
            
            ((float *) mem_69669)[i_70884] = defunc_0_f_res_70892;
            ((int64_t *) mem_69672)[i_70884] = defunc_0_f_res_70891;
            ((int64_t *) mem_69675)[i_70884] = defunc_0_f_res_70889;
        }
        for (int64_t i_70896 = 0; i_70896 < q_64066; i_70896++) {
            bool cond_70898 = sle64(last_res_64114, i_70896);
            float defunc_0_f_res_70899;
            
            if (cond_70898) {
                defunc_0_f_res_70899 = 0.0F;
            } else {
                defunc_0_f_res_70899 = 1.0F;
            }
            ((float *) mem_69714)[i_70896] = defunc_0_f_res_70899;
        }
        for (int64_t i_70901 = 0; i_70901 < n_m_64072; i_70901++) {
            int64_t min_arg_70903 = mul64(jump_64068, i_70901);
            int64_t min_res_70904 = smin64(i_64078, min_arg_70903);
            int64_t defunc_0_g_res_70905 = add64((int64_t) 1, min_res_70904);
            bool nearest_idx_70906;
            int64_t nearest_idx_70907;
            int64_t nearest_idx_70908;
            bool loop_while_70909;
            int64_t low_70910;
            int64_t high_70911;
            
            loop_while_70909 = x_64079;
            low_70910 = (int64_t) 0;
            high_70911 = i_64078;
            while (loop_while_70909) {
                int64_t x_70912 = add64(low_70910, high_70911);
                int64_t mid_70913 = sdiv64(x_70912, (int64_t) 2);
                bool x_70914 = sle64((int64_t) 0, mid_70913);
                bool y_70915 = slt64(mid_70913, n_64064);
                bool bounds_check_70916 = x_70914 && y_70915;
                bool index_certs_70917;
                
                if (!bounds_check_70916) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_70913,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_70918 = ((int64_t *) mem_69672)[mid_70913];
                bool cond_70919 = sle64(defunc_0_g_res_70905, x_70918);
                int64_t loopres_70920;
                int64_t loopres_70921;
                
                if (cond_70919) {
                    int64_t loopres_t_res_70922 = sub64(mid_70913, (int64_t) 1);
                    
                    loopres_70920 = low_70910;
                    loopres_70921 = loopres_t_res_70922;
                } else {
                    int64_t loopres_f_res_70923 = add64((int64_t) 1, mid_70913);
                    
                    loopres_70920 = loopres_f_res_70923;
                    loopres_70921 = high_70911;
                }
                
                bool loop_cond_70924 = sle64(loopres_70920, loopres_70921);
                bool loop_while_tmp_71060 = loop_cond_70924;
                int64_t low_tmp_71061 = loopres_70920;
                int64_t high_tmp_71062 = loopres_70921;
                
                loop_while_70909 = loop_while_tmp_71060;
                low_70910 = low_tmp_71061;
                high_70911 = high_tmp_71062;
            }
            nearest_idx_70906 = loop_while_70909;
            nearest_idx_70907 = low_70910;
            nearest_idx_70908 = high_70911;
            
            int64_t max_arg_70925 = sub64(nearest_idx_70907, min_res_64084);
            int64_t max_res_70926 = smax64((int64_t) 0, max_arg_70925);
            int64_t j_70927 = add64(min_res_64084, max_res_70926);
            int64_t i_p_m_t_s_70928 = add64(m_64090, max_res_70926);
            bool zzero_leq_i_p_m_t_s_70929 = sle64((int64_t) 0,
                                                   i_p_m_t_s_70928);
            bool i_p_m_t_s_leq_w_70930 = slt64(i_p_m_t_s_70928, n_64064);
            bool zzero_lte_i_70931 = sle64((int64_t) 0, max_res_70926);
            bool i_lte_j_70932 = sle64(max_res_70926, j_70927);
            bool y_70933 = i_p_m_t_s_leq_w_70930 && zzero_lte_i_70931;
            bool y_70934 = zzero_leq_i_p_m_t_s_70929 && y_70933;
            bool y_70935 = i_lte_j_70932 && y_70934;
            bool forwards_ok_70936 = zzero_lte_i_70931 && y_70935;
            bool ok_or_empty_70937 = empty_slice_64089 || forwards_ok_70936;
            bool index_certs_70938;
            
            if (!ok_or_empty_70937) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70926, ":",
                              (long long) j_70927,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_70939;
            int64_t redout_70941 = (int64_t) 0;
            
            for (int64_t i_70940 = 0; i_70940 < min_res_64084; i_70940++) {
                int64_t slice_70942 = max_res_70926 + i_70940;
                int64_t x_70943 = ((int64_t *) mem_69675)[slice_70942];
                int64_t abs_arg_70944 = sub64(x_70943, defunc_0_g_res_70905);
                int64_t abs_res_70945 = abs64(abs_arg_70944);
                int64_t defunc_1_op_res_70946 = add64(abs_res_70945,
                                                      redout_70941);
                int64_t redout_tmp_71063 = defunc_1_op_res_70946;
                
                redout_70941 = redout_tmp_71063;
            }
            defunc_2_reduce_res_70939 = redout_70941;
            
            int64_t idx_70947;
            int64_t idx_70948;
            int64_t idx_70949;
            int64_t idx_70950;
            int64_t best_idx_70952;
            int64_t last_idx_70953;
            int64_t best_sum_70954;
            int64_t curr_sum_70955;
            
            best_idx_70952 = max_res_70926;
            last_idx_70953 = max_res_70926;
            best_sum_70954 = defunc_2_reduce_res_70939;
            curr_sum_70955 = defunc_2_reduce_res_70939;
            for (int64_t j_70951 = 0; j_70951 < min_res_64084; j_70951++) {
                int64_t new_idx_70956 = add64(max_res_70926, j_70951);
                int64_t x_70957 = add64(min_res_64084, new_idx_70956);
                bool cond_70958 = slt64(last_res_64114, x_70957);
                int64_t new_sum_70959;
                
                if (cond_70958) {
                    new_sum_70959 = (int64_t) 9223372036854775807;
                } else {
                    bool x_70960 = sle64((int64_t) 0, last_idx_70953);
                    bool y_70961 = slt64(last_idx_70953, n_64064);
                    bool bounds_check_70962 = x_70960 && y_70961;
                    bool index_certs_70963;
                    
                    if (!bounds_check_70962) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_70953,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_70964 = ((int64_t *) mem_69675)[last_idx_70953];
                    int64_t binop_p_70965 = sub64(defunc_0_g_res_70905,
                                                  y_70964);
                    int64_t defunc_0_f_res_70966 = abs64(binop_p_70965);
                    int64_t x_70967 = sub64(curr_sum_70955,
                                            defunc_0_f_res_70966);
                    int64_t min_arg_70968 = add64(min_res_64084,
                                                  last_idx_70953);
                    int64_t min_res_70969 = smin64(i_64078, min_arg_70968);
                    bool x_70970 = sle64((int64_t) 0, min_res_70969);
                    bool y_70971 = slt64(min_res_70969, n_64064);
                    bool bounds_check_70972 = x_70970 && y_70971;
                    bool index_certs_70973;
                    
                    if (!bounds_check_70972) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_70969,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_70974 = ((int64_t *) mem_69675)[min_res_70969];
                    int64_t binop_p_70975 = sub64(defunc_0_g_res_70905,
                                                  y_70974);
                    int64_t defunc_0_f_res_70976 = abs64(binop_p_70975);
                    int64_t new_sum_f_res_70977 = add64(x_70967,
                                                        defunc_0_f_res_70976);
                    
                    new_sum_70959 = new_sum_f_res_70977;
                }
                
                bool cond_70978 = sle64(new_sum_70959, best_sum_70954);
                int64_t loopres_70979;
                
                if (cond_70978) {
                    loopres_70979 = new_idx_70956;
                } else {
                    loopres_70979 = best_idx_70952;
                }
                
                int64_t loopres_70980;
                
                if (cond_70978) {
                    loopres_70980 = new_sum_70959;
                } else {
                    loopres_70980 = best_sum_70954;
                }
                
                int64_t best_idx_tmp_71064 = loopres_70979;
                int64_t last_idx_tmp_71065 = new_idx_70956;
                int64_t best_sum_tmp_71066 = loopres_70980;
                int64_t curr_sum_tmp_71067 = new_sum_70959;
                
                best_idx_70952 = best_idx_tmp_71064;
                last_idx_70953 = last_idx_tmp_71065;
                best_sum_70954 = best_sum_tmp_71066;
                curr_sum_70955 = curr_sum_tmp_71067;
            }
            idx_70947 = best_idx_70952;
            idx_70948 = last_idx_70953;
            idx_70949 = best_sum_70954;
            idx_70950 = curr_sum_70955;
            
            int64_t min_res_70981 = smin64(min_arg_64132, idx_70947);
            int64_t x_70982 = add64(min_res_64084, min_res_70981);
            int64_t r_70983 = sub64(x_70982, (int64_t) 1);
            bool x_70984 = sle64((int64_t) 0, r_70983);
            bool y_70985 = slt64(r_70983, n_64064);
            bool bounds_check_70986 = x_70984 && y_70985;
            bool index_certs_70987;
            
            if (!bounds_check_70986) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_70983,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_70988 = ((int64_t *) mem_69642)[r_70983];
            int64_t abs_arg_70989 = sub64(x_70988, min_res_70904);
            int64_t abs_res_70990 = abs64(abs_arg_70989);
            bool x_70991 = sle64((int64_t) 0, min_res_70981);
            bool y_70992 = slt64(min_res_70981, n_64064);
            bool bounds_check_70993 = x_70991 && y_70992;
            bool index_certs_70994;
            
            if (!bounds_check_70993) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70981,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_70995 = ((int64_t *) mem_69642)[min_res_70981];
            int64_t abs_arg_70996 = sub64(x_70995, min_res_70904);
            int64_t abs_res_70997 = abs64(abs_arg_70996);
            int64_t max_res_70998 = smax64(abs_res_70990, abs_res_70997);
            float defunc_0_f_res_70999 = sitofp_i64_f32(max_res_70998);
            float defunc_1_f_res_71000 = max_res_64136 + defunc_0_f_res_70999;
            float defunc_0_f_res_71001 = sitofp_i64_f32(min_res_70904);
            float defunc_2_reduce_res_71002;
            float redout_71004 = 0.0F;
            
            for (int64_t i_71003 = 0; i_71003 < q_64066; i_71003++) {
                float x_71005 = ((float *) mem_69714)[i_71003];
                bool cond_71006 = sle64(last_res_64114, i_71003);
                float defunc_0_f_res_71007;
                
                if (cond_71006) {
                    defunc_0_f_res_71007 = 0.0F;
                } else {
                    int64_t i_71008 = add64(min_res_70981, i_71003);
                    float x_71009 = ((float *) mem_69669)[i_71008];
                    float defunc_0_f_res_f_res_71010 = 1.0F + x_71009;
                    
                    defunc_0_f_res_71007 = defunc_0_f_res_f_res_71010;
                }
                
                float x_j_71011 = defunc_0_f_res_71007 - defunc_0_f_res_71001;
                float abs_res_71012 = (float) fabs(x_j_71011);
                float tmp1_71013 = abs_res_71012 / defunc_1_f_res_71000;
                float x_71014 = tmp1_71013 * tmp1_71013;
                float y_71015 = tmp1_71013 * x_71014;
                float tmp2_71016 = 1.0F - y_71015;
                float x_71017 = tmp2_71016 * tmp2_71016;
                float tmp3_71018 = tmp2_71016 * x_71017;
                float w_j_71019 = x_71005 * tmp3_71018;
                float defunc_1_op_res_71020 = w_j_71019 + redout_71004;
                float redout_tmp_71068 = defunc_1_op_res_71020;
                
                redout_71004 = redout_tmp_71068;
            }
            defunc_2_reduce_res_71002 = redout_71004;
            
            float a0_71021 = 1.0F / defunc_2_reduce_res_71002;
            float defunc_2_reduce_res_71022;
            float redout_71024 = 0.0F;
            
            for (int64_t i_71023 = 0; i_71023 < q_64066; i_71023++) {
                float x_71025 = ((float *) mem_69714)[i_71023];
                bool cond_71026 = sle64(last_res_64114, i_71023);
                float defunc_0_f_res_71027;
                
                if (cond_71026) {
                    defunc_0_f_res_71027 = 0.0F;
                } else {
                    int64_t i_71028 = add64(min_res_70981, i_71023);
                    float x_71029 = ((float *) mem_69669)[i_71028];
                    float defunc_0_f_res_f_res_71030 = 1.0F + x_71029;
                    
                    defunc_0_f_res_71027 = defunc_0_f_res_f_res_71030;
                }
                
                float x_j_71031 = defunc_0_f_res_71027 - defunc_0_f_res_71001;
                float abs_res_71032 = (float) fabs(x_j_71031);
                float tmp1_71033 = abs_res_71032 / defunc_1_f_res_71000;
                float x_71034 = tmp1_71033 * tmp1_71033;
                float y_71035 = tmp1_71033 * x_71034;
                float tmp2_71036 = 1.0F - y_71035;
                float x_71037 = tmp2_71036 * tmp2_71036;
                float tmp3_71038 = tmp2_71036 * x_71037;
                float tmp4_71039 = x_71025 * tmp3_71038;
                float defunc_0_f_res_71040;
                
                if (cond_71026) {
                    defunc_0_f_res_71040 = 0.0F;
                } else {
                    int64_t i_71041 = add64(min_res_70981, i_71023);
                    float x_71042 = ((float *) mem_69639)[i_71041];
                    
                    defunc_0_f_res_71040 = x_71042;
                }
                
                float x_71043 = a0_71021 * tmp4_71039;
                float defunc_9_fit_fun_res_71044 = defunc_0_f_res_71040 *
                      x_71043;
                float defunc_1_op_res_71045 = defunc_9_fit_fun_res_71044 +
                      redout_71024;
                float redout_tmp_71069 = defunc_1_op_res_71045;
                
                redout_71024 = redout_tmp_71069;
            }
            defunc_2_reduce_res_71022 = redout_71024;
            ((float *) mem_69729)[i_70901] = defunc_2_reduce_res_71022;
        }
        memmove(mem_69745.mem + gtid_65554 * n_m_64072 * (int64_t) 4,
                mem_69729 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69624);
    free(mem_69639);
    free(mem_69642);
    free(mem_69669);
    free(mem_69672);
    free(mem_69675);
    free(mem_69714);
    free(mem_69729);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76443_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76443_end -
                 futhark_mc_segmap_parloop_76443_start;
        
        ctx->futhark_mc_segmap_parloop_76443_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76443_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76443_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76441(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65553 = tid;
    int num_tasks_70861 = info.nsubtasks;
    struct futhark_mc_task_76440 *futhark_mc_task_76440 =
                                 (struct futhark_mc_task_76440 *) args;
    struct futhark_context *ctx = futhark_mc_task_76440->ctx;
    uint64_t futhark_mc_segmap_task_76441_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76441_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76440->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76440->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76440->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76440->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76440->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76440->free_i_64078;
    bool x_64079 = futhark_mc_task_76440->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76440->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76440->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76440->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76440->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76440->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69598 = futhark_mc_task_76440->free_bytes_69598;
    int64_t bytes_69601 = futhark_mc_task_76440->free_bytes_69601;
    int64_t bytes_69616 = futhark_mc_task_76440->free_bytes_69616;
    int64_t bytes_69619 = futhark_mc_task_76440->free_bytes_69619;
    struct memblock mem_69745 = {.desc ="mem_69745", .mem =
                                 futhark_mc_task_76440->free_mem_69745, .size =
                                 0, .references =NULL};
    int64_t iter_70862;
    struct futhark_mc_segmap_parloop_struct_76442
    futhark_mc_segmap_parloop_struct_76442;
    
    futhark_mc_segmap_parloop_struct_76442.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76442.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76442.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76442.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76442.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76442.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76442.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76442.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76442.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76442.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76442.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76442.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76442.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76442.free_bytes_69598 = bytes_69598;
    futhark_mc_segmap_parloop_struct_76442.free_bytes_69601 = bytes_69601;
    futhark_mc_segmap_parloop_struct_76442.free_bytes_69616 = bytes_69616;
    futhark_mc_segmap_parloop_struct_76442.free_bytes_69619 = bytes_69619;
    futhark_mc_segmap_parloop_struct_76442.free_mem_69745 = mem_69745.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76443_task;
    
    futhark_mc_segmap_parloop_76443_task.name =
        "futhark_mc_segmap_parloop_76443";
    futhark_mc_segmap_parloop_76443_task.fn = futhark_mc_segmap_parloop_76443;
    futhark_mc_segmap_parloop_76443_task.args =
        &futhark_mc_segmap_parloop_struct_76442;
    futhark_mc_segmap_parloop_76443_task.iterations = iterations;
    futhark_mc_segmap_parloop_76443_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76443_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76443_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76443_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76443_task);
    
    if (futhark_mc_segmap_parloop_76443_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76443_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76443_total_end -
                 futhark_mc_segmap_parloop_76443_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76443_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76443_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76443_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76441_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76441_end -
                 futhark_mc_segmap_task_76441_start;
        
        ctx->futhark_mc_segmap_task_76441_runs[tid]++;
        ctx->futhark_mc_segmap_task_76441_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76441_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76453 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69598;
    int64_t free_bytes_69601;
    int64_t free_bytes_69616;
    int64_t free_bytes_69619;
    char *free_mem_69745;
};
struct futhark_mc_task_76463 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_65556;
    char *free_Y_mem_69593;
    char *free_mem_69600;
};
struct futhark_mc_scan_stage_1_parloop_struct_76466 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_65556;
    char *free_Y_mem_69593;
    char *free_mem_69600;
};
static int futhark_mc_scan_stage_1_parloop_76467(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65557, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76466
    *futhark_mc_scan_stage_1_parloop_struct_76466 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76466 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76466->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76467_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76467_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76466->free_n_64064;
    int64_t gtid_65556 =
            futhark_mc_scan_stage_1_parloop_struct_76466->free_gtid_65556;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76466->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69600 = {.desc ="mem_69600", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76466->free_mem_69600,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71380 = start;
    int64_t x_71071;
    int64_t x_71072;
    
    x_71071 = (int64_t) 0;
    for (; iter_71380 < end; iter_71380++) {
        int64_t gtid_65558 = iter_71380;
        
        // stage 1 scan body
        {
            float x_71074 = ((float *) Y_mem_69593.mem)[gtid_65556 * n_64064 +
                                                        gtid_65558];
            bool isnan_res_71075;
            
            isnan_res_71075 = futrts_isnan32(x_71074);
            
            bool defunc_0_p_res_71076 = !isnan_res_71075;
            int64_t defunc_0_f_res_71077 = btoi_bool_i64(defunc_0_p_res_71076);
            
            // write mapped values results to memory
            { }
            x_71071 = x_71071;
            // Read next values
            {
                x_71072 = defunc_0_f_res_71077;
            }
            
            int64_t defunc_1_op_res_71073 = add64(x_71071, x_71072);
            
            ((int64_t *) mem_69600.mem)[gtid_65558] = defunc_1_op_res_71073;
            x_71071 = defunc_1_op_res_71073;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76467_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76467_end -
                 futhark_mc_scan_stage_1_parloop_76467_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76467_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76467_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76467_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76468 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_65556;
    char *free_Y_mem_69593;
    char *free_mem_69600;
};
static int futhark_mc_scan_stage_3_parloop_76469(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65557, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76468
    *futhark_mc_scan_stage_3_parloop_struct_76468 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76468 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76468->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76469_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76469_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76468->free_n_64064;
    int64_t gtid_65556 =
            futhark_mc_scan_stage_3_parloop_struct_76468->free_gtid_65556;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76468->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69600 = {.desc ="mem_69600", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76468->free_mem_69600,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71392 = start;
    int64_t x_71389;
    int64_t x_71390;
    
    if (iter_71392 == (int64_t) 0) {
        x_71389 = (int64_t) 0;
    } else {
        x_71389 = ((int64_t *) mem_69600.mem)[iter_71392 - (int64_t) 1];
    }
    for (; iter_71392 < end; iter_71392++) {
        int64_t gtid_65558 = iter_71392;
        
        // stage 3 scan body
        {
            float x_71074 = ((float *) Y_mem_69593.mem)[gtid_65556 * n_64064 +
                                                        gtid_65558];
            bool isnan_res_71075;
            
            isnan_res_71075 = futrts_isnan32(x_71074);
            
            bool defunc_0_p_res_71076 = !isnan_res_71075;
            int64_t defunc_0_f_res_71077 = btoi_bool_i64(defunc_0_p_res_71076);
            
            x_71389 = x_71389;
            x_71390 = defunc_0_f_res_71077;
            
            int64_t defunc_1_op_res_71391 = add64(x_71389, x_71390);
            
            ((int64_t *) mem_69600.mem)[gtid_65558] = defunc_1_op_res_71391;
            x_71389 = defunc_1_op_res_71391;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76469_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76469_end -
                 futhark_mc_scan_stage_3_parloop_76469_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76469_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76469_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76469_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76464(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65557 = tid;
    int num_tasks_71379 = info.nsubtasks;
    struct futhark_mc_task_76463 *futhark_mc_task_76463 =
                                 (struct futhark_mc_task_76463 *) args;
    struct futhark_context *ctx = futhark_mc_task_76463->ctx;
    uint64_t futhark_mc_segscan_task_76464_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76464_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76463->free_n_64064;
    int64_t gtid_65556 = futhark_mc_task_76463->free_gtid_65556;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76463->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69600 = {.desc ="mem_69600", .mem =
                                 futhark_mc_task_76463->free_mem_69600, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_71386_cached_sizze_76465 = 0;
    char *scan_stage_2_accum_mem_71386 = NULL;
    int64_t iter_71380;
    struct futhark_mc_scan_stage_1_parloop_struct_76466
    futhark_mc_scan_stage_1_parloop_struct_76466;
    
    futhark_mc_scan_stage_1_parloop_struct_76466.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76466.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76466.free_gtid_65556 = gtid_65556;
    futhark_mc_scan_stage_1_parloop_struct_76466.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76466.free_mem_69600 = mem_69600.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76467_task;
    
    futhark_mc_scan_stage_1_parloop_76467_task.name =
        "futhark_mc_scan_stage_1_parloop_76467";
    futhark_mc_scan_stage_1_parloop_76467_task.fn =
        futhark_mc_scan_stage_1_parloop_76467;
    futhark_mc_scan_stage_1_parloop_76467_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76466;
    futhark_mc_scan_stage_1_parloop_76467_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76467_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76467_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76467_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76467_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76467_task);
    
    if (futhark_mc_scan_stage_1_parloop_76467_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76467_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76467_total_end -
                 futhark_mc_scan_stage_1_parloop_76467_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76467_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76467_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76467_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_71379)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_71381;
        int64_t x_71382;
        int64_t offset_71384 = (int64_t) 0;
        int64_t offset_index_71385 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_71386_cached_sizze_76465 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_71386 = realloc(scan_stage_2_accum_mem_71386,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_71386_cached_sizze_76465 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_71386)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_71388 = 0; i_71388 < num_tasks_71379 - 1; i_71388++) {
            offset_71384 = squot64(n_64064, sext_i32_i64(num_tasks_71379));
            if (slt64(sext_i32_i64(i_71388), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_71379)))) {
                offset_71384 += (int64_t) 1;
            }
            offset_index_71385 += offset_71384;
            
            int64_t gtid_65558 = offset_index_71385;
            float x_71074 = ((float *) Y_mem_69593.mem)[gtid_65556 * n_64064 +
                                                        gtid_65558];
            bool isnan_res_71075;
            
            isnan_res_71075 = futrts_isnan32(x_71074);
            
            bool defunc_0_p_res_71076 = !isnan_res_71075;
            int64_t defunc_0_f_res_71077 = btoi_bool_i64(defunc_0_p_res_71076);
            
            // Read carry in
            {
                x_71381 =
                    ((int64_t *) scan_stage_2_accum_mem_71386)[(int64_t) 0];
            }
            // Read next values
            {
                x_71382 = ((int64_t *) mem_69600.mem)[offset_index_71385 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_71383 = add64(x_71381, x_71382);
            
            ((int64_t *) mem_69600.mem)[offset_index_71385 - (int64_t) 1] =
                defunc_1_op_res_71383;
            ((int64_t *) scan_stage_2_accum_mem_71386)[(int64_t) 0] =
                defunc_1_op_res_71383;
        }
        
        int64_t iter_71392 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76468
        futhark_mc_scan_stage_3_parloop_struct_76468;
        
        futhark_mc_scan_stage_3_parloop_struct_76468.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76468.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76468.free_gtid_65556 =
            gtid_65556;
        futhark_mc_scan_stage_3_parloop_struct_76468.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76468.free_mem_69600 =
            mem_69600.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76469_task;
        
        futhark_mc_scan_stage_3_parloop_76469_task.name =
            "futhark_mc_scan_stage_3_parloop_76469";
        futhark_mc_scan_stage_3_parloop_76469_task.fn =
            futhark_mc_scan_stage_3_parloop_76469;
        futhark_mc_scan_stage_3_parloop_76469_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76468;
        futhark_mc_scan_stage_3_parloop_76469_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76469_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76469_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76469_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76469_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76469_task);
        
        if (futhark_mc_scan_stage_3_parloop_76469_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76469_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76469_total_end -
                     futhark_mc_scan_stage_3_parloop_76469_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76469_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76469_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76469_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_71386);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76464_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76464_end -
                 futhark_mc_segscan_task_76464_start;
        
        ctx->futhark_mc_segscan_task_76464_runs[tid]++;
        ctx->futhark_mc_segscan_task_76464_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76464_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76470 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_65556;
    char *free_Y_mem_69593;
    char *free_mem_69600;
    char *free_mem_69603;
    char *free_mem_69606;
};
struct futhark_mc_segmap_parloop_struct_76472 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_65556;
    char *free_Y_mem_69593;
    char *free_mem_69600;
    char *free_mem_69603;
    char *free_mem_69606;
};
static int futhark_mc_segmap_parloop_76473(void *args, int64_t start,
                                           int64_t end, int flat_tid_65559,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76472
    *futhark_mc_segmap_parloop_struct_76472 =
    (struct futhark_mc_segmap_parloop_struct_76472 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76472->ctx;
    uint64_t futhark_mc_segmap_parloop_76473_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76473_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76472->free_n_64064;
    int64_t gtid_65556 =
            futhark_mc_segmap_parloop_struct_76472->free_gtid_65556;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76472->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69600 = {.desc ="mem_69600", .mem =
                                 futhark_mc_segmap_parloop_struct_76472->free_mem_69600,
                                 .size =0, .references =NULL};
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_segmap_parloop_struct_76472->free_mem_69603,
                                 .size =0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_segmap_parloop_struct_76472->free_mem_69606,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71396 = start;
    
    for (; iter_71396 < end; iter_71396++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71399 = n_64064;
        int64_t gtid_65560 = iter_71396;
        int64_t remnant_71400 = iter_71396 - gtid_65560;
        float x_71078 = ((float *) Y_mem_69593.mem)[gtid_65556 * n_64064 +
                                                    gtid_65560];
        bool isnan_res_71079;
        
        isnan_res_71079 = futrts_isnan32(x_71078);
        
        bool defunc_0_p_res_71080 = !isnan_res_71079;
        int64_t defunc_1_f_res_71081;
        
        if (defunc_0_p_res_71080) {
            int64_t x_71397 = ((int64_t *) mem_69600.mem)[gtid_65560];
            int64_t defunc_1_f_res_t_res_71398 = sub64(x_71397, (int64_t) 1);
            
            defunc_1_f_res_71081 = defunc_1_f_res_t_res_71398;
        } else {
            defunc_1_f_res_71081 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71081) &&
            slt64(defunc_1_f_res_71081, n_64064)) {
            ((int64_t *) mem_69606.mem)[defunc_1_f_res_71081] = gtid_65560;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71081) &&
            slt64(defunc_1_f_res_71081, n_64064)) {
            ((float *) mem_69603.mem)[defunc_1_f_res_71081] = x_71078;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76473_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76473_end -
                 futhark_mc_segmap_parloop_76473_start;
        
        ctx->futhark_mc_segmap_parloop_76473_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76473_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76473_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76471(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65559 = tid;
    int num_tasks_71395 = info.nsubtasks;
    struct futhark_mc_task_76470 *futhark_mc_task_76470 =
                                 (struct futhark_mc_task_76470 *) args;
    struct futhark_context *ctx = futhark_mc_task_76470->ctx;
    uint64_t futhark_mc_segmap_task_76471_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76471_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76470->free_n_64064;
    int64_t gtid_65556 = futhark_mc_task_76470->free_gtid_65556;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76470->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69600 = {.desc ="mem_69600", .mem =
                                 futhark_mc_task_76470->free_mem_69600, .size =
                                 0, .references =NULL};
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_task_76470->free_mem_69603, .size =
                                 0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_task_76470->free_mem_69606, .size =
                                 0, .references =NULL};
    int64_t iter_71396;
    struct futhark_mc_segmap_parloop_struct_76472
    futhark_mc_segmap_parloop_struct_76472;
    
    futhark_mc_segmap_parloop_struct_76472.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76472.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76472.free_gtid_65556 = gtid_65556;
    futhark_mc_segmap_parloop_struct_76472.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76472.free_mem_69600 = mem_69600.mem;
    futhark_mc_segmap_parloop_struct_76472.free_mem_69603 = mem_69603.mem;
    futhark_mc_segmap_parloop_struct_76472.free_mem_69606 = mem_69606.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76473_task;
    
    futhark_mc_segmap_parloop_76473_task.name =
        "futhark_mc_segmap_parloop_76473";
    futhark_mc_segmap_parloop_76473_task.fn = futhark_mc_segmap_parloop_76473;
    futhark_mc_segmap_parloop_76473_task.args =
        &futhark_mc_segmap_parloop_struct_76472;
    futhark_mc_segmap_parloop_76473_task.iterations = iterations;
    futhark_mc_segmap_parloop_76473_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76473_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76473_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76473_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76473_task);
    
    if (futhark_mc_segmap_parloop_76473_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76473_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76473_total_end -
                 futhark_mc_segmap_parloop_76473_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76473_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76473_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76473_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76471_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76471_end -
                 futhark_mc_segmap_task_76471_start;
        
        ctx->futhark_mc_segmap_task_76471_runs[tid]++;
        ctx->futhark_mc_segmap_task_76471_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76471_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76474 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69606;
    char *free_mem_69609;
    char *free_mem_69612;
    char *free_mem_69615;
};
struct futhark_mc_segmap_parloop_struct_76476 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69606;
    char *free_mem_69609;
    char *free_mem_69612;
    char *free_mem_69615;
};
static int futhark_mc_segmap_parloop_76477(void *args, int64_t start,
                                           int64_t end, int flat_tid_65561,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76476
    *futhark_mc_segmap_parloop_struct_76476 =
    (struct futhark_mc_segmap_parloop_struct_76476 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76476->ctx;
    uint64_t futhark_mc_segmap_parloop_76477_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76477_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76476->free_n_64064;
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_segmap_parloop_struct_76476->free_mem_69606,
                                 .size =0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_segmap_parloop_struct_76476->free_mem_69609,
                                 .size =0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_segmap_parloop_struct_76476->free_mem_69612,
                                 .size =0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_segmap_parloop_struct_76476->free_mem_69615,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71402 = start;
    
    for (; iter_71402 < end; iter_71402++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71403 = n_64064;
        int64_t gtid_65562 = iter_71402;
        int64_t remnant_71404 = iter_71402 - gtid_65562;
        int64_t x_71084 = ((int64_t *) mem_69606.mem)[gtid_65562];
        int64_t defunc_0_f_res_71085 = add64((int64_t) 1, x_71084);
        bool cond_71086 = slt64(defunc_0_f_res_71085, (int64_t) 0);
        int64_t defunc_0_f_res_71087;
        
        if (cond_71086) {
            defunc_0_f_res_71087 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_71087 = defunc_0_f_res_71085;
        }
        
        float defunc_0_f_res_71088 = sitofp_i64_f32(x_71084);
        
        ((float *) mem_69609.mem)[gtid_65562] = defunc_0_f_res_71088;
        ((int64_t *) mem_69612.mem)[gtid_65562] = defunc_0_f_res_71087;
        ((int64_t *) mem_69615.mem)[gtid_65562] = defunc_0_f_res_71085;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76477_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76477_end -
                 futhark_mc_segmap_parloop_76477_start;
        
        ctx->futhark_mc_segmap_parloop_76477_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76477_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76477_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76475(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65561 = tid;
    int num_tasks_71401 = info.nsubtasks;
    struct futhark_mc_task_76474 *futhark_mc_task_76474 =
                                 (struct futhark_mc_task_76474 *) args;
    struct futhark_context *ctx = futhark_mc_task_76474->ctx;
    uint64_t futhark_mc_segmap_task_76475_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76475_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76474->free_n_64064;
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_task_76474->free_mem_69606, .size =
                                 0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_task_76474->free_mem_69609, .size =
                                 0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_task_76474->free_mem_69612, .size =
                                 0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_task_76474->free_mem_69615, .size =
                                 0, .references =NULL};
    int64_t iter_71402;
    struct futhark_mc_segmap_parloop_struct_76476
    futhark_mc_segmap_parloop_struct_76476;
    
    futhark_mc_segmap_parloop_struct_76476.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76476.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76476.free_mem_69606 = mem_69606.mem;
    futhark_mc_segmap_parloop_struct_76476.free_mem_69609 = mem_69609.mem;
    futhark_mc_segmap_parloop_struct_76476.free_mem_69612 = mem_69612.mem;
    futhark_mc_segmap_parloop_struct_76476.free_mem_69615 = mem_69615.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76477_task;
    
    futhark_mc_segmap_parloop_76477_task.name =
        "futhark_mc_segmap_parloop_76477";
    futhark_mc_segmap_parloop_76477_task.fn = futhark_mc_segmap_parloop_76477;
    futhark_mc_segmap_parloop_76477_task.args =
        &futhark_mc_segmap_parloop_struct_76476;
    futhark_mc_segmap_parloop_76477_task.iterations = iterations;
    futhark_mc_segmap_parloop_76477_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76477_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76477_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76477_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76477_task);
    
    if (futhark_mc_segmap_parloop_76477_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76477_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76477_total_end -
                 futhark_mc_segmap_parloop_76477_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76477_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76477_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76477_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76475_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76475_end -
                 futhark_mc_segmap_task_76475_start;
        
        ctx->futhark_mc_segmap_task_76475_runs[tid]++;
        ctx->futhark_mc_segmap_task_76475_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76475_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76478 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_65730;
    char *free_mem_69618;
};
struct futhark_mc_segmap_parloop_struct_76480 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_65730;
    char *free_mem_69618;
};
static int futhark_mc_segmap_parloop_76481(void *args, int64_t start,
                                           int64_t end, int flat_tid_65563,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76480
    *futhark_mc_segmap_parloop_struct_76480 =
    (struct futhark_mc_segmap_parloop_struct_76480 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76480->ctx;
    uint64_t futhark_mc_segmap_parloop_76481_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76481_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76480->free_q_64066;
    int64_t last_res_65730 =
            futhark_mc_segmap_parloop_struct_76480->free_last_res_65730;
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_segmap_parloop_struct_76480->free_mem_69618,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71406 = start;
    
    for (; iter_71406 < end; iter_71406++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71407 = q_64066;
        int64_t gtid_65564 = iter_71406;
        int64_t remnant_71408 = iter_71406 - gtid_65564;
        bool cond_71089 = sle64(last_res_65730, gtid_65564);
        float defunc_0_f_res_71090;
        
        if (cond_71089) {
            defunc_0_f_res_71090 = 0.0F;
        } else {
            defunc_0_f_res_71090 = 1.0F;
        }
        ((float *) mem_69618.mem)[gtid_65564] = defunc_0_f_res_71090;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76481_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76481_end -
                 futhark_mc_segmap_parloop_76481_start;
        
        ctx->futhark_mc_segmap_parloop_76481_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76481_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76481_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76479(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65563 = tid;
    int num_tasks_71405 = info.nsubtasks;
    struct futhark_mc_task_76478 *futhark_mc_task_76478 =
                                 (struct futhark_mc_task_76478 *) args;
    struct futhark_context *ctx = futhark_mc_task_76478->ctx;
    uint64_t futhark_mc_segmap_task_76479_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76479_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76478->free_q_64066;
    int64_t last_res_65730 = futhark_mc_task_76478->free_last_res_65730;
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_task_76478->free_mem_69618, .size =
                                 0, .references =NULL};
    int64_t iter_71406;
    struct futhark_mc_segmap_parloop_struct_76480
    futhark_mc_segmap_parloop_struct_76480;
    
    futhark_mc_segmap_parloop_struct_76480.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76480.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76480.free_last_res_65730 = last_res_65730;
    futhark_mc_segmap_parloop_struct_76480.free_mem_69618 = mem_69618.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76481_task;
    
    futhark_mc_segmap_parloop_76481_task.name =
        "futhark_mc_segmap_parloop_76481";
    futhark_mc_segmap_parloop_76481_task.fn = futhark_mc_segmap_parloop_76481;
    futhark_mc_segmap_parloop_76481_task.args =
        &futhark_mc_segmap_parloop_struct_76480;
    futhark_mc_segmap_parloop_76481_task.iterations = iterations;
    futhark_mc_segmap_parloop_76481_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76481_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76481_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76481_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76481_task);
    
    if (futhark_mc_segmap_parloop_76481_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76481_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76481_total_end -
                 futhark_mc_segmap_parloop_76481_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76481_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76481_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76481_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76479_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76479_end -
                 futhark_mc_segmap_task_76479_start;
        
        ctx->futhark_mc_segmap_task_76479_runs[tid]++;
        ctx->futhark_mc_segmap_task_76479_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76479_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76482 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_65730;
    int64_t free_min_arg_65742;
    float free_max_res_65746;
    char *free_mem_69603;
    char *free_mem_69606;
    char *free_mem_69609;
    char *free_mem_69612;
    char *free_mem_69615;
    char *free_mem_69618;
    char *free_mem_69621;
};
struct futhark_mc_segmap_parloop_struct_76484 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_65730;
    int64_t free_min_arg_65742;
    float free_max_res_65746;
    char *free_mem_69603;
    char *free_mem_69606;
    char *free_mem_69609;
    char *free_mem_69612;
    char *free_mem_69615;
    char *free_mem_69618;
    char *free_mem_69621;
};
static int futhark_mc_segmap_parloop_76485(void *args, int64_t start,
                                           int64_t end, int flat_tid_65565,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76484
    *futhark_mc_segmap_parloop_struct_76484 =
    (struct futhark_mc_segmap_parloop_struct_76484 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76484->ctx;
    uint64_t futhark_mc_segmap_parloop_76485_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76485_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76484->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76484->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76484->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76484->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76484->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76484->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76484->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76484->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76484->free_m_64090;
    int64_t last_res_65730 =
            futhark_mc_segmap_parloop_struct_76484->free_last_res_65730;
    int64_t min_arg_65742 =
            futhark_mc_segmap_parloop_struct_76484->free_min_arg_65742;
    float max_res_65746 =
          futhark_mc_segmap_parloop_struct_76484->free_max_res_65746;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69603,
                                 .size =0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69606,
                                 .size =0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69609,
                                 .size =0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69612,
                                 .size =0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69615,
                                 .size =0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69618,
                                 .size =0, .references =NULL};
    struct memblock mem_69621 = {.desc ="mem_69621", .mem =
                                 futhark_mc_segmap_parloop_struct_76484->free_mem_69621,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71410 = start;
    
    for (; iter_71410 < end; iter_71410++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71505 = n_m_64072;
        int64_t gtid_65566 = iter_71410;
        int64_t remnant_71506 = iter_71410 - gtid_65566;
        int64_t min_arg_71234 = mul64(jump_64068, gtid_65566);
        int64_t min_res_71235 = smin64(i_64078, min_arg_71234);
        int64_t defunc_0_g_res_71236 = add64((int64_t) 1, min_res_71235);
        bool nearest_idx_71237;
        int64_t nearest_idx_71238;
        int64_t nearest_idx_71239;
        bool loop_while_71411;
        int64_t low_71412;
        int64_t high_71413;
        
        loop_while_71411 = x_64079;
        low_71412 = (int64_t) 0;
        high_71413 = i_64078;
        while (loop_while_71411) {
            int64_t x_71414 = add64(low_71412, high_71413);
            int64_t mid_71415 = sdiv64(x_71414, (int64_t) 2);
            bool x_71416 = sle64((int64_t) 0, mid_71415);
            bool y_71417 = slt64(mid_71415, n_64064);
            bool bounds_check_71418 = x_71416 && y_71417;
            bool index_certs_71419;
            
            if (!bounds_check_71418) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71415,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_71420 = ((int64_t *) mem_69612.mem)[mid_71415];
            bool cond_71421 = sle64(defunc_0_g_res_71236, x_71420);
            int64_t loopres_71422;
            int64_t loopres_71423;
            
            if (cond_71421) {
                int64_t loopres_t_res_71424 = sub64(mid_71415, (int64_t) 1);
                
                loopres_71422 = low_71412;
                loopres_71423 = loopres_t_res_71424;
            } else {
                int64_t loopres_f_res_71425 = add64((int64_t) 1, mid_71415);
                
                loopres_71422 = loopres_f_res_71425;
                loopres_71423 = high_71413;
            }
            
            bool loop_cond_71426 = sle64(loopres_71422, loopres_71423);
            bool loop_while_tmp_71507 = loop_cond_71426;
            int64_t low_tmp_71508 = loopres_71422;
            int64_t high_tmp_71509 = loopres_71423;
            
            loop_while_71411 = loop_while_tmp_71507;
            low_71412 = low_tmp_71508;
            high_71413 = high_tmp_71509;
        }
        nearest_idx_71237 = loop_while_71411;
        nearest_idx_71238 = low_71412;
        nearest_idx_71239 = high_71413;
        
        int64_t max_arg_71256 = sub64(nearest_idx_71238, min_res_64084);
        int64_t max_res_71257 = smax64((int64_t) 0, max_arg_71256);
        int64_t j_71258 = add64(min_res_64084, max_res_71257);
        int64_t i_p_m_t_s_71259 = add64(m_64090, max_res_71257);
        bool zzero_leq_i_p_m_t_s_71260 = sle64((int64_t) 0, i_p_m_t_s_71259);
        bool i_p_m_t_s_leq_w_71261 = slt64(i_p_m_t_s_71259, n_64064);
        bool zzero_lte_i_71262 = sle64((int64_t) 0, max_res_71257);
        bool i_lte_j_71263 = sle64(max_res_71257, j_71258);
        bool y_71264 = i_p_m_t_s_leq_w_71261 && zzero_lte_i_71262;
        bool y_71265 = zzero_leq_i_p_m_t_s_71260 && y_71264;
        bool y_71266 = i_lte_j_71263 && y_71265;
        bool forwards_ok_71267 = zzero_lte_i_71262 && y_71266;
        bool ok_or_empty_71268 = empty_slice_64089 || forwards_ok_71267;
        bool index_certs_71269;
        
        if (!ok_or_empty_71268) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71257, ":",
                          (long long) j_71258,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71270;
        int64_t redout_71428 = (int64_t) 0;
        
        for (int64_t i_71427 = 0; i_71427 < min_res_64084; i_71427++) {
            int64_t slice_71429 = max_res_71257 + i_71427;
            int64_t x_71430 = ((int64_t *) mem_69615.mem)[slice_71429];
            int64_t abs_arg_71431 = sub64(x_71430, defunc_0_g_res_71236);
            int64_t abs_res_71432 = abs64(abs_arg_71431);
            int64_t defunc_1_op_res_71433 = add64(abs_res_71432, redout_71428);
            int64_t redout_tmp_71510 = defunc_1_op_res_71433;
            
            redout_71428 = redout_tmp_71510;
        }
        defunc_2_reduce_res_71270 = redout_71428;
        
        int64_t idx_71278;
        int64_t idx_71279;
        int64_t idx_71280;
        int64_t idx_71281;
        int64_t best_idx_71435;
        int64_t last_idx_71436;
        int64_t best_sum_71437;
        int64_t curr_sum_71438;
        
        best_idx_71435 = max_res_71257;
        last_idx_71436 = max_res_71257;
        best_sum_71437 = defunc_2_reduce_res_71270;
        curr_sum_71438 = defunc_2_reduce_res_71270;
        for (int64_t j_71434 = 0; j_71434 < min_res_64084; j_71434++) {
            int64_t new_idx_71439 = add64(max_res_71257, j_71434);
            int64_t x_71440 = add64(min_res_64084, new_idx_71439);
            bool cond_71441 = slt64(last_res_65730, x_71440);
            int64_t new_sum_71442;
            
            if (cond_71441) {
                new_sum_71442 = (int64_t) 9223372036854775807;
            } else {
                bool x_71443 = sle64((int64_t) 0, last_idx_71436);
                bool y_71444 = slt64(last_idx_71436, n_64064);
                bool bounds_check_71445 = x_71443 && y_71444;
                bool index_certs_71446;
                
                if (!bounds_check_71445) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_71436,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_71447 = ((int64_t *) mem_69615.mem)[last_idx_71436];
                int64_t binop_p_71448 = sub64(defunc_0_g_res_71236, y_71447);
                int64_t defunc_0_f_res_71449 = abs64(binop_p_71448);
                int64_t x_71450 = sub64(curr_sum_71438, defunc_0_f_res_71449);
                int64_t min_arg_71451 = add64(min_res_64084, last_idx_71436);
                int64_t min_res_71452 = smin64(i_64078, min_arg_71451);
                bool x_71453 = sle64((int64_t) 0, min_res_71452);
                bool y_71454 = slt64(min_res_71452, n_64064);
                bool bounds_check_71455 = x_71453 && y_71454;
                bool index_certs_71456;
                
                if (!bounds_check_71455) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71452,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_71457 = ((int64_t *) mem_69615.mem)[min_res_71452];
                int64_t binop_p_71458 = sub64(defunc_0_g_res_71236, y_71457);
                int64_t defunc_0_f_res_71459 = abs64(binop_p_71458);
                int64_t new_sum_f_res_71460 = add64(x_71450,
                                                    defunc_0_f_res_71459);
                
                new_sum_71442 = new_sum_f_res_71460;
            }
            
            bool cond_71461 = sle64(new_sum_71442, best_sum_71437);
            int64_t loopres_71462;
            
            if (cond_71461) {
                loopres_71462 = new_idx_71439;
            } else {
                loopres_71462 = best_idx_71435;
            }
            
            int64_t loopres_71463;
            
            if (cond_71461) {
                loopres_71463 = new_sum_71442;
            } else {
                loopres_71463 = best_sum_71437;
            }
            
            int64_t best_idx_tmp_71511 = loopres_71462;
            int64_t last_idx_tmp_71512 = new_idx_71439;
            int64_t best_sum_tmp_71513 = loopres_71463;
            int64_t curr_sum_tmp_71514 = new_sum_71442;
            
            best_idx_71435 = best_idx_tmp_71511;
            last_idx_71436 = last_idx_tmp_71512;
            best_sum_71437 = best_sum_tmp_71513;
            curr_sum_71438 = curr_sum_tmp_71514;
        }
        idx_71278 = best_idx_71435;
        idx_71279 = last_idx_71436;
        idx_71280 = best_sum_71437;
        idx_71281 = curr_sum_71438;
        
        int64_t min_res_71312 = smin64(min_arg_65742, idx_71278);
        int64_t x_71313 = add64(min_res_64084, min_res_71312);
        int64_t r_71314 = sub64(x_71313, (int64_t) 1);
        bool x_71315 = sle64((int64_t) 0, r_71314);
        bool y_71316 = slt64(r_71314, n_64064);
        bool bounds_check_71317 = x_71315 && y_71316;
        bool index_certs_71318;
        
        if (!bounds_check_71317) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71314,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_71319 = ((int64_t *) mem_69606.mem)[r_71314];
        int64_t abs_arg_71320 = sub64(x_71319, min_res_71235);
        int64_t abs_res_71321 = abs64(abs_arg_71320);
        bool x_71322 = sle64((int64_t) 0, min_res_71312);
        bool y_71323 = slt64(min_res_71312, n_64064);
        bool bounds_check_71324 = x_71322 && y_71323;
        bool index_certs_71325;
        
        if (!bounds_check_71324) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71312,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_71326 = ((int64_t *) mem_69606.mem)[min_res_71312];
        int64_t abs_arg_71327 = sub64(x_71326, min_res_71235);
        int64_t abs_res_71328 = abs64(abs_arg_71327);
        int64_t max_res_71329 = smax64(abs_res_71321, abs_res_71328);
        float defunc_0_f_res_71330 = sitofp_i64_f32(max_res_71329);
        float defunc_1_f_res_71331 = max_res_65746 + defunc_0_f_res_71330;
        float defunc_0_f_res_71332 = sitofp_i64_f32(min_res_71235);
        float defunc_2_reduce_res_71333;
        float redout_71465 = 0.0F;
        
        for (int64_t i_71464 = 0; i_71464 < q_64066; i_71464++) {
            float x_71466 = ((float *) mem_69618.mem)[i_71464];
            bool cond_71467 = sle64(last_res_65730, i_71464);
            float defunc_0_f_res_71468;
            
            if (cond_71467) {
                defunc_0_f_res_71468 = 0.0F;
            } else {
                int64_t i_71469 = add64(min_res_71312, i_71464);
                float x_71470 = ((float *) mem_69609.mem)[i_71469];
                float defunc_0_f_res_f_res_71471 = 1.0F + x_71470;
                
                defunc_0_f_res_71468 = defunc_0_f_res_f_res_71471;
            }
            
            float x_j_71472 = defunc_0_f_res_71468 - defunc_0_f_res_71332;
            float abs_res_71473 = (float) fabs(x_j_71472);
            float tmp1_71474 = abs_res_71473 / defunc_1_f_res_71331;
            float x_71475 = tmp1_71474 * tmp1_71474;
            float y_71476 = tmp1_71474 * x_71475;
            float tmp2_71477 = 1.0F - y_71476;
            float x_71478 = tmp2_71477 * tmp2_71477;
            float tmp3_71479 = tmp2_71477 * x_71478;
            float w_j_71480 = x_71466 * tmp3_71479;
            float defunc_1_op_res_71481 = w_j_71480 + redout_71465;
            float redout_tmp_71515 = defunc_1_op_res_71481;
            
            redout_71465 = redout_tmp_71515;
        }
        defunc_2_reduce_res_71333 = redout_71465;
        
        float a0_71352 = 1.0F / defunc_2_reduce_res_71333;
        float defunc_2_reduce_res_71353;
        float redout_71483 = 0.0F;
        
        for (int64_t i_71482 = 0; i_71482 < q_64066; i_71482++) {
            float x_71484 = ((float *) mem_69618.mem)[i_71482];
            bool cond_71485 = sle64(last_res_65730, i_71482);
            float defunc_0_f_res_71486;
            
            if (cond_71485) {
                defunc_0_f_res_71486 = 0.0F;
            } else {
                int64_t i_71487 = add64(min_res_71312, i_71482);
                float x_71488 = ((float *) mem_69609.mem)[i_71487];
                float defunc_0_f_res_f_res_71489 = 1.0F + x_71488;
                
                defunc_0_f_res_71486 = defunc_0_f_res_f_res_71489;
            }
            
            float x_j_71490 = defunc_0_f_res_71486 - defunc_0_f_res_71332;
            float abs_res_71491 = (float) fabs(x_j_71490);
            float tmp1_71492 = abs_res_71491 / defunc_1_f_res_71331;
            float x_71493 = tmp1_71492 * tmp1_71492;
            float y_71494 = tmp1_71492 * x_71493;
            float tmp2_71495 = 1.0F - y_71494;
            float x_71496 = tmp2_71495 * tmp2_71495;
            float tmp3_71497 = tmp2_71495 * x_71496;
            float tmp4_71498 = x_71484 * tmp3_71497;
            float defunc_0_f_res_71499;
            
            if (cond_71485) {
                defunc_0_f_res_71499 = 0.0F;
            } else {
                int64_t i_71500 = add64(min_res_71312, i_71482);
                float x_71501 = ((float *) mem_69603.mem)[i_71500];
                
                defunc_0_f_res_71499 = x_71501;
            }
            
            float x_71502 = a0_71352 * tmp4_71498;
            float defunc_9_fit_fun_res_71503 = defunc_0_f_res_71499 * x_71502;
            float defunc_1_op_res_71504 = defunc_9_fit_fun_res_71503 +
                  redout_71483;
            float redout_tmp_71516 = defunc_1_op_res_71504;
            
            redout_71483 = redout_tmp_71516;
        }
        defunc_2_reduce_res_71353 = redout_71483;
        ((float *) mem_69621.mem)[gtid_65566] = defunc_2_reduce_res_71353;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76485_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76485_end -
                 futhark_mc_segmap_parloop_76485_start;
        
        ctx->futhark_mc_segmap_parloop_76485_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76485_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76485_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76483(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65565 = tid;
    int num_tasks_71409 = info.nsubtasks;
    struct futhark_mc_task_76482 *futhark_mc_task_76482 =
                                 (struct futhark_mc_task_76482 *) args;
    struct futhark_context *ctx = futhark_mc_task_76482->ctx;
    uint64_t futhark_mc_segmap_task_76483_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76483_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76482->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76482->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76482->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76482->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76482->free_i_64078;
    bool x_64079 = futhark_mc_task_76482->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76482->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76482->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76482->free_m_64090;
    int64_t last_res_65730 = futhark_mc_task_76482->free_last_res_65730;
    int64_t min_arg_65742 = futhark_mc_task_76482->free_min_arg_65742;
    float max_res_65746 = futhark_mc_task_76482->free_max_res_65746;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_task_76482->free_mem_69603, .size =
                                 0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_task_76482->free_mem_69606, .size =
                                 0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_task_76482->free_mem_69609, .size =
                                 0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_task_76482->free_mem_69612, .size =
                                 0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_task_76482->free_mem_69615, .size =
                                 0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_task_76482->free_mem_69618, .size =
                                 0, .references =NULL};
    struct memblock mem_69621 = {.desc ="mem_69621", .mem =
                                 futhark_mc_task_76482->free_mem_69621, .size =
                                 0, .references =NULL};
    int64_t iter_71410;
    struct futhark_mc_segmap_parloop_struct_76484
    futhark_mc_segmap_parloop_struct_76484;
    
    futhark_mc_segmap_parloop_struct_76484.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76484.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76484.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76484.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76484.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76484.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76484.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76484.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76484.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76484.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76484.free_last_res_65730 = last_res_65730;
    futhark_mc_segmap_parloop_struct_76484.free_min_arg_65742 = min_arg_65742;
    futhark_mc_segmap_parloop_struct_76484.free_max_res_65746 = max_res_65746;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69603 = mem_69603.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69606 = mem_69606.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69609 = mem_69609.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69612 = mem_69612.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69615 = mem_69615.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69618 = mem_69618.mem;
    futhark_mc_segmap_parloop_struct_76484.free_mem_69621 = mem_69621.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76485_task;
    
    futhark_mc_segmap_parloop_76485_task.name =
        "futhark_mc_segmap_parloop_76485";
    futhark_mc_segmap_parloop_76485_task.fn = futhark_mc_segmap_parloop_76485;
    futhark_mc_segmap_parloop_76485_task.args =
        &futhark_mc_segmap_parloop_struct_76484;
    futhark_mc_segmap_parloop_76485_task.iterations = iterations;
    futhark_mc_segmap_parloop_76485_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76485_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76485_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76485_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76485_task);
    
    if (futhark_mc_segmap_parloop_76485_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76485_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76485_total_end -
                 futhark_mc_segmap_parloop_76485_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76485_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76485_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76485_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76483_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76483_end -
                 futhark_mc_segmap_task_76483_start;
        
        ctx->futhark_mc_segmap_task_76483_runs[tid]++;
        ctx->futhark_mc_segmap_task_76483_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76483_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76487 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_65730;
    int64_t free_min_arg_65742;
    float free_max_res_65746;
    char *free_mem_69603;
    char *free_mem_69606;
    char *free_mem_69609;
    char *free_mem_69612;
    char *free_mem_69615;
    char *free_mem_69618;
    char *free_mem_69621;
};
struct futhark_mc_task_76489 {
    struct futhark_context *ctx;
    char *free_mem_69615;
    int64_t free_defunc_0_g_res_71093;
    int64_t free_max_res_71114;
    int64_t *retval_defunc_2_reduce_res_71127;
};
struct futhark_mc_segred_stage_1_parloop_struct_76492 {
    struct futhark_context *ctx;
    char *free_mem_69615;
    int64_t free_defunc_0_g_res_71093;
    int64_t free_max_res_71114;
    char *free_reduce_stage_1_tid_res_arr_mem_71618;
};
static int futhark_mc_segred_stage_1_parloop_76493(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65569, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76492
    *futhark_mc_segred_stage_1_parloop_struct_76492 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76492 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76492->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76493_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76493_start = get_wall_time();
    
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76492->free_mem_69615,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_71093 =
            futhark_mc_segred_stage_1_parloop_struct_76492->free_defunc_0_g_res_71093;
    int64_t max_res_71114 =
            futhark_mc_segred_stage_1_parloop_struct_76492->free_max_res_71114;
    struct memblock reduce_stage_1_tid_res_arr_mem_71618 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71618",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76492->free_reduce_stage_1_tid_res_arr_mem_71618,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71620 = start;
    int64_t x_71534;
    int64_t x_71535;
    int64_t local_acc_71621 = (int64_t) 0;
    
    for (; iter_71620 < end; iter_71620++) {
        int64_t gtid_65570 = iter_71620;
        int64_t slice_71537 = gtid_65570 + max_res_71114;
        int64_t x_71538 = ((int64_t *) mem_69615.mem)[slice_71537];
        int64_t abs_arg_71539 = sub64(x_71538, defunc_0_g_res_71093);
        int64_t abs_res_71540 = abs64(abs_arg_71539);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71534 = local_acc_71621;
        }
        // Load next params
        {
            x_71535 = abs_res_71540;
        }
        // Red body
        {
            int64_t defunc_1_op_res_71536 = add64(x_71534, x_71535);
            
            local_acc_71621 = defunc_1_op_res_71536;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_71618.mem)[flat_tid_65569] =
        local_acc_71621;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76493_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76493_end -
                 futhark_mc_segred_stage_1_parloop_76493_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76493_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76493_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76493_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76490(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65569 = tid;
    int num_tasks_71617 = info.nsubtasks;
    struct futhark_mc_task_76489 *futhark_mc_task_76489 =
                                 (struct futhark_mc_task_76489 *) args;
    struct futhark_context *ctx = futhark_mc_task_76489->ctx;
    uint64_t futhark_mc_segred_task_76490_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76490_start = get_wall_time();
    
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_task_76489->free_mem_69615, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_71093 =
            futhark_mc_task_76489->free_defunc_0_g_res_71093;
    int64_t max_res_71114 = futhark_mc_task_76489->free_max_res_71114;
    int64_t defunc_2_reduce_res_71127 =
            *futhark_mc_task_76489->retval_defunc_2_reduce_res_71127;
    size_t reduce_stage_1_tid_res_arr_mem_71618_cached_sizze_76491 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71618 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71618_cached_sizze_76491 <
        (size_t) ((int64_t) 8 * num_tasks_71617)) {
        reduce_stage_1_tid_res_arr_mem_71618 =
            realloc(reduce_stage_1_tid_res_arr_mem_71618, (int64_t) 8 *
                    num_tasks_71617);
        reduce_stage_1_tid_res_arr_mem_71618_cached_sizze_76491 = (int64_t) 8 *
            num_tasks_71617;
    }
    
    int64_t iter_71620;
    struct futhark_mc_segred_stage_1_parloop_struct_76492
    futhark_mc_segred_stage_1_parloop_struct_76492;
    
    futhark_mc_segred_stage_1_parloop_struct_76492.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76492.free_mem_69615 =
        mem_69615.mem;
    futhark_mc_segred_stage_1_parloop_struct_76492.free_defunc_0_g_res_71093 =
        defunc_0_g_res_71093;
    futhark_mc_segred_stage_1_parloop_struct_76492.free_max_res_71114 =
        max_res_71114;
    futhark_mc_segred_stage_1_parloop_struct_76492.free_reduce_stage_1_tid_res_arr_mem_71618 =
        reduce_stage_1_tid_res_arr_mem_71618;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76493_task;
    
    futhark_mc_segred_stage_1_parloop_76493_task.name =
        "futhark_mc_segred_stage_1_parloop_76493";
    futhark_mc_segred_stage_1_parloop_76493_task.fn =
        futhark_mc_segred_stage_1_parloop_76493;
    futhark_mc_segred_stage_1_parloop_76493_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76492;
    futhark_mc_segred_stage_1_parloop_76493_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76493_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76493_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76493_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76493_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76493_task);
    
    if (futhark_mc_segred_stage_1_parloop_76493_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76493_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76493_total_end -
                 futhark_mc_segred_stage_1_parloop_76493_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76493_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76493_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76493_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71127 = (int64_t) 0;
    }
    
    int64_t x_71622;
    int64_t x_71623;
    
    for (int32_t i_71625 = 0; i_71625 < num_tasks_71617; i_71625++) {
        flat_tid_65569 = i_71625;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71622 = defunc_2_reduce_res_71127;
            }
            // load next params
            {
                x_71623 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_71618)[flat_tid_65569];
            }
            // red body
            {
                int64_t defunc_1_op_res_71624 = add64(x_71622, x_71623);
                
                defunc_2_reduce_res_71127 = defunc_1_op_res_71624;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71618);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76490_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76490_end -
                 futhark_mc_segred_task_76490_start;
        
        ctx->futhark_mc_segred_task_76490_runs[tid]++;
        ctx->futhark_mc_segred_task_76490_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76490_iter[tid] += iterations;
    }
    *futhark_mc_task_76489->retval_defunc_2_reduce_res_71127 =
        defunc_2_reduce_res_71127;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76494 {
    struct futhark_context *ctx;
    int64_t free_last_res_65730;
    char *free_mem_69609;
    char *free_mem_69618;
    int64_t free_min_res_71169;
    float free_defunc_1_f_res_71188;
    float free_defunc_0_f_res_71189;
    float *retval_defunc_2_reduce_res_71190;
};
struct futhark_mc_segred_stage_1_parloop_struct_76497 {
    struct futhark_context *ctx;
    int64_t free_last_res_65730;
    char *free_mem_69609;
    char *free_mem_69618;
    int64_t free_min_res_71169;
    float free_defunc_1_f_res_71188;
    float free_defunc_0_f_res_71189;
    char *free_reduce_stage_1_tid_res_arr_mem_71631;
};
static int futhark_mc_segred_stage_1_parloop_76498(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65571, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76497
    *futhark_mc_segred_stage_1_parloop_struct_76497 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76497 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76497->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76498_start = get_wall_time();
    
    int64_t last_res_65730 =
            futhark_mc_segred_stage_1_parloop_struct_76497->free_last_res_65730;
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76497->free_mem_69609,
                                 .size =0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76497->free_mem_69618,
                                 .size =0, .references =NULL};
    int64_t min_res_71169 =
            futhark_mc_segred_stage_1_parloop_struct_76497->free_min_res_71169;
    float defunc_1_f_res_71188 =
          futhark_mc_segred_stage_1_parloop_struct_76497->free_defunc_1_f_res_71188;
    float defunc_0_f_res_71189 =
          futhark_mc_segred_stage_1_parloop_struct_76497->free_defunc_0_f_res_71189;
    struct memblock reduce_stage_1_tid_res_arr_mem_71631 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71631",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76497->free_reduce_stage_1_tid_res_arr_mem_71631,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71633 = start;
    float x_71571;
    float x_71572;
    float local_acc_71634 = 0.0F;
    
    for (; iter_71633 < end; iter_71633++) {
        int64_t gtid_65572 = iter_71633;
        float x_71574 = ((float *) mem_69618.mem)[gtid_65572];
        bool cond_71575 = sle64(last_res_65730, gtid_65572);
        float defunc_0_f_res_71576;
        
        if (cond_71575) {
            defunc_0_f_res_71576 = 0.0F;
        } else {
            int64_t i_71577 = add64(gtid_65572, min_res_71169);
            float x_71578 = ((float *) mem_69609.mem)[i_71577];
            float defunc_0_f_res_f_res_71579 = 1.0F + x_71578;
            
            defunc_0_f_res_71576 = defunc_0_f_res_f_res_71579;
        }
        
        float x_j_71580 = defunc_0_f_res_71576 - defunc_0_f_res_71189;
        float abs_res_71581 = (float) fabs(x_j_71580);
        float tmp1_71582 = abs_res_71581 / defunc_1_f_res_71188;
        float x_71583 = tmp1_71582 * tmp1_71582;
        float y_71584 = tmp1_71582 * x_71583;
        float tmp2_71585 = 1.0F - y_71584;
        float x_71586 = tmp2_71585 * tmp2_71585;
        float tmp3_71587 = tmp2_71585 * x_71586;
        float w_j_71588 = x_71574 * tmp3_71587;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71571 = local_acc_71634;
        }
        // Load next params
        {
            x_71572 = w_j_71588;
        }
        // Red body
        {
            float defunc_1_op_res_71573 = x_71571 + x_71572;
            
            local_acc_71634 = defunc_1_op_res_71573;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71631.mem)[flat_tid_65571] =
        local_acc_71634;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76498_end -
                 futhark_mc_segred_stage_1_parloop_76498_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76498_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76498_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76498_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76495(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65571 = tid;
    int num_tasks_71630 = info.nsubtasks;
    struct futhark_mc_task_76494 *futhark_mc_task_76494 =
                                 (struct futhark_mc_task_76494 *) args;
    struct futhark_context *ctx = futhark_mc_task_76494->ctx;
    uint64_t futhark_mc_segred_task_76495_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76495_start = get_wall_time();
    
    int64_t last_res_65730 = futhark_mc_task_76494->free_last_res_65730;
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_task_76494->free_mem_69609, .size =
                                 0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_task_76494->free_mem_69618, .size =
                                 0, .references =NULL};
    int64_t min_res_71169 = futhark_mc_task_76494->free_min_res_71169;
    float defunc_1_f_res_71188 =
          futhark_mc_task_76494->free_defunc_1_f_res_71188;
    float defunc_0_f_res_71189 =
          futhark_mc_task_76494->free_defunc_0_f_res_71189;
    float defunc_2_reduce_res_71190 =
          *futhark_mc_task_76494->retval_defunc_2_reduce_res_71190;
    size_t reduce_stage_1_tid_res_arr_mem_71631_cached_sizze_76496 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71631 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71631_cached_sizze_76496 <
        (size_t) ((int64_t) 4 * num_tasks_71630)) {
        reduce_stage_1_tid_res_arr_mem_71631 =
            realloc(reduce_stage_1_tid_res_arr_mem_71631, (int64_t) 4 *
                    num_tasks_71630);
        reduce_stage_1_tid_res_arr_mem_71631_cached_sizze_76496 = (int64_t) 4 *
            num_tasks_71630;
    }
    
    int64_t iter_71633;
    struct futhark_mc_segred_stage_1_parloop_struct_76497
    futhark_mc_segred_stage_1_parloop_struct_76497;
    
    futhark_mc_segred_stage_1_parloop_struct_76497.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_last_res_65730 =
        last_res_65730;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_mem_69609 =
        mem_69609.mem;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_mem_69618 =
        mem_69618.mem;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_min_res_71169 =
        min_res_71169;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_defunc_1_f_res_71188 =
        defunc_1_f_res_71188;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_defunc_0_f_res_71189 =
        defunc_0_f_res_71189;
    futhark_mc_segred_stage_1_parloop_struct_76497.free_reduce_stage_1_tid_res_arr_mem_71631 =
        reduce_stage_1_tid_res_arr_mem_71631;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76498_task;
    
    futhark_mc_segred_stage_1_parloop_76498_task.name =
        "futhark_mc_segred_stage_1_parloop_76498";
    futhark_mc_segred_stage_1_parloop_76498_task.fn =
        futhark_mc_segred_stage_1_parloop_76498;
    futhark_mc_segred_stage_1_parloop_76498_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76497;
    futhark_mc_segred_stage_1_parloop_76498_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76498_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76498_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76498_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76498_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76498_task);
    
    if (futhark_mc_segred_stage_1_parloop_76498_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76498_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76498_total_end -
                 futhark_mc_segred_stage_1_parloop_76498_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76498_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76498_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76498_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71190 = 0.0F;
    }
    
    float x_71635;
    float x_71636;
    
    for (int32_t i_71638 = 0; i_71638 < num_tasks_71630; i_71638++) {
        flat_tid_65571 = i_71638;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71635 = defunc_2_reduce_res_71190;
            }
            // load next params
            {
                x_71636 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71631)[flat_tid_65571];
            }
            // red body
            {
                float defunc_1_op_res_71637 = x_71635 + x_71636;
                
                defunc_2_reduce_res_71190 = defunc_1_op_res_71637;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71631);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76495_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76495_end -
                 futhark_mc_segred_task_76495_start;
        
        ctx->futhark_mc_segred_task_76495_runs[tid]++;
        ctx->futhark_mc_segred_task_76495_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76495_iter[tid] += iterations;
    }
    *futhark_mc_task_76494->retval_defunc_2_reduce_res_71190 =
        defunc_2_reduce_res_71190;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76499 {
    struct futhark_context *ctx;
    int64_t free_last_res_65730;
    char *free_mem_69603;
    char *free_mem_69609;
    char *free_mem_69618;
    int64_t free_min_res_71169;
    float free_defunc_1_f_res_71188;
    float free_defunc_0_f_res_71189;
    float free_a0_71209;
    float *retval_defunc_2_reduce_res_71210;
};
struct futhark_mc_segred_stage_1_parloop_struct_76502 {
    struct futhark_context *ctx;
    int64_t free_last_res_65730;
    char *free_mem_69603;
    char *free_mem_69609;
    char *free_mem_69618;
    int64_t free_min_res_71169;
    float free_defunc_1_f_res_71188;
    float free_defunc_0_f_res_71189;
    float free_a0_71209;
    char *free_reduce_stage_1_tid_res_arr_mem_71640;
};
static int futhark_mc_segred_stage_1_parloop_76503(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65573, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76502
    *futhark_mc_segred_stage_1_parloop_struct_76502 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76502 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76502->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76503_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76503_start = get_wall_time();
    
    int64_t last_res_65730 =
            futhark_mc_segred_stage_1_parloop_struct_76502->free_last_res_65730;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76502->free_mem_69603,
                                 .size =0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76502->free_mem_69609,
                                 .size =0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76502->free_mem_69618,
                                 .size =0, .references =NULL};
    int64_t min_res_71169 =
            futhark_mc_segred_stage_1_parloop_struct_76502->free_min_res_71169;
    float defunc_1_f_res_71188 =
          futhark_mc_segred_stage_1_parloop_struct_76502->free_defunc_1_f_res_71188;
    float defunc_0_f_res_71189 =
          futhark_mc_segred_stage_1_parloop_struct_76502->free_defunc_0_f_res_71189;
    float a0_71209 =
          futhark_mc_segred_stage_1_parloop_struct_76502->free_a0_71209;
    struct memblock reduce_stage_1_tid_res_arr_mem_71640 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71640",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76502->free_reduce_stage_1_tid_res_arr_mem_71640,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71642 = start;
    float x_71589;
    float x_71590;
    float local_acc_71643 = 0.0F;
    
    for (; iter_71642 < end; iter_71642++) {
        int64_t gtid_65574 = iter_71642;
        float x_71592 = ((float *) mem_69618.mem)[gtid_65574];
        bool cond_71593 = sle64(last_res_65730, gtid_65574);
        float defunc_0_f_res_71594;
        
        if (cond_71593) {
            defunc_0_f_res_71594 = 0.0F;
        } else {
            int64_t i_71595 = add64(gtid_65574, min_res_71169);
            float x_71596 = ((float *) mem_69609.mem)[i_71595];
            float defunc_0_f_res_f_res_71597 = 1.0F + x_71596;
            
            defunc_0_f_res_71594 = defunc_0_f_res_f_res_71597;
        }
        
        float x_j_71598 = defunc_0_f_res_71594 - defunc_0_f_res_71189;
        float abs_res_71599 = (float) fabs(x_j_71598);
        float tmp1_71600 = abs_res_71599 / defunc_1_f_res_71188;
        float x_71601 = tmp1_71600 * tmp1_71600;
        float y_71602 = tmp1_71600 * x_71601;
        float tmp2_71603 = 1.0F - y_71602;
        float x_71604 = tmp2_71603 * tmp2_71603;
        float tmp3_71605 = tmp2_71603 * x_71604;
        float tmp4_71606 = x_71592 * tmp3_71605;
        float defunc_0_f_res_71607;
        
        if (cond_71593) {
            defunc_0_f_res_71607 = 0.0F;
        } else {
            int64_t i_71608 = add64(gtid_65574, min_res_71169);
            float x_71609 = ((float *) mem_69603.mem)[i_71608];
            
            defunc_0_f_res_71607 = x_71609;
        }
        
        float x_71610 = a0_71209 * tmp4_71606;
        float defunc_9_fit_fun_res_71611 = defunc_0_f_res_71607 * x_71610;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71589 = local_acc_71643;
        }
        // Load next params
        {
            x_71590 = defunc_9_fit_fun_res_71611;
        }
        // Red body
        {
            float defunc_1_op_res_71591 = x_71589 + x_71590;
            
            local_acc_71643 = defunc_1_op_res_71591;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71640.mem)[flat_tid_65573] =
        local_acc_71643;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76503_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76503_end -
                 futhark_mc_segred_stage_1_parloop_76503_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76503_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76503_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76503_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76500(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65573 = tid;
    int num_tasks_71639 = info.nsubtasks;
    struct futhark_mc_task_76499 *futhark_mc_task_76499 =
                                 (struct futhark_mc_task_76499 *) args;
    struct futhark_context *ctx = futhark_mc_task_76499->ctx;
    uint64_t futhark_mc_segred_task_76500_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76500_start = get_wall_time();
    
    int64_t last_res_65730 = futhark_mc_task_76499->free_last_res_65730;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_task_76499->free_mem_69603, .size =
                                 0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_task_76499->free_mem_69609, .size =
                                 0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_task_76499->free_mem_69618, .size =
                                 0, .references =NULL};
    int64_t min_res_71169 = futhark_mc_task_76499->free_min_res_71169;
    float defunc_1_f_res_71188 =
          futhark_mc_task_76499->free_defunc_1_f_res_71188;
    float defunc_0_f_res_71189 =
          futhark_mc_task_76499->free_defunc_0_f_res_71189;
    float a0_71209 = futhark_mc_task_76499->free_a0_71209;
    float defunc_2_reduce_res_71210 =
          *futhark_mc_task_76499->retval_defunc_2_reduce_res_71210;
    size_t reduce_stage_1_tid_res_arr_mem_71640_cached_sizze_76501 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71640 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71640_cached_sizze_76501 <
        (size_t) ((int64_t) 4 * num_tasks_71639)) {
        reduce_stage_1_tid_res_arr_mem_71640 =
            realloc(reduce_stage_1_tid_res_arr_mem_71640, (int64_t) 4 *
                    num_tasks_71639);
        reduce_stage_1_tid_res_arr_mem_71640_cached_sizze_76501 = (int64_t) 4 *
            num_tasks_71639;
    }
    
    int64_t iter_71642;
    struct futhark_mc_segred_stage_1_parloop_struct_76502
    futhark_mc_segred_stage_1_parloop_struct_76502;
    
    futhark_mc_segred_stage_1_parloop_struct_76502.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_last_res_65730 =
        last_res_65730;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_mem_69603 =
        mem_69603.mem;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_mem_69609 =
        mem_69609.mem;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_mem_69618 =
        mem_69618.mem;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_min_res_71169 =
        min_res_71169;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_defunc_1_f_res_71188 =
        defunc_1_f_res_71188;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_defunc_0_f_res_71189 =
        defunc_0_f_res_71189;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_a0_71209 = a0_71209;
    futhark_mc_segred_stage_1_parloop_struct_76502.free_reduce_stage_1_tid_res_arr_mem_71640 =
        reduce_stage_1_tid_res_arr_mem_71640;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76503_task;
    
    futhark_mc_segred_stage_1_parloop_76503_task.name =
        "futhark_mc_segred_stage_1_parloop_76503";
    futhark_mc_segred_stage_1_parloop_76503_task.fn =
        futhark_mc_segred_stage_1_parloop_76503;
    futhark_mc_segred_stage_1_parloop_76503_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76502;
    futhark_mc_segred_stage_1_parloop_76503_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76503_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76503_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76503_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76503_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76503_task);
    
    if (futhark_mc_segred_stage_1_parloop_76503_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76503_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76503_total_end -
                 futhark_mc_segred_stage_1_parloop_76503_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76503_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76503_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76503_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71210 = 0.0F;
    }
    
    float x_71644;
    float x_71645;
    
    for (int32_t i_71647 = 0; i_71647 < num_tasks_71639; i_71647++) {
        flat_tid_65573 = i_71647;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71644 = defunc_2_reduce_res_71210;
            }
            // load next params
            {
                x_71645 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71640)[flat_tid_65573];
            }
            // red body
            {
                float defunc_1_op_res_71646 = x_71644 + x_71645;
                
                defunc_2_reduce_res_71210 = defunc_1_op_res_71646;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71640);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76500_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76500_end -
                 futhark_mc_segred_task_76500_start;
        
        ctx->futhark_mc_segred_task_76500_runs[tid]++;
        ctx->futhark_mc_segred_task_76500_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76500_iter[tid] += iterations;
    }
    *futhark_mc_task_76499->retval_defunc_2_reduce_res_71210 =
        defunc_2_reduce_res_71210;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76488(void *args, int64_t start,
                                           int64_t end, int flat_tid_65567,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76487
    *futhark_mc_segmap_parloop_struct_76487 =
    (struct futhark_mc_segmap_parloop_struct_76487 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76487->ctx;
    uint64_t futhark_mc_segmap_parloop_76488_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76488_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76487->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76487->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76487->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76487->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76487->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76487->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76487->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76487->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76487->free_m_64090;
    int64_t last_res_65730 =
            futhark_mc_segmap_parloop_struct_76487->free_last_res_65730;
    int64_t min_arg_65742 =
            futhark_mc_segmap_parloop_struct_76487->free_min_arg_65742;
    float max_res_65746 =
          futhark_mc_segmap_parloop_struct_76487->free_max_res_65746;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69603,
                                 .size =0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69606,
                                 .size =0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69609,
                                 .size =0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69612,
                                 .size =0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69615,
                                 .size =0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69618,
                                 .size =0, .references =NULL};
    struct memblock mem_69621 = {.desc ="mem_69621", .mem =
                                 futhark_mc_segmap_parloop_struct_76487->free_mem_69621,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71517 = start;
    
    for (; iter_71517 < end; iter_71517++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71612 = n_m_64072;
        int64_t gtid_65568 = iter_71517;
        int64_t remnant_71613 = iter_71517 - gtid_65568;
        int64_t min_arg_71091 = mul64(jump_64068, gtid_65568);
        int64_t min_res_71092 = smin64(i_64078, min_arg_71091);
        int64_t defunc_0_g_res_71093 = add64((int64_t) 1, min_res_71092);
        bool nearest_idx_71094;
        int64_t nearest_idx_71095;
        int64_t nearest_idx_71096;
        bool loop_while_71518;
        int64_t low_71519;
        int64_t high_71520;
        
        loop_while_71518 = x_64079;
        low_71519 = (int64_t) 0;
        high_71520 = i_64078;
        while (loop_while_71518) {
            int64_t x_71521 = add64(low_71519, high_71520);
            int64_t mid_71522 = sdiv64(x_71521, (int64_t) 2);
            bool x_71523 = sle64((int64_t) 0, mid_71522);
            bool y_71524 = slt64(mid_71522, n_64064);
            bool bounds_check_71525 = x_71523 && y_71524;
            bool index_certs_71526;
            
            if (!bounds_check_71525) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71522,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_71527 = ((int64_t *) mem_69612.mem)[mid_71522];
            bool cond_71528 = sle64(defunc_0_g_res_71093, x_71527);
            int64_t loopres_71529;
            int64_t loopres_71530;
            
            if (cond_71528) {
                int64_t loopres_t_res_71531 = sub64(mid_71522, (int64_t) 1);
                
                loopres_71529 = low_71519;
                loopres_71530 = loopres_t_res_71531;
            } else {
                int64_t loopres_f_res_71532 = add64((int64_t) 1, mid_71522);
                
                loopres_71529 = loopres_f_res_71532;
                loopres_71530 = high_71520;
            }
            
            bool loop_cond_71533 = sle64(loopres_71529, loopres_71530);
            bool loop_while_tmp_71614 = loop_cond_71533;
            int64_t low_tmp_71615 = loopres_71529;
            int64_t high_tmp_71616 = loopres_71530;
            
            loop_while_71518 = loop_while_tmp_71614;
            low_71519 = low_tmp_71615;
            high_71520 = high_tmp_71616;
        }
        nearest_idx_71094 = loop_while_71518;
        nearest_idx_71095 = low_71519;
        nearest_idx_71096 = high_71520;
        
        int64_t max_arg_71113 = sub64(nearest_idx_71095, min_res_64084);
        int64_t max_res_71114 = smax64((int64_t) 0, max_arg_71113);
        int64_t j_71115 = add64(min_res_64084, max_res_71114);
        int64_t i_p_m_t_s_71116 = add64(m_64090, max_res_71114);
        bool zzero_leq_i_p_m_t_s_71117 = sle64((int64_t) 0, i_p_m_t_s_71116);
        bool i_p_m_t_s_leq_w_71118 = slt64(i_p_m_t_s_71116, n_64064);
        bool zzero_lte_i_71119 = sle64((int64_t) 0, max_res_71114);
        bool i_lte_j_71120 = sle64(max_res_71114, j_71115);
        bool y_71121 = i_p_m_t_s_leq_w_71118 && zzero_lte_i_71119;
        bool y_71122 = zzero_leq_i_p_m_t_s_71117 && y_71121;
        bool y_71123 = i_lte_j_71120 && y_71122;
        bool forwards_ok_71124 = zzero_lte_i_71119 && y_71123;
        bool ok_or_empty_71125 = empty_slice_64089 || forwards_ok_71124;
        bool index_certs_71126;
        
        if (!ok_or_empty_71125) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71114, ":",
                          (long long) j_71115,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71127;
        int64_t flat_tid_65569 = (int64_t) 0;
        int32_t num_tasks_71617;
        struct futhark_mc_task_76489 futhark_mc_task_76489;
        
        futhark_mc_task_76489.ctx = ctx;
        futhark_mc_task_76489.free_mem_69615 = mem_69615.mem;
        futhark_mc_task_76489.free_defunc_0_g_res_71093 = defunc_0_g_res_71093;
        futhark_mc_task_76489.free_max_res_71114 = max_res_71114;
        futhark_mc_task_76489.retval_defunc_2_reduce_res_71127 =
            &defunc_2_reduce_res_71127;
        
        struct scheduler_segop futhark_mc_task_76489_task;
        
        futhark_mc_task_76489_task.args = &futhark_mc_task_76489;
        futhark_mc_task_76489_task.top_level_fn = futhark_mc_segred_task_76490;
        futhark_mc_task_76489_task.name = "futhark_mc_segred_task_76490";
        futhark_mc_task_76489_task.iterations = min_res_64084;
        futhark_mc_task_76489_task.task_time =
            &ctx->futhark_mc_segred_task_76490_total_time;
        futhark_mc_task_76489_task.task_iter =
            &ctx->futhark_mc_segred_task_76490_total_iter;
        futhark_mc_task_76489_task.sched = STATIC;
        futhark_mc_task_76489_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76490_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76489_task);
        
        if (futhark_mc_segred_task_76490_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_71135;
        int64_t idx_71136;
        int64_t idx_71137;
        int64_t idx_71138;
        int64_t best_idx_71542;
        int64_t last_idx_71543;
        int64_t best_sum_71544;
        int64_t curr_sum_71545;
        
        best_idx_71542 = max_res_71114;
        last_idx_71543 = max_res_71114;
        best_sum_71544 = defunc_2_reduce_res_71127;
        curr_sum_71545 = defunc_2_reduce_res_71127;
        for (int64_t j_71541 = 0; j_71541 < min_res_64084; j_71541++) {
            int64_t new_idx_71546 = add64(max_res_71114, j_71541);
            int64_t x_71547 = add64(min_res_64084, new_idx_71546);
            bool cond_71548 = slt64(last_res_65730, x_71547);
            int64_t new_sum_71549;
            
            if (cond_71548) {
                new_sum_71549 = (int64_t) 9223372036854775807;
            } else {
                bool x_71550 = sle64((int64_t) 0, last_idx_71543);
                bool y_71551 = slt64(last_idx_71543, n_64064);
                bool bounds_check_71552 = x_71550 && y_71551;
                bool index_certs_71553;
                
                if (!bounds_check_71552) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_71543,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_71554 = ((int64_t *) mem_69615.mem)[last_idx_71543];
                int64_t binop_p_71555 = sub64(defunc_0_g_res_71093, y_71554);
                int64_t defunc_0_f_res_71556 = abs64(binop_p_71555);
                int64_t x_71557 = sub64(curr_sum_71545, defunc_0_f_res_71556);
                int64_t min_arg_71558 = add64(min_res_64084, last_idx_71543);
                int64_t min_res_71559 = smin64(i_64078, min_arg_71558);
                bool x_71560 = sle64((int64_t) 0, min_res_71559);
                bool y_71561 = slt64(min_res_71559, n_64064);
                bool bounds_check_71562 = x_71560 && y_71561;
                bool index_certs_71563;
                
                if (!bounds_check_71562) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71559,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_71564 = ((int64_t *) mem_69615.mem)[min_res_71559];
                int64_t binop_p_71565 = sub64(defunc_0_g_res_71093, y_71564);
                int64_t defunc_0_f_res_71566 = abs64(binop_p_71565);
                int64_t new_sum_f_res_71567 = add64(x_71557,
                                                    defunc_0_f_res_71566);
                
                new_sum_71549 = new_sum_f_res_71567;
            }
            
            bool cond_71568 = sle64(new_sum_71549, best_sum_71544);
            int64_t loopres_71569;
            
            if (cond_71568) {
                loopres_71569 = new_idx_71546;
            } else {
                loopres_71569 = best_idx_71542;
            }
            
            int64_t loopres_71570;
            
            if (cond_71568) {
                loopres_71570 = new_sum_71549;
            } else {
                loopres_71570 = best_sum_71544;
            }
            
            int64_t best_idx_tmp_71626 = loopres_71569;
            int64_t last_idx_tmp_71627 = new_idx_71546;
            int64_t best_sum_tmp_71628 = loopres_71570;
            int64_t curr_sum_tmp_71629 = new_sum_71549;
            
            best_idx_71542 = best_idx_tmp_71626;
            last_idx_71543 = last_idx_tmp_71627;
            best_sum_71544 = best_sum_tmp_71628;
            curr_sum_71545 = curr_sum_tmp_71629;
        }
        idx_71135 = best_idx_71542;
        idx_71136 = last_idx_71543;
        idx_71137 = best_sum_71544;
        idx_71138 = curr_sum_71545;
        
        int64_t min_res_71169 = smin64(min_arg_65742, idx_71135);
        int64_t x_71170 = add64(min_res_64084, min_res_71169);
        int64_t r_71171 = sub64(x_71170, (int64_t) 1);
        bool x_71172 = sle64((int64_t) 0, r_71171);
        bool y_71173 = slt64(r_71171, n_64064);
        bool bounds_check_71174 = x_71172 && y_71173;
        bool index_certs_71175;
        
        if (!bounds_check_71174) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71171,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_71176 = ((int64_t *) mem_69606.mem)[r_71171];
        int64_t abs_arg_71177 = sub64(x_71176, min_res_71092);
        int64_t abs_res_71178 = abs64(abs_arg_71177);
        bool x_71179 = sle64((int64_t) 0, min_res_71169);
        bool y_71180 = slt64(min_res_71169, n_64064);
        bool bounds_check_71181 = x_71179 && y_71180;
        bool index_certs_71182;
        
        if (!bounds_check_71181) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71169,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_71183 = ((int64_t *) mem_69606.mem)[min_res_71169];
        int64_t abs_arg_71184 = sub64(x_71183, min_res_71092);
        int64_t abs_res_71185 = abs64(abs_arg_71184);
        int64_t max_res_71186 = smax64(abs_res_71178, abs_res_71185);
        float defunc_0_f_res_71187 = sitofp_i64_f32(max_res_71186);
        float defunc_1_f_res_71188 = max_res_65746 + defunc_0_f_res_71187;
        float defunc_0_f_res_71189 = sitofp_i64_f32(min_res_71092);
        float defunc_2_reduce_res_71190;
        int64_t flat_tid_65571 = (int64_t) 0;
        int32_t num_tasks_71630;
        struct futhark_mc_task_76494 futhark_mc_task_76494;
        
        futhark_mc_task_76494.ctx = ctx;
        futhark_mc_task_76494.free_last_res_65730 = last_res_65730;
        futhark_mc_task_76494.free_mem_69609 = mem_69609.mem;
        futhark_mc_task_76494.free_mem_69618 = mem_69618.mem;
        futhark_mc_task_76494.free_min_res_71169 = min_res_71169;
        futhark_mc_task_76494.free_defunc_1_f_res_71188 = defunc_1_f_res_71188;
        futhark_mc_task_76494.free_defunc_0_f_res_71189 = defunc_0_f_res_71189;
        futhark_mc_task_76494.retval_defunc_2_reduce_res_71190 =
            &defunc_2_reduce_res_71190;
        
        struct scheduler_segop futhark_mc_task_76494_task;
        
        futhark_mc_task_76494_task.args = &futhark_mc_task_76494;
        futhark_mc_task_76494_task.top_level_fn = futhark_mc_segred_task_76495;
        futhark_mc_task_76494_task.name = "futhark_mc_segred_task_76495";
        futhark_mc_task_76494_task.iterations = q_64066;
        futhark_mc_task_76494_task.task_time =
            &ctx->futhark_mc_segred_task_76495_total_time;
        futhark_mc_task_76494_task.task_iter =
            &ctx->futhark_mc_segred_task_76495_total_iter;
        futhark_mc_task_76494_task.sched = STATIC;
        futhark_mc_task_76494_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76495_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76494_task);
        
        if (futhark_mc_segred_task_76495_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_71209 = 1.0F / defunc_2_reduce_res_71190;
        float defunc_2_reduce_res_71210;
        int64_t flat_tid_65573 = (int64_t) 0;
        int32_t num_tasks_71639;
        struct futhark_mc_task_76499 futhark_mc_task_76499;
        
        futhark_mc_task_76499.ctx = ctx;
        futhark_mc_task_76499.free_last_res_65730 = last_res_65730;
        futhark_mc_task_76499.free_mem_69603 = mem_69603.mem;
        futhark_mc_task_76499.free_mem_69609 = mem_69609.mem;
        futhark_mc_task_76499.free_mem_69618 = mem_69618.mem;
        futhark_mc_task_76499.free_min_res_71169 = min_res_71169;
        futhark_mc_task_76499.free_defunc_1_f_res_71188 = defunc_1_f_res_71188;
        futhark_mc_task_76499.free_defunc_0_f_res_71189 = defunc_0_f_res_71189;
        futhark_mc_task_76499.free_a0_71209 = a0_71209;
        futhark_mc_task_76499.retval_defunc_2_reduce_res_71210 =
            &defunc_2_reduce_res_71210;
        
        struct scheduler_segop futhark_mc_task_76499_task;
        
        futhark_mc_task_76499_task.args = &futhark_mc_task_76499;
        futhark_mc_task_76499_task.top_level_fn = futhark_mc_segred_task_76500;
        futhark_mc_task_76499_task.name = "futhark_mc_segred_task_76500";
        futhark_mc_task_76499_task.iterations = q_64066;
        futhark_mc_task_76499_task.task_time =
            &ctx->futhark_mc_segred_task_76500_total_time;
        futhark_mc_task_76499_task.task_iter =
            &ctx->futhark_mc_segred_task_76500_total_iter;
        futhark_mc_task_76499_task.sched = STATIC;
        futhark_mc_task_76499_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76500_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76499_task);
        
        if (futhark_mc_segred_task_76500_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69621.mem)[gtid_65568] = defunc_2_reduce_res_71210;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76488_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76488_end -
                 futhark_mc_segmap_parloop_76488_start;
        
        ctx->futhark_mc_segmap_parloop_76488_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76488_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76488_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76486(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65567 = tid;
    int num_tasks_71409 = info.nsubtasks;
    struct futhark_mc_task_76482 *futhark_mc_task_76482 =
                                 (struct futhark_mc_task_76482 *) args;
    struct futhark_context *ctx = futhark_mc_task_76482->ctx;
    uint64_t futhark_mc_segmap_nested_task_76486_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76486_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76482->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76482->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76482->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76482->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76482->free_i_64078;
    bool x_64079 = futhark_mc_task_76482->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76482->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76482->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76482->free_m_64090;
    int64_t last_res_65730 = futhark_mc_task_76482->free_last_res_65730;
    int64_t min_arg_65742 = futhark_mc_task_76482->free_min_arg_65742;
    float max_res_65746 = futhark_mc_task_76482->free_max_res_65746;
    struct memblock mem_69603 = {.desc ="mem_69603", .mem =
                                 futhark_mc_task_76482->free_mem_69603, .size =
                                 0, .references =NULL};
    struct memblock mem_69606 = {.desc ="mem_69606", .mem =
                                 futhark_mc_task_76482->free_mem_69606, .size =
                                 0, .references =NULL};
    struct memblock mem_69609 = {.desc ="mem_69609", .mem =
                                 futhark_mc_task_76482->free_mem_69609, .size =
                                 0, .references =NULL};
    struct memblock mem_69612 = {.desc ="mem_69612", .mem =
                                 futhark_mc_task_76482->free_mem_69612, .size =
                                 0, .references =NULL};
    struct memblock mem_69615 = {.desc ="mem_69615", .mem =
                                 futhark_mc_task_76482->free_mem_69615, .size =
                                 0, .references =NULL};
    struct memblock mem_69618 = {.desc ="mem_69618", .mem =
                                 futhark_mc_task_76482->free_mem_69618, .size =
                                 0, .references =NULL};
    struct memblock mem_69621 = {.desc ="mem_69621", .mem =
                                 futhark_mc_task_76482->free_mem_69621, .size =
                                 0, .references =NULL};
    int64_t iter_71517;
    struct futhark_mc_segmap_parloop_struct_76487
    futhark_mc_segmap_parloop_struct_76487;
    
    futhark_mc_segmap_parloop_struct_76487.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76487.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76487.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76487.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76487.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76487.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76487.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76487.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76487.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76487.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76487.free_last_res_65730 = last_res_65730;
    futhark_mc_segmap_parloop_struct_76487.free_min_arg_65742 = min_arg_65742;
    futhark_mc_segmap_parloop_struct_76487.free_max_res_65746 = max_res_65746;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69603 = mem_69603.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69606 = mem_69606.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69609 = mem_69609.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69612 = mem_69612.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69615 = mem_69615.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69618 = mem_69618.mem;
    futhark_mc_segmap_parloop_struct_76487.free_mem_69621 = mem_69621.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76488_task;
    
    futhark_mc_segmap_parloop_76488_task.name =
        "futhark_mc_segmap_parloop_76488";
    futhark_mc_segmap_parloop_76488_task.fn = futhark_mc_segmap_parloop_76488;
    futhark_mc_segmap_parloop_76488_task.args =
        &futhark_mc_segmap_parloop_struct_76487;
    futhark_mc_segmap_parloop_76488_task.iterations = iterations;
    futhark_mc_segmap_parloop_76488_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76488_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76488_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76488_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76488_task);
    
    if (futhark_mc_segmap_parloop_76488_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76488_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76488_total_end -
                 futhark_mc_segmap_parloop_76488_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76488_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76488_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76488_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76486_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76486_end -
                 futhark_mc_segmap_nested_task_76486_start;
        
        ctx->futhark_mc_segmap_nested_task_76486_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76486_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76486_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76454(void *args, int64_t start,
                                           int64_t end, int flat_tid_65555,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76453
    *futhark_mc_segmap_parloop_struct_76453 =
    (struct futhark_mc_segmap_parloop_struct_76453 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76453->ctx;
    uint64_t futhark_mc_segmap_parloop_76454_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76454_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76453->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76453->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76453->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76453->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76453->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76453->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76453->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76453->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76453->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76453->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76453->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76453->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69598 =
            futhark_mc_segmap_parloop_struct_76453->free_bytes_69598;
    int64_t bytes_69601 =
            futhark_mc_segmap_parloop_struct_76453->free_bytes_69601;
    int64_t bytes_69616 =
            futhark_mc_segmap_parloop_struct_76453->free_bytes_69616;
    int64_t bytes_69619 =
            futhark_mc_segmap_parloop_struct_76453->free_bytes_69619;
    struct memblock mem_69745 = {.desc ="mem_69745", .mem =
                                 futhark_mc_segmap_parloop_struct_76453->free_mem_69745,
                                 .size =0, .references =NULL};
    size_t mem_69600_cached_sizze_76455 = 0;
    char *mem_69600 = NULL;
    size_t mem_69603_cached_sizze_76456 = 0;
    char *mem_69603 = NULL;
    size_t mem_69606_cached_sizze_76457 = 0;
    char *mem_69606 = NULL;
    size_t mem_69609_cached_sizze_76458 = 0;
    char *mem_69609 = NULL;
    size_t mem_69612_cached_sizze_76459 = 0;
    char *mem_69612 = NULL;
    size_t mem_69615_cached_sizze_76460 = 0;
    char *mem_69615 = NULL;
    size_t mem_69618_cached_sizze_76461 = 0;
    char *mem_69618 = NULL;
    size_t mem_69621_cached_sizze_76462 = 0;
    char *mem_69621 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71070 = start;
    
    if (mem_69600_cached_sizze_76455 < (size_t) bytes_69598) {
        mem_69600 = realloc(mem_69600, bytes_69598);
        mem_69600_cached_sizze_76455 = bytes_69598;
    }
    if (mem_69603_cached_sizze_76456 < (size_t) bytes_69601) {
        mem_69603 = realloc(mem_69603, bytes_69601);
        mem_69603_cached_sizze_76456 = bytes_69601;
    }
    if (mem_69606_cached_sizze_76457 < (size_t) bytes_69598) {
        mem_69606 = realloc(mem_69606, bytes_69598);
        mem_69606_cached_sizze_76457 = bytes_69598;
    }
    if (mem_69609_cached_sizze_76458 < (size_t) bytes_69601) {
        mem_69609 = realloc(mem_69609, bytes_69601);
        mem_69609_cached_sizze_76458 = bytes_69601;
    }
    if (mem_69612_cached_sizze_76459 < (size_t) bytes_69598) {
        mem_69612 = realloc(mem_69612, bytes_69598);
        mem_69612_cached_sizze_76459 = bytes_69598;
    }
    if (mem_69615_cached_sizze_76460 < (size_t) bytes_69598) {
        mem_69615 = realloc(mem_69615, bytes_69598);
        mem_69615_cached_sizze_76460 = bytes_69598;
    }
    if (mem_69618_cached_sizze_76461 < (size_t) bytes_69616) {
        mem_69618 = realloc(mem_69618, bytes_69616);
        mem_69618_cached_sizze_76461 = bytes_69616;
    }
    if (mem_69621_cached_sizze_76462 < (size_t) bytes_69619) {
        mem_69621 = realloc(mem_69621, bytes_69619);
        mem_69621_cached_sizze_76462 = bytes_69619;
    }
    for (; iter_71070 < end; iter_71070++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71377 = m_64063;
        int64_t gtid_65556 = iter_71070;
        int64_t remnant_71378 = iter_71070 - gtid_65556;
        int64_t flat_tid_65557 = (int64_t) 0;
        int32_t num_tasks_71379;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76463 futhark_mc_task_76463;
        
        futhark_mc_task_76463.ctx = ctx;
        futhark_mc_task_76463.free_n_64064 = n_64064;
        futhark_mc_task_76463.free_gtid_65556 = gtid_65556;
        futhark_mc_task_76463.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76463.free_mem_69600 = mem_69600;
        
        struct scheduler_segop futhark_mc_task_76463_task;
        
        futhark_mc_task_76463_task.args = &futhark_mc_task_76463;
        futhark_mc_task_76463_task.top_level_fn = futhark_mc_segscan_task_76464;
        futhark_mc_task_76463_task.name = "futhark_mc_segscan_task_76464";
        futhark_mc_task_76463_task.iterations = n_64064;
        futhark_mc_task_76463_task.task_time =
            &ctx->futhark_mc_segscan_task_76464_total_time;
        futhark_mc_task_76463_task.task_iter =
            &ctx->futhark_mc_segscan_task_76464_total_iter;
        futhark_mc_task_76463_task.sched = STATIC;
        futhark_mc_task_76463_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76464_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76463_task);
        
        if (futhark_mc_segscan_task_76464_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65730 = ((int64_t *) mem_69600)[i_64078];
        
        for (int64_t i_71393 = 0; i_71393 < n_64064; i_71393++) {
            ((float *) mem_69603)[i_71393] = 0.0F;
        }
        for (int64_t i_71394 = 0; i_71394 < n_64064; i_71394++) {
            ((int64_t *) mem_69606)[i_71394] = (int64_t) -1;
        }
        
        int64_t flat_tid_65559 = (int64_t) 0;
        int32_t num_tasks_71395;
        struct futhark_mc_task_76470 futhark_mc_task_76470;
        
        futhark_mc_task_76470.ctx = ctx;
        futhark_mc_task_76470.free_n_64064 = n_64064;
        futhark_mc_task_76470.free_gtid_65556 = gtid_65556;
        futhark_mc_task_76470.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76470.free_mem_69600 = mem_69600;
        futhark_mc_task_76470.free_mem_69603 = mem_69603;
        futhark_mc_task_76470.free_mem_69606 = mem_69606;
        
        struct scheduler_segop futhark_mc_task_76470_task;
        
        futhark_mc_task_76470_task.args = &futhark_mc_task_76470;
        futhark_mc_task_76470_task.top_level_fn = futhark_mc_segmap_task_76471;
        futhark_mc_task_76470_task.name = "futhark_mc_segmap_task_76471";
        futhark_mc_task_76470_task.iterations = n_64064;
        futhark_mc_task_76470_task.task_time =
            &ctx->futhark_mc_segmap_task_76471_total_time;
        futhark_mc_task_76470_task.task_iter =
            &ctx->futhark_mc_segmap_task_76471_total_iter;
        futhark_mc_task_76470_task.sched = STATIC;
        futhark_mc_task_76470_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76471_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76470_task);
        
        if (futhark_mc_segmap_task_76471_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65742 = sub64(last_res_65730, min_res_64084);
        float i64_res_65743 = sitofp_i64_f32(last_res_65730);
        float x_65744 = i64_res_64091 - i64_res_65743;
        float max_arg_65745 = x_65744 / 2.0F;
        float max_res_65746 = fmax32(0.0F, max_arg_65745);
        int64_t flat_tid_65561 = (int64_t) 0;
        int32_t num_tasks_71401;
        struct futhark_mc_task_76474 futhark_mc_task_76474;
        
        futhark_mc_task_76474.ctx = ctx;
        futhark_mc_task_76474.free_n_64064 = n_64064;
        futhark_mc_task_76474.free_mem_69606 = mem_69606;
        futhark_mc_task_76474.free_mem_69609 = mem_69609;
        futhark_mc_task_76474.free_mem_69612 = mem_69612;
        futhark_mc_task_76474.free_mem_69615 = mem_69615;
        
        struct scheduler_segop futhark_mc_task_76474_task;
        
        futhark_mc_task_76474_task.args = &futhark_mc_task_76474;
        futhark_mc_task_76474_task.top_level_fn = futhark_mc_segmap_task_76475;
        futhark_mc_task_76474_task.name = "futhark_mc_segmap_task_76475";
        futhark_mc_task_76474_task.iterations = n_64064;
        futhark_mc_task_76474_task.task_time =
            &ctx->futhark_mc_segmap_task_76475_total_time;
        futhark_mc_task_76474_task.task_iter =
            &ctx->futhark_mc_segmap_task_76475_total_iter;
        futhark_mc_task_76474_task.sched = STATIC;
        futhark_mc_task_76474_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76475_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76474_task);
        
        if (futhark_mc_segmap_task_76475_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65563 = (int64_t) 0;
        int32_t num_tasks_71405;
        struct futhark_mc_task_76478 futhark_mc_task_76478;
        
        futhark_mc_task_76478.ctx = ctx;
        futhark_mc_task_76478.free_q_64066 = q_64066;
        futhark_mc_task_76478.free_last_res_65730 = last_res_65730;
        futhark_mc_task_76478.free_mem_69618 = mem_69618;
        
        struct scheduler_segop futhark_mc_task_76478_task;
        
        futhark_mc_task_76478_task.args = &futhark_mc_task_76478;
        futhark_mc_task_76478_task.top_level_fn = futhark_mc_segmap_task_76479;
        futhark_mc_task_76478_task.name = "futhark_mc_segmap_task_76479";
        futhark_mc_task_76478_task.iterations = q_64066;
        futhark_mc_task_76478_task.task_time =
            &ctx->futhark_mc_segmap_task_76479_total_time;
        futhark_mc_task_76478_task.task_iter =
            &ctx->futhark_mc_segmap_task_76479_total_iter;
        futhark_mc_task_76478_task.sched = STATIC;
        futhark_mc_task_76478_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76479_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76478_task);
        
        if (futhark_mc_segmap_task_76479_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65565 = (int64_t) 0;
        int32_t num_tasks_71409;
        int64_t flat_tid_65567 = (int64_t) 0;
        struct futhark_mc_task_76482 futhark_mc_task_76482;
        
        futhark_mc_task_76482.ctx = ctx;
        futhark_mc_task_76482.free_n_64064 = n_64064;
        futhark_mc_task_76482.free_q_64066 = q_64066;
        futhark_mc_task_76482.free_jump_64068 = jump_64068;
        futhark_mc_task_76482.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76482.free_i_64078 = i_64078;
        futhark_mc_task_76482.free_x_64079 = x_64079;
        futhark_mc_task_76482.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76482.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76482.free_m_64090 = m_64090;
        futhark_mc_task_76482.free_last_res_65730 = last_res_65730;
        futhark_mc_task_76482.free_min_arg_65742 = min_arg_65742;
        futhark_mc_task_76482.free_max_res_65746 = max_res_65746;
        futhark_mc_task_76482.free_mem_69603 = mem_69603;
        futhark_mc_task_76482.free_mem_69606 = mem_69606;
        futhark_mc_task_76482.free_mem_69609 = mem_69609;
        futhark_mc_task_76482.free_mem_69612 = mem_69612;
        futhark_mc_task_76482.free_mem_69615 = mem_69615;
        futhark_mc_task_76482.free_mem_69618 = mem_69618;
        futhark_mc_task_76482.free_mem_69621 = mem_69621;
        
        struct scheduler_segop futhark_mc_task_76482_task;
        
        futhark_mc_task_76482_task.args = &futhark_mc_task_76482;
        futhark_mc_task_76482_task.top_level_fn = futhark_mc_segmap_task_76483;
        futhark_mc_task_76482_task.name = "futhark_mc_segmap_task_76483";
        futhark_mc_task_76482_task.iterations = n_m_64072;
        futhark_mc_task_76482_task.task_time =
            &ctx->futhark_mc_segmap_task_76483_total_time;
        futhark_mc_task_76482_task.task_iter =
            &ctx->futhark_mc_segmap_task_76483_total_iter;
        futhark_mc_task_76482_task.sched = DYNAMIC;
        futhark_mc_task_76482_task.nested_fn =
            futhark_mc_segmap_nested_task_76486;
        
        int futhark_mc_segmap_task_76483_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76482_task);
        
        if (futhark_mc_segmap_task_76483_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_69745.mem + gtid_65556 * n_m_64072 * (int64_t) 4,
                mem_69621 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69600);
    free(mem_69603);
    free(mem_69606);
    free(mem_69609);
    free(mem_69612);
    free(mem_69615);
    free(mem_69618);
    free(mem_69621);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76454_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76454_end -
                 futhark_mc_segmap_parloop_76454_start;
        
        ctx->futhark_mc_segmap_parloop_76454_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76454_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76454_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76452(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65555 = tid;
    int num_tasks_70861 = info.nsubtasks;
    struct futhark_mc_task_76440 *futhark_mc_task_76440 =
                                 (struct futhark_mc_task_76440 *) args;
    struct futhark_context *ctx = futhark_mc_task_76440->ctx;
    uint64_t futhark_mc_segmap_nested_task_76452_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76452_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76440->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76440->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76440->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76440->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76440->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76440->free_i_64078;
    bool x_64079 = futhark_mc_task_76440->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76440->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76440->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76440->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76440->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76440->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69598 = futhark_mc_task_76440->free_bytes_69598;
    int64_t bytes_69601 = futhark_mc_task_76440->free_bytes_69601;
    int64_t bytes_69616 = futhark_mc_task_76440->free_bytes_69616;
    int64_t bytes_69619 = futhark_mc_task_76440->free_bytes_69619;
    struct memblock mem_69745 = {.desc ="mem_69745", .mem =
                                 futhark_mc_task_76440->free_mem_69745, .size =
                                 0, .references =NULL};
    int64_t iter_71070;
    struct futhark_mc_segmap_parloop_struct_76453
    futhark_mc_segmap_parloop_struct_76453;
    
    futhark_mc_segmap_parloop_struct_76453.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76453.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76453.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76453.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76453.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76453.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76453.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76453.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76453.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76453.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76453.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76453.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76453.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76453.free_bytes_69598 = bytes_69598;
    futhark_mc_segmap_parloop_struct_76453.free_bytes_69601 = bytes_69601;
    futhark_mc_segmap_parloop_struct_76453.free_bytes_69616 = bytes_69616;
    futhark_mc_segmap_parloop_struct_76453.free_bytes_69619 = bytes_69619;
    futhark_mc_segmap_parloop_struct_76453.free_mem_69745 = mem_69745.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76454_task;
    
    futhark_mc_segmap_parloop_76454_task.name =
        "futhark_mc_segmap_parloop_76454";
    futhark_mc_segmap_parloop_76454_task.fn = futhark_mc_segmap_parloop_76454;
    futhark_mc_segmap_parloop_76454_task.args =
        &futhark_mc_segmap_parloop_struct_76453;
    futhark_mc_segmap_parloop_76454_task.iterations = iterations;
    futhark_mc_segmap_parloop_76454_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76454_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76454_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76454_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76454_task);
    
    if (futhark_mc_segmap_parloop_76454_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76454_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76454_total_end -
                 futhark_mc_segmap_parloop_76454_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76454_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76454_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76454_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76452_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76452_end -
                 futhark_mc_segmap_nested_task_76452_start;
        
        ctx->futhark_mc_segmap_nested_task_76452_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76452_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76452_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76504 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69746;
    int64_t free_bytes_69749;
    int64_t free_bytes_69764;
    int64_t free_bytes_69767;
    char *free_mem_69911;
    char *free_mem_69915;
};
struct futhark_mc_segmap_parloop_struct_76506 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69746;
    int64_t free_bytes_69749;
    int64_t free_bytes_69764;
    int64_t free_bytes_69767;
    char *free_mem_69911;
    char *free_mem_69915;
};
static int futhark_mc_segmap_parloop_76507(void *args, int64_t start,
                                           int64_t end, int flat_tid_66052,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76506
    *futhark_mc_segmap_parloop_struct_76506 =
    (struct futhark_mc_segmap_parloop_struct_76506 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76506->ctx;
    uint64_t futhark_mc_segmap_parloop_76507_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76507_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76506->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76506->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76506->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76506->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76506->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76506->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76506->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76506->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76506->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76506->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76506->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76506->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69746 =
            futhark_mc_segmap_parloop_struct_76506->free_bytes_69746;
    int64_t bytes_69749 =
            futhark_mc_segmap_parloop_struct_76506->free_bytes_69749;
    int64_t bytes_69764 =
            futhark_mc_segmap_parloop_struct_76506->free_bytes_69764;
    int64_t bytes_69767 =
            futhark_mc_segmap_parloop_struct_76506->free_bytes_69767;
    struct memblock mem_69911 = {.desc ="mem_69911", .mem =
                                 futhark_mc_segmap_parloop_struct_76506->free_mem_69911,
                                 .size =0, .references =NULL};
    struct memblock mem_69915 = {.desc ="mem_69915", .mem =
                                 futhark_mc_segmap_parloop_struct_76506->free_mem_69915,
                                 .size =0, .references =NULL};
    size_t mem_69775_cached_sizze_76508 = 0;
    char *mem_69775 = NULL;
    size_t mem_69790_cached_sizze_76509 = 0;
    char *mem_69790 = NULL;
    size_t mem_69793_cached_sizze_76510 = 0;
    char *mem_69793 = NULL;
    size_t mem_69820_cached_sizze_76511 = 0;
    char *mem_69820 = NULL;
    size_t mem_69823_cached_sizze_76512 = 0;
    char *mem_69823 = NULL;
    size_t mem_69826_cached_sizze_76513 = 0;
    char *mem_69826 = NULL;
    size_t mem_69865_cached_sizze_76514 = 0;
    char *mem_69865 = NULL;
    size_t mem_69880_cached_sizze_76515 = 0;
    char *mem_69880 = NULL;
    size_t mem_69883_cached_sizze_76516 = 0;
    char *mem_69883 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71649 = start;
    
    if (mem_69775_cached_sizze_76508 < (size_t) bytes_69746) {
        mem_69775 = realloc(mem_69775, bytes_69746);
        mem_69775_cached_sizze_76508 = bytes_69746;
    }
    if (mem_69790_cached_sizze_76509 < (size_t) bytes_69749) {
        mem_69790 = realloc(mem_69790, bytes_69749);
        mem_69790_cached_sizze_76509 = bytes_69749;
    }
    if (mem_69793_cached_sizze_76510 < (size_t) bytes_69746) {
        mem_69793 = realloc(mem_69793, bytes_69746);
        mem_69793_cached_sizze_76510 = bytes_69746;
    }
    if (mem_69820_cached_sizze_76511 < (size_t) bytes_69749) {
        mem_69820 = realloc(mem_69820, bytes_69749);
        mem_69820_cached_sizze_76511 = bytes_69749;
    }
    if (mem_69823_cached_sizze_76512 < (size_t) bytes_69746) {
        mem_69823 = realloc(mem_69823, bytes_69746);
        mem_69823_cached_sizze_76512 = bytes_69746;
    }
    if (mem_69826_cached_sizze_76513 < (size_t) bytes_69746) {
        mem_69826 = realloc(mem_69826, bytes_69746);
        mem_69826_cached_sizze_76513 = bytes_69746;
    }
    if (mem_69865_cached_sizze_76514 < (size_t) bytes_69764) {
        mem_69865 = realloc(mem_69865, bytes_69764);
        mem_69865_cached_sizze_76514 = bytes_69764;
    }
    if (mem_69880_cached_sizze_76515 < (size_t) bytes_69767) {
        mem_69880 = realloc(mem_69880, bytes_69767);
        mem_69880_cached_sizze_76515 = bytes_69767;
    }
    if (mem_69883_cached_sizze_76516 < (size_t) bytes_69767) {
        mem_69883 = realloc(mem_69883, bytes_69767);
        mem_69883_cached_sizze_76516 = bytes_69767;
    }
    for (; iter_71649 < end; iter_71649++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71861 = m_64063;
        int64_t gtid_66053 = iter_71649;
        int64_t remnant_71862 = iter_71649 - gtid_66053;
        int64_t discard_69185;
        int64_t scanacc_71651 = (int64_t) 0;
        
        for (int64_t i_71650 = 0; i_71650 < n_64064; i_71650++) {
            float x_71653 = ((float *) Y_mem_69593.mem)[gtid_66053 * n_64064 +
                                                        i_71650];
            bool isnan_res_71654;
            
            isnan_res_71654 = futrts_isnan32(x_71653);
            
            bool defunc_0_p_res_71655 = !isnan_res_71654;
            int64_t defunc_0_f_res_71656 = btoi_bool_i64(defunc_0_p_res_71655);
            int64_t defunc_1_op_res_71657 = add64(defunc_0_f_res_71656,
                                                  scanacc_71651);
            
            ((int64_t *) mem_69775)[i_71650] = defunc_1_op_res_71657;
            
            int64_t scanacc_tmp_71863 = defunc_1_op_res_71657;
            
            scanacc_71651 = scanacc_tmp_71863;
        }
        discard_69185 = scanacc_71651;
        
        int64_t last_res_64316 = ((int64_t *) mem_69775)[i_64078];
        
        for (int64_t i_71865 = 0; i_71865 < n_64064; i_71865++) {
            ((float *) mem_69790)[i_71865] = 0.0F;
        }
        for (int64_t i_71866 = 0; i_71866 < n_64064; i_71866++) {
            ((int64_t *) mem_69793)[i_71866] = (int64_t) -1;
        }
        for (int64_t write_iter_71659 = 0; write_iter_71659 < n_64064;
             write_iter_71659++) {
            float write_iv_71662 = ((float *) Y_mem_69593.mem)[gtid_66053 *
                                                               n_64064 +
                                                               write_iter_71659];
            bool isnan_res_71663;
            
            isnan_res_71663 = futrts_isnan32(write_iv_71662);
            
            bool defunc_0_p_res_71664 = !isnan_res_71663;
            int64_t defunc_1_f_res_71665;
            
            if (defunc_0_p_res_71664) {
                int64_t write_iv_71666 =
                        ((int64_t *) mem_69775)[write_iter_71659];
                int64_t defunc_1_f_res_t_res_71667 = sub64(write_iv_71666,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71665 = defunc_1_f_res_t_res_71667;
            } else {
                defunc_1_f_res_71665 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71665) &&
                slt64(defunc_1_f_res_71665, n_64064)) {
                ((int64_t *) mem_69793)[defunc_1_f_res_71665] =
                    write_iter_71659;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71665) &&
                slt64(defunc_1_f_res_71665, n_64064)) {
                memmove(mem_69790 + defunc_1_f_res_71665 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_66053 * n_64064 +
                                           write_iter_71659) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64334 = sub64(last_res_64316, min_res_64084);
        float i64_res_64335 = sitofp_i64_f32(last_res_64316);
        float x_64336 = i64_res_64091 - i64_res_64335;
        float max_arg_64337 = x_64336 / 2.0F;
        float max_res_64338 = fmax32(0.0F, max_arg_64337);
        
        for (int64_t i_71671 = 0; i_71671 < n_64064; i_71671++) {
            int64_t x_71675 = ((int64_t *) mem_69793)[i_71671];
            int64_t defunc_0_f_res_71676 = add64((int64_t) 1, x_71675);
            bool cond_71677 = slt64(defunc_0_f_res_71676, (int64_t) 0);
            int64_t defunc_0_f_res_71678;
            
            if (cond_71677) {
                defunc_0_f_res_71678 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_71678 = defunc_0_f_res_71676;
            }
            
            float defunc_0_f_res_71679 = sitofp_i64_f32(x_71675);
            
            ((float *) mem_69820)[i_71671] = defunc_0_f_res_71679;
            ((int64_t *) mem_69823)[i_71671] = defunc_0_f_res_71678;
            ((int64_t *) mem_69826)[i_71671] = defunc_0_f_res_71676;
        }
        for (int64_t i_71683 = 0; i_71683 < q_64066; i_71683++) {
            bool cond_71685 = sle64(last_res_64316, i_71683);
            float defunc_0_f_res_71686;
            
            if (cond_71685) {
                defunc_0_f_res_71686 = 0.0F;
            } else {
                defunc_0_f_res_71686 = 1.0F;
            }
            ((float *) mem_69865)[i_71683] = defunc_0_f_res_71686;
        }
        for (int64_t i_71688 = 0; i_71688 < n_m_64072; i_71688++) {
            int64_t min_arg_71691 = mul64(jump_64068, i_71688);
            int64_t min_res_71692 = smin64(i_64078, min_arg_71691);
            int64_t defunc_0_g_res_71693 = add64((int64_t) 1, min_res_71692);
            bool nearest_idx_71694;
            int64_t nearest_idx_71695;
            int64_t nearest_idx_71696;
            bool loop_while_71697;
            int64_t low_71698;
            int64_t high_71699;
            
            loop_while_71697 = x_64079;
            low_71698 = (int64_t) 0;
            high_71699 = i_64078;
            while (loop_while_71697) {
                int64_t x_71700 = add64(low_71698, high_71699);
                int64_t mid_71701 = sdiv64(x_71700, (int64_t) 2);
                bool x_71702 = sle64((int64_t) 0, mid_71701);
                bool y_71703 = slt64(mid_71701, n_64064);
                bool bounds_check_71704 = x_71702 && y_71703;
                bool index_certs_71705;
                
                if (!bounds_check_71704) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71701,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_71706 = ((int64_t *) mem_69823)[mid_71701];
                bool cond_71707 = sle64(defunc_0_g_res_71693, x_71706);
                int64_t loopres_71708;
                int64_t loopres_71709;
                
                if (cond_71707) {
                    int64_t loopres_t_res_71710 = sub64(mid_71701, (int64_t) 1);
                    
                    loopres_71708 = low_71698;
                    loopres_71709 = loopres_t_res_71710;
                } else {
                    int64_t loopres_f_res_71711 = add64((int64_t) 1, mid_71701);
                    
                    loopres_71708 = loopres_f_res_71711;
                    loopres_71709 = high_71699;
                }
                
                bool loop_cond_71712 = sle64(loopres_71708, loopres_71709);
                bool loop_while_tmp_71875 = loop_cond_71712;
                int64_t low_tmp_71876 = loopres_71708;
                int64_t high_tmp_71877 = loopres_71709;
                
                loop_while_71697 = loop_while_tmp_71875;
                low_71698 = low_tmp_71876;
                high_71699 = high_tmp_71877;
            }
            nearest_idx_71694 = loop_while_71697;
            nearest_idx_71695 = low_71698;
            nearest_idx_71696 = high_71699;
            
            int64_t max_arg_71713 = sub64(nearest_idx_71695, min_res_64084);
            int64_t max_res_71714 = smax64((int64_t) 0, max_arg_71713);
            int64_t j_71715 = add64(min_res_64084, max_res_71714);
            int64_t i_p_m_t_s_71716 = add64(m_64090, max_res_71714);
            bool zzero_leq_i_p_m_t_s_71717 = sle64((int64_t) 0,
                                                   i_p_m_t_s_71716);
            bool i_p_m_t_s_leq_w_71718 = slt64(i_p_m_t_s_71716, n_64064);
            bool zzero_lte_i_71719 = sle64((int64_t) 0, max_res_71714);
            bool i_lte_j_71720 = sle64(max_res_71714, j_71715);
            bool y_71721 = i_p_m_t_s_leq_w_71718 && zzero_lte_i_71719;
            bool y_71722 = zzero_leq_i_p_m_t_s_71717 && y_71721;
            bool y_71723 = i_lte_j_71720 && y_71722;
            bool forwards_ok_71724 = zzero_lte_i_71719 && y_71723;
            bool ok_or_empty_71725 = empty_slice_64089 || forwards_ok_71724;
            bool index_certs_71726;
            
            if (!ok_or_empty_71725) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71714, ":",
                              (long long) j_71715,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_71727;
            int64_t redout_71729 = (int64_t) 0;
            
            for (int64_t i_71728 = 0; i_71728 < min_res_64084; i_71728++) {
                int64_t slice_71730 = max_res_71714 + i_71728;
                int64_t x_71731 = ((int64_t *) mem_69826)[slice_71730];
                int64_t abs_arg_71732 = sub64(x_71731, defunc_0_g_res_71693);
                int64_t abs_res_71733 = abs64(abs_arg_71732);
                int64_t defunc_1_op_res_71734 = add64(abs_res_71733,
                                                      redout_71729);
                int64_t redout_tmp_71878 = defunc_1_op_res_71734;
                
                redout_71729 = redout_tmp_71878;
            }
            defunc_2_reduce_res_71727 = redout_71729;
            
            int64_t idx_71735;
            int64_t idx_71736;
            int64_t idx_71737;
            int64_t idx_71738;
            int64_t best_idx_71740;
            int64_t last_idx_71741;
            int64_t best_sum_71742;
            int64_t curr_sum_71743;
            
            best_idx_71740 = max_res_71714;
            last_idx_71741 = max_res_71714;
            best_sum_71742 = defunc_2_reduce_res_71727;
            curr_sum_71743 = defunc_2_reduce_res_71727;
            for (int64_t j_71739 = 0; j_71739 < min_res_64084; j_71739++) {
                int64_t new_idx_71744 = add64(max_res_71714, j_71739);
                int64_t x_71745 = add64(min_res_64084, new_idx_71744);
                bool cond_71746 = slt64(last_res_64316, x_71745);
                int64_t new_sum_71747;
                
                if (cond_71746) {
                    new_sum_71747 = (int64_t) 9223372036854775807;
                } else {
                    bool x_71748 = sle64((int64_t) 0, last_idx_71741);
                    bool y_71749 = slt64(last_idx_71741, n_64064);
                    bool bounds_check_71750 = x_71748 && y_71749;
                    bool index_certs_71751;
                    
                    if (!bounds_check_71750) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_71741,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_71752 = ((int64_t *) mem_69826)[last_idx_71741];
                    int64_t binop_p_71753 = sub64(defunc_0_g_res_71693,
                                                  y_71752);
                    int64_t defunc_0_f_res_71754 = abs64(binop_p_71753);
                    int64_t x_71755 = sub64(curr_sum_71743,
                                            defunc_0_f_res_71754);
                    int64_t min_arg_71756 = add64(min_res_64084,
                                                  last_idx_71741);
                    int64_t min_res_71757 = smin64(i_64078, min_arg_71756);
                    bool x_71758 = sle64((int64_t) 0, min_res_71757);
                    bool y_71759 = slt64(min_res_71757, n_64064);
                    bool bounds_check_71760 = x_71758 && y_71759;
                    bool index_certs_71761;
                    
                    if (!bounds_check_71760) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_71757,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_71762 = ((int64_t *) mem_69826)[min_res_71757];
                    int64_t binop_p_71763 = sub64(defunc_0_g_res_71693,
                                                  y_71762);
                    int64_t defunc_0_f_res_71764 = abs64(binop_p_71763);
                    int64_t new_sum_f_res_71765 = add64(x_71755,
                                                        defunc_0_f_res_71764);
                    
                    new_sum_71747 = new_sum_f_res_71765;
                }
                
                bool cond_71766 = sle64(new_sum_71747, best_sum_71742);
                int64_t loopres_71767;
                
                if (cond_71766) {
                    loopres_71767 = new_idx_71744;
                } else {
                    loopres_71767 = best_idx_71740;
                }
                
                int64_t loopres_71768;
                
                if (cond_71766) {
                    loopres_71768 = new_sum_71747;
                } else {
                    loopres_71768 = best_sum_71742;
                }
                
                int64_t best_idx_tmp_71879 = loopres_71767;
                int64_t last_idx_tmp_71880 = new_idx_71744;
                int64_t best_sum_tmp_71881 = loopres_71768;
                int64_t curr_sum_tmp_71882 = new_sum_71747;
                
                best_idx_71740 = best_idx_tmp_71879;
                last_idx_71741 = last_idx_tmp_71880;
                best_sum_71742 = best_sum_tmp_71881;
                curr_sum_71743 = curr_sum_tmp_71882;
            }
            idx_71735 = best_idx_71740;
            idx_71736 = last_idx_71741;
            idx_71737 = best_sum_71742;
            idx_71738 = curr_sum_71743;
            
            int64_t min_res_71769 = smin64(min_arg_64334, idx_71735);
            int64_t x_71770 = add64(min_res_64084, min_res_71769);
            int64_t r_71771 = sub64(x_71770, (int64_t) 1);
            bool x_71772 = sle64((int64_t) 0, r_71771);
            bool y_71773 = slt64(r_71771, n_64064);
            bool bounds_check_71774 = x_71772 && y_71773;
            bool index_certs_71775;
            
            if (!bounds_check_71774) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_71771,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_71776 = ((int64_t *) mem_69793)[r_71771];
            int64_t abs_arg_71777 = sub64(x_71776, min_res_71692);
            int64_t abs_res_71778 = abs64(abs_arg_71777);
            bool x_71779 = sle64((int64_t) 0, min_res_71769);
            bool y_71780 = slt64(min_res_71769, n_64064);
            bool bounds_check_71781 = x_71779 && y_71780;
            bool index_certs_71782;
            
            if (!bounds_check_71781) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71769,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_71783 = ((int64_t *) mem_69793)[min_res_71769];
            int64_t abs_arg_71784 = sub64(x_71783, min_res_71692);
            int64_t abs_res_71785 = abs64(abs_arg_71784);
            int64_t max_res_71786 = smax64(abs_res_71778, abs_res_71785);
            float defunc_0_f_res_71787 = sitofp_i64_f32(max_res_71786);
            float defunc_1_f_res_71788 = max_res_64338 + defunc_0_f_res_71787;
            float defunc_0_f_res_71789 = sitofp_i64_f32(min_res_71692);
            float defunc_2_reduce_res_71790;
            float defunc_2_reduce_res_71791;
            float defunc_2_reduce_res_71792;
            float redout_71794;
            float redout_71795;
            float redout_71796;
            
            redout_71794 = 0.0F;
            redout_71795 = 0.0F;
            redout_71796 = 0.0F;
            for (int64_t i_71793 = 0; i_71793 < q_64066; i_71793++) {
                float x_71797 = ((float *) mem_69865)[i_71793];
                bool cond_71798 = sle64(last_res_64316, i_71793);
                float defunc_0_f_res_71799;
                
                if (cond_71798) {
                    defunc_0_f_res_71799 = 0.0F;
                } else {
                    int64_t i_71800 = add64(min_res_71769, i_71793);
                    float x_71801 = ((float *) mem_69820)[i_71800];
                    float defunc_0_f_res_f_res_71802 = 1.0F + x_71801;
                    
                    defunc_0_f_res_71799 = defunc_0_f_res_f_res_71802;
                }
                
                float x_j_71803 = defunc_0_f_res_71799 - defunc_0_f_res_71789;
                float abs_res_71804 = (float) fabs(x_j_71803);
                float tmp1_71805 = abs_res_71804 / defunc_1_f_res_71788;
                float x_71806 = tmp1_71805 * tmp1_71805;
                float y_71807 = tmp1_71805 * x_71806;
                float tmp2_71808 = 1.0F - y_71807;
                float x_71809 = tmp2_71808 * tmp2_71808;
                float tmp3_71810 = tmp2_71808 * x_71809;
                float w_j_71811 = x_71797 * tmp3_71810;
                float xw_j_71812 = x_j_71803 * w_j_71811;
                float x2w_j_71813 = x_j_71803 * xw_j_71812;
                float defunc_1_op_res_71814 = w_j_71811 + redout_71794;
                float defunc_1_op_res_71815 = xw_j_71812 + redout_71795;
                float defunc_1_op_res_71816 = x2w_j_71813 + redout_71796;
                float redout_tmp_71883 = defunc_1_op_res_71814;
                float redout_tmp_71884 = defunc_1_op_res_71815;
                float redout_tmp_71885 = defunc_1_op_res_71816;
                
                redout_71794 = redout_tmp_71883;
                redout_71795 = redout_tmp_71884;
                redout_71796 = redout_tmp_71885;
            }
            defunc_2_reduce_res_71790 = redout_71794;
            defunc_2_reduce_res_71791 = redout_71795;
            defunc_2_reduce_res_71792 = redout_71796;
            
            float x_71817 = defunc_2_reduce_res_71790 *
                  defunc_2_reduce_res_71792;
            float y_71818 = defunc_2_reduce_res_71791 *
                  defunc_2_reduce_res_71791;
            float y_71819 = x_71817 - y_71818;
            float det1_71820 = 1.0F / y_71819;
            float a11_71821 = defunc_2_reduce_res_71792 * det1_71820;
            float negate_arg_71822 = defunc_2_reduce_res_71791 * det1_71820;
            float b11_71823 = 0.0F - negate_arg_71822;
            float c11_71824 = defunc_2_reduce_res_71790 * det1_71820;
            float defunc_2_reduce_res_71825;
            float defunc_2_reduce_res_71826;
            float redout_71828;
            float redout_71829;
            
            redout_71828 = 0.0F;
            redout_71829 = 0.0F;
            for (int64_t i_71827 = 0; i_71827 < q_64066; i_71827++) {
                float x_71830 = ((float *) mem_69865)[i_71827];
                bool cond_71831 = sle64(last_res_64316, i_71827);
                float defunc_0_f_res_71832;
                
                if (cond_71831) {
                    defunc_0_f_res_71832 = 0.0F;
                } else {
                    int64_t i_71833 = add64(min_res_71769, i_71827);
                    float x_71834 = ((float *) mem_69820)[i_71833];
                    float defunc_0_f_res_f_res_71835 = 1.0F + x_71834;
                    
                    defunc_0_f_res_71832 = defunc_0_f_res_f_res_71835;
                }
                
                float x_j_71836 = defunc_0_f_res_71832 - defunc_0_f_res_71789;
                float abs_res_71837 = (float) fabs(x_j_71836);
                float tmp1_71838 = abs_res_71837 / defunc_1_f_res_71788;
                float x_71839 = tmp1_71838 * tmp1_71838;
                float y_71840 = tmp1_71838 * x_71839;
                float tmp2_71841 = 1.0F - y_71840;
                float x_71842 = tmp2_71841 * tmp2_71841;
                float tmp3_71843 = tmp2_71841 * x_71842;
                float tmp4_71844 = x_71830 * tmp3_71843;
                float defunc_1_f_res_71845 = x_j_71836 * tmp4_71844;
                float defunc_0_f_res_71846;
                
                if (cond_71831) {
                    defunc_0_f_res_71846 = 0.0F;
                } else {
                    int64_t i_71847 = add64(min_res_71769, i_71827);
                    float x_71848 = ((float *) mem_69790)[i_71847];
                    
                    defunc_0_f_res_71846 = x_71848;
                }
                
                float x_71849 = a11_71821 * tmp4_71844;
                float y_71850 = b11_71823 * defunc_1_f_res_71845;
                float x_71851 = x_71849 + y_71850;
                float defunc_9_fit_fun_res_71852 = defunc_0_f_res_71846 *
                      x_71851;
                float x_71853 = b11_71823 * tmp4_71844;
                float y_71854 = c11_71824 * defunc_1_f_res_71845;
                float x_71855 = x_71853 + y_71854;
                float defunc_9_slope_fun_res_71856 = defunc_0_f_res_71846 *
                      x_71855;
                float defunc_1_op_res_71857 = defunc_9_fit_fun_res_71852 +
                      redout_71828;
                float defunc_1_op_res_71858 = defunc_9_slope_fun_res_71856 +
                      redout_71829;
                float redout_tmp_71886 = defunc_1_op_res_71857;
                float redout_tmp_71887 = defunc_1_op_res_71858;
                
                redout_71828 = redout_tmp_71886;
                redout_71829 = redout_tmp_71887;
            }
            defunc_2_reduce_res_71825 = redout_71828;
            defunc_2_reduce_res_71826 = redout_71829;
            ((float *) mem_69880)[i_71688] = defunc_2_reduce_res_71825;
            ((float *) mem_69883)[i_71688] = defunc_2_reduce_res_71826;
        }
        memmove(mem_69911.mem + gtid_66053 * n_m_64072 * (int64_t) 4,
                mem_69880 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_69915.mem + gtid_66053 * n_m_64072 * (int64_t) 4,
                mem_69883 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69775);
    free(mem_69790);
    free(mem_69793);
    free(mem_69820);
    free(mem_69823);
    free(mem_69826);
    free(mem_69865);
    free(mem_69880);
    free(mem_69883);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76507_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76507_end -
                 futhark_mc_segmap_parloop_76507_start;
        
        ctx->futhark_mc_segmap_parloop_76507_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76507_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76507_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76505(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66052 = tid;
    int num_tasks_71648 = info.nsubtasks;
    struct futhark_mc_task_76504 *futhark_mc_task_76504 =
                                 (struct futhark_mc_task_76504 *) args;
    struct futhark_context *ctx = futhark_mc_task_76504->ctx;
    uint64_t futhark_mc_segmap_task_76505_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76505_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76504->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76504->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76504->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76504->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76504->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76504->free_i_64078;
    bool x_64079 = futhark_mc_task_76504->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76504->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76504->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76504->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76504->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76504->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69746 = futhark_mc_task_76504->free_bytes_69746;
    int64_t bytes_69749 = futhark_mc_task_76504->free_bytes_69749;
    int64_t bytes_69764 = futhark_mc_task_76504->free_bytes_69764;
    int64_t bytes_69767 = futhark_mc_task_76504->free_bytes_69767;
    struct memblock mem_69911 = {.desc ="mem_69911", .mem =
                                 futhark_mc_task_76504->free_mem_69911, .size =
                                 0, .references =NULL};
    struct memblock mem_69915 = {.desc ="mem_69915", .mem =
                                 futhark_mc_task_76504->free_mem_69915, .size =
                                 0, .references =NULL};
    int64_t iter_71649;
    struct futhark_mc_segmap_parloop_struct_76506
    futhark_mc_segmap_parloop_struct_76506;
    
    futhark_mc_segmap_parloop_struct_76506.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76506.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76506.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76506.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76506.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76506.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76506.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76506.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76506.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76506.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76506.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76506.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76506.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76506.free_bytes_69746 = bytes_69746;
    futhark_mc_segmap_parloop_struct_76506.free_bytes_69749 = bytes_69749;
    futhark_mc_segmap_parloop_struct_76506.free_bytes_69764 = bytes_69764;
    futhark_mc_segmap_parloop_struct_76506.free_bytes_69767 = bytes_69767;
    futhark_mc_segmap_parloop_struct_76506.free_mem_69911 = mem_69911.mem;
    futhark_mc_segmap_parloop_struct_76506.free_mem_69915 = mem_69915.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76507_task;
    
    futhark_mc_segmap_parloop_76507_task.name =
        "futhark_mc_segmap_parloop_76507";
    futhark_mc_segmap_parloop_76507_task.fn = futhark_mc_segmap_parloop_76507;
    futhark_mc_segmap_parloop_76507_task.args =
        &futhark_mc_segmap_parloop_struct_76506;
    futhark_mc_segmap_parloop_76507_task.iterations = iterations;
    futhark_mc_segmap_parloop_76507_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76507_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76507_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76507_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76507_task);
    
    if (futhark_mc_segmap_parloop_76507_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76507_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76507_total_end -
                 futhark_mc_segmap_parloop_76507_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76507_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76507_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76507_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76505_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76505_end -
                 futhark_mc_segmap_task_76505_start;
        
        ctx->futhark_mc_segmap_task_76505_runs[tid]++;
        ctx->futhark_mc_segmap_task_76505_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76505_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76518 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69746;
    int64_t free_bytes_69749;
    int64_t free_bytes_69764;
    int64_t free_bytes_69767;
    char *free_mem_69911;
    char *free_mem_69915;
};
struct futhark_mc_task_76529 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66055;
    char *free_Y_mem_69593;
    char *free_mem_69748;
};
struct futhark_mc_scan_stage_1_parloop_struct_76532 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66055;
    char *free_Y_mem_69593;
    char *free_mem_69748;
};
static int futhark_mc_scan_stage_1_parloop_76533(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66056, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76532
    *futhark_mc_scan_stage_1_parloop_struct_76532 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76532 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76532->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76533_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76533_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76532->free_n_64064;
    int64_t gtid_66055 =
            futhark_mc_scan_stage_1_parloop_struct_76532->free_gtid_66055;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76532->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69748 = {.desc ="mem_69748", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76532->free_mem_69748,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72251 = start;
    int64_t x_71889;
    int64_t x_71890;
    
    x_71889 = (int64_t) 0;
    for (; iter_72251 < end; iter_72251++) {
        int64_t gtid_66057 = iter_72251;
        
        // stage 1 scan body
        {
            float x_71892 = ((float *) Y_mem_69593.mem)[gtid_66055 * n_64064 +
                                                        gtid_66057];
            bool isnan_res_71893;
            
            isnan_res_71893 = futrts_isnan32(x_71892);
            
            bool defunc_0_p_res_71894 = !isnan_res_71893;
            int64_t defunc_0_f_res_71895 = btoi_bool_i64(defunc_0_p_res_71894);
            
            // write mapped values results to memory
            { }
            x_71889 = x_71889;
            // Read next values
            {
                x_71890 = defunc_0_f_res_71895;
            }
            
            int64_t defunc_1_op_res_71891 = add64(x_71889, x_71890);
            
            ((int64_t *) mem_69748.mem)[gtid_66057] = defunc_1_op_res_71891;
            x_71889 = defunc_1_op_res_71891;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76533_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76533_end -
                 futhark_mc_scan_stage_1_parloop_76533_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76533_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76533_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76533_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76534 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66055;
    char *free_Y_mem_69593;
    char *free_mem_69748;
};
static int futhark_mc_scan_stage_3_parloop_76535(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66056, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76534
    *futhark_mc_scan_stage_3_parloop_struct_76534 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76534 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76534->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76535_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76535_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76534->free_n_64064;
    int64_t gtid_66055 =
            futhark_mc_scan_stage_3_parloop_struct_76534->free_gtid_66055;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76534->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69748 = {.desc ="mem_69748", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76534->free_mem_69748,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72263 = start;
    int64_t x_72260;
    int64_t x_72261;
    
    if (iter_72263 == (int64_t) 0) {
        x_72260 = (int64_t) 0;
    } else {
        x_72260 = ((int64_t *) mem_69748.mem)[iter_72263 - (int64_t) 1];
    }
    for (; iter_72263 < end; iter_72263++) {
        int64_t gtid_66057 = iter_72263;
        
        // stage 3 scan body
        {
            float x_71892 = ((float *) Y_mem_69593.mem)[gtid_66055 * n_64064 +
                                                        gtid_66057];
            bool isnan_res_71893;
            
            isnan_res_71893 = futrts_isnan32(x_71892);
            
            bool defunc_0_p_res_71894 = !isnan_res_71893;
            int64_t defunc_0_f_res_71895 = btoi_bool_i64(defunc_0_p_res_71894);
            
            x_72260 = x_72260;
            x_72261 = defunc_0_f_res_71895;
            
            int64_t defunc_1_op_res_72262 = add64(x_72260, x_72261);
            
            ((int64_t *) mem_69748.mem)[gtid_66057] = defunc_1_op_res_72262;
            x_72260 = defunc_1_op_res_72262;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76535_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76535_end -
                 futhark_mc_scan_stage_3_parloop_76535_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76535_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76535_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76535_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76530(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66056 = tid;
    int num_tasks_72250 = info.nsubtasks;
    struct futhark_mc_task_76529 *futhark_mc_task_76529 =
                                 (struct futhark_mc_task_76529 *) args;
    struct futhark_context *ctx = futhark_mc_task_76529->ctx;
    uint64_t futhark_mc_segscan_task_76530_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76530_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76529->free_n_64064;
    int64_t gtid_66055 = futhark_mc_task_76529->free_gtid_66055;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76529->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69748 = {.desc ="mem_69748", .mem =
                                 futhark_mc_task_76529->free_mem_69748, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_72257_cached_sizze_76531 = 0;
    char *scan_stage_2_accum_mem_72257 = NULL;
    int64_t iter_72251;
    struct futhark_mc_scan_stage_1_parloop_struct_76532
    futhark_mc_scan_stage_1_parloop_struct_76532;
    
    futhark_mc_scan_stage_1_parloop_struct_76532.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76532.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76532.free_gtid_66055 = gtid_66055;
    futhark_mc_scan_stage_1_parloop_struct_76532.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76532.free_mem_69748 = mem_69748.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76533_task;
    
    futhark_mc_scan_stage_1_parloop_76533_task.name =
        "futhark_mc_scan_stage_1_parloop_76533";
    futhark_mc_scan_stage_1_parloop_76533_task.fn =
        futhark_mc_scan_stage_1_parloop_76533;
    futhark_mc_scan_stage_1_parloop_76533_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76532;
    futhark_mc_scan_stage_1_parloop_76533_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76533_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76533_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76533_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76533_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76533_task);
    
    if (futhark_mc_scan_stage_1_parloop_76533_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76533_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76533_total_end -
                 futhark_mc_scan_stage_1_parloop_76533_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76533_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76533_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76533_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_72250)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_72252;
        int64_t x_72253;
        int64_t offset_72255 = (int64_t) 0;
        int64_t offset_index_72256 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_72257_cached_sizze_76531 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_72257 = realloc(scan_stage_2_accum_mem_72257,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_72257_cached_sizze_76531 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_72257)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_72259 = 0; i_72259 < num_tasks_72250 - 1; i_72259++) {
            offset_72255 = squot64(n_64064, sext_i32_i64(num_tasks_72250));
            if (slt64(sext_i32_i64(i_72259), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_72250)))) {
                offset_72255 += (int64_t) 1;
            }
            offset_index_72256 += offset_72255;
            
            int64_t gtid_66057 = offset_index_72256;
            float x_71892 = ((float *) Y_mem_69593.mem)[gtid_66055 * n_64064 +
                                                        gtid_66057];
            bool isnan_res_71893;
            
            isnan_res_71893 = futrts_isnan32(x_71892);
            
            bool defunc_0_p_res_71894 = !isnan_res_71893;
            int64_t defunc_0_f_res_71895 = btoi_bool_i64(defunc_0_p_res_71894);
            
            // Read carry in
            {
                x_72252 =
                    ((int64_t *) scan_stage_2_accum_mem_72257)[(int64_t) 0];
            }
            // Read next values
            {
                x_72253 = ((int64_t *) mem_69748.mem)[offset_index_72256 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_72254 = add64(x_72252, x_72253);
            
            ((int64_t *) mem_69748.mem)[offset_index_72256 - (int64_t) 1] =
                defunc_1_op_res_72254;
            ((int64_t *) scan_stage_2_accum_mem_72257)[(int64_t) 0] =
                defunc_1_op_res_72254;
        }
        
        int64_t iter_72263 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76534
        futhark_mc_scan_stage_3_parloop_struct_76534;
        
        futhark_mc_scan_stage_3_parloop_struct_76534.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76534.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76534.free_gtid_66055 =
            gtid_66055;
        futhark_mc_scan_stage_3_parloop_struct_76534.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76534.free_mem_69748 =
            mem_69748.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76535_task;
        
        futhark_mc_scan_stage_3_parloop_76535_task.name =
            "futhark_mc_scan_stage_3_parloop_76535";
        futhark_mc_scan_stage_3_parloop_76535_task.fn =
            futhark_mc_scan_stage_3_parloop_76535;
        futhark_mc_scan_stage_3_parloop_76535_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76534;
        futhark_mc_scan_stage_3_parloop_76535_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76535_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76535_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76535_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76535_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76535_task);
        
        if (futhark_mc_scan_stage_3_parloop_76535_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76535_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76535_total_end -
                     futhark_mc_scan_stage_3_parloop_76535_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76535_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76535_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76535_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_72257);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76530_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76530_end -
                 futhark_mc_segscan_task_76530_start;
        
        ctx->futhark_mc_segscan_task_76530_runs[tid]++;
        ctx->futhark_mc_segscan_task_76530_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76530_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76536 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66055;
    char *free_Y_mem_69593;
    char *free_mem_69748;
    char *free_mem_69751;
    char *free_mem_69754;
};
struct futhark_mc_segmap_parloop_struct_76538 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66055;
    char *free_Y_mem_69593;
    char *free_mem_69748;
    char *free_mem_69751;
    char *free_mem_69754;
};
static int futhark_mc_segmap_parloop_76539(void *args, int64_t start,
                                           int64_t end, int flat_tid_66058,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76538
    *futhark_mc_segmap_parloop_struct_76538 =
    (struct futhark_mc_segmap_parloop_struct_76538 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76538->ctx;
    uint64_t futhark_mc_segmap_parloop_76539_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76539_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76538->free_n_64064;
    int64_t gtid_66055 =
            futhark_mc_segmap_parloop_struct_76538->free_gtid_66055;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76538->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69748 = {.desc ="mem_69748", .mem =
                                 futhark_mc_segmap_parloop_struct_76538->free_mem_69748,
                                 .size =0, .references =NULL};
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_segmap_parloop_struct_76538->free_mem_69751,
                                 .size =0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_segmap_parloop_struct_76538->free_mem_69754,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72267 = start;
    
    for (; iter_72267 < end; iter_72267++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72270 = n_64064;
        int64_t gtid_66059 = iter_72267;
        int64_t remnant_72271 = iter_72267 - gtid_66059;
        float x_71896 = ((float *) Y_mem_69593.mem)[gtid_66055 * n_64064 +
                                                    gtid_66059];
        bool isnan_res_71897;
        
        isnan_res_71897 = futrts_isnan32(x_71896);
        
        bool defunc_0_p_res_71898 = !isnan_res_71897;
        int64_t defunc_1_f_res_71899;
        
        if (defunc_0_p_res_71898) {
            int64_t x_72268 = ((int64_t *) mem_69748.mem)[gtid_66059];
            int64_t defunc_1_f_res_t_res_72269 = sub64(x_72268, (int64_t) 1);
            
            defunc_1_f_res_71899 = defunc_1_f_res_t_res_72269;
        } else {
            defunc_1_f_res_71899 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71899) &&
            slt64(defunc_1_f_res_71899, n_64064)) {
            ((int64_t *) mem_69754.mem)[defunc_1_f_res_71899] = gtid_66059;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71899) &&
            slt64(defunc_1_f_res_71899, n_64064)) {
            ((float *) mem_69751.mem)[defunc_1_f_res_71899] = x_71896;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76539_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76539_end -
                 futhark_mc_segmap_parloop_76539_start;
        
        ctx->futhark_mc_segmap_parloop_76539_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76539_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76539_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76537(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66058 = tid;
    int num_tasks_72266 = info.nsubtasks;
    struct futhark_mc_task_76536 *futhark_mc_task_76536 =
                                 (struct futhark_mc_task_76536 *) args;
    struct futhark_context *ctx = futhark_mc_task_76536->ctx;
    uint64_t futhark_mc_segmap_task_76537_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76537_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76536->free_n_64064;
    int64_t gtid_66055 = futhark_mc_task_76536->free_gtid_66055;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76536->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69748 = {.desc ="mem_69748", .mem =
                                 futhark_mc_task_76536->free_mem_69748, .size =
                                 0, .references =NULL};
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_task_76536->free_mem_69751, .size =
                                 0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_task_76536->free_mem_69754, .size =
                                 0, .references =NULL};
    int64_t iter_72267;
    struct futhark_mc_segmap_parloop_struct_76538
    futhark_mc_segmap_parloop_struct_76538;
    
    futhark_mc_segmap_parloop_struct_76538.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76538.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76538.free_gtid_66055 = gtid_66055;
    futhark_mc_segmap_parloop_struct_76538.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76538.free_mem_69748 = mem_69748.mem;
    futhark_mc_segmap_parloop_struct_76538.free_mem_69751 = mem_69751.mem;
    futhark_mc_segmap_parloop_struct_76538.free_mem_69754 = mem_69754.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76539_task;
    
    futhark_mc_segmap_parloop_76539_task.name =
        "futhark_mc_segmap_parloop_76539";
    futhark_mc_segmap_parloop_76539_task.fn = futhark_mc_segmap_parloop_76539;
    futhark_mc_segmap_parloop_76539_task.args =
        &futhark_mc_segmap_parloop_struct_76538;
    futhark_mc_segmap_parloop_76539_task.iterations = iterations;
    futhark_mc_segmap_parloop_76539_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76539_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76539_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76539_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76539_task);
    
    if (futhark_mc_segmap_parloop_76539_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76539_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76539_total_end -
                 futhark_mc_segmap_parloop_76539_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76539_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76539_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76539_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76537_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76537_end -
                 futhark_mc_segmap_task_76537_start;
        
        ctx->futhark_mc_segmap_task_76537_runs[tid]++;
        ctx->futhark_mc_segmap_task_76537_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76537_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76540 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69754;
    char *free_mem_69757;
    char *free_mem_69760;
    char *free_mem_69763;
};
struct futhark_mc_segmap_parloop_struct_76542 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69754;
    char *free_mem_69757;
    char *free_mem_69760;
    char *free_mem_69763;
};
static int futhark_mc_segmap_parloop_76543(void *args, int64_t start,
                                           int64_t end, int flat_tid_66060,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76542
    *futhark_mc_segmap_parloop_struct_76542 =
    (struct futhark_mc_segmap_parloop_struct_76542 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76542->ctx;
    uint64_t futhark_mc_segmap_parloop_76543_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76543_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76542->free_n_64064;
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_segmap_parloop_struct_76542->free_mem_69754,
                                 .size =0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_segmap_parloop_struct_76542->free_mem_69757,
                                 .size =0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_segmap_parloop_struct_76542->free_mem_69760,
                                 .size =0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_segmap_parloop_struct_76542->free_mem_69763,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72273 = start;
    
    for (; iter_72273 < end; iter_72273++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72274 = n_64064;
        int64_t gtid_66061 = iter_72273;
        int64_t remnant_72275 = iter_72273 - gtid_66061;
        int64_t x_71902 = ((int64_t *) mem_69754.mem)[gtid_66061];
        int64_t defunc_0_f_res_71903 = add64((int64_t) 1, x_71902);
        bool cond_71904 = slt64(defunc_0_f_res_71903, (int64_t) 0);
        int64_t defunc_0_f_res_71905;
        
        if (cond_71904) {
            defunc_0_f_res_71905 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_71905 = defunc_0_f_res_71903;
        }
        
        float defunc_0_f_res_71906 = sitofp_i64_f32(x_71902);
        
        ((float *) mem_69757.mem)[gtid_66061] = defunc_0_f_res_71906;
        ((int64_t *) mem_69760.mem)[gtid_66061] = defunc_0_f_res_71905;
        ((int64_t *) mem_69763.mem)[gtid_66061] = defunc_0_f_res_71903;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76543_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76543_end -
                 futhark_mc_segmap_parloop_76543_start;
        
        ctx->futhark_mc_segmap_parloop_76543_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76543_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76543_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76541(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66060 = tid;
    int num_tasks_72272 = info.nsubtasks;
    struct futhark_mc_task_76540 *futhark_mc_task_76540 =
                                 (struct futhark_mc_task_76540 *) args;
    struct futhark_context *ctx = futhark_mc_task_76540->ctx;
    uint64_t futhark_mc_segmap_task_76541_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76541_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76540->free_n_64064;
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_task_76540->free_mem_69754, .size =
                                 0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_task_76540->free_mem_69757, .size =
                                 0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_task_76540->free_mem_69760, .size =
                                 0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_task_76540->free_mem_69763, .size =
                                 0, .references =NULL};
    int64_t iter_72273;
    struct futhark_mc_segmap_parloop_struct_76542
    futhark_mc_segmap_parloop_struct_76542;
    
    futhark_mc_segmap_parloop_struct_76542.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76542.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76542.free_mem_69754 = mem_69754.mem;
    futhark_mc_segmap_parloop_struct_76542.free_mem_69757 = mem_69757.mem;
    futhark_mc_segmap_parloop_struct_76542.free_mem_69760 = mem_69760.mem;
    futhark_mc_segmap_parloop_struct_76542.free_mem_69763 = mem_69763.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76543_task;
    
    futhark_mc_segmap_parloop_76543_task.name =
        "futhark_mc_segmap_parloop_76543";
    futhark_mc_segmap_parloop_76543_task.fn = futhark_mc_segmap_parloop_76543;
    futhark_mc_segmap_parloop_76543_task.args =
        &futhark_mc_segmap_parloop_struct_76542;
    futhark_mc_segmap_parloop_76543_task.iterations = iterations;
    futhark_mc_segmap_parloop_76543_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76543_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76543_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76543_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76543_task);
    
    if (futhark_mc_segmap_parloop_76543_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76543_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76543_total_end -
                 futhark_mc_segmap_parloop_76543_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76543_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76543_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76543_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76541_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76541_end -
                 futhark_mc_segmap_task_76541_start;
        
        ctx->futhark_mc_segmap_task_76541_runs[tid]++;
        ctx->futhark_mc_segmap_task_76541_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76541_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76544 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_66257;
    char *free_mem_69766;
};
struct futhark_mc_segmap_parloop_struct_76546 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_66257;
    char *free_mem_69766;
};
static int futhark_mc_segmap_parloop_76547(void *args, int64_t start,
                                           int64_t end, int flat_tid_66062,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76546
    *futhark_mc_segmap_parloop_struct_76546 =
    (struct futhark_mc_segmap_parloop_struct_76546 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76546->ctx;
    uint64_t futhark_mc_segmap_parloop_76547_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76547_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76546->free_q_64066;
    int64_t last_res_66257 =
            futhark_mc_segmap_parloop_struct_76546->free_last_res_66257;
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_segmap_parloop_struct_76546->free_mem_69766,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72277 = start;
    
    for (; iter_72277 < end; iter_72277++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72278 = q_64066;
        int64_t gtid_66063 = iter_72277;
        int64_t remnant_72279 = iter_72277 - gtid_66063;
        bool cond_71907 = sle64(last_res_66257, gtid_66063);
        float defunc_0_f_res_71908;
        
        if (cond_71907) {
            defunc_0_f_res_71908 = 0.0F;
        } else {
            defunc_0_f_res_71908 = 1.0F;
        }
        ((float *) mem_69766.mem)[gtid_66063] = defunc_0_f_res_71908;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76547_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76547_end -
                 futhark_mc_segmap_parloop_76547_start;
        
        ctx->futhark_mc_segmap_parloop_76547_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76547_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76547_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76545(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66062 = tid;
    int num_tasks_72276 = info.nsubtasks;
    struct futhark_mc_task_76544 *futhark_mc_task_76544 =
                                 (struct futhark_mc_task_76544 *) args;
    struct futhark_context *ctx = futhark_mc_task_76544->ctx;
    uint64_t futhark_mc_segmap_task_76545_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76545_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76544->free_q_64066;
    int64_t last_res_66257 = futhark_mc_task_76544->free_last_res_66257;
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_task_76544->free_mem_69766, .size =
                                 0, .references =NULL};
    int64_t iter_72277;
    struct futhark_mc_segmap_parloop_struct_76546
    futhark_mc_segmap_parloop_struct_76546;
    
    futhark_mc_segmap_parloop_struct_76546.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76546.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76546.free_last_res_66257 = last_res_66257;
    futhark_mc_segmap_parloop_struct_76546.free_mem_69766 = mem_69766.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76547_task;
    
    futhark_mc_segmap_parloop_76547_task.name =
        "futhark_mc_segmap_parloop_76547";
    futhark_mc_segmap_parloop_76547_task.fn = futhark_mc_segmap_parloop_76547;
    futhark_mc_segmap_parloop_76547_task.args =
        &futhark_mc_segmap_parloop_struct_76546;
    futhark_mc_segmap_parloop_76547_task.iterations = iterations;
    futhark_mc_segmap_parloop_76547_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76547_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76547_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76547_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76547_task);
    
    if (futhark_mc_segmap_parloop_76547_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76547_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76547_total_end -
                 futhark_mc_segmap_parloop_76547_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76545_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76545_end -
                 futhark_mc_segmap_task_76545_start;
        
        ctx->futhark_mc_segmap_task_76545_runs[tid]++;
        ctx->futhark_mc_segmap_task_76545_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76545_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76548 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66257;
    int64_t free_min_arg_66269;
    float free_max_res_66273;
    char *free_mem_69751;
    char *free_mem_69754;
    char *free_mem_69757;
    char *free_mem_69760;
    char *free_mem_69763;
    char *free_mem_69766;
    char *free_mem_69769;
    char *free_mem_69772;
};
struct futhark_mc_segmap_parloop_struct_76550 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66257;
    int64_t free_min_arg_66269;
    float free_max_res_66273;
    char *free_mem_69751;
    char *free_mem_69754;
    char *free_mem_69757;
    char *free_mem_69760;
    char *free_mem_69763;
    char *free_mem_69766;
    char *free_mem_69769;
    char *free_mem_69772;
};
static int futhark_mc_segmap_parloop_76551(void *args, int64_t start,
                                           int64_t end, int flat_tid_66064,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76550
    *futhark_mc_segmap_parloop_struct_76550 =
    (struct futhark_mc_segmap_parloop_struct_76550 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76550->ctx;
    uint64_t futhark_mc_segmap_parloop_76551_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76551_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76550->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76550->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76550->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76550->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76550->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76550->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76550->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76550->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76550->free_m_64090;
    int64_t last_res_66257 =
            futhark_mc_segmap_parloop_struct_76550->free_last_res_66257;
    int64_t min_arg_66269 =
            futhark_mc_segmap_parloop_struct_76550->free_min_arg_66269;
    float max_res_66273 =
          futhark_mc_segmap_parloop_struct_76550->free_max_res_66273;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69751,
                                 .size =0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69754,
                                 .size =0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69757,
                                 .size =0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69760,
                                 .size =0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69763,
                                 .size =0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69766,
                                 .size =0, .references =NULL};
    struct memblock mem_69769 = {.desc ="mem_69769", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69769,
                                 .size =0, .references =NULL};
    struct memblock mem_69772 = {.desc ="mem_69772", .mem =
                                 futhark_mc_segmap_parloop_struct_76550->free_mem_69772,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72281 = start;
    
    for (; iter_72281 < end; iter_72281++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72391 = n_m_64072;
        int64_t gtid_66065 = iter_72281;
        int64_t remnant_72392 = iter_72281 - gtid_66065;
        int64_t min_arg_72080 = mul64(jump_64068, gtid_66065);
        int64_t min_res_72081 = smin64(i_64078, min_arg_72080);
        int64_t defunc_0_g_res_72082 = add64((int64_t) 1, min_res_72081);
        bool nearest_idx_72083;
        int64_t nearest_idx_72084;
        int64_t nearest_idx_72085;
        bool loop_while_72282;
        int64_t low_72283;
        int64_t high_72284;
        
        loop_while_72282 = x_64079;
        low_72283 = (int64_t) 0;
        high_72284 = i_64078;
        while (loop_while_72282) {
            int64_t x_72285 = add64(low_72283, high_72284);
            int64_t mid_72286 = sdiv64(x_72285, (int64_t) 2);
            bool x_72287 = sle64((int64_t) 0, mid_72286);
            bool y_72288 = slt64(mid_72286, n_64064);
            bool bounds_check_72289 = x_72287 && y_72288;
            bool index_certs_72290;
            
            if (!bounds_check_72289) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72286,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_72291 = ((int64_t *) mem_69760.mem)[mid_72286];
            bool cond_72292 = sle64(defunc_0_g_res_72082, x_72291);
            int64_t loopres_72293;
            int64_t loopres_72294;
            
            if (cond_72292) {
                int64_t loopres_t_res_72295 = sub64(mid_72286, (int64_t) 1);
                
                loopres_72293 = low_72283;
                loopres_72294 = loopres_t_res_72295;
            } else {
                int64_t loopres_f_res_72296 = add64((int64_t) 1, mid_72286);
                
                loopres_72293 = loopres_f_res_72296;
                loopres_72294 = high_72284;
            }
            
            bool loop_cond_72297 = sle64(loopres_72293, loopres_72294);
            bool loop_while_tmp_72393 = loop_cond_72297;
            int64_t low_tmp_72394 = loopres_72293;
            int64_t high_tmp_72395 = loopres_72294;
            
            loop_while_72282 = loop_while_tmp_72393;
            low_72283 = low_tmp_72394;
            high_72284 = high_tmp_72395;
        }
        nearest_idx_72083 = loop_while_72282;
        nearest_idx_72084 = low_72283;
        nearest_idx_72085 = high_72284;
        
        int64_t max_arg_72102 = sub64(nearest_idx_72084, min_res_64084);
        int64_t max_res_72103 = smax64((int64_t) 0, max_arg_72102);
        int64_t j_72104 = add64(min_res_64084, max_res_72103);
        int64_t i_p_m_t_s_72105 = add64(m_64090, max_res_72103);
        bool zzero_leq_i_p_m_t_s_72106 = sle64((int64_t) 0, i_p_m_t_s_72105);
        bool i_p_m_t_s_leq_w_72107 = slt64(i_p_m_t_s_72105, n_64064);
        bool zzero_lte_i_72108 = sle64((int64_t) 0, max_res_72103);
        bool i_lte_j_72109 = sle64(max_res_72103, j_72104);
        bool y_72110 = i_p_m_t_s_leq_w_72107 && zzero_lte_i_72108;
        bool y_72111 = zzero_leq_i_p_m_t_s_72106 && y_72110;
        bool y_72112 = i_lte_j_72109 && y_72111;
        bool forwards_ok_72113 = zzero_lte_i_72108 && y_72112;
        bool ok_or_empty_72114 = empty_slice_64089 || forwards_ok_72113;
        bool index_certs_72115;
        
        if (!ok_or_empty_72114) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_72103, ":",
                          (long long) j_72104,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_72116;
        int64_t redout_72299 = (int64_t) 0;
        
        for (int64_t i_72298 = 0; i_72298 < min_res_64084; i_72298++) {
            int64_t slice_72300 = max_res_72103 + i_72298;
            int64_t x_72301 = ((int64_t *) mem_69763.mem)[slice_72300];
            int64_t abs_arg_72302 = sub64(x_72301, defunc_0_g_res_72082);
            int64_t abs_res_72303 = abs64(abs_arg_72302);
            int64_t defunc_1_op_res_72304 = add64(abs_res_72303, redout_72299);
            int64_t redout_tmp_72396 = defunc_1_op_res_72304;
            
            redout_72299 = redout_tmp_72396;
        }
        defunc_2_reduce_res_72116 = redout_72299;
        
        int64_t idx_72124;
        int64_t idx_72125;
        int64_t idx_72126;
        int64_t idx_72127;
        int64_t best_idx_72306;
        int64_t last_idx_72307;
        int64_t best_sum_72308;
        int64_t curr_sum_72309;
        
        best_idx_72306 = max_res_72103;
        last_idx_72307 = max_res_72103;
        best_sum_72308 = defunc_2_reduce_res_72116;
        curr_sum_72309 = defunc_2_reduce_res_72116;
        for (int64_t j_72305 = 0; j_72305 < min_res_64084; j_72305++) {
            int64_t new_idx_72310 = add64(max_res_72103, j_72305);
            int64_t x_72311 = add64(min_res_64084, new_idx_72310);
            bool cond_72312 = slt64(last_res_66257, x_72311);
            int64_t new_sum_72313;
            
            if (cond_72312) {
                new_sum_72313 = (int64_t) 9223372036854775807;
            } else {
                bool x_72314 = sle64((int64_t) 0, last_idx_72307);
                bool y_72315 = slt64(last_idx_72307, n_64064);
                bool bounds_check_72316 = x_72314 && y_72315;
                bool index_certs_72317;
                
                if (!bounds_check_72316) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_72307,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_72318 = ((int64_t *) mem_69763.mem)[last_idx_72307];
                int64_t binop_p_72319 = sub64(defunc_0_g_res_72082, y_72318);
                int64_t defunc_0_f_res_72320 = abs64(binop_p_72319);
                int64_t x_72321 = sub64(curr_sum_72309, defunc_0_f_res_72320);
                int64_t min_arg_72322 = add64(min_res_64084, last_idx_72307);
                int64_t min_res_72323 = smin64(i_64078, min_arg_72322);
                bool x_72324 = sle64((int64_t) 0, min_res_72323);
                bool y_72325 = slt64(min_res_72323, n_64064);
                bool bounds_check_72326 = x_72324 && y_72325;
                bool index_certs_72327;
                
                if (!bounds_check_72326) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72323,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_72328 = ((int64_t *) mem_69763.mem)[min_res_72323];
                int64_t binop_p_72329 = sub64(defunc_0_g_res_72082, y_72328);
                int64_t defunc_0_f_res_72330 = abs64(binop_p_72329);
                int64_t new_sum_f_res_72331 = add64(x_72321,
                                                    defunc_0_f_res_72330);
                
                new_sum_72313 = new_sum_f_res_72331;
            }
            
            bool cond_72332 = sle64(new_sum_72313, best_sum_72308);
            int64_t loopres_72333;
            
            if (cond_72332) {
                loopres_72333 = new_idx_72310;
            } else {
                loopres_72333 = best_idx_72306;
            }
            
            int64_t loopres_72334;
            
            if (cond_72332) {
                loopres_72334 = new_sum_72313;
            } else {
                loopres_72334 = best_sum_72308;
            }
            
            int64_t best_idx_tmp_72397 = loopres_72333;
            int64_t last_idx_tmp_72398 = new_idx_72310;
            int64_t best_sum_tmp_72399 = loopres_72334;
            int64_t curr_sum_tmp_72400 = new_sum_72313;
            
            best_idx_72306 = best_idx_tmp_72397;
            last_idx_72307 = last_idx_tmp_72398;
            best_sum_72308 = best_sum_tmp_72399;
            curr_sum_72309 = curr_sum_tmp_72400;
        }
        idx_72124 = best_idx_72306;
        idx_72125 = last_idx_72307;
        idx_72126 = best_sum_72308;
        idx_72127 = curr_sum_72309;
        
        int64_t min_res_72158 = smin64(min_arg_66269, idx_72124);
        int64_t x_72159 = add64(min_res_64084, min_res_72158);
        int64_t r_72160 = sub64(x_72159, (int64_t) 1);
        bool x_72161 = sle64((int64_t) 0, r_72160);
        bool y_72162 = slt64(r_72160, n_64064);
        bool bounds_check_72163 = x_72161 && y_72162;
        bool index_certs_72164;
        
        if (!bounds_check_72163) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72160,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_72165 = ((int64_t *) mem_69754.mem)[r_72160];
        int64_t abs_arg_72166 = sub64(x_72165, min_res_72081);
        int64_t abs_res_72167 = abs64(abs_arg_72166);
        bool x_72168 = sle64((int64_t) 0, min_res_72158);
        bool y_72169 = slt64(min_res_72158, n_64064);
        bool bounds_check_72170 = x_72168 && y_72169;
        bool index_certs_72171;
        
        if (!bounds_check_72170) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72158,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_72172 = ((int64_t *) mem_69754.mem)[min_res_72158];
        int64_t abs_arg_72173 = sub64(x_72172, min_res_72081);
        int64_t abs_res_72174 = abs64(abs_arg_72173);
        int64_t max_res_72175 = smax64(abs_res_72167, abs_res_72174);
        float defunc_0_f_res_72176 = sitofp_i64_f32(max_res_72175);
        float defunc_1_f_res_72177 = max_res_66273 + defunc_0_f_res_72176;
        float defunc_0_f_res_72178 = sitofp_i64_f32(min_res_72081);
        float defunc_2_reduce_res_72179;
        float defunc_2_reduce_res_72180;
        float defunc_2_reduce_res_72181;
        float redout_72336;
        float redout_72337;
        float redout_72338;
        
        redout_72336 = 0.0F;
        redout_72337 = 0.0F;
        redout_72338 = 0.0F;
        for (int64_t i_72335 = 0; i_72335 < q_64066; i_72335++) {
            float x_72339 = ((float *) mem_69766.mem)[i_72335];
            bool cond_72340 = sle64(last_res_66257, i_72335);
            float defunc_0_f_res_72341;
            
            if (cond_72340) {
                defunc_0_f_res_72341 = 0.0F;
            } else {
                int64_t i_72342 = add64(min_res_72158, i_72335);
                float x_72343 = ((float *) mem_69757.mem)[i_72342];
                float defunc_0_f_res_f_res_72344 = 1.0F + x_72343;
                
                defunc_0_f_res_72341 = defunc_0_f_res_f_res_72344;
            }
            
            float x_j_72345 = defunc_0_f_res_72341 - defunc_0_f_res_72178;
            float abs_res_72346 = (float) fabs(x_j_72345);
            float tmp1_72347 = abs_res_72346 / defunc_1_f_res_72177;
            float x_72348 = tmp1_72347 * tmp1_72347;
            float y_72349 = tmp1_72347 * x_72348;
            float tmp2_72350 = 1.0F - y_72349;
            float x_72351 = tmp2_72350 * tmp2_72350;
            float tmp3_72352 = tmp2_72350 * x_72351;
            float w_j_72353 = x_72339 * tmp3_72352;
            float xw_j_72354 = x_j_72345 * w_j_72353;
            float x2w_j_72355 = x_j_72345 * xw_j_72354;
            float defunc_1_op_res_72356 = w_j_72353 + redout_72336;
            float defunc_1_op_res_72357 = xw_j_72354 + redout_72337;
            float defunc_1_op_res_72358 = x2w_j_72355 + redout_72338;
            float redout_tmp_72401 = defunc_1_op_res_72356;
            float redout_tmp_72402 = defunc_1_op_res_72357;
            float redout_tmp_72403 = defunc_1_op_res_72358;
            
            redout_72336 = redout_tmp_72401;
            redout_72337 = redout_tmp_72402;
            redout_72338 = redout_tmp_72403;
        }
        defunc_2_reduce_res_72179 = redout_72336;
        defunc_2_reduce_res_72180 = redout_72337;
        defunc_2_reduce_res_72181 = redout_72338;
        
        float x_72206 = defunc_2_reduce_res_72179 * defunc_2_reduce_res_72181;
        float y_72207 = defunc_2_reduce_res_72180 * defunc_2_reduce_res_72180;
        float y_72208 = x_72206 - y_72207;
        float det1_72209 = 1.0F / y_72208;
        float a11_72210 = defunc_2_reduce_res_72181 * det1_72209;
        float negate_arg_72211 = defunc_2_reduce_res_72180 * det1_72209;
        float b11_72212 = 0.0F - negate_arg_72211;
        float c11_72213 = defunc_2_reduce_res_72179 * det1_72209;
        float defunc_2_reduce_res_72214;
        float defunc_2_reduce_res_72215;
        float redout_72360;
        float redout_72361;
        
        redout_72360 = 0.0F;
        redout_72361 = 0.0F;
        for (int64_t i_72359 = 0; i_72359 < q_64066; i_72359++) {
            float x_72362 = ((float *) mem_69766.mem)[i_72359];
            bool cond_72363 = sle64(last_res_66257, i_72359);
            float defunc_0_f_res_72364;
            
            if (cond_72363) {
                defunc_0_f_res_72364 = 0.0F;
            } else {
                int64_t i_72365 = add64(min_res_72158, i_72359);
                float x_72366 = ((float *) mem_69757.mem)[i_72365];
                float defunc_0_f_res_f_res_72367 = 1.0F + x_72366;
                
                defunc_0_f_res_72364 = defunc_0_f_res_f_res_72367;
            }
            
            float x_j_72368 = defunc_0_f_res_72364 - defunc_0_f_res_72178;
            float abs_res_72369 = (float) fabs(x_j_72368);
            float tmp1_72370 = abs_res_72369 / defunc_1_f_res_72177;
            float x_72371 = tmp1_72370 * tmp1_72370;
            float y_72372 = tmp1_72370 * x_72371;
            float tmp2_72373 = 1.0F - y_72372;
            float x_72374 = tmp2_72373 * tmp2_72373;
            float tmp3_72375 = tmp2_72373 * x_72374;
            float tmp4_72376 = x_72362 * tmp3_72375;
            float defunc_1_f_res_72377 = x_j_72368 * tmp4_72376;
            float defunc_0_f_res_72378;
            
            if (cond_72363) {
                defunc_0_f_res_72378 = 0.0F;
            } else {
                int64_t i_72379 = add64(min_res_72158, i_72359);
                float x_72380 = ((float *) mem_69751.mem)[i_72379];
                
                defunc_0_f_res_72378 = x_72380;
            }
            
            float x_72381 = a11_72210 * tmp4_72376;
            float y_72382 = b11_72212 * defunc_1_f_res_72377;
            float x_72383 = x_72381 + y_72382;
            float defunc_9_fit_fun_res_72384 = defunc_0_f_res_72378 * x_72383;
            float x_72385 = b11_72212 * tmp4_72376;
            float y_72386 = c11_72213 * defunc_1_f_res_72377;
            float x_72387 = x_72385 + y_72386;
            float defunc_9_slope_fun_res_72388 = defunc_0_f_res_72378 * x_72387;
            float defunc_1_op_res_72389 = defunc_9_fit_fun_res_72384 +
                  redout_72360;
            float defunc_1_op_res_72390 = defunc_9_slope_fun_res_72388 +
                  redout_72361;
            float redout_tmp_72404 = defunc_1_op_res_72389;
            float redout_tmp_72405 = defunc_1_op_res_72390;
            
            redout_72360 = redout_tmp_72404;
            redout_72361 = redout_tmp_72405;
        }
        defunc_2_reduce_res_72214 = redout_72360;
        defunc_2_reduce_res_72215 = redout_72361;
        ((float *) mem_69769.mem)[gtid_66065] = defunc_2_reduce_res_72214;
        ((float *) mem_69772.mem)[gtid_66065] = defunc_2_reduce_res_72215;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76551_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76551_end -
                 futhark_mc_segmap_parloop_76551_start;
        
        ctx->futhark_mc_segmap_parloop_76551_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76551_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76551_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76549(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66064 = tid;
    int num_tasks_72280 = info.nsubtasks;
    struct futhark_mc_task_76548 *futhark_mc_task_76548 =
                                 (struct futhark_mc_task_76548 *) args;
    struct futhark_context *ctx = futhark_mc_task_76548->ctx;
    uint64_t futhark_mc_segmap_task_76549_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76549_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76548->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76548->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76548->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76548->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76548->free_i_64078;
    bool x_64079 = futhark_mc_task_76548->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76548->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76548->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76548->free_m_64090;
    int64_t last_res_66257 = futhark_mc_task_76548->free_last_res_66257;
    int64_t min_arg_66269 = futhark_mc_task_76548->free_min_arg_66269;
    float max_res_66273 = futhark_mc_task_76548->free_max_res_66273;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_task_76548->free_mem_69751, .size =
                                 0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_task_76548->free_mem_69754, .size =
                                 0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_task_76548->free_mem_69757, .size =
                                 0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_task_76548->free_mem_69760, .size =
                                 0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_task_76548->free_mem_69763, .size =
                                 0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_task_76548->free_mem_69766, .size =
                                 0, .references =NULL};
    struct memblock mem_69769 = {.desc ="mem_69769", .mem =
                                 futhark_mc_task_76548->free_mem_69769, .size =
                                 0, .references =NULL};
    struct memblock mem_69772 = {.desc ="mem_69772", .mem =
                                 futhark_mc_task_76548->free_mem_69772, .size =
                                 0, .references =NULL};
    int64_t iter_72281;
    struct futhark_mc_segmap_parloop_struct_76550
    futhark_mc_segmap_parloop_struct_76550;
    
    futhark_mc_segmap_parloop_struct_76550.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76550.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76550.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76550.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76550.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76550.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76550.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76550.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76550.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76550.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76550.free_last_res_66257 = last_res_66257;
    futhark_mc_segmap_parloop_struct_76550.free_min_arg_66269 = min_arg_66269;
    futhark_mc_segmap_parloop_struct_76550.free_max_res_66273 = max_res_66273;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69751 = mem_69751.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69754 = mem_69754.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69757 = mem_69757.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69760 = mem_69760.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69763 = mem_69763.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69766 = mem_69766.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69769 = mem_69769.mem;
    futhark_mc_segmap_parloop_struct_76550.free_mem_69772 = mem_69772.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76551_task;
    
    futhark_mc_segmap_parloop_76551_task.name =
        "futhark_mc_segmap_parloop_76551";
    futhark_mc_segmap_parloop_76551_task.fn = futhark_mc_segmap_parloop_76551;
    futhark_mc_segmap_parloop_76551_task.args =
        &futhark_mc_segmap_parloop_struct_76550;
    futhark_mc_segmap_parloop_76551_task.iterations = iterations;
    futhark_mc_segmap_parloop_76551_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76551_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76551_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76551_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76551_task);
    
    if (futhark_mc_segmap_parloop_76551_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76551_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76551_total_end -
                 futhark_mc_segmap_parloop_76551_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76551_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76551_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76551_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76549_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76549_end -
                 futhark_mc_segmap_task_76549_start;
        
        ctx->futhark_mc_segmap_task_76549_runs[tid]++;
        ctx->futhark_mc_segmap_task_76549_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76549_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76553 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66257;
    int64_t free_min_arg_66269;
    float free_max_res_66273;
    char *free_mem_69751;
    char *free_mem_69754;
    char *free_mem_69757;
    char *free_mem_69760;
    char *free_mem_69763;
    char *free_mem_69766;
    char *free_mem_69769;
    char *free_mem_69772;
};
struct futhark_mc_task_76555 {
    struct futhark_context *ctx;
    char *free_mem_69763;
    int64_t free_defunc_0_g_res_71911;
    int64_t free_max_res_71932;
    int64_t *retval_defunc_2_reduce_res_71945;
};
struct futhark_mc_segred_stage_1_parloop_struct_76558 {
    struct futhark_context *ctx;
    char *free_mem_69763;
    int64_t free_defunc_0_g_res_71911;
    int64_t free_max_res_71932;
    char *free_reduce_stage_1_tid_res_arr_mem_72525;
};
static int futhark_mc_segred_stage_1_parloop_76559(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66068, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76558
    *futhark_mc_segred_stage_1_parloop_struct_76558 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76558 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76558->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76559_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76559_start = get_wall_time();
    
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76558->free_mem_69763,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_71911 =
            futhark_mc_segred_stage_1_parloop_struct_76558->free_defunc_0_g_res_71911;
    int64_t max_res_71932 =
            futhark_mc_segred_stage_1_parloop_struct_76558->free_max_res_71932;
    struct memblock reduce_stage_1_tid_res_arr_mem_72525 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72525",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76558->free_reduce_stage_1_tid_res_arr_mem_72525,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72527 = start;
    int64_t x_72423;
    int64_t x_72424;
    int64_t local_acc_72528 = (int64_t) 0;
    
    for (; iter_72527 < end; iter_72527++) {
        int64_t gtid_66069 = iter_72527;
        int64_t slice_72426 = gtid_66069 + max_res_71932;
        int64_t x_72427 = ((int64_t *) mem_69763.mem)[slice_72426];
        int64_t abs_arg_72428 = sub64(x_72427, defunc_0_g_res_71911);
        int64_t abs_res_72429 = abs64(abs_arg_72428);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72423 = local_acc_72528;
        }
        // Load next params
        {
            x_72424 = abs_res_72429;
        }
        // Red body
        {
            int64_t defunc_1_op_res_72425 = add64(x_72423, x_72424);
            
            local_acc_72528 = defunc_1_op_res_72425;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_72525.mem)[flat_tid_66068] =
        local_acc_72528;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76559_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76559_end -
                 futhark_mc_segred_stage_1_parloop_76559_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76559_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76559_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76559_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76556(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66068 = tid;
    int num_tasks_72524 = info.nsubtasks;
    struct futhark_mc_task_76555 *futhark_mc_task_76555 =
                                 (struct futhark_mc_task_76555 *) args;
    struct futhark_context *ctx = futhark_mc_task_76555->ctx;
    uint64_t futhark_mc_segred_task_76556_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76556_start = get_wall_time();
    
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_task_76555->free_mem_69763, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_71911 =
            futhark_mc_task_76555->free_defunc_0_g_res_71911;
    int64_t max_res_71932 = futhark_mc_task_76555->free_max_res_71932;
    int64_t defunc_2_reduce_res_71945 =
            *futhark_mc_task_76555->retval_defunc_2_reduce_res_71945;
    size_t reduce_stage_1_tid_res_arr_mem_72525_cached_sizze_76557 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72525 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72525_cached_sizze_76557 <
        (size_t) ((int64_t) 8 * num_tasks_72524)) {
        reduce_stage_1_tid_res_arr_mem_72525 =
            realloc(reduce_stage_1_tid_res_arr_mem_72525, (int64_t) 8 *
                    num_tasks_72524);
        reduce_stage_1_tid_res_arr_mem_72525_cached_sizze_76557 = (int64_t) 8 *
            num_tasks_72524;
    }
    
    int64_t iter_72527;
    struct futhark_mc_segred_stage_1_parloop_struct_76558
    futhark_mc_segred_stage_1_parloop_struct_76558;
    
    futhark_mc_segred_stage_1_parloop_struct_76558.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76558.free_mem_69763 =
        mem_69763.mem;
    futhark_mc_segred_stage_1_parloop_struct_76558.free_defunc_0_g_res_71911 =
        defunc_0_g_res_71911;
    futhark_mc_segred_stage_1_parloop_struct_76558.free_max_res_71932 =
        max_res_71932;
    futhark_mc_segred_stage_1_parloop_struct_76558.free_reduce_stage_1_tid_res_arr_mem_72525 =
        reduce_stage_1_tid_res_arr_mem_72525;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76559_task;
    
    futhark_mc_segred_stage_1_parloop_76559_task.name =
        "futhark_mc_segred_stage_1_parloop_76559";
    futhark_mc_segred_stage_1_parloop_76559_task.fn =
        futhark_mc_segred_stage_1_parloop_76559;
    futhark_mc_segred_stage_1_parloop_76559_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76558;
    futhark_mc_segred_stage_1_parloop_76559_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76559_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76559_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76559_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76559_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76559_task);
    
    if (futhark_mc_segred_stage_1_parloop_76559_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76559_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76559_total_end -
                 futhark_mc_segred_stage_1_parloop_76559_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76559_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76559_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76559_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71945 = (int64_t) 0;
    }
    
    int64_t x_72529;
    int64_t x_72530;
    
    for (int32_t i_72532 = 0; i_72532 < num_tasks_72524; i_72532++) {
        flat_tid_66068 = i_72532;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72529 = defunc_2_reduce_res_71945;
            }
            // load next params
            {
                x_72530 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_72525)[flat_tid_66068];
            }
            // red body
            {
                int64_t defunc_1_op_res_72531 = add64(x_72529, x_72530);
                
                defunc_2_reduce_res_71945 = defunc_1_op_res_72531;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72525);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76556_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76556_end -
                 futhark_mc_segred_task_76556_start;
        
        ctx->futhark_mc_segred_task_76556_runs[tid]++;
        ctx->futhark_mc_segred_task_76556_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76556_iter[tid] += iterations;
    }
    *futhark_mc_task_76555->retval_defunc_2_reduce_res_71945 =
        defunc_2_reduce_res_71945;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76560 {
    struct futhark_context *ctx;
    int64_t free_last_res_66257;
    char *free_mem_69757;
    char *free_mem_69766;
    int64_t free_min_res_71987;
    float free_defunc_1_f_res_72006;
    float free_defunc_0_f_res_72007;
    float *retval_defunc_2_reduce_res_72008;
    float *retval_defunc_2_reduce_res_72009;
    float *retval_defunc_2_reduce_res_72010;
};
struct futhark_mc_segred_stage_1_parloop_struct_76565 {
    struct futhark_context *ctx;
    int64_t free_last_res_66257;
    char *free_mem_69757;
    char *free_mem_69766;
    int64_t free_min_res_71987;
    float free_defunc_1_f_res_72006;
    float free_defunc_0_f_res_72007;
    char *free_reduce_stage_1_tid_res_arr_mem_72538;
    char *free_reduce_stage_1_tid_res_arr_mem_72540;
    char *free_reduce_stage_1_tid_res_arr_mem_72542;
};
static int futhark_mc_segred_stage_1_parloop_76566(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66070, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76565
    *futhark_mc_segred_stage_1_parloop_struct_76565 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76565 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76565->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76566_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76566_start = get_wall_time();
    
    int64_t last_res_66257 =
            futhark_mc_segred_stage_1_parloop_struct_76565->free_last_res_66257;
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76565->free_mem_69757,
                                 .size =0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76565->free_mem_69766,
                                 .size =0, .references =NULL};
    int64_t min_res_71987 =
            futhark_mc_segred_stage_1_parloop_struct_76565->free_min_res_71987;
    float defunc_1_f_res_72006 =
          futhark_mc_segred_stage_1_parloop_struct_76565->free_defunc_1_f_res_72006;
    float defunc_0_f_res_72007 =
          futhark_mc_segred_stage_1_parloop_struct_76565->free_defunc_0_f_res_72007;
    struct memblock reduce_stage_1_tid_res_arr_mem_72538 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72538",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76565->free_reduce_stage_1_tid_res_arr_mem_72538,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72540 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72540",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76565->free_reduce_stage_1_tid_res_arr_mem_72540,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72542 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72542",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76565->free_reduce_stage_1_tid_res_arr_mem_72542,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72544 = start;
    float x_72460;
    float x_72461;
    float x_72463;
    float x_72464;
    float x_72466;
    float x_72467;
    float local_acc_72545 = 0.0F;
    float local_acc_72546 = 0.0F;
    float local_acc_72547 = 0.0F;
    
    for (; iter_72544 < end; iter_72544++) {
        int64_t gtid_66071 = iter_72544;
        float x_72469 = ((float *) mem_69766.mem)[gtid_66071];
        bool cond_72470 = sle64(last_res_66257, gtid_66071);
        float defunc_0_f_res_72471;
        
        if (cond_72470) {
            defunc_0_f_res_72471 = 0.0F;
        } else {
            int64_t i_72472 = add64(gtid_66071, min_res_71987);
            float x_72473 = ((float *) mem_69757.mem)[i_72472];
            float defunc_0_f_res_f_res_72474 = 1.0F + x_72473;
            
            defunc_0_f_res_72471 = defunc_0_f_res_f_res_72474;
        }
        
        float x_j_72475 = defunc_0_f_res_72471 - defunc_0_f_res_72007;
        float abs_res_72476 = (float) fabs(x_j_72475);
        float tmp1_72477 = abs_res_72476 / defunc_1_f_res_72006;
        float x_72478 = tmp1_72477 * tmp1_72477;
        float y_72479 = tmp1_72477 * x_72478;
        float tmp2_72480 = 1.0F - y_72479;
        float x_72481 = tmp2_72480 * tmp2_72480;
        float tmp3_72482 = tmp2_72480 * x_72481;
        float w_j_72483 = x_72469 * tmp3_72482;
        float xw_j_72484 = x_j_72475 * w_j_72483;
        float x2w_j_72485 = x_j_72475 * xw_j_72484;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72460 = local_acc_72545;
        }
        // Load next params
        {
            x_72461 = w_j_72483;
        }
        // Red body
        {
            float defunc_1_op_res_72462 = x_72460 + x_72461;
            
            local_acc_72545 = defunc_1_op_res_72462;
        }
        // Load accum params
        {
            x_72463 = local_acc_72546;
        }
        // Load next params
        {
            x_72464 = xw_j_72484;
        }
        // Red body
        {
            float defunc_1_op_res_72465 = x_72463 + x_72464;
            
            local_acc_72546 = defunc_1_op_res_72465;
        }
        // Load accum params
        {
            x_72466 = local_acc_72547;
        }
        // Load next params
        {
            x_72467 = x2w_j_72485;
        }
        // Red body
        {
            float defunc_1_op_res_72468 = x_72466 + x_72467;
            
            local_acc_72547 = defunc_1_op_res_72468;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72538.mem)[flat_tid_66070] =
        local_acc_72545;
    ((float *) reduce_stage_1_tid_res_arr_mem_72540.mem)[flat_tid_66070] =
        local_acc_72546;
    ((float *) reduce_stage_1_tid_res_arr_mem_72542.mem)[flat_tid_66070] =
        local_acc_72547;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76566_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76566_end -
                 futhark_mc_segred_stage_1_parloop_76566_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76566_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76566_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76566_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76561(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66070 = tid;
    int num_tasks_72537 = info.nsubtasks;
    struct futhark_mc_task_76560 *futhark_mc_task_76560 =
                                 (struct futhark_mc_task_76560 *) args;
    struct futhark_context *ctx = futhark_mc_task_76560->ctx;
    uint64_t futhark_mc_segred_task_76561_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76561_start = get_wall_time();
    
    int64_t last_res_66257 = futhark_mc_task_76560->free_last_res_66257;
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_task_76560->free_mem_69757, .size =
                                 0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_task_76560->free_mem_69766, .size =
                                 0, .references =NULL};
    int64_t min_res_71987 = futhark_mc_task_76560->free_min_res_71987;
    float defunc_1_f_res_72006 =
          futhark_mc_task_76560->free_defunc_1_f_res_72006;
    float defunc_0_f_res_72007 =
          futhark_mc_task_76560->free_defunc_0_f_res_72007;
    float defunc_2_reduce_res_72008 =
          *futhark_mc_task_76560->retval_defunc_2_reduce_res_72008;
    float defunc_2_reduce_res_72009 =
          *futhark_mc_task_76560->retval_defunc_2_reduce_res_72009;
    float defunc_2_reduce_res_72010 =
          *futhark_mc_task_76560->retval_defunc_2_reduce_res_72010;
    size_t reduce_stage_1_tid_res_arr_mem_72538_cached_sizze_76562 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72538 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72540_cached_sizze_76563 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72540 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72542_cached_sizze_76564 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72542 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72538_cached_sizze_76562 <
        (size_t) ((int64_t) 4 * num_tasks_72537)) {
        reduce_stage_1_tid_res_arr_mem_72538 =
            realloc(reduce_stage_1_tid_res_arr_mem_72538, (int64_t) 4 *
                    num_tasks_72537);
        reduce_stage_1_tid_res_arr_mem_72538_cached_sizze_76562 = (int64_t) 4 *
            num_tasks_72537;
    }
    if (reduce_stage_1_tid_res_arr_mem_72540_cached_sizze_76563 <
        (size_t) ((int64_t) 4 * num_tasks_72537)) {
        reduce_stage_1_tid_res_arr_mem_72540 =
            realloc(reduce_stage_1_tid_res_arr_mem_72540, (int64_t) 4 *
                    num_tasks_72537);
        reduce_stage_1_tid_res_arr_mem_72540_cached_sizze_76563 = (int64_t) 4 *
            num_tasks_72537;
    }
    if (reduce_stage_1_tid_res_arr_mem_72542_cached_sizze_76564 <
        (size_t) ((int64_t) 4 * num_tasks_72537)) {
        reduce_stage_1_tid_res_arr_mem_72542 =
            realloc(reduce_stage_1_tid_res_arr_mem_72542, (int64_t) 4 *
                    num_tasks_72537);
        reduce_stage_1_tid_res_arr_mem_72542_cached_sizze_76564 = (int64_t) 4 *
            num_tasks_72537;
    }
    
    int64_t iter_72544;
    struct futhark_mc_segred_stage_1_parloop_struct_76565
    futhark_mc_segred_stage_1_parloop_struct_76565;
    
    futhark_mc_segred_stage_1_parloop_struct_76565.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_last_res_66257 =
        last_res_66257;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_mem_69757 =
        mem_69757.mem;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_mem_69766 =
        mem_69766.mem;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_min_res_71987 =
        min_res_71987;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_defunc_1_f_res_72006 =
        defunc_1_f_res_72006;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_defunc_0_f_res_72007 =
        defunc_0_f_res_72007;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_reduce_stage_1_tid_res_arr_mem_72538 =
        reduce_stage_1_tid_res_arr_mem_72538;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_reduce_stage_1_tid_res_arr_mem_72540 =
        reduce_stage_1_tid_res_arr_mem_72540;
    futhark_mc_segred_stage_1_parloop_struct_76565.free_reduce_stage_1_tid_res_arr_mem_72542 =
        reduce_stage_1_tid_res_arr_mem_72542;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76566_task;
    
    futhark_mc_segred_stage_1_parloop_76566_task.name =
        "futhark_mc_segred_stage_1_parloop_76566";
    futhark_mc_segred_stage_1_parloop_76566_task.fn =
        futhark_mc_segred_stage_1_parloop_76566;
    futhark_mc_segred_stage_1_parloop_76566_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76565;
    futhark_mc_segred_stage_1_parloop_76566_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76566_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76566_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76566_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76566_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76566_task);
    
    if (futhark_mc_segred_stage_1_parloop_76566_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76566_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76566_total_end -
                 futhark_mc_segred_stage_1_parloop_76566_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76566_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76566_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76566_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72008 = 0.0F;
        defunc_2_reduce_res_72009 = 0.0F;
        defunc_2_reduce_res_72010 = 0.0F;
    }
    
    float x_72548;
    float x_72549;
    float x_72551;
    float x_72552;
    float x_72554;
    float x_72555;
    
    for (int32_t i_72557 = 0; i_72557 < num_tasks_72537; i_72557++) {
        flat_tid_66070 = i_72557;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72548 = defunc_2_reduce_res_72008;
            }
            // load next params
            {
                x_72549 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72538)[flat_tid_66070];
            }
            // red body
            {
                float defunc_1_op_res_72550 = x_72548 + x_72549;
                
                defunc_2_reduce_res_72008 = defunc_1_op_res_72550;
            }
            // load acc params
            {
                x_72551 = defunc_2_reduce_res_72009;
            }
            // load next params
            {
                x_72552 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72540)[flat_tid_66070];
            }
            // red body
            {
                float defunc_1_op_res_72553 = x_72551 + x_72552;
                
                defunc_2_reduce_res_72009 = defunc_1_op_res_72553;
            }
            // load acc params
            {
                x_72554 = defunc_2_reduce_res_72010;
            }
            // load next params
            {
                x_72555 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72542)[flat_tid_66070];
            }
            // red body
            {
                float defunc_1_op_res_72556 = x_72554 + x_72555;
                
                defunc_2_reduce_res_72010 = defunc_1_op_res_72556;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72538);
    free(reduce_stage_1_tid_res_arr_mem_72540);
    free(reduce_stage_1_tid_res_arr_mem_72542);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76561_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76561_end -
                 futhark_mc_segred_task_76561_start;
        
        ctx->futhark_mc_segred_task_76561_runs[tid]++;
        ctx->futhark_mc_segred_task_76561_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76561_iter[tid] += iterations;
    }
    *futhark_mc_task_76560->retval_defunc_2_reduce_res_72008 =
        defunc_2_reduce_res_72008;
    *futhark_mc_task_76560->retval_defunc_2_reduce_res_72009 =
        defunc_2_reduce_res_72009;
    *futhark_mc_task_76560->retval_defunc_2_reduce_res_72010 =
        defunc_2_reduce_res_72010;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76567 {
    struct futhark_context *ctx;
    int64_t free_last_res_66257;
    char *free_mem_69751;
    char *free_mem_69757;
    char *free_mem_69766;
    int64_t free_min_res_71987;
    float free_defunc_1_f_res_72006;
    float free_defunc_0_f_res_72007;
    float free_a11_72041;
    float free_b11_72043;
    float free_c11_72044;
    float *retval_defunc_2_reduce_res_72045;
    float *retval_defunc_2_reduce_res_72046;
};
struct futhark_mc_segred_stage_1_parloop_struct_76571 {
    struct futhark_context *ctx;
    int64_t free_last_res_66257;
    char *free_mem_69751;
    char *free_mem_69757;
    char *free_mem_69766;
    int64_t free_min_res_71987;
    float free_defunc_1_f_res_72006;
    float free_defunc_0_f_res_72007;
    float free_a11_72041;
    float free_b11_72043;
    float free_c11_72044;
    char *free_reduce_stage_1_tid_res_arr_mem_72559;
    char *free_reduce_stage_1_tid_res_arr_mem_72561;
};
static int futhark_mc_segred_stage_1_parloop_76572(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66072, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76571
    *futhark_mc_segred_stage_1_parloop_struct_76571 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76571 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76571->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76572_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76572_start = get_wall_time();
    
    int64_t last_res_66257 =
            futhark_mc_segred_stage_1_parloop_struct_76571->free_last_res_66257;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76571->free_mem_69751,
                                 .size =0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76571->free_mem_69757,
                                 .size =0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76571->free_mem_69766,
                                 .size =0, .references =NULL};
    int64_t min_res_71987 =
            futhark_mc_segred_stage_1_parloop_struct_76571->free_min_res_71987;
    float defunc_1_f_res_72006 =
          futhark_mc_segred_stage_1_parloop_struct_76571->free_defunc_1_f_res_72006;
    float defunc_0_f_res_72007 =
          futhark_mc_segred_stage_1_parloop_struct_76571->free_defunc_0_f_res_72007;
    float a11_72041 =
          futhark_mc_segred_stage_1_parloop_struct_76571->free_a11_72041;
    float b11_72043 =
          futhark_mc_segred_stage_1_parloop_struct_76571->free_b11_72043;
    float c11_72044 =
          futhark_mc_segred_stage_1_parloop_struct_76571->free_c11_72044;
    struct memblock reduce_stage_1_tid_res_arr_mem_72559 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72559",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76571->free_reduce_stage_1_tid_res_arr_mem_72559,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72561 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72561",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76571->free_reduce_stage_1_tid_res_arr_mem_72561,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72563 = start;
    float x_72486;
    float x_72487;
    float x_72489;
    float x_72490;
    float local_acc_72564 = 0.0F;
    float local_acc_72565 = 0.0F;
    
    for (; iter_72563 < end; iter_72563++) {
        int64_t gtid_66073 = iter_72563;
        float x_72492 = ((float *) mem_69766.mem)[gtid_66073];
        bool cond_72493 = sle64(last_res_66257, gtid_66073);
        float defunc_0_f_res_72494;
        
        if (cond_72493) {
            defunc_0_f_res_72494 = 0.0F;
        } else {
            int64_t i_72495 = add64(gtid_66073, min_res_71987);
            float x_72496 = ((float *) mem_69757.mem)[i_72495];
            float defunc_0_f_res_f_res_72497 = 1.0F + x_72496;
            
            defunc_0_f_res_72494 = defunc_0_f_res_f_res_72497;
        }
        
        float x_j_72498 = defunc_0_f_res_72494 - defunc_0_f_res_72007;
        float abs_res_72499 = (float) fabs(x_j_72498);
        float tmp1_72500 = abs_res_72499 / defunc_1_f_res_72006;
        float x_72501 = tmp1_72500 * tmp1_72500;
        float y_72502 = tmp1_72500 * x_72501;
        float tmp2_72503 = 1.0F - y_72502;
        float x_72504 = tmp2_72503 * tmp2_72503;
        float tmp3_72505 = tmp2_72503 * x_72504;
        float tmp4_72506 = x_72492 * tmp3_72505;
        float defunc_1_f_res_72507 = x_j_72498 * tmp4_72506;
        float defunc_0_f_res_72508;
        
        if (cond_72493) {
            defunc_0_f_res_72508 = 0.0F;
        } else {
            int64_t i_72509 = add64(gtid_66073, min_res_71987);
            float x_72510 = ((float *) mem_69751.mem)[i_72509];
            
            defunc_0_f_res_72508 = x_72510;
        }
        
        float x_72511 = a11_72041 * tmp4_72506;
        float y_72512 = b11_72043 * defunc_1_f_res_72507;
        float x_72513 = x_72511 + y_72512;
        float defunc_9_fit_fun_res_72514 = defunc_0_f_res_72508 * x_72513;
        float x_72515 = b11_72043 * tmp4_72506;
        float y_72516 = c11_72044 * defunc_1_f_res_72507;
        float x_72517 = x_72515 + y_72516;
        float defunc_9_slope_fun_res_72518 = defunc_0_f_res_72508 * x_72517;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72486 = local_acc_72564;
        }
        // Load next params
        {
            x_72487 = defunc_9_fit_fun_res_72514;
        }
        // Red body
        {
            float defunc_1_op_res_72488 = x_72486 + x_72487;
            
            local_acc_72564 = defunc_1_op_res_72488;
        }
        // Load accum params
        {
            x_72489 = local_acc_72565;
        }
        // Load next params
        {
            x_72490 = defunc_9_slope_fun_res_72518;
        }
        // Red body
        {
            float defunc_1_op_res_72491 = x_72489 + x_72490;
            
            local_acc_72565 = defunc_1_op_res_72491;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72559.mem)[flat_tid_66072] =
        local_acc_72564;
    ((float *) reduce_stage_1_tid_res_arr_mem_72561.mem)[flat_tid_66072] =
        local_acc_72565;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76572_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76572_end -
                 futhark_mc_segred_stage_1_parloop_76572_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76572_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76572_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76572_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76568(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66072 = tid;
    int num_tasks_72558 = info.nsubtasks;
    struct futhark_mc_task_76567 *futhark_mc_task_76567 =
                                 (struct futhark_mc_task_76567 *) args;
    struct futhark_context *ctx = futhark_mc_task_76567->ctx;
    uint64_t futhark_mc_segred_task_76568_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76568_start = get_wall_time();
    
    int64_t last_res_66257 = futhark_mc_task_76567->free_last_res_66257;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_task_76567->free_mem_69751, .size =
                                 0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_task_76567->free_mem_69757, .size =
                                 0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_task_76567->free_mem_69766, .size =
                                 0, .references =NULL};
    int64_t min_res_71987 = futhark_mc_task_76567->free_min_res_71987;
    float defunc_1_f_res_72006 =
          futhark_mc_task_76567->free_defunc_1_f_res_72006;
    float defunc_0_f_res_72007 =
          futhark_mc_task_76567->free_defunc_0_f_res_72007;
    float a11_72041 = futhark_mc_task_76567->free_a11_72041;
    float b11_72043 = futhark_mc_task_76567->free_b11_72043;
    float c11_72044 = futhark_mc_task_76567->free_c11_72044;
    float defunc_2_reduce_res_72045 =
          *futhark_mc_task_76567->retval_defunc_2_reduce_res_72045;
    float defunc_2_reduce_res_72046 =
          *futhark_mc_task_76567->retval_defunc_2_reduce_res_72046;
    size_t reduce_stage_1_tid_res_arr_mem_72559_cached_sizze_76569 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72559 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72561_cached_sizze_76570 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72561 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72559_cached_sizze_76569 <
        (size_t) ((int64_t) 4 * num_tasks_72558)) {
        reduce_stage_1_tid_res_arr_mem_72559 =
            realloc(reduce_stage_1_tid_res_arr_mem_72559, (int64_t) 4 *
                    num_tasks_72558);
        reduce_stage_1_tid_res_arr_mem_72559_cached_sizze_76569 = (int64_t) 4 *
            num_tasks_72558;
    }
    if (reduce_stage_1_tid_res_arr_mem_72561_cached_sizze_76570 <
        (size_t) ((int64_t) 4 * num_tasks_72558)) {
        reduce_stage_1_tid_res_arr_mem_72561 =
            realloc(reduce_stage_1_tid_res_arr_mem_72561, (int64_t) 4 *
                    num_tasks_72558);
        reduce_stage_1_tid_res_arr_mem_72561_cached_sizze_76570 = (int64_t) 4 *
            num_tasks_72558;
    }
    
    int64_t iter_72563;
    struct futhark_mc_segred_stage_1_parloop_struct_76571
    futhark_mc_segred_stage_1_parloop_struct_76571;
    
    futhark_mc_segred_stage_1_parloop_struct_76571.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_last_res_66257 =
        last_res_66257;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_mem_69751 =
        mem_69751.mem;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_mem_69757 =
        mem_69757.mem;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_mem_69766 =
        mem_69766.mem;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_min_res_71987 =
        min_res_71987;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_defunc_1_f_res_72006 =
        defunc_1_f_res_72006;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_defunc_0_f_res_72007 =
        defunc_0_f_res_72007;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_a11_72041 = a11_72041;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_b11_72043 = b11_72043;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_c11_72044 = c11_72044;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_reduce_stage_1_tid_res_arr_mem_72559 =
        reduce_stage_1_tid_res_arr_mem_72559;
    futhark_mc_segred_stage_1_parloop_struct_76571.free_reduce_stage_1_tid_res_arr_mem_72561 =
        reduce_stage_1_tid_res_arr_mem_72561;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76572_task;
    
    futhark_mc_segred_stage_1_parloop_76572_task.name =
        "futhark_mc_segred_stage_1_parloop_76572";
    futhark_mc_segred_stage_1_parloop_76572_task.fn =
        futhark_mc_segred_stage_1_parloop_76572;
    futhark_mc_segred_stage_1_parloop_76572_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76571;
    futhark_mc_segred_stage_1_parloop_76572_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76572_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76572_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76572_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76572_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76572_task);
    
    if (futhark_mc_segred_stage_1_parloop_76572_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76572_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76572_total_end -
                 futhark_mc_segred_stage_1_parloop_76572_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76572_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76572_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76572_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72045 = 0.0F;
        defunc_2_reduce_res_72046 = 0.0F;
    }
    
    float x_72566;
    float x_72567;
    float x_72569;
    float x_72570;
    
    for (int32_t i_72572 = 0; i_72572 < num_tasks_72558; i_72572++) {
        flat_tid_66072 = i_72572;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72566 = defunc_2_reduce_res_72045;
            }
            // load next params
            {
                x_72567 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72559)[flat_tid_66072];
            }
            // red body
            {
                float defunc_1_op_res_72568 = x_72566 + x_72567;
                
                defunc_2_reduce_res_72045 = defunc_1_op_res_72568;
            }
            // load acc params
            {
                x_72569 = defunc_2_reduce_res_72046;
            }
            // load next params
            {
                x_72570 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72561)[flat_tid_66072];
            }
            // red body
            {
                float defunc_1_op_res_72571 = x_72569 + x_72570;
                
                defunc_2_reduce_res_72046 = defunc_1_op_res_72571;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72559);
    free(reduce_stage_1_tid_res_arr_mem_72561);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76568_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76568_end -
                 futhark_mc_segred_task_76568_start;
        
        ctx->futhark_mc_segred_task_76568_runs[tid]++;
        ctx->futhark_mc_segred_task_76568_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76568_iter[tid] += iterations;
    }
    *futhark_mc_task_76567->retval_defunc_2_reduce_res_72045 =
        defunc_2_reduce_res_72045;
    *futhark_mc_task_76567->retval_defunc_2_reduce_res_72046 =
        defunc_2_reduce_res_72046;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76554(void *args, int64_t start,
                                           int64_t end, int flat_tid_66066,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76553
    *futhark_mc_segmap_parloop_struct_76553 =
    (struct futhark_mc_segmap_parloop_struct_76553 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76553->ctx;
    uint64_t futhark_mc_segmap_parloop_76554_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76554_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76553->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76553->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76553->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76553->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76553->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76553->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76553->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76553->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76553->free_m_64090;
    int64_t last_res_66257 =
            futhark_mc_segmap_parloop_struct_76553->free_last_res_66257;
    int64_t min_arg_66269 =
            futhark_mc_segmap_parloop_struct_76553->free_min_arg_66269;
    float max_res_66273 =
          futhark_mc_segmap_parloop_struct_76553->free_max_res_66273;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69751,
                                 .size =0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69754,
                                 .size =0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69757,
                                 .size =0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69760,
                                 .size =0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69763,
                                 .size =0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69766,
                                 .size =0, .references =NULL};
    struct memblock mem_69769 = {.desc ="mem_69769", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69769,
                                 .size =0, .references =NULL};
    struct memblock mem_69772 = {.desc ="mem_69772", .mem =
                                 futhark_mc_segmap_parloop_struct_76553->free_mem_69772,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72406 = start;
    
    for (; iter_72406 < end; iter_72406++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72519 = n_m_64072;
        int64_t gtid_66067 = iter_72406;
        int64_t remnant_72520 = iter_72406 - gtid_66067;
        int64_t min_arg_71909 = mul64(jump_64068, gtid_66067);
        int64_t min_res_71910 = smin64(i_64078, min_arg_71909);
        int64_t defunc_0_g_res_71911 = add64((int64_t) 1, min_res_71910);
        bool nearest_idx_71912;
        int64_t nearest_idx_71913;
        int64_t nearest_idx_71914;
        bool loop_while_72407;
        int64_t low_72408;
        int64_t high_72409;
        
        loop_while_72407 = x_64079;
        low_72408 = (int64_t) 0;
        high_72409 = i_64078;
        while (loop_while_72407) {
            int64_t x_72410 = add64(low_72408, high_72409);
            int64_t mid_72411 = sdiv64(x_72410, (int64_t) 2);
            bool x_72412 = sle64((int64_t) 0, mid_72411);
            bool y_72413 = slt64(mid_72411, n_64064);
            bool bounds_check_72414 = x_72412 && y_72413;
            bool index_certs_72415;
            
            if (!bounds_check_72414) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72411,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_72416 = ((int64_t *) mem_69760.mem)[mid_72411];
            bool cond_72417 = sle64(defunc_0_g_res_71911, x_72416);
            int64_t loopres_72418;
            int64_t loopres_72419;
            
            if (cond_72417) {
                int64_t loopres_t_res_72420 = sub64(mid_72411, (int64_t) 1);
                
                loopres_72418 = low_72408;
                loopres_72419 = loopres_t_res_72420;
            } else {
                int64_t loopres_f_res_72421 = add64((int64_t) 1, mid_72411);
                
                loopres_72418 = loopres_f_res_72421;
                loopres_72419 = high_72409;
            }
            
            bool loop_cond_72422 = sle64(loopres_72418, loopres_72419);
            bool loop_while_tmp_72521 = loop_cond_72422;
            int64_t low_tmp_72522 = loopres_72418;
            int64_t high_tmp_72523 = loopres_72419;
            
            loop_while_72407 = loop_while_tmp_72521;
            low_72408 = low_tmp_72522;
            high_72409 = high_tmp_72523;
        }
        nearest_idx_71912 = loop_while_72407;
        nearest_idx_71913 = low_72408;
        nearest_idx_71914 = high_72409;
        
        int64_t max_arg_71931 = sub64(nearest_idx_71913, min_res_64084);
        int64_t max_res_71932 = smax64((int64_t) 0, max_arg_71931);
        int64_t j_71933 = add64(min_res_64084, max_res_71932);
        int64_t i_p_m_t_s_71934 = add64(m_64090, max_res_71932);
        bool zzero_leq_i_p_m_t_s_71935 = sle64((int64_t) 0, i_p_m_t_s_71934);
        bool i_p_m_t_s_leq_w_71936 = slt64(i_p_m_t_s_71934, n_64064);
        bool zzero_lte_i_71937 = sle64((int64_t) 0, max_res_71932);
        bool i_lte_j_71938 = sle64(max_res_71932, j_71933);
        bool y_71939 = i_p_m_t_s_leq_w_71936 && zzero_lte_i_71937;
        bool y_71940 = zzero_leq_i_p_m_t_s_71935 && y_71939;
        bool y_71941 = i_lte_j_71938 && y_71940;
        bool forwards_ok_71942 = zzero_lte_i_71937 && y_71941;
        bool ok_or_empty_71943 = empty_slice_64089 || forwards_ok_71942;
        bool index_certs_71944;
        
        if (!ok_or_empty_71943) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71932, ":",
                          (long long) j_71933,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71945;
        int64_t flat_tid_66068 = (int64_t) 0;
        int32_t num_tasks_72524;
        struct futhark_mc_task_76555 futhark_mc_task_76555;
        
        futhark_mc_task_76555.ctx = ctx;
        futhark_mc_task_76555.free_mem_69763 = mem_69763.mem;
        futhark_mc_task_76555.free_defunc_0_g_res_71911 = defunc_0_g_res_71911;
        futhark_mc_task_76555.free_max_res_71932 = max_res_71932;
        futhark_mc_task_76555.retval_defunc_2_reduce_res_71945 =
            &defunc_2_reduce_res_71945;
        
        struct scheduler_segop futhark_mc_task_76555_task;
        
        futhark_mc_task_76555_task.args = &futhark_mc_task_76555;
        futhark_mc_task_76555_task.top_level_fn = futhark_mc_segred_task_76556;
        futhark_mc_task_76555_task.name = "futhark_mc_segred_task_76556";
        futhark_mc_task_76555_task.iterations = min_res_64084;
        futhark_mc_task_76555_task.task_time =
            &ctx->futhark_mc_segred_task_76556_total_time;
        futhark_mc_task_76555_task.task_iter =
            &ctx->futhark_mc_segred_task_76556_total_iter;
        futhark_mc_task_76555_task.sched = STATIC;
        futhark_mc_task_76555_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76556_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76555_task);
        
        if (futhark_mc_segred_task_76556_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_71953;
        int64_t idx_71954;
        int64_t idx_71955;
        int64_t idx_71956;
        int64_t best_idx_72431;
        int64_t last_idx_72432;
        int64_t best_sum_72433;
        int64_t curr_sum_72434;
        
        best_idx_72431 = max_res_71932;
        last_idx_72432 = max_res_71932;
        best_sum_72433 = defunc_2_reduce_res_71945;
        curr_sum_72434 = defunc_2_reduce_res_71945;
        for (int64_t j_72430 = 0; j_72430 < min_res_64084; j_72430++) {
            int64_t new_idx_72435 = add64(max_res_71932, j_72430);
            int64_t x_72436 = add64(min_res_64084, new_idx_72435);
            bool cond_72437 = slt64(last_res_66257, x_72436);
            int64_t new_sum_72438;
            
            if (cond_72437) {
                new_sum_72438 = (int64_t) 9223372036854775807;
            } else {
                bool x_72439 = sle64((int64_t) 0, last_idx_72432);
                bool y_72440 = slt64(last_idx_72432, n_64064);
                bool bounds_check_72441 = x_72439 && y_72440;
                bool index_certs_72442;
                
                if (!bounds_check_72441) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_72432,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_72443 = ((int64_t *) mem_69763.mem)[last_idx_72432];
                int64_t binop_p_72444 = sub64(defunc_0_g_res_71911, y_72443);
                int64_t defunc_0_f_res_72445 = abs64(binop_p_72444);
                int64_t x_72446 = sub64(curr_sum_72434, defunc_0_f_res_72445);
                int64_t min_arg_72447 = add64(min_res_64084, last_idx_72432);
                int64_t min_res_72448 = smin64(i_64078, min_arg_72447);
                bool x_72449 = sle64((int64_t) 0, min_res_72448);
                bool y_72450 = slt64(min_res_72448, n_64064);
                bool bounds_check_72451 = x_72449 && y_72450;
                bool index_certs_72452;
                
                if (!bounds_check_72451) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72448,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_72453 = ((int64_t *) mem_69763.mem)[min_res_72448];
                int64_t binop_p_72454 = sub64(defunc_0_g_res_71911, y_72453);
                int64_t defunc_0_f_res_72455 = abs64(binop_p_72454);
                int64_t new_sum_f_res_72456 = add64(x_72446,
                                                    defunc_0_f_res_72455);
                
                new_sum_72438 = new_sum_f_res_72456;
            }
            
            bool cond_72457 = sle64(new_sum_72438, best_sum_72433);
            int64_t loopres_72458;
            
            if (cond_72457) {
                loopres_72458 = new_idx_72435;
            } else {
                loopres_72458 = best_idx_72431;
            }
            
            int64_t loopres_72459;
            
            if (cond_72457) {
                loopres_72459 = new_sum_72438;
            } else {
                loopres_72459 = best_sum_72433;
            }
            
            int64_t best_idx_tmp_72533 = loopres_72458;
            int64_t last_idx_tmp_72534 = new_idx_72435;
            int64_t best_sum_tmp_72535 = loopres_72459;
            int64_t curr_sum_tmp_72536 = new_sum_72438;
            
            best_idx_72431 = best_idx_tmp_72533;
            last_idx_72432 = last_idx_tmp_72534;
            best_sum_72433 = best_sum_tmp_72535;
            curr_sum_72434 = curr_sum_tmp_72536;
        }
        idx_71953 = best_idx_72431;
        idx_71954 = last_idx_72432;
        idx_71955 = best_sum_72433;
        idx_71956 = curr_sum_72434;
        
        int64_t min_res_71987 = smin64(min_arg_66269, idx_71953);
        int64_t x_71988 = add64(min_res_64084, min_res_71987);
        int64_t r_71989 = sub64(x_71988, (int64_t) 1);
        bool x_71990 = sle64((int64_t) 0, r_71989);
        bool y_71991 = slt64(r_71989, n_64064);
        bool bounds_check_71992 = x_71990 && y_71991;
        bool index_certs_71993;
        
        if (!bounds_check_71992) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71989,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_71994 = ((int64_t *) mem_69754.mem)[r_71989];
        int64_t abs_arg_71995 = sub64(x_71994, min_res_71910);
        int64_t abs_res_71996 = abs64(abs_arg_71995);
        bool x_71997 = sle64((int64_t) 0, min_res_71987);
        bool y_71998 = slt64(min_res_71987, n_64064);
        bool bounds_check_71999 = x_71997 && y_71998;
        bool index_certs_72000;
        
        if (!bounds_check_71999) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71987,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_72001 = ((int64_t *) mem_69754.mem)[min_res_71987];
        int64_t abs_arg_72002 = sub64(x_72001, min_res_71910);
        int64_t abs_res_72003 = abs64(abs_arg_72002);
        int64_t max_res_72004 = smax64(abs_res_71996, abs_res_72003);
        float defunc_0_f_res_72005 = sitofp_i64_f32(max_res_72004);
        float defunc_1_f_res_72006 = max_res_66273 + defunc_0_f_res_72005;
        float defunc_0_f_res_72007 = sitofp_i64_f32(min_res_71910);
        float defunc_2_reduce_res_72008;
        float defunc_2_reduce_res_72009;
        float defunc_2_reduce_res_72010;
        int64_t flat_tid_66070 = (int64_t) 0;
        int32_t num_tasks_72537;
        struct futhark_mc_task_76560 futhark_mc_task_76560;
        
        futhark_mc_task_76560.ctx = ctx;
        futhark_mc_task_76560.free_last_res_66257 = last_res_66257;
        futhark_mc_task_76560.free_mem_69757 = mem_69757.mem;
        futhark_mc_task_76560.free_mem_69766 = mem_69766.mem;
        futhark_mc_task_76560.free_min_res_71987 = min_res_71987;
        futhark_mc_task_76560.free_defunc_1_f_res_72006 = defunc_1_f_res_72006;
        futhark_mc_task_76560.free_defunc_0_f_res_72007 = defunc_0_f_res_72007;
        futhark_mc_task_76560.retval_defunc_2_reduce_res_72008 =
            &defunc_2_reduce_res_72008;
        futhark_mc_task_76560.retval_defunc_2_reduce_res_72009 =
            &defunc_2_reduce_res_72009;
        futhark_mc_task_76560.retval_defunc_2_reduce_res_72010 =
            &defunc_2_reduce_res_72010;
        
        struct scheduler_segop futhark_mc_task_76560_task;
        
        futhark_mc_task_76560_task.args = &futhark_mc_task_76560;
        futhark_mc_task_76560_task.top_level_fn = futhark_mc_segred_task_76561;
        futhark_mc_task_76560_task.name = "futhark_mc_segred_task_76561";
        futhark_mc_task_76560_task.iterations = q_64066;
        futhark_mc_task_76560_task.task_time =
            &ctx->futhark_mc_segred_task_76561_total_time;
        futhark_mc_task_76560_task.task_iter =
            &ctx->futhark_mc_segred_task_76561_total_iter;
        futhark_mc_task_76560_task.sched = STATIC;
        futhark_mc_task_76560_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76561_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76560_task);
        
        if (futhark_mc_segred_task_76561_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_72037 = defunc_2_reduce_res_72008 * defunc_2_reduce_res_72010;
        float y_72038 = defunc_2_reduce_res_72009 * defunc_2_reduce_res_72009;
        float y_72039 = x_72037 - y_72038;
        float det1_72040 = 1.0F / y_72039;
        float a11_72041 = defunc_2_reduce_res_72010 * det1_72040;
        float negate_arg_72042 = defunc_2_reduce_res_72009 * det1_72040;
        float b11_72043 = 0.0F - negate_arg_72042;
        float c11_72044 = defunc_2_reduce_res_72008 * det1_72040;
        float defunc_2_reduce_res_72045;
        float defunc_2_reduce_res_72046;
        int64_t flat_tid_66072 = (int64_t) 0;
        int32_t num_tasks_72558;
        struct futhark_mc_task_76567 futhark_mc_task_76567;
        
        futhark_mc_task_76567.ctx = ctx;
        futhark_mc_task_76567.free_last_res_66257 = last_res_66257;
        futhark_mc_task_76567.free_mem_69751 = mem_69751.mem;
        futhark_mc_task_76567.free_mem_69757 = mem_69757.mem;
        futhark_mc_task_76567.free_mem_69766 = mem_69766.mem;
        futhark_mc_task_76567.free_min_res_71987 = min_res_71987;
        futhark_mc_task_76567.free_defunc_1_f_res_72006 = defunc_1_f_res_72006;
        futhark_mc_task_76567.free_defunc_0_f_res_72007 = defunc_0_f_res_72007;
        futhark_mc_task_76567.free_a11_72041 = a11_72041;
        futhark_mc_task_76567.free_b11_72043 = b11_72043;
        futhark_mc_task_76567.free_c11_72044 = c11_72044;
        futhark_mc_task_76567.retval_defunc_2_reduce_res_72045 =
            &defunc_2_reduce_res_72045;
        futhark_mc_task_76567.retval_defunc_2_reduce_res_72046 =
            &defunc_2_reduce_res_72046;
        
        struct scheduler_segop futhark_mc_task_76567_task;
        
        futhark_mc_task_76567_task.args = &futhark_mc_task_76567;
        futhark_mc_task_76567_task.top_level_fn = futhark_mc_segred_task_76568;
        futhark_mc_task_76567_task.name = "futhark_mc_segred_task_76568";
        futhark_mc_task_76567_task.iterations = q_64066;
        futhark_mc_task_76567_task.task_time =
            &ctx->futhark_mc_segred_task_76568_total_time;
        futhark_mc_task_76567_task.task_iter =
            &ctx->futhark_mc_segred_task_76568_total_iter;
        futhark_mc_task_76567_task.sched = STATIC;
        futhark_mc_task_76567_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76568_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76567_task);
        
        if (futhark_mc_segred_task_76568_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69769.mem)[gtid_66067] = defunc_2_reduce_res_72045;
        ((float *) mem_69772.mem)[gtid_66067] = defunc_2_reduce_res_72046;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76554_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76554_end -
                 futhark_mc_segmap_parloop_76554_start;
        
        ctx->futhark_mc_segmap_parloop_76554_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76554_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76554_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76552(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66066 = tid;
    int num_tasks_72280 = info.nsubtasks;
    struct futhark_mc_task_76548 *futhark_mc_task_76548 =
                                 (struct futhark_mc_task_76548 *) args;
    struct futhark_context *ctx = futhark_mc_task_76548->ctx;
    uint64_t futhark_mc_segmap_nested_task_76552_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76552_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76548->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76548->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76548->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76548->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76548->free_i_64078;
    bool x_64079 = futhark_mc_task_76548->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76548->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76548->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76548->free_m_64090;
    int64_t last_res_66257 = futhark_mc_task_76548->free_last_res_66257;
    int64_t min_arg_66269 = futhark_mc_task_76548->free_min_arg_66269;
    float max_res_66273 = futhark_mc_task_76548->free_max_res_66273;
    struct memblock mem_69751 = {.desc ="mem_69751", .mem =
                                 futhark_mc_task_76548->free_mem_69751, .size =
                                 0, .references =NULL};
    struct memblock mem_69754 = {.desc ="mem_69754", .mem =
                                 futhark_mc_task_76548->free_mem_69754, .size =
                                 0, .references =NULL};
    struct memblock mem_69757 = {.desc ="mem_69757", .mem =
                                 futhark_mc_task_76548->free_mem_69757, .size =
                                 0, .references =NULL};
    struct memblock mem_69760 = {.desc ="mem_69760", .mem =
                                 futhark_mc_task_76548->free_mem_69760, .size =
                                 0, .references =NULL};
    struct memblock mem_69763 = {.desc ="mem_69763", .mem =
                                 futhark_mc_task_76548->free_mem_69763, .size =
                                 0, .references =NULL};
    struct memblock mem_69766 = {.desc ="mem_69766", .mem =
                                 futhark_mc_task_76548->free_mem_69766, .size =
                                 0, .references =NULL};
    struct memblock mem_69769 = {.desc ="mem_69769", .mem =
                                 futhark_mc_task_76548->free_mem_69769, .size =
                                 0, .references =NULL};
    struct memblock mem_69772 = {.desc ="mem_69772", .mem =
                                 futhark_mc_task_76548->free_mem_69772, .size =
                                 0, .references =NULL};
    int64_t iter_72406;
    struct futhark_mc_segmap_parloop_struct_76553
    futhark_mc_segmap_parloop_struct_76553;
    
    futhark_mc_segmap_parloop_struct_76553.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76553.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76553.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76553.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76553.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76553.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76553.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76553.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76553.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76553.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76553.free_last_res_66257 = last_res_66257;
    futhark_mc_segmap_parloop_struct_76553.free_min_arg_66269 = min_arg_66269;
    futhark_mc_segmap_parloop_struct_76553.free_max_res_66273 = max_res_66273;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69751 = mem_69751.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69754 = mem_69754.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69757 = mem_69757.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69760 = mem_69760.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69763 = mem_69763.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69766 = mem_69766.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69769 = mem_69769.mem;
    futhark_mc_segmap_parloop_struct_76553.free_mem_69772 = mem_69772.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76554_task;
    
    futhark_mc_segmap_parloop_76554_task.name =
        "futhark_mc_segmap_parloop_76554";
    futhark_mc_segmap_parloop_76554_task.fn = futhark_mc_segmap_parloop_76554;
    futhark_mc_segmap_parloop_76554_task.args =
        &futhark_mc_segmap_parloop_struct_76553;
    futhark_mc_segmap_parloop_76554_task.iterations = iterations;
    futhark_mc_segmap_parloop_76554_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76554_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76554_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76554_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76554_task);
    
    if (futhark_mc_segmap_parloop_76554_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76554_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76554_total_end -
                 futhark_mc_segmap_parloop_76554_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76554_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76554_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76554_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76552_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76552_end -
                 futhark_mc_segmap_nested_task_76552_start;
        
        ctx->futhark_mc_segmap_nested_task_76552_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76552_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76552_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76519(void *args, int64_t start,
                                           int64_t end, int flat_tid_66054,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76518
    *futhark_mc_segmap_parloop_struct_76518 =
    (struct futhark_mc_segmap_parloop_struct_76518 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76518->ctx;
    uint64_t futhark_mc_segmap_parloop_76519_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76519_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76518->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76518->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76518->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76518->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76518->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76518->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76518->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76518->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76518->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76518->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76518->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76518->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69746 =
            futhark_mc_segmap_parloop_struct_76518->free_bytes_69746;
    int64_t bytes_69749 =
            futhark_mc_segmap_parloop_struct_76518->free_bytes_69749;
    int64_t bytes_69764 =
            futhark_mc_segmap_parloop_struct_76518->free_bytes_69764;
    int64_t bytes_69767 =
            futhark_mc_segmap_parloop_struct_76518->free_bytes_69767;
    struct memblock mem_69911 = {.desc ="mem_69911", .mem =
                                 futhark_mc_segmap_parloop_struct_76518->free_mem_69911,
                                 .size =0, .references =NULL};
    struct memblock mem_69915 = {.desc ="mem_69915", .mem =
                                 futhark_mc_segmap_parloop_struct_76518->free_mem_69915,
                                 .size =0, .references =NULL};
    size_t mem_69748_cached_sizze_76520 = 0;
    char *mem_69748 = NULL;
    size_t mem_69751_cached_sizze_76521 = 0;
    char *mem_69751 = NULL;
    size_t mem_69754_cached_sizze_76522 = 0;
    char *mem_69754 = NULL;
    size_t mem_69757_cached_sizze_76523 = 0;
    char *mem_69757 = NULL;
    size_t mem_69760_cached_sizze_76524 = 0;
    char *mem_69760 = NULL;
    size_t mem_69763_cached_sizze_76525 = 0;
    char *mem_69763 = NULL;
    size_t mem_69766_cached_sizze_76526 = 0;
    char *mem_69766 = NULL;
    size_t mem_69769_cached_sizze_76527 = 0;
    char *mem_69769 = NULL;
    size_t mem_69772_cached_sizze_76528 = 0;
    char *mem_69772 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71888 = start;
    
    if (mem_69748_cached_sizze_76520 < (size_t) bytes_69746) {
        mem_69748 = realloc(mem_69748, bytes_69746);
        mem_69748_cached_sizze_76520 = bytes_69746;
    }
    if (mem_69751_cached_sizze_76521 < (size_t) bytes_69749) {
        mem_69751 = realloc(mem_69751, bytes_69749);
        mem_69751_cached_sizze_76521 = bytes_69749;
    }
    if (mem_69754_cached_sizze_76522 < (size_t) bytes_69746) {
        mem_69754 = realloc(mem_69754, bytes_69746);
        mem_69754_cached_sizze_76522 = bytes_69746;
    }
    if (mem_69757_cached_sizze_76523 < (size_t) bytes_69749) {
        mem_69757 = realloc(mem_69757, bytes_69749);
        mem_69757_cached_sizze_76523 = bytes_69749;
    }
    if (mem_69760_cached_sizze_76524 < (size_t) bytes_69746) {
        mem_69760 = realloc(mem_69760, bytes_69746);
        mem_69760_cached_sizze_76524 = bytes_69746;
    }
    if (mem_69763_cached_sizze_76525 < (size_t) bytes_69746) {
        mem_69763 = realloc(mem_69763, bytes_69746);
        mem_69763_cached_sizze_76525 = bytes_69746;
    }
    if (mem_69766_cached_sizze_76526 < (size_t) bytes_69764) {
        mem_69766 = realloc(mem_69766, bytes_69764);
        mem_69766_cached_sizze_76526 = bytes_69764;
    }
    if (mem_69769_cached_sizze_76527 < (size_t) bytes_69767) {
        mem_69769 = realloc(mem_69769, bytes_69767);
        mem_69769_cached_sizze_76527 = bytes_69767;
    }
    if (mem_69772_cached_sizze_76528 < (size_t) bytes_69767) {
        mem_69772 = realloc(mem_69772, bytes_69767);
        mem_69772_cached_sizze_76528 = bytes_69767;
    }
    for (; iter_71888 < end; iter_71888++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72248 = m_64063;
        int64_t gtid_66055 = iter_71888;
        int64_t remnant_72249 = iter_71888 - gtid_66055;
        int64_t flat_tid_66056 = (int64_t) 0;
        int32_t num_tasks_72250;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76529 futhark_mc_task_76529;
        
        futhark_mc_task_76529.ctx = ctx;
        futhark_mc_task_76529.free_n_64064 = n_64064;
        futhark_mc_task_76529.free_gtid_66055 = gtid_66055;
        futhark_mc_task_76529.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76529.free_mem_69748 = mem_69748;
        
        struct scheduler_segop futhark_mc_task_76529_task;
        
        futhark_mc_task_76529_task.args = &futhark_mc_task_76529;
        futhark_mc_task_76529_task.top_level_fn = futhark_mc_segscan_task_76530;
        futhark_mc_task_76529_task.name = "futhark_mc_segscan_task_76530";
        futhark_mc_task_76529_task.iterations = n_64064;
        futhark_mc_task_76529_task.task_time =
            &ctx->futhark_mc_segscan_task_76530_total_time;
        futhark_mc_task_76529_task.task_iter =
            &ctx->futhark_mc_segscan_task_76530_total_iter;
        futhark_mc_task_76529_task.sched = STATIC;
        futhark_mc_task_76529_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76530_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76529_task);
        
        if (futhark_mc_segscan_task_76530_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66257 = ((int64_t *) mem_69748)[i_64078];
        
        for (int64_t i_72264 = 0; i_72264 < n_64064; i_72264++) {
            ((float *) mem_69751)[i_72264] = 0.0F;
        }
        for (int64_t i_72265 = 0; i_72265 < n_64064; i_72265++) {
            ((int64_t *) mem_69754)[i_72265] = (int64_t) -1;
        }
        
        int64_t flat_tid_66058 = (int64_t) 0;
        int32_t num_tasks_72266;
        struct futhark_mc_task_76536 futhark_mc_task_76536;
        
        futhark_mc_task_76536.ctx = ctx;
        futhark_mc_task_76536.free_n_64064 = n_64064;
        futhark_mc_task_76536.free_gtid_66055 = gtid_66055;
        futhark_mc_task_76536.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76536.free_mem_69748 = mem_69748;
        futhark_mc_task_76536.free_mem_69751 = mem_69751;
        futhark_mc_task_76536.free_mem_69754 = mem_69754;
        
        struct scheduler_segop futhark_mc_task_76536_task;
        
        futhark_mc_task_76536_task.args = &futhark_mc_task_76536;
        futhark_mc_task_76536_task.top_level_fn = futhark_mc_segmap_task_76537;
        futhark_mc_task_76536_task.name = "futhark_mc_segmap_task_76537";
        futhark_mc_task_76536_task.iterations = n_64064;
        futhark_mc_task_76536_task.task_time =
            &ctx->futhark_mc_segmap_task_76537_total_time;
        futhark_mc_task_76536_task.task_iter =
            &ctx->futhark_mc_segmap_task_76537_total_iter;
        futhark_mc_task_76536_task.sched = STATIC;
        futhark_mc_task_76536_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76537_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76536_task);
        
        if (futhark_mc_segmap_task_76537_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66269 = sub64(last_res_66257, min_res_64084);
        float i64_res_66270 = sitofp_i64_f32(last_res_66257);
        float x_66271 = i64_res_64091 - i64_res_66270;
        float max_arg_66272 = x_66271 / 2.0F;
        float max_res_66273 = fmax32(0.0F, max_arg_66272);
        int64_t flat_tid_66060 = (int64_t) 0;
        int32_t num_tasks_72272;
        struct futhark_mc_task_76540 futhark_mc_task_76540;
        
        futhark_mc_task_76540.ctx = ctx;
        futhark_mc_task_76540.free_n_64064 = n_64064;
        futhark_mc_task_76540.free_mem_69754 = mem_69754;
        futhark_mc_task_76540.free_mem_69757 = mem_69757;
        futhark_mc_task_76540.free_mem_69760 = mem_69760;
        futhark_mc_task_76540.free_mem_69763 = mem_69763;
        
        struct scheduler_segop futhark_mc_task_76540_task;
        
        futhark_mc_task_76540_task.args = &futhark_mc_task_76540;
        futhark_mc_task_76540_task.top_level_fn = futhark_mc_segmap_task_76541;
        futhark_mc_task_76540_task.name = "futhark_mc_segmap_task_76541";
        futhark_mc_task_76540_task.iterations = n_64064;
        futhark_mc_task_76540_task.task_time =
            &ctx->futhark_mc_segmap_task_76541_total_time;
        futhark_mc_task_76540_task.task_iter =
            &ctx->futhark_mc_segmap_task_76541_total_iter;
        futhark_mc_task_76540_task.sched = STATIC;
        futhark_mc_task_76540_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76541_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76540_task);
        
        if (futhark_mc_segmap_task_76541_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66062 = (int64_t) 0;
        int32_t num_tasks_72276;
        struct futhark_mc_task_76544 futhark_mc_task_76544;
        
        futhark_mc_task_76544.ctx = ctx;
        futhark_mc_task_76544.free_q_64066 = q_64066;
        futhark_mc_task_76544.free_last_res_66257 = last_res_66257;
        futhark_mc_task_76544.free_mem_69766 = mem_69766;
        
        struct scheduler_segop futhark_mc_task_76544_task;
        
        futhark_mc_task_76544_task.args = &futhark_mc_task_76544;
        futhark_mc_task_76544_task.top_level_fn = futhark_mc_segmap_task_76545;
        futhark_mc_task_76544_task.name = "futhark_mc_segmap_task_76545";
        futhark_mc_task_76544_task.iterations = q_64066;
        futhark_mc_task_76544_task.task_time =
            &ctx->futhark_mc_segmap_task_76545_total_time;
        futhark_mc_task_76544_task.task_iter =
            &ctx->futhark_mc_segmap_task_76545_total_iter;
        futhark_mc_task_76544_task.sched = STATIC;
        futhark_mc_task_76544_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76545_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76544_task);
        
        if (futhark_mc_segmap_task_76545_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66064 = (int64_t) 0;
        int32_t num_tasks_72280;
        int64_t flat_tid_66066 = (int64_t) 0;
        struct futhark_mc_task_76548 futhark_mc_task_76548;
        
        futhark_mc_task_76548.ctx = ctx;
        futhark_mc_task_76548.free_n_64064 = n_64064;
        futhark_mc_task_76548.free_q_64066 = q_64066;
        futhark_mc_task_76548.free_jump_64068 = jump_64068;
        futhark_mc_task_76548.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76548.free_i_64078 = i_64078;
        futhark_mc_task_76548.free_x_64079 = x_64079;
        futhark_mc_task_76548.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76548.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76548.free_m_64090 = m_64090;
        futhark_mc_task_76548.free_last_res_66257 = last_res_66257;
        futhark_mc_task_76548.free_min_arg_66269 = min_arg_66269;
        futhark_mc_task_76548.free_max_res_66273 = max_res_66273;
        futhark_mc_task_76548.free_mem_69751 = mem_69751;
        futhark_mc_task_76548.free_mem_69754 = mem_69754;
        futhark_mc_task_76548.free_mem_69757 = mem_69757;
        futhark_mc_task_76548.free_mem_69760 = mem_69760;
        futhark_mc_task_76548.free_mem_69763 = mem_69763;
        futhark_mc_task_76548.free_mem_69766 = mem_69766;
        futhark_mc_task_76548.free_mem_69769 = mem_69769;
        futhark_mc_task_76548.free_mem_69772 = mem_69772;
        
        struct scheduler_segop futhark_mc_task_76548_task;
        
        futhark_mc_task_76548_task.args = &futhark_mc_task_76548;
        futhark_mc_task_76548_task.top_level_fn = futhark_mc_segmap_task_76549;
        futhark_mc_task_76548_task.name = "futhark_mc_segmap_task_76549";
        futhark_mc_task_76548_task.iterations = n_m_64072;
        futhark_mc_task_76548_task.task_time =
            &ctx->futhark_mc_segmap_task_76549_total_time;
        futhark_mc_task_76548_task.task_iter =
            &ctx->futhark_mc_segmap_task_76549_total_iter;
        futhark_mc_task_76548_task.sched = DYNAMIC;
        futhark_mc_task_76548_task.nested_fn =
            futhark_mc_segmap_nested_task_76552;
        
        int futhark_mc_segmap_task_76549_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76548_task);
        
        if (futhark_mc_segmap_task_76549_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_69911.mem + gtid_66055 * n_m_64072 * (int64_t) 4,
                mem_69769 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_69915.mem + gtid_66055 * n_m_64072 * (int64_t) 4,
                mem_69772 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69748);
    free(mem_69751);
    free(mem_69754);
    free(mem_69757);
    free(mem_69760);
    free(mem_69763);
    free(mem_69766);
    free(mem_69769);
    free(mem_69772);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76519_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76519_end -
                 futhark_mc_segmap_parloop_76519_start;
        
        ctx->futhark_mc_segmap_parloop_76519_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76519_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76519_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76517(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66054 = tid;
    int num_tasks_71648 = info.nsubtasks;
    struct futhark_mc_task_76504 *futhark_mc_task_76504 =
                                 (struct futhark_mc_task_76504 *) args;
    struct futhark_context *ctx = futhark_mc_task_76504->ctx;
    uint64_t futhark_mc_segmap_nested_task_76517_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76517_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76504->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76504->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76504->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76504->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76504->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76504->free_i_64078;
    bool x_64079 = futhark_mc_task_76504->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76504->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76504->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76504->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76504->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76504->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69746 = futhark_mc_task_76504->free_bytes_69746;
    int64_t bytes_69749 = futhark_mc_task_76504->free_bytes_69749;
    int64_t bytes_69764 = futhark_mc_task_76504->free_bytes_69764;
    int64_t bytes_69767 = futhark_mc_task_76504->free_bytes_69767;
    struct memblock mem_69911 = {.desc ="mem_69911", .mem =
                                 futhark_mc_task_76504->free_mem_69911, .size =
                                 0, .references =NULL};
    struct memblock mem_69915 = {.desc ="mem_69915", .mem =
                                 futhark_mc_task_76504->free_mem_69915, .size =
                                 0, .references =NULL};
    int64_t iter_71888;
    struct futhark_mc_segmap_parloop_struct_76518
    futhark_mc_segmap_parloop_struct_76518;
    
    futhark_mc_segmap_parloop_struct_76518.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76518.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76518.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76518.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76518.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76518.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76518.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76518.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76518.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76518.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76518.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76518.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76518.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76518.free_bytes_69746 = bytes_69746;
    futhark_mc_segmap_parloop_struct_76518.free_bytes_69749 = bytes_69749;
    futhark_mc_segmap_parloop_struct_76518.free_bytes_69764 = bytes_69764;
    futhark_mc_segmap_parloop_struct_76518.free_bytes_69767 = bytes_69767;
    futhark_mc_segmap_parloop_struct_76518.free_mem_69911 = mem_69911.mem;
    futhark_mc_segmap_parloop_struct_76518.free_mem_69915 = mem_69915.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76519_task;
    
    futhark_mc_segmap_parloop_76519_task.name =
        "futhark_mc_segmap_parloop_76519";
    futhark_mc_segmap_parloop_76519_task.fn = futhark_mc_segmap_parloop_76519;
    futhark_mc_segmap_parloop_76519_task.args =
        &futhark_mc_segmap_parloop_struct_76518;
    futhark_mc_segmap_parloop_76519_task.iterations = iterations;
    futhark_mc_segmap_parloop_76519_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76519_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76519_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76519_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76519_task);
    
    if (futhark_mc_segmap_parloop_76519_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76519_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76519_total_end -
                 futhark_mc_segmap_parloop_76519_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76519_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76519_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76519_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76517_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76517_end -
                 futhark_mc_segmap_nested_task_76517_start;
        
        ctx->futhark_mc_segmap_nested_task_76517_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76517_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76517_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76573 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69916;
    int64_t free_bytes_69919;
    int64_t free_bytes_69934;
    int64_t free_bytes_69937;
    char *free_mem_70081;
    char *free_mem_70085;
};
struct futhark_mc_segmap_parloop_struct_76575 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69916;
    int64_t free_bytes_69919;
    int64_t free_bytes_69934;
    int64_t free_bytes_69937;
    char *free_mem_70081;
    char *free_mem_70085;
};
static int futhark_mc_segmap_parloop_76576(void *args, int64_t start,
                                           int64_t end, int flat_tid_66636,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76575
    *futhark_mc_segmap_parloop_struct_76575 =
    (struct futhark_mc_segmap_parloop_struct_76575 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76575->ctx;
    uint64_t futhark_mc_segmap_parloop_76576_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76576_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76575->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76575->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76575->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76575->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76575->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76575->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76575->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76575->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76575->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76575->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76575->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76575->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69916 =
            futhark_mc_segmap_parloop_struct_76575->free_bytes_69916;
    int64_t bytes_69919 =
            futhark_mc_segmap_parloop_struct_76575->free_bytes_69919;
    int64_t bytes_69934 =
            futhark_mc_segmap_parloop_struct_76575->free_bytes_69934;
    int64_t bytes_69937 =
            futhark_mc_segmap_parloop_struct_76575->free_bytes_69937;
    struct memblock mem_70081 = {.desc ="mem_70081", .mem =
                                 futhark_mc_segmap_parloop_struct_76575->free_mem_70081,
                                 .size =0, .references =NULL};
    struct memblock mem_70085 = {.desc ="mem_70085", .mem =
                                 futhark_mc_segmap_parloop_struct_76575->free_mem_70085,
                                 .size =0, .references =NULL};
    size_t mem_69945_cached_sizze_76577 = 0;
    char *mem_69945 = NULL;
    size_t mem_69960_cached_sizze_76578 = 0;
    char *mem_69960 = NULL;
    size_t mem_69963_cached_sizze_76579 = 0;
    char *mem_69963 = NULL;
    size_t mem_69990_cached_sizze_76580 = 0;
    char *mem_69990 = NULL;
    size_t mem_69993_cached_sizze_76581 = 0;
    char *mem_69993 = NULL;
    size_t mem_69996_cached_sizze_76582 = 0;
    char *mem_69996 = NULL;
    size_t mem_70035_cached_sizze_76583 = 0;
    char *mem_70035 = NULL;
    size_t mem_70050_cached_sizze_76584 = 0;
    char *mem_70050 = NULL;
    size_t mem_70053_cached_sizze_76585 = 0;
    char *mem_70053 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72574 = start;
    
    if (mem_69945_cached_sizze_76577 < (size_t) bytes_69916) {
        mem_69945 = realloc(mem_69945, bytes_69916);
        mem_69945_cached_sizze_76577 = bytes_69916;
    }
    if (mem_69960_cached_sizze_76578 < (size_t) bytes_69919) {
        mem_69960 = realloc(mem_69960, bytes_69919);
        mem_69960_cached_sizze_76578 = bytes_69919;
    }
    if (mem_69963_cached_sizze_76579 < (size_t) bytes_69916) {
        mem_69963 = realloc(mem_69963, bytes_69916);
        mem_69963_cached_sizze_76579 = bytes_69916;
    }
    if (mem_69990_cached_sizze_76580 < (size_t) bytes_69919) {
        mem_69990 = realloc(mem_69990, bytes_69919);
        mem_69990_cached_sizze_76580 = bytes_69919;
    }
    if (mem_69993_cached_sizze_76581 < (size_t) bytes_69916) {
        mem_69993 = realloc(mem_69993, bytes_69916);
        mem_69993_cached_sizze_76581 = bytes_69916;
    }
    if (mem_69996_cached_sizze_76582 < (size_t) bytes_69916) {
        mem_69996 = realloc(mem_69996, bytes_69916);
        mem_69996_cached_sizze_76582 = bytes_69916;
    }
    if (mem_70035_cached_sizze_76583 < (size_t) bytes_69934) {
        mem_70035 = realloc(mem_70035, bytes_69934);
        mem_70035_cached_sizze_76583 = bytes_69934;
    }
    if (mem_70050_cached_sizze_76584 < (size_t) bytes_69937) {
        mem_70050 = realloc(mem_70050, bytes_69937);
        mem_70050_cached_sizze_76584 = bytes_69937;
    }
    if (mem_70053_cached_sizze_76585 < (size_t) bytes_69937) {
        mem_70053 = realloc(mem_70053, bytes_69937);
        mem_70053_cached_sizze_76585 = bytes_69937;
    }
    for (; iter_72574 < end; iter_72574++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72816 = m_64063;
        int64_t gtid_66637 = iter_72574;
        int64_t remnant_72817 = iter_72574 - gtid_66637;
        int64_t discard_69240;
        int64_t scanacc_72576 = (int64_t) 0;
        
        for (int64_t i_72575 = 0; i_72575 < n_64064; i_72575++) {
            float x_72578 = ((float *) Y_mem_69593.mem)[gtid_66637 * n_64064 +
                                                        i_72575];
            bool isnan_res_72579;
            
            isnan_res_72579 = futrts_isnan32(x_72578);
            
            bool defunc_0_p_res_72580 = !isnan_res_72579;
            int64_t defunc_0_f_res_72581 = btoi_bool_i64(defunc_0_p_res_72580);
            int64_t defunc_1_op_res_72582 = add64(defunc_0_f_res_72581,
                                                  scanacc_72576);
            
            ((int64_t *) mem_69945)[i_72575] = defunc_1_op_res_72582;
            
            int64_t scanacc_tmp_72818 = defunc_1_op_res_72582;
            
            scanacc_72576 = scanacc_tmp_72818;
        }
        discard_69240 = scanacc_72576;
        
        int64_t last_res_64544 = ((int64_t *) mem_69945)[i_64078];
        
        for (int64_t i_72820 = 0; i_72820 < n_64064; i_72820++) {
            ((float *) mem_69960)[i_72820] = 0.0F;
        }
        for (int64_t i_72821 = 0; i_72821 < n_64064; i_72821++) {
            ((int64_t *) mem_69963)[i_72821] = (int64_t) -1;
        }
        for (int64_t write_iter_72584 = 0; write_iter_72584 < n_64064;
             write_iter_72584++) {
            float write_iv_72587 = ((float *) Y_mem_69593.mem)[gtid_66637 *
                                                               n_64064 +
                                                               write_iter_72584];
            bool isnan_res_72588;
            
            isnan_res_72588 = futrts_isnan32(write_iv_72587);
            
            bool defunc_0_p_res_72589 = !isnan_res_72588;
            int64_t defunc_1_f_res_72590;
            
            if (defunc_0_p_res_72589) {
                int64_t write_iv_72591 =
                        ((int64_t *) mem_69945)[write_iter_72584];
                int64_t defunc_1_f_res_t_res_72592 = sub64(write_iv_72591,
                                                           (int64_t) 1);
                
                defunc_1_f_res_72590 = defunc_1_f_res_t_res_72592;
            } else {
                defunc_1_f_res_72590 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72590) &&
                slt64(defunc_1_f_res_72590, n_64064)) {
                ((int64_t *) mem_69963)[defunc_1_f_res_72590] =
                    write_iter_72584;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72590) &&
                slt64(defunc_1_f_res_72590, n_64064)) {
                memmove(mem_69960 + defunc_1_f_res_72590 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_66637 * n_64064 +
                                           write_iter_72584) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64562 = sub64(last_res_64544, min_res_64084);
        float i64_res_64563 = sitofp_i64_f32(last_res_64544);
        float x_64564 = i64_res_64091 - i64_res_64563;
        float max_arg_64565 = x_64564 / 2.0F;
        float max_res_64566 = fmax32(0.0F, max_arg_64565);
        
        for (int64_t i_72596 = 0; i_72596 < n_64064; i_72596++) {
            int64_t x_72600 = ((int64_t *) mem_69963)[i_72596];
            int64_t defunc_0_f_res_72601 = add64((int64_t) 1, x_72600);
            bool cond_72602 = slt64(defunc_0_f_res_72601, (int64_t) 0);
            int64_t defunc_0_f_res_72603;
            
            if (cond_72602) {
                defunc_0_f_res_72603 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_72603 = defunc_0_f_res_72601;
            }
            
            float defunc_0_f_res_72604 = sitofp_i64_f32(x_72600);
            
            ((float *) mem_69990)[i_72596] = defunc_0_f_res_72604;
            ((int64_t *) mem_69993)[i_72596] = defunc_0_f_res_72603;
            ((int64_t *) mem_69996)[i_72596] = defunc_0_f_res_72601;
        }
        for (int64_t i_72608 = 0; i_72608 < q_64066; i_72608++) {
            bool cond_72610 = sle64(last_res_64544, i_72608);
            float defunc_0_f_res_72611;
            
            if (cond_72610) {
                defunc_0_f_res_72611 = 0.0F;
            } else {
                defunc_0_f_res_72611 = 1.0F;
            }
            ((float *) mem_70035)[i_72608] = defunc_0_f_res_72611;
        }
        for (int64_t i_72613 = 0; i_72613 < n_m_64072; i_72613++) {
            int64_t min_arg_72616 = mul64(jump_64068, i_72613);
            int64_t min_res_72617 = smin64(i_64078, min_arg_72616);
            int64_t defunc_0_g_res_72618 = add64((int64_t) 1, min_res_72617);
            bool nearest_idx_72619;
            int64_t nearest_idx_72620;
            int64_t nearest_idx_72621;
            bool loop_while_72622;
            int64_t low_72623;
            int64_t high_72624;
            
            loop_while_72622 = x_64079;
            low_72623 = (int64_t) 0;
            high_72624 = i_64078;
            while (loop_while_72622) {
                int64_t x_72625 = add64(low_72623, high_72624);
                int64_t mid_72626 = sdiv64(x_72625, (int64_t) 2);
                bool x_72627 = sle64((int64_t) 0, mid_72626);
                bool y_72628 = slt64(mid_72626, n_64064);
                bool bounds_check_72629 = x_72627 && y_72628;
                bool index_certs_72630;
                
                if (!bounds_check_72629) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_72626,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_72631 = ((int64_t *) mem_69993)[mid_72626];
                bool cond_72632 = sle64(defunc_0_g_res_72618, x_72631);
                int64_t loopres_72633;
                int64_t loopres_72634;
                
                if (cond_72632) {
                    int64_t loopres_t_res_72635 = sub64(mid_72626, (int64_t) 1);
                    
                    loopres_72633 = low_72623;
                    loopres_72634 = loopres_t_res_72635;
                } else {
                    int64_t loopres_f_res_72636 = add64((int64_t) 1, mid_72626);
                    
                    loopres_72633 = loopres_f_res_72636;
                    loopres_72634 = high_72624;
                }
                
                bool loop_cond_72637 = sle64(loopres_72633, loopres_72634);
                bool loop_while_tmp_72830 = loop_cond_72637;
                int64_t low_tmp_72831 = loopres_72633;
                int64_t high_tmp_72832 = loopres_72634;
                
                loop_while_72622 = loop_while_tmp_72830;
                low_72623 = low_tmp_72831;
                high_72624 = high_tmp_72832;
            }
            nearest_idx_72619 = loop_while_72622;
            nearest_idx_72620 = low_72623;
            nearest_idx_72621 = high_72624;
            
            int64_t max_arg_72638 = sub64(nearest_idx_72620, min_res_64084);
            int64_t max_res_72639 = smax64((int64_t) 0, max_arg_72638);
            int64_t j_72640 = add64(min_res_64084, max_res_72639);
            int64_t i_p_m_t_s_72641 = add64(m_64090, max_res_72639);
            bool zzero_leq_i_p_m_t_s_72642 = sle64((int64_t) 0,
                                                   i_p_m_t_s_72641);
            bool i_p_m_t_s_leq_w_72643 = slt64(i_p_m_t_s_72641, n_64064);
            bool zzero_lte_i_72644 = sle64((int64_t) 0, max_res_72639);
            bool i_lte_j_72645 = sle64(max_res_72639, j_72640);
            bool y_72646 = i_p_m_t_s_leq_w_72643 && zzero_lte_i_72644;
            bool y_72647 = zzero_leq_i_p_m_t_s_72642 && y_72646;
            bool y_72648 = i_lte_j_72645 && y_72647;
            bool forwards_ok_72649 = zzero_lte_i_72644 && y_72648;
            bool ok_or_empty_72650 = empty_slice_64089 || forwards_ok_72649;
            bool index_certs_72651;
            
            if (!ok_or_empty_72650) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72639, ":",
                              (long long) j_72640,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_72652;
            int64_t redout_72654 = (int64_t) 0;
            
            for (int64_t i_72653 = 0; i_72653 < min_res_64084; i_72653++) {
                int64_t slice_72655 = max_res_72639 + i_72653;
                int64_t x_72656 = ((int64_t *) mem_69996)[slice_72655];
                int64_t abs_arg_72657 = sub64(x_72656, defunc_0_g_res_72618);
                int64_t abs_res_72658 = abs64(abs_arg_72657);
                int64_t defunc_1_op_res_72659 = add64(abs_res_72658,
                                                      redout_72654);
                int64_t redout_tmp_72833 = defunc_1_op_res_72659;
                
                redout_72654 = redout_tmp_72833;
            }
            defunc_2_reduce_res_72652 = redout_72654;
            
            int64_t idx_72660;
            int64_t idx_72661;
            int64_t idx_72662;
            int64_t idx_72663;
            int64_t best_idx_72665;
            int64_t last_idx_72666;
            int64_t best_sum_72667;
            int64_t curr_sum_72668;
            
            best_idx_72665 = max_res_72639;
            last_idx_72666 = max_res_72639;
            best_sum_72667 = defunc_2_reduce_res_72652;
            curr_sum_72668 = defunc_2_reduce_res_72652;
            for (int64_t j_72664 = 0; j_72664 < min_res_64084; j_72664++) {
                int64_t new_idx_72669 = add64(max_res_72639, j_72664);
                int64_t x_72670 = add64(min_res_64084, new_idx_72669);
                bool cond_72671 = slt64(last_res_64544, x_72670);
                int64_t new_sum_72672;
                
                if (cond_72671) {
                    new_sum_72672 = (int64_t) 9223372036854775807;
                } else {
                    bool x_72673 = sle64((int64_t) 0, last_idx_72666);
                    bool y_72674 = slt64(last_idx_72666, n_64064);
                    bool bounds_check_72675 = x_72673 && y_72674;
                    bool index_certs_72676;
                    
                    if (!bounds_check_72675) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_72666,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_72677 = ((int64_t *) mem_69996)[last_idx_72666];
                    int64_t binop_p_72678 = sub64(defunc_0_g_res_72618,
                                                  y_72677);
                    int64_t defunc_0_f_res_72679 = abs64(binop_p_72678);
                    int64_t x_72680 = sub64(curr_sum_72668,
                                            defunc_0_f_res_72679);
                    int64_t min_arg_72681 = add64(min_res_64084,
                                                  last_idx_72666);
                    int64_t min_res_72682 = smin64(i_64078, min_arg_72681);
                    bool x_72683 = sle64((int64_t) 0, min_res_72682);
                    bool y_72684 = slt64(min_res_72682, n_64064);
                    bool bounds_check_72685 = x_72683 && y_72684;
                    bool index_certs_72686;
                    
                    if (!bounds_check_72685) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_72682,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_72687 = ((int64_t *) mem_69996)[min_res_72682];
                    int64_t binop_p_72688 = sub64(defunc_0_g_res_72618,
                                                  y_72687);
                    int64_t defunc_0_f_res_72689 = abs64(binop_p_72688);
                    int64_t new_sum_f_res_72690 = add64(x_72680,
                                                        defunc_0_f_res_72689);
                    
                    new_sum_72672 = new_sum_f_res_72690;
                }
                
                bool cond_72691 = sle64(new_sum_72672, best_sum_72667);
                int64_t loopres_72692;
                
                if (cond_72691) {
                    loopres_72692 = new_idx_72669;
                } else {
                    loopres_72692 = best_idx_72665;
                }
                
                int64_t loopres_72693;
                
                if (cond_72691) {
                    loopres_72693 = new_sum_72672;
                } else {
                    loopres_72693 = best_sum_72667;
                }
                
                int64_t best_idx_tmp_72834 = loopres_72692;
                int64_t last_idx_tmp_72835 = new_idx_72669;
                int64_t best_sum_tmp_72836 = loopres_72693;
                int64_t curr_sum_tmp_72837 = new_sum_72672;
                
                best_idx_72665 = best_idx_tmp_72834;
                last_idx_72666 = last_idx_tmp_72835;
                best_sum_72667 = best_sum_tmp_72836;
                curr_sum_72668 = curr_sum_tmp_72837;
            }
            idx_72660 = best_idx_72665;
            idx_72661 = last_idx_72666;
            idx_72662 = best_sum_72667;
            idx_72663 = curr_sum_72668;
            
            int64_t min_res_72694 = smin64(min_arg_64562, idx_72660);
            int64_t x_72695 = add64(min_res_64084, min_res_72694);
            int64_t r_72696 = sub64(x_72695, (int64_t) 1);
            bool x_72697 = sle64((int64_t) 0, r_72696);
            bool y_72698 = slt64(r_72696, n_64064);
            bool bounds_check_72699 = x_72697 && y_72698;
            bool index_certs_72700;
            
            if (!bounds_check_72699) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_72696,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_72701 = ((int64_t *) mem_69963)[r_72696];
            int64_t abs_arg_72702 = sub64(x_72701, min_res_72617);
            int64_t abs_res_72703 = abs64(abs_arg_72702);
            bool x_72704 = sle64((int64_t) 0, min_res_72694);
            bool y_72705 = slt64(min_res_72694, n_64064);
            bool bounds_check_72706 = x_72704 && y_72705;
            bool index_certs_72707;
            
            if (!bounds_check_72706) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72694,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_72708 = ((int64_t *) mem_69963)[min_res_72694];
            int64_t abs_arg_72709 = sub64(x_72708, min_res_72617);
            int64_t abs_res_72710 = abs64(abs_arg_72709);
            int64_t max_res_72711 = smax64(abs_res_72703, abs_res_72710);
            float defunc_0_f_res_72712 = sitofp_i64_f32(max_res_72711);
            float defunc_1_f_res_72713 = max_res_64566 + defunc_0_f_res_72712;
            float defunc_0_f_res_72714 = sitofp_i64_f32(min_res_72617);
            float defunc_2_reduce_res_72715;
            float defunc_2_reduce_res_72716;
            float defunc_2_reduce_res_72717;
            float defunc_2_reduce_res_72718;
            float defunc_2_reduce_res_72719;
            float redout_72721;
            float redout_72722;
            float redout_72723;
            float redout_72724;
            float redout_72725;
            
            redout_72721 = 0.0F;
            redout_72722 = 0.0F;
            redout_72723 = 0.0F;
            redout_72724 = 0.0F;
            redout_72725 = 0.0F;
            for (int64_t i_72720 = 0; i_72720 < q_64066; i_72720++) {
                float x_72726 = ((float *) mem_70035)[i_72720];
                bool cond_72727 = sle64(last_res_64544, i_72720);
                float defunc_0_f_res_72728;
                
                if (cond_72727) {
                    defunc_0_f_res_72728 = 0.0F;
                } else {
                    int64_t i_72729 = add64(min_res_72694, i_72720);
                    float x_72730 = ((float *) mem_69990)[i_72729];
                    float defunc_0_f_res_f_res_72731 = 1.0F + x_72730;
                    
                    defunc_0_f_res_72728 = defunc_0_f_res_f_res_72731;
                }
                
                float x_j_72732 = defunc_0_f_res_72728 - defunc_0_f_res_72714;
                float abs_res_72733 = (float) fabs(x_j_72732);
                float tmp1_72734 = abs_res_72733 / defunc_1_f_res_72713;
                float x_72735 = tmp1_72734 * tmp1_72734;
                float y_72736 = tmp1_72734 * x_72735;
                float tmp2_72737 = 1.0F - y_72736;
                float x_72738 = tmp2_72737 * tmp2_72737;
                float tmp3_72739 = tmp2_72737 * x_72738;
                float w_j_72740 = x_72726 * tmp3_72739;
                float xw_j_72741 = x_j_72732 * w_j_72740;
                float x2w_j_72742 = x_j_72732 * xw_j_72741;
                float x3w_j_72743 = x_j_72732 * x2w_j_72742;
                float x4w_j_72744 = x_j_72732 * x3w_j_72743;
                float defunc_1_op_res_72745 = w_j_72740 + redout_72721;
                float defunc_1_op_res_72746 = xw_j_72741 + redout_72722;
                float defunc_1_op_res_72747 = x2w_j_72742 + redout_72723;
                float defunc_1_op_res_72748 = x3w_j_72743 + redout_72724;
                float defunc_1_op_res_72749 = x4w_j_72744 + redout_72725;
                float redout_tmp_72838 = defunc_1_op_res_72745;
                float redout_tmp_72839 = defunc_1_op_res_72746;
                float redout_tmp_72840 = defunc_1_op_res_72747;
                float redout_tmp_72841 = defunc_1_op_res_72748;
                float redout_tmp_72842 = defunc_1_op_res_72749;
                
                redout_72721 = redout_tmp_72838;
                redout_72722 = redout_tmp_72839;
                redout_72723 = redout_tmp_72840;
                redout_72724 = redout_tmp_72841;
                redout_72725 = redout_tmp_72842;
            }
            defunc_2_reduce_res_72715 = redout_72721;
            defunc_2_reduce_res_72716 = redout_72722;
            defunc_2_reduce_res_72717 = redout_72723;
            defunc_2_reduce_res_72718 = redout_72724;
            defunc_2_reduce_res_72719 = redout_72725;
            
            float x_72750 = defunc_2_reduce_res_72717 *
                  defunc_2_reduce_res_72719;
            float y_72751 = defunc_2_reduce_res_72718 *
                  defunc_2_reduce_res_72718;
            float a12_72752 = x_72750 - y_72751;
            float x_72753 = defunc_2_reduce_res_72717 *
                  defunc_2_reduce_res_72718;
            float y_72754 = defunc_2_reduce_res_72716 *
                  defunc_2_reduce_res_72719;
            float b12_72755 = x_72753 - y_72754;
            float x_72756 = defunc_2_reduce_res_72716 *
                  defunc_2_reduce_res_72718;
            float y_72757 = defunc_2_reduce_res_72717 *
                  defunc_2_reduce_res_72717;
            float c12_72758 = x_72756 - y_72757;
            float x_72759 = defunc_2_reduce_res_72715 *
                  defunc_2_reduce_res_72719;
            float b2_72760 = x_72759 - y_72757;
            float x_72761 = defunc_2_reduce_res_72716 *
                  defunc_2_reduce_res_72717;
            float y_72762 = defunc_2_reduce_res_72715 *
                  defunc_2_reduce_res_72718;
            float c2_72763 = x_72761 - y_72762;
            float x_72764 = defunc_2_reduce_res_72715 * a12_72752;
            float y_72765 = defunc_2_reduce_res_72716 * b12_72755;
            float x_72766 = x_72764 + y_72765;
            float y_72767 = defunc_2_reduce_res_72717 * c12_72758;
            float y_72768 = x_72766 + y_72767;
            float det_72769 = 1.0F / y_72768;
            float a12_72770 = a12_72752 * det_72769;
            float b12_72771 = b12_72755 * det_72769;
            float c12_72772 = c12_72758 * det_72769;
            float b2_72773 = b2_72760 * det_72769;
            float c2_72774 = c2_72763 * det_72769;
            float defunc_2_reduce_res_72775;
            float defunc_2_reduce_res_72776;
            float redout_72778;
            float redout_72779;
            
            redout_72778 = 0.0F;
            redout_72779 = 0.0F;
            for (int64_t i_72777 = 0; i_72777 < q_64066; i_72777++) {
                float x_72780 = ((float *) mem_70035)[i_72777];
                bool cond_72781 = sle64(last_res_64544, i_72777);
                float defunc_0_f_res_72782;
                
                if (cond_72781) {
                    defunc_0_f_res_72782 = 0.0F;
                } else {
                    int64_t i_72783 = add64(min_res_72694, i_72777);
                    float x_72784 = ((float *) mem_69990)[i_72783];
                    float defunc_0_f_res_f_res_72785 = 1.0F + x_72784;
                    
                    defunc_0_f_res_72782 = defunc_0_f_res_f_res_72785;
                }
                
                float x_j_72786 = defunc_0_f_res_72782 - defunc_0_f_res_72714;
                float abs_res_72787 = (float) fabs(x_j_72786);
                float tmp1_72788 = abs_res_72787 / defunc_1_f_res_72713;
                float x_72789 = tmp1_72788 * tmp1_72788;
                float y_72790 = tmp1_72788 * x_72789;
                float tmp2_72791 = 1.0F - y_72790;
                float x_72792 = tmp2_72791 * tmp2_72791;
                float tmp3_72793 = tmp2_72791 * x_72792;
                float tmp4_72794 = x_72780 * tmp3_72793;
                float defunc_1_f_res_72795 = x_j_72786 * tmp4_72794;
                float defunc_1_f_res_72796 = x_j_72786 * defunc_1_f_res_72795;
                float defunc_0_f_res_72797;
                
                if (cond_72781) {
                    defunc_0_f_res_72797 = 0.0F;
                } else {
                    int64_t i_72798 = add64(min_res_72694, i_72777);
                    float x_72799 = ((float *) mem_69960)[i_72798];
                    
                    defunc_0_f_res_72797 = x_72799;
                }
                
                float x_72800 = a12_72770 * tmp4_72794;
                float y_72801 = b12_72771 * defunc_1_f_res_72795;
                float x_72802 = x_72800 + y_72801;
                float y_72803 = c12_72772 * defunc_1_f_res_72796;
                float x_72804 = x_72802 + y_72803;
                float defunc_9_fit_fun_res_72805 = defunc_0_f_res_72797 *
                      x_72804;
                float x_72806 = b12_72771 * tmp4_72794;
                float y_72807 = b2_72773 * defunc_1_f_res_72795;
                float x_72808 = x_72806 + y_72807;
                float y_72809 = c2_72774 * defunc_1_f_res_72796;
                float x_72810 = x_72808 + y_72809;
                float defunc_9_slope_fun_res_72811 = defunc_0_f_res_72797 *
                      x_72810;
                float defunc_1_op_res_72812 = defunc_9_fit_fun_res_72805 +
                      redout_72778;
                float defunc_1_op_res_72813 = defunc_9_slope_fun_res_72811 +
                      redout_72779;
                float redout_tmp_72843 = defunc_1_op_res_72812;
                float redout_tmp_72844 = defunc_1_op_res_72813;
                
                redout_72778 = redout_tmp_72843;
                redout_72779 = redout_tmp_72844;
            }
            defunc_2_reduce_res_72775 = redout_72778;
            defunc_2_reduce_res_72776 = redout_72779;
            ((float *) mem_70050)[i_72613] = defunc_2_reduce_res_72775;
            ((float *) mem_70053)[i_72613] = defunc_2_reduce_res_72776;
        }
        memmove(mem_70081.mem + gtid_66637 * n_m_64072 * (int64_t) 4,
                mem_70050 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70085.mem + gtid_66637 * n_m_64072 * (int64_t) 4,
                mem_70053 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69945);
    free(mem_69960);
    free(mem_69963);
    free(mem_69990);
    free(mem_69993);
    free(mem_69996);
    free(mem_70035);
    free(mem_70050);
    free(mem_70053);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76576_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76576_end -
                 futhark_mc_segmap_parloop_76576_start;
        
        ctx->futhark_mc_segmap_parloop_76576_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76576_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76576_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76574(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66636 = tid;
    int num_tasks_72573 = info.nsubtasks;
    struct futhark_mc_task_76573 *futhark_mc_task_76573 =
                                 (struct futhark_mc_task_76573 *) args;
    struct futhark_context *ctx = futhark_mc_task_76573->ctx;
    uint64_t futhark_mc_segmap_task_76574_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76574_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76573->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76573->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76573->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76573->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76573->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76573->free_i_64078;
    bool x_64079 = futhark_mc_task_76573->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76573->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76573->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76573->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76573->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76573->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69916 = futhark_mc_task_76573->free_bytes_69916;
    int64_t bytes_69919 = futhark_mc_task_76573->free_bytes_69919;
    int64_t bytes_69934 = futhark_mc_task_76573->free_bytes_69934;
    int64_t bytes_69937 = futhark_mc_task_76573->free_bytes_69937;
    struct memblock mem_70081 = {.desc ="mem_70081", .mem =
                                 futhark_mc_task_76573->free_mem_70081, .size =
                                 0, .references =NULL};
    struct memblock mem_70085 = {.desc ="mem_70085", .mem =
                                 futhark_mc_task_76573->free_mem_70085, .size =
                                 0, .references =NULL};
    int64_t iter_72574;
    struct futhark_mc_segmap_parloop_struct_76575
    futhark_mc_segmap_parloop_struct_76575;
    
    futhark_mc_segmap_parloop_struct_76575.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76575.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76575.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76575.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76575.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76575.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76575.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76575.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76575.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76575.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76575.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76575.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76575.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76575.free_bytes_69916 = bytes_69916;
    futhark_mc_segmap_parloop_struct_76575.free_bytes_69919 = bytes_69919;
    futhark_mc_segmap_parloop_struct_76575.free_bytes_69934 = bytes_69934;
    futhark_mc_segmap_parloop_struct_76575.free_bytes_69937 = bytes_69937;
    futhark_mc_segmap_parloop_struct_76575.free_mem_70081 = mem_70081.mem;
    futhark_mc_segmap_parloop_struct_76575.free_mem_70085 = mem_70085.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76576_task;
    
    futhark_mc_segmap_parloop_76576_task.name =
        "futhark_mc_segmap_parloop_76576";
    futhark_mc_segmap_parloop_76576_task.fn = futhark_mc_segmap_parloop_76576;
    futhark_mc_segmap_parloop_76576_task.args =
        &futhark_mc_segmap_parloop_struct_76575;
    futhark_mc_segmap_parloop_76576_task.iterations = iterations;
    futhark_mc_segmap_parloop_76576_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76576_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76576_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76576_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76576_task);
    
    if (futhark_mc_segmap_parloop_76576_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76576_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76576_total_end -
                 futhark_mc_segmap_parloop_76576_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76576_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76576_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76576_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76574_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76574_end -
                 futhark_mc_segmap_task_76574_start;
        
        ctx->futhark_mc_segmap_task_76574_runs[tid]++;
        ctx->futhark_mc_segmap_task_76574_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76574_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76587 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_69916;
    int64_t free_bytes_69919;
    int64_t free_bytes_69934;
    int64_t free_bytes_69937;
    char *free_mem_70081;
    char *free_mem_70085;
};
struct futhark_mc_task_76598 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66639;
    char *free_Y_mem_69593;
    char *free_mem_69918;
};
struct futhark_mc_scan_stage_1_parloop_struct_76601 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66639;
    char *free_Y_mem_69593;
    char *free_mem_69918;
};
static int futhark_mc_scan_stage_1_parloop_76602(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66640, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76601
    *futhark_mc_scan_stage_1_parloop_struct_76601 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76601 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76601->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76602_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76602_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76601->free_n_64064;
    int64_t gtid_66639 =
            futhark_mc_scan_stage_1_parloop_struct_76601->free_gtid_66639;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76601->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69918 = {.desc ="mem_69918", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76601->free_mem_69918,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73270 = start;
    int64_t x_72846;
    int64_t x_72847;
    
    x_72846 = (int64_t) 0;
    for (; iter_73270 < end; iter_73270++) {
        int64_t gtid_66641 = iter_73270;
        
        // stage 1 scan body
        {
            float x_72849 = ((float *) Y_mem_69593.mem)[gtid_66639 * n_64064 +
                                                        gtid_66641];
            bool isnan_res_72850;
            
            isnan_res_72850 = futrts_isnan32(x_72849);
            
            bool defunc_0_p_res_72851 = !isnan_res_72850;
            int64_t defunc_0_f_res_72852 = btoi_bool_i64(defunc_0_p_res_72851);
            
            // write mapped values results to memory
            { }
            x_72846 = x_72846;
            // Read next values
            {
                x_72847 = defunc_0_f_res_72852;
            }
            
            int64_t defunc_1_op_res_72848 = add64(x_72846, x_72847);
            
            ((int64_t *) mem_69918.mem)[gtid_66641] = defunc_1_op_res_72848;
            x_72846 = defunc_1_op_res_72848;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76602_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76602_end -
                 futhark_mc_scan_stage_1_parloop_76602_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76602_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76602_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76602_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76603 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66639;
    char *free_Y_mem_69593;
    char *free_mem_69918;
};
static int futhark_mc_scan_stage_3_parloop_76604(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66640, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76603
    *futhark_mc_scan_stage_3_parloop_struct_76603 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76603 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76603->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76604_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76604_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76603->free_n_64064;
    int64_t gtid_66639 =
            futhark_mc_scan_stage_3_parloop_struct_76603->free_gtid_66639;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76603->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69918 = {.desc ="mem_69918", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76603->free_mem_69918,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73282 = start;
    int64_t x_73279;
    int64_t x_73280;
    
    if (iter_73282 == (int64_t) 0) {
        x_73279 = (int64_t) 0;
    } else {
        x_73279 = ((int64_t *) mem_69918.mem)[iter_73282 - (int64_t) 1];
    }
    for (; iter_73282 < end; iter_73282++) {
        int64_t gtid_66641 = iter_73282;
        
        // stage 3 scan body
        {
            float x_72849 = ((float *) Y_mem_69593.mem)[gtid_66639 * n_64064 +
                                                        gtid_66641];
            bool isnan_res_72850;
            
            isnan_res_72850 = futrts_isnan32(x_72849);
            
            bool defunc_0_p_res_72851 = !isnan_res_72850;
            int64_t defunc_0_f_res_72852 = btoi_bool_i64(defunc_0_p_res_72851);
            
            x_73279 = x_73279;
            x_73280 = defunc_0_f_res_72852;
            
            int64_t defunc_1_op_res_73281 = add64(x_73279, x_73280);
            
            ((int64_t *) mem_69918.mem)[gtid_66641] = defunc_1_op_res_73281;
            x_73279 = defunc_1_op_res_73281;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76604_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76604_end -
                 futhark_mc_scan_stage_3_parloop_76604_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76604_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76604_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76604_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76599(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66640 = tid;
    int num_tasks_73269 = info.nsubtasks;
    struct futhark_mc_task_76598 *futhark_mc_task_76598 =
                                 (struct futhark_mc_task_76598 *) args;
    struct futhark_context *ctx = futhark_mc_task_76598->ctx;
    uint64_t futhark_mc_segscan_task_76599_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76599_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76598->free_n_64064;
    int64_t gtid_66639 = futhark_mc_task_76598->free_gtid_66639;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76598->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69918 = {.desc ="mem_69918", .mem =
                                 futhark_mc_task_76598->free_mem_69918, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_73276_cached_sizze_76600 = 0;
    char *scan_stage_2_accum_mem_73276 = NULL;
    int64_t iter_73270;
    struct futhark_mc_scan_stage_1_parloop_struct_76601
    futhark_mc_scan_stage_1_parloop_struct_76601;
    
    futhark_mc_scan_stage_1_parloop_struct_76601.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76601.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76601.free_gtid_66639 = gtid_66639;
    futhark_mc_scan_stage_1_parloop_struct_76601.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76601.free_mem_69918 = mem_69918.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76602_task;
    
    futhark_mc_scan_stage_1_parloop_76602_task.name =
        "futhark_mc_scan_stage_1_parloop_76602";
    futhark_mc_scan_stage_1_parloop_76602_task.fn =
        futhark_mc_scan_stage_1_parloop_76602;
    futhark_mc_scan_stage_1_parloop_76602_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76601;
    futhark_mc_scan_stage_1_parloop_76602_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76602_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76602_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76602_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76602_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76602_task);
    
    if (futhark_mc_scan_stage_1_parloop_76602_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76602_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76602_total_end -
                 futhark_mc_scan_stage_1_parloop_76602_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76602_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76602_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76602_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_73269)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_73271;
        int64_t x_73272;
        int64_t offset_73274 = (int64_t) 0;
        int64_t offset_index_73275 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_73276_cached_sizze_76600 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_73276 = realloc(scan_stage_2_accum_mem_73276,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_73276_cached_sizze_76600 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_73276)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_73278 = 0; i_73278 < num_tasks_73269 - 1; i_73278++) {
            offset_73274 = squot64(n_64064, sext_i32_i64(num_tasks_73269));
            if (slt64(sext_i32_i64(i_73278), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_73269)))) {
                offset_73274 += (int64_t) 1;
            }
            offset_index_73275 += offset_73274;
            
            int64_t gtid_66641 = offset_index_73275;
            float x_72849 = ((float *) Y_mem_69593.mem)[gtid_66639 * n_64064 +
                                                        gtid_66641];
            bool isnan_res_72850;
            
            isnan_res_72850 = futrts_isnan32(x_72849);
            
            bool defunc_0_p_res_72851 = !isnan_res_72850;
            int64_t defunc_0_f_res_72852 = btoi_bool_i64(defunc_0_p_res_72851);
            
            // Read carry in
            {
                x_73271 =
                    ((int64_t *) scan_stage_2_accum_mem_73276)[(int64_t) 0];
            }
            // Read next values
            {
                x_73272 = ((int64_t *) mem_69918.mem)[offset_index_73275 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_73273 = add64(x_73271, x_73272);
            
            ((int64_t *) mem_69918.mem)[offset_index_73275 - (int64_t) 1] =
                defunc_1_op_res_73273;
            ((int64_t *) scan_stage_2_accum_mem_73276)[(int64_t) 0] =
                defunc_1_op_res_73273;
        }
        
        int64_t iter_73282 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76603
        futhark_mc_scan_stage_3_parloop_struct_76603;
        
        futhark_mc_scan_stage_3_parloop_struct_76603.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76603.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76603.free_gtid_66639 =
            gtid_66639;
        futhark_mc_scan_stage_3_parloop_struct_76603.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76603.free_mem_69918 =
            mem_69918.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76604_task;
        
        futhark_mc_scan_stage_3_parloop_76604_task.name =
            "futhark_mc_scan_stage_3_parloop_76604";
        futhark_mc_scan_stage_3_parloop_76604_task.fn =
            futhark_mc_scan_stage_3_parloop_76604;
        futhark_mc_scan_stage_3_parloop_76604_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76603;
        futhark_mc_scan_stage_3_parloop_76604_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76604_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76604_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76604_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76604_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76604_task);
        
        if (futhark_mc_scan_stage_3_parloop_76604_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76604_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76604_total_end -
                     futhark_mc_scan_stage_3_parloop_76604_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76604_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76604_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76604_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_73276);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76599_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76599_end -
                 futhark_mc_segscan_task_76599_start;
        
        ctx->futhark_mc_segscan_task_76599_runs[tid]++;
        ctx->futhark_mc_segscan_task_76599_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76599_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76605 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66639;
    char *free_Y_mem_69593;
    char *free_mem_69918;
    char *free_mem_69921;
    char *free_mem_69924;
};
struct futhark_mc_segmap_parloop_struct_76607 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_66639;
    char *free_Y_mem_69593;
    char *free_mem_69918;
    char *free_mem_69921;
    char *free_mem_69924;
};
static int futhark_mc_segmap_parloop_76608(void *args, int64_t start,
                                           int64_t end, int flat_tid_66642,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76607
    *futhark_mc_segmap_parloop_struct_76607 =
    (struct futhark_mc_segmap_parloop_struct_76607 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76607->ctx;
    uint64_t futhark_mc_segmap_parloop_76608_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76608_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76607->free_n_64064;
    int64_t gtid_66639 =
            futhark_mc_segmap_parloop_struct_76607->free_gtid_66639;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76607->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69918 = {.desc ="mem_69918", .mem =
                                 futhark_mc_segmap_parloop_struct_76607->free_mem_69918,
                                 .size =0, .references =NULL};
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_segmap_parloop_struct_76607->free_mem_69921,
                                 .size =0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_segmap_parloop_struct_76607->free_mem_69924,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73286 = start;
    
    for (; iter_73286 < end; iter_73286++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73289 = n_64064;
        int64_t gtid_66643 = iter_73286;
        int64_t remnant_73290 = iter_73286 - gtid_66643;
        float x_72853 = ((float *) Y_mem_69593.mem)[gtid_66639 * n_64064 +
                                                    gtid_66643];
        bool isnan_res_72854;
        
        isnan_res_72854 = futrts_isnan32(x_72853);
        
        bool defunc_0_p_res_72855 = !isnan_res_72854;
        int64_t defunc_1_f_res_72856;
        
        if (defunc_0_p_res_72855) {
            int64_t x_73287 = ((int64_t *) mem_69918.mem)[gtid_66643];
            int64_t defunc_1_f_res_t_res_73288 = sub64(x_73287, (int64_t) 1);
            
            defunc_1_f_res_72856 = defunc_1_f_res_t_res_73288;
        } else {
            defunc_1_f_res_72856 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72856) &&
            slt64(defunc_1_f_res_72856, n_64064)) {
            ((int64_t *) mem_69924.mem)[defunc_1_f_res_72856] = gtid_66643;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72856) &&
            slt64(defunc_1_f_res_72856, n_64064)) {
            ((float *) mem_69921.mem)[defunc_1_f_res_72856] = x_72853;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76608_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76608_end -
                 futhark_mc_segmap_parloop_76608_start;
        
        ctx->futhark_mc_segmap_parloop_76608_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76608_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76608_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76606(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66642 = tid;
    int num_tasks_73285 = info.nsubtasks;
    struct futhark_mc_task_76605 *futhark_mc_task_76605 =
                                 (struct futhark_mc_task_76605 *) args;
    struct futhark_context *ctx = futhark_mc_task_76605->ctx;
    uint64_t futhark_mc_segmap_task_76606_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76606_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76605->free_n_64064;
    int64_t gtid_66639 = futhark_mc_task_76605->free_gtid_66639;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76605->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_69918 = {.desc ="mem_69918", .mem =
                                 futhark_mc_task_76605->free_mem_69918, .size =
                                 0, .references =NULL};
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_task_76605->free_mem_69921, .size =
                                 0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_task_76605->free_mem_69924, .size =
                                 0, .references =NULL};
    int64_t iter_73286;
    struct futhark_mc_segmap_parloop_struct_76607
    futhark_mc_segmap_parloop_struct_76607;
    
    futhark_mc_segmap_parloop_struct_76607.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76607.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76607.free_gtid_66639 = gtid_66639;
    futhark_mc_segmap_parloop_struct_76607.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76607.free_mem_69918 = mem_69918.mem;
    futhark_mc_segmap_parloop_struct_76607.free_mem_69921 = mem_69921.mem;
    futhark_mc_segmap_parloop_struct_76607.free_mem_69924 = mem_69924.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76608_task;
    
    futhark_mc_segmap_parloop_76608_task.name =
        "futhark_mc_segmap_parloop_76608";
    futhark_mc_segmap_parloop_76608_task.fn = futhark_mc_segmap_parloop_76608;
    futhark_mc_segmap_parloop_76608_task.args =
        &futhark_mc_segmap_parloop_struct_76607;
    futhark_mc_segmap_parloop_76608_task.iterations = iterations;
    futhark_mc_segmap_parloop_76608_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76608_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76608_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76608_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76608_task);
    
    if (futhark_mc_segmap_parloop_76608_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76608_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76608_total_end -
                 futhark_mc_segmap_parloop_76608_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76608_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76608_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76608_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76606_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76606_end -
                 futhark_mc_segmap_task_76606_start;
        
        ctx->futhark_mc_segmap_task_76606_runs[tid]++;
        ctx->futhark_mc_segmap_task_76606_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76606_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76609 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69924;
    char *free_mem_69927;
    char *free_mem_69930;
    char *free_mem_69933;
};
struct futhark_mc_segmap_parloop_struct_76611 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_69924;
    char *free_mem_69927;
    char *free_mem_69930;
    char *free_mem_69933;
};
static int futhark_mc_segmap_parloop_76612(void *args, int64_t start,
                                           int64_t end, int flat_tid_66644,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76611
    *futhark_mc_segmap_parloop_struct_76611 =
    (struct futhark_mc_segmap_parloop_struct_76611 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76611->ctx;
    uint64_t futhark_mc_segmap_parloop_76612_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76612_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76611->free_n_64064;
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_segmap_parloop_struct_76611->free_mem_69924,
                                 .size =0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_segmap_parloop_struct_76611->free_mem_69927,
                                 .size =0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_segmap_parloop_struct_76611->free_mem_69930,
                                 .size =0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_segmap_parloop_struct_76611->free_mem_69933,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73292 = start;
    
    for (; iter_73292 < end; iter_73292++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73293 = n_64064;
        int64_t gtid_66645 = iter_73292;
        int64_t remnant_73294 = iter_73292 - gtid_66645;
        int64_t x_72859 = ((int64_t *) mem_69924.mem)[gtid_66645];
        int64_t defunc_0_f_res_72860 = add64((int64_t) 1, x_72859);
        bool cond_72861 = slt64(defunc_0_f_res_72860, (int64_t) 0);
        int64_t defunc_0_f_res_72862;
        
        if (cond_72861) {
            defunc_0_f_res_72862 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_72862 = defunc_0_f_res_72860;
        }
        
        float defunc_0_f_res_72863 = sitofp_i64_f32(x_72859);
        
        ((float *) mem_69927.mem)[gtid_66645] = defunc_0_f_res_72863;
        ((int64_t *) mem_69930.mem)[gtid_66645] = defunc_0_f_res_72862;
        ((int64_t *) mem_69933.mem)[gtid_66645] = defunc_0_f_res_72860;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76612_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76612_end -
                 futhark_mc_segmap_parloop_76612_start;
        
        ctx->futhark_mc_segmap_parloop_76612_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76612_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76612_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76610(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66644 = tid;
    int num_tasks_73291 = info.nsubtasks;
    struct futhark_mc_task_76609 *futhark_mc_task_76609 =
                                 (struct futhark_mc_task_76609 *) args;
    struct futhark_context *ctx = futhark_mc_task_76609->ctx;
    uint64_t futhark_mc_segmap_task_76610_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76610_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76609->free_n_64064;
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_task_76609->free_mem_69924, .size =
                                 0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_task_76609->free_mem_69927, .size =
                                 0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_task_76609->free_mem_69930, .size =
                                 0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_task_76609->free_mem_69933, .size =
                                 0, .references =NULL};
    int64_t iter_73292;
    struct futhark_mc_segmap_parloop_struct_76611
    futhark_mc_segmap_parloop_struct_76611;
    
    futhark_mc_segmap_parloop_struct_76611.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76611.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76611.free_mem_69924 = mem_69924.mem;
    futhark_mc_segmap_parloop_struct_76611.free_mem_69927 = mem_69927.mem;
    futhark_mc_segmap_parloop_struct_76611.free_mem_69930 = mem_69930.mem;
    futhark_mc_segmap_parloop_struct_76611.free_mem_69933 = mem_69933.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76612_task;
    
    futhark_mc_segmap_parloop_76612_task.name =
        "futhark_mc_segmap_parloop_76612";
    futhark_mc_segmap_parloop_76612_task.fn = futhark_mc_segmap_parloop_76612;
    futhark_mc_segmap_parloop_76612_task.args =
        &futhark_mc_segmap_parloop_struct_76611;
    futhark_mc_segmap_parloop_76612_task.iterations = iterations;
    futhark_mc_segmap_parloop_76612_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76612_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76612_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76612_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76612_task);
    
    if (futhark_mc_segmap_parloop_76612_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76612_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76612_total_end -
                 futhark_mc_segmap_parloop_76612_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76612_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76612_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76612_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76610_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76610_end -
                 futhark_mc_segmap_task_76610_start;
        
        ctx->futhark_mc_segmap_task_76610_runs[tid]++;
        ctx->futhark_mc_segmap_task_76610_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76610_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76613 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_66873;
    char *free_mem_69936;
};
struct futhark_mc_segmap_parloop_struct_76615 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_66873;
    char *free_mem_69936;
};
static int futhark_mc_segmap_parloop_76616(void *args, int64_t start,
                                           int64_t end, int flat_tid_66646,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76615
    *futhark_mc_segmap_parloop_struct_76615 =
    (struct futhark_mc_segmap_parloop_struct_76615 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76615->ctx;
    uint64_t futhark_mc_segmap_parloop_76616_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76616_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76615->free_q_64066;
    int64_t last_res_66873 =
            futhark_mc_segmap_parloop_struct_76615->free_last_res_66873;
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_segmap_parloop_struct_76615->free_mem_69936,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73296 = start;
    
    for (; iter_73296 < end; iter_73296++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73297 = q_64066;
        int64_t gtid_66647 = iter_73296;
        int64_t remnant_73298 = iter_73296 - gtid_66647;
        bool cond_72864 = sle64(last_res_66873, gtid_66647);
        float defunc_0_f_res_72865;
        
        if (cond_72864) {
            defunc_0_f_res_72865 = 0.0F;
        } else {
            defunc_0_f_res_72865 = 1.0F;
        }
        ((float *) mem_69936.mem)[gtid_66647] = defunc_0_f_res_72865;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76616_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76616_end -
                 futhark_mc_segmap_parloop_76616_start;
        
        ctx->futhark_mc_segmap_parloop_76616_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76616_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76616_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76614(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66646 = tid;
    int num_tasks_73295 = info.nsubtasks;
    struct futhark_mc_task_76613 *futhark_mc_task_76613 =
                                 (struct futhark_mc_task_76613 *) args;
    struct futhark_context *ctx = futhark_mc_task_76613->ctx;
    uint64_t futhark_mc_segmap_task_76614_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76614_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76613->free_q_64066;
    int64_t last_res_66873 = futhark_mc_task_76613->free_last_res_66873;
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_task_76613->free_mem_69936, .size =
                                 0, .references =NULL};
    int64_t iter_73296;
    struct futhark_mc_segmap_parloop_struct_76615
    futhark_mc_segmap_parloop_struct_76615;
    
    futhark_mc_segmap_parloop_struct_76615.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76615.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76615.free_last_res_66873 = last_res_66873;
    futhark_mc_segmap_parloop_struct_76615.free_mem_69936 = mem_69936.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76616_task;
    
    futhark_mc_segmap_parloop_76616_task.name =
        "futhark_mc_segmap_parloop_76616";
    futhark_mc_segmap_parloop_76616_task.fn = futhark_mc_segmap_parloop_76616;
    futhark_mc_segmap_parloop_76616_task.args =
        &futhark_mc_segmap_parloop_struct_76615;
    futhark_mc_segmap_parloop_76616_task.iterations = iterations;
    futhark_mc_segmap_parloop_76616_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76616_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76616_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76616_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76616_task);
    
    if (futhark_mc_segmap_parloop_76616_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76616_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76616_total_end -
                 futhark_mc_segmap_parloop_76616_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76616_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76616_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76616_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76614_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76614_end -
                 futhark_mc_segmap_task_76614_start;
        
        ctx->futhark_mc_segmap_task_76614_runs[tid]++;
        ctx->futhark_mc_segmap_task_76614_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76614_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76617 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66873;
    int64_t free_min_arg_66885;
    float free_max_res_66889;
    char *free_mem_69921;
    char *free_mem_69924;
    char *free_mem_69927;
    char *free_mem_69930;
    char *free_mem_69933;
    char *free_mem_69936;
    char *free_mem_69939;
    char *free_mem_69942;
};
struct futhark_mc_segmap_parloop_struct_76619 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66873;
    int64_t free_min_arg_66885;
    float free_max_res_66889;
    char *free_mem_69921;
    char *free_mem_69924;
    char *free_mem_69927;
    char *free_mem_69930;
    char *free_mem_69933;
    char *free_mem_69936;
    char *free_mem_69939;
    char *free_mem_69942;
};
static int futhark_mc_segmap_parloop_76620(void *args, int64_t start,
                                           int64_t end, int flat_tid_66648,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76619
    *futhark_mc_segmap_parloop_struct_76619 =
    (struct futhark_mc_segmap_parloop_struct_76619 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76619->ctx;
    uint64_t futhark_mc_segmap_parloop_76620_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76620_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76619->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76619->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76619->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76619->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76619->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76619->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76619->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76619->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76619->free_m_64090;
    int64_t last_res_66873 =
            futhark_mc_segmap_parloop_struct_76619->free_last_res_66873;
    int64_t min_arg_66885 =
            futhark_mc_segmap_parloop_struct_76619->free_min_arg_66885;
    float max_res_66889 =
          futhark_mc_segmap_parloop_struct_76619->free_max_res_66889;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69921,
                                 .size =0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69924,
                                 .size =0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69927,
                                 .size =0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69930,
                                 .size =0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69933,
                                 .size =0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69936,
                                 .size =0, .references =NULL};
    struct memblock mem_69939 = {.desc ="mem_69939", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69939,
                                 .size =0, .references =NULL};
    struct memblock mem_69942 = {.desc ="mem_69942", .mem =
                                 futhark_mc_segmap_parloop_struct_76619->free_mem_69942,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73300 = start;
    
    for (; iter_73300 < end; iter_73300++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73421 = n_m_64072;
        int64_t gtid_66649 = iter_73300;
        int64_t remnant_73422 = iter_73300 - gtid_66649;
        int64_t min_arg_73069 = mul64(jump_64068, gtid_66649);
        int64_t min_res_73070 = smin64(i_64078, min_arg_73069);
        int64_t defunc_0_g_res_73071 = add64((int64_t) 1, min_res_73070);
        bool nearest_idx_73072;
        int64_t nearest_idx_73073;
        int64_t nearest_idx_73074;
        bool loop_while_73301;
        int64_t low_73302;
        int64_t high_73303;
        
        loop_while_73301 = x_64079;
        low_73302 = (int64_t) 0;
        high_73303 = i_64078;
        while (loop_while_73301) {
            int64_t x_73304 = add64(low_73302, high_73303);
            int64_t mid_73305 = sdiv64(x_73304, (int64_t) 2);
            bool x_73306 = sle64((int64_t) 0, mid_73305);
            bool y_73307 = slt64(mid_73305, n_64064);
            bool bounds_check_73308 = x_73306 && y_73307;
            bool index_certs_73309;
            
            if (!bounds_check_73308) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73305,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_73310 = ((int64_t *) mem_69930.mem)[mid_73305];
            bool cond_73311 = sle64(defunc_0_g_res_73071, x_73310);
            int64_t loopres_73312;
            int64_t loopres_73313;
            
            if (cond_73311) {
                int64_t loopres_t_res_73314 = sub64(mid_73305, (int64_t) 1);
                
                loopres_73312 = low_73302;
                loopres_73313 = loopres_t_res_73314;
            } else {
                int64_t loopres_f_res_73315 = add64((int64_t) 1, mid_73305);
                
                loopres_73312 = loopres_f_res_73315;
                loopres_73313 = high_73303;
            }
            
            bool loop_cond_73316 = sle64(loopres_73312, loopres_73313);
            bool loop_while_tmp_73423 = loop_cond_73316;
            int64_t low_tmp_73424 = loopres_73312;
            int64_t high_tmp_73425 = loopres_73313;
            
            loop_while_73301 = loop_while_tmp_73423;
            low_73302 = low_tmp_73424;
            high_73303 = high_tmp_73425;
        }
        nearest_idx_73072 = loop_while_73301;
        nearest_idx_73073 = low_73302;
        nearest_idx_73074 = high_73303;
        
        int64_t max_arg_73091 = sub64(nearest_idx_73073, min_res_64084);
        int64_t max_res_73092 = smax64((int64_t) 0, max_arg_73091);
        int64_t j_73093 = add64(min_res_64084, max_res_73092);
        int64_t i_p_m_t_s_73094 = add64(m_64090, max_res_73092);
        bool zzero_leq_i_p_m_t_s_73095 = sle64((int64_t) 0, i_p_m_t_s_73094);
        bool i_p_m_t_s_leq_w_73096 = slt64(i_p_m_t_s_73094, n_64064);
        bool zzero_lte_i_73097 = sle64((int64_t) 0, max_res_73092);
        bool i_lte_j_73098 = sle64(max_res_73092, j_73093);
        bool y_73099 = i_p_m_t_s_leq_w_73096 && zzero_lte_i_73097;
        bool y_73100 = zzero_leq_i_p_m_t_s_73095 && y_73099;
        bool y_73101 = i_lte_j_73098 && y_73100;
        bool forwards_ok_73102 = zzero_lte_i_73097 && y_73101;
        bool ok_or_empty_73103 = empty_slice_64089 || forwards_ok_73102;
        bool index_certs_73104;
        
        if (!ok_or_empty_73103) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_73092, ":",
                          (long long) j_73093,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_73105;
        int64_t redout_73318 = (int64_t) 0;
        
        for (int64_t i_73317 = 0; i_73317 < min_res_64084; i_73317++) {
            int64_t slice_73319 = max_res_73092 + i_73317;
            int64_t x_73320 = ((int64_t *) mem_69933.mem)[slice_73319];
            int64_t abs_arg_73321 = sub64(x_73320, defunc_0_g_res_73071);
            int64_t abs_res_73322 = abs64(abs_arg_73321);
            int64_t defunc_1_op_res_73323 = add64(abs_res_73322, redout_73318);
            int64_t redout_tmp_73426 = defunc_1_op_res_73323;
            
            redout_73318 = redout_tmp_73426;
        }
        defunc_2_reduce_res_73105 = redout_73318;
        
        int64_t idx_73113;
        int64_t idx_73114;
        int64_t idx_73115;
        int64_t idx_73116;
        int64_t best_idx_73325;
        int64_t last_idx_73326;
        int64_t best_sum_73327;
        int64_t curr_sum_73328;
        
        best_idx_73325 = max_res_73092;
        last_idx_73326 = max_res_73092;
        best_sum_73327 = defunc_2_reduce_res_73105;
        curr_sum_73328 = defunc_2_reduce_res_73105;
        for (int64_t j_73324 = 0; j_73324 < min_res_64084; j_73324++) {
            int64_t new_idx_73329 = add64(max_res_73092, j_73324);
            int64_t x_73330 = add64(min_res_64084, new_idx_73329);
            bool cond_73331 = slt64(last_res_66873, x_73330);
            int64_t new_sum_73332;
            
            if (cond_73331) {
                new_sum_73332 = (int64_t) 9223372036854775807;
            } else {
                bool x_73333 = sle64((int64_t) 0, last_idx_73326);
                bool y_73334 = slt64(last_idx_73326, n_64064);
                bool bounds_check_73335 = x_73333 && y_73334;
                bool index_certs_73336;
                
                if (!bounds_check_73335) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_73326,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_73337 = ((int64_t *) mem_69933.mem)[last_idx_73326];
                int64_t binop_p_73338 = sub64(defunc_0_g_res_73071, y_73337);
                int64_t defunc_0_f_res_73339 = abs64(binop_p_73338);
                int64_t x_73340 = sub64(curr_sum_73328, defunc_0_f_res_73339);
                int64_t min_arg_73341 = add64(min_res_64084, last_idx_73326);
                int64_t min_res_73342 = smin64(i_64078, min_arg_73341);
                bool x_73343 = sle64((int64_t) 0, min_res_73342);
                bool y_73344 = slt64(min_res_73342, n_64064);
                bool bounds_check_73345 = x_73343 && y_73344;
                bool index_certs_73346;
                
                if (!bounds_check_73345) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_73342,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_73347 = ((int64_t *) mem_69933.mem)[min_res_73342];
                int64_t binop_p_73348 = sub64(defunc_0_g_res_73071, y_73347);
                int64_t defunc_0_f_res_73349 = abs64(binop_p_73348);
                int64_t new_sum_f_res_73350 = add64(x_73340,
                                                    defunc_0_f_res_73349);
                
                new_sum_73332 = new_sum_f_res_73350;
            }
            
            bool cond_73351 = sle64(new_sum_73332, best_sum_73327);
            int64_t loopres_73352;
            
            if (cond_73351) {
                loopres_73352 = new_idx_73329;
            } else {
                loopres_73352 = best_idx_73325;
            }
            
            int64_t loopres_73353;
            
            if (cond_73351) {
                loopres_73353 = new_sum_73332;
            } else {
                loopres_73353 = best_sum_73327;
            }
            
            int64_t best_idx_tmp_73427 = loopres_73352;
            int64_t last_idx_tmp_73428 = new_idx_73329;
            int64_t best_sum_tmp_73429 = loopres_73353;
            int64_t curr_sum_tmp_73430 = new_sum_73332;
            
            best_idx_73325 = best_idx_tmp_73427;
            last_idx_73326 = last_idx_tmp_73428;
            best_sum_73327 = best_sum_tmp_73429;
            curr_sum_73328 = curr_sum_tmp_73430;
        }
        idx_73113 = best_idx_73325;
        idx_73114 = last_idx_73326;
        idx_73115 = best_sum_73327;
        idx_73116 = curr_sum_73328;
        
        int64_t min_res_73147 = smin64(min_arg_66885, idx_73113);
        int64_t x_73148 = add64(min_res_64084, min_res_73147);
        int64_t r_73149 = sub64(x_73148, (int64_t) 1);
        bool x_73150 = sle64((int64_t) 0, r_73149);
        bool y_73151 = slt64(r_73149, n_64064);
        bool bounds_check_73152 = x_73150 && y_73151;
        bool index_certs_73153;
        
        if (!bounds_check_73152) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73149,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_73154 = ((int64_t *) mem_69924.mem)[r_73149];
        int64_t abs_arg_73155 = sub64(x_73154, min_res_73070);
        int64_t abs_res_73156 = abs64(abs_arg_73155);
        bool x_73157 = sle64((int64_t) 0, min_res_73147);
        bool y_73158 = slt64(min_res_73147, n_64064);
        bool bounds_check_73159 = x_73157 && y_73158;
        bool index_certs_73160;
        
        if (!bounds_check_73159) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73147,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_73161 = ((int64_t *) mem_69924.mem)[min_res_73147];
        int64_t abs_arg_73162 = sub64(x_73161, min_res_73070);
        int64_t abs_res_73163 = abs64(abs_arg_73162);
        int64_t max_res_73164 = smax64(abs_res_73156, abs_res_73163);
        float defunc_0_f_res_73165 = sitofp_i64_f32(max_res_73164);
        float defunc_1_f_res_73166 = max_res_66889 + defunc_0_f_res_73165;
        float defunc_0_f_res_73167 = sitofp_i64_f32(min_res_73070);
        float defunc_2_reduce_res_73168;
        float defunc_2_reduce_res_73169;
        float defunc_2_reduce_res_73170;
        float defunc_2_reduce_res_73171;
        float defunc_2_reduce_res_73172;
        float redout_73355;
        float redout_73356;
        float redout_73357;
        float redout_73358;
        float redout_73359;
        
        redout_73355 = 0.0F;
        redout_73356 = 0.0F;
        redout_73357 = 0.0F;
        redout_73358 = 0.0F;
        redout_73359 = 0.0F;
        for (int64_t i_73354 = 0; i_73354 < q_64066; i_73354++) {
            float x_73360 = ((float *) mem_69936.mem)[i_73354];
            bool cond_73361 = sle64(last_res_66873, i_73354);
            float defunc_0_f_res_73362;
            
            if (cond_73361) {
                defunc_0_f_res_73362 = 0.0F;
            } else {
                int64_t i_73363 = add64(min_res_73147, i_73354);
                float x_73364 = ((float *) mem_69927.mem)[i_73363];
                float defunc_0_f_res_f_res_73365 = 1.0F + x_73364;
                
                defunc_0_f_res_73362 = defunc_0_f_res_f_res_73365;
            }
            
            float x_j_73366 = defunc_0_f_res_73362 - defunc_0_f_res_73167;
            float abs_res_73367 = (float) fabs(x_j_73366);
            float tmp1_73368 = abs_res_73367 / defunc_1_f_res_73166;
            float x_73369 = tmp1_73368 * tmp1_73368;
            float y_73370 = tmp1_73368 * x_73369;
            float tmp2_73371 = 1.0F - y_73370;
            float x_73372 = tmp2_73371 * tmp2_73371;
            float tmp3_73373 = tmp2_73371 * x_73372;
            float w_j_73374 = x_73360 * tmp3_73373;
            float xw_j_73375 = x_j_73366 * w_j_73374;
            float x2w_j_73376 = x_j_73366 * xw_j_73375;
            float x3w_j_73377 = x_j_73366 * x2w_j_73376;
            float x4w_j_73378 = x_j_73366 * x3w_j_73377;
            float defunc_1_op_res_73379 = w_j_73374 + redout_73355;
            float defunc_1_op_res_73380 = xw_j_73375 + redout_73356;
            float defunc_1_op_res_73381 = x2w_j_73376 + redout_73357;
            float defunc_1_op_res_73382 = x3w_j_73377 + redout_73358;
            float defunc_1_op_res_73383 = x4w_j_73378 + redout_73359;
            float redout_tmp_73431 = defunc_1_op_res_73379;
            float redout_tmp_73432 = defunc_1_op_res_73380;
            float redout_tmp_73433 = defunc_1_op_res_73381;
            float redout_tmp_73434 = defunc_1_op_res_73382;
            float redout_tmp_73435 = defunc_1_op_res_73383;
            
            redout_73355 = redout_tmp_73431;
            redout_73356 = redout_tmp_73432;
            redout_73357 = redout_tmp_73433;
            redout_73358 = redout_tmp_73434;
            redout_73359 = redout_tmp_73435;
        }
        defunc_2_reduce_res_73168 = redout_73355;
        defunc_2_reduce_res_73169 = redout_73356;
        defunc_2_reduce_res_73170 = redout_73357;
        defunc_2_reduce_res_73171 = redout_73358;
        defunc_2_reduce_res_73172 = redout_73359;
        
        float x_73203 = defunc_2_reduce_res_73170 * defunc_2_reduce_res_73172;
        float y_73204 = defunc_2_reduce_res_73171 * defunc_2_reduce_res_73171;
        float a12_73205 = x_73203 - y_73204;
        float x_73206 = defunc_2_reduce_res_73170 * defunc_2_reduce_res_73171;
        float y_73207 = defunc_2_reduce_res_73169 * defunc_2_reduce_res_73172;
        float b12_73208 = x_73206 - y_73207;
        float x_73209 = defunc_2_reduce_res_73169 * defunc_2_reduce_res_73171;
        float y_73210 = defunc_2_reduce_res_73170 * defunc_2_reduce_res_73170;
        float c12_73211 = x_73209 - y_73210;
        float x_73212 = defunc_2_reduce_res_73168 * defunc_2_reduce_res_73172;
        float b2_73213 = x_73212 - y_73210;
        float x_73214 = defunc_2_reduce_res_73169 * defunc_2_reduce_res_73170;
        float y_73215 = defunc_2_reduce_res_73168 * defunc_2_reduce_res_73171;
        float c2_73216 = x_73214 - y_73215;
        float x_73217 = defunc_2_reduce_res_73168 * a12_73205;
        float y_73218 = defunc_2_reduce_res_73169 * b12_73208;
        float x_73219 = x_73217 + y_73218;
        float y_73220 = defunc_2_reduce_res_73170 * c12_73211;
        float y_73221 = x_73219 + y_73220;
        float det_73222 = 1.0F / y_73221;
        float a12_73223 = a12_73205 * det_73222;
        float b12_73224 = b12_73208 * det_73222;
        float c12_73225 = c12_73211 * det_73222;
        float b2_73226 = b2_73213 * det_73222;
        float c2_73227 = c2_73216 * det_73222;
        float defunc_2_reduce_res_73228;
        float defunc_2_reduce_res_73229;
        float redout_73385;
        float redout_73386;
        
        redout_73385 = 0.0F;
        redout_73386 = 0.0F;
        for (int64_t i_73384 = 0; i_73384 < q_64066; i_73384++) {
            float x_73387 = ((float *) mem_69936.mem)[i_73384];
            bool cond_73388 = sle64(last_res_66873, i_73384);
            float defunc_0_f_res_73389;
            
            if (cond_73388) {
                defunc_0_f_res_73389 = 0.0F;
            } else {
                int64_t i_73390 = add64(min_res_73147, i_73384);
                float x_73391 = ((float *) mem_69927.mem)[i_73390];
                float defunc_0_f_res_f_res_73392 = 1.0F + x_73391;
                
                defunc_0_f_res_73389 = defunc_0_f_res_f_res_73392;
            }
            
            float x_j_73393 = defunc_0_f_res_73389 - defunc_0_f_res_73167;
            float abs_res_73394 = (float) fabs(x_j_73393);
            float tmp1_73395 = abs_res_73394 / defunc_1_f_res_73166;
            float x_73396 = tmp1_73395 * tmp1_73395;
            float y_73397 = tmp1_73395 * x_73396;
            float tmp2_73398 = 1.0F - y_73397;
            float x_73399 = tmp2_73398 * tmp2_73398;
            float tmp3_73400 = tmp2_73398 * x_73399;
            float tmp4_73401 = x_73387 * tmp3_73400;
            float defunc_1_f_res_73402 = x_j_73393 * tmp4_73401;
            float defunc_1_f_res_73403 = x_j_73393 * defunc_1_f_res_73402;
            float defunc_0_f_res_73404;
            
            if (cond_73388) {
                defunc_0_f_res_73404 = 0.0F;
            } else {
                int64_t i_73405 = add64(min_res_73147, i_73384);
                float x_73406 = ((float *) mem_69921.mem)[i_73405];
                
                defunc_0_f_res_73404 = x_73406;
            }
            
            float x_73407 = a12_73223 * tmp4_73401;
            float y_73408 = b12_73224 * defunc_1_f_res_73402;
            float x_73409 = x_73407 + y_73408;
            float y_73410 = c12_73225 * defunc_1_f_res_73403;
            float x_73411 = x_73409 + y_73410;
            float defunc_9_fit_fun_res_73412 = defunc_0_f_res_73404 * x_73411;
            float x_73413 = b12_73224 * tmp4_73401;
            float y_73414 = b2_73226 * defunc_1_f_res_73402;
            float x_73415 = x_73413 + y_73414;
            float y_73416 = c2_73227 * defunc_1_f_res_73403;
            float x_73417 = x_73415 + y_73416;
            float defunc_9_slope_fun_res_73418 = defunc_0_f_res_73404 * x_73417;
            float defunc_1_op_res_73419 = defunc_9_fit_fun_res_73412 +
                  redout_73385;
            float defunc_1_op_res_73420 = defunc_9_slope_fun_res_73418 +
                  redout_73386;
            float redout_tmp_73436 = defunc_1_op_res_73419;
            float redout_tmp_73437 = defunc_1_op_res_73420;
            
            redout_73385 = redout_tmp_73436;
            redout_73386 = redout_tmp_73437;
        }
        defunc_2_reduce_res_73228 = redout_73385;
        defunc_2_reduce_res_73229 = redout_73386;
        ((float *) mem_69939.mem)[gtid_66649] = defunc_2_reduce_res_73228;
        ((float *) mem_69942.mem)[gtid_66649] = defunc_2_reduce_res_73229;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76620_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76620_end -
                 futhark_mc_segmap_parloop_76620_start;
        
        ctx->futhark_mc_segmap_parloop_76620_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76620_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76620_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76618(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66648 = tid;
    int num_tasks_73299 = info.nsubtasks;
    struct futhark_mc_task_76617 *futhark_mc_task_76617 =
                                 (struct futhark_mc_task_76617 *) args;
    struct futhark_context *ctx = futhark_mc_task_76617->ctx;
    uint64_t futhark_mc_segmap_task_76618_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76618_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76617->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76617->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76617->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76617->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76617->free_i_64078;
    bool x_64079 = futhark_mc_task_76617->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76617->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76617->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76617->free_m_64090;
    int64_t last_res_66873 = futhark_mc_task_76617->free_last_res_66873;
    int64_t min_arg_66885 = futhark_mc_task_76617->free_min_arg_66885;
    float max_res_66889 = futhark_mc_task_76617->free_max_res_66889;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_task_76617->free_mem_69921, .size =
                                 0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_task_76617->free_mem_69924, .size =
                                 0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_task_76617->free_mem_69927, .size =
                                 0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_task_76617->free_mem_69930, .size =
                                 0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_task_76617->free_mem_69933, .size =
                                 0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_task_76617->free_mem_69936, .size =
                                 0, .references =NULL};
    struct memblock mem_69939 = {.desc ="mem_69939", .mem =
                                 futhark_mc_task_76617->free_mem_69939, .size =
                                 0, .references =NULL};
    struct memblock mem_69942 = {.desc ="mem_69942", .mem =
                                 futhark_mc_task_76617->free_mem_69942, .size =
                                 0, .references =NULL};
    int64_t iter_73300;
    struct futhark_mc_segmap_parloop_struct_76619
    futhark_mc_segmap_parloop_struct_76619;
    
    futhark_mc_segmap_parloop_struct_76619.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76619.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76619.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76619.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76619.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76619.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76619.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76619.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76619.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76619.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76619.free_last_res_66873 = last_res_66873;
    futhark_mc_segmap_parloop_struct_76619.free_min_arg_66885 = min_arg_66885;
    futhark_mc_segmap_parloop_struct_76619.free_max_res_66889 = max_res_66889;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69921 = mem_69921.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69924 = mem_69924.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69927 = mem_69927.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69930 = mem_69930.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69933 = mem_69933.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69936 = mem_69936.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69939 = mem_69939.mem;
    futhark_mc_segmap_parloop_struct_76619.free_mem_69942 = mem_69942.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76620_task;
    
    futhark_mc_segmap_parloop_76620_task.name =
        "futhark_mc_segmap_parloop_76620";
    futhark_mc_segmap_parloop_76620_task.fn = futhark_mc_segmap_parloop_76620;
    futhark_mc_segmap_parloop_76620_task.args =
        &futhark_mc_segmap_parloop_struct_76619;
    futhark_mc_segmap_parloop_76620_task.iterations = iterations;
    futhark_mc_segmap_parloop_76620_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76620_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76620_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76620_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76620_task);
    
    if (futhark_mc_segmap_parloop_76620_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76620_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76620_total_end -
                 futhark_mc_segmap_parloop_76620_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76620_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76620_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76620_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76618_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76618_end -
                 futhark_mc_segmap_task_76618_start;
        
        ctx->futhark_mc_segmap_task_76618_runs[tid]++;
        ctx->futhark_mc_segmap_task_76618_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76618_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76622 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_66873;
    int64_t free_min_arg_66885;
    float free_max_res_66889;
    char *free_mem_69921;
    char *free_mem_69924;
    char *free_mem_69927;
    char *free_mem_69930;
    char *free_mem_69933;
    char *free_mem_69936;
    char *free_mem_69939;
    char *free_mem_69942;
};
struct futhark_mc_task_76624 {
    struct futhark_context *ctx;
    char *free_mem_69933;
    int64_t free_defunc_0_g_res_72868;
    int64_t free_max_res_72889;
    int64_t *retval_defunc_2_reduce_res_72902;
};
struct futhark_mc_segred_stage_1_parloop_struct_76627 {
    struct futhark_context *ctx;
    char *free_mem_69933;
    int64_t free_defunc_0_g_res_72868;
    int64_t free_max_res_72889;
    char *free_reduce_stage_1_tid_res_arr_mem_73570;
};
static int futhark_mc_segred_stage_1_parloop_76628(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66652, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76627
    *futhark_mc_segred_stage_1_parloop_struct_76627 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76627 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76627->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76628_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76628_start = get_wall_time();
    
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76627->free_mem_69933,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_72868 =
            futhark_mc_segred_stage_1_parloop_struct_76627->free_defunc_0_g_res_72868;
    int64_t max_res_72889 =
            futhark_mc_segred_stage_1_parloop_struct_76627->free_max_res_72889;
    struct memblock reduce_stage_1_tid_res_arr_mem_73570 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73570",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76627->free_reduce_stage_1_tid_res_arr_mem_73570,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73572 = start;
    int64_t x_73455;
    int64_t x_73456;
    int64_t local_acc_73573 = (int64_t) 0;
    
    for (; iter_73572 < end; iter_73572++) {
        int64_t gtid_66653 = iter_73572;
        int64_t slice_73458 = gtid_66653 + max_res_72889;
        int64_t x_73459 = ((int64_t *) mem_69933.mem)[slice_73458];
        int64_t abs_arg_73460 = sub64(x_73459, defunc_0_g_res_72868);
        int64_t abs_res_73461 = abs64(abs_arg_73460);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73455 = local_acc_73573;
        }
        // Load next params
        {
            x_73456 = abs_res_73461;
        }
        // Red body
        {
            int64_t defunc_1_op_res_73457 = add64(x_73455, x_73456);
            
            local_acc_73573 = defunc_1_op_res_73457;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_73570.mem)[flat_tid_66652] =
        local_acc_73573;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76628_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76628_end -
                 futhark_mc_segred_stage_1_parloop_76628_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76628_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76628_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76628_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76625(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66652 = tid;
    int num_tasks_73569 = info.nsubtasks;
    struct futhark_mc_task_76624 *futhark_mc_task_76624 =
                                 (struct futhark_mc_task_76624 *) args;
    struct futhark_context *ctx = futhark_mc_task_76624->ctx;
    uint64_t futhark_mc_segred_task_76625_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76625_start = get_wall_time();
    
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_task_76624->free_mem_69933, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_72868 =
            futhark_mc_task_76624->free_defunc_0_g_res_72868;
    int64_t max_res_72889 = futhark_mc_task_76624->free_max_res_72889;
    int64_t defunc_2_reduce_res_72902 =
            *futhark_mc_task_76624->retval_defunc_2_reduce_res_72902;
    size_t reduce_stage_1_tid_res_arr_mem_73570_cached_sizze_76626 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73570 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73570_cached_sizze_76626 <
        (size_t) ((int64_t) 8 * num_tasks_73569)) {
        reduce_stage_1_tid_res_arr_mem_73570 =
            realloc(reduce_stage_1_tid_res_arr_mem_73570, (int64_t) 8 *
                    num_tasks_73569);
        reduce_stage_1_tid_res_arr_mem_73570_cached_sizze_76626 = (int64_t) 8 *
            num_tasks_73569;
    }
    
    int64_t iter_73572;
    struct futhark_mc_segred_stage_1_parloop_struct_76627
    futhark_mc_segred_stage_1_parloop_struct_76627;
    
    futhark_mc_segred_stage_1_parloop_struct_76627.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76627.free_mem_69933 =
        mem_69933.mem;
    futhark_mc_segred_stage_1_parloop_struct_76627.free_defunc_0_g_res_72868 =
        defunc_0_g_res_72868;
    futhark_mc_segred_stage_1_parloop_struct_76627.free_max_res_72889 =
        max_res_72889;
    futhark_mc_segred_stage_1_parloop_struct_76627.free_reduce_stage_1_tid_res_arr_mem_73570 =
        reduce_stage_1_tid_res_arr_mem_73570;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76628_task;
    
    futhark_mc_segred_stage_1_parloop_76628_task.name =
        "futhark_mc_segred_stage_1_parloop_76628";
    futhark_mc_segred_stage_1_parloop_76628_task.fn =
        futhark_mc_segred_stage_1_parloop_76628;
    futhark_mc_segred_stage_1_parloop_76628_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76627;
    futhark_mc_segred_stage_1_parloop_76628_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76628_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76628_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76628_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76628_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76628_task);
    
    if (futhark_mc_segred_stage_1_parloop_76628_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76628_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76628_total_end -
                 futhark_mc_segred_stage_1_parloop_76628_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76628_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76628_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76628_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72902 = (int64_t) 0;
    }
    
    int64_t x_73574;
    int64_t x_73575;
    
    for (int32_t i_73577 = 0; i_73577 < num_tasks_73569; i_73577++) {
        flat_tid_66652 = i_73577;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73574 = defunc_2_reduce_res_72902;
            }
            // load next params
            {
                x_73575 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_73570)[flat_tid_66652];
            }
            // red body
            {
                int64_t defunc_1_op_res_73576 = add64(x_73574, x_73575);
                
                defunc_2_reduce_res_72902 = defunc_1_op_res_73576;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73570);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76625_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76625_end -
                 futhark_mc_segred_task_76625_start;
        
        ctx->futhark_mc_segred_task_76625_runs[tid]++;
        ctx->futhark_mc_segred_task_76625_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76625_iter[tid] += iterations;
    }
    *futhark_mc_task_76624->retval_defunc_2_reduce_res_72902 =
        defunc_2_reduce_res_72902;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76629 {
    struct futhark_context *ctx;
    int64_t free_last_res_66873;
    char *free_mem_69927;
    char *free_mem_69936;
    int64_t free_min_res_72944;
    float free_defunc_1_f_res_72963;
    float free_defunc_0_f_res_72964;
    float *retval_defunc_2_reduce_res_72965;
    float *retval_defunc_2_reduce_res_72966;
    float *retval_defunc_2_reduce_res_72967;
    float *retval_defunc_2_reduce_res_72968;
    float *retval_defunc_2_reduce_res_72969;
};
struct futhark_mc_segred_stage_1_parloop_struct_76636 {
    struct futhark_context *ctx;
    int64_t free_last_res_66873;
    char *free_mem_69927;
    char *free_mem_69936;
    int64_t free_min_res_72944;
    float free_defunc_1_f_res_72963;
    float free_defunc_0_f_res_72964;
    char *free_reduce_stage_1_tid_res_arr_mem_73583;
    char *free_reduce_stage_1_tid_res_arr_mem_73585;
    char *free_reduce_stage_1_tid_res_arr_mem_73587;
    char *free_reduce_stage_1_tid_res_arr_mem_73589;
    char *free_reduce_stage_1_tid_res_arr_mem_73591;
};
static int futhark_mc_segred_stage_1_parloop_76637(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66654, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76636
    *futhark_mc_segred_stage_1_parloop_struct_76636 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76636 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76636->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76637_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76637_start = get_wall_time();
    
    int64_t last_res_66873 =
            futhark_mc_segred_stage_1_parloop_struct_76636->free_last_res_66873;
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76636->free_mem_69927,
                                 .size =0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76636->free_mem_69936,
                                 .size =0, .references =NULL};
    int64_t min_res_72944 =
            futhark_mc_segred_stage_1_parloop_struct_76636->free_min_res_72944;
    float defunc_1_f_res_72963 =
          futhark_mc_segred_stage_1_parloop_struct_76636->free_defunc_1_f_res_72963;
    float defunc_0_f_res_72964 =
          futhark_mc_segred_stage_1_parloop_struct_76636->free_defunc_0_f_res_72964;
    struct memblock reduce_stage_1_tid_res_arr_mem_73583 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73583",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76636->free_reduce_stage_1_tid_res_arr_mem_73583,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73585 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73585",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76636->free_reduce_stage_1_tid_res_arr_mem_73585,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73587 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73587",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76636->free_reduce_stage_1_tid_res_arr_mem_73587,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73589 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73589",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76636->free_reduce_stage_1_tid_res_arr_mem_73589,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73591 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73591",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76636->free_reduce_stage_1_tid_res_arr_mem_73591,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73593 = start;
    float x_73492;
    float x_73493;
    float x_73495;
    float x_73496;
    float x_73498;
    float x_73499;
    float x_73501;
    float x_73502;
    float x_73504;
    float x_73505;
    float local_acc_73594 = 0.0F;
    float local_acc_73595 = 0.0F;
    float local_acc_73596 = 0.0F;
    float local_acc_73597 = 0.0F;
    float local_acc_73598 = 0.0F;
    
    for (; iter_73593 < end; iter_73593++) {
        int64_t gtid_66655 = iter_73593;
        float x_73507 = ((float *) mem_69936.mem)[gtid_66655];
        bool cond_73508 = sle64(last_res_66873, gtid_66655);
        float defunc_0_f_res_73509;
        
        if (cond_73508) {
            defunc_0_f_res_73509 = 0.0F;
        } else {
            int64_t i_73510 = add64(gtid_66655, min_res_72944);
            float x_73511 = ((float *) mem_69927.mem)[i_73510];
            float defunc_0_f_res_f_res_73512 = 1.0F + x_73511;
            
            defunc_0_f_res_73509 = defunc_0_f_res_f_res_73512;
        }
        
        float x_j_73513 = defunc_0_f_res_73509 - defunc_0_f_res_72964;
        float abs_res_73514 = (float) fabs(x_j_73513);
        float tmp1_73515 = abs_res_73514 / defunc_1_f_res_72963;
        float x_73516 = tmp1_73515 * tmp1_73515;
        float y_73517 = tmp1_73515 * x_73516;
        float tmp2_73518 = 1.0F - y_73517;
        float x_73519 = tmp2_73518 * tmp2_73518;
        float tmp3_73520 = tmp2_73518 * x_73519;
        float w_j_73521 = x_73507 * tmp3_73520;
        float xw_j_73522 = x_j_73513 * w_j_73521;
        float x2w_j_73523 = x_j_73513 * xw_j_73522;
        float x3w_j_73524 = x_j_73513 * x2w_j_73523;
        float x4w_j_73525 = x_j_73513 * x3w_j_73524;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73492 = local_acc_73594;
        }
        // Load next params
        {
            x_73493 = w_j_73521;
        }
        // Red body
        {
            float defunc_1_op_res_73494 = x_73492 + x_73493;
            
            local_acc_73594 = defunc_1_op_res_73494;
        }
        // Load accum params
        {
            x_73495 = local_acc_73595;
        }
        // Load next params
        {
            x_73496 = xw_j_73522;
        }
        // Red body
        {
            float defunc_1_op_res_73497 = x_73495 + x_73496;
            
            local_acc_73595 = defunc_1_op_res_73497;
        }
        // Load accum params
        {
            x_73498 = local_acc_73596;
        }
        // Load next params
        {
            x_73499 = x2w_j_73523;
        }
        // Red body
        {
            float defunc_1_op_res_73500 = x_73498 + x_73499;
            
            local_acc_73596 = defunc_1_op_res_73500;
        }
        // Load accum params
        {
            x_73501 = local_acc_73597;
        }
        // Load next params
        {
            x_73502 = x3w_j_73524;
        }
        // Red body
        {
            float defunc_1_op_res_73503 = x_73501 + x_73502;
            
            local_acc_73597 = defunc_1_op_res_73503;
        }
        // Load accum params
        {
            x_73504 = local_acc_73598;
        }
        // Load next params
        {
            x_73505 = x4w_j_73525;
        }
        // Red body
        {
            float defunc_1_op_res_73506 = x_73504 + x_73505;
            
            local_acc_73598 = defunc_1_op_res_73506;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73583.mem)[flat_tid_66654] =
        local_acc_73594;
    ((float *) reduce_stage_1_tid_res_arr_mem_73585.mem)[flat_tid_66654] =
        local_acc_73595;
    ((float *) reduce_stage_1_tid_res_arr_mem_73587.mem)[flat_tid_66654] =
        local_acc_73596;
    ((float *) reduce_stage_1_tid_res_arr_mem_73589.mem)[flat_tid_66654] =
        local_acc_73597;
    ((float *) reduce_stage_1_tid_res_arr_mem_73591.mem)[flat_tid_66654] =
        local_acc_73598;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76637_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76637_end -
                 futhark_mc_segred_stage_1_parloop_76637_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76637_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76637_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76637_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76630(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66654 = tid;
    int num_tasks_73582 = info.nsubtasks;
    struct futhark_mc_task_76629 *futhark_mc_task_76629 =
                                 (struct futhark_mc_task_76629 *) args;
    struct futhark_context *ctx = futhark_mc_task_76629->ctx;
    uint64_t futhark_mc_segred_task_76630_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76630_start = get_wall_time();
    
    int64_t last_res_66873 = futhark_mc_task_76629->free_last_res_66873;
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_task_76629->free_mem_69927, .size =
                                 0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_task_76629->free_mem_69936, .size =
                                 0, .references =NULL};
    int64_t min_res_72944 = futhark_mc_task_76629->free_min_res_72944;
    float defunc_1_f_res_72963 =
          futhark_mc_task_76629->free_defunc_1_f_res_72963;
    float defunc_0_f_res_72964 =
          futhark_mc_task_76629->free_defunc_0_f_res_72964;
    float defunc_2_reduce_res_72965 =
          *futhark_mc_task_76629->retval_defunc_2_reduce_res_72965;
    float defunc_2_reduce_res_72966 =
          *futhark_mc_task_76629->retval_defunc_2_reduce_res_72966;
    float defunc_2_reduce_res_72967 =
          *futhark_mc_task_76629->retval_defunc_2_reduce_res_72967;
    float defunc_2_reduce_res_72968 =
          *futhark_mc_task_76629->retval_defunc_2_reduce_res_72968;
    float defunc_2_reduce_res_72969 =
          *futhark_mc_task_76629->retval_defunc_2_reduce_res_72969;
    size_t reduce_stage_1_tid_res_arr_mem_73583_cached_sizze_76631 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73583 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73585_cached_sizze_76632 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73585 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73587_cached_sizze_76633 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73587 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73589_cached_sizze_76634 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73589 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73591_cached_sizze_76635 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73591 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73583_cached_sizze_76631 <
        (size_t) ((int64_t) 4 * num_tasks_73582)) {
        reduce_stage_1_tid_res_arr_mem_73583 =
            realloc(reduce_stage_1_tid_res_arr_mem_73583, (int64_t) 4 *
                    num_tasks_73582);
        reduce_stage_1_tid_res_arr_mem_73583_cached_sizze_76631 = (int64_t) 4 *
            num_tasks_73582;
    }
    if (reduce_stage_1_tid_res_arr_mem_73585_cached_sizze_76632 <
        (size_t) ((int64_t) 4 * num_tasks_73582)) {
        reduce_stage_1_tid_res_arr_mem_73585 =
            realloc(reduce_stage_1_tid_res_arr_mem_73585, (int64_t) 4 *
                    num_tasks_73582);
        reduce_stage_1_tid_res_arr_mem_73585_cached_sizze_76632 = (int64_t) 4 *
            num_tasks_73582;
    }
    if (reduce_stage_1_tid_res_arr_mem_73587_cached_sizze_76633 <
        (size_t) ((int64_t) 4 * num_tasks_73582)) {
        reduce_stage_1_tid_res_arr_mem_73587 =
            realloc(reduce_stage_1_tid_res_arr_mem_73587, (int64_t) 4 *
                    num_tasks_73582);
        reduce_stage_1_tid_res_arr_mem_73587_cached_sizze_76633 = (int64_t) 4 *
            num_tasks_73582;
    }
    if (reduce_stage_1_tid_res_arr_mem_73589_cached_sizze_76634 <
        (size_t) ((int64_t) 4 * num_tasks_73582)) {
        reduce_stage_1_tid_res_arr_mem_73589 =
            realloc(reduce_stage_1_tid_res_arr_mem_73589, (int64_t) 4 *
                    num_tasks_73582);
        reduce_stage_1_tid_res_arr_mem_73589_cached_sizze_76634 = (int64_t) 4 *
            num_tasks_73582;
    }
    if (reduce_stage_1_tid_res_arr_mem_73591_cached_sizze_76635 <
        (size_t) ((int64_t) 4 * num_tasks_73582)) {
        reduce_stage_1_tid_res_arr_mem_73591 =
            realloc(reduce_stage_1_tid_res_arr_mem_73591, (int64_t) 4 *
                    num_tasks_73582);
        reduce_stage_1_tid_res_arr_mem_73591_cached_sizze_76635 = (int64_t) 4 *
            num_tasks_73582;
    }
    
    int64_t iter_73593;
    struct futhark_mc_segred_stage_1_parloop_struct_76636
    futhark_mc_segred_stage_1_parloop_struct_76636;
    
    futhark_mc_segred_stage_1_parloop_struct_76636.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_last_res_66873 =
        last_res_66873;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_mem_69927 =
        mem_69927.mem;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_mem_69936 =
        mem_69936.mem;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_min_res_72944 =
        min_res_72944;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_defunc_1_f_res_72963 =
        defunc_1_f_res_72963;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_defunc_0_f_res_72964 =
        defunc_0_f_res_72964;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_reduce_stage_1_tid_res_arr_mem_73583 =
        reduce_stage_1_tid_res_arr_mem_73583;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_reduce_stage_1_tid_res_arr_mem_73585 =
        reduce_stage_1_tid_res_arr_mem_73585;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_reduce_stage_1_tid_res_arr_mem_73587 =
        reduce_stage_1_tid_res_arr_mem_73587;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_reduce_stage_1_tid_res_arr_mem_73589 =
        reduce_stage_1_tid_res_arr_mem_73589;
    futhark_mc_segred_stage_1_parloop_struct_76636.free_reduce_stage_1_tid_res_arr_mem_73591 =
        reduce_stage_1_tid_res_arr_mem_73591;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76637_task;
    
    futhark_mc_segred_stage_1_parloop_76637_task.name =
        "futhark_mc_segred_stage_1_parloop_76637";
    futhark_mc_segred_stage_1_parloop_76637_task.fn =
        futhark_mc_segred_stage_1_parloop_76637;
    futhark_mc_segred_stage_1_parloop_76637_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76636;
    futhark_mc_segred_stage_1_parloop_76637_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76637_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76637_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76637_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76637_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76637_task);
    
    if (futhark_mc_segred_stage_1_parloop_76637_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76637_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76637_total_end -
                 futhark_mc_segred_stage_1_parloop_76637_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76637_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76637_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76637_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72965 = 0.0F;
        defunc_2_reduce_res_72966 = 0.0F;
        defunc_2_reduce_res_72967 = 0.0F;
        defunc_2_reduce_res_72968 = 0.0F;
        defunc_2_reduce_res_72969 = 0.0F;
    }
    
    float x_73599;
    float x_73600;
    float x_73602;
    float x_73603;
    float x_73605;
    float x_73606;
    float x_73608;
    float x_73609;
    float x_73611;
    float x_73612;
    
    for (int32_t i_73614 = 0; i_73614 < num_tasks_73582; i_73614++) {
        flat_tid_66654 = i_73614;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73599 = defunc_2_reduce_res_72965;
            }
            // load next params
            {
                x_73600 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73583)[flat_tid_66654];
            }
            // red body
            {
                float defunc_1_op_res_73601 = x_73599 + x_73600;
                
                defunc_2_reduce_res_72965 = defunc_1_op_res_73601;
            }
            // load acc params
            {
                x_73602 = defunc_2_reduce_res_72966;
            }
            // load next params
            {
                x_73603 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73585)[flat_tid_66654];
            }
            // red body
            {
                float defunc_1_op_res_73604 = x_73602 + x_73603;
                
                defunc_2_reduce_res_72966 = defunc_1_op_res_73604;
            }
            // load acc params
            {
                x_73605 = defunc_2_reduce_res_72967;
            }
            // load next params
            {
                x_73606 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73587)[flat_tid_66654];
            }
            // red body
            {
                float defunc_1_op_res_73607 = x_73605 + x_73606;
                
                defunc_2_reduce_res_72967 = defunc_1_op_res_73607;
            }
            // load acc params
            {
                x_73608 = defunc_2_reduce_res_72968;
            }
            // load next params
            {
                x_73609 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73589)[flat_tid_66654];
            }
            // red body
            {
                float defunc_1_op_res_73610 = x_73608 + x_73609;
                
                defunc_2_reduce_res_72968 = defunc_1_op_res_73610;
            }
            // load acc params
            {
                x_73611 = defunc_2_reduce_res_72969;
            }
            // load next params
            {
                x_73612 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73591)[flat_tid_66654];
            }
            // red body
            {
                float defunc_1_op_res_73613 = x_73611 + x_73612;
                
                defunc_2_reduce_res_72969 = defunc_1_op_res_73613;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73583);
    free(reduce_stage_1_tid_res_arr_mem_73585);
    free(reduce_stage_1_tid_res_arr_mem_73587);
    free(reduce_stage_1_tid_res_arr_mem_73589);
    free(reduce_stage_1_tid_res_arr_mem_73591);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76630_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76630_end -
                 futhark_mc_segred_task_76630_start;
        
        ctx->futhark_mc_segred_task_76630_runs[tid]++;
        ctx->futhark_mc_segred_task_76630_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76630_iter[tid] += iterations;
    }
    *futhark_mc_task_76629->retval_defunc_2_reduce_res_72965 =
        defunc_2_reduce_res_72965;
    *futhark_mc_task_76629->retval_defunc_2_reduce_res_72966 =
        defunc_2_reduce_res_72966;
    *futhark_mc_task_76629->retval_defunc_2_reduce_res_72967 =
        defunc_2_reduce_res_72967;
    *futhark_mc_task_76629->retval_defunc_2_reduce_res_72968 =
        defunc_2_reduce_res_72968;
    *futhark_mc_task_76629->retval_defunc_2_reduce_res_72969 =
        defunc_2_reduce_res_72969;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76638 {
    struct futhark_context *ctx;
    int64_t free_last_res_66873;
    char *free_mem_69921;
    char *free_mem_69927;
    char *free_mem_69936;
    int64_t free_min_res_72944;
    float free_defunc_1_f_res_72963;
    float free_defunc_0_f_res_72964;
    float free_a12_73024;
    float free_b12_73025;
    float free_c12_73026;
    float free_b2_73027;
    float free_c2_73028;
    float *retval_defunc_2_reduce_res_73029;
    float *retval_defunc_2_reduce_res_73030;
};
struct futhark_mc_segred_stage_1_parloop_struct_76642 {
    struct futhark_context *ctx;
    int64_t free_last_res_66873;
    char *free_mem_69921;
    char *free_mem_69927;
    char *free_mem_69936;
    int64_t free_min_res_72944;
    float free_defunc_1_f_res_72963;
    float free_defunc_0_f_res_72964;
    float free_a12_73024;
    float free_b12_73025;
    float free_c12_73026;
    float free_b2_73027;
    float free_c2_73028;
    char *free_reduce_stage_1_tid_res_arr_mem_73616;
    char *free_reduce_stage_1_tid_res_arr_mem_73618;
};
static int futhark_mc_segred_stage_1_parloop_76643(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66656, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76642
    *futhark_mc_segred_stage_1_parloop_struct_76642 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76642 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76642->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76643_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76643_start = get_wall_time();
    
    int64_t last_res_66873 =
            futhark_mc_segred_stage_1_parloop_struct_76642->free_last_res_66873;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76642->free_mem_69921,
                                 .size =0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76642->free_mem_69927,
                                 .size =0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76642->free_mem_69936,
                                 .size =0, .references =NULL};
    int64_t min_res_72944 =
            futhark_mc_segred_stage_1_parloop_struct_76642->free_min_res_72944;
    float defunc_1_f_res_72963 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_defunc_1_f_res_72963;
    float defunc_0_f_res_72964 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_defunc_0_f_res_72964;
    float a12_73024 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_a12_73024;
    float b12_73025 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_b12_73025;
    float c12_73026 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_c12_73026;
    float b2_73027 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_b2_73027;
    float c2_73028 =
          futhark_mc_segred_stage_1_parloop_struct_76642->free_c2_73028;
    struct memblock reduce_stage_1_tid_res_arr_mem_73616 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73616",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76642->free_reduce_stage_1_tid_res_arr_mem_73616,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73618 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73618",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76642->free_reduce_stage_1_tid_res_arr_mem_73618,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73620 = start;
    float x_73526;
    float x_73527;
    float x_73529;
    float x_73530;
    float local_acc_73621 = 0.0F;
    float local_acc_73622 = 0.0F;
    
    for (; iter_73620 < end; iter_73620++) {
        int64_t gtid_66657 = iter_73620;
        float x_73532 = ((float *) mem_69936.mem)[gtid_66657];
        bool cond_73533 = sle64(last_res_66873, gtid_66657);
        float defunc_0_f_res_73534;
        
        if (cond_73533) {
            defunc_0_f_res_73534 = 0.0F;
        } else {
            int64_t i_73535 = add64(gtid_66657, min_res_72944);
            float x_73536 = ((float *) mem_69927.mem)[i_73535];
            float defunc_0_f_res_f_res_73537 = 1.0F + x_73536;
            
            defunc_0_f_res_73534 = defunc_0_f_res_f_res_73537;
        }
        
        float x_j_73538 = defunc_0_f_res_73534 - defunc_0_f_res_72964;
        float abs_res_73539 = (float) fabs(x_j_73538);
        float tmp1_73540 = abs_res_73539 / defunc_1_f_res_72963;
        float x_73541 = tmp1_73540 * tmp1_73540;
        float y_73542 = tmp1_73540 * x_73541;
        float tmp2_73543 = 1.0F - y_73542;
        float x_73544 = tmp2_73543 * tmp2_73543;
        float tmp3_73545 = tmp2_73543 * x_73544;
        float tmp4_73546 = x_73532 * tmp3_73545;
        float defunc_1_f_res_73547 = x_j_73538 * tmp4_73546;
        float defunc_1_f_res_73548 = x_j_73538 * defunc_1_f_res_73547;
        float defunc_0_f_res_73549;
        
        if (cond_73533) {
            defunc_0_f_res_73549 = 0.0F;
        } else {
            int64_t i_73550 = add64(gtid_66657, min_res_72944);
            float x_73551 = ((float *) mem_69921.mem)[i_73550];
            
            defunc_0_f_res_73549 = x_73551;
        }
        
        float x_73552 = a12_73024 * tmp4_73546;
        float y_73553 = b12_73025 * defunc_1_f_res_73547;
        float x_73554 = x_73552 + y_73553;
        float y_73555 = c12_73026 * defunc_1_f_res_73548;
        float x_73556 = x_73554 + y_73555;
        float defunc_9_fit_fun_res_73557 = defunc_0_f_res_73549 * x_73556;
        float x_73558 = b12_73025 * tmp4_73546;
        float y_73559 = b2_73027 * defunc_1_f_res_73547;
        float x_73560 = x_73558 + y_73559;
        float y_73561 = c2_73028 * defunc_1_f_res_73548;
        float x_73562 = x_73560 + y_73561;
        float defunc_9_slope_fun_res_73563 = defunc_0_f_res_73549 * x_73562;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73526 = local_acc_73621;
        }
        // Load next params
        {
            x_73527 = defunc_9_fit_fun_res_73557;
        }
        // Red body
        {
            float defunc_1_op_res_73528 = x_73526 + x_73527;
            
            local_acc_73621 = defunc_1_op_res_73528;
        }
        // Load accum params
        {
            x_73529 = local_acc_73622;
        }
        // Load next params
        {
            x_73530 = defunc_9_slope_fun_res_73563;
        }
        // Red body
        {
            float defunc_1_op_res_73531 = x_73529 + x_73530;
            
            local_acc_73622 = defunc_1_op_res_73531;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73616.mem)[flat_tid_66656] =
        local_acc_73621;
    ((float *) reduce_stage_1_tid_res_arr_mem_73618.mem)[flat_tid_66656] =
        local_acc_73622;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76643_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76643_end -
                 futhark_mc_segred_stage_1_parloop_76643_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76643_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76643_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76643_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76639(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66656 = tid;
    int num_tasks_73615 = info.nsubtasks;
    struct futhark_mc_task_76638 *futhark_mc_task_76638 =
                                 (struct futhark_mc_task_76638 *) args;
    struct futhark_context *ctx = futhark_mc_task_76638->ctx;
    uint64_t futhark_mc_segred_task_76639_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76639_start = get_wall_time();
    
    int64_t last_res_66873 = futhark_mc_task_76638->free_last_res_66873;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_task_76638->free_mem_69921, .size =
                                 0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_task_76638->free_mem_69927, .size =
                                 0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_task_76638->free_mem_69936, .size =
                                 0, .references =NULL};
    int64_t min_res_72944 = futhark_mc_task_76638->free_min_res_72944;
    float defunc_1_f_res_72963 =
          futhark_mc_task_76638->free_defunc_1_f_res_72963;
    float defunc_0_f_res_72964 =
          futhark_mc_task_76638->free_defunc_0_f_res_72964;
    float a12_73024 = futhark_mc_task_76638->free_a12_73024;
    float b12_73025 = futhark_mc_task_76638->free_b12_73025;
    float c12_73026 = futhark_mc_task_76638->free_c12_73026;
    float b2_73027 = futhark_mc_task_76638->free_b2_73027;
    float c2_73028 = futhark_mc_task_76638->free_c2_73028;
    float defunc_2_reduce_res_73029 =
          *futhark_mc_task_76638->retval_defunc_2_reduce_res_73029;
    float defunc_2_reduce_res_73030 =
          *futhark_mc_task_76638->retval_defunc_2_reduce_res_73030;
    size_t reduce_stage_1_tid_res_arr_mem_73616_cached_sizze_76640 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73616 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73618_cached_sizze_76641 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73618 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73616_cached_sizze_76640 <
        (size_t) ((int64_t) 4 * num_tasks_73615)) {
        reduce_stage_1_tid_res_arr_mem_73616 =
            realloc(reduce_stage_1_tid_res_arr_mem_73616, (int64_t) 4 *
                    num_tasks_73615);
        reduce_stage_1_tid_res_arr_mem_73616_cached_sizze_76640 = (int64_t) 4 *
            num_tasks_73615;
    }
    if (reduce_stage_1_tid_res_arr_mem_73618_cached_sizze_76641 <
        (size_t) ((int64_t) 4 * num_tasks_73615)) {
        reduce_stage_1_tid_res_arr_mem_73618 =
            realloc(reduce_stage_1_tid_res_arr_mem_73618, (int64_t) 4 *
                    num_tasks_73615);
        reduce_stage_1_tid_res_arr_mem_73618_cached_sizze_76641 = (int64_t) 4 *
            num_tasks_73615;
    }
    
    int64_t iter_73620;
    struct futhark_mc_segred_stage_1_parloop_struct_76642
    futhark_mc_segred_stage_1_parloop_struct_76642;
    
    futhark_mc_segred_stage_1_parloop_struct_76642.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_last_res_66873 =
        last_res_66873;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_mem_69921 =
        mem_69921.mem;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_mem_69927 =
        mem_69927.mem;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_mem_69936 =
        mem_69936.mem;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_min_res_72944 =
        min_res_72944;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_defunc_1_f_res_72963 =
        defunc_1_f_res_72963;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_defunc_0_f_res_72964 =
        defunc_0_f_res_72964;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_a12_73024 = a12_73024;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_b12_73025 = b12_73025;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_c12_73026 = c12_73026;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_b2_73027 = b2_73027;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_c2_73028 = c2_73028;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_reduce_stage_1_tid_res_arr_mem_73616 =
        reduce_stage_1_tid_res_arr_mem_73616;
    futhark_mc_segred_stage_1_parloop_struct_76642.free_reduce_stage_1_tid_res_arr_mem_73618 =
        reduce_stage_1_tid_res_arr_mem_73618;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76643_task;
    
    futhark_mc_segred_stage_1_parloop_76643_task.name =
        "futhark_mc_segred_stage_1_parloop_76643";
    futhark_mc_segred_stage_1_parloop_76643_task.fn =
        futhark_mc_segred_stage_1_parloop_76643;
    futhark_mc_segred_stage_1_parloop_76643_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76642;
    futhark_mc_segred_stage_1_parloop_76643_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76643_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76643_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76643_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76643_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76643_task);
    
    if (futhark_mc_segred_stage_1_parloop_76643_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76643_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76643_total_end -
                 futhark_mc_segred_stage_1_parloop_76643_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76643_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76643_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76643_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73029 = 0.0F;
        defunc_2_reduce_res_73030 = 0.0F;
    }
    
    float x_73623;
    float x_73624;
    float x_73626;
    float x_73627;
    
    for (int32_t i_73629 = 0; i_73629 < num_tasks_73615; i_73629++) {
        flat_tid_66656 = i_73629;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73623 = defunc_2_reduce_res_73029;
            }
            // load next params
            {
                x_73624 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73616)[flat_tid_66656];
            }
            // red body
            {
                float defunc_1_op_res_73625 = x_73623 + x_73624;
                
                defunc_2_reduce_res_73029 = defunc_1_op_res_73625;
            }
            // load acc params
            {
                x_73626 = defunc_2_reduce_res_73030;
            }
            // load next params
            {
                x_73627 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73618)[flat_tid_66656];
            }
            // red body
            {
                float defunc_1_op_res_73628 = x_73626 + x_73627;
                
                defunc_2_reduce_res_73030 = defunc_1_op_res_73628;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73616);
    free(reduce_stage_1_tid_res_arr_mem_73618);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76639_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76639_end -
                 futhark_mc_segred_task_76639_start;
        
        ctx->futhark_mc_segred_task_76639_runs[tid]++;
        ctx->futhark_mc_segred_task_76639_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76639_iter[tid] += iterations;
    }
    *futhark_mc_task_76638->retval_defunc_2_reduce_res_73029 =
        defunc_2_reduce_res_73029;
    *futhark_mc_task_76638->retval_defunc_2_reduce_res_73030 =
        defunc_2_reduce_res_73030;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76623(void *args, int64_t start,
                                           int64_t end, int flat_tid_66650,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76622
    *futhark_mc_segmap_parloop_struct_76622 =
    (struct futhark_mc_segmap_parloop_struct_76622 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76622->ctx;
    uint64_t futhark_mc_segmap_parloop_76623_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76623_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76622->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76622->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76622->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76622->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76622->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76622->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76622->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76622->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76622->free_m_64090;
    int64_t last_res_66873 =
            futhark_mc_segmap_parloop_struct_76622->free_last_res_66873;
    int64_t min_arg_66885 =
            futhark_mc_segmap_parloop_struct_76622->free_min_arg_66885;
    float max_res_66889 =
          futhark_mc_segmap_parloop_struct_76622->free_max_res_66889;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69921,
                                 .size =0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69924,
                                 .size =0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69927,
                                 .size =0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69930,
                                 .size =0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69933,
                                 .size =0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69936,
                                 .size =0, .references =NULL};
    struct memblock mem_69939 = {.desc ="mem_69939", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69939,
                                 .size =0, .references =NULL};
    struct memblock mem_69942 = {.desc ="mem_69942", .mem =
                                 futhark_mc_segmap_parloop_struct_76622->free_mem_69942,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73438 = start;
    
    for (; iter_73438 < end; iter_73438++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73564 = n_m_64072;
        int64_t gtid_66651 = iter_73438;
        int64_t remnant_73565 = iter_73438 - gtid_66651;
        int64_t min_arg_72866 = mul64(jump_64068, gtid_66651);
        int64_t min_res_72867 = smin64(i_64078, min_arg_72866);
        int64_t defunc_0_g_res_72868 = add64((int64_t) 1, min_res_72867);
        bool nearest_idx_72869;
        int64_t nearest_idx_72870;
        int64_t nearest_idx_72871;
        bool loop_while_73439;
        int64_t low_73440;
        int64_t high_73441;
        
        loop_while_73439 = x_64079;
        low_73440 = (int64_t) 0;
        high_73441 = i_64078;
        while (loop_while_73439) {
            int64_t x_73442 = add64(low_73440, high_73441);
            int64_t mid_73443 = sdiv64(x_73442, (int64_t) 2);
            bool x_73444 = sle64((int64_t) 0, mid_73443);
            bool y_73445 = slt64(mid_73443, n_64064);
            bool bounds_check_73446 = x_73444 && y_73445;
            bool index_certs_73447;
            
            if (!bounds_check_73446) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73443,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_73448 = ((int64_t *) mem_69930.mem)[mid_73443];
            bool cond_73449 = sle64(defunc_0_g_res_72868, x_73448);
            int64_t loopres_73450;
            int64_t loopres_73451;
            
            if (cond_73449) {
                int64_t loopres_t_res_73452 = sub64(mid_73443, (int64_t) 1);
                
                loopres_73450 = low_73440;
                loopres_73451 = loopres_t_res_73452;
            } else {
                int64_t loopres_f_res_73453 = add64((int64_t) 1, mid_73443);
                
                loopres_73450 = loopres_f_res_73453;
                loopres_73451 = high_73441;
            }
            
            bool loop_cond_73454 = sle64(loopres_73450, loopres_73451);
            bool loop_while_tmp_73566 = loop_cond_73454;
            int64_t low_tmp_73567 = loopres_73450;
            int64_t high_tmp_73568 = loopres_73451;
            
            loop_while_73439 = loop_while_tmp_73566;
            low_73440 = low_tmp_73567;
            high_73441 = high_tmp_73568;
        }
        nearest_idx_72869 = loop_while_73439;
        nearest_idx_72870 = low_73440;
        nearest_idx_72871 = high_73441;
        
        int64_t max_arg_72888 = sub64(nearest_idx_72870, min_res_64084);
        int64_t max_res_72889 = smax64((int64_t) 0, max_arg_72888);
        int64_t j_72890 = add64(min_res_64084, max_res_72889);
        int64_t i_p_m_t_s_72891 = add64(m_64090, max_res_72889);
        bool zzero_leq_i_p_m_t_s_72892 = sle64((int64_t) 0, i_p_m_t_s_72891);
        bool i_p_m_t_s_leq_w_72893 = slt64(i_p_m_t_s_72891, n_64064);
        bool zzero_lte_i_72894 = sle64((int64_t) 0, max_res_72889);
        bool i_lte_j_72895 = sle64(max_res_72889, j_72890);
        bool y_72896 = i_p_m_t_s_leq_w_72893 && zzero_lte_i_72894;
        bool y_72897 = zzero_leq_i_p_m_t_s_72892 && y_72896;
        bool y_72898 = i_lte_j_72895 && y_72897;
        bool forwards_ok_72899 = zzero_lte_i_72894 && y_72898;
        bool ok_or_empty_72900 = empty_slice_64089 || forwards_ok_72899;
        bool index_certs_72901;
        
        if (!ok_or_empty_72900) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_72889, ":",
                          (long long) j_72890,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_72902;
        int64_t flat_tid_66652 = (int64_t) 0;
        int32_t num_tasks_73569;
        struct futhark_mc_task_76624 futhark_mc_task_76624;
        
        futhark_mc_task_76624.ctx = ctx;
        futhark_mc_task_76624.free_mem_69933 = mem_69933.mem;
        futhark_mc_task_76624.free_defunc_0_g_res_72868 = defunc_0_g_res_72868;
        futhark_mc_task_76624.free_max_res_72889 = max_res_72889;
        futhark_mc_task_76624.retval_defunc_2_reduce_res_72902 =
            &defunc_2_reduce_res_72902;
        
        struct scheduler_segop futhark_mc_task_76624_task;
        
        futhark_mc_task_76624_task.args = &futhark_mc_task_76624;
        futhark_mc_task_76624_task.top_level_fn = futhark_mc_segred_task_76625;
        futhark_mc_task_76624_task.name = "futhark_mc_segred_task_76625";
        futhark_mc_task_76624_task.iterations = min_res_64084;
        futhark_mc_task_76624_task.task_time =
            &ctx->futhark_mc_segred_task_76625_total_time;
        futhark_mc_task_76624_task.task_iter =
            &ctx->futhark_mc_segred_task_76625_total_iter;
        futhark_mc_task_76624_task.sched = STATIC;
        futhark_mc_task_76624_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76625_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76624_task);
        
        if (futhark_mc_segred_task_76625_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_72910;
        int64_t idx_72911;
        int64_t idx_72912;
        int64_t idx_72913;
        int64_t best_idx_73463;
        int64_t last_idx_73464;
        int64_t best_sum_73465;
        int64_t curr_sum_73466;
        
        best_idx_73463 = max_res_72889;
        last_idx_73464 = max_res_72889;
        best_sum_73465 = defunc_2_reduce_res_72902;
        curr_sum_73466 = defunc_2_reduce_res_72902;
        for (int64_t j_73462 = 0; j_73462 < min_res_64084; j_73462++) {
            int64_t new_idx_73467 = add64(max_res_72889, j_73462);
            int64_t x_73468 = add64(min_res_64084, new_idx_73467);
            bool cond_73469 = slt64(last_res_66873, x_73468);
            int64_t new_sum_73470;
            
            if (cond_73469) {
                new_sum_73470 = (int64_t) 9223372036854775807;
            } else {
                bool x_73471 = sle64((int64_t) 0, last_idx_73464);
                bool y_73472 = slt64(last_idx_73464, n_64064);
                bool bounds_check_73473 = x_73471 && y_73472;
                bool index_certs_73474;
                
                if (!bounds_check_73473) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_73464,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_73475 = ((int64_t *) mem_69933.mem)[last_idx_73464];
                int64_t binop_p_73476 = sub64(defunc_0_g_res_72868, y_73475);
                int64_t defunc_0_f_res_73477 = abs64(binop_p_73476);
                int64_t x_73478 = sub64(curr_sum_73466, defunc_0_f_res_73477);
                int64_t min_arg_73479 = add64(min_res_64084, last_idx_73464);
                int64_t min_res_73480 = smin64(i_64078, min_arg_73479);
                bool x_73481 = sle64((int64_t) 0, min_res_73480);
                bool y_73482 = slt64(min_res_73480, n_64064);
                bool bounds_check_73483 = x_73481 && y_73482;
                bool index_certs_73484;
                
                if (!bounds_check_73483) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_73480,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_73485 = ((int64_t *) mem_69933.mem)[min_res_73480];
                int64_t binop_p_73486 = sub64(defunc_0_g_res_72868, y_73485);
                int64_t defunc_0_f_res_73487 = abs64(binop_p_73486);
                int64_t new_sum_f_res_73488 = add64(x_73478,
                                                    defunc_0_f_res_73487);
                
                new_sum_73470 = new_sum_f_res_73488;
            }
            
            bool cond_73489 = sle64(new_sum_73470, best_sum_73465);
            int64_t loopres_73490;
            
            if (cond_73489) {
                loopres_73490 = new_idx_73467;
            } else {
                loopres_73490 = best_idx_73463;
            }
            
            int64_t loopres_73491;
            
            if (cond_73489) {
                loopres_73491 = new_sum_73470;
            } else {
                loopres_73491 = best_sum_73465;
            }
            
            int64_t best_idx_tmp_73578 = loopres_73490;
            int64_t last_idx_tmp_73579 = new_idx_73467;
            int64_t best_sum_tmp_73580 = loopres_73491;
            int64_t curr_sum_tmp_73581 = new_sum_73470;
            
            best_idx_73463 = best_idx_tmp_73578;
            last_idx_73464 = last_idx_tmp_73579;
            best_sum_73465 = best_sum_tmp_73580;
            curr_sum_73466 = curr_sum_tmp_73581;
        }
        idx_72910 = best_idx_73463;
        idx_72911 = last_idx_73464;
        idx_72912 = best_sum_73465;
        idx_72913 = curr_sum_73466;
        
        int64_t min_res_72944 = smin64(min_arg_66885, idx_72910);
        int64_t x_72945 = add64(min_res_64084, min_res_72944);
        int64_t r_72946 = sub64(x_72945, (int64_t) 1);
        bool x_72947 = sle64((int64_t) 0, r_72946);
        bool y_72948 = slt64(r_72946, n_64064);
        bool bounds_check_72949 = x_72947 && y_72948;
        bool index_certs_72950;
        
        if (!bounds_check_72949) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72946,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_72951 = ((int64_t *) mem_69924.mem)[r_72946];
        int64_t abs_arg_72952 = sub64(x_72951, min_res_72867);
        int64_t abs_res_72953 = abs64(abs_arg_72952);
        bool x_72954 = sle64((int64_t) 0, min_res_72944);
        bool y_72955 = slt64(min_res_72944, n_64064);
        bool bounds_check_72956 = x_72954 && y_72955;
        bool index_certs_72957;
        
        if (!bounds_check_72956) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72944,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_72958 = ((int64_t *) mem_69924.mem)[min_res_72944];
        int64_t abs_arg_72959 = sub64(x_72958, min_res_72867);
        int64_t abs_res_72960 = abs64(abs_arg_72959);
        int64_t max_res_72961 = smax64(abs_res_72953, abs_res_72960);
        float defunc_0_f_res_72962 = sitofp_i64_f32(max_res_72961);
        float defunc_1_f_res_72963 = max_res_66889 + defunc_0_f_res_72962;
        float defunc_0_f_res_72964 = sitofp_i64_f32(min_res_72867);
        float defunc_2_reduce_res_72965;
        float defunc_2_reduce_res_72966;
        float defunc_2_reduce_res_72967;
        float defunc_2_reduce_res_72968;
        float defunc_2_reduce_res_72969;
        int64_t flat_tid_66654 = (int64_t) 0;
        int32_t num_tasks_73582;
        struct futhark_mc_task_76629 futhark_mc_task_76629;
        
        futhark_mc_task_76629.ctx = ctx;
        futhark_mc_task_76629.free_last_res_66873 = last_res_66873;
        futhark_mc_task_76629.free_mem_69927 = mem_69927.mem;
        futhark_mc_task_76629.free_mem_69936 = mem_69936.mem;
        futhark_mc_task_76629.free_min_res_72944 = min_res_72944;
        futhark_mc_task_76629.free_defunc_1_f_res_72963 = defunc_1_f_res_72963;
        futhark_mc_task_76629.free_defunc_0_f_res_72964 = defunc_0_f_res_72964;
        futhark_mc_task_76629.retval_defunc_2_reduce_res_72965 =
            &defunc_2_reduce_res_72965;
        futhark_mc_task_76629.retval_defunc_2_reduce_res_72966 =
            &defunc_2_reduce_res_72966;
        futhark_mc_task_76629.retval_defunc_2_reduce_res_72967 =
            &defunc_2_reduce_res_72967;
        futhark_mc_task_76629.retval_defunc_2_reduce_res_72968 =
            &defunc_2_reduce_res_72968;
        futhark_mc_task_76629.retval_defunc_2_reduce_res_72969 =
            &defunc_2_reduce_res_72969;
        
        struct scheduler_segop futhark_mc_task_76629_task;
        
        futhark_mc_task_76629_task.args = &futhark_mc_task_76629;
        futhark_mc_task_76629_task.top_level_fn = futhark_mc_segred_task_76630;
        futhark_mc_task_76629_task.name = "futhark_mc_segred_task_76630";
        futhark_mc_task_76629_task.iterations = q_64066;
        futhark_mc_task_76629_task.task_time =
            &ctx->futhark_mc_segred_task_76630_total_time;
        futhark_mc_task_76629_task.task_iter =
            &ctx->futhark_mc_segred_task_76630_total_iter;
        futhark_mc_task_76629_task.sched = STATIC;
        futhark_mc_task_76629_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76630_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76629_task);
        
        if (futhark_mc_segred_task_76630_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_73004 = defunc_2_reduce_res_72967 * defunc_2_reduce_res_72969;
        float y_73005 = defunc_2_reduce_res_72968 * defunc_2_reduce_res_72968;
        float a12_73006 = x_73004 - y_73005;
        float x_73007 = defunc_2_reduce_res_72967 * defunc_2_reduce_res_72968;
        float y_73008 = defunc_2_reduce_res_72966 * defunc_2_reduce_res_72969;
        float b12_73009 = x_73007 - y_73008;
        float x_73010 = defunc_2_reduce_res_72966 * defunc_2_reduce_res_72968;
        float y_73011 = defunc_2_reduce_res_72967 * defunc_2_reduce_res_72967;
        float c12_73012 = x_73010 - y_73011;
        float x_73013 = defunc_2_reduce_res_72965 * defunc_2_reduce_res_72969;
        float b2_73014 = x_73013 - y_73011;
        float x_73015 = defunc_2_reduce_res_72966 * defunc_2_reduce_res_72967;
        float y_73016 = defunc_2_reduce_res_72965 * defunc_2_reduce_res_72968;
        float c2_73017 = x_73015 - y_73016;
        float x_73018 = defunc_2_reduce_res_72965 * a12_73006;
        float y_73019 = defunc_2_reduce_res_72966 * b12_73009;
        float x_73020 = x_73018 + y_73019;
        float y_73021 = defunc_2_reduce_res_72967 * c12_73012;
        float y_73022 = x_73020 + y_73021;
        float det_73023 = 1.0F / y_73022;
        float a12_73024 = a12_73006 * det_73023;
        float b12_73025 = b12_73009 * det_73023;
        float c12_73026 = c12_73012 * det_73023;
        float b2_73027 = b2_73014 * det_73023;
        float c2_73028 = c2_73017 * det_73023;
        float defunc_2_reduce_res_73029;
        float defunc_2_reduce_res_73030;
        int64_t flat_tid_66656 = (int64_t) 0;
        int32_t num_tasks_73615;
        struct futhark_mc_task_76638 futhark_mc_task_76638;
        
        futhark_mc_task_76638.ctx = ctx;
        futhark_mc_task_76638.free_last_res_66873 = last_res_66873;
        futhark_mc_task_76638.free_mem_69921 = mem_69921.mem;
        futhark_mc_task_76638.free_mem_69927 = mem_69927.mem;
        futhark_mc_task_76638.free_mem_69936 = mem_69936.mem;
        futhark_mc_task_76638.free_min_res_72944 = min_res_72944;
        futhark_mc_task_76638.free_defunc_1_f_res_72963 = defunc_1_f_res_72963;
        futhark_mc_task_76638.free_defunc_0_f_res_72964 = defunc_0_f_res_72964;
        futhark_mc_task_76638.free_a12_73024 = a12_73024;
        futhark_mc_task_76638.free_b12_73025 = b12_73025;
        futhark_mc_task_76638.free_c12_73026 = c12_73026;
        futhark_mc_task_76638.free_b2_73027 = b2_73027;
        futhark_mc_task_76638.free_c2_73028 = c2_73028;
        futhark_mc_task_76638.retval_defunc_2_reduce_res_73029 =
            &defunc_2_reduce_res_73029;
        futhark_mc_task_76638.retval_defunc_2_reduce_res_73030 =
            &defunc_2_reduce_res_73030;
        
        struct scheduler_segop futhark_mc_task_76638_task;
        
        futhark_mc_task_76638_task.args = &futhark_mc_task_76638;
        futhark_mc_task_76638_task.top_level_fn = futhark_mc_segred_task_76639;
        futhark_mc_task_76638_task.name = "futhark_mc_segred_task_76639";
        futhark_mc_task_76638_task.iterations = q_64066;
        futhark_mc_task_76638_task.task_time =
            &ctx->futhark_mc_segred_task_76639_total_time;
        futhark_mc_task_76638_task.task_iter =
            &ctx->futhark_mc_segred_task_76639_total_iter;
        futhark_mc_task_76638_task.sched = STATIC;
        futhark_mc_task_76638_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76639_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76638_task);
        
        if (futhark_mc_segred_task_76639_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69939.mem)[gtid_66651] = defunc_2_reduce_res_73029;
        ((float *) mem_69942.mem)[gtid_66651] = defunc_2_reduce_res_73030;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76623_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76623_end -
                 futhark_mc_segmap_parloop_76623_start;
        
        ctx->futhark_mc_segmap_parloop_76623_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76623_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76623_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76621(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66650 = tid;
    int num_tasks_73299 = info.nsubtasks;
    struct futhark_mc_task_76617 *futhark_mc_task_76617 =
                                 (struct futhark_mc_task_76617 *) args;
    struct futhark_context *ctx = futhark_mc_task_76617->ctx;
    uint64_t futhark_mc_segmap_nested_task_76621_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76621_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76617->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76617->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76617->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76617->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76617->free_i_64078;
    bool x_64079 = futhark_mc_task_76617->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76617->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76617->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76617->free_m_64090;
    int64_t last_res_66873 = futhark_mc_task_76617->free_last_res_66873;
    int64_t min_arg_66885 = futhark_mc_task_76617->free_min_arg_66885;
    float max_res_66889 = futhark_mc_task_76617->free_max_res_66889;
    struct memblock mem_69921 = {.desc ="mem_69921", .mem =
                                 futhark_mc_task_76617->free_mem_69921, .size =
                                 0, .references =NULL};
    struct memblock mem_69924 = {.desc ="mem_69924", .mem =
                                 futhark_mc_task_76617->free_mem_69924, .size =
                                 0, .references =NULL};
    struct memblock mem_69927 = {.desc ="mem_69927", .mem =
                                 futhark_mc_task_76617->free_mem_69927, .size =
                                 0, .references =NULL};
    struct memblock mem_69930 = {.desc ="mem_69930", .mem =
                                 futhark_mc_task_76617->free_mem_69930, .size =
                                 0, .references =NULL};
    struct memblock mem_69933 = {.desc ="mem_69933", .mem =
                                 futhark_mc_task_76617->free_mem_69933, .size =
                                 0, .references =NULL};
    struct memblock mem_69936 = {.desc ="mem_69936", .mem =
                                 futhark_mc_task_76617->free_mem_69936, .size =
                                 0, .references =NULL};
    struct memblock mem_69939 = {.desc ="mem_69939", .mem =
                                 futhark_mc_task_76617->free_mem_69939, .size =
                                 0, .references =NULL};
    struct memblock mem_69942 = {.desc ="mem_69942", .mem =
                                 futhark_mc_task_76617->free_mem_69942, .size =
                                 0, .references =NULL};
    int64_t iter_73438;
    struct futhark_mc_segmap_parloop_struct_76622
    futhark_mc_segmap_parloop_struct_76622;
    
    futhark_mc_segmap_parloop_struct_76622.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76622.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76622.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76622.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76622.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76622.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76622.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76622.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76622.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76622.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76622.free_last_res_66873 = last_res_66873;
    futhark_mc_segmap_parloop_struct_76622.free_min_arg_66885 = min_arg_66885;
    futhark_mc_segmap_parloop_struct_76622.free_max_res_66889 = max_res_66889;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69921 = mem_69921.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69924 = mem_69924.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69927 = mem_69927.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69930 = mem_69930.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69933 = mem_69933.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69936 = mem_69936.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69939 = mem_69939.mem;
    futhark_mc_segmap_parloop_struct_76622.free_mem_69942 = mem_69942.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76623_task;
    
    futhark_mc_segmap_parloop_76623_task.name =
        "futhark_mc_segmap_parloop_76623";
    futhark_mc_segmap_parloop_76623_task.fn = futhark_mc_segmap_parloop_76623;
    futhark_mc_segmap_parloop_76623_task.args =
        &futhark_mc_segmap_parloop_struct_76622;
    futhark_mc_segmap_parloop_76623_task.iterations = iterations;
    futhark_mc_segmap_parloop_76623_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76623_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76623_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76623_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76623_task);
    
    if (futhark_mc_segmap_parloop_76623_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76623_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76623_total_end -
                 futhark_mc_segmap_parloop_76623_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76623_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76623_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76623_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76621_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76621_end -
                 futhark_mc_segmap_nested_task_76621_start;
        
        ctx->futhark_mc_segmap_nested_task_76621_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76621_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76621_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76588(void *args, int64_t start,
                                           int64_t end, int flat_tid_66638,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76587
    *futhark_mc_segmap_parloop_struct_76587 =
    (struct futhark_mc_segmap_parloop_struct_76587 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76587->ctx;
    uint64_t futhark_mc_segmap_parloop_76588_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76588_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76587->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76587->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76587->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76587->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76587->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76587->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76587->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76587->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76587->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76587->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76587->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76587->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69916 =
            futhark_mc_segmap_parloop_struct_76587->free_bytes_69916;
    int64_t bytes_69919 =
            futhark_mc_segmap_parloop_struct_76587->free_bytes_69919;
    int64_t bytes_69934 =
            futhark_mc_segmap_parloop_struct_76587->free_bytes_69934;
    int64_t bytes_69937 =
            futhark_mc_segmap_parloop_struct_76587->free_bytes_69937;
    struct memblock mem_70081 = {.desc ="mem_70081", .mem =
                                 futhark_mc_segmap_parloop_struct_76587->free_mem_70081,
                                 .size =0, .references =NULL};
    struct memblock mem_70085 = {.desc ="mem_70085", .mem =
                                 futhark_mc_segmap_parloop_struct_76587->free_mem_70085,
                                 .size =0, .references =NULL};
    size_t mem_69918_cached_sizze_76589 = 0;
    char *mem_69918 = NULL;
    size_t mem_69921_cached_sizze_76590 = 0;
    char *mem_69921 = NULL;
    size_t mem_69924_cached_sizze_76591 = 0;
    char *mem_69924 = NULL;
    size_t mem_69927_cached_sizze_76592 = 0;
    char *mem_69927 = NULL;
    size_t mem_69930_cached_sizze_76593 = 0;
    char *mem_69930 = NULL;
    size_t mem_69933_cached_sizze_76594 = 0;
    char *mem_69933 = NULL;
    size_t mem_69936_cached_sizze_76595 = 0;
    char *mem_69936 = NULL;
    size_t mem_69939_cached_sizze_76596 = 0;
    char *mem_69939 = NULL;
    size_t mem_69942_cached_sizze_76597 = 0;
    char *mem_69942 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72845 = start;
    
    if (mem_69918_cached_sizze_76589 < (size_t) bytes_69916) {
        mem_69918 = realloc(mem_69918, bytes_69916);
        mem_69918_cached_sizze_76589 = bytes_69916;
    }
    if (mem_69921_cached_sizze_76590 < (size_t) bytes_69919) {
        mem_69921 = realloc(mem_69921, bytes_69919);
        mem_69921_cached_sizze_76590 = bytes_69919;
    }
    if (mem_69924_cached_sizze_76591 < (size_t) bytes_69916) {
        mem_69924 = realloc(mem_69924, bytes_69916);
        mem_69924_cached_sizze_76591 = bytes_69916;
    }
    if (mem_69927_cached_sizze_76592 < (size_t) bytes_69919) {
        mem_69927 = realloc(mem_69927, bytes_69919);
        mem_69927_cached_sizze_76592 = bytes_69919;
    }
    if (mem_69930_cached_sizze_76593 < (size_t) bytes_69916) {
        mem_69930 = realloc(mem_69930, bytes_69916);
        mem_69930_cached_sizze_76593 = bytes_69916;
    }
    if (mem_69933_cached_sizze_76594 < (size_t) bytes_69916) {
        mem_69933 = realloc(mem_69933, bytes_69916);
        mem_69933_cached_sizze_76594 = bytes_69916;
    }
    if (mem_69936_cached_sizze_76595 < (size_t) bytes_69934) {
        mem_69936 = realloc(mem_69936, bytes_69934);
        mem_69936_cached_sizze_76595 = bytes_69934;
    }
    if (mem_69939_cached_sizze_76596 < (size_t) bytes_69937) {
        mem_69939 = realloc(mem_69939, bytes_69937);
        mem_69939_cached_sizze_76596 = bytes_69937;
    }
    if (mem_69942_cached_sizze_76597 < (size_t) bytes_69937) {
        mem_69942 = realloc(mem_69942, bytes_69937);
        mem_69942_cached_sizze_76597 = bytes_69937;
    }
    for (; iter_72845 < end; iter_72845++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73267 = m_64063;
        int64_t gtid_66639 = iter_72845;
        int64_t remnant_73268 = iter_72845 - gtid_66639;
        int64_t flat_tid_66640 = (int64_t) 0;
        int32_t num_tasks_73269;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76598 futhark_mc_task_76598;
        
        futhark_mc_task_76598.ctx = ctx;
        futhark_mc_task_76598.free_n_64064 = n_64064;
        futhark_mc_task_76598.free_gtid_66639 = gtid_66639;
        futhark_mc_task_76598.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76598.free_mem_69918 = mem_69918;
        
        struct scheduler_segop futhark_mc_task_76598_task;
        
        futhark_mc_task_76598_task.args = &futhark_mc_task_76598;
        futhark_mc_task_76598_task.top_level_fn = futhark_mc_segscan_task_76599;
        futhark_mc_task_76598_task.name = "futhark_mc_segscan_task_76599";
        futhark_mc_task_76598_task.iterations = n_64064;
        futhark_mc_task_76598_task.task_time =
            &ctx->futhark_mc_segscan_task_76599_total_time;
        futhark_mc_task_76598_task.task_iter =
            &ctx->futhark_mc_segscan_task_76599_total_iter;
        futhark_mc_task_76598_task.sched = STATIC;
        futhark_mc_task_76598_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76599_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76598_task);
        
        if (futhark_mc_segscan_task_76599_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66873 = ((int64_t *) mem_69918)[i_64078];
        
        for (int64_t i_73283 = 0; i_73283 < n_64064; i_73283++) {
            ((float *) mem_69921)[i_73283] = 0.0F;
        }
        for (int64_t i_73284 = 0; i_73284 < n_64064; i_73284++) {
            ((int64_t *) mem_69924)[i_73284] = (int64_t) -1;
        }
        
        int64_t flat_tid_66642 = (int64_t) 0;
        int32_t num_tasks_73285;
        struct futhark_mc_task_76605 futhark_mc_task_76605;
        
        futhark_mc_task_76605.ctx = ctx;
        futhark_mc_task_76605.free_n_64064 = n_64064;
        futhark_mc_task_76605.free_gtid_66639 = gtid_66639;
        futhark_mc_task_76605.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76605.free_mem_69918 = mem_69918;
        futhark_mc_task_76605.free_mem_69921 = mem_69921;
        futhark_mc_task_76605.free_mem_69924 = mem_69924;
        
        struct scheduler_segop futhark_mc_task_76605_task;
        
        futhark_mc_task_76605_task.args = &futhark_mc_task_76605;
        futhark_mc_task_76605_task.top_level_fn = futhark_mc_segmap_task_76606;
        futhark_mc_task_76605_task.name = "futhark_mc_segmap_task_76606";
        futhark_mc_task_76605_task.iterations = n_64064;
        futhark_mc_task_76605_task.task_time =
            &ctx->futhark_mc_segmap_task_76606_total_time;
        futhark_mc_task_76605_task.task_iter =
            &ctx->futhark_mc_segmap_task_76606_total_iter;
        futhark_mc_task_76605_task.sched = STATIC;
        futhark_mc_task_76605_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76606_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76605_task);
        
        if (futhark_mc_segmap_task_76606_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66885 = sub64(last_res_66873, min_res_64084);
        float i64_res_66886 = sitofp_i64_f32(last_res_66873);
        float x_66887 = i64_res_64091 - i64_res_66886;
        float max_arg_66888 = x_66887 / 2.0F;
        float max_res_66889 = fmax32(0.0F, max_arg_66888);
        int64_t flat_tid_66644 = (int64_t) 0;
        int32_t num_tasks_73291;
        struct futhark_mc_task_76609 futhark_mc_task_76609;
        
        futhark_mc_task_76609.ctx = ctx;
        futhark_mc_task_76609.free_n_64064 = n_64064;
        futhark_mc_task_76609.free_mem_69924 = mem_69924;
        futhark_mc_task_76609.free_mem_69927 = mem_69927;
        futhark_mc_task_76609.free_mem_69930 = mem_69930;
        futhark_mc_task_76609.free_mem_69933 = mem_69933;
        
        struct scheduler_segop futhark_mc_task_76609_task;
        
        futhark_mc_task_76609_task.args = &futhark_mc_task_76609;
        futhark_mc_task_76609_task.top_level_fn = futhark_mc_segmap_task_76610;
        futhark_mc_task_76609_task.name = "futhark_mc_segmap_task_76610";
        futhark_mc_task_76609_task.iterations = n_64064;
        futhark_mc_task_76609_task.task_time =
            &ctx->futhark_mc_segmap_task_76610_total_time;
        futhark_mc_task_76609_task.task_iter =
            &ctx->futhark_mc_segmap_task_76610_total_iter;
        futhark_mc_task_76609_task.sched = STATIC;
        futhark_mc_task_76609_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76610_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76609_task);
        
        if (futhark_mc_segmap_task_76610_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66646 = (int64_t) 0;
        int32_t num_tasks_73295;
        struct futhark_mc_task_76613 futhark_mc_task_76613;
        
        futhark_mc_task_76613.ctx = ctx;
        futhark_mc_task_76613.free_q_64066 = q_64066;
        futhark_mc_task_76613.free_last_res_66873 = last_res_66873;
        futhark_mc_task_76613.free_mem_69936 = mem_69936;
        
        struct scheduler_segop futhark_mc_task_76613_task;
        
        futhark_mc_task_76613_task.args = &futhark_mc_task_76613;
        futhark_mc_task_76613_task.top_level_fn = futhark_mc_segmap_task_76614;
        futhark_mc_task_76613_task.name = "futhark_mc_segmap_task_76614";
        futhark_mc_task_76613_task.iterations = q_64066;
        futhark_mc_task_76613_task.task_time =
            &ctx->futhark_mc_segmap_task_76614_total_time;
        futhark_mc_task_76613_task.task_iter =
            &ctx->futhark_mc_segmap_task_76614_total_iter;
        futhark_mc_task_76613_task.sched = STATIC;
        futhark_mc_task_76613_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76614_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76613_task);
        
        if (futhark_mc_segmap_task_76614_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66648 = (int64_t) 0;
        int32_t num_tasks_73299;
        int64_t flat_tid_66650 = (int64_t) 0;
        struct futhark_mc_task_76617 futhark_mc_task_76617;
        
        futhark_mc_task_76617.ctx = ctx;
        futhark_mc_task_76617.free_n_64064 = n_64064;
        futhark_mc_task_76617.free_q_64066 = q_64066;
        futhark_mc_task_76617.free_jump_64068 = jump_64068;
        futhark_mc_task_76617.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76617.free_i_64078 = i_64078;
        futhark_mc_task_76617.free_x_64079 = x_64079;
        futhark_mc_task_76617.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76617.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76617.free_m_64090 = m_64090;
        futhark_mc_task_76617.free_last_res_66873 = last_res_66873;
        futhark_mc_task_76617.free_min_arg_66885 = min_arg_66885;
        futhark_mc_task_76617.free_max_res_66889 = max_res_66889;
        futhark_mc_task_76617.free_mem_69921 = mem_69921;
        futhark_mc_task_76617.free_mem_69924 = mem_69924;
        futhark_mc_task_76617.free_mem_69927 = mem_69927;
        futhark_mc_task_76617.free_mem_69930 = mem_69930;
        futhark_mc_task_76617.free_mem_69933 = mem_69933;
        futhark_mc_task_76617.free_mem_69936 = mem_69936;
        futhark_mc_task_76617.free_mem_69939 = mem_69939;
        futhark_mc_task_76617.free_mem_69942 = mem_69942;
        
        struct scheduler_segop futhark_mc_task_76617_task;
        
        futhark_mc_task_76617_task.args = &futhark_mc_task_76617;
        futhark_mc_task_76617_task.top_level_fn = futhark_mc_segmap_task_76618;
        futhark_mc_task_76617_task.name = "futhark_mc_segmap_task_76618";
        futhark_mc_task_76617_task.iterations = n_m_64072;
        futhark_mc_task_76617_task.task_time =
            &ctx->futhark_mc_segmap_task_76618_total_time;
        futhark_mc_task_76617_task.task_iter =
            &ctx->futhark_mc_segmap_task_76618_total_iter;
        futhark_mc_task_76617_task.sched = DYNAMIC;
        futhark_mc_task_76617_task.nested_fn =
            futhark_mc_segmap_nested_task_76621;
        
        int futhark_mc_segmap_task_76618_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76617_task);
        
        if (futhark_mc_segmap_task_76618_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70081.mem + gtid_66639 * n_m_64072 * (int64_t) 4,
                mem_69939 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70085.mem + gtid_66639 * n_m_64072 * (int64_t) 4,
                mem_69942 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69918);
    free(mem_69921);
    free(mem_69924);
    free(mem_69927);
    free(mem_69930);
    free(mem_69933);
    free(mem_69936);
    free(mem_69939);
    free(mem_69942);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76588_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76588_end -
                 futhark_mc_segmap_parloop_76588_start;
        
        ctx->futhark_mc_segmap_parloop_76588_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76588_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76588_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76586(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66638 = tid;
    int num_tasks_72573 = info.nsubtasks;
    struct futhark_mc_task_76573 *futhark_mc_task_76573 =
                                 (struct futhark_mc_task_76573 *) args;
    struct futhark_context *ctx = futhark_mc_task_76573->ctx;
    uint64_t futhark_mc_segmap_nested_task_76586_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76586_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76573->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76573->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76573->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76573->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76573->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76573->free_i_64078;
    bool x_64079 = futhark_mc_task_76573->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76573->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76573->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76573->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76573->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76573->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_69916 = futhark_mc_task_76573->free_bytes_69916;
    int64_t bytes_69919 = futhark_mc_task_76573->free_bytes_69919;
    int64_t bytes_69934 = futhark_mc_task_76573->free_bytes_69934;
    int64_t bytes_69937 = futhark_mc_task_76573->free_bytes_69937;
    struct memblock mem_70081 = {.desc ="mem_70081", .mem =
                                 futhark_mc_task_76573->free_mem_70081, .size =
                                 0, .references =NULL};
    struct memblock mem_70085 = {.desc ="mem_70085", .mem =
                                 futhark_mc_task_76573->free_mem_70085, .size =
                                 0, .references =NULL};
    int64_t iter_72845;
    struct futhark_mc_segmap_parloop_struct_76587
    futhark_mc_segmap_parloop_struct_76587;
    
    futhark_mc_segmap_parloop_struct_76587.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76587.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76587.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76587.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76587.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76587.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76587.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76587.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76587.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76587.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76587.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76587.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76587.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76587.free_bytes_69916 = bytes_69916;
    futhark_mc_segmap_parloop_struct_76587.free_bytes_69919 = bytes_69919;
    futhark_mc_segmap_parloop_struct_76587.free_bytes_69934 = bytes_69934;
    futhark_mc_segmap_parloop_struct_76587.free_bytes_69937 = bytes_69937;
    futhark_mc_segmap_parloop_struct_76587.free_mem_70081 = mem_70081.mem;
    futhark_mc_segmap_parloop_struct_76587.free_mem_70085 = mem_70085.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76588_task;
    
    futhark_mc_segmap_parloop_76588_task.name =
        "futhark_mc_segmap_parloop_76588";
    futhark_mc_segmap_parloop_76588_task.fn = futhark_mc_segmap_parloop_76588;
    futhark_mc_segmap_parloop_76588_task.args =
        &futhark_mc_segmap_parloop_struct_76587;
    futhark_mc_segmap_parloop_76588_task.iterations = iterations;
    futhark_mc_segmap_parloop_76588_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76588_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76588_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76588_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76588_task);
    
    if (futhark_mc_segmap_parloop_76588_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76588_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76588_total_end -
                 futhark_mc_segmap_parloop_76588_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76588_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76588_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76588_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76586_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76586_end -
                 futhark_mc_segmap_nested_task_76586_start;
        
        ctx->futhark_mc_segmap_nested_task_76586_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76586_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76586_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76644 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70094;
    int64_t free_bytes_70097;
    int64_t free_bytes_70112;
    int64_t free_bytes_70133;
    char *free_mem_70274;
};
struct futhark_mc_segmap_parloop_struct_76646 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70094;
    int64_t free_bytes_70097;
    int64_t free_bytes_70112;
    int64_t free_bytes_70133;
    char *free_mem_70274;
};
static int futhark_mc_segmap_parloop_76647(void *args, int64_t start,
                                           int64_t end, int flat_tid_67316,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76646
    *futhark_mc_segmap_parloop_struct_76646 =
    (struct futhark_mc_segmap_parloop_struct_76646 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76646->ctx;
    uint64_t futhark_mc_segmap_parloop_76647_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76647_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76646->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76646->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76646->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76646->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76646->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76646->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76646->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76646->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76646->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76646->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76646->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76646->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70094 =
            futhark_mc_segmap_parloop_struct_76646->free_bytes_70094;
    int64_t bytes_70097 =
            futhark_mc_segmap_parloop_struct_76646->free_bytes_70097;
    int64_t bytes_70112 =
            futhark_mc_segmap_parloop_struct_76646->free_bytes_70112;
    int64_t bytes_70133 =
            futhark_mc_segmap_parloop_struct_76646->free_bytes_70133;
    struct memblock mem_70274 = {.desc ="mem_70274", .mem =
                                 futhark_mc_segmap_parloop_struct_76646->free_mem_70274,
                                 .size =0, .references =NULL};
    size_t mem_70138_cached_sizze_76648 = 0;
    char *mem_70138 = NULL;
    size_t mem_70153_cached_sizze_76649 = 0;
    char *mem_70153 = NULL;
    size_t mem_70156_cached_sizze_76650 = 0;
    char *mem_70156 = NULL;
    size_t mem_70183_cached_sizze_76651 = 0;
    char *mem_70183 = NULL;
    size_t mem_70186_cached_sizze_76652 = 0;
    char *mem_70186 = NULL;
    size_t mem_70189_cached_sizze_76653 = 0;
    char *mem_70189 = NULL;
    size_t mem_70228_cached_sizze_76654 = 0;
    char *mem_70228 = NULL;
    size_t mem_70243_cached_sizze_76655 = 0;
    char *mem_70243 = NULL;
    size_t mem_70253_cached_sizze_76656 = 0;
    char *mem_70253 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73633 = start;
    
    if (mem_70138_cached_sizze_76648 < (size_t) bytes_70094) {
        mem_70138 = realloc(mem_70138, bytes_70094);
        mem_70138_cached_sizze_76648 = bytes_70094;
    }
    if (mem_70153_cached_sizze_76649 < (size_t) bytes_70097) {
        mem_70153 = realloc(mem_70153, bytes_70097);
        mem_70153_cached_sizze_76649 = bytes_70097;
    }
    if (mem_70156_cached_sizze_76650 < (size_t) bytes_70094) {
        mem_70156 = realloc(mem_70156, bytes_70094);
        mem_70156_cached_sizze_76650 = bytes_70094;
    }
    if (mem_70183_cached_sizze_76651 < (size_t) bytes_70097) {
        mem_70183 = realloc(mem_70183, bytes_70097);
        mem_70183_cached_sizze_76651 = bytes_70097;
    }
    if (mem_70186_cached_sizze_76652 < (size_t) bytes_70094) {
        mem_70186 = realloc(mem_70186, bytes_70094);
        mem_70186_cached_sizze_76652 = bytes_70094;
    }
    if (mem_70189_cached_sizze_76653 < (size_t) bytes_70094) {
        mem_70189 = realloc(mem_70189, bytes_70094);
        mem_70189_cached_sizze_76653 = bytes_70094;
    }
    if (mem_70228_cached_sizze_76654 < (size_t) bytes_70112) {
        mem_70228 = realloc(mem_70228, bytes_70112);
        mem_70228_cached_sizze_76654 = bytes_70112;
    }
    if (mem_70243_cached_sizze_76655 < (size_t) bytes_70133) {
        mem_70243 = realloc(mem_70243, bytes_70133);
        mem_70243_cached_sizze_76655 = bytes_70133;
    }
    if (mem_70253_cached_sizze_76656 < (size_t) bytes_70112) {
        mem_70253 = realloc(mem_70253, bytes_70112);
        mem_70253_cached_sizze_76656 = bytes_70112;
    }
    for (; iter_73633 < end; iter_73633++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73809 = m_64063;
        int64_t gtid_67317 = iter_73633;
        int64_t remnant_73810 = iter_73633 - gtid_67317;
        int64_t discard_69295;
        int64_t scanacc_73635 = (int64_t) 0;
        
        for (int64_t i_73634 = 0; i_73634 < n_64064; i_73634++) {
            float x_73637 = ((float *) Y_mem_69593.mem)[gtid_67317 * n_64064 +
                                                        i_73634];
            bool isnan_res_73638;
            
            isnan_res_73638 = futrts_isnan32(x_73637);
            
            bool defunc_0_p_res_73639 = !isnan_res_73638;
            int64_t defunc_0_f_res_73640 = btoi_bool_i64(defunc_0_p_res_73639);
            int64_t defunc_1_op_res_73641 = add64(defunc_0_f_res_73640,
                                                  scanacc_73635);
            
            ((int64_t *) mem_70138)[i_73634] = defunc_1_op_res_73641;
            
            int64_t scanacc_tmp_73811 = defunc_1_op_res_73641;
            
            scanacc_73635 = scanacc_tmp_73811;
        }
        discard_69295 = scanacc_73635;
        
        int64_t last_res_64807 = ((int64_t *) mem_70138)[i_64078];
        
        for (int64_t i_73813 = 0; i_73813 < n_64064; i_73813++) {
            ((float *) mem_70153)[i_73813] = 0.0F;
        }
        for (int64_t i_73814 = 0; i_73814 < n_64064; i_73814++) {
            ((int64_t *) mem_70156)[i_73814] = (int64_t) -1;
        }
        for (int64_t write_iter_73643 = 0; write_iter_73643 < n_64064;
             write_iter_73643++) {
            float write_iv_73646 = ((float *) Y_mem_69593.mem)[gtid_67317 *
                                                               n_64064 +
                                                               write_iter_73643];
            bool isnan_res_73647;
            
            isnan_res_73647 = futrts_isnan32(write_iv_73646);
            
            bool defunc_0_p_res_73648 = !isnan_res_73647;
            int64_t defunc_1_f_res_73649;
            
            if (defunc_0_p_res_73648) {
                int64_t write_iv_73650 =
                        ((int64_t *) mem_70138)[write_iter_73643];
                int64_t defunc_1_f_res_t_res_73651 = sub64(write_iv_73650,
                                                           (int64_t) 1);
                
                defunc_1_f_res_73649 = defunc_1_f_res_t_res_73651;
            } else {
                defunc_1_f_res_73649 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_73649) &&
                slt64(defunc_1_f_res_73649, n_64064)) {
                ((int64_t *) mem_70156)[defunc_1_f_res_73649] =
                    write_iter_73643;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_73649) &&
                slt64(defunc_1_f_res_73649, n_64064)) {
                memmove(mem_70153 + defunc_1_f_res_73649 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_67317 * n_64064 +
                                           write_iter_73643) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64825 = sub64(last_res_64807, min_res_64084);
        float i64_res_64826 = sitofp_i64_f32(last_res_64807);
        float x_64827 = i64_res_64091 - i64_res_64826;
        float max_arg_64828 = x_64827 / 2.0F;
        float max_res_64829 = fmax32(0.0F, max_arg_64828);
        
        for (int64_t i_73655 = 0; i_73655 < n_64064; i_73655++) {
            int64_t x_73659 = ((int64_t *) mem_70156)[i_73655];
            int64_t defunc_0_f_res_73660 = add64((int64_t) 1, x_73659);
            bool cond_73661 = slt64(defunc_0_f_res_73660, (int64_t) 0);
            int64_t defunc_0_f_res_73662;
            
            if (cond_73661) {
                defunc_0_f_res_73662 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_73662 = defunc_0_f_res_73660;
            }
            
            float defunc_0_f_res_73663 = sitofp_i64_f32(x_73659);
            
            ((float *) mem_70183)[i_73655] = defunc_0_f_res_73663;
            ((int64_t *) mem_70186)[i_73655] = defunc_0_f_res_73662;
            ((int64_t *) mem_70189)[i_73655] = defunc_0_f_res_73660;
        }
        for (int64_t i_73667 = 0; i_73667 < q_64066; i_73667++) {
            bool cond_73669 = sle64(last_res_64807, i_73667);
            float defunc_0_f_res_73670;
            
            if (cond_73669) {
                defunc_0_f_res_73670 = 0.0F;
            } else {
                defunc_0_f_res_73670 = 1.0F;
            }
            ((float *) mem_70228)[i_73667] = defunc_0_f_res_73670;
        }
        for (int64_t i_73672 = 0; i_73672 < n_m_64072; i_73672++) {
            int64_t min_arg_73674 = mul64(jump_64068, i_73672);
            int64_t min_res_73675 = smin64(i_64078, min_arg_73674);
            int64_t defunc_0_g_res_73676 = add64((int64_t) 1, min_res_73675);
            bool nearest_idx_73677;
            int64_t nearest_idx_73678;
            int64_t nearest_idx_73679;
            bool loop_while_73680;
            int64_t low_73681;
            int64_t high_73682;
            
            loop_while_73680 = x_64079;
            low_73681 = (int64_t) 0;
            high_73682 = i_64078;
            while (loop_while_73680) {
                int64_t x_73683 = add64(low_73681, high_73682);
                int64_t mid_73684 = sdiv64(x_73683, (int64_t) 2);
                bool x_73685 = sle64((int64_t) 0, mid_73684);
                bool y_73686 = slt64(mid_73684, n_64064);
                bool bounds_check_73687 = x_73685 && y_73686;
                bool index_certs_73688;
                
                if (!bounds_check_73687) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_73684,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_73689 = ((int64_t *) mem_70186)[mid_73684];
                bool cond_73690 = sle64(defunc_0_g_res_73676, x_73689);
                int64_t loopres_73691;
                int64_t loopres_73692;
                
                if (cond_73690) {
                    int64_t loopres_t_res_73693 = sub64(mid_73684, (int64_t) 1);
                    
                    loopres_73691 = low_73681;
                    loopres_73692 = loopres_t_res_73693;
                } else {
                    int64_t loopres_f_res_73694 = add64((int64_t) 1, mid_73684);
                    
                    loopres_73691 = loopres_f_res_73694;
                    loopres_73692 = high_73682;
                }
                
                bool loop_cond_73695 = sle64(loopres_73691, loopres_73692);
                bool loop_while_tmp_73822 = loop_cond_73695;
                int64_t low_tmp_73823 = loopres_73691;
                int64_t high_tmp_73824 = loopres_73692;
                
                loop_while_73680 = loop_while_tmp_73822;
                low_73681 = low_tmp_73823;
                high_73682 = high_tmp_73824;
            }
            nearest_idx_73677 = loop_while_73680;
            nearest_idx_73678 = low_73681;
            nearest_idx_73679 = high_73682;
            
            int64_t max_arg_73696 = sub64(nearest_idx_73678, min_res_64084);
            int64_t max_res_73697 = smax64((int64_t) 0, max_arg_73696);
            int64_t j_73698 = add64(min_res_64084, max_res_73697);
            int64_t i_p_m_t_s_73699 = add64(m_64090, max_res_73697);
            bool zzero_leq_i_p_m_t_s_73700 = sle64((int64_t) 0,
                                                   i_p_m_t_s_73699);
            bool i_p_m_t_s_leq_w_73701 = slt64(i_p_m_t_s_73699, n_64064);
            bool zzero_lte_i_73702 = sle64((int64_t) 0, max_res_73697);
            bool i_lte_j_73703 = sle64(max_res_73697, j_73698);
            bool y_73704 = i_p_m_t_s_leq_w_73701 && zzero_lte_i_73702;
            bool y_73705 = zzero_leq_i_p_m_t_s_73700 && y_73704;
            bool y_73706 = i_lte_j_73703 && y_73705;
            bool forwards_ok_73707 = zzero_lte_i_73702 && y_73706;
            bool ok_or_empty_73708 = empty_slice_64089 || forwards_ok_73707;
            bool index_certs_73709;
            
            if (!ok_or_empty_73708) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73697, ":",
                              (long long) j_73698,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_73710;
            int64_t redout_73712 = (int64_t) 0;
            
            for (int64_t i_73711 = 0; i_73711 < min_res_64084; i_73711++) {
                int64_t slice_73713 = max_res_73697 + i_73711;
                int64_t x_73714 = ((int64_t *) mem_70189)[slice_73713];
                int64_t abs_arg_73715 = sub64(x_73714, defunc_0_g_res_73676);
                int64_t abs_res_73716 = abs64(abs_arg_73715);
                int64_t defunc_1_op_res_73717 = add64(abs_res_73716,
                                                      redout_73712);
                int64_t redout_tmp_73825 = defunc_1_op_res_73717;
                
                redout_73712 = redout_tmp_73825;
            }
            defunc_2_reduce_res_73710 = redout_73712;
            
            int64_t idx_73718;
            int64_t idx_73719;
            int64_t idx_73720;
            int64_t idx_73721;
            int64_t best_idx_73723;
            int64_t last_idx_73724;
            int64_t best_sum_73725;
            int64_t curr_sum_73726;
            
            best_idx_73723 = max_res_73697;
            last_idx_73724 = max_res_73697;
            best_sum_73725 = defunc_2_reduce_res_73710;
            curr_sum_73726 = defunc_2_reduce_res_73710;
            for (int64_t j_73722 = 0; j_73722 < min_res_64084; j_73722++) {
                int64_t new_idx_73727 = add64(max_res_73697, j_73722);
                int64_t x_73728 = add64(min_res_64084, new_idx_73727);
                bool cond_73729 = slt64(last_res_64807, x_73728);
                int64_t new_sum_73730;
                
                if (cond_73729) {
                    new_sum_73730 = (int64_t) 9223372036854775807;
                } else {
                    bool x_73731 = sle64((int64_t) 0, last_idx_73724);
                    bool y_73732 = slt64(last_idx_73724, n_64064);
                    bool bounds_check_73733 = x_73731 && y_73732;
                    bool index_certs_73734;
                    
                    if (!bounds_check_73733) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_73724,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_73735 = ((int64_t *) mem_70189)[last_idx_73724];
                    int64_t binop_p_73736 = sub64(defunc_0_g_res_73676,
                                                  y_73735);
                    int64_t defunc_0_f_res_73737 = abs64(binop_p_73736);
                    int64_t x_73738 = sub64(curr_sum_73726,
                                            defunc_0_f_res_73737);
                    int64_t min_arg_73739 = add64(min_res_64084,
                                                  last_idx_73724);
                    int64_t min_res_73740 = smin64(i_64078, min_arg_73739);
                    bool x_73741 = sle64((int64_t) 0, min_res_73740);
                    bool y_73742 = slt64(min_res_73740, n_64064);
                    bool bounds_check_73743 = x_73741 && y_73742;
                    bool index_certs_73744;
                    
                    if (!bounds_check_73743) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_73740,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_73745 = ((int64_t *) mem_70189)[min_res_73740];
                    int64_t binop_p_73746 = sub64(defunc_0_g_res_73676,
                                                  y_73745);
                    int64_t defunc_0_f_res_73747 = abs64(binop_p_73746);
                    int64_t new_sum_f_res_73748 = add64(x_73738,
                                                        defunc_0_f_res_73747);
                    
                    new_sum_73730 = new_sum_f_res_73748;
                }
                
                bool cond_73749 = sle64(new_sum_73730, best_sum_73725);
                int64_t loopres_73750;
                
                if (cond_73749) {
                    loopres_73750 = new_idx_73727;
                } else {
                    loopres_73750 = best_idx_73723;
                }
                
                int64_t loopres_73751;
                
                if (cond_73749) {
                    loopres_73751 = new_sum_73730;
                } else {
                    loopres_73751 = best_sum_73725;
                }
                
                int64_t best_idx_tmp_73826 = loopres_73750;
                int64_t last_idx_tmp_73827 = new_idx_73727;
                int64_t best_sum_tmp_73828 = loopres_73751;
                int64_t curr_sum_tmp_73829 = new_sum_73730;
                
                best_idx_73723 = best_idx_tmp_73826;
                last_idx_73724 = last_idx_tmp_73827;
                best_sum_73725 = best_sum_tmp_73828;
                curr_sum_73726 = curr_sum_tmp_73829;
            }
            idx_73718 = best_idx_73723;
            idx_73719 = last_idx_73724;
            idx_73720 = best_sum_73725;
            idx_73721 = curr_sum_73726;
            
            int64_t min_res_73752 = smin64(min_arg_64825, idx_73718);
            int64_t x_73753 = add64(min_res_64084, min_res_73752);
            int64_t r_73754 = sub64(x_73753, (int64_t) 1);
            bool x_73755 = sle64((int64_t) 0, r_73754);
            bool y_73756 = slt64(r_73754, n_64064);
            bool bounds_check_73757 = x_73755 && y_73756;
            bool index_certs_73758;
            
            if (!bounds_check_73757) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_73754,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_73759 = ((int64_t *) mem_70156)[r_73754];
            int64_t abs_arg_73760 = sub64(x_73759, min_res_73675);
            int64_t abs_res_73761 = abs64(abs_arg_73760);
            bool x_73762 = sle64((int64_t) 0, min_res_73752);
            bool y_73763 = slt64(min_res_73752, n_64064);
            bool bounds_check_73764 = x_73762 && y_73763;
            bool index_certs_73765;
            
            if (!bounds_check_73764) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73752,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_73766 = ((int64_t *) mem_70156)[min_res_73752];
            int64_t abs_arg_73767 = sub64(x_73766, min_res_73675);
            int64_t abs_res_73768 = abs64(abs_arg_73767);
            int64_t max_res_73769 = smax64(abs_res_73761, abs_res_73768);
            float defunc_0_f_res_73770 = sitofp_i64_f32(max_res_73769);
            float defunc_1_f_res_73771 = max_res_64829 + defunc_0_f_res_73770;
            float defunc_0_f_res_73772 = sitofp_i64_f32(min_res_73675);
            float defunc_2_reduce_res_73774;
            float redout_73777 = 0.0F;
            
            for (int64_t i_73776 = 0; i_73776 < q_64066; i_73776++) {
                float x_73779 = ((float *) mem_70228)[i_73776];
                bool cond_73780 = sle64(last_res_64807, i_73776);
                float defunc_0_f_res_73781;
                
                if (cond_73780) {
                    defunc_0_f_res_73781 = 0.0F;
                } else {
                    int64_t i_73782 = add64(min_res_73752, i_73776);
                    float x_73783 = ((float *) mem_70183)[i_73782];
                    float defunc_0_f_res_f_res_73784 = 1.0F + x_73783;
                    
                    defunc_0_f_res_73781 = defunc_0_f_res_f_res_73784;
                }
                
                float x_j_73785 = defunc_0_f_res_73781 - defunc_0_f_res_73772;
                float abs_res_73786 = (float) fabs(x_j_73785);
                float tmp1_73787 = abs_res_73786 / defunc_1_f_res_73771;
                float x_73788 = tmp1_73787 * tmp1_73787;
                float y_73789 = tmp1_73787 * x_73788;
                float tmp2_73790 = 1.0F - y_73789;
                float x_73791 = tmp2_73790 * tmp2_73790;
                float tmp3_73792 = tmp2_73790 * x_73791;
                float tmp4_73793 = x_73779 * tmp3_73792;
                float defunc_1_op_res_73794 = tmp4_73793 + redout_73777;
                
                ((float *) mem_70253)[i_73776] = tmp4_73793;
                
                float redout_tmp_73830 = defunc_1_op_res_73794;
                
                redout_73777 = redout_tmp_73830;
            }
            defunc_2_reduce_res_73774 = redout_73777;
            
            float a0_73796 = 1.0F / defunc_2_reduce_res_73774;
            float defunc_2_reduce_res_73797;
            float redout_73799 = 0.0F;
            
            for (int64_t i_73798 = 0; i_73798 < q_64066; i_73798++) {
                float x_73800 = ((float *) mem_70253)[i_73798];
                bool cond_73801 = sle64(last_res_64807, i_73798);
                float defunc_0_f_res_73802;
                
                if (cond_73801) {
                    defunc_0_f_res_73802 = 0.0F;
                } else {
                    int64_t i_73803 = add64(min_res_73752, i_73798);
                    float x_73804 = ((float *) mem_70153)[i_73803];
                    
                    defunc_0_f_res_73802 = x_73804;
                }
                
                float x_73805 = a0_73796 * x_73800;
                float defunc_9_fit_fun_res_73806 = defunc_0_f_res_73802 *
                      x_73805;
                float defunc_1_op_res_73807 = defunc_9_fit_fun_res_73806 +
                      redout_73799;
                float redout_tmp_73832 = defunc_1_op_res_73807;
                
                redout_73799 = redout_tmp_73832;
            }
            defunc_2_reduce_res_73797 = redout_73799;
            ((float *) mem_70243)[i_73672] = defunc_2_reduce_res_73797;
        }
        memmove(mem_70274.mem + gtid_67317 * n_m_64072 * (int64_t) 4,
                mem_70243 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70138);
    free(mem_70153);
    free(mem_70156);
    free(mem_70183);
    free(mem_70186);
    free(mem_70189);
    free(mem_70228);
    free(mem_70243);
    free(mem_70253);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76647_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76647_end -
                 futhark_mc_segmap_parloop_76647_start;
        
        ctx->futhark_mc_segmap_parloop_76647_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76647_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76647_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76645(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67316 = tid;
    int num_tasks_73632 = info.nsubtasks;
    struct futhark_mc_task_76644 *futhark_mc_task_76644 =
                                 (struct futhark_mc_task_76644 *) args;
    struct futhark_context *ctx = futhark_mc_task_76644->ctx;
    uint64_t futhark_mc_segmap_task_76645_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76645_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76644->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76644->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76644->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76644->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76644->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76644->free_i_64078;
    bool x_64079 = futhark_mc_task_76644->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76644->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76644->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76644->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76644->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76644->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70094 = futhark_mc_task_76644->free_bytes_70094;
    int64_t bytes_70097 = futhark_mc_task_76644->free_bytes_70097;
    int64_t bytes_70112 = futhark_mc_task_76644->free_bytes_70112;
    int64_t bytes_70133 = futhark_mc_task_76644->free_bytes_70133;
    struct memblock mem_70274 = {.desc ="mem_70274", .mem =
                                 futhark_mc_task_76644->free_mem_70274, .size =
                                 0, .references =NULL};
    int64_t iter_73633;
    struct futhark_mc_segmap_parloop_struct_76646
    futhark_mc_segmap_parloop_struct_76646;
    
    futhark_mc_segmap_parloop_struct_76646.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76646.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76646.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76646.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76646.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76646.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76646.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76646.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76646.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76646.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76646.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76646.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76646.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76646.free_bytes_70094 = bytes_70094;
    futhark_mc_segmap_parloop_struct_76646.free_bytes_70097 = bytes_70097;
    futhark_mc_segmap_parloop_struct_76646.free_bytes_70112 = bytes_70112;
    futhark_mc_segmap_parloop_struct_76646.free_bytes_70133 = bytes_70133;
    futhark_mc_segmap_parloop_struct_76646.free_mem_70274 = mem_70274.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76647_task;
    
    futhark_mc_segmap_parloop_76647_task.name =
        "futhark_mc_segmap_parloop_76647";
    futhark_mc_segmap_parloop_76647_task.fn = futhark_mc_segmap_parloop_76647;
    futhark_mc_segmap_parloop_76647_task.args =
        &futhark_mc_segmap_parloop_struct_76646;
    futhark_mc_segmap_parloop_76647_task.iterations = iterations;
    futhark_mc_segmap_parloop_76647_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76647_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76647_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76647_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76647_task);
    
    if (futhark_mc_segmap_parloop_76647_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76647_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76647_total_end -
                 futhark_mc_segmap_parloop_76647_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76647_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76647_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76647_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76645_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76645_end -
                 futhark_mc_segmap_task_76645_start;
        
        ctx->futhark_mc_segmap_task_76645_runs[tid]++;
        ctx->futhark_mc_segmap_task_76645_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76645_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76658 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70094;
    int64_t free_bytes_70097;
    int64_t free_bytes_70112;
    int64_t free_bytes_70133;
    char *free_mem_70274;
};
struct futhark_mc_task_76668 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67319;
    char *free_Y_mem_69593;
    char *free_mem_70096;
};
struct futhark_mc_scan_stage_1_parloop_struct_76671 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67319;
    char *free_Y_mem_69593;
    char *free_mem_70096;
};
static int futhark_mc_scan_stage_1_parloop_76672(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67320, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76671
    *futhark_mc_scan_stage_1_parloop_struct_76671 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76671 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76671->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76672_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76672_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76671->free_n_64064;
    int64_t gtid_67319 =
            futhark_mc_scan_stage_1_parloop_struct_76671->free_gtid_67319;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76671->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70096 = {.desc ="mem_70096", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76671->free_mem_70096,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74124 = start;
    int64_t x_73834;
    int64_t x_73835;
    
    x_73834 = (int64_t) 0;
    for (; iter_74124 < end; iter_74124++) {
        int64_t gtid_67321 = iter_74124;
        
        // stage 1 scan body
        {
            float x_73837 = ((float *) Y_mem_69593.mem)[gtid_67319 * n_64064 +
                                                        gtid_67321];
            bool isnan_res_73838;
            
            isnan_res_73838 = futrts_isnan32(x_73837);
            
            bool defunc_0_p_res_73839 = !isnan_res_73838;
            int64_t defunc_0_f_res_73840 = btoi_bool_i64(defunc_0_p_res_73839);
            
            // write mapped values results to memory
            { }
            x_73834 = x_73834;
            // Read next values
            {
                x_73835 = defunc_0_f_res_73840;
            }
            
            int64_t defunc_1_op_res_73836 = add64(x_73834, x_73835);
            
            ((int64_t *) mem_70096.mem)[gtid_67321] = defunc_1_op_res_73836;
            x_73834 = defunc_1_op_res_73836;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76672_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76672_end -
                 futhark_mc_scan_stage_1_parloop_76672_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76672_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76672_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76672_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76673 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67319;
    char *free_Y_mem_69593;
    char *free_mem_70096;
};
static int futhark_mc_scan_stage_3_parloop_76674(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67320, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76673
    *futhark_mc_scan_stage_3_parloop_struct_76673 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76673 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76673->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76674_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76674_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76673->free_n_64064;
    int64_t gtid_67319 =
            futhark_mc_scan_stage_3_parloop_struct_76673->free_gtid_67319;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76673->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70096 = {.desc ="mem_70096", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76673->free_mem_70096,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74136 = start;
    int64_t x_74133;
    int64_t x_74134;
    
    if (iter_74136 == (int64_t) 0) {
        x_74133 = (int64_t) 0;
    } else {
        x_74133 = ((int64_t *) mem_70096.mem)[iter_74136 - (int64_t) 1];
    }
    for (; iter_74136 < end; iter_74136++) {
        int64_t gtid_67321 = iter_74136;
        
        // stage 3 scan body
        {
            float x_73837 = ((float *) Y_mem_69593.mem)[gtid_67319 * n_64064 +
                                                        gtid_67321];
            bool isnan_res_73838;
            
            isnan_res_73838 = futrts_isnan32(x_73837);
            
            bool defunc_0_p_res_73839 = !isnan_res_73838;
            int64_t defunc_0_f_res_73840 = btoi_bool_i64(defunc_0_p_res_73839);
            
            x_74133 = x_74133;
            x_74134 = defunc_0_f_res_73840;
            
            int64_t defunc_1_op_res_74135 = add64(x_74133, x_74134);
            
            ((int64_t *) mem_70096.mem)[gtid_67321] = defunc_1_op_res_74135;
            x_74133 = defunc_1_op_res_74135;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76674_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76674_end -
                 futhark_mc_scan_stage_3_parloop_76674_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76674_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76674_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76674_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76669(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67320 = tid;
    int num_tasks_74123 = info.nsubtasks;
    struct futhark_mc_task_76668 *futhark_mc_task_76668 =
                                 (struct futhark_mc_task_76668 *) args;
    struct futhark_context *ctx = futhark_mc_task_76668->ctx;
    uint64_t futhark_mc_segscan_task_76669_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76669_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76668->free_n_64064;
    int64_t gtid_67319 = futhark_mc_task_76668->free_gtid_67319;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76668->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70096 = {.desc ="mem_70096", .mem =
                                 futhark_mc_task_76668->free_mem_70096, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_74130_cached_sizze_76670 = 0;
    char *scan_stage_2_accum_mem_74130 = NULL;
    int64_t iter_74124;
    struct futhark_mc_scan_stage_1_parloop_struct_76671
    futhark_mc_scan_stage_1_parloop_struct_76671;
    
    futhark_mc_scan_stage_1_parloop_struct_76671.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76671.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76671.free_gtid_67319 = gtid_67319;
    futhark_mc_scan_stage_1_parloop_struct_76671.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76671.free_mem_70096 = mem_70096.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76672_task;
    
    futhark_mc_scan_stage_1_parloop_76672_task.name =
        "futhark_mc_scan_stage_1_parloop_76672";
    futhark_mc_scan_stage_1_parloop_76672_task.fn =
        futhark_mc_scan_stage_1_parloop_76672;
    futhark_mc_scan_stage_1_parloop_76672_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76671;
    futhark_mc_scan_stage_1_parloop_76672_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76672_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76672_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76672_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76672_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76672_task);
    
    if (futhark_mc_scan_stage_1_parloop_76672_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76672_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76672_total_end -
                 futhark_mc_scan_stage_1_parloop_76672_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76672_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76672_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76672_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_74123)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_74125;
        int64_t x_74126;
        int64_t offset_74128 = (int64_t) 0;
        int64_t offset_index_74129 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_74130_cached_sizze_76670 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_74130 = realloc(scan_stage_2_accum_mem_74130,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_74130_cached_sizze_76670 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_74130)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_74132 = 0; i_74132 < num_tasks_74123 - 1; i_74132++) {
            offset_74128 = squot64(n_64064, sext_i32_i64(num_tasks_74123));
            if (slt64(sext_i32_i64(i_74132), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_74123)))) {
                offset_74128 += (int64_t) 1;
            }
            offset_index_74129 += offset_74128;
            
            int64_t gtid_67321 = offset_index_74129;
            float x_73837 = ((float *) Y_mem_69593.mem)[gtid_67319 * n_64064 +
                                                        gtid_67321];
            bool isnan_res_73838;
            
            isnan_res_73838 = futrts_isnan32(x_73837);
            
            bool defunc_0_p_res_73839 = !isnan_res_73838;
            int64_t defunc_0_f_res_73840 = btoi_bool_i64(defunc_0_p_res_73839);
            
            // Read carry in
            {
                x_74125 =
                    ((int64_t *) scan_stage_2_accum_mem_74130)[(int64_t) 0];
            }
            // Read next values
            {
                x_74126 = ((int64_t *) mem_70096.mem)[offset_index_74129 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_74127 = add64(x_74125, x_74126);
            
            ((int64_t *) mem_70096.mem)[offset_index_74129 - (int64_t) 1] =
                defunc_1_op_res_74127;
            ((int64_t *) scan_stage_2_accum_mem_74130)[(int64_t) 0] =
                defunc_1_op_res_74127;
        }
        
        int64_t iter_74136 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76673
        futhark_mc_scan_stage_3_parloop_struct_76673;
        
        futhark_mc_scan_stage_3_parloop_struct_76673.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76673.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76673.free_gtid_67319 =
            gtid_67319;
        futhark_mc_scan_stage_3_parloop_struct_76673.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76673.free_mem_70096 =
            mem_70096.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76674_task;
        
        futhark_mc_scan_stage_3_parloop_76674_task.name =
            "futhark_mc_scan_stage_3_parloop_76674";
        futhark_mc_scan_stage_3_parloop_76674_task.fn =
            futhark_mc_scan_stage_3_parloop_76674;
        futhark_mc_scan_stage_3_parloop_76674_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76673;
        futhark_mc_scan_stage_3_parloop_76674_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76674_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76674_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76674_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76674_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76674_task);
        
        if (futhark_mc_scan_stage_3_parloop_76674_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76674_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76674_total_end -
                     futhark_mc_scan_stage_3_parloop_76674_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76674_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76674_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76674_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_74130);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76669_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76669_end -
                 futhark_mc_segscan_task_76669_start;
        
        ctx->futhark_mc_segscan_task_76669_runs[tid]++;
        ctx->futhark_mc_segscan_task_76669_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76669_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76675 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67319;
    char *free_Y_mem_69593;
    char *free_mem_70096;
    char *free_mem_70099;
    char *free_mem_70102;
};
struct futhark_mc_segmap_parloop_struct_76677 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67319;
    char *free_Y_mem_69593;
    char *free_mem_70096;
    char *free_mem_70099;
    char *free_mem_70102;
};
static int futhark_mc_segmap_parloop_76678(void *args, int64_t start,
                                           int64_t end, int flat_tid_67322,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76677
    *futhark_mc_segmap_parloop_struct_76677 =
    (struct futhark_mc_segmap_parloop_struct_76677 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76677->ctx;
    uint64_t futhark_mc_segmap_parloop_76678_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76678_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76677->free_n_64064;
    int64_t gtid_67319 =
            futhark_mc_segmap_parloop_struct_76677->free_gtid_67319;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76677->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70096 = {.desc ="mem_70096", .mem =
                                 futhark_mc_segmap_parloop_struct_76677->free_mem_70096,
                                 .size =0, .references =NULL};
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_segmap_parloop_struct_76677->free_mem_70099,
                                 .size =0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_segmap_parloop_struct_76677->free_mem_70102,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74140 = start;
    
    for (; iter_74140 < end; iter_74140++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74143 = n_64064;
        int64_t gtid_67323 = iter_74140;
        int64_t remnant_74144 = iter_74140 - gtid_67323;
        float x_73841 = ((float *) Y_mem_69593.mem)[gtid_67319 * n_64064 +
                                                    gtid_67323];
        bool isnan_res_73842;
        
        isnan_res_73842 = futrts_isnan32(x_73841);
        
        bool defunc_0_p_res_73843 = !isnan_res_73842;
        int64_t defunc_1_f_res_73844;
        
        if (defunc_0_p_res_73843) {
            int64_t x_74141 = ((int64_t *) mem_70096.mem)[gtid_67323];
            int64_t defunc_1_f_res_t_res_74142 = sub64(x_74141, (int64_t) 1);
            
            defunc_1_f_res_73844 = defunc_1_f_res_t_res_74142;
        } else {
            defunc_1_f_res_73844 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73844) &&
            slt64(defunc_1_f_res_73844, n_64064)) {
            ((int64_t *) mem_70102.mem)[defunc_1_f_res_73844] = gtid_67323;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73844) &&
            slt64(defunc_1_f_res_73844, n_64064)) {
            ((float *) mem_70099.mem)[defunc_1_f_res_73844] = x_73841;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76678_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76678_end -
                 futhark_mc_segmap_parloop_76678_start;
        
        ctx->futhark_mc_segmap_parloop_76678_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76678_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76678_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76676(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67322 = tid;
    int num_tasks_74139 = info.nsubtasks;
    struct futhark_mc_task_76675 *futhark_mc_task_76675 =
                                 (struct futhark_mc_task_76675 *) args;
    struct futhark_context *ctx = futhark_mc_task_76675->ctx;
    uint64_t futhark_mc_segmap_task_76676_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76676_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76675->free_n_64064;
    int64_t gtid_67319 = futhark_mc_task_76675->free_gtid_67319;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76675->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70096 = {.desc ="mem_70096", .mem =
                                 futhark_mc_task_76675->free_mem_70096, .size =
                                 0, .references =NULL};
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_task_76675->free_mem_70099, .size =
                                 0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_task_76675->free_mem_70102, .size =
                                 0, .references =NULL};
    int64_t iter_74140;
    struct futhark_mc_segmap_parloop_struct_76677
    futhark_mc_segmap_parloop_struct_76677;
    
    futhark_mc_segmap_parloop_struct_76677.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76677.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76677.free_gtid_67319 = gtid_67319;
    futhark_mc_segmap_parloop_struct_76677.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76677.free_mem_70096 = mem_70096.mem;
    futhark_mc_segmap_parloop_struct_76677.free_mem_70099 = mem_70099.mem;
    futhark_mc_segmap_parloop_struct_76677.free_mem_70102 = mem_70102.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76678_task;
    
    futhark_mc_segmap_parloop_76678_task.name =
        "futhark_mc_segmap_parloop_76678";
    futhark_mc_segmap_parloop_76678_task.fn = futhark_mc_segmap_parloop_76678;
    futhark_mc_segmap_parloop_76678_task.args =
        &futhark_mc_segmap_parloop_struct_76677;
    futhark_mc_segmap_parloop_76678_task.iterations = iterations;
    futhark_mc_segmap_parloop_76678_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76678_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76678_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76678_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76678_task);
    
    if (futhark_mc_segmap_parloop_76678_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76678_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76678_total_end -
                 futhark_mc_segmap_parloop_76678_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76678_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76678_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76678_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76676_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76676_end -
                 futhark_mc_segmap_task_76676_start;
        
        ctx->futhark_mc_segmap_task_76676_runs[tid]++;
        ctx->futhark_mc_segmap_task_76676_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76676_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76679 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70102;
    char *free_mem_70105;
    char *free_mem_70108;
    char *free_mem_70111;
};
struct futhark_mc_segmap_parloop_struct_76681 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70102;
    char *free_mem_70105;
    char *free_mem_70108;
    char *free_mem_70111;
};
static int futhark_mc_segmap_parloop_76682(void *args, int64_t start,
                                           int64_t end, int flat_tid_67324,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76681
    *futhark_mc_segmap_parloop_struct_76681 =
    (struct futhark_mc_segmap_parloop_struct_76681 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76681->ctx;
    uint64_t futhark_mc_segmap_parloop_76682_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76682_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76681->free_n_64064;
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_segmap_parloop_struct_76681->free_mem_70102,
                                 .size =0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_segmap_parloop_struct_76681->free_mem_70105,
                                 .size =0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_segmap_parloop_struct_76681->free_mem_70108,
                                 .size =0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_segmap_parloop_struct_76681->free_mem_70111,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74146 = start;
    
    for (; iter_74146 < end; iter_74146++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74147 = n_64064;
        int64_t gtid_67325 = iter_74146;
        int64_t remnant_74148 = iter_74146 - gtid_67325;
        int64_t x_73847 = ((int64_t *) mem_70102.mem)[gtid_67325];
        int64_t defunc_0_f_res_73848 = add64((int64_t) 1, x_73847);
        bool cond_73849 = slt64(defunc_0_f_res_73848, (int64_t) 0);
        int64_t defunc_0_f_res_73850;
        
        if (cond_73849) {
            defunc_0_f_res_73850 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_73850 = defunc_0_f_res_73848;
        }
        
        float defunc_0_f_res_73851 = sitofp_i64_f32(x_73847);
        
        ((float *) mem_70105.mem)[gtid_67325] = defunc_0_f_res_73851;
        ((int64_t *) mem_70108.mem)[gtid_67325] = defunc_0_f_res_73850;
        ((int64_t *) mem_70111.mem)[gtid_67325] = defunc_0_f_res_73848;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76682_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76682_end -
                 futhark_mc_segmap_parloop_76682_start;
        
        ctx->futhark_mc_segmap_parloop_76682_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76682_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76682_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76680(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67324 = tid;
    int num_tasks_74145 = info.nsubtasks;
    struct futhark_mc_task_76679 *futhark_mc_task_76679 =
                                 (struct futhark_mc_task_76679 *) args;
    struct futhark_context *ctx = futhark_mc_task_76679->ctx;
    uint64_t futhark_mc_segmap_task_76680_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76680_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76679->free_n_64064;
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_task_76679->free_mem_70102, .size =
                                 0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_task_76679->free_mem_70105, .size =
                                 0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_task_76679->free_mem_70108, .size =
                                 0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_task_76679->free_mem_70111, .size =
                                 0, .references =NULL};
    int64_t iter_74146;
    struct futhark_mc_segmap_parloop_struct_76681
    futhark_mc_segmap_parloop_struct_76681;
    
    futhark_mc_segmap_parloop_struct_76681.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76681.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76681.free_mem_70102 = mem_70102.mem;
    futhark_mc_segmap_parloop_struct_76681.free_mem_70105 = mem_70105.mem;
    futhark_mc_segmap_parloop_struct_76681.free_mem_70108 = mem_70108.mem;
    futhark_mc_segmap_parloop_struct_76681.free_mem_70111 = mem_70111.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76682_task;
    
    futhark_mc_segmap_parloop_76682_task.name =
        "futhark_mc_segmap_parloop_76682";
    futhark_mc_segmap_parloop_76682_task.fn = futhark_mc_segmap_parloop_76682;
    futhark_mc_segmap_parloop_76682_task.args =
        &futhark_mc_segmap_parloop_struct_76681;
    futhark_mc_segmap_parloop_76682_task.iterations = iterations;
    futhark_mc_segmap_parloop_76682_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76682_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76682_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76682_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76682_task);
    
    if (futhark_mc_segmap_parloop_76682_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76682_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76682_total_end -
                 futhark_mc_segmap_parloop_76682_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76682_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76682_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76682_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76680_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76680_end -
                 futhark_mc_segmap_task_76680_start;
        
        ctx->futhark_mc_segmap_task_76680_runs[tid]++;
        ctx->futhark_mc_segmap_task_76680_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76680_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76683 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_67481;
    char *free_mem_70114;
};
struct futhark_mc_segmap_parloop_struct_76685 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_67481;
    char *free_mem_70114;
};
static int futhark_mc_segmap_parloop_76686(void *args, int64_t start,
                                           int64_t end, int flat_tid_67326,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76685
    *futhark_mc_segmap_parloop_struct_76685 =
    (struct futhark_mc_segmap_parloop_struct_76685 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76685->ctx;
    uint64_t futhark_mc_segmap_parloop_76686_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76686_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76685->free_q_64066;
    int64_t last_res_67481 =
            futhark_mc_segmap_parloop_struct_76685->free_last_res_67481;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_segmap_parloop_struct_76685->free_mem_70114,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74150 = start;
    
    for (; iter_74150 < end; iter_74150++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74151 = q_64066;
        int64_t gtid_67327 = iter_74150;
        int64_t remnant_74152 = iter_74150 - gtid_67327;
        bool cond_73852 = sle64(last_res_67481, gtid_67327);
        float defunc_0_f_res_73853;
        
        if (cond_73852) {
            defunc_0_f_res_73853 = 0.0F;
        } else {
            defunc_0_f_res_73853 = 1.0F;
        }
        ((float *) mem_70114.mem)[gtid_67327] = defunc_0_f_res_73853;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76686_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76686_end -
                 futhark_mc_segmap_parloop_76686_start;
        
        ctx->futhark_mc_segmap_parloop_76686_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76686_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76686_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76684(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67326 = tid;
    int num_tasks_74149 = info.nsubtasks;
    struct futhark_mc_task_76683 *futhark_mc_task_76683 =
                                 (struct futhark_mc_task_76683 *) args;
    struct futhark_context *ctx = futhark_mc_task_76683->ctx;
    uint64_t futhark_mc_segmap_task_76684_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76684_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76683->free_q_64066;
    int64_t last_res_67481 = futhark_mc_task_76683->free_last_res_67481;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_task_76683->free_mem_70114, .size =
                                 0, .references =NULL};
    int64_t iter_74150;
    struct futhark_mc_segmap_parloop_struct_76685
    futhark_mc_segmap_parloop_struct_76685;
    
    futhark_mc_segmap_parloop_struct_76685.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76685.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76685.free_last_res_67481 = last_res_67481;
    futhark_mc_segmap_parloop_struct_76685.free_mem_70114 = mem_70114.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76686_task;
    
    futhark_mc_segmap_parloop_76686_task.name =
        "futhark_mc_segmap_parloop_76686";
    futhark_mc_segmap_parloop_76686_task.fn = futhark_mc_segmap_parloop_76686;
    futhark_mc_segmap_parloop_76686_task.args =
        &futhark_mc_segmap_parloop_struct_76685;
    futhark_mc_segmap_parloop_76686_task.iterations = iterations;
    futhark_mc_segmap_parloop_76686_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76686_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76686_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76686_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76686_task);
    
    if (futhark_mc_segmap_parloop_76686_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76686_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76686_total_end -
                 futhark_mc_segmap_parloop_76686_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76686_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76686_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76686_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76684_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76684_end -
                 futhark_mc_segmap_task_76684_start;
        
        ctx->futhark_mc_segmap_task_76684_runs[tid]++;
        ctx->futhark_mc_segmap_task_76684_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76684_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76687 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67481;
    int64_t free_min_arg_67493;
    float free_max_res_67497;
    char *free_mem_70099;
    char *free_mem_70102;
    char *free_mem_70105;
    char *free_mem_70108;
    char *free_mem_70111;
    int64_t free_bytes_70112;
    char *free_mem_70114;
    char *free_mem_70135;
};
struct futhark_mc_segmap_parloop_struct_76689 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67481;
    int64_t free_min_arg_67493;
    float free_max_res_67497;
    char *free_mem_70099;
    char *free_mem_70102;
    char *free_mem_70105;
    char *free_mem_70108;
    char *free_mem_70111;
    int64_t free_bytes_70112;
    char *free_mem_70114;
    char *free_mem_70135;
};
static int futhark_mc_segmap_parloop_76690(void *args, int64_t start,
                                           int64_t end, int flat_tid_67328,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76689
    *futhark_mc_segmap_parloop_struct_76689 =
    (struct futhark_mc_segmap_parloop_struct_76689 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76689->ctx;
    uint64_t futhark_mc_segmap_parloop_76690_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76690_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76689->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76689->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76689->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76689->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76689->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76689->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76689->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76689->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76689->free_m_64090;
    int64_t last_res_67481 =
            futhark_mc_segmap_parloop_struct_76689->free_last_res_67481;
    int64_t min_arg_67493 =
            futhark_mc_segmap_parloop_struct_76689->free_min_arg_67493;
    float max_res_67497 =
          futhark_mc_segmap_parloop_struct_76689->free_max_res_67497;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70099,
                                 .size =0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70102,
                                 .size =0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70105,
                                 .size =0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70108,
                                 .size =0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70111,
                                 .size =0, .references =NULL};
    int64_t bytes_70112 =
            futhark_mc_segmap_parloop_struct_76689->free_bytes_70112;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70114,
                                 .size =0, .references =NULL};
    struct memblock mem_70135 = {.desc ="mem_70135", .mem =
                                 futhark_mc_segmap_parloop_struct_76689->free_mem_70135,
                                 .size =0, .references =NULL};
    size_t mem_74085_cached_sizze_76691 = 0;
    char *mem_74085 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74154 = start;
    
    if (mem_74085_cached_sizze_76691 < (size_t) bytes_70112) {
        mem_74085 = realloc(mem_74085, bytes_70112);
        mem_74085_cached_sizze_76691 = bytes_70112;
    }
    for (; iter_74154 < end; iter_74154++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74238 = n_m_64072;
        int64_t gtid_67329 = iter_74154;
        int64_t remnant_74239 = iter_74154 - gtid_67329;
        int64_t min_arg_73986 = mul64(jump_64068, gtid_67329);
        int64_t min_res_73987 = smin64(i_64078, min_arg_73986);
        int64_t defunc_0_g_res_73988 = add64((int64_t) 1, min_res_73987);
        bool nearest_idx_73989;
        int64_t nearest_idx_73990;
        int64_t nearest_idx_73991;
        bool loop_while_74155;
        int64_t low_74156;
        int64_t high_74157;
        
        loop_while_74155 = x_64079;
        low_74156 = (int64_t) 0;
        high_74157 = i_64078;
        while (loop_while_74155) {
            int64_t x_74158 = add64(low_74156, high_74157);
            int64_t mid_74159 = sdiv64(x_74158, (int64_t) 2);
            bool x_74160 = sle64((int64_t) 0, mid_74159);
            bool y_74161 = slt64(mid_74159, n_64064);
            bool bounds_check_74162 = x_74160 && y_74161;
            bool index_certs_74163;
            
            if (!bounds_check_74162) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74159,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_74164 = ((int64_t *) mem_70108.mem)[mid_74159];
            bool cond_74165 = sle64(defunc_0_g_res_73988, x_74164);
            int64_t loopres_74166;
            int64_t loopres_74167;
            
            if (cond_74165) {
                int64_t loopres_t_res_74168 = sub64(mid_74159, (int64_t) 1);
                
                loopres_74166 = low_74156;
                loopres_74167 = loopres_t_res_74168;
            } else {
                int64_t loopres_f_res_74169 = add64((int64_t) 1, mid_74159);
                
                loopres_74166 = loopres_f_res_74169;
                loopres_74167 = high_74157;
            }
            
            bool loop_cond_74170 = sle64(loopres_74166, loopres_74167);
            bool loop_while_tmp_74240 = loop_cond_74170;
            int64_t low_tmp_74241 = loopres_74166;
            int64_t high_tmp_74242 = loopres_74167;
            
            loop_while_74155 = loop_while_tmp_74240;
            low_74156 = low_tmp_74241;
            high_74157 = high_tmp_74242;
        }
        nearest_idx_73989 = loop_while_74155;
        nearest_idx_73990 = low_74156;
        nearest_idx_73991 = high_74157;
        
        int64_t max_arg_74008 = sub64(nearest_idx_73990, min_res_64084);
        int64_t max_res_74009 = smax64((int64_t) 0, max_arg_74008);
        int64_t j_74010 = add64(min_res_64084, max_res_74009);
        int64_t i_p_m_t_s_74011 = add64(m_64090, max_res_74009);
        bool zzero_leq_i_p_m_t_s_74012 = sle64((int64_t) 0, i_p_m_t_s_74011);
        bool i_p_m_t_s_leq_w_74013 = slt64(i_p_m_t_s_74011, n_64064);
        bool zzero_lte_i_74014 = sle64((int64_t) 0, max_res_74009);
        bool i_lte_j_74015 = sle64(max_res_74009, j_74010);
        bool y_74016 = i_p_m_t_s_leq_w_74013 && zzero_lte_i_74014;
        bool y_74017 = zzero_leq_i_p_m_t_s_74012 && y_74016;
        bool y_74018 = i_lte_j_74015 && y_74017;
        bool forwards_ok_74019 = zzero_lte_i_74014 && y_74018;
        bool ok_or_empty_74020 = empty_slice_64089 || forwards_ok_74019;
        bool index_certs_74021;
        
        if (!ok_or_empty_74020) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_74009, ":",
                          (long long) j_74010,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_74022;
        int64_t redout_74172 = (int64_t) 0;
        
        for (int64_t i_74171 = 0; i_74171 < min_res_64084; i_74171++) {
            int64_t slice_74173 = max_res_74009 + i_74171;
            int64_t x_74174 = ((int64_t *) mem_70111.mem)[slice_74173];
            int64_t abs_arg_74175 = sub64(x_74174, defunc_0_g_res_73988);
            int64_t abs_res_74176 = abs64(abs_arg_74175);
            int64_t defunc_1_op_res_74177 = add64(abs_res_74176, redout_74172);
            int64_t redout_tmp_74243 = defunc_1_op_res_74177;
            
            redout_74172 = redout_tmp_74243;
        }
        defunc_2_reduce_res_74022 = redout_74172;
        
        int64_t idx_74030;
        int64_t idx_74031;
        int64_t idx_74032;
        int64_t idx_74033;
        int64_t best_idx_74179;
        int64_t last_idx_74180;
        int64_t best_sum_74181;
        int64_t curr_sum_74182;
        
        best_idx_74179 = max_res_74009;
        last_idx_74180 = max_res_74009;
        best_sum_74181 = defunc_2_reduce_res_74022;
        curr_sum_74182 = defunc_2_reduce_res_74022;
        for (int64_t j_74178 = 0; j_74178 < min_res_64084; j_74178++) {
            int64_t new_idx_74183 = add64(max_res_74009, j_74178);
            int64_t x_74184 = add64(min_res_64084, new_idx_74183);
            bool cond_74185 = slt64(last_res_67481, x_74184);
            int64_t new_sum_74186;
            
            if (cond_74185) {
                new_sum_74186 = (int64_t) 9223372036854775807;
            } else {
                bool x_74187 = sle64((int64_t) 0, last_idx_74180);
                bool y_74188 = slt64(last_idx_74180, n_64064);
                bool bounds_check_74189 = x_74187 && y_74188;
                bool index_certs_74190;
                
                if (!bounds_check_74189) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_74180,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_74191 = ((int64_t *) mem_70111.mem)[last_idx_74180];
                int64_t binop_p_74192 = sub64(defunc_0_g_res_73988, y_74191);
                int64_t defunc_0_f_res_74193 = abs64(binop_p_74192);
                int64_t x_74194 = sub64(curr_sum_74182, defunc_0_f_res_74193);
                int64_t min_arg_74195 = add64(min_res_64084, last_idx_74180);
                int64_t min_res_74196 = smin64(i_64078, min_arg_74195);
                bool x_74197 = sle64((int64_t) 0, min_res_74196);
                bool y_74198 = slt64(min_res_74196, n_64064);
                bool bounds_check_74199 = x_74197 && y_74198;
                bool index_certs_74200;
                
                if (!bounds_check_74199) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_74196,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_74201 = ((int64_t *) mem_70111.mem)[min_res_74196];
                int64_t binop_p_74202 = sub64(defunc_0_g_res_73988, y_74201);
                int64_t defunc_0_f_res_74203 = abs64(binop_p_74202);
                int64_t new_sum_f_res_74204 = add64(x_74194,
                                                    defunc_0_f_res_74203);
                
                new_sum_74186 = new_sum_f_res_74204;
            }
            
            bool cond_74205 = sle64(new_sum_74186, best_sum_74181);
            int64_t loopres_74206;
            
            if (cond_74205) {
                loopres_74206 = new_idx_74183;
            } else {
                loopres_74206 = best_idx_74179;
            }
            
            int64_t loopres_74207;
            
            if (cond_74205) {
                loopres_74207 = new_sum_74186;
            } else {
                loopres_74207 = best_sum_74181;
            }
            
            int64_t best_idx_tmp_74244 = loopres_74206;
            int64_t last_idx_tmp_74245 = new_idx_74183;
            int64_t best_sum_tmp_74246 = loopres_74207;
            int64_t curr_sum_tmp_74247 = new_sum_74186;
            
            best_idx_74179 = best_idx_tmp_74244;
            last_idx_74180 = last_idx_tmp_74245;
            best_sum_74181 = best_sum_tmp_74246;
            curr_sum_74182 = curr_sum_tmp_74247;
        }
        idx_74030 = best_idx_74179;
        idx_74031 = last_idx_74180;
        idx_74032 = best_sum_74181;
        idx_74033 = curr_sum_74182;
        
        int64_t min_res_74064 = smin64(min_arg_67493, idx_74030);
        int64_t x_74065 = add64(min_res_64084, min_res_74064);
        int64_t r_74066 = sub64(x_74065, (int64_t) 1);
        bool x_74067 = sle64((int64_t) 0, r_74066);
        bool y_74068 = slt64(r_74066, n_64064);
        bool bounds_check_74069 = x_74067 && y_74068;
        bool index_certs_74070;
        
        if (!bounds_check_74069) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74066,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74071 = ((int64_t *) mem_70102.mem)[r_74066];
        int64_t abs_arg_74072 = sub64(x_74071, min_res_73987);
        int64_t abs_res_74073 = abs64(abs_arg_74072);
        bool x_74074 = sle64((int64_t) 0, min_res_74064);
        bool y_74075 = slt64(min_res_74064, n_64064);
        bool bounds_check_74076 = x_74074 && y_74075;
        bool index_certs_74077;
        
        if (!bounds_check_74076) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74064,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74078 = ((int64_t *) mem_70102.mem)[min_res_74064];
        int64_t abs_arg_74079 = sub64(x_74078, min_res_73987);
        int64_t abs_res_74080 = abs64(abs_arg_74079);
        int64_t max_res_74081 = smax64(abs_res_74073, abs_res_74080);
        float defunc_0_f_res_74082 = sitofp_i64_f32(max_res_74081);
        float defunc_1_f_res_74083 = max_res_67497 + defunc_0_f_res_74082;
        float defunc_0_f_res_74084 = sitofp_i64_f32(min_res_73987);
        float defunc_2_reduce_res_74087;
        float redout_74209 = 0.0F;
        
        for (int64_t i_74208 = 0; i_74208 < q_64066; i_74208++) {
            float x_74211 = ((float *) mem_70114.mem)[i_74208];
            bool cond_74212 = sle64(last_res_67481, i_74208);
            float defunc_0_f_res_74213;
            
            if (cond_74212) {
                defunc_0_f_res_74213 = 0.0F;
            } else {
                int64_t i_74214 = add64(min_res_74064, i_74208);
                float x_74215 = ((float *) mem_70105.mem)[i_74214];
                float defunc_0_f_res_f_res_74216 = 1.0F + x_74215;
                
                defunc_0_f_res_74213 = defunc_0_f_res_f_res_74216;
            }
            
            float x_j_74217 = defunc_0_f_res_74213 - defunc_0_f_res_74084;
            float abs_res_74218 = (float) fabs(x_j_74217);
            float tmp1_74219 = abs_res_74218 / defunc_1_f_res_74083;
            float x_74220 = tmp1_74219 * tmp1_74219;
            float y_74221 = tmp1_74219 * x_74220;
            float tmp2_74222 = 1.0F - y_74221;
            float x_74223 = tmp2_74222 * tmp2_74222;
            float tmp3_74224 = tmp2_74222 * x_74223;
            float tmp4_74225 = x_74211 * tmp3_74224;
            float defunc_1_op_res_74226 = tmp4_74225 + redout_74209;
            
            ((float *) mem_74085)[i_74208] = tmp4_74225;
            
            float redout_tmp_74248 = defunc_1_op_res_74226;
            
            redout_74209 = redout_tmp_74248;
        }
        defunc_2_reduce_res_74087 = redout_74209;
        
        float a0_74109 = 1.0F / defunc_2_reduce_res_74087;
        float defunc_2_reduce_res_74110;
        float redout_74229 = 0.0F;
        
        for (int64_t i_74228 = 0; i_74228 < q_64066; i_74228++) {
            float x_74230 = ((float *) mem_74085)[i_74228];
            bool cond_74231 = sle64(last_res_67481, i_74228);
            float defunc_0_f_res_74232;
            
            if (cond_74231) {
                defunc_0_f_res_74232 = 0.0F;
            } else {
                int64_t i_74233 = add64(min_res_74064, i_74228);
                float x_74234 = ((float *) mem_70099.mem)[i_74233];
                
                defunc_0_f_res_74232 = x_74234;
            }
            
            float x_74235 = a0_74109 * x_74230;
            float defunc_9_fit_fun_res_74236 = defunc_0_f_res_74232 * x_74235;
            float defunc_1_op_res_74237 = defunc_9_fit_fun_res_74236 +
                  redout_74229;
            float redout_tmp_74250 = defunc_1_op_res_74237;
            
            redout_74229 = redout_tmp_74250;
        }
        defunc_2_reduce_res_74110 = redout_74229;
        ((float *) mem_70135.mem)[gtid_67329] = defunc_2_reduce_res_74110;
    }
    
  cleanup:
    { }
    free(mem_74085);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76690_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76690_end -
                 futhark_mc_segmap_parloop_76690_start;
        
        ctx->futhark_mc_segmap_parloop_76690_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76690_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76690_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76688(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67328 = tid;
    int num_tasks_74153 = info.nsubtasks;
    struct futhark_mc_task_76687 *futhark_mc_task_76687 =
                                 (struct futhark_mc_task_76687 *) args;
    struct futhark_context *ctx = futhark_mc_task_76687->ctx;
    uint64_t futhark_mc_segmap_task_76688_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76688_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76687->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76687->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76687->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76687->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76687->free_i_64078;
    bool x_64079 = futhark_mc_task_76687->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76687->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76687->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76687->free_m_64090;
    int64_t last_res_67481 = futhark_mc_task_76687->free_last_res_67481;
    int64_t min_arg_67493 = futhark_mc_task_76687->free_min_arg_67493;
    float max_res_67497 = futhark_mc_task_76687->free_max_res_67497;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_task_76687->free_mem_70099, .size =
                                 0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_task_76687->free_mem_70102, .size =
                                 0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_task_76687->free_mem_70105, .size =
                                 0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_task_76687->free_mem_70108, .size =
                                 0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_task_76687->free_mem_70111, .size =
                                 0, .references =NULL};
    int64_t bytes_70112 = futhark_mc_task_76687->free_bytes_70112;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_task_76687->free_mem_70114, .size =
                                 0, .references =NULL};
    struct memblock mem_70135 = {.desc ="mem_70135", .mem =
                                 futhark_mc_task_76687->free_mem_70135, .size =
                                 0, .references =NULL};
    int64_t iter_74154;
    struct futhark_mc_segmap_parloop_struct_76689
    futhark_mc_segmap_parloop_struct_76689;
    
    futhark_mc_segmap_parloop_struct_76689.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76689.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76689.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76689.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76689.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76689.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76689.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76689.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76689.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76689.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76689.free_last_res_67481 = last_res_67481;
    futhark_mc_segmap_parloop_struct_76689.free_min_arg_67493 = min_arg_67493;
    futhark_mc_segmap_parloop_struct_76689.free_max_res_67497 = max_res_67497;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70099 = mem_70099.mem;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70102 = mem_70102.mem;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70105 = mem_70105.mem;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70108 = mem_70108.mem;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70111 = mem_70111.mem;
    futhark_mc_segmap_parloop_struct_76689.free_bytes_70112 = bytes_70112;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70114 = mem_70114.mem;
    futhark_mc_segmap_parloop_struct_76689.free_mem_70135 = mem_70135.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76690_task;
    
    futhark_mc_segmap_parloop_76690_task.name =
        "futhark_mc_segmap_parloop_76690";
    futhark_mc_segmap_parloop_76690_task.fn = futhark_mc_segmap_parloop_76690;
    futhark_mc_segmap_parloop_76690_task.args =
        &futhark_mc_segmap_parloop_struct_76689;
    futhark_mc_segmap_parloop_76690_task.iterations = iterations;
    futhark_mc_segmap_parloop_76690_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76690_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76690_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76690_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76690_task);
    
    if (futhark_mc_segmap_parloop_76690_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76690_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76690_total_end -
                 futhark_mc_segmap_parloop_76690_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76690_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76690_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76690_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76688_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76688_end -
                 futhark_mc_segmap_task_76688_start;
        
        ctx->futhark_mc_segmap_task_76688_runs[tid]++;
        ctx->futhark_mc_segmap_task_76688_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76688_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76693 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67481;
    int64_t free_min_arg_67493;
    float free_max_res_67497;
    char *free_mem_70099;
    char *free_mem_70102;
    char *free_mem_70105;
    char *free_mem_70108;
    char *free_mem_70111;
    int64_t free_bytes_70112;
    char *free_mem_70114;
    char *free_mem_70135;
};
struct futhark_mc_task_76696 {
    struct futhark_context *ctx;
    char *free_mem_70111;
    int64_t free_defunc_0_g_res_73856;
    int64_t free_max_res_73877;
    int64_t *retval_defunc_2_reduce_res_73890;
};
struct futhark_mc_segred_stage_1_parloop_struct_76699 {
    struct futhark_context *ctx;
    char *free_mem_70111;
    int64_t free_defunc_0_g_res_73856;
    int64_t free_max_res_73877;
    char *free_reduce_stage_1_tid_res_arr_mem_74339;
};
static int futhark_mc_segred_stage_1_parloop_76700(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67332, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76699
    *futhark_mc_segred_stage_1_parloop_struct_76699 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76699 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76699->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76700_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76700_start = get_wall_time();
    
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76699->free_mem_70111,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_73856 =
            futhark_mc_segred_stage_1_parloop_struct_76699->free_defunc_0_g_res_73856;
    int64_t max_res_73877 =
            futhark_mc_segred_stage_1_parloop_struct_76699->free_max_res_73877;
    struct memblock reduce_stage_1_tid_res_arr_mem_74339 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74339",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76699->free_reduce_stage_1_tid_res_arr_mem_74339,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74341 = start;
    int64_t x_74268;
    int64_t x_74269;
    int64_t local_acc_74342 = (int64_t) 0;
    
    for (; iter_74341 < end; iter_74341++) {
        int64_t gtid_67333 = iter_74341;
        int64_t slice_74271 = gtid_67333 + max_res_73877;
        int64_t x_74272 = ((int64_t *) mem_70111.mem)[slice_74271];
        int64_t abs_arg_74273 = sub64(x_74272, defunc_0_g_res_73856);
        int64_t abs_res_74274 = abs64(abs_arg_74273);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_74268 = local_acc_74342;
        }
        // Load next params
        {
            x_74269 = abs_res_74274;
        }
        // Red body
        {
            int64_t defunc_1_op_res_74270 = add64(x_74268, x_74269);
            
            local_acc_74342 = defunc_1_op_res_74270;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_74339.mem)[flat_tid_67332] =
        local_acc_74342;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76700_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76700_end -
                 futhark_mc_segred_stage_1_parloop_76700_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76700_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76700_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76700_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76697(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67332 = tid;
    int num_tasks_74338 = info.nsubtasks;
    struct futhark_mc_task_76696 *futhark_mc_task_76696 =
                                 (struct futhark_mc_task_76696 *) args;
    struct futhark_context *ctx = futhark_mc_task_76696->ctx;
    uint64_t futhark_mc_segred_task_76697_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76697_start = get_wall_time();
    
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_task_76696->free_mem_70111, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_73856 =
            futhark_mc_task_76696->free_defunc_0_g_res_73856;
    int64_t max_res_73877 = futhark_mc_task_76696->free_max_res_73877;
    int64_t defunc_2_reduce_res_73890 =
            *futhark_mc_task_76696->retval_defunc_2_reduce_res_73890;
    size_t reduce_stage_1_tid_res_arr_mem_74339_cached_sizze_76698 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74339 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74339_cached_sizze_76698 <
        (size_t) ((int64_t) 8 * num_tasks_74338)) {
        reduce_stage_1_tid_res_arr_mem_74339 =
            realloc(reduce_stage_1_tid_res_arr_mem_74339, (int64_t) 8 *
                    num_tasks_74338);
        reduce_stage_1_tid_res_arr_mem_74339_cached_sizze_76698 = (int64_t) 8 *
            num_tasks_74338;
    }
    
    int64_t iter_74341;
    struct futhark_mc_segred_stage_1_parloop_struct_76699
    futhark_mc_segred_stage_1_parloop_struct_76699;
    
    futhark_mc_segred_stage_1_parloop_struct_76699.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76699.free_mem_70111 =
        mem_70111.mem;
    futhark_mc_segred_stage_1_parloop_struct_76699.free_defunc_0_g_res_73856 =
        defunc_0_g_res_73856;
    futhark_mc_segred_stage_1_parloop_struct_76699.free_max_res_73877 =
        max_res_73877;
    futhark_mc_segred_stage_1_parloop_struct_76699.free_reduce_stage_1_tid_res_arr_mem_74339 =
        reduce_stage_1_tid_res_arr_mem_74339;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76700_task;
    
    futhark_mc_segred_stage_1_parloop_76700_task.name =
        "futhark_mc_segred_stage_1_parloop_76700";
    futhark_mc_segred_stage_1_parloop_76700_task.fn =
        futhark_mc_segred_stage_1_parloop_76700;
    futhark_mc_segred_stage_1_parloop_76700_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76699;
    futhark_mc_segred_stage_1_parloop_76700_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76700_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76700_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76700_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76700_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76700_task);
    
    if (futhark_mc_segred_stage_1_parloop_76700_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76700_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76700_total_end -
                 futhark_mc_segred_stage_1_parloop_76700_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76700_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76700_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76700_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73890 = (int64_t) 0;
    }
    
    int64_t x_74343;
    int64_t x_74344;
    
    for (int32_t i_74346 = 0; i_74346 < num_tasks_74338; i_74346++) {
        flat_tid_67332 = i_74346;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74343 = defunc_2_reduce_res_73890;
            }
            // load next params
            {
                x_74344 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_74339)[flat_tid_67332];
            }
            // red body
            {
                int64_t defunc_1_op_res_74345 = add64(x_74343, x_74344);
                
                defunc_2_reduce_res_73890 = defunc_1_op_res_74345;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74339);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76697_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76697_end -
                 futhark_mc_segred_task_76697_start;
        
        ctx->futhark_mc_segred_task_76697_runs[tid]++;
        ctx->futhark_mc_segred_task_76697_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76697_iter[tid] += iterations;
    }
    *futhark_mc_task_76696->retval_defunc_2_reduce_res_73890 =
        defunc_2_reduce_res_73890;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76701 {
    struct futhark_context *ctx;
    int64_t free_last_res_67481;
    char *free_mem_70105;
    char *free_mem_70114;
    int64_t free_min_res_73932;
    float free_defunc_1_f_res_73951;
    float free_defunc_0_f_res_73952;
    float *retval_defunc_2_reduce_res_73954;
    char *retval_mem_73953;
};
struct futhark_mc_segred_stage_1_parloop_struct_76704 {
    struct futhark_context *ctx;
    int64_t free_last_res_67481;
    char *free_mem_70105;
    char *free_mem_70114;
    int64_t free_min_res_73932;
    float free_defunc_1_f_res_73951;
    float free_defunc_0_f_res_73952;
    char *free_mem_73953;
    char *free_reduce_stage_1_tid_res_arr_mem_74352;
};
static int futhark_mc_segred_stage_1_parloop_76705(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67334, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76704
    *futhark_mc_segred_stage_1_parloop_struct_76704 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76704 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76704->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76705_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76705_start = get_wall_time();
    
    int64_t last_res_67481 =
            futhark_mc_segred_stage_1_parloop_struct_76704->free_last_res_67481;
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76704->free_mem_70105,
                                 .size =0, .references =NULL};
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76704->free_mem_70114,
                                 .size =0, .references =NULL};
    int64_t min_res_73932 =
            futhark_mc_segred_stage_1_parloop_struct_76704->free_min_res_73932;
    float defunc_1_f_res_73951 =
          futhark_mc_segred_stage_1_parloop_struct_76704->free_defunc_1_f_res_73951;
    float defunc_0_f_res_73952 =
          futhark_mc_segred_stage_1_parloop_struct_76704->free_defunc_0_f_res_73952;
    struct memblock mem_73953 = {.desc ="mem_73953", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76704->free_mem_73953,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_74352 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74352",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76704->free_reduce_stage_1_tid_res_arr_mem_74352,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74354 = start;
    float x_74305;
    float x_74306;
    float local_acc_74355 = 0.0F;
    
    for (; iter_74354 < end; iter_74354++) {
        int64_t gtid_67335 = iter_74354;
        float x_74308 = ((float *) mem_70114.mem)[gtid_67335];
        bool cond_74309 = sle64(last_res_67481, gtid_67335);
        float defunc_0_f_res_74310;
        
        if (cond_74309) {
            defunc_0_f_res_74310 = 0.0F;
        } else {
            int64_t i_74311 = add64(gtid_67335, min_res_73932);
            float x_74312 = ((float *) mem_70105.mem)[i_74311];
            float defunc_0_f_res_f_res_74313 = 1.0F + x_74312;
            
            defunc_0_f_res_74310 = defunc_0_f_res_f_res_74313;
        }
        
        float x_j_74314 = defunc_0_f_res_74310 - defunc_0_f_res_73952;
        float abs_res_74315 = (float) fabs(x_j_74314);
        float tmp1_74316 = abs_res_74315 / defunc_1_f_res_73951;
        float x_74317 = tmp1_74316 * tmp1_74316;
        float y_74318 = tmp1_74316 * x_74317;
        float tmp2_74319 = 1.0F - y_74318;
        float x_74320 = tmp2_74319 * tmp2_74319;
        float tmp3_74321 = tmp2_74319 * x_74320;
        float tmp4_74322 = x_74308 * tmp3_74321;
        
        // save map-out results
        {
            ((float *) mem_73953.mem)[gtid_67335] = tmp4_74322;
        }
        // Load accum params
        {
            x_74305 = local_acc_74355;
        }
        // Load next params
        {
            x_74306 = tmp4_74322;
        }
        // Red body
        {
            float defunc_1_op_res_74307 = x_74305 + x_74306;
            
            local_acc_74355 = defunc_1_op_res_74307;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_74352.mem)[flat_tid_67334] =
        local_acc_74355;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76705_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76705_end -
                 futhark_mc_segred_stage_1_parloop_76705_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76705_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76705_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76705_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76702(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67334 = tid;
    int num_tasks_74351 = info.nsubtasks;
    struct futhark_mc_task_76701 *futhark_mc_task_76701 =
                                 (struct futhark_mc_task_76701 *) args;
    struct futhark_context *ctx = futhark_mc_task_76701->ctx;
    uint64_t futhark_mc_segred_task_76702_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76702_start = get_wall_time();
    
    int64_t last_res_67481 = futhark_mc_task_76701->free_last_res_67481;
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_task_76701->free_mem_70105, .size =
                                 0, .references =NULL};
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_task_76701->free_mem_70114, .size =
                                 0, .references =NULL};
    int64_t min_res_73932 = futhark_mc_task_76701->free_min_res_73932;
    float defunc_1_f_res_73951 =
          futhark_mc_task_76701->free_defunc_1_f_res_73951;
    float defunc_0_f_res_73952 =
          futhark_mc_task_76701->free_defunc_0_f_res_73952;
    float defunc_2_reduce_res_73954 =
          *futhark_mc_task_76701->retval_defunc_2_reduce_res_73954;
    struct memblock mem_73953 = {.desc ="mem_73953", .mem =
                                 futhark_mc_task_76701->retval_mem_73953,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_74352_cached_sizze_76703 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74352 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74352_cached_sizze_76703 <
        (size_t) ((int64_t) 4 * num_tasks_74351)) {
        reduce_stage_1_tid_res_arr_mem_74352 =
            realloc(reduce_stage_1_tid_res_arr_mem_74352, (int64_t) 4 *
                    num_tasks_74351);
        reduce_stage_1_tid_res_arr_mem_74352_cached_sizze_76703 = (int64_t) 4 *
            num_tasks_74351;
    }
    
    int64_t iter_74354;
    struct futhark_mc_segred_stage_1_parloop_struct_76704
    futhark_mc_segred_stage_1_parloop_struct_76704;
    
    futhark_mc_segred_stage_1_parloop_struct_76704.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_last_res_67481 =
        last_res_67481;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_mem_70105 =
        mem_70105.mem;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_mem_70114 =
        mem_70114.mem;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_min_res_73932 =
        min_res_73932;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_defunc_1_f_res_73951 =
        defunc_1_f_res_73951;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_defunc_0_f_res_73952 =
        defunc_0_f_res_73952;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_mem_73953 =
        mem_73953.mem;
    futhark_mc_segred_stage_1_parloop_struct_76704.free_reduce_stage_1_tid_res_arr_mem_74352 =
        reduce_stage_1_tid_res_arr_mem_74352;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76705_task;
    
    futhark_mc_segred_stage_1_parloop_76705_task.name =
        "futhark_mc_segred_stage_1_parloop_76705";
    futhark_mc_segred_stage_1_parloop_76705_task.fn =
        futhark_mc_segred_stage_1_parloop_76705;
    futhark_mc_segred_stage_1_parloop_76705_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76704;
    futhark_mc_segred_stage_1_parloop_76705_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76705_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76705_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76705_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76705_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76705_task);
    
    if (futhark_mc_segred_stage_1_parloop_76705_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76705_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76705_total_end -
                 futhark_mc_segred_stage_1_parloop_76705_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76705_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76705_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76705_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73954 = 0.0F;
    }
    
    float x_74356;
    float x_74357;
    
    for (int32_t i_74359 = 0; i_74359 < num_tasks_74351; i_74359++) {
        flat_tid_67334 = i_74359;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74356 = defunc_2_reduce_res_73954;
            }
            // load next params
            {
                x_74357 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_74352)[flat_tid_67334];
            }
            // red body
            {
                float defunc_1_op_res_74358 = x_74356 + x_74357;
                
                defunc_2_reduce_res_73954 = defunc_1_op_res_74358;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74352);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76702_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76702_end -
                 futhark_mc_segred_task_76702_start;
        
        ctx->futhark_mc_segred_task_76702_runs[tid]++;
        ctx->futhark_mc_segred_task_76702_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76702_iter[tid] += iterations;
    }
    *futhark_mc_task_76701->retval_defunc_2_reduce_res_73954 =
        defunc_2_reduce_res_73954;
    futhark_mc_task_76701->retval_mem_73953 = mem_73953.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76706 {
    struct futhark_context *ctx;
    int64_t free_last_res_67481;
    char *free_mem_70099;
    int64_t free_min_res_73932;
    char *free_mem_73953;
    float free_a0_73974;
    float *retval_defunc_2_reduce_res_73975;
};
struct futhark_mc_segred_stage_1_parloop_struct_76709 {
    struct futhark_context *ctx;
    int64_t free_last_res_67481;
    char *free_mem_70099;
    int64_t free_min_res_73932;
    char *free_mem_73953;
    float free_a0_73974;
    char *free_reduce_stage_1_tid_res_arr_mem_74361;
};
static int futhark_mc_segred_stage_1_parloop_76710(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67336, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76709
    *futhark_mc_segred_stage_1_parloop_struct_76709 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76709 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76709->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76710_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76710_start = get_wall_time();
    
    int64_t last_res_67481 =
            futhark_mc_segred_stage_1_parloop_struct_76709->free_last_res_67481;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76709->free_mem_70099,
                                 .size =0, .references =NULL};
    int64_t min_res_73932 =
            futhark_mc_segred_stage_1_parloop_struct_76709->free_min_res_73932;
    struct memblock mem_73953 = {.desc ="mem_73953", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76709->free_mem_73953,
                                 .size =0, .references =NULL};
    float a0_73974 =
          futhark_mc_segred_stage_1_parloop_struct_76709->free_a0_73974;
    struct memblock reduce_stage_1_tid_res_arr_mem_74361 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74361",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76709->free_reduce_stage_1_tid_res_arr_mem_74361,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74363 = start;
    float x_74323;
    float x_74324;
    float local_acc_74364 = 0.0F;
    
    for (; iter_74363 < end; iter_74363++) {
        int64_t gtid_67337 = iter_74363;
        float x_74326 = ((float *) mem_73953.mem)[gtid_67337];
        bool cond_74327 = sle64(last_res_67481, gtid_67337);
        float defunc_0_f_res_74328;
        
        if (cond_74327) {
            defunc_0_f_res_74328 = 0.0F;
        } else {
            int64_t i_74329 = add64(gtid_67337, min_res_73932);
            float x_74330 = ((float *) mem_70099.mem)[i_74329];
            
            defunc_0_f_res_74328 = x_74330;
        }
        
        float x_74331 = a0_73974 * x_74326;
        float defunc_9_fit_fun_res_74332 = defunc_0_f_res_74328 * x_74331;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_74323 = local_acc_74364;
        }
        // Load next params
        {
            x_74324 = defunc_9_fit_fun_res_74332;
        }
        // Red body
        {
            float defunc_1_op_res_74325 = x_74323 + x_74324;
            
            local_acc_74364 = defunc_1_op_res_74325;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_74361.mem)[flat_tid_67336] =
        local_acc_74364;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76710_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76710_end -
                 futhark_mc_segred_stage_1_parloop_76710_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76710_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76710_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76710_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76707(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67336 = tid;
    int num_tasks_74360 = info.nsubtasks;
    struct futhark_mc_task_76706 *futhark_mc_task_76706 =
                                 (struct futhark_mc_task_76706 *) args;
    struct futhark_context *ctx = futhark_mc_task_76706->ctx;
    uint64_t futhark_mc_segred_task_76707_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76707_start = get_wall_time();
    
    int64_t last_res_67481 = futhark_mc_task_76706->free_last_res_67481;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_task_76706->free_mem_70099, .size =
                                 0, .references =NULL};
    int64_t min_res_73932 = futhark_mc_task_76706->free_min_res_73932;
    struct memblock mem_73953 = {.desc ="mem_73953", .mem =
                                 futhark_mc_task_76706->free_mem_73953, .size =
                                 0, .references =NULL};
    float a0_73974 = futhark_mc_task_76706->free_a0_73974;
    float defunc_2_reduce_res_73975 =
          *futhark_mc_task_76706->retval_defunc_2_reduce_res_73975;
    size_t reduce_stage_1_tid_res_arr_mem_74361_cached_sizze_76708 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74361 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74361_cached_sizze_76708 <
        (size_t) ((int64_t) 4 * num_tasks_74360)) {
        reduce_stage_1_tid_res_arr_mem_74361 =
            realloc(reduce_stage_1_tid_res_arr_mem_74361, (int64_t) 4 *
                    num_tasks_74360);
        reduce_stage_1_tid_res_arr_mem_74361_cached_sizze_76708 = (int64_t) 4 *
            num_tasks_74360;
    }
    
    int64_t iter_74363;
    struct futhark_mc_segred_stage_1_parloop_struct_76709
    futhark_mc_segred_stage_1_parloop_struct_76709;
    
    futhark_mc_segred_stage_1_parloop_struct_76709.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_last_res_67481 =
        last_res_67481;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_mem_70099 =
        mem_70099.mem;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_min_res_73932 =
        min_res_73932;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_mem_73953 =
        mem_73953.mem;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_a0_73974 = a0_73974;
    futhark_mc_segred_stage_1_parloop_struct_76709.free_reduce_stage_1_tid_res_arr_mem_74361 =
        reduce_stage_1_tid_res_arr_mem_74361;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76710_task;
    
    futhark_mc_segred_stage_1_parloop_76710_task.name =
        "futhark_mc_segred_stage_1_parloop_76710";
    futhark_mc_segred_stage_1_parloop_76710_task.fn =
        futhark_mc_segred_stage_1_parloop_76710;
    futhark_mc_segred_stage_1_parloop_76710_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76709;
    futhark_mc_segred_stage_1_parloop_76710_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76710_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76710_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76710_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76710_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76710_task);
    
    if (futhark_mc_segred_stage_1_parloop_76710_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76710_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76710_total_end -
                 futhark_mc_segred_stage_1_parloop_76710_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76710_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76710_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76710_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73975 = 0.0F;
    }
    
    float x_74365;
    float x_74366;
    
    for (int32_t i_74368 = 0; i_74368 < num_tasks_74360; i_74368++) {
        flat_tid_67336 = i_74368;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74365 = defunc_2_reduce_res_73975;
            }
            // load next params
            {
                x_74366 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_74361)[flat_tid_67336];
            }
            // red body
            {
                float defunc_1_op_res_74367 = x_74365 + x_74366;
                
                defunc_2_reduce_res_73975 = defunc_1_op_res_74367;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74361);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76707_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76707_end -
                 futhark_mc_segred_task_76707_start;
        
        ctx->futhark_mc_segred_task_76707_runs[tid]++;
        ctx->futhark_mc_segred_task_76707_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76707_iter[tid] += iterations;
    }
    *futhark_mc_task_76706->retval_defunc_2_reduce_res_73975 =
        defunc_2_reduce_res_73975;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76694(void *args, int64_t start,
                                           int64_t end, int flat_tid_67330,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76693
    *futhark_mc_segmap_parloop_struct_76693 =
    (struct futhark_mc_segmap_parloop_struct_76693 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76693->ctx;
    uint64_t futhark_mc_segmap_parloop_76694_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76694_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76693->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76693->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76693->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76693->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76693->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76693->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76693->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76693->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76693->free_m_64090;
    int64_t last_res_67481 =
            futhark_mc_segmap_parloop_struct_76693->free_last_res_67481;
    int64_t min_arg_67493 =
            futhark_mc_segmap_parloop_struct_76693->free_min_arg_67493;
    float max_res_67497 =
          futhark_mc_segmap_parloop_struct_76693->free_max_res_67497;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70099,
                                 .size =0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70102,
                                 .size =0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70105,
                                 .size =0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70108,
                                 .size =0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70111,
                                 .size =0, .references =NULL};
    int64_t bytes_70112 =
            futhark_mc_segmap_parloop_struct_76693->free_bytes_70112;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70114,
                                 .size =0, .references =NULL};
    struct memblock mem_70135 = {.desc ="mem_70135", .mem =
                                 futhark_mc_segmap_parloop_struct_76693->free_mem_70135,
                                 .size =0, .references =NULL};
    size_t mem_73953_cached_sizze_76695 = 0;
    char *mem_73953 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74251 = start;
    
    if (mem_73953_cached_sizze_76695 < (size_t) bytes_70112) {
        mem_73953 = realloc(mem_73953, bytes_70112);
        mem_73953_cached_sizze_76695 = bytes_70112;
    }
    for (; iter_74251 < end; iter_74251++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74333 = n_m_64072;
        int64_t gtid_67331 = iter_74251;
        int64_t remnant_74334 = iter_74251 - gtid_67331;
        int64_t min_arg_73854 = mul64(jump_64068, gtid_67331);
        int64_t min_res_73855 = smin64(i_64078, min_arg_73854);
        int64_t defunc_0_g_res_73856 = add64((int64_t) 1, min_res_73855);
        bool nearest_idx_73857;
        int64_t nearest_idx_73858;
        int64_t nearest_idx_73859;
        bool loop_while_74252;
        int64_t low_74253;
        int64_t high_74254;
        
        loop_while_74252 = x_64079;
        low_74253 = (int64_t) 0;
        high_74254 = i_64078;
        while (loop_while_74252) {
            int64_t x_74255 = add64(low_74253, high_74254);
            int64_t mid_74256 = sdiv64(x_74255, (int64_t) 2);
            bool x_74257 = sle64((int64_t) 0, mid_74256);
            bool y_74258 = slt64(mid_74256, n_64064);
            bool bounds_check_74259 = x_74257 && y_74258;
            bool index_certs_74260;
            
            if (!bounds_check_74259) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74256,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_74261 = ((int64_t *) mem_70108.mem)[mid_74256];
            bool cond_74262 = sle64(defunc_0_g_res_73856, x_74261);
            int64_t loopres_74263;
            int64_t loopres_74264;
            
            if (cond_74262) {
                int64_t loopres_t_res_74265 = sub64(mid_74256, (int64_t) 1);
                
                loopres_74263 = low_74253;
                loopres_74264 = loopres_t_res_74265;
            } else {
                int64_t loopres_f_res_74266 = add64((int64_t) 1, mid_74256);
                
                loopres_74263 = loopres_f_res_74266;
                loopres_74264 = high_74254;
            }
            
            bool loop_cond_74267 = sle64(loopres_74263, loopres_74264);
            bool loop_while_tmp_74335 = loop_cond_74267;
            int64_t low_tmp_74336 = loopres_74263;
            int64_t high_tmp_74337 = loopres_74264;
            
            loop_while_74252 = loop_while_tmp_74335;
            low_74253 = low_tmp_74336;
            high_74254 = high_tmp_74337;
        }
        nearest_idx_73857 = loop_while_74252;
        nearest_idx_73858 = low_74253;
        nearest_idx_73859 = high_74254;
        
        int64_t max_arg_73876 = sub64(nearest_idx_73858, min_res_64084);
        int64_t max_res_73877 = smax64((int64_t) 0, max_arg_73876);
        int64_t j_73878 = add64(min_res_64084, max_res_73877);
        int64_t i_p_m_t_s_73879 = add64(m_64090, max_res_73877);
        bool zzero_leq_i_p_m_t_s_73880 = sle64((int64_t) 0, i_p_m_t_s_73879);
        bool i_p_m_t_s_leq_w_73881 = slt64(i_p_m_t_s_73879, n_64064);
        bool zzero_lte_i_73882 = sle64((int64_t) 0, max_res_73877);
        bool i_lte_j_73883 = sle64(max_res_73877, j_73878);
        bool y_73884 = i_p_m_t_s_leq_w_73881 && zzero_lte_i_73882;
        bool y_73885 = zzero_leq_i_p_m_t_s_73880 && y_73884;
        bool y_73886 = i_lte_j_73883 && y_73885;
        bool forwards_ok_73887 = zzero_lte_i_73882 && y_73886;
        bool ok_or_empty_73888 = empty_slice_64089 || forwards_ok_73887;
        bool index_certs_73889;
        
        if (!ok_or_empty_73888) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_73877, ":",
                          (long long) j_73878,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_73890;
        int64_t flat_tid_67332 = (int64_t) 0;
        int32_t num_tasks_74338;
        struct futhark_mc_task_76696 futhark_mc_task_76696;
        
        futhark_mc_task_76696.ctx = ctx;
        futhark_mc_task_76696.free_mem_70111 = mem_70111.mem;
        futhark_mc_task_76696.free_defunc_0_g_res_73856 = defunc_0_g_res_73856;
        futhark_mc_task_76696.free_max_res_73877 = max_res_73877;
        futhark_mc_task_76696.retval_defunc_2_reduce_res_73890 =
            &defunc_2_reduce_res_73890;
        
        struct scheduler_segop futhark_mc_task_76696_task;
        
        futhark_mc_task_76696_task.args = &futhark_mc_task_76696;
        futhark_mc_task_76696_task.top_level_fn = futhark_mc_segred_task_76697;
        futhark_mc_task_76696_task.name = "futhark_mc_segred_task_76697";
        futhark_mc_task_76696_task.iterations = min_res_64084;
        futhark_mc_task_76696_task.task_time =
            &ctx->futhark_mc_segred_task_76697_total_time;
        futhark_mc_task_76696_task.task_iter =
            &ctx->futhark_mc_segred_task_76697_total_iter;
        futhark_mc_task_76696_task.sched = STATIC;
        futhark_mc_task_76696_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76697_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76696_task);
        
        if (futhark_mc_segred_task_76697_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_73898;
        int64_t idx_73899;
        int64_t idx_73900;
        int64_t idx_73901;
        int64_t best_idx_74276;
        int64_t last_idx_74277;
        int64_t best_sum_74278;
        int64_t curr_sum_74279;
        
        best_idx_74276 = max_res_73877;
        last_idx_74277 = max_res_73877;
        best_sum_74278 = defunc_2_reduce_res_73890;
        curr_sum_74279 = defunc_2_reduce_res_73890;
        for (int64_t j_74275 = 0; j_74275 < min_res_64084; j_74275++) {
            int64_t new_idx_74280 = add64(max_res_73877, j_74275);
            int64_t x_74281 = add64(min_res_64084, new_idx_74280);
            bool cond_74282 = slt64(last_res_67481, x_74281);
            int64_t new_sum_74283;
            
            if (cond_74282) {
                new_sum_74283 = (int64_t) 9223372036854775807;
            } else {
                bool x_74284 = sle64((int64_t) 0, last_idx_74277);
                bool y_74285 = slt64(last_idx_74277, n_64064);
                bool bounds_check_74286 = x_74284 && y_74285;
                bool index_certs_74287;
                
                if (!bounds_check_74286) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_74277,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_74288 = ((int64_t *) mem_70111.mem)[last_idx_74277];
                int64_t binop_p_74289 = sub64(defunc_0_g_res_73856, y_74288);
                int64_t defunc_0_f_res_74290 = abs64(binop_p_74289);
                int64_t x_74291 = sub64(curr_sum_74279, defunc_0_f_res_74290);
                int64_t min_arg_74292 = add64(min_res_64084, last_idx_74277);
                int64_t min_res_74293 = smin64(i_64078, min_arg_74292);
                bool x_74294 = sle64((int64_t) 0, min_res_74293);
                bool y_74295 = slt64(min_res_74293, n_64064);
                bool bounds_check_74296 = x_74294 && y_74295;
                bool index_certs_74297;
                
                if (!bounds_check_74296) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_74293,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_74298 = ((int64_t *) mem_70111.mem)[min_res_74293];
                int64_t binop_p_74299 = sub64(defunc_0_g_res_73856, y_74298);
                int64_t defunc_0_f_res_74300 = abs64(binop_p_74299);
                int64_t new_sum_f_res_74301 = add64(x_74291,
                                                    defunc_0_f_res_74300);
                
                new_sum_74283 = new_sum_f_res_74301;
            }
            
            bool cond_74302 = sle64(new_sum_74283, best_sum_74278);
            int64_t loopres_74303;
            
            if (cond_74302) {
                loopres_74303 = new_idx_74280;
            } else {
                loopres_74303 = best_idx_74276;
            }
            
            int64_t loopres_74304;
            
            if (cond_74302) {
                loopres_74304 = new_sum_74283;
            } else {
                loopres_74304 = best_sum_74278;
            }
            
            int64_t best_idx_tmp_74347 = loopres_74303;
            int64_t last_idx_tmp_74348 = new_idx_74280;
            int64_t best_sum_tmp_74349 = loopres_74304;
            int64_t curr_sum_tmp_74350 = new_sum_74283;
            
            best_idx_74276 = best_idx_tmp_74347;
            last_idx_74277 = last_idx_tmp_74348;
            best_sum_74278 = best_sum_tmp_74349;
            curr_sum_74279 = curr_sum_tmp_74350;
        }
        idx_73898 = best_idx_74276;
        idx_73899 = last_idx_74277;
        idx_73900 = best_sum_74278;
        idx_73901 = curr_sum_74279;
        
        int64_t min_res_73932 = smin64(min_arg_67493, idx_73898);
        int64_t x_73933 = add64(min_res_64084, min_res_73932);
        int64_t r_73934 = sub64(x_73933, (int64_t) 1);
        bool x_73935 = sle64((int64_t) 0, r_73934);
        bool y_73936 = slt64(r_73934, n_64064);
        bool bounds_check_73937 = x_73935 && y_73936;
        bool index_certs_73938;
        
        if (!bounds_check_73937) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73934,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_73939 = ((int64_t *) mem_70102.mem)[r_73934];
        int64_t abs_arg_73940 = sub64(x_73939, min_res_73855);
        int64_t abs_res_73941 = abs64(abs_arg_73940);
        bool x_73942 = sle64((int64_t) 0, min_res_73932);
        bool y_73943 = slt64(min_res_73932, n_64064);
        bool bounds_check_73944 = x_73942 && y_73943;
        bool index_certs_73945;
        
        if (!bounds_check_73944) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73932,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_73946 = ((int64_t *) mem_70102.mem)[min_res_73932];
        int64_t abs_arg_73947 = sub64(x_73946, min_res_73855);
        int64_t abs_res_73948 = abs64(abs_arg_73947);
        int64_t max_res_73949 = smax64(abs_res_73941, abs_res_73948);
        float defunc_0_f_res_73950 = sitofp_i64_f32(max_res_73949);
        float defunc_1_f_res_73951 = max_res_67497 + defunc_0_f_res_73950;
        float defunc_0_f_res_73952 = sitofp_i64_f32(min_res_73855);
        float defunc_2_reduce_res_73954;
        int64_t flat_tid_67334 = (int64_t) 0;
        int32_t num_tasks_74351;
        struct futhark_mc_task_76701 futhark_mc_task_76701;
        
        futhark_mc_task_76701.ctx = ctx;
        futhark_mc_task_76701.free_last_res_67481 = last_res_67481;
        futhark_mc_task_76701.free_mem_70105 = mem_70105.mem;
        futhark_mc_task_76701.free_mem_70114 = mem_70114.mem;
        futhark_mc_task_76701.free_min_res_73932 = min_res_73932;
        futhark_mc_task_76701.free_defunc_1_f_res_73951 = defunc_1_f_res_73951;
        futhark_mc_task_76701.free_defunc_0_f_res_73952 = defunc_0_f_res_73952;
        futhark_mc_task_76701.retval_defunc_2_reduce_res_73954 =
            &defunc_2_reduce_res_73954;
        futhark_mc_task_76701.retval_mem_73953 = mem_73953;
        
        struct scheduler_segop futhark_mc_task_76701_task;
        
        futhark_mc_task_76701_task.args = &futhark_mc_task_76701;
        futhark_mc_task_76701_task.top_level_fn = futhark_mc_segred_task_76702;
        futhark_mc_task_76701_task.name = "futhark_mc_segred_task_76702";
        futhark_mc_task_76701_task.iterations = q_64066;
        futhark_mc_task_76701_task.task_time =
            &ctx->futhark_mc_segred_task_76702_total_time;
        futhark_mc_task_76701_task.task_iter =
            &ctx->futhark_mc_segred_task_76702_total_iter;
        futhark_mc_task_76701_task.sched = STATIC;
        futhark_mc_task_76701_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76702_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76701_task);
        
        if (futhark_mc_segred_task_76702_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_73974 = 1.0F / defunc_2_reduce_res_73954;
        float defunc_2_reduce_res_73975;
        int64_t flat_tid_67336 = (int64_t) 0;
        int32_t num_tasks_74360;
        struct futhark_mc_task_76706 futhark_mc_task_76706;
        
        futhark_mc_task_76706.ctx = ctx;
        futhark_mc_task_76706.free_last_res_67481 = last_res_67481;
        futhark_mc_task_76706.free_mem_70099 = mem_70099.mem;
        futhark_mc_task_76706.free_min_res_73932 = min_res_73932;
        futhark_mc_task_76706.free_mem_73953 = mem_73953;
        futhark_mc_task_76706.free_a0_73974 = a0_73974;
        futhark_mc_task_76706.retval_defunc_2_reduce_res_73975 =
            &defunc_2_reduce_res_73975;
        
        struct scheduler_segop futhark_mc_task_76706_task;
        
        futhark_mc_task_76706_task.args = &futhark_mc_task_76706;
        futhark_mc_task_76706_task.top_level_fn = futhark_mc_segred_task_76707;
        futhark_mc_task_76706_task.name = "futhark_mc_segred_task_76707";
        futhark_mc_task_76706_task.iterations = q_64066;
        futhark_mc_task_76706_task.task_time =
            &ctx->futhark_mc_segred_task_76707_total_time;
        futhark_mc_task_76706_task.task_iter =
            &ctx->futhark_mc_segred_task_76707_total_iter;
        futhark_mc_task_76706_task.sched = STATIC;
        futhark_mc_task_76706_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76707_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76706_task);
        
        if (futhark_mc_segred_task_76707_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70135.mem)[gtid_67331] = defunc_2_reduce_res_73975;
    }
    
  cleanup:
    { }
    free(mem_73953);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76694_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76694_end -
                 futhark_mc_segmap_parloop_76694_start;
        
        ctx->futhark_mc_segmap_parloop_76694_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76694_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76694_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76692(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67330 = tid;
    int num_tasks_74153 = info.nsubtasks;
    struct futhark_mc_task_76687 *futhark_mc_task_76687 =
                                 (struct futhark_mc_task_76687 *) args;
    struct futhark_context *ctx = futhark_mc_task_76687->ctx;
    uint64_t futhark_mc_segmap_nested_task_76692_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76692_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76687->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76687->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76687->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76687->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76687->free_i_64078;
    bool x_64079 = futhark_mc_task_76687->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76687->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76687->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76687->free_m_64090;
    int64_t last_res_67481 = futhark_mc_task_76687->free_last_res_67481;
    int64_t min_arg_67493 = futhark_mc_task_76687->free_min_arg_67493;
    float max_res_67497 = futhark_mc_task_76687->free_max_res_67497;
    struct memblock mem_70099 = {.desc ="mem_70099", .mem =
                                 futhark_mc_task_76687->free_mem_70099, .size =
                                 0, .references =NULL};
    struct memblock mem_70102 = {.desc ="mem_70102", .mem =
                                 futhark_mc_task_76687->free_mem_70102, .size =
                                 0, .references =NULL};
    struct memblock mem_70105 = {.desc ="mem_70105", .mem =
                                 futhark_mc_task_76687->free_mem_70105, .size =
                                 0, .references =NULL};
    struct memblock mem_70108 = {.desc ="mem_70108", .mem =
                                 futhark_mc_task_76687->free_mem_70108, .size =
                                 0, .references =NULL};
    struct memblock mem_70111 = {.desc ="mem_70111", .mem =
                                 futhark_mc_task_76687->free_mem_70111, .size =
                                 0, .references =NULL};
    int64_t bytes_70112 = futhark_mc_task_76687->free_bytes_70112;
    struct memblock mem_70114 = {.desc ="mem_70114", .mem =
                                 futhark_mc_task_76687->free_mem_70114, .size =
                                 0, .references =NULL};
    struct memblock mem_70135 = {.desc ="mem_70135", .mem =
                                 futhark_mc_task_76687->free_mem_70135, .size =
                                 0, .references =NULL};
    int64_t iter_74251;
    struct futhark_mc_segmap_parloop_struct_76693
    futhark_mc_segmap_parloop_struct_76693;
    
    futhark_mc_segmap_parloop_struct_76693.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76693.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76693.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76693.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76693.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76693.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76693.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76693.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76693.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76693.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76693.free_last_res_67481 = last_res_67481;
    futhark_mc_segmap_parloop_struct_76693.free_min_arg_67493 = min_arg_67493;
    futhark_mc_segmap_parloop_struct_76693.free_max_res_67497 = max_res_67497;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70099 = mem_70099.mem;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70102 = mem_70102.mem;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70105 = mem_70105.mem;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70108 = mem_70108.mem;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70111 = mem_70111.mem;
    futhark_mc_segmap_parloop_struct_76693.free_bytes_70112 = bytes_70112;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70114 = mem_70114.mem;
    futhark_mc_segmap_parloop_struct_76693.free_mem_70135 = mem_70135.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76694_task;
    
    futhark_mc_segmap_parloop_76694_task.name =
        "futhark_mc_segmap_parloop_76694";
    futhark_mc_segmap_parloop_76694_task.fn = futhark_mc_segmap_parloop_76694;
    futhark_mc_segmap_parloop_76694_task.args =
        &futhark_mc_segmap_parloop_struct_76693;
    futhark_mc_segmap_parloop_76694_task.iterations = iterations;
    futhark_mc_segmap_parloop_76694_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76694_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76694_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76694_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76694_task);
    
    if (futhark_mc_segmap_parloop_76694_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76694_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76694_total_end -
                 futhark_mc_segmap_parloop_76694_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76694_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76694_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76694_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76692_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76692_end -
                 futhark_mc_segmap_nested_task_76692_start;
        
        ctx->futhark_mc_segmap_nested_task_76692_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76692_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76692_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76659(void *args, int64_t start,
                                           int64_t end, int flat_tid_67318,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76658
    *futhark_mc_segmap_parloop_struct_76658 =
    (struct futhark_mc_segmap_parloop_struct_76658 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76658->ctx;
    uint64_t futhark_mc_segmap_parloop_76659_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76659_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76658->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76658->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76658->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76658->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76658->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76658->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76658->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76658->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76658->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76658->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76658->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76658->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70094 =
            futhark_mc_segmap_parloop_struct_76658->free_bytes_70094;
    int64_t bytes_70097 =
            futhark_mc_segmap_parloop_struct_76658->free_bytes_70097;
    int64_t bytes_70112 =
            futhark_mc_segmap_parloop_struct_76658->free_bytes_70112;
    int64_t bytes_70133 =
            futhark_mc_segmap_parloop_struct_76658->free_bytes_70133;
    struct memblock mem_70274 = {.desc ="mem_70274", .mem =
                                 futhark_mc_segmap_parloop_struct_76658->free_mem_70274,
                                 .size =0, .references =NULL};
    size_t mem_70096_cached_sizze_76660 = 0;
    char *mem_70096 = NULL;
    size_t mem_70099_cached_sizze_76661 = 0;
    char *mem_70099 = NULL;
    size_t mem_70102_cached_sizze_76662 = 0;
    char *mem_70102 = NULL;
    size_t mem_70105_cached_sizze_76663 = 0;
    char *mem_70105 = NULL;
    size_t mem_70108_cached_sizze_76664 = 0;
    char *mem_70108 = NULL;
    size_t mem_70111_cached_sizze_76665 = 0;
    char *mem_70111 = NULL;
    size_t mem_70114_cached_sizze_76666 = 0;
    char *mem_70114 = NULL;
    size_t mem_70135_cached_sizze_76667 = 0;
    char *mem_70135 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73833 = start;
    
    if (mem_70096_cached_sizze_76660 < (size_t) bytes_70094) {
        mem_70096 = realloc(mem_70096, bytes_70094);
        mem_70096_cached_sizze_76660 = bytes_70094;
    }
    if (mem_70099_cached_sizze_76661 < (size_t) bytes_70097) {
        mem_70099 = realloc(mem_70099, bytes_70097);
        mem_70099_cached_sizze_76661 = bytes_70097;
    }
    if (mem_70102_cached_sizze_76662 < (size_t) bytes_70094) {
        mem_70102 = realloc(mem_70102, bytes_70094);
        mem_70102_cached_sizze_76662 = bytes_70094;
    }
    if (mem_70105_cached_sizze_76663 < (size_t) bytes_70097) {
        mem_70105 = realloc(mem_70105, bytes_70097);
        mem_70105_cached_sizze_76663 = bytes_70097;
    }
    if (mem_70108_cached_sizze_76664 < (size_t) bytes_70094) {
        mem_70108 = realloc(mem_70108, bytes_70094);
        mem_70108_cached_sizze_76664 = bytes_70094;
    }
    if (mem_70111_cached_sizze_76665 < (size_t) bytes_70094) {
        mem_70111 = realloc(mem_70111, bytes_70094);
        mem_70111_cached_sizze_76665 = bytes_70094;
    }
    if (mem_70114_cached_sizze_76666 < (size_t) bytes_70112) {
        mem_70114 = realloc(mem_70114, bytes_70112);
        mem_70114_cached_sizze_76666 = bytes_70112;
    }
    if (mem_70135_cached_sizze_76667 < (size_t) bytes_70133) {
        mem_70135 = realloc(mem_70135, bytes_70133);
        mem_70135_cached_sizze_76667 = bytes_70133;
    }
    for (; iter_73833 < end; iter_73833++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74121 = m_64063;
        int64_t gtid_67319 = iter_73833;
        int64_t remnant_74122 = iter_73833 - gtid_67319;
        int64_t flat_tid_67320 = (int64_t) 0;
        int32_t num_tasks_74123;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76668 futhark_mc_task_76668;
        
        futhark_mc_task_76668.ctx = ctx;
        futhark_mc_task_76668.free_n_64064 = n_64064;
        futhark_mc_task_76668.free_gtid_67319 = gtid_67319;
        futhark_mc_task_76668.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76668.free_mem_70096 = mem_70096;
        
        struct scheduler_segop futhark_mc_task_76668_task;
        
        futhark_mc_task_76668_task.args = &futhark_mc_task_76668;
        futhark_mc_task_76668_task.top_level_fn = futhark_mc_segscan_task_76669;
        futhark_mc_task_76668_task.name = "futhark_mc_segscan_task_76669";
        futhark_mc_task_76668_task.iterations = n_64064;
        futhark_mc_task_76668_task.task_time =
            &ctx->futhark_mc_segscan_task_76669_total_time;
        futhark_mc_task_76668_task.task_iter =
            &ctx->futhark_mc_segscan_task_76669_total_iter;
        futhark_mc_task_76668_task.sched = STATIC;
        futhark_mc_task_76668_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76669_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76668_task);
        
        if (futhark_mc_segscan_task_76669_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_67481 = ((int64_t *) mem_70096)[i_64078];
        
        for (int64_t i_74137 = 0; i_74137 < n_64064; i_74137++) {
            ((float *) mem_70099)[i_74137] = 0.0F;
        }
        for (int64_t i_74138 = 0; i_74138 < n_64064; i_74138++) {
            ((int64_t *) mem_70102)[i_74138] = (int64_t) -1;
        }
        
        int64_t flat_tid_67322 = (int64_t) 0;
        int32_t num_tasks_74139;
        struct futhark_mc_task_76675 futhark_mc_task_76675;
        
        futhark_mc_task_76675.ctx = ctx;
        futhark_mc_task_76675.free_n_64064 = n_64064;
        futhark_mc_task_76675.free_gtid_67319 = gtid_67319;
        futhark_mc_task_76675.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76675.free_mem_70096 = mem_70096;
        futhark_mc_task_76675.free_mem_70099 = mem_70099;
        futhark_mc_task_76675.free_mem_70102 = mem_70102;
        
        struct scheduler_segop futhark_mc_task_76675_task;
        
        futhark_mc_task_76675_task.args = &futhark_mc_task_76675;
        futhark_mc_task_76675_task.top_level_fn = futhark_mc_segmap_task_76676;
        futhark_mc_task_76675_task.name = "futhark_mc_segmap_task_76676";
        futhark_mc_task_76675_task.iterations = n_64064;
        futhark_mc_task_76675_task.task_time =
            &ctx->futhark_mc_segmap_task_76676_total_time;
        futhark_mc_task_76675_task.task_iter =
            &ctx->futhark_mc_segmap_task_76676_total_iter;
        futhark_mc_task_76675_task.sched = STATIC;
        futhark_mc_task_76675_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76676_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76675_task);
        
        if (futhark_mc_segmap_task_76676_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_67493 = sub64(last_res_67481, min_res_64084);
        float i64_res_67494 = sitofp_i64_f32(last_res_67481);
        float x_67495 = i64_res_64091 - i64_res_67494;
        float max_arg_67496 = x_67495 / 2.0F;
        float max_res_67497 = fmax32(0.0F, max_arg_67496);
        int64_t flat_tid_67324 = (int64_t) 0;
        int32_t num_tasks_74145;
        struct futhark_mc_task_76679 futhark_mc_task_76679;
        
        futhark_mc_task_76679.ctx = ctx;
        futhark_mc_task_76679.free_n_64064 = n_64064;
        futhark_mc_task_76679.free_mem_70102 = mem_70102;
        futhark_mc_task_76679.free_mem_70105 = mem_70105;
        futhark_mc_task_76679.free_mem_70108 = mem_70108;
        futhark_mc_task_76679.free_mem_70111 = mem_70111;
        
        struct scheduler_segop futhark_mc_task_76679_task;
        
        futhark_mc_task_76679_task.args = &futhark_mc_task_76679;
        futhark_mc_task_76679_task.top_level_fn = futhark_mc_segmap_task_76680;
        futhark_mc_task_76679_task.name = "futhark_mc_segmap_task_76680";
        futhark_mc_task_76679_task.iterations = n_64064;
        futhark_mc_task_76679_task.task_time =
            &ctx->futhark_mc_segmap_task_76680_total_time;
        futhark_mc_task_76679_task.task_iter =
            &ctx->futhark_mc_segmap_task_76680_total_iter;
        futhark_mc_task_76679_task.sched = STATIC;
        futhark_mc_task_76679_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76680_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76679_task);
        
        if (futhark_mc_segmap_task_76680_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67326 = (int64_t) 0;
        int32_t num_tasks_74149;
        struct futhark_mc_task_76683 futhark_mc_task_76683;
        
        futhark_mc_task_76683.ctx = ctx;
        futhark_mc_task_76683.free_q_64066 = q_64066;
        futhark_mc_task_76683.free_last_res_67481 = last_res_67481;
        futhark_mc_task_76683.free_mem_70114 = mem_70114;
        
        struct scheduler_segop futhark_mc_task_76683_task;
        
        futhark_mc_task_76683_task.args = &futhark_mc_task_76683;
        futhark_mc_task_76683_task.top_level_fn = futhark_mc_segmap_task_76684;
        futhark_mc_task_76683_task.name = "futhark_mc_segmap_task_76684";
        futhark_mc_task_76683_task.iterations = q_64066;
        futhark_mc_task_76683_task.task_time =
            &ctx->futhark_mc_segmap_task_76684_total_time;
        futhark_mc_task_76683_task.task_iter =
            &ctx->futhark_mc_segmap_task_76684_total_iter;
        futhark_mc_task_76683_task.sched = STATIC;
        futhark_mc_task_76683_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76684_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76683_task);
        
        if (futhark_mc_segmap_task_76684_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67328 = (int64_t) 0;
        int32_t num_tasks_74153;
        int64_t flat_tid_67330 = (int64_t) 0;
        struct futhark_mc_task_76687 futhark_mc_task_76687;
        
        futhark_mc_task_76687.ctx = ctx;
        futhark_mc_task_76687.free_n_64064 = n_64064;
        futhark_mc_task_76687.free_q_64066 = q_64066;
        futhark_mc_task_76687.free_jump_64068 = jump_64068;
        futhark_mc_task_76687.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76687.free_i_64078 = i_64078;
        futhark_mc_task_76687.free_x_64079 = x_64079;
        futhark_mc_task_76687.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76687.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76687.free_m_64090 = m_64090;
        futhark_mc_task_76687.free_last_res_67481 = last_res_67481;
        futhark_mc_task_76687.free_min_arg_67493 = min_arg_67493;
        futhark_mc_task_76687.free_max_res_67497 = max_res_67497;
        futhark_mc_task_76687.free_mem_70099 = mem_70099;
        futhark_mc_task_76687.free_mem_70102 = mem_70102;
        futhark_mc_task_76687.free_mem_70105 = mem_70105;
        futhark_mc_task_76687.free_mem_70108 = mem_70108;
        futhark_mc_task_76687.free_mem_70111 = mem_70111;
        futhark_mc_task_76687.free_bytes_70112 = bytes_70112;
        futhark_mc_task_76687.free_mem_70114 = mem_70114;
        futhark_mc_task_76687.free_mem_70135 = mem_70135;
        
        struct scheduler_segop futhark_mc_task_76687_task;
        
        futhark_mc_task_76687_task.args = &futhark_mc_task_76687;
        futhark_mc_task_76687_task.top_level_fn = futhark_mc_segmap_task_76688;
        futhark_mc_task_76687_task.name = "futhark_mc_segmap_task_76688";
        futhark_mc_task_76687_task.iterations = n_m_64072;
        futhark_mc_task_76687_task.task_time =
            &ctx->futhark_mc_segmap_task_76688_total_time;
        futhark_mc_task_76687_task.task_iter =
            &ctx->futhark_mc_segmap_task_76688_total_iter;
        futhark_mc_task_76687_task.sched = DYNAMIC;
        futhark_mc_task_76687_task.nested_fn =
            futhark_mc_segmap_nested_task_76692;
        
        int futhark_mc_segmap_task_76688_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76687_task);
        
        if (futhark_mc_segmap_task_76688_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70274.mem + gtid_67319 * n_m_64072 * (int64_t) 4,
                mem_70135 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70096);
    free(mem_70099);
    free(mem_70102);
    free(mem_70105);
    free(mem_70108);
    free(mem_70111);
    free(mem_70114);
    free(mem_70135);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76659_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76659_end -
                 futhark_mc_segmap_parloop_76659_start;
        
        ctx->futhark_mc_segmap_parloop_76659_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76659_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76659_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76657(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67318 = tid;
    int num_tasks_73632 = info.nsubtasks;
    struct futhark_mc_task_76644 *futhark_mc_task_76644 =
                                 (struct futhark_mc_task_76644 *) args;
    struct futhark_context *ctx = futhark_mc_task_76644->ctx;
    uint64_t futhark_mc_segmap_nested_task_76657_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76657_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76644->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76644->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76644->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76644->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76644->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76644->free_i_64078;
    bool x_64079 = futhark_mc_task_76644->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76644->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76644->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76644->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76644->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76644->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70094 = futhark_mc_task_76644->free_bytes_70094;
    int64_t bytes_70097 = futhark_mc_task_76644->free_bytes_70097;
    int64_t bytes_70112 = futhark_mc_task_76644->free_bytes_70112;
    int64_t bytes_70133 = futhark_mc_task_76644->free_bytes_70133;
    struct memblock mem_70274 = {.desc ="mem_70274", .mem =
                                 futhark_mc_task_76644->free_mem_70274, .size =
                                 0, .references =NULL};
    int64_t iter_73833;
    struct futhark_mc_segmap_parloop_struct_76658
    futhark_mc_segmap_parloop_struct_76658;
    
    futhark_mc_segmap_parloop_struct_76658.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76658.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76658.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76658.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76658.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76658.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76658.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76658.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76658.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76658.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76658.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76658.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76658.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76658.free_bytes_70094 = bytes_70094;
    futhark_mc_segmap_parloop_struct_76658.free_bytes_70097 = bytes_70097;
    futhark_mc_segmap_parloop_struct_76658.free_bytes_70112 = bytes_70112;
    futhark_mc_segmap_parloop_struct_76658.free_bytes_70133 = bytes_70133;
    futhark_mc_segmap_parloop_struct_76658.free_mem_70274 = mem_70274.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76659_task;
    
    futhark_mc_segmap_parloop_76659_task.name =
        "futhark_mc_segmap_parloop_76659";
    futhark_mc_segmap_parloop_76659_task.fn = futhark_mc_segmap_parloop_76659;
    futhark_mc_segmap_parloop_76659_task.args =
        &futhark_mc_segmap_parloop_struct_76658;
    futhark_mc_segmap_parloop_76659_task.iterations = iterations;
    futhark_mc_segmap_parloop_76659_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76659_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76659_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76659_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76659_task);
    
    if (futhark_mc_segmap_parloop_76659_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76659_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76659_total_end -
                 futhark_mc_segmap_parloop_76659_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76659_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76659_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76659_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76657_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76657_end -
                 futhark_mc_segmap_nested_task_76657_start;
        
        ctx->futhark_mc_segmap_nested_task_76657_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76657_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76657_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76711 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70275;
    int64_t free_bytes_70278;
    int64_t free_bytes_70293;
    int64_t free_bytes_70332;
    char *free_mem_70506;
    char *free_mem_70510;
};
struct futhark_mc_segmap_parloop_struct_76713 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70275;
    int64_t free_bytes_70278;
    int64_t free_bytes_70293;
    int64_t free_bytes_70332;
    char *free_mem_70506;
    char *free_mem_70510;
};
static int futhark_mc_segmap_parloop_76714(void *args, int64_t start,
                                           int64_t end, int flat_tid_67779,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76713
    *futhark_mc_segmap_parloop_struct_76713 =
    (struct futhark_mc_segmap_parloop_struct_76713 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76713->ctx;
    uint64_t futhark_mc_segmap_parloop_76714_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76714_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76713->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76713->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76713->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76713->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76713->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76713->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76713->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76713->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76713->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76713->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76713->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76713->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70275 =
            futhark_mc_segmap_parloop_struct_76713->free_bytes_70275;
    int64_t bytes_70278 =
            futhark_mc_segmap_parloop_struct_76713->free_bytes_70278;
    int64_t bytes_70293 =
            futhark_mc_segmap_parloop_struct_76713->free_bytes_70293;
    int64_t bytes_70332 =
            futhark_mc_segmap_parloop_struct_76713->free_bytes_70332;
    struct memblock mem_70506 = {.desc ="mem_70506", .mem =
                                 futhark_mc_segmap_parloop_struct_76713->free_mem_70506,
                                 .size =0, .references =NULL};
    struct memblock mem_70510 = {.desc ="mem_70510", .mem =
                                 futhark_mc_segmap_parloop_struct_76713->free_mem_70510,
                                 .size =0, .references =NULL};
    size_t mem_70340_cached_sizze_76715 = 0;
    char *mem_70340 = NULL;
    size_t mem_70355_cached_sizze_76716 = 0;
    char *mem_70355 = NULL;
    size_t mem_70358_cached_sizze_76717 = 0;
    char *mem_70358 = NULL;
    size_t mem_70385_cached_sizze_76718 = 0;
    char *mem_70385 = NULL;
    size_t mem_70388_cached_sizze_76719 = 0;
    char *mem_70388 = NULL;
    size_t mem_70391_cached_sizze_76720 = 0;
    char *mem_70391 = NULL;
    size_t mem_70430_cached_sizze_76721 = 0;
    char *mem_70430 = NULL;
    size_t mem_70445_cached_sizze_76722 = 0;
    char *mem_70445 = NULL;
    size_t mem_70448_cached_sizze_76723 = 0;
    char *mem_70448 = NULL;
    size_t mem_70465_cached_sizze_76724 = 0;
    char *mem_70465 = NULL;
    size_t mem_70468_cached_sizze_76725 = 0;
    char *mem_70468 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74370 = start;
    
    if (mem_70340_cached_sizze_76715 < (size_t) bytes_70275) {
        mem_70340 = realloc(mem_70340, bytes_70275);
        mem_70340_cached_sizze_76715 = bytes_70275;
    }
    if (mem_70355_cached_sizze_76716 < (size_t) bytes_70278) {
        mem_70355 = realloc(mem_70355, bytes_70278);
        mem_70355_cached_sizze_76716 = bytes_70278;
    }
    if (mem_70358_cached_sizze_76717 < (size_t) bytes_70275) {
        mem_70358 = realloc(mem_70358, bytes_70275);
        mem_70358_cached_sizze_76717 = bytes_70275;
    }
    if (mem_70385_cached_sizze_76718 < (size_t) bytes_70278) {
        mem_70385 = realloc(mem_70385, bytes_70278);
        mem_70385_cached_sizze_76718 = bytes_70278;
    }
    if (mem_70388_cached_sizze_76719 < (size_t) bytes_70275) {
        mem_70388 = realloc(mem_70388, bytes_70275);
        mem_70388_cached_sizze_76719 = bytes_70275;
    }
    if (mem_70391_cached_sizze_76720 < (size_t) bytes_70275) {
        mem_70391 = realloc(mem_70391, bytes_70275);
        mem_70391_cached_sizze_76720 = bytes_70275;
    }
    if (mem_70430_cached_sizze_76721 < (size_t) bytes_70293) {
        mem_70430 = realloc(mem_70430, bytes_70293);
        mem_70430_cached_sizze_76721 = bytes_70293;
    }
    if (mem_70445_cached_sizze_76722 < (size_t) bytes_70332) {
        mem_70445 = realloc(mem_70445, bytes_70332);
        mem_70445_cached_sizze_76722 = bytes_70332;
    }
    if (mem_70448_cached_sizze_76723 < (size_t) bytes_70332) {
        mem_70448 = realloc(mem_70448, bytes_70332);
        mem_70448_cached_sizze_76723 = bytes_70332;
    }
    if (mem_70465_cached_sizze_76724 < (size_t) bytes_70293) {
        mem_70465 = realloc(mem_70465, bytes_70293);
        mem_70465_cached_sizze_76724 = bytes_70293;
    }
    if (mem_70468_cached_sizze_76725 < (size_t) bytes_70293) {
        mem_70468 = realloc(mem_70468, bytes_70293);
        mem_70468_cached_sizze_76725 = bytes_70293;
    }
    for (; iter_74370 < end; iter_74370++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74577 = m_64063;
        int64_t gtid_67780 = iter_74370;
        int64_t remnant_74578 = iter_74370 - gtid_67780;
        int64_t discard_69351;
        int64_t scanacc_74372 = (int64_t) 0;
        
        for (int64_t i_74371 = 0; i_74371 < n_64064; i_74371++) {
            float x_74374 = ((float *) Y_mem_69593.mem)[gtid_67780 * n_64064 +
                                                        i_74371];
            bool isnan_res_74375;
            
            isnan_res_74375 = futrts_isnan32(x_74374);
            
            bool defunc_0_p_res_74376 = !isnan_res_74375;
            int64_t defunc_0_f_res_74377 = btoi_bool_i64(defunc_0_p_res_74376);
            int64_t defunc_1_op_res_74378 = add64(defunc_0_f_res_74377,
                                                  scanacc_74372);
            
            ((int64_t *) mem_70340)[i_74371] = defunc_1_op_res_74378;
            
            int64_t scanacc_tmp_74579 = defunc_1_op_res_74378;
            
            scanacc_74372 = scanacc_tmp_74579;
        }
        discard_69351 = scanacc_74372;
        
        int64_t last_res_64997 = ((int64_t *) mem_70340)[i_64078];
        
        for (int64_t i_74581 = 0; i_74581 < n_64064; i_74581++) {
            ((float *) mem_70355)[i_74581] = 0.0F;
        }
        for (int64_t i_74582 = 0; i_74582 < n_64064; i_74582++) {
            ((int64_t *) mem_70358)[i_74582] = (int64_t) -1;
        }
        for (int64_t write_iter_74380 = 0; write_iter_74380 < n_64064;
             write_iter_74380++) {
            float write_iv_74383 = ((float *) Y_mem_69593.mem)[gtid_67780 *
                                                               n_64064 +
                                                               write_iter_74380];
            bool isnan_res_74384;
            
            isnan_res_74384 = futrts_isnan32(write_iv_74383);
            
            bool defunc_0_p_res_74385 = !isnan_res_74384;
            int64_t defunc_1_f_res_74386;
            
            if (defunc_0_p_res_74385) {
                int64_t write_iv_74387 =
                        ((int64_t *) mem_70340)[write_iter_74380];
                int64_t defunc_1_f_res_t_res_74388 = sub64(write_iv_74387,
                                                           (int64_t) 1);
                
                defunc_1_f_res_74386 = defunc_1_f_res_t_res_74388;
            } else {
                defunc_1_f_res_74386 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_74386) &&
                slt64(defunc_1_f_res_74386, n_64064)) {
                ((int64_t *) mem_70358)[defunc_1_f_res_74386] =
                    write_iter_74380;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_74386) &&
                slt64(defunc_1_f_res_74386, n_64064)) {
                memmove(mem_70355 + defunc_1_f_res_74386 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_67780 * n_64064 +
                                           write_iter_74380) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_65015 = sub64(last_res_64997, min_res_64084);
        float i64_res_65016 = sitofp_i64_f32(last_res_64997);
        float x_65017 = i64_res_64091 - i64_res_65016;
        float max_arg_65018 = x_65017 / 2.0F;
        float max_res_65019 = fmax32(0.0F, max_arg_65018);
        
        for (int64_t i_74392 = 0; i_74392 < n_64064; i_74392++) {
            int64_t x_74396 = ((int64_t *) mem_70358)[i_74392];
            int64_t defunc_0_f_res_74397 = add64((int64_t) 1, x_74396);
            bool cond_74398 = slt64(defunc_0_f_res_74397, (int64_t) 0);
            int64_t defunc_0_f_res_74399;
            
            if (cond_74398) {
                defunc_0_f_res_74399 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_74399 = defunc_0_f_res_74397;
            }
            
            float defunc_0_f_res_74400 = sitofp_i64_f32(x_74396);
            
            ((float *) mem_70385)[i_74392] = defunc_0_f_res_74400;
            ((int64_t *) mem_70388)[i_74392] = defunc_0_f_res_74399;
            ((int64_t *) mem_70391)[i_74392] = defunc_0_f_res_74397;
        }
        for (int64_t i_74404 = 0; i_74404 < q_64066; i_74404++) {
            bool cond_74406 = sle64(last_res_64997, i_74404);
            float defunc_0_f_res_74407;
            
            if (cond_74406) {
                defunc_0_f_res_74407 = 0.0F;
            } else {
                defunc_0_f_res_74407 = 1.0F;
            }
            ((float *) mem_70430)[i_74404] = defunc_0_f_res_74407;
        }
        for (int64_t i_74409 = 0; i_74409 < n_m_64072; i_74409++) {
            int64_t min_arg_74412 = mul64(jump_64068, i_74409);
            int64_t min_res_74413 = smin64(i_64078, min_arg_74412);
            int64_t defunc_0_g_res_74414 = add64((int64_t) 1, min_res_74413);
            bool nearest_idx_74415;
            int64_t nearest_idx_74416;
            int64_t nearest_idx_74417;
            bool loop_while_74418;
            int64_t low_74419;
            int64_t high_74420;
            
            loop_while_74418 = x_64079;
            low_74419 = (int64_t) 0;
            high_74420 = i_64078;
            while (loop_while_74418) {
                int64_t x_74421 = add64(low_74419, high_74420);
                int64_t mid_74422 = sdiv64(x_74421, (int64_t) 2);
                bool x_74423 = sle64((int64_t) 0, mid_74422);
                bool y_74424 = slt64(mid_74422, n_64064);
                bool bounds_check_74425 = x_74423 && y_74424;
                bool index_certs_74426;
                
                if (!bounds_check_74425) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_74422,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_74427 = ((int64_t *) mem_70388)[mid_74422];
                bool cond_74428 = sle64(defunc_0_g_res_74414, x_74427);
                int64_t loopres_74429;
                int64_t loopres_74430;
                
                if (cond_74428) {
                    int64_t loopres_t_res_74431 = sub64(mid_74422, (int64_t) 1);
                    
                    loopres_74429 = low_74419;
                    loopres_74430 = loopres_t_res_74431;
                } else {
                    int64_t loopres_f_res_74432 = add64((int64_t) 1, mid_74422);
                    
                    loopres_74429 = loopres_f_res_74432;
                    loopres_74430 = high_74420;
                }
                
                bool loop_cond_74433 = sle64(loopres_74429, loopres_74430);
                bool loop_while_tmp_74591 = loop_cond_74433;
                int64_t low_tmp_74592 = loopres_74429;
                int64_t high_tmp_74593 = loopres_74430;
                
                loop_while_74418 = loop_while_tmp_74591;
                low_74419 = low_tmp_74592;
                high_74420 = high_tmp_74593;
            }
            nearest_idx_74415 = loop_while_74418;
            nearest_idx_74416 = low_74419;
            nearest_idx_74417 = high_74420;
            
            int64_t max_arg_74434 = sub64(nearest_idx_74416, min_res_64084);
            int64_t max_res_74435 = smax64((int64_t) 0, max_arg_74434);
            int64_t j_74436 = add64(min_res_64084, max_res_74435);
            int64_t i_p_m_t_s_74437 = add64(m_64090, max_res_74435);
            bool zzero_leq_i_p_m_t_s_74438 = sle64((int64_t) 0,
                                                   i_p_m_t_s_74437);
            bool i_p_m_t_s_leq_w_74439 = slt64(i_p_m_t_s_74437, n_64064);
            bool zzero_lte_i_74440 = sle64((int64_t) 0, max_res_74435);
            bool i_lte_j_74441 = sle64(max_res_74435, j_74436);
            bool y_74442 = i_p_m_t_s_leq_w_74439 && zzero_lte_i_74440;
            bool y_74443 = zzero_leq_i_p_m_t_s_74438 && y_74442;
            bool y_74444 = i_lte_j_74441 && y_74443;
            bool forwards_ok_74445 = zzero_lte_i_74440 && y_74444;
            bool ok_or_empty_74446 = empty_slice_64089 || forwards_ok_74445;
            bool index_certs_74447;
            
            if (!ok_or_empty_74446) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_74435, ":",
                              (long long) j_74436,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_74448;
            int64_t redout_74450 = (int64_t) 0;
            
            for (int64_t i_74449 = 0; i_74449 < min_res_64084; i_74449++) {
                int64_t slice_74451 = max_res_74435 + i_74449;
                int64_t x_74452 = ((int64_t *) mem_70391)[slice_74451];
                int64_t abs_arg_74453 = sub64(x_74452, defunc_0_g_res_74414);
                int64_t abs_res_74454 = abs64(abs_arg_74453);
                int64_t defunc_1_op_res_74455 = add64(abs_res_74454,
                                                      redout_74450);
                int64_t redout_tmp_74594 = defunc_1_op_res_74455;
                
                redout_74450 = redout_tmp_74594;
            }
            defunc_2_reduce_res_74448 = redout_74450;
            
            int64_t idx_74456;
            int64_t idx_74457;
            int64_t idx_74458;
            int64_t idx_74459;
            int64_t best_idx_74461;
            int64_t last_idx_74462;
            int64_t best_sum_74463;
            int64_t curr_sum_74464;
            
            best_idx_74461 = max_res_74435;
            last_idx_74462 = max_res_74435;
            best_sum_74463 = defunc_2_reduce_res_74448;
            curr_sum_74464 = defunc_2_reduce_res_74448;
            for (int64_t j_74460 = 0; j_74460 < min_res_64084; j_74460++) {
                int64_t new_idx_74465 = add64(max_res_74435, j_74460);
                int64_t x_74466 = add64(min_res_64084, new_idx_74465);
                bool cond_74467 = slt64(last_res_64997, x_74466);
                int64_t new_sum_74468;
                
                if (cond_74467) {
                    new_sum_74468 = (int64_t) 9223372036854775807;
                } else {
                    bool x_74469 = sle64((int64_t) 0, last_idx_74462);
                    bool y_74470 = slt64(last_idx_74462, n_64064);
                    bool bounds_check_74471 = x_74469 && y_74470;
                    bool index_certs_74472;
                    
                    if (!bounds_check_74471) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_74462,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_74473 = ((int64_t *) mem_70391)[last_idx_74462];
                    int64_t binop_p_74474 = sub64(defunc_0_g_res_74414,
                                                  y_74473);
                    int64_t defunc_0_f_res_74475 = abs64(binop_p_74474);
                    int64_t x_74476 = sub64(curr_sum_74464,
                                            defunc_0_f_res_74475);
                    int64_t min_arg_74477 = add64(min_res_64084,
                                                  last_idx_74462);
                    int64_t min_res_74478 = smin64(i_64078, min_arg_74477);
                    bool x_74479 = sle64((int64_t) 0, min_res_74478);
                    bool y_74480 = slt64(min_res_74478, n_64064);
                    bool bounds_check_74481 = x_74479 && y_74480;
                    bool index_certs_74482;
                    
                    if (!bounds_check_74481) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_74478,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_74483 = ((int64_t *) mem_70391)[min_res_74478];
                    int64_t binop_p_74484 = sub64(defunc_0_g_res_74414,
                                                  y_74483);
                    int64_t defunc_0_f_res_74485 = abs64(binop_p_74484);
                    int64_t new_sum_f_res_74486 = add64(x_74476,
                                                        defunc_0_f_res_74485);
                    
                    new_sum_74468 = new_sum_f_res_74486;
                }
                
                bool cond_74487 = sle64(new_sum_74468, best_sum_74463);
                int64_t loopres_74488;
                
                if (cond_74487) {
                    loopres_74488 = new_idx_74465;
                } else {
                    loopres_74488 = best_idx_74461;
                }
                
                int64_t loopres_74489;
                
                if (cond_74487) {
                    loopres_74489 = new_sum_74468;
                } else {
                    loopres_74489 = best_sum_74463;
                }
                
                int64_t best_idx_tmp_74595 = loopres_74488;
                int64_t last_idx_tmp_74596 = new_idx_74465;
                int64_t best_sum_tmp_74597 = loopres_74489;
                int64_t curr_sum_tmp_74598 = new_sum_74468;
                
                best_idx_74461 = best_idx_tmp_74595;
                last_idx_74462 = last_idx_tmp_74596;
                best_sum_74463 = best_sum_tmp_74597;
                curr_sum_74464 = curr_sum_tmp_74598;
            }
            idx_74456 = best_idx_74461;
            idx_74457 = last_idx_74462;
            idx_74458 = best_sum_74463;
            idx_74459 = curr_sum_74464;
            
            int64_t min_res_74490 = smin64(min_arg_65015, idx_74456);
            int64_t x_74491 = add64(min_res_64084, min_res_74490);
            int64_t r_74492 = sub64(x_74491, (int64_t) 1);
            bool x_74493 = sle64((int64_t) 0, r_74492);
            bool y_74494 = slt64(r_74492, n_64064);
            bool bounds_check_74495 = x_74493 && y_74494;
            bool index_certs_74496;
            
            if (!bounds_check_74495) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_74492,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_74497 = ((int64_t *) mem_70358)[r_74492];
            int64_t abs_arg_74498 = sub64(x_74497, min_res_74413);
            int64_t abs_res_74499 = abs64(abs_arg_74498);
            bool x_74500 = sle64((int64_t) 0, min_res_74490);
            bool y_74501 = slt64(min_res_74490, n_64064);
            bool bounds_check_74502 = x_74500 && y_74501;
            bool index_certs_74503;
            
            if (!bounds_check_74502) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_74490,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_74504 = ((int64_t *) mem_70358)[min_res_74490];
            int64_t abs_arg_74505 = sub64(x_74504, min_res_74413);
            int64_t abs_res_74506 = abs64(abs_arg_74505);
            int64_t max_res_74507 = smax64(abs_res_74499, abs_res_74506);
            float defunc_0_f_res_74508 = sitofp_i64_f32(max_res_74507);
            float defunc_1_f_res_74509 = max_res_65019 + defunc_0_f_res_74508;
            float defunc_0_f_res_74510 = sitofp_i64_f32(min_res_74413);
            float defunc_2_reduce_res_74513;
            float defunc_2_reduce_res_74514;
            float defunc_2_reduce_res_74515;
            float redout_74519;
            float redout_74520;
            float redout_74521;
            
            redout_74519 = 0.0F;
            redout_74520 = 0.0F;
            redout_74521 = 0.0F;
            for (int64_t i_74518 = 0; i_74518 < q_64066; i_74518++) {
                float x_74524 = ((float *) mem_70430)[i_74518];
                bool cond_74525 = sle64(last_res_64997, i_74518);
                float defunc_0_f_res_74526;
                
                if (cond_74525) {
                    defunc_0_f_res_74526 = 0.0F;
                } else {
                    int64_t i_74527 = add64(min_res_74490, i_74518);
                    float x_74528 = ((float *) mem_70385)[i_74527];
                    float defunc_0_f_res_f_res_74529 = 1.0F + x_74528;
                    
                    defunc_0_f_res_74526 = defunc_0_f_res_f_res_74529;
                }
                
                float x_j_74530 = defunc_0_f_res_74526 - defunc_0_f_res_74510;
                float abs_res_74531 = (float) fabs(x_j_74530);
                float tmp1_74532 = abs_res_74531 / defunc_1_f_res_74509;
                float x_74533 = tmp1_74532 * tmp1_74532;
                float y_74534 = tmp1_74532 * x_74533;
                float tmp2_74535 = 1.0F - y_74534;
                float x_74536 = tmp2_74535 * tmp2_74535;
                float tmp3_74537 = tmp2_74535 * x_74536;
                float tmp4_74538 = x_74524 * tmp3_74537;
                float defunc_1_f_res_74539 = x_j_74530 * tmp4_74538;
                float defunc_1_f_res_74540 = x_j_74530 * defunc_1_f_res_74539;
                float defunc_1_op_res_74541 = tmp4_74538 + redout_74519;
                float defunc_1_op_res_74542 = defunc_1_f_res_74539 +
                      redout_74520;
                float defunc_1_op_res_74543 = defunc_1_f_res_74540 +
                      redout_74521;
                
                ((float *) mem_70465)[i_74518] = defunc_1_f_res_74539;
                ((float *) mem_70468)[i_74518] = tmp4_74538;
                
                float redout_tmp_74599 = defunc_1_op_res_74541;
                float redout_tmp_74600 = defunc_1_op_res_74542;
                float redout_tmp_74601 = defunc_1_op_res_74543;
                
                redout_74519 = redout_tmp_74599;
                redout_74520 = redout_tmp_74600;
                redout_74521 = redout_tmp_74601;
            }
            defunc_2_reduce_res_74513 = redout_74519;
            defunc_2_reduce_res_74514 = redout_74520;
            defunc_2_reduce_res_74515 = redout_74521;
            
            float x_74546 = defunc_2_reduce_res_74513 *
                  defunc_2_reduce_res_74515;
            float y_74547 = defunc_2_reduce_res_74514 *
                  defunc_2_reduce_res_74514;
            float y_74548 = x_74546 - y_74547;
            float det1_74549 = 1.0F / y_74548;
            float a11_74550 = defunc_2_reduce_res_74515 * det1_74549;
            float negate_arg_74551 = defunc_2_reduce_res_74514 * det1_74549;
            float b11_74552 = 0.0F - negate_arg_74551;
            float c11_74553 = defunc_2_reduce_res_74513 * det1_74549;
            float defunc_2_reduce_res_74554;
            float defunc_2_reduce_res_74555;
            float redout_74557;
            float redout_74558;
            
            redout_74557 = 0.0F;
            redout_74558 = 0.0F;
            for (int64_t i_74556 = 0; i_74556 < q_64066; i_74556++) {
                float x_74559 = ((float *) mem_70468)[i_74556];
                float x_74560 = ((float *) mem_70465)[i_74556];
                bool cond_74561 = sle64(last_res_64997, i_74556);
                float defunc_0_f_res_74562;
                
                if (cond_74561) {
                    defunc_0_f_res_74562 = 0.0F;
                } else {
                    int64_t i_74563 = add64(min_res_74490, i_74556);
                    float x_74564 = ((float *) mem_70355)[i_74563];
                    
                    defunc_0_f_res_74562 = x_74564;
                }
                
                float x_74565 = a11_74550 * x_74559;
                float y_74566 = b11_74552 * x_74560;
                float x_74567 = x_74565 + y_74566;
                float defunc_9_fit_fun_res_74568 = defunc_0_f_res_74562 *
                      x_74567;
                float x_74569 = b11_74552 * x_74559;
                float y_74570 = c11_74553 * x_74560;
                float x_74571 = x_74569 + y_74570;
                float defunc_9_slope_fun_res_74572 = defunc_0_f_res_74562 *
                      x_74571;
                float defunc_1_op_res_74573 = defunc_9_fit_fun_res_74568 +
                      redout_74557;
                float defunc_1_op_res_74574 = defunc_9_slope_fun_res_74572 +
                      redout_74558;
                float redout_tmp_74604 = defunc_1_op_res_74573;
                float redout_tmp_74605 = defunc_1_op_res_74574;
                
                redout_74557 = redout_tmp_74604;
                redout_74558 = redout_tmp_74605;
            }
            defunc_2_reduce_res_74554 = redout_74557;
            defunc_2_reduce_res_74555 = redout_74558;
            ((float *) mem_70445)[i_74409] = defunc_2_reduce_res_74554;
            ((float *) mem_70448)[i_74409] = defunc_2_reduce_res_74555;
        }
        memmove(mem_70506.mem + gtid_67780 * n_m_64072 * (int64_t) 4,
                mem_70445 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70510.mem + gtid_67780 * n_m_64072 * (int64_t) 4,
                mem_70448 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70340);
    free(mem_70355);
    free(mem_70358);
    free(mem_70385);
    free(mem_70388);
    free(mem_70391);
    free(mem_70430);
    free(mem_70445);
    free(mem_70448);
    free(mem_70465);
    free(mem_70468);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76714_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76714_end -
                 futhark_mc_segmap_parloop_76714_start;
        
        ctx->futhark_mc_segmap_parloop_76714_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76714_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76714_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76712(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67779 = tid;
    int num_tasks_74369 = info.nsubtasks;
    struct futhark_mc_task_76711 *futhark_mc_task_76711 =
                                 (struct futhark_mc_task_76711 *) args;
    struct futhark_context *ctx = futhark_mc_task_76711->ctx;
    uint64_t futhark_mc_segmap_task_76712_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76712_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76711->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76711->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76711->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76711->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76711->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76711->free_i_64078;
    bool x_64079 = futhark_mc_task_76711->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76711->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76711->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76711->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76711->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76711->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70275 = futhark_mc_task_76711->free_bytes_70275;
    int64_t bytes_70278 = futhark_mc_task_76711->free_bytes_70278;
    int64_t bytes_70293 = futhark_mc_task_76711->free_bytes_70293;
    int64_t bytes_70332 = futhark_mc_task_76711->free_bytes_70332;
    struct memblock mem_70506 = {.desc ="mem_70506", .mem =
                                 futhark_mc_task_76711->free_mem_70506, .size =
                                 0, .references =NULL};
    struct memblock mem_70510 = {.desc ="mem_70510", .mem =
                                 futhark_mc_task_76711->free_mem_70510, .size =
                                 0, .references =NULL};
    int64_t iter_74370;
    struct futhark_mc_segmap_parloop_struct_76713
    futhark_mc_segmap_parloop_struct_76713;
    
    futhark_mc_segmap_parloop_struct_76713.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76713.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76713.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76713.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76713.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76713.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76713.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76713.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76713.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76713.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76713.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76713.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76713.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76713.free_bytes_70275 = bytes_70275;
    futhark_mc_segmap_parloop_struct_76713.free_bytes_70278 = bytes_70278;
    futhark_mc_segmap_parloop_struct_76713.free_bytes_70293 = bytes_70293;
    futhark_mc_segmap_parloop_struct_76713.free_bytes_70332 = bytes_70332;
    futhark_mc_segmap_parloop_struct_76713.free_mem_70506 = mem_70506.mem;
    futhark_mc_segmap_parloop_struct_76713.free_mem_70510 = mem_70510.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76714_task;
    
    futhark_mc_segmap_parloop_76714_task.name =
        "futhark_mc_segmap_parloop_76714";
    futhark_mc_segmap_parloop_76714_task.fn = futhark_mc_segmap_parloop_76714;
    futhark_mc_segmap_parloop_76714_task.args =
        &futhark_mc_segmap_parloop_struct_76713;
    futhark_mc_segmap_parloop_76714_task.iterations = iterations;
    futhark_mc_segmap_parloop_76714_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76714_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76714_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76714_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76714_task);
    
    if (futhark_mc_segmap_parloop_76714_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76714_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76714_total_end -
                 futhark_mc_segmap_parloop_76714_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76714_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76714_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76714_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76712_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76712_end -
                 futhark_mc_segmap_task_76712_start;
        
        ctx->futhark_mc_segmap_task_76712_runs[tid]++;
        ctx->futhark_mc_segmap_task_76712_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76712_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76727 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70275;
    int64_t free_bytes_70278;
    int64_t free_bytes_70293;
    int64_t free_bytes_70332;
    char *free_mem_70506;
    char *free_mem_70510;
};
struct futhark_mc_task_76738 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67782;
    char *free_Y_mem_69593;
    char *free_mem_70277;
};
struct futhark_mc_scan_stage_1_parloop_struct_76741 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67782;
    char *free_Y_mem_69593;
    char *free_mem_70277;
};
static int futhark_mc_scan_stage_1_parloop_76742(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67783, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76741
    *futhark_mc_scan_stage_1_parloop_struct_76741 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76741 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76741->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76742_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76742_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76741->free_n_64064;
    int64_t gtid_67782 =
            futhark_mc_scan_stage_1_parloop_struct_76741->free_gtid_67782;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76741->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70277 = {.desc ="mem_70277", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76741->free_mem_70277,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74957 = start;
    int64_t x_74607;
    int64_t x_74608;
    
    x_74607 = (int64_t) 0;
    for (; iter_74957 < end; iter_74957++) {
        int64_t gtid_67784 = iter_74957;
        
        // stage 1 scan body
        {
            float x_74610 = ((float *) Y_mem_69593.mem)[gtid_67782 * n_64064 +
                                                        gtid_67784];
            bool isnan_res_74611;
            
            isnan_res_74611 = futrts_isnan32(x_74610);
            
            bool defunc_0_p_res_74612 = !isnan_res_74611;
            int64_t defunc_0_f_res_74613 = btoi_bool_i64(defunc_0_p_res_74612);
            
            // write mapped values results to memory
            { }
            x_74607 = x_74607;
            // Read next values
            {
                x_74608 = defunc_0_f_res_74613;
            }
            
            int64_t defunc_1_op_res_74609 = add64(x_74607, x_74608);
            
            ((int64_t *) mem_70277.mem)[gtid_67784] = defunc_1_op_res_74609;
            x_74607 = defunc_1_op_res_74609;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76742_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76742_end -
                 futhark_mc_scan_stage_1_parloop_76742_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76742_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76742_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76742_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76743 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67782;
    char *free_Y_mem_69593;
    char *free_mem_70277;
};
static int futhark_mc_scan_stage_3_parloop_76744(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67783, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76743
    *futhark_mc_scan_stage_3_parloop_struct_76743 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76743 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76743->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76744_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76744_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76743->free_n_64064;
    int64_t gtid_67782 =
            futhark_mc_scan_stage_3_parloop_struct_76743->free_gtid_67782;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76743->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70277 = {.desc ="mem_70277", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76743->free_mem_70277,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74969 = start;
    int64_t x_74966;
    int64_t x_74967;
    
    if (iter_74969 == (int64_t) 0) {
        x_74966 = (int64_t) 0;
    } else {
        x_74966 = ((int64_t *) mem_70277.mem)[iter_74969 - (int64_t) 1];
    }
    for (; iter_74969 < end; iter_74969++) {
        int64_t gtid_67784 = iter_74969;
        
        // stage 3 scan body
        {
            float x_74610 = ((float *) Y_mem_69593.mem)[gtid_67782 * n_64064 +
                                                        gtid_67784];
            bool isnan_res_74611;
            
            isnan_res_74611 = futrts_isnan32(x_74610);
            
            bool defunc_0_p_res_74612 = !isnan_res_74611;
            int64_t defunc_0_f_res_74613 = btoi_bool_i64(defunc_0_p_res_74612);
            
            x_74966 = x_74966;
            x_74967 = defunc_0_f_res_74613;
            
            int64_t defunc_1_op_res_74968 = add64(x_74966, x_74967);
            
            ((int64_t *) mem_70277.mem)[gtid_67784] = defunc_1_op_res_74968;
            x_74966 = defunc_1_op_res_74968;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76744_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76744_end -
                 futhark_mc_scan_stage_3_parloop_76744_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76744_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76744_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76744_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76739(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67783 = tid;
    int num_tasks_74956 = info.nsubtasks;
    struct futhark_mc_task_76738 *futhark_mc_task_76738 =
                                 (struct futhark_mc_task_76738 *) args;
    struct futhark_context *ctx = futhark_mc_task_76738->ctx;
    uint64_t futhark_mc_segscan_task_76739_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76739_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76738->free_n_64064;
    int64_t gtid_67782 = futhark_mc_task_76738->free_gtid_67782;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76738->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70277 = {.desc ="mem_70277", .mem =
                                 futhark_mc_task_76738->free_mem_70277, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_74963_cached_sizze_76740 = 0;
    char *scan_stage_2_accum_mem_74963 = NULL;
    int64_t iter_74957;
    struct futhark_mc_scan_stage_1_parloop_struct_76741
    futhark_mc_scan_stage_1_parloop_struct_76741;
    
    futhark_mc_scan_stage_1_parloop_struct_76741.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76741.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76741.free_gtid_67782 = gtid_67782;
    futhark_mc_scan_stage_1_parloop_struct_76741.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76741.free_mem_70277 = mem_70277.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76742_task;
    
    futhark_mc_scan_stage_1_parloop_76742_task.name =
        "futhark_mc_scan_stage_1_parloop_76742";
    futhark_mc_scan_stage_1_parloop_76742_task.fn =
        futhark_mc_scan_stage_1_parloop_76742;
    futhark_mc_scan_stage_1_parloop_76742_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76741;
    futhark_mc_scan_stage_1_parloop_76742_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76742_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76742_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76742_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76742_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76742_task);
    
    if (futhark_mc_scan_stage_1_parloop_76742_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76742_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76742_total_end -
                 futhark_mc_scan_stage_1_parloop_76742_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76742_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76742_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76742_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_74956)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_74958;
        int64_t x_74959;
        int64_t offset_74961 = (int64_t) 0;
        int64_t offset_index_74962 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_74963_cached_sizze_76740 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_74963 = realloc(scan_stage_2_accum_mem_74963,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_74963_cached_sizze_76740 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_74963)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_74965 = 0; i_74965 < num_tasks_74956 - 1; i_74965++) {
            offset_74961 = squot64(n_64064, sext_i32_i64(num_tasks_74956));
            if (slt64(sext_i32_i64(i_74965), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_74956)))) {
                offset_74961 += (int64_t) 1;
            }
            offset_index_74962 += offset_74961;
            
            int64_t gtid_67784 = offset_index_74962;
            float x_74610 = ((float *) Y_mem_69593.mem)[gtid_67782 * n_64064 +
                                                        gtid_67784];
            bool isnan_res_74611;
            
            isnan_res_74611 = futrts_isnan32(x_74610);
            
            bool defunc_0_p_res_74612 = !isnan_res_74611;
            int64_t defunc_0_f_res_74613 = btoi_bool_i64(defunc_0_p_res_74612);
            
            // Read carry in
            {
                x_74958 =
                    ((int64_t *) scan_stage_2_accum_mem_74963)[(int64_t) 0];
            }
            // Read next values
            {
                x_74959 = ((int64_t *) mem_70277.mem)[offset_index_74962 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_74960 = add64(x_74958, x_74959);
            
            ((int64_t *) mem_70277.mem)[offset_index_74962 - (int64_t) 1] =
                defunc_1_op_res_74960;
            ((int64_t *) scan_stage_2_accum_mem_74963)[(int64_t) 0] =
                defunc_1_op_res_74960;
        }
        
        int64_t iter_74969 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76743
        futhark_mc_scan_stage_3_parloop_struct_76743;
        
        futhark_mc_scan_stage_3_parloop_struct_76743.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76743.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76743.free_gtid_67782 =
            gtid_67782;
        futhark_mc_scan_stage_3_parloop_struct_76743.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76743.free_mem_70277 =
            mem_70277.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76744_task;
        
        futhark_mc_scan_stage_3_parloop_76744_task.name =
            "futhark_mc_scan_stage_3_parloop_76744";
        futhark_mc_scan_stage_3_parloop_76744_task.fn =
            futhark_mc_scan_stage_3_parloop_76744;
        futhark_mc_scan_stage_3_parloop_76744_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76743;
        futhark_mc_scan_stage_3_parloop_76744_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76744_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76744_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76744_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76744_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76744_task);
        
        if (futhark_mc_scan_stage_3_parloop_76744_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76744_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76744_total_end -
                     futhark_mc_scan_stage_3_parloop_76744_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76744_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76744_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76744_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_74963);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76739_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76739_end -
                 futhark_mc_segscan_task_76739_start;
        
        ctx->futhark_mc_segscan_task_76739_runs[tid]++;
        ctx->futhark_mc_segscan_task_76739_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76739_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76745 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67782;
    char *free_Y_mem_69593;
    char *free_mem_70277;
    char *free_mem_70280;
    char *free_mem_70283;
};
struct futhark_mc_segmap_parloop_struct_76747 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_67782;
    char *free_Y_mem_69593;
    char *free_mem_70277;
    char *free_mem_70280;
    char *free_mem_70283;
};
static int futhark_mc_segmap_parloop_76748(void *args, int64_t start,
                                           int64_t end, int flat_tid_67785,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76747
    *futhark_mc_segmap_parloop_struct_76747 =
    (struct futhark_mc_segmap_parloop_struct_76747 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76747->ctx;
    uint64_t futhark_mc_segmap_parloop_76748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76748_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76747->free_n_64064;
    int64_t gtid_67782 =
            futhark_mc_segmap_parloop_struct_76747->free_gtid_67782;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76747->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70277 = {.desc ="mem_70277", .mem =
                                 futhark_mc_segmap_parloop_struct_76747->free_mem_70277,
                                 .size =0, .references =NULL};
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_segmap_parloop_struct_76747->free_mem_70280,
                                 .size =0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_segmap_parloop_struct_76747->free_mem_70283,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74973 = start;
    
    for (; iter_74973 < end; iter_74973++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74976 = n_64064;
        int64_t gtid_67786 = iter_74973;
        int64_t remnant_74977 = iter_74973 - gtid_67786;
        float x_74614 = ((float *) Y_mem_69593.mem)[gtid_67782 * n_64064 +
                                                    gtid_67786];
        bool isnan_res_74615;
        
        isnan_res_74615 = futrts_isnan32(x_74614);
        
        bool defunc_0_p_res_74616 = !isnan_res_74615;
        int64_t defunc_1_f_res_74617;
        
        if (defunc_0_p_res_74616) {
            int64_t x_74974 = ((int64_t *) mem_70277.mem)[gtid_67786];
            int64_t defunc_1_f_res_t_res_74975 = sub64(x_74974, (int64_t) 1);
            
            defunc_1_f_res_74617 = defunc_1_f_res_t_res_74975;
        } else {
            defunc_1_f_res_74617 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_74617) &&
            slt64(defunc_1_f_res_74617, n_64064)) {
            ((int64_t *) mem_70283.mem)[defunc_1_f_res_74617] = gtid_67786;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_74617) &&
            slt64(defunc_1_f_res_74617, n_64064)) {
            ((float *) mem_70280.mem)[defunc_1_f_res_74617] = x_74614;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76748_end -
                 futhark_mc_segmap_parloop_76748_start;
        
        ctx->futhark_mc_segmap_parloop_76748_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76748_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76748_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76746(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67785 = tid;
    int num_tasks_74972 = info.nsubtasks;
    struct futhark_mc_task_76745 *futhark_mc_task_76745 =
                                 (struct futhark_mc_task_76745 *) args;
    struct futhark_context *ctx = futhark_mc_task_76745->ctx;
    uint64_t futhark_mc_segmap_task_76746_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76746_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76745->free_n_64064;
    int64_t gtid_67782 = futhark_mc_task_76745->free_gtid_67782;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76745->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70277 = {.desc ="mem_70277", .mem =
                                 futhark_mc_task_76745->free_mem_70277, .size =
                                 0, .references =NULL};
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_task_76745->free_mem_70280, .size =
                                 0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_task_76745->free_mem_70283, .size =
                                 0, .references =NULL};
    int64_t iter_74973;
    struct futhark_mc_segmap_parloop_struct_76747
    futhark_mc_segmap_parloop_struct_76747;
    
    futhark_mc_segmap_parloop_struct_76747.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76747.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76747.free_gtid_67782 = gtid_67782;
    futhark_mc_segmap_parloop_struct_76747.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76747.free_mem_70277 = mem_70277.mem;
    futhark_mc_segmap_parloop_struct_76747.free_mem_70280 = mem_70280.mem;
    futhark_mc_segmap_parloop_struct_76747.free_mem_70283 = mem_70283.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76748_task;
    
    futhark_mc_segmap_parloop_76748_task.name =
        "futhark_mc_segmap_parloop_76748";
    futhark_mc_segmap_parloop_76748_task.fn = futhark_mc_segmap_parloop_76748;
    futhark_mc_segmap_parloop_76748_task.args =
        &futhark_mc_segmap_parloop_struct_76747;
    futhark_mc_segmap_parloop_76748_task.iterations = iterations;
    futhark_mc_segmap_parloop_76748_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76748_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76748_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76748_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76748_task);
    
    if (futhark_mc_segmap_parloop_76748_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76748_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76748_total_end -
                 futhark_mc_segmap_parloop_76748_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76746_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76746_end -
                 futhark_mc_segmap_task_76746_start;
        
        ctx->futhark_mc_segmap_task_76746_runs[tid]++;
        ctx->futhark_mc_segmap_task_76746_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76746_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76749 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70283;
    char *free_mem_70286;
    char *free_mem_70289;
    char *free_mem_70292;
};
struct futhark_mc_segmap_parloop_struct_76751 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70283;
    char *free_mem_70286;
    char *free_mem_70289;
    char *free_mem_70292;
};
static int futhark_mc_segmap_parloop_76752(void *args, int64_t start,
                                           int64_t end, int flat_tid_67787,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76751
    *futhark_mc_segmap_parloop_struct_76751 =
    (struct futhark_mc_segmap_parloop_struct_76751 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76751->ctx;
    uint64_t futhark_mc_segmap_parloop_76752_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76752_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76751->free_n_64064;
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_segmap_parloop_struct_76751->free_mem_70283,
                                 .size =0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_segmap_parloop_struct_76751->free_mem_70286,
                                 .size =0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_segmap_parloop_struct_76751->free_mem_70289,
                                 .size =0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_segmap_parloop_struct_76751->free_mem_70292,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74979 = start;
    
    for (; iter_74979 < end; iter_74979++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74980 = n_64064;
        int64_t gtid_67788 = iter_74979;
        int64_t remnant_74981 = iter_74979 - gtid_67788;
        int64_t x_74620 = ((int64_t *) mem_70283.mem)[gtid_67788];
        int64_t defunc_0_f_res_74621 = add64((int64_t) 1, x_74620);
        bool cond_74622 = slt64(defunc_0_f_res_74621, (int64_t) 0);
        int64_t defunc_0_f_res_74623;
        
        if (cond_74622) {
            defunc_0_f_res_74623 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_74623 = defunc_0_f_res_74621;
        }
        
        float defunc_0_f_res_74624 = sitofp_i64_f32(x_74620);
        
        ((float *) mem_70286.mem)[gtid_67788] = defunc_0_f_res_74624;
        ((int64_t *) mem_70289.mem)[gtid_67788] = defunc_0_f_res_74623;
        ((int64_t *) mem_70292.mem)[gtid_67788] = defunc_0_f_res_74621;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76752_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76752_end -
                 futhark_mc_segmap_parloop_76752_start;
        
        ctx->futhark_mc_segmap_parloop_76752_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76752_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76752_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76750(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67787 = tid;
    int num_tasks_74978 = info.nsubtasks;
    struct futhark_mc_task_76749 *futhark_mc_task_76749 =
                                 (struct futhark_mc_task_76749 *) args;
    struct futhark_context *ctx = futhark_mc_task_76749->ctx;
    uint64_t futhark_mc_segmap_task_76750_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76750_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76749->free_n_64064;
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_task_76749->free_mem_70283, .size =
                                 0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_task_76749->free_mem_70286, .size =
                                 0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_task_76749->free_mem_70289, .size =
                                 0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_task_76749->free_mem_70292, .size =
                                 0, .references =NULL};
    int64_t iter_74979;
    struct futhark_mc_segmap_parloop_struct_76751
    futhark_mc_segmap_parloop_struct_76751;
    
    futhark_mc_segmap_parloop_struct_76751.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76751.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76751.free_mem_70283 = mem_70283.mem;
    futhark_mc_segmap_parloop_struct_76751.free_mem_70286 = mem_70286.mem;
    futhark_mc_segmap_parloop_struct_76751.free_mem_70289 = mem_70289.mem;
    futhark_mc_segmap_parloop_struct_76751.free_mem_70292 = mem_70292.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76752_task;
    
    futhark_mc_segmap_parloop_76752_task.name =
        "futhark_mc_segmap_parloop_76752";
    futhark_mc_segmap_parloop_76752_task.fn = futhark_mc_segmap_parloop_76752;
    futhark_mc_segmap_parloop_76752_task.args =
        &futhark_mc_segmap_parloop_struct_76751;
    futhark_mc_segmap_parloop_76752_task.iterations = iterations;
    futhark_mc_segmap_parloop_76752_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76752_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76752_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76752_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76752_task);
    
    if (futhark_mc_segmap_parloop_76752_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76752_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76752_total_end -
                 futhark_mc_segmap_parloop_76752_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76752_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76752_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76752_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76750_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76750_end -
                 futhark_mc_segmap_task_76750_start;
        
        ctx->futhark_mc_segmap_task_76750_runs[tid]++;
        ctx->futhark_mc_segmap_task_76750_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76750_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76753 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_67973;
    char *free_mem_70295;
};
struct futhark_mc_segmap_parloop_struct_76755 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_67973;
    char *free_mem_70295;
};
static int futhark_mc_segmap_parloop_76756(void *args, int64_t start,
                                           int64_t end, int flat_tid_67789,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76755
    *futhark_mc_segmap_parloop_struct_76755 =
    (struct futhark_mc_segmap_parloop_struct_76755 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76755->ctx;
    uint64_t futhark_mc_segmap_parloop_76756_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76756_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76755->free_q_64066;
    int64_t last_res_67973 =
            futhark_mc_segmap_parloop_struct_76755->free_last_res_67973;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_segmap_parloop_struct_76755->free_mem_70295,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74983 = start;
    
    for (; iter_74983 < end; iter_74983++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74984 = q_64066;
        int64_t gtid_67790 = iter_74983;
        int64_t remnant_74985 = iter_74983 - gtid_67790;
        bool cond_74625 = sle64(last_res_67973, gtid_67790);
        float defunc_0_f_res_74626;
        
        if (cond_74625) {
            defunc_0_f_res_74626 = 0.0F;
        } else {
            defunc_0_f_res_74626 = 1.0F;
        }
        ((float *) mem_70295.mem)[gtid_67790] = defunc_0_f_res_74626;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76756_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76756_end -
                 futhark_mc_segmap_parloop_76756_start;
        
        ctx->futhark_mc_segmap_parloop_76756_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76756_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76756_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76754(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67789 = tid;
    int num_tasks_74982 = info.nsubtasks;
    struct futhark_mc_task_76753 *futhark_mc_task_76753 =
                                 (struct futhark_mc_task_76753 *) args;
    struct futhark_context *ctx = futhark_mc_task_76753->ctx;
    uint64_t futhark_mc_segmap_task_76754_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76754_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76753->free_q_64066;
    int64_t last_res_67973 = futhark_mc_task_76753->free_last_res_67973;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_task_76753->free_mem_70295, .size =
                                 0, .references =NULL};
    int64_t iter_74983;
    struct futhark_mc_segmap_parloop_struct_76755
    futhark_mc_segmap_parloop_struct_76755;
    
    futhark_mc_segmap_parloop_struct_76755.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76755.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76755.free_last_res_67973 = last_res_67973;
    futhark_mc_segmap_parloop_struct_76755.free_mem_70295 = mem_70295.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76756_task;
    
    futhark_mc_segmap_parloop_76756_task.name =
        "futhark_mc_segmap_parloop_76756";
    futhark_mc_segmap_parloop_76756_task.fn = futhark_mc_segmap_parloop_76756;
    futhark_mc_segmap_parloop_76756_task.args =
        &futhark_mc_segmap_parloop_struct_76755;
    futhark_mc_segmap_parloop_76756_task.iterations = iterations;
    futhark_mc_segmap_parloop_76756_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76756_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76756_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76756_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76756_task);
    
    if (futhark_mc_segmap_parloop_76756_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76756_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76756_total_end -
                 futhark_mc_segmap_parloop_76756_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76756_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76756_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76756_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76754_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76754_end -
                 futhark_mc_segmap_task_76754_start;
        
        ctx->futhark_mc_segmap_task_76754_runs[tid]++;
        ctx->futhark_mc_segmap_task_76754_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76754_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76757 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67973;
    int64_t free_min_arg_67985;
    float free_max_res_67989;
    char *free_mem_70280;
    char *free_mem_70283;
    char *free_mem_70286;
    char *free_mem_70289;
    char *free_mem_70292;
    int64_t free_bytes_70293;
    char *free_mem_70295;
    char *free_mem_70334;
    char *free_mem_70337;
};
struct futhark_mc_segmap_parloop_struct_76759 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67973;
    int64_t free_min_arg_67985;
    float free_max_res_67989;
    char *free_mem_70280;
    char *free_mem_70283;
    char *free_mem_70286;
    char *free_mem_70289;
    char *free_mem_70292;
    int64_t free_bytes_70293;
    char *free_mem_70295;
    char *free_mem_70334;
    char *free_mem_70337;
};
static int futhark_mc_segmap_parloop_76760(void *args, int64_t start,
                                           int64_t end, int flat_tid_67791,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76759
    *futhark_mc_segmap_parloop_struct_76759 =
    (struct futhark_mc_segmap_parloop_struct_76759 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76759->ctx;
    uint64_t futhark_mc_segmap_parloop_76760_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76760_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76759->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76759->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76759->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76759->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76759->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76759->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76759->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76759->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76759->free_m_64090;
    int64_t last_res_67973 =
            futhark_mc_segmap_parloop_struct_76759->free_last_res_67973;
    int64_t min_arg_67985 =
            futhark_mc_segmap_parloop_struct_76759->free_min_arg_67985;
    float max_res_67989 =
          futhark_mc_segmap_parloop_struct_76759->free_max_res_67989;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70280,
                                 .size =0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70283,
                                 .size =0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70286,
                                 .size =0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70289,
                                 .size =0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70292,
                                 .size =0, .references =NULL};
    int64_t bytes_70293 =
            futhark_mc_segmap_parloop_struct_76759->free_bytes_70293;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70295,
                                 .size =0, .references =NULL};
    struct memblock mem_70334 = {.desc ="mem_70334", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70334,
                                 .size =0, .references =NULL};
    struct memblock mem_70337 = {.desc ="mem_70337", .mem =
                                 futhark_mc_segmap_parloop_struct_76759->free_mem_70337,
                                 .size =0, .references =NULL};
    size_t mem_74888_cached_sizze_76761 = 0;
    char *mem_74888 = NULL;
    size_t mem_74890_cached_sizze_76762 = 0;
    char *mem_74890 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74987 = start;
    
    if (mem_74888_cached_sizze_76761 < (size_t) bytes_70293) {
        mem_74888 = realloc(mem_74888, bytes_70293);
        mem_74888_cached_sizze_76761 = bytes_70293;
    }
    if (mem_74890_cached_sizze_76762 < (size_t) bytes_70293) {
        mem_74890 = realloc(mem_74890, bytes_70293);
        mem_74890_cached_sizze_76762 = bytes_70293;
    }
    for (; iter_74987 < end; iter_74987++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75088 = n_m_64072;
        int64_t gtid_67792 = iter_74987;
        int64_t remnant_75089 = iter_74987 - gtid_67792;
        int64_t min_arg_74789 = mul64(jump_64068, gtid_67792);
        int64_t min_res_74790 = smin64(i_64078, min_arg_74789);
        int64_t defunc_0_g_res_74791 = add64((int64_t) 1, min_res_74790);
        bool nearest_idx_74792;
        int64_t nearest_idx_74793;
        int64_t nearest_idx_74794;
        bool loop_while_74988;
        int64_t low_74989;
        int64_t high_74990;
        
        loop_while_74988 = x_64079;
        low_74989 = (int64_t) 0;
        high_74990 = i_64078;
        while (loop_while_74988) {
            int64_t x_74991 = add64(low_74989, high_74990);
            int64_t mid_74992 = sdiv64(x_74991, (int64_t) 2);
            bool x_74993 = sle64((int64_t) 0, mid_74992);
            bool y_74994 = slt64(mid_74992, n_64064);
            bool bounds_check_74995 = x_74993 && y_74994;
            bool index_certs_74996;
            
            if (!bounds_check_74995) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74992,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_74997 = ((int64_t *) mem_70289.mem)[mid_74992];
            bool cond_74998 = sle64(defunc_0_g_res_74791, x_74997);
            int64_t loopres_74999;
            int64_t loopres_75000;
            
            if (cond_74998) {
                int64_t loopres_t_res_75001 = sub64(mid_74992, (int64_t) 1);
                
                loopres_74999 = low_74989;
                loopres_75000 = loopres_t_res_75001;
            } else {
                int64_t loopres_f_res_75002 = add64((int64_t) 1, mid_74992);
                
                loopres_74999 = loopres_f_res_75002;
                loopres_75000 = high_74990;
            }
            
            bool loop_cond_75003 = sle64(loopres_74999, loopres_75000);
            bool loop_while_tmp_75090 = loop_cond_75003;
            int64_t low_tmp_75091 = loopres_74999;
            int64_t high_tmp_75092 = loopres_75000;
            
            loop_while_74988 = loop_while_tmp_75090;
            low_74989 = low_tmp_75091;
            high_74990 = high_tmp_75092;
        }
        nearest_idx_74792 = loop_while_74988;
        nearest_idx_74793 = low_74989;
        nearest_idx_74794 = high_74990;
        
        int64_t max_arg_74811 = sub64(nearest_idx_74793, min_res_64084);
        int64_t max_res_74812 = smax64((int64_t) 0, max_arg_74811);
        int64_t j_74813 = add64(min_res_64084, max_res_74812);
        int64_t i_p_m_t_s_74814 = add64(m_64090, max_res_74812);
        bool zzero_leq_i_p_m_t_s_74815 = sle64((int64_t) 0, i_p_m_t_s_74814);
        bool i_p_m_t_s_leq_w_74816 = slt64(i_p_m_t_s_74814, n_64064);
        bool zzero_lte_i_74817 = sle64((int64_t) 0, max_res_74812);
        bool i_lte_j_74818 = sle64(max_res_74812, j_74813);
        bool y_74819 = i_p_m_t_s_leq_w_74816 && zzero_lte_i_74817;
        bool y_74820 = zzero_leq_i_p_m_t_s_74815 && y_74819;
        bool y_74821 = i_lte_j_74818 && y_74820;
        bool forwards_ok_74822 = zzero_lte_i_74817 && y_74821;
        bool ok_or_empty_74823 = empty_slice_64089 || forwards_ok_74822;
        bool index_certs_74824;
        
        if (!ok_or_empty_74823) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_74812, ":",
                          (long long) j_74813,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_74825;
        int64_t redout_75005 = (int64_t) 0;
        
        for (int64_t i_75004 = 0; i_75004 < min_res_64084; i_75004++) {
            int64_t slice_75006 = max_res_74812 + i_75004;
            int64_t x_75007 = ((int64_t *) mem_70292.mem)[slice_75006];
            int64_t abs_arg_75008 = sub64(x_75007, defunc_0_g_res_74791);
            int64_t abs_res_75009 = abs64(abs_arg_75008);
            int64_t defunc_1_op_res_75010 = add64(abs_res_75009, redout_75005);
            int64_t redout_tmp_75093 = defunc_1_op_res_75010;
            
            redout_75005 = redout_tmp_75093;
        }
        defunc_2_reduce_res_74825 = redout_75005;
        
        int64_t idx_74833;
        int64_t idx_74834;
        int64_t idx_74835;
        int64_t idx_74836;
        int64_t best_idx_75012;
        int64_t last_idx_75013;
        int64_t best_sum_75014;
        int64_t curr_sum_75015;
        
        best_idx_75012 = max_res_74812;
        last_idx_75013 = max_res_74812;
        best_sum_75014 = defunc_2_reduce_res_74825;
        curr_sum_75015 = defunc_2_reduce_res_74825;
        for (int64_t j_75011 = 0; j_75011 < min_res_64084; j_75011++) {
            int64_t new_idx_75016 = add64(max_res_74812, j_75011);
            int64_t x_75017 = add64(min_res_64084, new_idx_75016);
            bool cond_75018 = slt64(last_res_67973, x_75017);
            int64_t new_sum_75019;
            
            if (cond_75018) {
                new_sum_75019 = (int64_t) 9223372036854775807;
            } else {
                bool x_75020 = sle64((int64_t) 0, last_idx_75013);
                bool y_75021 = slt64(last_idx_75013, n_64064);
                bool bounds_check_75022 = x_75020 && y_75021;
                bool index_certs_75023;
                
                if (!bounds_check_75022) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_75013,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_75024 = ((int64_t *) mem_70292.mem)[last_idx_75013];
                int64_t binop_p_75025 = sub64(defunc_0_g_res_74791, y_75024);
                int64_t defunc_0_f_res_75026 = abs64(binop_p_75025);
                int64_t x_75027 = sub64(curr_sum_75015, defunc_0_f_res_75026);
                int64_t min_arg_75028 = add64(min_res_64084, last_idx_75013);
                int64_t min_res_75029 = smin64(i_64078, min_arg_75028);
                bool x_75030 = sle64((int64_t) 0, min_res_75029);
                bool y_75031 = slt64(min_res_75029, n_64064);
                bool bounds_check_75032 = x_75030 && y_75031;
                bool index_certs_75033;
                
                if (!bounds_check_75032) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_75029,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_75034 = ((int64_t *) mem_70292.mem)[min_res_75029];
                int64_t binop_p_75035 = sub64(defunc_0_g_res_74791, y_75034);
                int64_t defunc_0_f_res_75036 = abs64(binop_p_75035);
                int64_t new_sum_f_res_75037 = add64(x_75027,
                                                    defunc_0_f_res_75036);
                
                new_sum_75019 = new_sum_f_res_75037;
            }
            
            bool cond_75038 = sle64(new_sum_75019, best_sum_75014);
            int64_t loopres_75039;
            
            if (cond_75038) {
                loopres_75039 = new_idx_75016;
            } else {
                loopres_75039 = best_idx_75012;
            }
            
            int64_t loopres_75040;
            
            if (cond_75038) {
                loopres_75040 = new_sum_75019;
            } else {
                loopres_75040 = best_sum_75014;
            }
            
            int64_t best_idx_tmp_75094 = loopres_75039;
            int64_t last_idx_tmp_75095 = new_idx_75016;
            int64_t best_sum_tmp_75096 = loopres_75040;
            int64_t curr_sum_tmp_75097 = new_sum_75019;
            
            best_idx_75012 = best_idx_tmp_75094;
            last_idx_75013 = last_idx_tmp_75095;
            best_sum_75014 = best_sum_tmp_75096;
            curr_sum_75015 = curr_sum_tmp_75097;
        }
        idx_74833 = best_idx_75012;
        idx_74834 = last_idx_75013;
        idx_74835 = best_sum_75014;
        idx_74836 = curr_sum_75015;
        
        int64_t min_res_74867 = smin64(min_arg_67985, idx_74833);
        int64_t x_74868 = add64(min_res_64084, min_res_74867);
        int64_t r_74869 = sub64(x_74868, (int64_t) 1);
        bool x_74870 = sle64((int64_t) 0, r_74869);
        bool y_74871 = slt64(r_74869, n_64064);
        bool bounds_check_74872 = x_74870 && y_74871;
        bool index_certs_74873;
        
        if (!bounds_check_74872) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74869,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74874 = ((int64_t *) mem_70283.mem)[r_74869];
        int64_t abs_arg_74875 = sub64(x_74874, min_res_74790);
        int64_t abs_res_74876 = abs64(abs_arg_74875);
        bool x_74877 = sle64((int64_t) 0, min_res_74867);
        bool y_74878 = slt64(min_res_74867, n_64064);
        bool bounds_check_74879 = x_74877 && y_74878;
        bool index_certs_74880;
        
        if (!bounds_check_74879) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74867,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74881 = ((int64_t *) mem_70283.mem)[min_res_74867];
        int64_t abs_arg_74882 = sub64(x_74881, min_res_74790);
        int64_t abs_res_74883 = abs64(abs_arg_74882);
        int64_t max_res_74884 = smax64(abs_res_74876, abs_res_74883);
        float defunc_0_f_res_74885 = sitofp_i64_f32(max_res_74884);
        float defunc_1_f_res_74886 = max_res_67989 + defunc_0_f_res_74885;
        float defunc_0_f_res_74887 = sitofp_i64_f32(min_res_74790);
        float defunc_2_reduce_res_74892;
        float defunc_2_reduce_res_74893;
        float defunc_2_reduce_res_74894;
        float redout_75042;
        float redout_75043;
        float redout_75044;
        
        redout_75042 = 0.0F;
        redout_75043 = 0.0F;
        redout_75044 = 0.0F;
        for (int64_t i_75041 = 0; i_75041 < q_64066; i_75041++) {
            float x_75047 = ((float *) mem_70295.mem)[i_75041];
            bool cond_75048 = sle64(last_res_67973, i_75041);
            float defunc_0_f_res_75049;
            
            if (cond_75048) {
                defunc_0_f_res_75049 = 0.0F;
            } else {
                int64_t i_75050 = add64(min_res_74867, i_75041);
                float x_75051 = ((float *) mem_70286.mem)[i_75050];
                float defunc_0_f_res_f_res_75052 = 1.0F + x_75051;
                
                defunc_0_f_res_75049 = defunc_0_f_res_f_res_75052;
            }
            
            float x_j_75053 = defunc_0_f_res_75049 - defunc_0_f_res_74887;
            float abs_res_75054 = (float) fabs(x_j_75053);
            float tmp1_75055 = abs_res_75054 / defunc_1_f_res_74886;
            float x_75056 = tmp1_75055 * tmp1_75055;
            float y_75057 = tmp1_75055 * x_75056;
            float tmp2_75058 = 1.0F - y_75057;
            float x_75059 = tmp2_75058 * tmp2_75058;
            float tmp3_75060 = tmp2_75058 * x_75059;
            float tmp4_75061 = x_75047 * tmp3_75060;
            float defunc_1_f_res_75062 = x_j_75053 * tmp4_75061;
            float defunc_1_f_res_75063 = x_j_75053 * defunc_1_f_res_75062;
            float defunc_1_op_res_75064 = tmp4_75061 + redout_75042;
            float defunc_1_op_res_75065 = defunc_1_f_res_75062 + redout_75043;
            float defunc_1_op_res_75066 = defunc_1_f_res_75063 + redout_75044;
            
            ((float *) mem_74888)[i_75041] = defunc_1_f_res_75062;
            ((float *) mem_74890)[i_75041] = tmp4_75061;
            
            float redout_tmp_75098 = defunc_1_op_res_75064;
            float redout_tmp_75099 = defunc_1_op_res_75065;
            float redout_tmp_75100 = defunc_1_op_res_75066;
            
            redout_75042 = redout_tmp_75098;
            redout_75043 = redout_tmp_75099;
            redout_75044 = redout_tmp_75100;
        }
        defunc_2_reduce_res_74892 = redout_75042;
        defunc_2_reduce_res_74893 = redout_75043;
        defunc_2_reduce_res_74894 = redout_75044;
        
        float x_74925 = defunc_2_reduce_res_74892 * defunc_2_reduce_res_74894;
        float y_74926 = defunc_2_reduce_res_74893 * defunc_2_reduce_res_74893;
        float y_74927 = x_74925 - y_74926;
        float det1_74928 = 1.0F / y_74927;
        float a11_74929 = defunc_2_reduce_res_74894 * det1_74928;
        float negate_arg_74930 = defunc_2_reduce_res_74893 * det1_74928;
        float b11_74931 = 0.0F - negate_arg_74930;
        float c11_74932 = defunc_2_reduce_res_74892 * det1_74928;
        float defunc_2_reduce_res_74933;
        float defunc_2_reduce_res_74934;
        float redout_75070;
        float redout_75071;
        
        redout_75070 = 0.0F;
        redout_75071 = 0.0F;
        for (int64_t i_75069 = 0; i_75069 < q_64066; i_75069++) {
            float x_75072 = ((float *) mem_74890)[i_75069];
            float x_75073 = ((float *) mem_74888)[i_75069];
            bool cond_75074 = sle64(last_res_67973, i_75069);
            float defunc_0_f_res_75075;
            
            if (cond_75074) {
                defunc_0_f_res_75075 = 0.0F;
            } else {
                int64_t i_75076 = add64(min_res_74867, i_75069);
                float x_75077 = ((float *) mem_70280.mem)[i_75076];
                
                defunc_0_f_res_75075 = x_75077;
            }
            
            float x_75078 = a11_74929 * x_75072;
            float y_75079 = b11_74931 * x_75073;
            float x_75080 = x_75078 + y_75079;
            float defunc_9_fit_fun_res_75081 = defunc_0_f_res_75075 * x_75080;
            float x_75082 = b11_74931 * x_75072;
            float y_75083 = c11_74932 * x_75073;
            float x_75084 = x_75082 + y_75083;
            float defunc_9_slope_fun_res_75085 = defunc_0_f_res_75075 * x_75084;
            float defunc_1_op_res_75086 = defunc_9_fit_fun_res_75081 +
                  redout_75070;
            float defunc_1_op_res_75087 = defunc_9_slope_fun_res_75085 +
                  redout_75071;
            float redout_tmp_75103 = defunc_1_op_res_75086;
            float redout_tmp_75104 = defunc_1_op_res_75087;
            
            redout_75070 = redout_tmp_75103;
            redout_75071 = redout_tmp_75104;
        }
        defunc_2_reduce_res_74933 = redout_75070;
        defunc_2_reduce_res_74934 = redout_75071;
        ((float *) mem_70334.mem)[gtid_67792] = defunc_2_reduce_res_74933;
        ((float *) mem_70337.mem)[gtid_67792] = defunc_2_reduce_res_74934;
    }
    
  cleanup:
    { }
    free(mem_74888);
    free(mem_74890);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76760_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76760_end -
                 futhark_mc_segmap_parloop_76760_start;
        
        ctx->futhark_mc_segmap_parloop_76760_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76760_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76760_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76758(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67791 = tid;
    int num_tasks_74986 = info.nsubtasks;
    struct futhark_mc_task_76757 *futhark_mc_task_76757 =
                                 (struct futhark_mc_task_76757 *) args;
    struct futhark_context *ctx = futhark_mc_task_76757->ctx;
    uint64_t futhark_mc_segmap_task_76758_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76758_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76757->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76757->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76757->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76757->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76757->free_i_64078;
    bool x_64079 = futhark_mc_task_76757->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76757->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76757->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76757->free_m_64090;
    int64_t last_res_67973 = futhark_mc_task_76757->free_last_res_67973;
    int64_t min_arg_67985 = futhark_mc_task_76757->free_min_arg_67985;
    float max_res_67989 = futhark_mc_task_76757->free_max_res_67989;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_task_76757->free_mem_70280, .size =
                                 0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_task_76757->free_mem_70283, .size =
                                 0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_task_76757->free_mem_70286, .size =
                                 0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_task_76757->free_mem_70289, .size =
                                 0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_task_76757->free_mem_70292, .size =
                                 0, .references =NULL};
    int64_t bytes_70293 = futhark_mc_task_76757->free_bytes_70293;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_task_76757->free_mem_70295, .size =
                                 0, .references =NULL};
    struct memblock mem_70334 = {.desc ="mem_70334", .mem =
                                 futhark_mc_task_76757->free_mem_70334, .size =
                                 0, .references =NULL};
    struct memblock mem_70337 = {.desc ="mem_70337", .mem =
                                 futhark_mc_task_76757->free_mem_70337, .size =
                                 0, .references =NULL};
    int64_t iter_74987;
    struct futhark_mc_segmap_parloop_struct_76759
    futhark_mc_segmap_parloop_struct_76759;
    
    futhark_mc_segmap_parloop_struct_76759.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76759.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76759.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76759.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76759.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76759.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76759.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76759.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76759.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76759.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76759.free_last_res_67973 = last_res_67973;
    futhark_mc_segmap_parloop_struct_76759.free_min_arg_67985 = min_arg_67985;
    futhark_mc_segmap_parloop_struct_76759.free_max_res_67989 = max_res_67989;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70280 = mem_70280.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70283 = mem_70283.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70286 = mem_70286.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70289 = mem_70289.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70292 = mem_70292.mem;
    futhark_mc_segmap_parloop_struct_76759.free_bytes_70293 = bytes_70293;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70295 = mem_70295.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70334 = mem_70334.mem;
    futhark_mc_segmap_parloop_struct_76759.free_mem_70337 = mem_70337.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76760_task;
    
    futhark_mc_segmap_parloop_76760_task.name =
        "futhark_mc_segmap_parloop_76760";
    futhark_mc_segmap_parloop_76760_task.fn = futhark_mc_segmap_parloop_76760;
    futhark_mc_segmap_parloop_76760_task.args =
        &futhark_mc_segmap_parloop_struct_76759;
    futhark_mc_segmap_parloop_76760_task.iterations = iterations;
    futhark_mc_segmap_parloop_76760_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76760_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76760_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76760_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76760_task);
    
    if (futhark_mc_segmap_parloop_76760_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76760_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76760_total_end -
                 futhark_mc_segmap_parloop_76760_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76760_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76760_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76760_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76758_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76758_end -
                 futhark_mc_segmap_task_76758_start;
        
        ctx->futhark_mc_segmap_task_76758_runs[tid]++;
        ctx->futhark_mc_segmap_task_76758_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76758_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76764 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_67973;
    int64_t free_min_arg_67985;
    float free_max_res_67989;
    char *free_mem_70280;
    char *free_mem_70283;
    char *free_mem_70286;
    char *free_mem_70289;
    char *free_mem_70292;
    int64_t free_bytes_70293;
    char *free_mem_70295;
    char *free_mem_70334;
    char *free_mem_70337;
};
struct futhark_mc_task_76768 {
    struct futhark_context *ctx;
    char *free_mem_70292;
    int64_t free_defunc_0_g_res_74629;
    int64_t free_max_res_74650;
    int64_t *retval_defunc_2_reduce_res_74663;
};
struct futhark_mc_segred_stage_1_parloop_struct_76771 {
    struct futhark_context *ctx;
    char *free_mem_70292;
    int64_t free_defunc_0_g_res_74629;
    int64_t free_max_res_74650;
    char *free_reduce_stage_1_tid_res_arr_mem_75211;
};
static int futhark_mc_segred_stage_1_parloop_76772(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67795, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76771
    *futhark_mc_segred_stage_1_parloop_struct_76771 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76771 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76771->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76772_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76772_start = get_wall_time();
    
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76771->free_mem_70292,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_74629 =
            futhark_mc_segred_stage_1_parloop_struct_76771->free_defunc_0_g_res_74629;
    int64_t max_res_74650 =
            futhark_mc_segred_stage_1_parloop_struct_76771->free_max_res_74650;
    struct memblock reduce_stage_1_tid_res_arr_mem_75211 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75211",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76771->free_reduce_stage_1_tid_res_arr_mem_75211,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75213 = start;
    int64_t x_75122;
    int64_t x_75123;
    int64_t local_acc_75214 = (int64_t) 0;
    
    for (; iter_75213 < end; iter_75213++) {
        int64_t gtid_67796 = iter_75213;
        int64_t slice_75125 = gtid_67796 + max_res_74650;
        int64_t x_75126 = ((int64_t *) mem_70292.mem)[slice_75125];
        int64_t abs_arg_75127 = sub64(x_75126, defunc_0_g_res_74629);
        int64_t abs_res_75128 = abs64(abs_arg_75127);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_75122 = local_acc_75214;
        }
        // Load next params
        {
            x_75123 = abs_res_75128;
        }
        // Red body
        {
            int64_t defunc_1_op_res_75124 = add64(x_75122, x_75123);
            
            local_acc_75214 = defunc_1_op_res_75124;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_75211.mem)[flat_tid_67795] =
        local_acc_75214;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76772_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76772_end -
                 futhark_mc_segred_stage_1_parloop_76772_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76772_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76772_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76772_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76769(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67795 = tid;
    int num_tasks_75210 = info.nsubtasks;
    struct futhark_mc_task_76768 *futhark_mc_task_76768 =
                                 (struct futhark_mc_task_76768 *) args;
    struct futhark_context *ctx = futhark_mc_task_76768->ctx;
    uint64_t futhark_mc_segred_task_76769_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76769_start = get_wall_time();
    
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_task_76768->free_mem_70292, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_74629 =
            futhark_mc_task_76768->free_defunc_0_g_res_74629;
    int64_t max_res_74650 = futhark_mc_task_76768->free_max_res_74650;
    int64_t defunc_2_reduce_res_74663 =
            *futhark_mc_task_76768->retval_defunc_2_reduce_res_74663;
    size_t reduce_stage_1_tid_res_arr_mem_75211_cached_sizze_76770 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75211 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75211_cached_sizze_76770 <
        (size_t) ((int64_t) 8 * num_tasks_75210)) {
        reduce_stage_1_tid_res_arr_mem_75211 =
            realloc(reduce_stage_1_tid_res_arr_mem_75211, (int64_t) 8 *
                    num_tasks_75210);
        reduce_stage_1_tid_res_arr_mem_75211_cached_sizze_76770 = (int64_t) 8 *
            num_tasks_75210;
    }
    
    int64_t iter_75213;
    struct futhark_mc_segred_stage_1_parloop_struct_76771
    futhark_mc_segred_stage_1_parloop_struct_76771;
    
    futhark_mc_segred_stage_1_parloop_struct_76771.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76771.free_mem_70292 =
        mem_70292.mem;
    futhark_mc_segred_stage_1_parloop_struct_76771.free_defunc_0_g_res_74629 =
        defunc_0_g_res_74629;
    futhark_mc_segred_stage_1_parloop_struct_76771.free_max_res_74650 =
        max_res_74650;
    futhark_mc_segred_stage_1_parloop_struct_76771.free_reduce_stage_1_tid_res_arr_mem_75211 =
        reduce_stage_1_tid_res_arr_mem_75211;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76772_task;
    
    futhark_mc_segred_stage_1_parloop_76772_task.name =
        "futhark_mc_segred_stage_1_parloop_76772";
    futhark_mc_segred_stage_1_parloop_76772_task.fn =
        futhark_mc_segred_stage_1_parloop_76772;
    futhark_mc_segred_stage_1_parloop_76772_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76771;
    futhark_mc_segred_stage_1_parloop_76772_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76772_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76772_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76772_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76772_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76772_task);
    
    if (futhark_mc_segred_stage_1_parloop_76772_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76772_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76772_total_end -
                 futhark_mc_segred_stage_1_parloop_76772_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76772_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76772_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76772_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74663 = (int64_t) 0;
    }
    
    int64_t x_75215;
    int64_t x_75216;
    
    for (int32_t i_75218 = 0; i_75218 < num_tasks_75210; i_75218++) {
        flat_tid_67795 = i_75218;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75215 = defunc_2_reduce_res_74663;
            }
            // load next params
            {
                x_75216 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_75211)[flat_tid_67795];
            }
            // red body
            {
                int64_t defunc_1_op_res_75217 = add64(x_75215, x_75216);
                
                defunc_2_reduce_res_74663 = defunc_1_op_res_75217;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75211);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76769_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76769_end -
                 futhark_mc_segred_task_76769_start;
        
        ctx->futhark_mc_segred_task_76769_runs[tid]++;
        ctx->futhark_mc_segred_task_76769_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76769_iter[tid] += iterations;
    }
    *futhark_mc_task_76768->retval_defunc_2_reduce_res_74663 =
        defunc_2_reduce_res_74663;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76773 {
    struct futhark_context *ctx;
    int64_t free_last_res_67973;
    char *free_mem_70286;
    char *free_mem_70295;
    int64_t free_min_res_74705;
    float free_defunc_1_f_res_74724;
    float free_defunc_0_f_res_74725;
    float *retval_defunc_2_reduce_res_74728;
    float *retval_defunc_2_reduce_res_74729;
    float *retval_defunc_2_reduce_res_74730;
    char *retval_mem_74726;
    char *retval_mem_74727;
};
struct futhark_mc_segred_stage_1_parloop_struct_76778 {
    struct futhark_context *ctx;
    int64_t free_last_res_67973;
    char *free_mem_70286;
    char *free_mem_70295;
    int64_t free_min_res_74705;
    float free_defunc_1_f_res_74724;
    float free_defunc_0_f_res_74725;
    char *free_mem_74726;
    char *free_mem_74727;
    char *free_reduce_stage_1_tid_res_arr_mem_75224;
    char *free_reduce_stage_1_tid_res_arr_mem_75226;
    char *free_reduce_stage_1_tid_res_arr_mem_75228;
};
static int futhark_mc_segred_stage_1_parloop_76779(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67797, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76778
    *futhark_mc_segred_stage_1_parloop_struct_76778 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76778 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76778->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76779_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76779_start = get_wall_time();
    
    int64_t last_res_67973 =
            futhark_mc_segred_stage_1_parloop_struct_76778->free_last_res_67973;
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76778->free_mem_70286,
                                 .size =0, .references =NULL};
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76778->free_mem_70295,
                                 .size =0, .references =NULL};
    int64_t min_res_74705 =
            futhark_mc_segred_stage_1_parloop_struct_76778->free_min_res_74705;
    float defunc_1_f_res_74724 =
          futhark_mc_segred_stage_1_parloop_struct_76778->free_defunc_1_f_res_74724;
    float defunc_0_f_res_74725 =
          futhark_mc_segred_stage_1_parloop_struct_76778->free_defunc_0_f_res_74725;
    struct memblock mem_74726 = {.desc ="mem_74726", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76778->free_mem_74726,
                                 .size =0, .references =NULL};
    struct memblock mem_74727 = {.desc ="mem_74727", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76778->free_mem_74727,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75224 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75224",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76778->free_reduce_stage_1_tid_res_arr_mem_75224,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75226 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75226",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76778->free_reduce_stage_1_tid_res_arr_mem_75226,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75228 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75228",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76778->free_reduce_stage_1_tid_res_arr_mem_75228,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75230 = start;
    float x_75159;
    float x_75160;
    float x_75162;
    float x_75163;
    float x_75165;
    float x_75166;
    float local_acc_75231 = 0.0F;
    float local_acc_75232 = 0.0F;
    float local_acc_75233 = 0.0F;
    
    for (; iter_75230 < end; iter_75230++) {
        int64_t gtid_67798 = iter_75230;
        float x_75168 = ((float *) mem_70295.mem)[gtid_67798];
        bool cond_75169 = sle64(last_res_67973, gtid_67798);
        float defunc_0_f_res_75170;
        
        if (cond_75169) {
            defunc_0_f_res_75170 = 0.0F;
        } else {
            int64_t i_75171 = add64(gtid_67798, min_res_74705);
            float x_75172 = ((float *) mem_70286.mem)[i_75171];
            float defunc_0_f_res_f_res_75173 = 1.0F + x_75172;
            
            defunc_0_f_res_75170 = defunc_0_f_res_f_res_75173;
        }
        
        float x_j_75174 = defunc_0_f_res_75170 - defunc_0_f_res_74725;
        float abs_res_75175 = (float) fabs(x_j_75174);
        float tmp1_75176 = abs_res_75175 / defunc_1_f_res_74724;
        float x_75177 = tmp1_75176 * tmp1_75176;
        float y_75178 = tmp1_75176 * x_75177;
        float tmp2_75179 = 1.0F - y_75178;
        float x_75180 = tmp2_75179 * tmp2_75179;
        float tmp3_75181 = tmp2_75179 * x_75180;
        float tmp4_75182 = x_75168 * tmp3_75181;
        float defunc_1_f_res_75183 = x_j_75174 * tmp4_75182;
        float defunc_1_f_res_75184 = x_j_75174 * defunc_1_f_res_75183;
        
        // save map-out results
        {
            ((float *) mem_74726.mem)[gtid_67798] = defunc_1_f_res_75183;
            ((float *) mem_74727.mem)[gtid_67798] = tmp4_75182;
        }
        // Load accum params
        {
            x_75159 = local_acc_75231;
        }
        // Load next params
        {
            x_75160 = tmp4_75182;
        }
        // Red body
        {
            float defunc_1_op_res_75161 = x_75159 + x_75160;
            
            local_acc_75231 = defunc_1_op_res_75161;
        }
        // Load accum params
        {
            x_75162 = local_acc_75232;
        }
        // Load next params
        {
            x_75163 = defunc_1_f_res_75183;
        }
        // Red body
        {
            float defunc_1_op_res_75164 = x_75162 + x_75163;
            
            local_acc_75232 = defunc_1_op_res_75164;
        }
        // Load accum params
        {
            x_75165 = local_acc_75233;
        }
        // Load next params
        {
            x_75166 = defunc_1_f_res_75184;
        }
        // Red body
        {
            float defunc_1_op_res_75167 = x_75165 + x_75166;
            
            local_acc_75233 = defunc_1_op_res_75167;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_75224.mem)[flat_tid_67797] =
        local_acc_75231;
    ((float *) reduce_stage_1_tid_res_arr_mem_75226.mem)[flat_tid_67797] =
        local_acc_75232;
    ((float *) reduce_stage_1_tid_res_arr_mem_75228.mem)[flat_tid_67797] =
        local_acc_75233;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76779_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76779_end -
                 futhark_mc_segred_stage_1_parloop_76779_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76779_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76779_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76779_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76774(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67797 = tid;
    int num_tasks_75223 = info.nsubtasks;
    struct futhark_mc_task_76773 *futhark_mc_task_76773 =
                                 (struct futhark_mc_task_76773 *) args;
    struct futhark_context *ctx = futhark_mc_task_76773->ctx;
    uint64_t futhark_mc_segred_task_76774_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76774_start = get_wall_time();
    
    int64_t last_res_67973 = futhark_mc_task_76773->free_last_res_67973;
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_task_76773->free_mem_70286, .size =
                                 0, .references =NULL};
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_task_76773->free_mem_70295, .size =
                                 0, .references =NULL};
    int64_t min_res_74705 = futhark_mc_task_76773->free_min_res_74705;
    float defunc_1_f_res_74724 =
          futhark_mc_task_76773->free_defunc_1_f_res_74724;
    float defunc_0_f_res_74725 =
          futhark_mc_task_76773->free_defunc_0_f_res_74725;
    float defunc_2_reduce_res_74728 =
          *futhark_mc_task_76773->retval_defunc_2_reduce_res_74728;
    float defunc_2_reduce_res_74729 =
          *futhark_mc_task_76773->retval_defunc_2_reduce_res_74729;
    float defunc_2_reduce_res_74730 =
          *futhark_mc_task_76773->retval_defunc_2_reduce_res_74730;
    struct memblock mem_74726 = {.desc ="mem_74726", .mem =
                                 futhark_mc_task_76773->retval_mem_74726,
                                 .size =0, .references =NULL};
    struct memblock mem_74727 = {.desc ="mem_74727", .mem =
                                 futhark_mc_task_76773->retval_mem_74727,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_75224_cached_sizze_76775 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75224 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75226_cached_sizze_76776 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75226 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75228_cached_sizze_76777 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75228 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75224_cached_sizze_76775 <
        (size_t) ((int64_t) 4 * num_tasks_75223)) {
        reduce_stage_1_tid_res_arr_mem_75224 =
            realloc(reduce_stage_1_tid_res_arr_mem_75224, (int64_t) 4 *
                    num_tasks_75223);
        reduce_stage_1_tid_res_arr_mem_75224_cached_sizze_76775 = (int64_t) 4 *
            num_tasks_75223;
    }
    if (reduce_stage_1_tid_res_arr_mem_75226_cached_sizze_76776 <
        (size_t) ((int64_t) 4 * num_tasks_75223)) {
        reduce_stage_1_tid_res_arr_mem_75226 =
            realloc(reduce_stage_1_tid_res_arr_mem_75226, (int64_t) 4 *
                    num_tasks_75223);
        reduce_stage_1_tid_res_arr_mem_75226_cached_sizze_76776 = (int64_t) 4 *
            num_tasks_75223;
    }
    if (reduce_stage_1_tid_res_arr_mem_75228_cached_sizze_76777 <
        (size_t) ((int64_t) 4 * num_tasks_75223)) {
        reduce_stage_1_tid_res_arr_mem_75228 =
            realloc(reduce_stage_1_tid_res_arr_mem_75228, (int64_t) 4 *
                    num_tasks_75223);
        reduce_stage_1_tid_res_arr_mem_75228_cached_sizze_76777 = (int64_t) 4 *
            num_tasks_75223;
    }
    
    int64_t iter_75230;
    struct futhark_mc_segred_stage_1_parloop_struct_76778
    futhark_mc_segred_stage_1_parloop_struct_76778;
    
    futhark_mc_segred_stage_1_parloop_struct_76778.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_last_res_67973 =
        last_res_67973;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_mem_70286 =
        mem_70286.mem;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_mem_70295 =
        mem_70295.mem;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_min_res_74705 =
        min_res_74705;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_defunc_1_f_res_74724 =
        defunc_1_f_res_74724;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_defunc_0_f_res_74725 =
        defunc_0_f_res_74725;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_mem_74726 =
        mem_74726.mem;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_mem_74727 =
        mem_74727.mem;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_reduce_stage_1_tid_res_arr_mem_75224 =
        reduce_stage_1_tid_res_arr_mem_75224;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_reduce_stage_1_tid_res_arr_mem_75226 =
        reduce_stage_1_tid_res_arr_mem_75226;
    futhark_mc_segred_stage_1_parloop_struct_76778.free_reduce_stage_1_tid_res_arr_mem_75228 =
        reduce_stage_1_tid_res_arr_mem_75228;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76779_task;
    
    futhark_mc_segred_stage_1_parloop_76779_task.name =
        "futhark_mc_segred_stage_1_parloop_76779";
    futhark_mc_segred_stage_1_parloop_76779_task.fn =
        futhark_mc_segred_stage_1_parloop_76779;
    futhark_mc_segred_stage_1_parloop_76779_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76778;
    futhark_mc_segred_stage_1_parloop_76779_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76779_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76779_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76779_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76779_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76779_task);
    
    if (futhark_mc_segred_stage_1_parloop_76779_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76779_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76779_total_end -
                 futhark_mc_segred_stage_1_parloop_76779_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76779_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76779_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76779_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74728 = 0.0F;
        defunc_2_reduce_res_74729 = 0.0F;
        defunc_2_reduce_res_74730 = 0.0F;
    }
    
    float x_75234;
    float x_75235;
    float x_75237;
    float x_75238;
    float x_75240;
    float x_75241;
    
    for (int32_t i_75243 = 0; i_75243 < num_tasks_75223; i_75243++) {
        flat_tid_67797 = i_75243;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75234 = defunc_2_reduce_res_74728;
            }
            // load next params
            {
                x_75235 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75224)[flat_tid_67797];
            }
            // red body
            {
                float defunc_1_op_res_75236 = x_75234 + x_75235;
                
                defunc_2_reduce_res_74728 = defunc_1_op_res_75236;
            }
            // load acc params
            {
                x_75237 = defunc_2_reduce_res_74729;
            }
            // load next params
            {
                x_75238 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75226)[flat_tid_67797];
            }
            // red body
            {
                float defunc_1_op_res_75239 = x_75237 + x_75238;
                
                defunc_2_reduce_res_74729 = defunc_1_op_res_75239;
            }
            // load acc params
            {
                x_75240 = defunc_2_reduce_res_74730;
            }
            // load next params
            {
                x_75241 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75228)[flat_tid_67797];
            }
            // red body
            {
                float defunc_1_op_res_75242 = x_75240 + x_75241;
                
                defunc_2_reduce_res_74730 = defunc_1_op_res_75242;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75224);
    free(reduce_stage_1_tid_res_arr_mem_75226);
    free(reduce_stage_1_tid_res_arr_mem_75228);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76774_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76774_end -
                 futhark_mc_segred_task_76774_start;
        
        ctx->futhark_mc_segred_task_76774_runs[tid]++;
        ctx->futhark_mc_segred_task_76774_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76774_iter[tid] += iterations;
    }
    *futhark_mc_task_76773->retval_defunc_2_reduce_res_74728 =
        defunc_2_reduce_res_74728;
    *futhark_mc_task_76773->retval_defunc_2_reduce_res_74729 =
        defunc_2_reduce_res_74729;
    *futhark_mc_task_76773->retval_defunc_2_reduce_res_74730 =
        defunc_2_reduce_res_74730;
    futhark_mc_task_76773->retval_mem_74726 = mem_74726.mem;
    futhark_mc_task_76773->retval_mem_74727 = mem_74727.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76780 {
    struct futhark_context *ctx;
    int64_t free_last_res_67973;
    char *free_mem_70280;
    int64_t free_min_res_74705;
    char *free_mem_74726;
    char *free_mem_74727;
    float free_a11_74763;
    float free_b11_74765;
    float free_c11_74766;
    float *retval_defunc_2_reduce_res_74767;
    float *retval_defunc_2_reduce_res_74768;
};
struct futhark_mc_segred_stage_1_parloop_struct_76784 {
    struct futhark_context *ctx;
    int64_t free_last_res_67973;
    char *free_mem_70280;
    int64_t free_min_res_74705;
    char *free_mem_74726;
    char *free_mem_74727;
    float free_a11_74763;
    float free_b11_74765;
    float free_c11_74766;
    char *free_reduce_stage_1_tid_res_arr_mem_75245;
    char *free_reduce_stage_1_tid_res_arr_mem_75247;
};
static int futhark_mc_segred_stage_1_parloop_76785(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67799, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76784
    *futhark_mc_segred_stage_1_parloop_struct_76784 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76784 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76784->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76785_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76785_start = get_wall_time();
    
    int64_t last_res_67973 =
            futhark_mc_segred_stage_1_parloop_struct_76784->free_last_res_67973;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76784->free_mem_70280,
                                 .size =0, .references =NULL};
    int64_t min_res_74705 =
            futhark_mc_segred_stage_1_parloop_struct_76784->free_min_res_74705;
    struct memblock mem_74726 = {.desc ="mem_74726", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76784->free_mem_74726,
                                 .size =0, .references =NULL};
    struct memblock mem_74727 = {.desc ="mem_74727", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76784->free_mem_74727,
                                 .size =0, .references =NULL};
    float a11_74763 =
          futhark_mc_segred_stage_1_parloop_struct_76784->free_a11_74763;
    float b11_74765 =
          futhark_mc_segred_stage_1_parloop_struct_76784->free_b11_74765;
    float c11_74766 =
          futhark_mc_segred_stage_1_parloop_struct_76784->free_c11_74766;
    struct memblock reduce_stage_1_tid_res_arr_mem_75245 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75245",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76784->free_reduce_stage_1_tid_res_arr_mem_75245,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75247 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75247",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76784->free_reduce_stage_1_tid_res_arr_mem_75247,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75249 = start;
    float x_75185;
    float x_75186;
    float x_75188;
    float x_75189;
    float local_acc_75250 = 0.0F;
    float local_acc_75251 = 0.0F;
    
    for (; iter_75249 < end; iter_75249++) {
        int64_t gtid_67800 = iter_75249;
        float x_75191 = ((float *) mem_74727.mem)[gtid_67800];
        float x_75192 = ((float *) mem_74726.mem)[gtid_67800];
        bool cond_75193 = sle64(last_res_67973, gtid_67800);
        float defunc_0_f_res_75194;
        
        if (cond_75193) {
            defunc_0_f_res_75194 = 0.0F;
        } else {
            int64_t i_75195 = add64(gtid_67800, min_res_74705);
            float x_75196 = ((float *) mem_70280.mem)[i_75195];
            
            defunc_0_f_res_75194 = x_75196;
        }
        
        float x_75197 = a11_74763 * x_75191;
        float y_75198 = b11_74765 * x_75192;
        float x_75199 = x_75197 + y_75198;
        float defunc_9_fit_fun_res_75200 = defunc_0_f_res_75194 * x_75199;
        float x_75201 = b11_74765 * x_75191;
        float y_75202 = c11_74766 * x_75192;
        float x_75203 = x_75201 + y_75202;
        float defunc_9_slope_fun_res_75204 = defunc_0_f_res_75194 * x_75203;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_75185 = local_acc_75250;
        }
        // Load next params
        {
            x_75186 = defunc_9_fit_fun_res_75200;
        }
        // Red body
        {
            float defunc_1_op_res_75187 = x_75185 + x_75186;
            
            local_acc_75250 = defunc_1_op_res_75187;
        }
        // Load accum params
        {
            x_75188 = local_acc_75251;
        }
        // Load next params
        {
            x_75189 = defunc_9_slope_fun_res_75204;
        }
        // Red body
        {
            float defunc_1_op_res_75190 = x_75188 + x_75189;
            
            local_acc_75251 = defunc_1_op_res_75190;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_75245.mem)[flat_tid_67799] =
        local_acc_75250;
    ((float *) reduce_stage_1_tid_res_arr_mem_75247.mem)[flat_tid_67799] =
        local_acc_75251;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76785_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76785_end -
                 futhark_mc_segred_stage_1_parloop_76785_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76785_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76785_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76785_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76781(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67799 = tid;
    int num_tasks_75244 = info.nsubtasks;
    struct futhark_mc_task_76780 *futhark_mc_task_76780 =
                                 (struct futhark_mc_task_76780 *) args;
    struct futhark_context *ctx = futhark_mc_task_76780->ctx;
    uint64_t futhark_mc_segred_task_76781_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76781_start = get_wall_time();
    
    int64_t last_res_67973 = futhark_mc_task_76780->free_last_res_67973;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_task_76780->free_mem_70280, .size =
                                 0, .references =NULL};
    int64_t min_res_74705 = futhark_mc_task_76780->free_min_res_74705;
    struct memblock mem_74726 = {.desc ="mem_74726", .mem =
                                 futhark_mc_task_76780->free_mem_74726, .size =
                                 0, .references =NULL};
    struct memblock mem_74727 = {.desc ="mem_74727", .mem =
                                 futhark_mc_task_76780->free_mem_74727, .size =
                                 0, .references =NULL};
    float a11_74763 = futhark_mc_task_76780->free_a11_74763;
    float b11_74765 = futhark_mc_task_76780->free_b11_74765;
    float c11_74766 = futhark_mc_task_76780->free_c11_74766;
    float defunc_2_reduce_res_74767 =
          *futhark_mc_task_76780->retval_defunc_2_reduce_res_74767;
    float defunc_2_reduce_res_74768 =
          *futhark_mc_task_76780->retval_defunc_2_reduce_res_74768;
    size_t reduce_stage_1_tid_res_arr_mem_75245_cached_sizze_76782 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75245 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75247_cached_sizze_76783 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75247 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75245_cached_sizze_76782 <
        (size_t) ((int64_t) 4 * num_tasks_75244)) {
        reduce_stage_1_tid_res_arr_mem_75245 =
            realloc(reduce_stage_1_tid_res_arr_mem_75245, (int64_t) 4 *
                    num_tasks_75244);
        reduce_stage_1_tid_res_arr_mem_75245_cached_sizze_76782 = (int64_t) 4 *
            num_tasks_75244;
    }
    if (reduce_stage_1_tid_res_arr_mem_75247_cached_sizze_76783 <
        (size_t) ((int64_t) 4 * num_tasks_75244)) {
        reduce_stage_1_tid_res_arr_mem_75247 =
            realloc(reduce_stage_1_tid_res_arr_mem_75247, (int64_t) 4 *
                    num_tasks_75244);
        reduce_stage_1_tid_res_arr_mem_75247_cached_sizze_76783 = (int64_t) 4 *
            num_tasks_75244;
    }
    
    int64_t iter_75249;
    struct futhark_mc_segred_stage_1_parloop_struct_76784
    futhark_mc_segred_stage_1_parloop_struct_76784;
    
    futhark_mc_segred_stage_1_parloop_struct_76784.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_last_res_67973 =
        last_res_67973;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_mem_70280 =
        mem_70280.mem;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_min_res_74705 =
        min_res_74705;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_mem_74726 =
        mem_74726.mem;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_mem_74727 =
        mem_74727.mem;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_a11_74763 = a11_74763;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_b11_74765 = b11_74765;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_c11_74766 = c11_74766;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_reduce_stage_1_tid_res_arr_mem_75245 =
        reduce_stage_1_tid_res_arr_mem_75245;
    futhark_mc_segred_stage_1_parloop_struct_76784.free_reduce_stage_1_tid_res_arr_mem_75247 =
        reduce_stage_1_tid_res_arr_mem_75247;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76785_task;
    
    futhark_mc_segred_stage_1_parloop_76785_task.name =
        "futhark_mc_segred_stage_1_parloop_76785";
    futhark_mc_segred_stage_1_parloop_76785_task.fn =
        futhark_mc_segred_stage_1_parloop_76785;
    futhark_mc_segred_stage_1_parloop_76785_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76784;
    futhark_mc_segred_stage_1_parloop_76785_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76785_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76785_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76785_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76785_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76785_task);
    
    if (futhark_mc_segred_stage_1_parloop_76785_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76785_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76785_total_end -
                 futhark_mc_segred_stage_1_parloop_76785_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76785_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76785_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76785_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74767 = 0.0F;
        defunc_2_reduce_res_74768 = 0.0F;
    }
    
    float x_75252;
    float x_75253;
    float x_75255;
    float x_75256;
    
    for (int32_t i_75258 = 0; i_75258 < num_tasks_75244; i_75258++) {
        flat_tid_67799 = i_75258;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75252 = defunc_2_reduce_res_74767;
            }
            // load next params
            {
                x_75253 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75245)[flat_tid_67799];
            }
            // red body
            {
                float defunc_1_op_res_75254 = x_75252 + x_75253;
                
                defunc_2_reduce_res_74767 = defunc_1_op_res_75254;
            }
            // load acc params
            {
                x_75255 = defunc_2_reduce_res_74768;
            }
            // load next params
            {
                x_75256 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75247)[flat_tid_67799];
            }
            // red body
            {
                float defunc_1_op_res_75257 = x_75255 + x_75256;
                
                defunc_2_reduce_res_74768 = defunc_1_op_res_75257;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75245);
    free(reduce_stage_1_tid_res_arr_mem_75247);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76781_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76781_end -
                 futhark_mc_segred_task_76781_start;
        
        ctx->futhark_mc_segred_task_76781_runs[tid]++;
        ctx->futhark_mc_segred_task_76781_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76781_iter[tid] += iterations;
    }
    *futhark_mc_task_76780->retval_defunc_2_reduce_res_74767 =
        defunc_2_reduce_res_74767;
    *futhark_mc_task_76780->retval_defunc_2_reduce_res_74768 =
        defunc_2_reduce_res_74768;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76765(void *args, int64_t start,
                                           int64_t end, int flat_tid_67793,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76764
    *futhark_mc_segmap_parloop_struct_76764 =
    (struct futhark_mc_segmap_parloop_struct_76764 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76764->ctx;
    uint64_t futhark_mc_segmap_parloop_76765_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76765_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76764->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76764->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76764->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76764->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76764->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76764->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76764->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76764->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76764->free_m_64090;
    int64_t last_res_67973 =
            futhark_mc_segmap_parloop_struct_76764->free_last_res_67973;
    int64_t min_arg_67985 =
            futhark_mc_segmap_parloop_struct_76764->free_min_arg_67985;
    float max_res_67989 =
          futhark_mc_segmap_parloop_struct_76764->free_max_res_67989;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70280,
                                 .size =0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70283,
                                 .size =0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70286,
                                 .size =0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70289,
                                 .size =0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70292,
                                 .size =0, .references =NULL};
    int64_t bytes_70293 =
            futhark_mc_segmap_parloop_struct_76764->free_bytes_70293;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70295,
                                 .size =0, .references =NULL};
    struct memblock mem_70334 = {.desc ="mem_70334", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70334,
                                 .size =0, .references =NULL};
    struct memblock mem_70337 = {.desc ="mem_70337", .mem =
                                 futhark_mc_segmap_parloop_struct_76764->free_mem_70337,
                                 .size =0, .references =NULL};
    size_t mem_74726_cached_sizze_76766 = 0;
    char *mem_74726 = NULL;
    size_t mem_74727_cached_sizze_76767 = 0;
    char *mem_74727 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75105 = start;
    
    if (mem_74726_cached_sizze_76766 < (size_t) bytes_70293) {
        mem_74726 = realloc(mem_74726, bytes_70293);
        mem_74726_cached_sizze_76766 = bytes_70293;
    }
    if (mem_74727_cached_sizze_76767 < (size_t) bytes_70293) {
        mem_74727 = realloc(mem_74727, bytes_70293);
        mem_74727_cached_sizze_76767 = bytes_70293;
    }
    for (; iter_75105 < end; iter_75105++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75205 = n_m_64072;
        int64_t gtid_67794 = iter_75105;
        int64_t remnant_75206 = iter_75105 - gtid_67794;
        int64_t min_arg_74627 = mul64(jump_64068, gtid_67794);
        int64_t min_res_74628 = smin64(i_64078, min_arg_74627);
        int64_t defunc_0_g_res_74629 = add64((int64_t) 1, min_res_74628);
        bool nearest_idx_74630;
        int64_t nearest_idx_74631;
        int64_t nearest_idx_74632;
        bool loop_while_75106;
        int64_t low_75107;
        int64_t high_75108;
        
        loop_while_75106 = x_64079;
        low_75107 = (int64_t) 0;
        high_75108 = i_64078;
        while (loop_while_75106) {
            int64_t x_75109 = add64(low_75107, high_75108);
            int64_t mid_75110 = sdiv64(x_75109, (int64_t) 2);
            bool x_75111 = sle64((int64_t) 0, mid_75110);
            bool y_75112 = slt64(mid_75110, n_64064);
            bool bounds_check_75113 = x_75111 && y_75112;
            bool index_certs_75114;
            
            if (!bounds_check_75113) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_75110,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_75115 = ((int64_t *) mem_70289.mem)[mid_75110];
            bool cond_75116 = sle64(defunc_0_g_res_74629, x_75115);
            int64_t loopres_75117;
            int64_t loopres_75118;
            
            if (cond_75116) {
                int64_t loopres_t_res_75119 = sub64(mid_75110, (int64_t) 1);
                
                loopres_75117 = low_75107;
                loopres_75118 = loopres_t_res_75119;
            } else {
                int64_t loopres_f_res_75120 = add64((int64_t) 1, mid_75110);
                
                loopres_75117 = loopres_f_res_75120;
                loopres_75118 = high_75108;
            }
            
            bool loop_cond_75121 = sle64(loopres_75117, loopres_75118);
            bool loop_while_tmp_75207 = loop_cond_75121;
            int64_t low_tmp_75208 = loopres_75117;
            int64_t high_tmp_75209 = loopres_75118;
            
            loop_while_75106 = loop_while_tmp_75207;
            low_75107 = low_tmp_75208;
            high_75108 = high_tmp_75209;
        }
        nearest_idx_74630 = loop_while_75106;
        nearest_idx_74631 = low_75107;
        nearest_idx_74632 = high_75108;
        
        int64_t max_arg_74649 = sub64(nearest_idx_74631, min_res_64084);
        int64_t max_res_74650 = smax64((int64_t) 0, max_arg_74649);
        int64_t j_74651 = add64(min_res_64084, max_res_74650);
        int64_t i_p_m_t_s_74652 = add64(m_64090, max_res_74650);
        bool zzero_leq_i_p_m_t_s_74653 = sle64((int64_t) 0, i_p_m_t_s_74652);
        bool i_p_m_t_s_leq_w_74654 = slt64(i_p_m_t_s_74652, n_64064);
        bool zzero_lte_i_74655 = sle64((int64_t) 0, max_res_74650);
        bool i_lte_j_74656 = sle64(max_res_74650, j_74651);
        bool y_74657 = i_p_m_t_s_leq_w_74654 && zzero_lte_i_74655;
        bool y_74658 = zzero_leq_i_p_m_t_s_74653 && y_74657;
        bool y_74659 = i_lte_j_74656 && y_74658;
        bool forwards_ok_74660 = zzero_lte_i_74655 && y_74659;
        bool ok_or_empty_74661 = empty_slice_64089 || forwards_ok_74660;
        bool index_certs_74662;
        
        if (!ok_or_empty_74661) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_74650, ":",
                          (long long) j_74651,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_74663;
        int64_t flat_tid_67795 = (int64_t) 0;
        int32_t num_tasks_75210;
        struct futhark_mc_task_76768 futhark_mc_task_76768;
        
        futhark_mc_task_76768.ctx = ctx;
        futhark_mc_task_76768.free_mem_70292 = mem_70292.mem;
        futhark_mc_task_76768.free_defunc_0_g_res_74629 = defunc_0_g_res_74629;
        futhark_mc_task_76768.free_max_res_74650 = max_res_74650;
        futhark_mc_task_76768.retval_defunc_2_reduce_res_74663 =
            &defunc_2_reduce_res_74663;
        
        struct scheduler_segop futhark_mc_task_76768_task;
        
        futhark_mc_task_76768_task.args = &futhark_mc_task_76768;
        futhark_mc_task_76768_task.top_level_fn = futhark_mc_segred_task_76769;
        futhark_mc_task_76768_task.name = "futhark_mc_segred_task_76769";
        futhark_mc_task_76768_task.iterations = min_res_64084;
        futhark_mc_task_76768_task.task_time =
            &ctx->futhark_mc_segred_task_76769_total_time;
        futhark_mc_task_76768_task.task_iter =
            &ctx->futhark_mc_segred_task_76769_total_iter;
        futhark_mc_task_76768_task.sched = STATIC;
        futhark_mc_task_76768_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76769_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76768_task);
        
        if (futhark_mc_segred_task_76769_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_74671;
        int64_t idx_74672;
        int64_t idx_74673;
        int64_t idx_74674;
        int64_t best_idx_75130;
        int64_t last_idx_75131;
        int64_t best_sum_75132;
        int64_t curr_sum_75133;
        
        best_idx_75130 = max_res_74650;
        last_idx_75131 = max_res_74650;
        best_sum_75132 = defunc_2_reduce_res_74663;
        curr_sum_75133 = defunc_2_reduce_res_74663;
        for (int64_t j_75129 = 0; j_75129 < min_res_64084; j_75129++) {
            int64_t new_idx_75134 = add64(max_res_74650, j_75129);
            int64_t x_75135 = add64(min_res_64084, new_idx_75134);
            bool cond_75136 = slt64(last_res_67973, x_75135);
            int64_t new_sum_75137;
            
            if (cond_75136) {
                new_sum_75137 = (int64_t) 9223372036854775807;
            } else {
                bool x_75138 = sle64((int64_t) 0, last_idx_75131);
                bool y_75139 = slt64(last_idx_75131, n_64064);
                bool bounds_check_75140 = x_75138 && y_75139;
                bool index_certs_75141;
                
                if (!bounds_check_75140) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_75131,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_75142 = ((int64_t *) mem_70292.mem)[last_idx_75131];
                int64_t binop_p_75143 = sub64(defunc_0_g_res_74629, y_75142);
                int64_t defunc_0_f_res_75144 = abs64(binop_p_75143);
                int64_t x_75145 = sub64(curr_sum_75133, defunc_0_f_res_75144);
                int64_t min_arg_75146 = add64(min_res_64084, last_idx_75131);
                int64_t min_res_75147 = smin64(i_64078, min_arg_75146);
                bool x_75148 = sle64((int64_t) 0, min_res_75147);
                bool y_75149 = slt64(min_res_75147, n_64064);
                bool bounds_check_75150 = x_75148 && y_75149;
                bool index_certs_75151;
                
                if (!bounds_check_75150) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_75147,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_75152 = ((int64_t *) mem_70292.mem)[min_res_75147];
                int64_t binop_p_75153 = sub64(defunc_0_g_res_74629, y_75152);
                int64_t defunc_0_f_res_75154 = abs64(binop_p_75153);
                int64_t new_sum_f_res_75155 = add64(x_75145,
                                                    defunc_0_f_res_75154);
                
                new_sum_75137 = new_sum_f_res_75155;
            }
            
            bool cond_75156 = sle64(new_sum_75137, best_sum_75132);
            int64_t loopres_75157;
            
            if (cond_75156) {
                loopres_75157 = new_idx_75134;
            } else {
                loopres_75157 = best_idx_75130;
            }
            
            int64_t loopres_75158;
            
            if (cond_75156) {
                loopres_75158 = new_sum_75137;
            } else {
                loopres_75158 = best_sum_75132;
            }
            
            int64_t best_idx_tmp_75219 = loopres_75157;
            int64_t last_idx_tmp_75220 = new_idx_75134;
            int64_t best_sum_tmp_75221 = loopres_75158;
            int64_t curr_sum_tmp_75222 = new_sum_75137;
            
            best_idx_75130 = best_idx_tmp_75219;
            last_idx_75131 = last_idx_tmp_75220;
            best_sum_75132 = best_sum_tmp_75221;
            curr_sum_75133 = curr_sum_tmp_75222;
        }
        idx_74671 = best_idx_75130;
        idx_74672 = last_idx_75131;
        idx_74673 = best_sum_75132;
        idx_74674 = curr_sum_75133;
        
        int64_t min_res_74705 = smin64(min_arg_67985, idx_74671);
        int64_t x_74706 = add64(min_res_64084, min_res_74705);
        int64_t r_74707 = sub64(x_74706, (int64_t) 1);
        bool x_74708 = sle64((int64_t) 0, r_74707);
        bool y_74709 = slt64(r_74707, n_64064);
        bool bounds_check_74710 = x_74708 && y_74709;
        bool index_certs_74711;
        
        if (!bounds_check_74710) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74707,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74712 = ((int64_t *) mem_70283.mem)[r_74707];
        int64_t abs_arg_74713 = sub64(x_74712, min_res_74628);
        int64_t abs_res_74714 = abs64(abs_arg_74713);
        bool x_74715 = sle64((int64_t) 0, min_res_74705);
        bool y_74716 = slt64(min_res_74705, n_64064);
        bool bounds_check_74717 = x_74715 && y_74716;
        bool index_certs_74718;
        
        if (!bounds_check_74717) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74705,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_74719 = ((int64_t *) mem_70283.mem)[min_res_74705];
        int64_t abs_arg_74720 = sub64(x_74719, min_res_74628);
        int64_t abs_res_74721 = abs64(abs_arg_74720);
        int64_t max_res_74722 = smax64(abs_res_74714, abs_res_74721);
        float defunc_0_f_res_74723 = sitofp_i64_f32(max_res_74722);
        float defunc_1_f_res_74724 = max_res_67989 + defunc_0_f_res_74723;
        float defunc_0_f_res_74725 = sitofp_i64_f32(min_res_74628);
        float defunc_2_reduce_res_74728;
        float defunc_2_reduce_res_74729;
        float defunc_2_reduce_res_74730;
        int64_t flat_tid_67797 = (int64_t) 0;
        int32_t num_tasks_75223;
        struct futhark_mc_task_76773 futhark_mc_task_76773;
        
        futhark_mc_task_76773.ctx = ctx;
        futhark_mc_task_76773.free_last_res_67973 = last_res_67973;
        futhark_mc_task_76773.free_mem_70286 = mem_70286.mem;
        futhark_mc_task_76773.free_mem_70295 = mem_70295.mem;
        futhark_mc_task_76773.free_min_res_74705 = min_res_74705;
        futhark_mc_task_76773.free_defunc_1_f_res_74724 = defunc_1_f_res_74724;
        futhark_mc_task_76773.free_defunc_0_f_res_74725 = defunc_0_f_res_74725;
        futhark_mc_task_76773.retval_defunc_2_reduce_res_74728 =
            &defunc_2_reduce_res_74728;
        futhark_mc_task_76773.retval_defunc_2_reduce_res_74729 =
            &defunc_2_reduce_res_74729;
        futhark_mc_task_76773.retval_defunc_2_reduce_res_74730 =
            &defunc_2_reduce_res_74730;
        futhark_mc_task_76773.retval_mem_74726 = mem_74726;
        futhark_mc_task_76773.retval_mem_74727 = mem_74727;
        
        struct scheduler_segop futhark_mc_task_76773_task;
        
        futhark_mc_task_76773_task.args = &futhark_mc_task_76773;
        futhark_mc_task_76773_task.top_level_fn = futhark_mc_segred_task_76774;
        futhark_mc_task_76773_task.name = "futhark_mc_segred_task_76774";
        futhark_mc_task_76773_task.iterations = q_64066;
        futhark_mc_task_76773_task.task_time =
            &ctx->futhark_mc_segred_task_76774_total_time;
        futhark_mc_task_76773_task.task_iter =
            &ctx->futhark_mc_segred_task_76774_total_iter;
        futhark_mc_task_76773_task.sched = STATIC;
        futhark_mc_task_76773_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76774_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76773_task);
        
        if (futhark_mc_segred_task_76774_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_74759 = defunc_2_reduce_res_74728 * defunc_2_reduce_res_74730;
        float y_74760 = defunc_2_reduce_res_74729 * defunc_2_reduce_res_74729;
        float y_74761 = x_74759 - y_74760;
        float det1_74762 = 1.0F / y_74761;
        float a11_74763 = defunc_2_reduce_res_74730 * det1_74762;
        float negate_arg_74764 = defunc_2_reduce_res_74729 * det1_74762;
        float b11_74765 = 0.0F - negate_arg_74764;
        float c11_74766 = defunc_2_reduce_res_74728 * det1_74762;
        float defunc_2_reduce_res_74767;
        float defunc_2_reduce_res_74768;
        int64_t flat_tid_67799 = (int64_t) 0;
        int32_t num_tasks_75244;
        struct futhark_mc_task_76780 futhark_mc_task_76780;
        
        futhark_mc_task_76780.ctx = ctx;
        futhark_mc_task_76780.free_last_res_67973 = last_res_67973;
        futhark_mc_task_76780.free_mem_70280 = mem_70280.mem;
        futhark_mc_task_76780.free_min_res_74705 = min_res_74705;
        futhark_mc_task_76780.free_mem_74726 = mem_74726;
        futhark_mc_task_76780.free_mem_74727 = mem_74727;
        futhark_mc_task_76780.free_a11_74763 = a11_74763;
        futhark_mc_task_76780.free_b11_74765 = b11_74765;
        futhark_mc_task_76780.free_c11_74766 = c11_74766;
        futhark_mc_task_76780.retval_defunc_2_reduce_res_74767 =
            &defunc_2_reduce_res_74767;
        futhark_mc_task_76780.retval_defunc_2_reduce_res_74768 =
            &defunc_2_reduce_res_74768;
        
        struct scheduler_segop futhark_mc_task_76780_task;
        
        futhark_mc_task_76780_task.args = &futhark_mc_task_76780;
        futhark_mc_task_76780_task.top_level_fn = futhark_mc_segred_task_76781;
        futhark_mc_task_76780_task.name = "futhark_mc_segred_task_76781";
        futhark_mc_task_76780_task.iterations = q_64066;
        futhark_mc_task_76780_task.task_time =
            &ctx->futhark_mc_segred_task_76781_total_time;
        futhark_mc_task_76780_task.task_iter =
            &ctx->futhark_mc_segred_task_76781_total_iter;
        futhark_mc_task_76780_task.sched = STATIC;
        futhark_mc_task_76780_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76781_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76780_task);
        
        if (futhark_mc_segred_task_76781_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70334.mem)[gtid_67794] = defunc_2_reduce_res_74767;
        ((float *) mem_70337.mem)[gtid_67794] = defunc_2_reduce_res_74768;
    }
    
  cleanup:
    { }
    free(mem_74726);
    free(mem_74727);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76765_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76765_end -
                 futhark_mc_segmap_parloop_76765_start;
        
        ctx->futhark_mc_segmap_parloop_76765_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76765_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76765_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76763(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67793 = tid;
    int num_tasks_74986 = info.nsubtasks;
    struct futhark_mc_task_76757 *futhark_mc_task_76757 =
                                 (struct futhark_mc_task_76757 *) args;
    struct futhark_context *ctx = futhark_mc_task_76757->ctx;
    uint64_t futhark_mc_segmap_nested_task_76763_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76763_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76757->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76757->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76757->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76757->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76757->free_i_64078;
    bool x_64079 = futhark_mc_task_76757->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76757->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76757->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76757->free_m_64090;
    int64_t last_res_67973 = futhark_mc_task_76757->free_last_res_67973;
    int64_t min_arg_67985 = futhark_mc_task_76757->free_min_arg_67985;
    float max_res_67989 = futhark_mc_task_76757->free_max_res_67989;
    struct memblock mem_70280 = {.desc ="mem_70280", .mem =
                                 futhark_mc_task_76757->free_mem_70280, .size =
                                 0, .references =NULL};
    struct memblock mem_70283 = {.desc ="mem_70283", .mem =
                                 futhark_mc_task_76757->free_mem_70283, .size =
                                 0, .references =NULL};
    struct memblock mem_70286 = {.desc ="mem_70286", .mem =
                                 futhark_mc_task_76757->free_mem_70286, .size =
                                 0, .references =NULL};
    struct memblock mem_70289 = {.desc ="mem_70289", .mem =
                                 futhark_mc_task_76757->free_mem_70289, .size =
                                 0, .references =NULL};
    struct memblock mem_70292 = {.desc ="mem_70292", .mem =
                                 futhark_mc_task_76757->free_mem_70292, .size =
                                 0, .references =NULL};
    int64_t bytes_70293 = futhark_mc_task_76757->free_bytes_70293;
    struct memblock mem_70295 = {.desc ="mem_70295", .mem =
                                 futhark_mc_task_76757->free_mem_70295, .size =
                                 0, .references =NULL};
    struct memblock mem_70334 = {.desc ="mem_70334", .mem =
                                 futhark_mc_task_76757->free_mem_70334, .size =
                                 0, .references =NULL};
    struct memblock mem_70337 = {.desc ="mem_70337", .mem =
                                 futhark_mc_task_76757->free_mem_70337, .size =
                                 0, .references =NULL};
    int64_t iter_75105;
    struct futhark_mc_segmap_parloop_struct_76764
    futhark_mc_segmap_parloop_struct_76764;
    
    futhark_mc_segmap_parloop_struct_76764.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76764.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76764.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76764.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76764.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76764.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76764.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76764.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76764.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76764.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76764.free_last_res_67973 = last_res_67973;
    futhark_mc_segmap_parloop_struct_76764.free_min_arg_67985 = min_arg_67985;
    futhark_mc_segmap_parloop_struct_76764.free_max_res_67989 = max_res_67989;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70280 = mem_70280.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70283 = mem_70283.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70286 = mem_70286.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70289 = mem_70289.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70292 = mem_70292.mem;
    futhark_mc_segmap_parloop_struct_76764.free_bytes_70293 = bytes_70293;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70295 = mem_70295.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70334 = mem_70334.mem;
    futhark_mc_segmap_parloop_struct_76764.free_mem_70337 = mem_70337.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76765_task;
    
    futhark_mc_segmap_parloop_76765_task.name =
        "futhark_mc_segmap_parloop_76765";
    futhark_mc_segmap_parloop_76765_task.fn = futhark_mc_segmap_parloop_76765;
    futhark_mc_segmap_parloop_76765_task.args =
        &futhark_mc_segmap_parloop_struct_76764;
    futhark_mc_segmap_parloop_76765_task.iterations = iterations;
    futhark_mc_segmap_parloop_76765_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76765_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76765_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76765_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76765_task);
    
    if (futhark_mc_segmap_parloop_76765_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76765_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76765_total_end -
                 futhark_mc_segmap_parloop_76765_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76765_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76765_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76765_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76763_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76763_end -
                 futhark_mc_segmap_nested_task_76763_start;
        
        ctx->futhark_mc_segmap_nested_task_76763_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76763_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76763_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76728(void *args, int64_t start,
                                           int64_t end, int flat_tid_67781,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76727
    *futhark_mc_segmap_parloop_struct_76727 =
    (struct futhark_mc_segmap_parloop_struct_76727 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76727->ctx;
    uint64_t futhark_mc_segmap_parloop_76728_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76728_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76727->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76727->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76727->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76727->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76727->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76727->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76727->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76727->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76727->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76727->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76727->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76727->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70275 =
            futhark_mc_segmap_parloop_struct_76727->free_bytes_70275;
    int64_t bytes_70278 =
            futhark_mc_segmap_parloop_struct_76727->free_bytes_70278;
    int64_t bytes_70293 =
            futhark_mc_segmap_parloop_struct_76727->free_bytes_70293;
    int64_t bytes_70332 =
            futhark_mc_segmap_parloop_struct_76727->free_bytes_70332;
    struct memblock mem_70506 = {.desc ="mem_70506", .mem =
                                 futhark_mc_segmap_parloop_struct_76727->free_mem_70506,
                                 .size =0, .references =NULL};
    struct memblock mem_70510 = {.desc ="mem_70510", .mem =
                                 futhark_mc_segmap_parloop_struct_76727->free_mem_70510,
                                 .size =0, .references =NULL};
    size_t mem_70277_cached_sizze_76729 = 0;
    char *mem_70277 = NULL;
    size_t mem_70280_cached_sizze_76730 = 0;
    char *mem_70280 = NULL;
    size_t mem_70283_cached_sizze_76731 = 0;
    char *mem_70283 = NULL;
    size_t mem_70286_cached_sizze_76732 = 0;
    char *mem_70286 = NULL;
    size_t mem_70289_cached_sizze_76733 = 0;
    char *mem_70289 = NULL;
    size_t mem_70292_cached_sizze_76734 = 0;
    char *mem_70292 = NULL;
    size_t mem_70295_cached_sizze_76735 = 0;
    char *mem_70295 = NULL;
    size_t mem_70334_cached_sizze_76736 = 0;
    char *mem_70334 = NULL;
    size_t mem_70337_cached_sizze_76737 = 0;
    char *mem_70337 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74606 = start;
    
    if (mem_70277_cached_sizze_76729 < (size_t) bytes_70275) {
        mem_70277 = realloc(mem_70277, bytes_70275);
        mem_70277_cached_sizze_76729 = bytes_70275;
    }
    if (mem_70280_cached_sizze_76730 < (size_t) bytes_70278) {
        mem_70280 = realloc(mem_70280, bytes_70278);
        mem_70280_cached_sizze_76730 = bytes_70278;
    }
    if (mem_70283_cached_sizze_76731 < (size_t) bytes_70275) {
        mem_70283 = realloc(mem_70283, bytes_70275);
        mem_70283_cached_sizze_76731 = bytes_70275;
    }
    if (mem_70286_cached_sizze_76732 < (size_t) bytes_70278) {
        mem_70286 = realloc(mem_70286, bytes_70278);
        mem_70286_cached_sizze_76732 = bytes_70278;
    }
    if (mem_70289_cached_sizze_76733 < (size_t) bytes_70275) {
        mem_70289 = realloc(mem_70289, bytes_70275);
        mem_70289_cached_sizze_76733 = bytes_70275;
    }
    if (mem_70292_cached_sizze_76734 < (size_t) bytes_70275) {
        mem_70292 = realloc(mem_70292, bytes_70275);
        mem_70292_cached_sizze_76734 = bytes_70275;
    }
    if (mem_70295_cached_sizze_76735 < (size_t) bytes_70293) {
        mem_70295 = realloc(mem_70295, bytes_70293);
        mem_70295_cached_sizze_76735 = bytes_70293;
    }
    if (mem_70334_cached_sizze_76736 < (size_t) bytes_70332) {
        mem_70334 = realloc(mem_70334, bytes_70332);
        mem_70334_cached_sizze_76736 = bytes_70332;
    }
    if (mem_70337_cached_sizze_76737 < (size_t) bytes_70332) {
        mem_70337 = realloc(mem_70337, bytes_70332);
        mem_70337_cached_sizze_76737 = bytes_70332;
    }
    for (; iter_74606 < end; iter_74606++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74954 = m_64063;
        int64_t gtid_67782 = iter_74606;
        int64_t remnant_74955 = iter_74606 - gtid_67782;
        int64_t flat_tid_67783 = (int64_t) 0;
        int32_t num_tasks_74956;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76738 futhark_mc_task_76738;
        
        futhark_mc_task_76738.ctx = ctx;
        futhark_mc_task_76738.free_n_64064 = n_64064;
        futhark_mc_task_76738.free_gtid_67782 = gtid_67782;
        futhark_mc_task_76738.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76738.free_mem_70277 = mem_70277;
        
        struct scheduler_segop futhark_mc_task_76738_task;
        
        futhark_mc_task_76738_task.args = &futhark_mc_task_76738;
        futhark_mc_task_76738_task.top_level_fn = futhark_mc_segscan_task_76739;
        futhark_mc_task_76738_task.name = "futhark_mc_segscan_task_76739";
        futhark_mc_task_76738_task.iterations = n_64064;
        futhark_mc_task_76738_task.task_time =
            &ctx->futhark_mc_segscan_task_76739_total_time;
        futhark_mc_task_76738_task.task_iter =
            &ctx->futhark_mc_segscan_task_76739_total_iter;
        futhark_mc_task_76738_task.sched = STATIC;
        futhark_mc_task_76738_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76739_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76738_task);
        
        if (futhark_mc_segscan_task_76739_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_67973 = ((int64_t *) mem_70277)[i_64078];
        
        for (int64_t i_74970 = 0; i_74970 < n_64064; i_74970++) {
            ((float *) mem_70280)[i_74970] = 0.0F;
        }
        for (int64_t i_74971 = 0; i_74971 < n_64064; i_74971++) {
            ((int64_t *) mem_70283)[i_74971] = (int64_t) -1;
        }
        
        int64_t flat_tid_67785 = (int64_t) 0;
        int32_t num_tasks_74972;
        struct futhark_mc_task_76745 futhark_mc_task_76745;
        
        futhark_mc_task_76745.ctx = ctx;
        futhark_mc_task_76745.free_n_64064 = n_64064;
        futhark_mc_task_76745.free_gtid_67782 = gtid_67782;
        futhark_mc_task_76745.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76745.free_mem_70277 = mem_70277;
        futhark_mc_task_76745.free_mem_70280 = mem_70280;
        futhark_mc_task_76745.free_mem_70283 = mem_70283;
        
        struct scheduler_segop futhark_mc_task_76745_task;
        
        futhark_mc_task_76745_task.args = &futhark_mc_task_76745;
        futhark_mc_task_76745_task.top_level_fn = futhark_mc_segmap_task_76746;
        futhark_mc_task_76745_task.name = "futhark_mc_segmap_task_76746";
        futhark_mc_task_76745_task.iterations = n_64064;
        futhark_mc_task_76745_task.task_time =
            &ctx->futhark_mc_segmap_task_76746_total_time;
        futhark_mc_task_76745_task.task_iter =
            &ctx->futhark_mc_segmap_task_76746_total_iter;
        futhark_mc_task_76745_task.sched = STATIC;
        futhark_mc_task_76745_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76746_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76745_task);
        
        if (futhark_mc_segmap_task_76746_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_67985 = sub64(last_res_67973, min_res_64084);
        float i64_res_67986 = sitofp_i64_f32(last_res_67973);
        float x_67987 = i64_res_64091 - i64_res_67986;
        float max_arg_67988 = x_67987 / 2.0F;
        float max_res_67989 = fmax32(0.0F, max_arg_67988);
        int64_t flat_tid_67787 = (int64_t) 0;
        int32_t num_tasks_74978;
        struct futhark_mc_task_76749 futhark_mc_task_76749;
        
        futhark_mc_task_76749.ctx = ctx;
        futhark_mc_task_76749.free_n_64064 = n_64064;
        futhark_mc_task_76749.free_mem_70283 = mem_70283;
        futhark_mc_task_76749.free_mem_70286 = mem_70286;
        futhark_mc_task_76749.free_mem_70289 = mem_70289;
        futhark_mc_task_76749.free_mem_70292 = mem_70292;
        
        struct scheduler_segop futhark_mc_task_76749_task;
        
        futhark_mc_task_76749_task.args = &futhark_mc_task_76749;
        futhark_mc_task_76749_task.top_level_fn = futhark_mc_segmap_task_76750;
        futhark_mc_task_76749_task.name = "futhark_mc_segmap_task_76750";
        futhark_mc_task_76749_task.iterations = n_64064;
        futhark_mc_task_76749_task.task_time =
            &ctx->futhark_mc_segmap_task_76750_total_time;
        futhark_mc_task_76749_task.task_iter =
            &ctx->futhark_mc_segmap_task_76750_total_iter;
        futhark_mc_task_76749_task.sched = STATIC;
        futhark_mc_task_76749_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76750_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76749_task);
        
        if (futhark_mc_segmap_task_76750_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67789 = (int64_t) 0;
        int32_t num_tasks_74982;
        struct futhark_mc_task_76753 futhark_mc_task_76753;
        
        futhark_mc_task_76753.ctx = ctx;
        futhark_mc_task_76753.free_q_64066 = q_64066;
        futhark_mc_task_76753.free_last_res_67973 = last_res_67973;
        futhark_mc_task_76753.free_mem_70295 = mem_70295;
        
        struct scheduler_segop futhark_mc_task_76753_task;
        
        futhark_mc_task_76753_task.args = &futhark_mc_task_76753;
        futhark_mc_task_76753_task.top_level_fn = futhark_mc_segmap_task_76754;
        futhark_mc_task_76753_task.name = "futhark_mc_segmap_task_76754";
        futhark_mc_task_76753_task.iterations = q_64066;
        futhark_mc_task_76753_task.task_time =
            &ctx->futhark_mc_segmap_task_76754_total_time;
        futhark_mc_task_76753_task.task_iter =
            &ctx->futhark_mc_segmap_task_76754_total_iter;
        futhark_mc_task_76753_task.sched = STATIC;
        futhark_mc_task_76753_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76754_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76753_task);
        
        if (futhark_mc_segmap_task_76754_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67791 = (int64_t) 0;
        int32_t num_tasks_74986;
        int64_t flat_tid_67793 = (int64_t) 0;
        struct futhark_mc_task_76757 futhark_mc_task_76757;
        
        futhark_mc_task_76757.ctx = ctx;
        futhark_mc_task_76757.free_n_64064 = n_64064;
        futhark_mc_task_76757.free_q_64066 = q_64066;
        futhark_mc_task_76757.free_jump_64068 = jump_64068;
        futhark_mc_task_76757.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76757.free_i_64078 = i_64078;
        futhark_mc_task_76757.free_x_64079 = x_64079;
        futhark_mc_task_76757.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76757.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76757.free_m_64090 = m_64090;
        futhark_mc_task_76757.free_last_res_67973 = last_res_67973;
        futhark_mc_task_76757.free_min_arg_67985 = min_arg_67985;
        futhark_mc_task_76757.free_max_res_67989 = max_res_67989;
        futhark_mc_task_76757.free_mem_70280 = mem_70280;
        futhark_mc_task_76757.free_mem_70283 = mem_70283;
        futhark_mc_task_76757.free_mem_70286 = mem_70286;
        futhark_mc_task_76757.free_mem_70289 = mem_70289;
        futhark_mc_task_76757.free_mem_70292 = mem_70292;
        futhark_mc_task_76757.free_bytes_70293 = bytes_70293;
        futhark_mc_task_76757.free_mem_70295 = mem_70295;
        futhark_mc_task_76757.free_mem_70334 = mem_70334;
        futhark_mc_task_76757.free_mem_70337 = mem_70337;
        
        struct scheduler_segop futhark_mc_task_76757_task;
        
        futhark_mc_task_76757_task.args = &futhark_mc_task_76757;
        futhark_mc_task_76757_task.top_level_fn = futhark_mc_segmap_task_76758;
        futhark_mc_task_76757_task.name = "futhark_mc_segmap_task_76758";
        futhark_mc_task_76757_task.iterations = n_m_64072;
        futhark_mc_task_76757_task.task_time =
            &ctx->futhark_mc_segmap_task_76758_total_time;
        futhark_mc_task_76757_task.task_iter =
            &ctx->futhark_mc_segmap_task_76758_total_iter;
        futhark_mc_task_76757_task.sched = DYNAMIC;
        futhark_mc_task_76757_task.nested_fn =
            futhark_mc_segmap_nested_task_76763;
        
        int futhark_mc_segmap_task_76758_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76757_task);
        
        if (futhark_mc_segmap_task_76758_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70506.mem + gtid_67782 * n_m_64072 * (int64_t) 4,
                mem_70334 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70510.mem + gtid_67782 * n_m_64072 * (int64_t) 4,
                mem_70337 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70277);
    free(mem_70280);
    free(mem_70283);
    free(mem_70286);
    free(mem_70289);
    free(mem_70292);
    free(mem_70295);
    free(mem_70334);
    free(mem_70337);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76728_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76728_end -
                 futhark_mc_segmap_parloop_76728_start;
        
        ctx->futhark_mc_segmap_parloop_76728_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76728_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76728_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76726(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67781 = tid;
    int num_tasks_74369 = info.nsubtasks;
    struct futhark_mc_task_76711 *futhark_mc_task_76711 =
                                 (struct futhark_mc_task_76711 *) args;
    struct futhark_context *ctx = futhark_mc_task_76711->ctx;
    uint64_t futhark_mc_segmap_nested_task_76726_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76726_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76711->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76711->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76711->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76711->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76711->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76711->free_i_64078;
    bool x_64079 = futhark_mc_task_76711->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76711->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76711->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76711->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76711->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76711->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70275 = futhark_mc_task_76711->free_bytes_70275;
    int64_t bytes_70278 = futhark_mc_task_76711->free_bytes_70278;
    int64_t bytes_70293 = futhark_mc_task_76711->free_bytes_70293;
    int64_t bytes_70332 = futhark_mc_task_76711->free_bytes_70332;
    struct memblock mem_70506 = {.desc ="mem_70506", .mem =
                                 futhark_mc_task_76711->free_mem_70506, .size =
                                 0, .references =NULL};
    struct memblock mem_70510 = {.desc ="mem_70510", .mem =
                                 futhark_mc_task_76711->free_mem_70510, .size =
                                 0, .references =NULL};
    int64_t iter_74606;
    struct futhark_mc_segmap_parloop_struct_76727
    futhark_mc_segmap_parloop_struct_76727;
    
    futhark_mc_segmap_parloop_struct_76727.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76727.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76727.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76727.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76727.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76727.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76727.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76727.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76727.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76727.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76727.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76727.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76727.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76727.free_bytes_70275 = bytes_70275;
    futhark_mc_segmap_parloop_struct_76727.free_bytes_70278 = bytes_70278;
    futhark_mc_segmap_parloop_struct_76727.free_bytes_70293 = bytes_70293;
    futhark_mc_segmap_parloop_struct_76727.free_bytes_70332 = bytes_70332;
    futhark_mc_segmap_parloop_struct_76727.free_mem_70506 = mem_70506.mem;
    futhark_mc_segmap_parloop_struct_76727.free_mem_70510 = mem_70510.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76728_task;
    
    futhark_mc_segmap_parloop_76728_task.name =
        "futhark_mc_segmap_parloop_76728";
    futhark_mc_segmap_parloop_76728_task.fn = futhark_mc_segmap_parloop_76728;
    futhark_mc_segmap_parloop_76728_task.args =
        &futhark_mc_segmap_parloop_struct_76727;
    futhark_mc_segmap_parloop_76728_task.iterations = iterations;
    futhark_mc_segmap_parloop_76728_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76728_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76728_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76728_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76728_task);
    
    if (futhark_mc_segmap_parloop_76728_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76728_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76728_total_end -
                 futhark_mc_segmap_parloop_76728_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76728_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76728_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76728_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76726_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76726_end -
                 futhark_mc_segmap_nested_task_76726_start;
        
        ctx->futhark_mc_segmap_nested_task_76726_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76726_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76726_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76786 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70511;
    int64_t free_bytes_70514;
    int64_t free_bytes_70529;
    int64_t free_bytes_70604;
    char *free_mem_70808;
    char *free_mem_70812;
};
struct futhark_mc_segmap_parloop_struct_76788 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70511;
    int64_t free_bytes_70514;
    int64_t free_bytes_70529;
    int64_t free_bytes_70604;
    char *free_mem_70808;
    char *free_mem_70812;
};
static int futhark_mc_segmap_parloop_76789(void *args, int64_t start,
                                           int64_t end, int flat_tid_68330,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76788
    *futhark_mc_segmap_parloop_struct_76788 =
    (struct futhark_mc_segmap_parloop_struct_76788 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76788->ctx;
    uint64_t futhark_mc_segmap_parloop_76789_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76789_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76788->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76788->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76788->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76788->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76788->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76788->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76788->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76788->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76788->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76788->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76788->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76788->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70511 =
            futhark_mc_segmap_parloop_struct_76788->free_bytes_70511;
    int64_t bytes_70514 =
            futhark_mc_segmap_parloop_struct_76788->free_bytes_70514;
    int64_t bytes_70529 =
            futhark_mc_segmap_parloop_struct_76788->free_bytes_70529;
    int64_t bytes_70604 =
            futhark_mc_segmap_parloop_struct_76788->free_bytes_70604;
    struct memblock mem_70808 = {.desc ="mem_70808", .mem =
                                 futhark_mc_segmap_parloop_struct_76788->free_mem_70808,
                                 .size =0, .references =NULL};
    struct memblock mem_70812 = {.desc ="mem_70812", .mem =
                                 futhark_mc_segmap_parloop_struct_76788->free_mem_70812,
                                 .size =0, .references =NULL};
    size_t mem_70612_cached_sizze_76790 = 0;
    char *mem_70612 = NULL;
    size_t mem_70627_cached_sizze_76791 = 0;
    char *mem_70627 = NULL;
    size_t mem_70630_cached_sizze_76792 = 0;
    char *mem_70630 = NULL;
    size_t mem_70657_cached_sizze_76793 = 0;
    char *mem_70657 = NULL;
    size_t mem_70660_cached_sizze_76794 = 0;
    char *mem_70660 = NULL;
    size_t mem_70663_cached_sizze_76795 = 0;
    char *mem_70663 = NULL;
    size_t mem_70702_cached_sizze_76796 = 0;
    char *mem_70702 = NULL;
    size_t mem_70717_cached_sizze_76797 = 0;
    char *mem_70717 = NULL;
    size_t mem_70720_cached_sizze_76798 = 0;
    char *mem_70720 = NULL;
    size_t mem_70737_cached_sizze_76799 = 0;
    char *mem_70737 = NULL;
    size_t mem_70740_cached_sizze_76800 = 0;
    char *mem_70740 = NULL;
    size_t mem_70767_cached_sizze_76801 = 0;
    char *mem_70767 = NULL;
    size_t mem_70770_cached_sizze_76802 = 0;
    char *mem_70770 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75260 = start;
    
    if (mem_70612_cached_sizze_76790 < (size_t) bytes_70511) {
        mem_70612 = realloc(mem_70612, bytes_70511);
        mem_70612_cached_sizze_76790 = bytes_70511;
    }
    if (mem_70627_cached_sizze_76791 < (size_t) bytes_70514) {
        mem_70627 = realloc(mem_70627, bytes_70514);
        mem_70627_cached_sizze_76791 = bytes_70514;
    }
    if (mem_70630_cached_sizze_76792 < (size_t) bytes_70511) {
        mem_70630 = realloc(mem_70630, bytes_70511);
        mem_70630_cached_sizze_76792 = bytes_70511;
    }
    if (mem_70657_cached_sizze_76793 < (size_t) bytes_70514) {
        mem_70657 = realloc(mem_70657, bytes_70514);
        mem_70657_cached_sizze_76793 = bytes_70514;
    }
    if (mem_70660_cached_sizze_76794 < (size_t) bytes_70511) {
        mem_70660 = realloc(mem_70660, bytes_70511);
        mem_70660_cached_sizze_76794 = bytes_70511;
    }
    if (mem_70663_cached_sizze_76795 < (size_t) bytes_70511) {
        mem_70663 = realloc(mem_70663, bytes_70511);
        mem_70663_cached_sizze_76795 = bytes_70511;
    }
    if (mem_70702_cached_sizze_76796 < (size_t) bytes_70529) {
        mem_70702 = realloc(mem_70702, bytes_70529);
        mem_70702_cached_sizze_76796 = bytes_70529;
    }
    if (mem_70717_cached_sizze_76797 < (size_t) bytes_70604) {
        mem_70717 = realloc(mem_70717, bytes_70604);
        mem_70717_cached_sizze_76797 = bytes_70604;
    }
    if (mem_70720_cached_sizze_76798 < (size_t) bytes_70604) {
        mem_70720 = realloc(mem_70720, bytes_70604);
        mem_70720_cached_sizze_76798 = bytes_70604;
    }
    if (mem_70737_cached_sizze_76799 < (size_t) bytes_70529) {
        mem_70737 = realloc(mem_70737, bytes_70529);
        mem_70737_cached_sizze_76799 = bytes_70529;
    }
    if (mem_70740_cached_sizze_76800 < (size_t) bytes_70529) {
        mem_70740 = realloc(mem_70740, bytes_70529);
        mem_70740_cached_sizze_76800 = bytes_70529;
    }
    if (mem_70767_cached_sizze_76801 < (size_t) bytes_70529) {
        mem_70767 = realloc(mem_70767, bytes_70529);
        mem_70767_cached_sizze_76801 = bytes_70529;
    }
    if (mem_70770_cached_sizze_76802 < (size_t) bytes_70529) {
        mem_70770 = realloc(mem_70770, bytes_70529);
        mem_70770_cached_sizze_76802 = bytes_70529;
    }
    for (; iter_75260 < end; iter_75260++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75508 = m_64063;
        int64_t gtid_68331 = iter_75260;
        int64_t remnant_75509 = iter_75260 - gtid_68331;
        int64_t discard_69425;
        int64_t scanacc_75262 = (int64_t) 0;
        
        for (int64_t i_75261 = 0; i_75261 < n_64064; i_75261++) {
            float x_75264 = ((float *) Y_mem_69593.mem)[gtid_68331 * n_64064 +
                                                        i_75261];
            bool isnan_res_75265;
            
            isnan_res_75265 = futrts_isnan32(x_75264);
            
            bool defunc_0_p_res_75266 = !isnan_res_75265;
            int64_t defunc_0_f_res_75267 = btoi_bool_i64(defunc_0_p_res_75266);
            int64_t defunc_1_op_res_75268 = add64(defunc_0_f_res_75267,
                                                  scanacc_75262);
            
            ((int64_t *) mem_70612)[i_75261] = defunc_1_op_res_75268;
            
            int64_t scanacc_tmp_75510 = defunc_1_op_res_75268;
            
            scanacc_75262 = scanacc_tmp_75510;
        }
        discard_69425 = scanacc_75262;
        
        int64_t last_res_65239 = ((int64_t *) mem_70612)[i_64078];
        
        for (int64_t i_75512 = 0; i_75512 < n_64064; i_75512++) {
            ((float *) mem_70627)[i_75512] = 0.0F;
        }
        for (int64_t i_75513 = 0; i_75513 < n_64064; i_75513++) {
            ((int64_t *) mem_70630)[i_75513] = (int64_t) -1;
        }
        for (int64_t write_iter_75270 = 0; write_iter_75270 < n_64064;
             write_iter_75270++) {
            float write_iv_75273 = ((float *) Y_mem_69593.mem)[gtid_68331 *
                                                               n_64064 +
                                                               write_iter_75270];
            bool isnan_res_75274;
            
            isnan_res_75274 = futrts_isnan32(write_iv_75273);
            
            bool defunc_0_p_res_75275 = !isnan_res_75274;
            int64_t defunc_1_f_res_75276;
            
            if (defunc_0_p_res_75275) {
                int64_t write_iv_75277 =
                        ((int64_t *) mem_70612)[write_iter_75270];
                int64_t defunc_1_f_res_t_res_75278 = sub64(write_iv_75277,
                                                           (int64_t) 1);
                
                defunc_1_f_res_75276 = defunc_1_f_res_t_res_75278;
            } else {
                defunc_1_f_res_75276 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_75276) &&
                slt64(defunc_1_f_res_75276, n_64064)) {
                ((int64_t *) mem_70630)[defunc_1_f_res_75276] =
                    write_iter_75270;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_75276) &&
                slt64(defunc_1_f_res_75276, n_64064)) {
                memmove(mem_70627 + defunc_1_f_res_75276 * (int64_t) 4,
                        Y_mem_69593.mem + (gtid_68331 * n_64064 +
                                           write_iter_75270) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_65257 = sub64(last_res_65239, min_res_64084);
        float i64_res_65258 = sitofp_i64_f32(last_res_65239);
        float x_65259 = i64_res_64091 - i64_res_65258;
        float max_arg_65260 = x_65259 / 2.0F;
        float max_res_65261 = fmax32(0.0F, max_arg_65260);
        
        for (int64_t i_75282 = 0; i_75282 < n_64064; i_75282++) {
            int64_t x_75286 = ((int64_t *) mem_70630)[i_75282];
            int64_t defunc_0_f_res_75287 = add64((int64_t) 1, x_75286);
            bool cond_75288 = slt64(defunc_0_f_res_75287, (int64_t) 0);
            int64_t defunc_0_f_res_75289;
            
            if (cond_75288) {
                defunc_0_f_res_75289 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_75289 = defunc_0_f_res_75287;
            }
            
            float defunc_0_f_res_75290 = sitofp_i64_f32(x_75286);
            
            ((float *) mem_70657)[i_75282] = defunc_0_f_res_75290;
            ((int64_t *) mem_70660)[i_75282] = defunc_0_f_res_75289;
            ((int64_t *) mem_70663)[i_75282] = defunc_0_f_res_75287;
        }
        for (int64_t i_75294 = 0; i_75294 < q_64066; i_75294++) {
            bool cond_75296 = sle64(last_res_65239, i_75294);
            float defunc_0_f_res_75297;
            
            if (cond_75296) {
                defunc_0_f_res_75297 = 0.0F;
            } else {
                defunc_0_f_res_75297 = 1.0F;
            }
            ((float *) mem_70702)[i_75294] = defunc_0_f_res_75297;
        }
        for (int64_t i_75299 = 0; i_75299 < n_m_64072; i_75299++) {
            int64_t min_arg_75302 = mul64(jump_64068, i_75299);
            int64_t min_res_75303 = smin64(i_64078, min_arg_75302);
            int64_t defunc_0_g_res_75304 = add64((int64_t) 1, min_res_75303);
            bool nearest_idx_75305;
            int64_t nearest_idx_75306;
            int64_t nearest_idx_75307;
            bool loop_while_75308;
            int64_t low_75309;
            int64_t high_75310;
            
            loop_while_75308 = x_64079;
            low_75309 = (int64_t) 0;
            high_75310 = i_64078;
            while (loop_while_75308) {
                int64_t x_75311 = add64(low_75309, high_75310);
                int64_t mid_75312 = sdiv64(x_75311, (int64_t) 2);
                bool x_75313 = sle64((int64_t) 0, mid_75312);
                bool y_75314 = slt64(mid_75312, n_64064);
                bool bounds_check_75315 = x_75313 && y_75314;
                bool index_certs_75316;
                
                if (!bounds_check_75315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_75312,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t x_75317 = ((int64_t *) mem_70660)[mid_75312];
                bool cond_75318 = sle64(defunc_0_g_res_75304, x_75317);
                int64_t loopres_75319;
                int64_t loopres_75320;
                
                if (cond_75318) {
                    int64_t loopres_t_res_75321 = sub64(mid_75312, (int64_t) 1);
                    
                    loopres_75319 = low_75309;
                    loopres_75320 = loopres_t_res_75321;
                } else {
                    int64_t loopres_f_res_75322 = add64((int64_t) 1, mid_75312);
                    
                    loopres_75319 = loopres_f_res_75322;
                    loopres_75320 = high_75310;
                }
                
                bool loop_cond_75323 = sle64(loopres_75319, loopres_75320);
                bool loop_while_tmp_75522 = loop_cond_75323;
                int64_t low_tmp_75523 = loopres_75319;
                int64_t high_tmp_75524 = loopres_75320;
                
                loop_while_75308 = loop_while_tmp_75522;
                low_75309 = low_tmp_75523;
                high_75310 = high_tmp_75524;
            }
            nearest_idx_75305 = loop_while_75308;
            nearest_idx_75306 = low_75309;
            nearest_idx_75307 = high_75310;
            
            int64_t max_arg_75324 = sub64(nearest_idx_75306, min_res_64084);
            int64_t max_res_75325 = smax64((int64_t) 0, max_arg_75324);
            int64_t j_75326 = add64(min_res_64084, max_res_75325);
            int64_t i_p_m_t_s_75327 = add64(m_64090, max_res_75325);
            bool zzero_leq_i_p_m_t_s_75328 = sle64((int64_t) 0,
                                                   i_p_m_t_s_75327);
            bool i_p_m_t_s_leq_w_75329 = slt64(i_p_m_t_s_75327, n_64064);
            bool zzero_lte_i_75330 = sle64((int64_t) 0, max_res_75325);
            bool i_lte_j_75331 = sle64(max_res_75325, j_75326);
            bool y_75332 = i_p_m_t_s_leq_w_75329 && zzero_lte_i_75330;
            bool y_75333 = zzero_leq_i_p_m_t_s_75328 && y_75332;
            bool y_75334 = i_lte_j_75331 && y_75333;
            bool forwards_ok_75335 = zzero_lte_i_75330 && y_75334;
            bool ok_or_empty_75336 = empty_slice_64089 || forwards_ok_75335;
            bool index_certs_75337;
            
            if (!ok_or_empty_75336) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_75325, ":",
                              (long long) j_75326,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_75338;
            int64_t redout_75340 = (int64_t) 0;
            
            for (int64_t i_75339 = 0; i_75339 < min_res_64084; i_75339++) {
                int64_t slice_75341 = max_res_75325 + i_75339;
                int64_t x_75342 = ((int64_t *) mem_70663)[slice_75341];
                int64_t abs_arg_75343 = sub64(x_75342, defunc_0_g_res_75304);
                int64_t abs_res_75344 = abs64(abs_arg_75343);
                int64_t defunc_1_op_res_75345 = add64(abs_res_75344,
                                                      redout_75340);
                int64_t redout_tmp_75525 = defunc_1_op_res_75345;
                
                redout_75340 = redout_tmp_75525;
            }
            defunc_2_reduce_res_75338 = redout_75340;
            
            int64_t idx_75346;
            int64_t idx_75347;
            int64_t idx_75348;
            int64_t idx_75349;
            int64_t best_idx_75351;
            int64_t last_idx_75352;
            int64_t best_sum_75353;
            int64_t curr_sum_75354;
            
            best_idx_75351 = max_res_75325;
            last_idx_75352 = max_res_75325;
            best_sum_75353 = defunc_2_reduce_res_75338;
            curr_sum_75354 = defunc_2_reduce_res_75338;
            for (int64_t j_75350 = 0; j_75350 < min_res_64084; j_75350++) {
                int64_t new_idx_75355 = add64(max_res_75325, j_75350);
                int64_t x_75356 = add64(min_res_64084, new_idx_75355);
                bool cond_75357 = slt64(last_res_65239, x_75356);
                int64_t new_sum_75358;
                
                if (cond_75357) {
                    new_sum_75358 = (int64_t) 9223372036854775807;
                } else {
                    bool x_75359 = sle64((int64_t) 0, last_idx_75352);
                    bool y_75360 = slt64(last_idx_75352, n_64064);
                    bool bounds_check_75361 = x_75359 && y_75360;
                    bool index_certs_75362;
                    
                    if (!bounds_check_75361) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_75352,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_75363 = ((int64_t *) mem_70663)[last_idx_75352];
                    int64_t binop_p_75364 = sub64(defunc_0_g_res_75304,
                                                  y_75363);
                    int64_t defunc_0_f_res_75365 = abs64(binop_p_75364);
                    int64_t x_75366 = sub64(curr_sum_75354,
                                            defunc_0_f_res_75365);
                    int64_t min_arg_75367 = add64(min_res_64084,
                                                  last_idx_75352);
                    int64_t min_res_75368 = smin64(i_64078, min_arg_75367);
                    bool x_75369 = sle64((int64_t) 0, min_res_75368);
                    bool y_75370 = slt64(min_res_75368, n_64064);
                    bool bounds_check_75371 = x_75369 && y_75370;
                    bool index_certs_75372;
                    
                    if (!bounds_check_75371) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_75368,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        return 1;
                    }
                    
                    int64_t y_75373 = ((int64_t *) mem_70663)[min_res_75368];
                    int64_t binop_p_75374 = sub64(defunc_0_g_res_75304,
                                                  y_75373);
                    int64_t defunc_0_f_res_75375 = abs64(binop_p_75374);
                    int64_t new_sum_f_res_75376 = add64(x_75366,
                                                        defunc_0_f_res_75375);
                    
                    new_sum_75358 = new_sum_f_res_75376;
                }
                
                bool cond_75377 = sle64(new_sum_75358, best_sum_75353);
                int64_t loopres_75378;
                
                if (cond_75377) {
                    loopres_75378 = new_idx_75355;
                } else {
                    loopres_75378 = best_idx_75351;
                }
                
                int64_t loopres_75379;
                
                if (cond_75377) {
                    loopres_75379 = new_sum_75358;
                } else {
                    loopres_75379 = best_sum_75353;
                }
                
                int64_t best_idx_tmp_75526 = loopres_75378;
                int64_t last_idx_tmp_75527 = new_idx_75355;
                int64_t best_sum_tmp_75528 = loopres_75379;
                int64_t curr_sum_tmp_75529 = new_sum_75358;
                
                best_idx_75351 = best_idx_tmp_75526;
                last_idx_75352 = last_idx_tmp_75527;
                best_sum_75353 = best_sum_tmp_75528;
                curr_sum_75354 = curr_sum_tmp_75529;
            }
            idx_75346 = best_idx_75351;
            idx_75347 = last_idx_75352;
            idx_75348 = best_sum_75353;
            idx_75349 = curr_sum_75354;
            
            int64_t min_res_75380 = smin64(min_arg_65257, idx_75346);
            int64_t x_75381 = add64(min_res_64084, min_res_75380);
            int64_t r_75382 = sub64(x_75381, (int64_t) 1);
            bool x_75383 = sle64((int64_t) 0, r_75382);
            bool y_75384 = slt64(r_75382, n_64064);
            bool bounds_check_75385 = x_75383 && y_75384;
            bool index_certs_75386;
            
            if (!bounds_check_75385) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_75382,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_75387 = ((int64_t *) mem_70630)[r_75382];
            int64_t abs_arg_75388 = sub64(x_75387, min_res_75303);
            int64_t abs_res_75389 = abs64(abs_arg_75388);
            bool x_75390 = sle64((int64_t) 0, min_res_75380);
            bool y_75391 = slt64(min_res_75380, n_64064);
            bool bounds_check_75392 = x_75390 && y_75391;
            bool index_certs_75393;
            
            if (!bounds_check_75392) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_75380,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_75394 = ((int64_t *) mem_70630)[min_res_75380];
            int64_t abs_arg_75395 = sub64(x_75394, min_res_75303);
            int64_t abs_res_75396 = abs64(abs_arg_75395);
            int64_t max_res_75397 = smax64(abs_res_75389, abs_res_75396);
            float defunc_0_f_res_75398 = sitofp_i64_f32(max_res_75397);
            float defunc_1_f_res_75399 = max_res_65261 + defunc_0_f_res_75398;
            float defunc_0_f_res_75400 = sitofp_i64_f32(min_res_75303);
            
            for (int64_t i_75405 = 0; i_75405 < q_64066; i_75405++) {
                float x_75408 = ((float *) mem_70702)[i_75405];
                bool cond_75409 = sle64(last_res_65239, i_75405);
                float defunc_0_f_res_75410;
                
                if (cond_75409) {
                    defunc_0_f_res_75410 = 0.0F;
                } else {
                    int64_t i_75411 = add64(min_res_75380, i_75405);
                    float x_75412 = ((float *) mem_70657)[i_75411];
                    float defunc_0_f_res_f_res_75413 = 1.0F + x_75412;
                    
                    defunc_0_f_res_75410 = defunc_0_f_res_f_res_75413;
                }
                
                float x_j_75414 = defunc_0_f_res_75410 - defunc_0_f_res_75400;
                float abs_res_75415 = (float) fabs(x_j_75414);
                float tmp1_75416 = abs_res_75415 / defunc_1_f_res_75399;
                float x_75417 = tmp1_75416 * tmp1_75416;
                float y_75418 = tmp1_75416 * x_75417;
                float tmp2_75419 = 1.0F - y_75418;
                float x_75420 = tmp2_75419 * tmp2_75419;
                float tmp3_75421 = tmp2_75419 * x_75420;
                float tmp4_75422 = x_75408 * tmp3_75421;
                
                ((float *) mem_70737)[i_75405] = x_j_75414;
                ((float *) mem_70740)[i_75405] = tmp4_75422;
            }
            
            float defunc_2_reduce_res_75427;
            float defunc_2_reduce_res_75428;
            float defunc_2_reduce_res_75429;
            float defunc_2_reduce_res_75430;
            float defunc_2_reduce_res_75431;
            float redout_75435;
            float redout_75436;
            float redout_75437;
            float redout_75438;
            float redout_75439;
            
            redout_75435 = 0.0F;
            redout_75436 = 0.0F;
            redout_75437 = 0.0F;
            redout_75438 = 0.0F;
            redout_75439 = 0.0F;
            for (int64_t i_75434 = 0; i_75434 < q_64066; i_75434++) {
                float x_75442 = ((float *) mem_70737)[i_75434];
                float x_75443 = ((float *) mem_70740)[i_75434];
                float defunc_1_f_res_75444 = x_75442 * x_75443;
                float defunc_1_f_res_75445 = x_75442 * defunc_1_f_res_75444;
                float defunc_1_f_res_75446 = x_75442 * defunc_1_f_res_75445;
                float defunc_1_f_res_75447 = x_75442 * defunc_1_f_res_75446;
                float defunc_1_op_res_75448 = x_75443 + redout_75435;
                float defunc_1_op_res_75449 = defunc_1_f_res_75444 +
                      redout_75436;
                float defunc_1_op_res_75450 = defunc_1_f_res_75445 +
                      redout_75437;
                float defunc_1_op_res_75451 = defunc_1_f_res_75446 +
                      redout_75438;
                float defunc_1_op_res_75452 = defunc_1_f_res_75447 +
                      redout_75439;
                
                ((float *) mem_70767)[i_75434] = defunc_1_f_res_75445;
                ((float *) mem_70770)[i_75434] = defunc_1_f_res_75444;
                
                float redout_tmp_75532 = defunc_1_op_res_75448;
                float redout_tmp_75533 = defunc_1_op_res_75449;
                float redout_tmp_75534 = defunc_1_op_res_75450;
                float redout_tmp_75535 = defunc_1_op_res_75451;
                float redout_tmp_75536 = defunc_1_op_res_75452;
                
                redout_75435 = redout_tmp_75532;
                redout_75436 = redout_tmp_75533;
                redout_75437 = redout_tmp_75534;
                redout_75438 = redout_tmp_75535;
                redout_75439 = redout_tmp_75536;
            }
            defunc_2_reduce_res_75427 = redout_75435;
            defunc_2_reduce_res_75428 = redout_75436;
            defunc_2_reduce_res_75429 = redout_75437;
            defunc_2_reduce_res_75430 = redout_75438;
            defunc_2_reduce_res_75431 = redout_75439;
            
            float x_75455 = defunc_2_reduce_res_75429 *
                  defunc_2_reduce_res_75431;
            float y_75456 = defunc_2_reduce_res_75430 *
                  defunc_2_reduce_res_75430;
            float a12_75457 = x_75455 - y_75456;
            float x_75458 = defunc_2_reduce_res_75429 *
                  defunc_2_reduce_res_75430;
            float y_75459 = defunc_2_reduce_res_75428 *
                  defunc_2_reduce_res_75431;
            float b12_75460 = x_75458 - y_75459;
            float x_75461 = defunc_2_reduce_res_75428 *
                  defunc_2_reduce_res_75430;
            float y_75462 = defunc_2_reduce_res_75429 *
                  defunc_2_reduce_res_75429;
            float c12_75463 = x_75461 - y_75462;
            float x_75464 = defunc_2_reduce_res_75427 *
                  defunc_2_reduce_res_75431;
            float b2_75465 = x_75464 - y_75462;
            float x_75466 = defunc_2_reduce_res_75428 *
                  defunc_2_reduce_res_75429;
            float y_75467 = defunc_2_reduce_res_75427 *
                  defunc_2_reduce_res_75430;
            float c2_75468 = x_75466 - y_75467;
            float x_75469 = defunc_2_reduce_res_75427 * a12_75457;
            float y_75470 = defunc_2_reduce_res_75428 * b12_75460;
            float x_75471 = x_75469 + y_75470;
            float y_75472 = defunc_2_reduce_res_75429 * c12_75463;
            float y_75473 = x_75471 + y_75472;
            float det_75474 = 1.0F / y_75473;
            float a12_75475 = a12_75457 * det_75474;
            float b12_75476 = b12_75460 * det_75474;
            float c12_75477 = c12_75463 * det_75474;
            float b2_75478 = b2_75465 * det_75474;
            float c2_75479 = c2_75468 * det_75474;
            float defunc_2_reduce_res_75480;
            float defunc_2_reduce_res_75481;
            float redout_75483;
            float redout_75484;
            
            redout_75483 = 0.0F;
            redout_75484 = 0.0F;
            for (int64_t i_75482 = 0; i_75482 < q_64066; i_75482++) {
                float x_75485 = ((float *) mem_70740)[i_75482];
                float x_75486 = ((float *) mem_70770)[i_75482];
                float x_75487 = ((float *) mem_70767)[i_75482];
                bool cond_75488 = sle64(last_res_65239, i_75482);
                float defunc_0_f_res_75489;
                
                if (cond_75488) {
                    defunc_0_f_res_75489 = 0.0F;
                } else {
                    int64_t i_75490 = add64(min_res_75380, i_75482);
                    float x_75491 = ((float *) mem_70627)[i_75490];
                    
                    defunc_0_f_res_75489 = x_75491;
                }
                
                float x_75492 = a12_75475 * x_75485;
                float y_75493 = b12_75476 * x_75486;
                float x_75494 = x_75492 + y_75493;
                float y_75495 = c12_75477 * x_75487;
                float x_75496 = x_75494 + y_75495;
                float defunc_9_fit_fun_res_75497 = defunc_0_f_res_75489 *
                      x_75496;
                float x_75498 = b12_75476 * x_75485;
                float y_75499 = b2_75478 * x_75486;
                float x_75500 = x_75498 + y_75499;
                float y_75501 = c2_75479 * x_75487;
                float x_75502 = x_75500 + y_75501;
                float defunc_9_slope_fun_res_75503 = defunc_0_f_res_75489 *
                      x_75502;
                float defunc_1_op_res_75504 = defunc_9_fit_fun_res_75497 +
                      redout_75483;
                float defunc_1_op_res_75505 = defunc_9_slope_fun_res_75503 +
                      redout_75484;
                float redout_tmp_75539 = defunc_1_op_res_75504;
                float redout_tmp_75540 = defunc_1_op_res_75505;
                
                redout_75483 = redout_tmp_75539;
                redout_75484 = redout_tmp_75540;
            }
            defunc_2_reduce_res_75480 = redout_75483;
            defunc_2_reduce_res_75481 = redout_75484;
            ((float *) mem_70717)[i_75299] = defunc_2_reduce_res_75480;
            ((float *) mem_70720)[i_75299] = defunc_2_reduce_res_75481;
        }
        memmove(mem_70808.mem + gtid_68331 * n_m_64072 * (int64_t) 4,
                mem_70717 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70812.mem + gtid_68331 * n_m_64072 * (int64_t) 4,
                mem_70720 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70612);
    free(mem_70627);
    free(mem_70630);
    free(mem_70657);
    free(mem_70660);
    free(mem_70663);
    free(mem_70702);
    free(mem_70717);
    free(mem_70720);
    free(mem_70737);
    free(mem_70740);
    free(mem_70767);
    free(mem_70770);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76789_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76789_end -
                 futhark_mc_segmap_parloop_76789_start;
        
        ctx->futhark_mc_segmap_parloop_76789_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76789_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76789_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76787(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68330 = tid;
    int num_tasks_75259 = info.nsubtasks;
    struct futhark_mc_task_76786 *futhark_mc_task_76786 =
                                 (struct futhark_mc_task_76786 *) args;
    struct futhark_context *ctx = futhark_mc_task_76786->ctx;
    uint64_t futhark_mc_segmap_task_76787_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76787_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76786->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76786->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76786->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76786->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76786->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76786->free_i_64078;
    bool x_64079 = futhark_mc_task_76786->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76786->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76786->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76786->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76786->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76786->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70511 = futhark_mc_task_76786->free_bytes_70511;
    int64_t bytes_70514 = futhark_mc_task_76786->free_bytes_70514;
    int64_t bytes_70529 = futhark_mc_task_76786->free_bytes_70529;
    int64_t bytes_70604 = futhark_mc_task_76786->free_bytes_70604;
    struct memblock mem_70808 = {.desc ="mem_70808", .mem =
                                 futhark_mc_task_76786->free_mem_70808, .size =
                                 0, .references =NULL};
    struct memblock mem_70812 = {.desc ="mem_70812", .mem =
                                 futhark_mc_task_76786->free_mem_70812, .size =
                                 0, .references =NULL};
    int64_t iter_75260;
    struct futhark_mc_segmap_parloop_struct_76788
    futhark_mc_segmap_parloop_struct_76788;
    
    futhark_mc_segmap_parloop_struct_76788.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76788.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76788.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76788.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76788.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76788.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76788.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76788.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76788.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76788.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76788.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76788.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76788.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76788.free_bytes_70511 = bytes_70511;
    futhark_mc_segmap_parloop_struct_76788.free_bytes_70514 = bytes_70514;
    futhark_mc_segmap_parloop_struct_76788.free_bytes_70529 = bytes_70529;
    futhark_mc_segmap_parloop_struct_76788.free_bytes_70604 = bytes_70604;
    futhark_mc_segmap_parloop_struct_76788.free_mem_70808 = mem_70808.mem;
    futhark_mc_segmap_parloop_struct_76788.free_mem_70812 = mem_70812.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76789_task;
    
    futhark_mc_segmap_parloop_76789_task.name =
        "futhark_mc_segmap_parloop_76789";
    futhark_mc_segmap_parloop_76789_task.fn = futhark_mc_segmap_parloop_76789;
    futhark_mc_segmap_parloop_76789_task.args =
        &futhark_mc_segmap_parloop_struct_76788;
    futhark_mc_segmap_parloop_76789_task.iterations = iterations;
    futhark_mc_segmap_parloop_76789_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76789_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76789_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76789_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76789_task);
    
    if (futhark_mc_segmap_parloop_76789_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76789_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76789_total_end -
                 futhark_mc_segmap_parloop_76789_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76789_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76789_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76789_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76787_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76787_end -
                 futhark_mc_segmap_task_76787_start;
        
        ctx->futhark_mc_segmap_task_76787_runs[tid]++;
        ctx->futhark_mc_segmap_task_76787_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76787_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76804 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    float free_i64_res_64091;
    char *free_Y_mem_69593;
    int64_t free_bytes_70511;
    int64_t free_bytes_70514;
    int64_t free_bytes_70529;
    int64_t free_bytes_70604;
    char *free_mem_70808;
    char *free_mem_70812;
};
struct futhark_mc_task_76815 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_68333;
    char *free_Y_mem_69593;
    char *free_mem_70513;
};
struct futhark_mc_scan_stage_1_parloop_struct_76818 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_68333;
    char *free_Y_mem_69593;
    char *free_mem_70513;
};
static int futhark_mc_scan_stage_1_parloop_76819(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_68334, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76818
    *futhark_mc_scan_stage_1_parloop_struct_76818 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76818 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76818->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76819_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76819_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_1_parloop_struct_76818->free_n_64064;
    int64_t gtid_68333 =
            futhark_mc_scan_stage_1_parloop_struct_76818->free_gtid_68333;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76818->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70513 = {.desc ="mem_70513", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76818->free_mem_70513,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75973 = start;
    int64_t x_75542;
    int64_t x_75543;
    
    x_75542 = (int64_t) 0;
    for (; iter_75973 < end; iter_75973++) {
        int64_t gtid_68335 = iter_75973;
        
        // stage 1 scan body
        {
            float x_75545 = ((float *) Y_mem_69593.mem)[gtid_68333 * n_64064 +
                                                        gtid_68335];
            bool isnan_res_75546;
            
            isnan_res_75546 = futrts_isnan32(x_75545);
            
            bool defunc_0_p_res_75547 = !isnan_res_75546;
            int64_t defunc_0_f_res_75548 = btoi_bool_i64(defunc_0_p_res_75547);
            
            // write mapped values results to memory
            { }
            x_75542 = x_75542;
            // Read next values
            {
                x_75543 = defunc_0_f_res_75548;
            }
            
            int64_t defunc_1_op_res_75544 = add64(x_75542, x_75543);
            
            ((int64_t *) mem_70513.mem)[gtid_68335] = defunc_1_op_res_75544;
            x_75542 = defunc_1_op_res_75544;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76819_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76819_end -
                 futhark_mc_scan_stage_1_parloop_76819_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76819_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76819_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76819_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76820 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_68333;
    char *free_Y_mem_69593;
    char *free_mem_70513;
};
static int futhark_mc_scan_stage_3_parloop_76821(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_68334, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76820
    *futhark_mc_scan_stage_3_parloop_struct_76820 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76820 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76820->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76821_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76821_start = get_wall_time();
    
    int64_t n_64064 =
            futhark_mc_scan_stage_3_parloop_struct_76820->free_n_64064;
    int64_t gtid_68333 =
            futhark_mc_scan_stage_3_parloop_struct_76820->free_gtid_68333;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76820->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70513 = {.desc ="mem_70513", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76820->free_mem_70513,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75985 = start;
    int64_t x_75982;
    int64_t x_75983;
    
    if (iter_75985 == (int64_t) 0) {
        x_75982 = (int64_t) 0;
    } else {
        x_75982 = ((int64_t *) mem_70513.mem)[iter_75985 - (int64_t) 1];
    }
    for (; iter_75985 < end; iter_75985++) {
        int64_t gtid_68335 = iter_75985;
        
        // stage 3 scan body
        {
            float x_75545 = ((float *) Y_mem_69593.mem)[gtid_68333 * n_64064 +
                                                        gtid_68335];
            bool isnan_res_75546;
            
            isnan_res_75546 = futrts_isnan32(x_75545);
            
            bool defunc_0_p_res_75547 = !isnan_res_75546;
            int64_t defunc_0_f_res_75548 = btoi_bool_i64(defunc_0_p_res_75547);
            
            x_75982 = x_75982;
            x_75983 = defunc_0_f_res_75548;
            
            int64_t defunc_1_op_res_75984 = add64(x_75982, x_75983);
            
            ((int64_t *) mem_70513.mem)[gtid_68335] = defunc_1_op_res_75984;
            x_75982 = defunc_1_op_res_75984;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76821_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76821_end -
                 futhark_mc_scan_stage_3_parloop_76821_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76821_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76821_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76821_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76816(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68334 = tid;
    int num_tasks_75972 = info.nsubtasks;
    struct futhark_mc_task_76815 *futhark_mc_task_76815 =
                                 (struct futhark_mc_task_76815 *) args;
    struct futhark_context *ctx = futhark_mc_task_76815->ctx;
    uint64_t futhark_mc_segscan_task_76816_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76816_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76815->free_n_64064;
    int64_t gtid_68333 = futhark_mc_task_76815->free_gtid_68333;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76815->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70513 = {.desc ="mem_70513", .mem =
                                 futhark_mc_task_76815->free_mem_70513, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_75979_cached_sizze_76817 = 0;
    char *scan_stage_2_accum_mem_75979 = NULL;
    int64_t iter_75973;
    struct futhark_mc_scan_stage_1_parloop_struct_76818
    futhark_mc_scan_stage_1_parloop_struct_76818;
    
    futhark_mc_scan_stage_1_parloop_struct_76818.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76818.free_n_64064 = n_64064;
    futhark_mc_scan_stage_1_parloop_struct_76818.free_gtid_68333 = gtid_68333;
    futhark_mc_scan_stage_1_parloop_struct_76818.free_Y_mem_69593 =
        Y_mem_69593.mem;
    futhark_mc_scan_stage_1_parloop_struct_76818.free_mem_70513 = mem_70513.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76819_task;
    
    futhark_mc_scan_stage_1_parloop_76819_task.name =
        "futhark_mc_scan_stage_1_parloop_76819";
    futhark_mc_scan_stage_1_parloop_76819_task.fn =
        futhark_mc_scan_stage_1_parloop_76819;
    futhark_mc_scan_stage_1_parloop_76819_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76818;
    futhark_mc_scan_stage_1_parloop_76819_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76819_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76819_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76819_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76819_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76819_task);
    
    if (futhark_mc_scan_stage_1_parloop_76819_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76819_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76819_total_end -
                 futhark_mc_scan_stage_1_parloop_76819_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76819_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76819_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76819_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_75972)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_75974;
        int64_t x_75975;
        int64_t offset_75977 = (int64_t) 0;
        int64_t offset_index_75978 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_75979_cached_sizze_76817 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_75979 = realloc(scan_stage_2_accum_mem_75979,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_75979_cached_sizze_76817 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_75979)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_75981 = 0; i_75981 < num_tasks_75972 - 1; i_75981++) {
            offset_75977 = squot64(n_64064, sext_i32_i64(num_tasks_75972));
            if (slt64(sext_i32_i64(i_75981), srem64(n_64064,
                                                    sext_i32_i64(num_tasks_75972)))) {
                offset_75977 += (int64_t) 1;
            }
            offset_index_75978 += offset_75977;
            
            int64_t gtid_68335 = offset_index_75978;
            float x_75545 = ((float *) Y_mem_69593.mem)[gtid_68333 * n_64064 +
                                                        gtid_68335];
            bool isnan_res_75546;
            
            isnan_res_75546 = futrts_isnan32(x_75545);
            
            bool defunc_0_p_res_75547 = !isnan_res_75546;
            int64_t defunc_0_f_res_75548 = btoi_bool_i64(defunc_0_p_res_75547);
            
            // Read carry in
            {
                x_75974 =
                    ((int64_t *) scan_stage_2_accum_mem_75979)[(int64_t) 0];
            }
            // Read next values
            {
                x_75975 = ((int64_t *) mem_70513.mem)[offset_index_75978 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_75976 = add64(x_75974, x_75975);
            
            ((int64_t *) mem_70513.mem)[offset_index_75978 - (int64_t) 1] =
                defunc_1_op_res_75976;
            ((int64_t *) scan_stage_2_accum_mem_75979)[(int64_t) 0] =
                defunc_1_op_res_75976;
        }
        
        int64_t iter_75985 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76820
        futhark_mc_scan_stage_3_parloop_struct_76820;
        
        futhark_mc_scan_stage_3_parloop_struct_76820.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76820.free_n_64064 = n_64064;
        futhark_mc_scan_stage_3_parloop_struct_76820.free_gtid_68333 =
            gtid_68333;
        futhark_mc_scan_stage_3_parloop_struct_76820.free_Y_mem_69593 =
            Y_mem_69593.mem;
        futhark_mc_scan_stage_3_parloop_struct_76820.free_mem_70513 =
            mem_70513.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76821_task;
        
        futhark_mc_scan_stage_3_parloop_76821_task.name =
            "futhark_mc_scan_stage_3_parloop_76821";
        futhark_mc_scan_stage_3_parloop_76821_task.fn =
            futhark_mc_scan_stage_3_parloop_76821;
        futhark_mc_scan_stage_3_parloop_76821_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76820;
        futhark_mc_scan_stage_3_parloop_76821_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76821_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76821_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76821_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76821_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76821_task);
        
        if (futhark_mc_scan_stage_3_parloop_76821_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76821_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76821_total_end -
                     futhark_mc_scan_stage_3_parloop_76821_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76821_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76821_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76821_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_75979);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76816_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76816_end -
                 futhark_mc_segscan_task_76816_start;
        
        ctx->futhark_mc_segscan_task_76816_runs[tid]++;
        ctx->futhark_mc_segscan_task_76816_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76816_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76822 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_68333;
    char *free_Y_mem_69593;
    char *free_mem_70513;
    char *free_mem_70516;
    char *free_mem_70519;
};
struct futhark_mc_segmap_parloop_struct_76824 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_gtid_68333;
    char *free_Y_mem_69593;
    char *free_mem_70513;
    char *free_mem_70516;
    char *free_mem_70519;
};
static int futhark_mc_segmap_parloop_76825(void *args, int64_t start,
                                           int64_t end, int flat_tid_68336,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76824
    *futhark_mc_segmap_parloop_struct_76824 =
    (struct futhark_mc_segmap_parloop_struct_76824 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76824->ctx;
    uint64_t futhark_mc_segmap_parloop_76825_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76825_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76824->free_n_64064;
    int64_t gtid_68333 =
            futhark_mc_segmap_parloop_struct_76824->free_gtid_68333;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76824->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70513 = {.desc ="mem_70513", .mem =
                                 futhark_mc_segmap_parloop_struct_76824->free_mem_70513,
                                 .size =0, .references =NULL};
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_segmap_parloop_struct_76824->free_mem_70516,
                                 .size =0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_segmap_parloop_struct_76824->free_mem_70519,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75989 = start;
    
    for (; iter_75989 < end; iter_75989++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75992 = n_64064;
        int64_t gtid_68337 = iter_75989;
        int64_t remnant_75993 = iter_75989 - gtid_68337;
        float x_75549 = ((float *) Y_mem_69593.mem)[gtid_68333 * n_64064 +
                                                    gtid_68337];
        bool isnan_res_75550;
        
        isnan_res_75550 = futrts_isnan32(x_75549);
        
        bool defunc_0_p_res_75551 = !isnan_res_75550;
        int64_t defunc_1_f_res_75552;
        
        if (defunc_0_p_res_75551) {
            int64_t x_75990 = ((int64_t *) mem_70513.mem)[gtid_68337];
            int64_t defunc_1_f_res_t_res_75991 = sub64(x_75990, (int64_t) 1);
            
            defunc_1_f_res_75552 = defunc_1_f_res_t_res_75991;
        } else {
            defunc_1_f_res_75552 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_75552) &&
            slt64(defunc_1_f_res_75552, n_64064)) {
            ((int64_t *) mem_70519.mem)[defunc_1_f_res_75552] = gtid_68337;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_75552) &&
            slt64(defunc_1_f_res_75552, n_64064)) {
            ((float *) mem_70516.mem)[defunc_1_f_res_75552] = x_75549;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76825_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76825_end -
                 futhark_mc_segmap_parloop_76825_start;
        
        ctx->futhark_mc_segmap_parloop_76825_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76825_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76825_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76823(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68336 = tid;
    int num_tasks_75988 = info.nsubtasks;
    struct futhark_mc_task_76822 *futhark_mc_task_76822 =
                                 (struct futhark_mc_task_76822 *) args;
    struct futhark_context *ctx = futhark_mc_task_76822->ctx;
    uint64_t futhark_mc_segmap_task_76823_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76823_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76822->free_n_64064;
    int64_t gtid_68333 = futhark_mc_task_76822->free_gtid_68333;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76822->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    struct memblock mem_70513 = {.desc ="mem_70513", .mem =
                                 futhark_mc_task_76822->free_mem_70513, .size =
                                 0, .references =NULL};
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_task_76822->free_mem_70516, .size =
                                 0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_task_76822->free_mem_70519, .size =
                                 0, .references =NULL};
    int64_t iter_75989;
    struct futhark_mc_segmap_parloop_struct_76824
    futhark_mc_segmap_parloop_struct_76824;
    
    futhark_mc_segmap_parloop_struct_76824.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76824.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76824.free_gtid_68333 = gtid_68333;
    futhark_mc_segmap_parloop_struct_76824.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76824.free_mem_70513 = mem_70513.mem;
    futhark_mc_segmap_parloop_struct_76824.free_mem_70516 = mem_70516.mem;
    futhark_mc_segmap_parloop_struct_76824.free_mem_70519 = mem_70519.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76825_task;
    
    futhark_mc_segmap_parloop_76825_task.name =
        "futhark_mc_segmap_parloop_76825";
    futhark_mc_segmap_parloop_76825_task.fn = futhark_mc_segmap_parloop_76825;
    futhark_mc_segmap_parloop_76825_task.args =
        &futhark_mc_segmap_parloop_struct_76824;
    futhark_mc_segmap_parloop_76825_task.iterations = iterations;
    futhark_mc_segmap_parloop_76825_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76825_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76825_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76825_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76825_task);
    
    if (futhark_mc_segmap_parloop_76825_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76825_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76825_total_end -
                 futhark_mc_segmap_parloop_76825_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76825_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76825_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76825_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76823_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76823_end -
                 futhark_mc_segmap_task_76823_start;
        
        ctx->futhark_mc_segmap_task_76823_runs[tid]++;
        ctx->futhark_mc_segmap_task_76823_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76823_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76826 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70519;
    char *free_mem_70522;
    char *free_mem_70525;
    char *free_mem_70528;
};
struct futhark_mc_segmap_parloop_struct_76828 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    char *free_mem_70519;
    char *free_mem_70522;
    char *free_mem_70525;
    char *free_mem_70528;
};
static int futhark_mc_segmap_parloop_76829(void *args, int64_t start,
                                           int64_t end, int flat_tid_68338,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76828
    *futhark_mc_segmap_parloop_struct_76828 =
    (struct futhark_mc_segmap_parloop_struct_76828 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76828->ctx;
    uint64_t futhark_mc_segmap_parloop_76829_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76829_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76828->free_n_64064;
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_segmap_parloop_struct_76828->free_mem_70519,
                                 .size =0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_segmap_parloop_struct_76828->free_mem_70522,
                                 .size =0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_segmap_parloop_struct_76828->free_mem_70525,
                                 .size =0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_segmap_parloop_struct_76828->free_mem_70528,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75995 = start;
    
    for (; iter_75995 < end; iter_75995++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75996 = n_64064;
        int64_t gtid_68339 = iter_75995;
        int64_t remnant_75997 = iter_75995 - gtid_68339;
        int64_t x_75555 = ((int64_t *) mem_70519.mem)[gtid_68339];
        int64_t defunc_0_f_res_75556 = add64((int64_t) 1, x_75555);
        bool cond_75557 = slt64(defunc_0_f_res_75556, (int64_t) 0);
        int64_t defunc_0_f_res_75558;
        
        if (cond_75557) {
            defunc_0_f_res_75558 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_75558 = defunc_0_f_res_75556;
        }
        
        float defunc_0_f_res_75559 = sitofp_i64_f32(x_75555);
        
        ((float *) mem_70522.mem)[gtid_68339] = defunc_0_f_res_75559;
        ((int64_t *) mem_70525.mem)[gtid_68339] = defunc_0_f_res_75558;
        ((int64_t *) mem_70528.mem)[gtid_68339] = defunc_0_f_res_75556;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76829_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76829_end -
                 futhark_mc_segmap_parloop_76829_start;
        
        ctx->futhark_mc_segmap_parloop_76829_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76829_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76829_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76827(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68338 = tid;
    int num_tasks_75994 = info.nsubtasks;
    struct futhark_mc_task_76826 *futhark_mc_task_76826 =
                                 (struct futhark_mc_task_76826 *) args;
    struct futhark_context *ctx = futhark_mc_task_76826->ctx;
    uint64_t futhark_mc_segmap_task_76827_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76827_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76826->free_n_64064;
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_task_76826->free_mem_70519, .size =
                                 0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_task_76826->free_mem_70522, .size =
                                 0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_task_76826->free_mem_70525, .size =
                                 0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_task_76826->free_mem_70528, .size =
                                 0, .references =NULL};
    int64_t iter_75995;
    struct futhark_mc_segmap_parloop_struct_76828
    futhark_mc_segmap_parloop_struct_76828;
    
    futhark_mc_segmap_parloop_struct_76828.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76828.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76828.free_mem_70519 = mem_70519.mem;
    futhark_mc_segmap_parloop_struct_76828.free_mem_70522 = mem_70522.mem;
    futhark_mc_segmap_parloop_struct_76828.free_mem_70525 = mem_70525.mem;
    futhark_mc_segmap_parloop_struct_76828.free_mem_70528 = mem_70528.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76829_task;
    
    futhark_mc_segmap_parloop_76829_task.name =
        "futhark_mc_segmap_parloop_76829";
    futhark_mc_segmap_parloop_76829_task.fn = futhark_mc_segmap_parloop_76829;
    futhark_mc_segmap_parloop_76829_task.args =
        &futhark_mc_segmap_parloop_struct_76828;
    futhark_mc_segmap_parloop_76829_task.iterations = iterations;
    futhark_mc_segmap_parloop_76829_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76829_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76829_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76829_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76829_task);
    
    if (futhark_mc_segmap_parloop_76829_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76829_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76829_total_end -
                 futhark_mc_segmap_parloop_76829_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76829_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76829_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76829_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76827_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76827_end -
                 futhark_mc_segmap_task_76827_start;
        
        ctx->futhark_mc_segmap_task_76827_runs[tid]++;
        ctx->futhark_mc_segmap_task_76827_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76827_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76830 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_68562;
    char *free_mem_70531;
};
struct futhark_mc_segmap_parloop_struct_76832 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_68562;
    char *free_mem_70531;
};
static int futhark_mc_segmap_parloop_76833(void *args, int64_t start,
                                           int64_t end, int flat_tid_68340,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76832
    *futhark_mc_segmap_parloop_struct_76832 =
    (struct futhark_mc_segmap_parloop_struct_76832 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76832->ctx;
    uint64_t futhark_mc_segmap_parloop_76833_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76833_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76832->free_q_64066;
    int64_t last_res_68562 =
            futhark_mc_segmap_parloop_struct_76832->free_last_res_68562;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_segmap_parloop_struct_76832->free_mem_70531,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75999 = start;
    
    for (; iter_75999 < end; iter_75999++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76000 = q_64066;
        int64_t gtid_68341 = iter_75999;
        int64_t remnant_76001 = iter_75999 - gtid_68341;
        bool cond_75560 = sle64(last_res_68562, gtid_68341);
        float defunc_0_f_res_75561;
        
        if (cond_75560) {
            defunc_0_f_res_75561 = 0.0F;
        } else {
            defunc_0_f_res_75561 = 1.0F;
        }
        ((float *) mem_70531.mem)[gtid_68341] = defunc_0_f_res_75561;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76833_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76833_end -
                 futhark_mc_segmap_parloop_76833_start;
        
        ctx->futhark_mc_segmap_parloop_76833_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76833_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76833_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76831(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68340 = tid;
    int num_tasks_75998 = info.nsubtasks;
    struct futhark_mc_task_76830 *futhark_mc_task_76830 =
                                 (struct futhark_mc_task_76830 *) args;
    struct futhark_context *ctx = futhark_mc_task_76830->ctx;
    uint64_t futhark_mc_segmap_task_76831_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76831_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76830->free_q_64066;
    int64_t last_res_68562 = futhark_mc_task_76830->free_last_res_68562;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_task_76830->free_mem_70531, .size =
                                 0, .references =NULL};
    int64_t iter_75999;
    struct futhark_mc_segmap_parloop_struct_76832
    futhark_mc_segmap_parloop_struct_76832;
    
    futhark_mc_segmap_parloop_struct_76832.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76832.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76832.free_last_res_68562 = last_res_68562;
    futhark_mc_segmap_parloop_struct_76832.free_mem_70531 = mem_70531.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76833_task;
    
    futhark_mc_segmap_parloop_76833_task.name =
        "futhark_mc_segmap_parloop_76833";
    futhark_mc_segmap_parloop_76833_task.fn = futhark_mc_segmap_parloop_76833;
    futhark_mc_segmap_parloop_76833_task.args =
        &futhark_mc_segmap_parloop_struct_76832;
    futhark_mc_segmap_parloop_76833_task.iterations = iterations;
    futhark_mc_segmap_parloop_76833_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76833_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76833_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76833_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76833_task);
    
    if (futhark_mc_segmap_parloop_76833_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76833_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76833_total_end -
                 futhark_mc_segmap_parloop_76833_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76833_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76833_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76833_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76831_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76831_end -
                 futhark_mc_segmap_task_76831_start;
        
        ctx->futhark_mc_segmap_task_76831_runs[tid]++;
        ctx->futhark_mc_segmap_task_76831_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76831_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76834 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_68562;
    int64_t free_min_arg_68574;
    float free_max_res_68578;
    char *free_mem_70516;
    char *free_mem_70519;
    char *free_mem_70522;
    char *free_mem_70525;
    char *free_mem_70528;
    int64_t free_bytes_70529;
    char *free_mem_70531;
    char *free_mem_70606;
    char *free_mem_70609;
};
struct futhark_mc_segmap_parloop_struct_76836 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_68562;
    int64_t free_min_arg_68574;
    float free_max_res_68578;
    char *free_mem_70516;
    char *free_mem_70519;
    char *free_mem_70522;
    char *free_mem_70525;
    char *free_mem_70528;
    int64_t free_bytes_70529;
    char *free_mem_70531;
    char *free_mem_70606;
    char *free_mem_70609;
};
static int futhark_mc_segmap_parloop_76837(void *args, int64_t start,
                                           int64_t end, int flat_tid_68342,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76836
    *futhark_mc_segmap_parloop_struct_76836 =
    (struct futhark_mc_segmap_parloop_struct_76836 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76836->ctx;
    uint64_t futhark_mc_segmap_parloop_76837_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76837_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76836->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76836->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76836->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76836->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76836->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76836->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76836->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76836->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76836->free_m_64090;
    int64_t last_res_68562 =
            futhark_mc_segmap_parloop_struct_76836->free_last_res_68562;
    int64_t min_arg_68574 =
            futhark_mc_segmap_parloop_struct_76836->free_min_arg_68574;
    float max_res_68578 =
          futhark_mc_segmap_parloop_struct_76836->free_max_res_68578;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70516,
                                 .size =0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70519,
                                 .size =0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70522,
                                 .size =0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70525,
                                 .size =0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70528,
                                 .size =0, .references =NULL};
    int64_t bytes_70529 =
            futhark_mc_segmap_parloop_struct_76836->free_bytes_70529;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70531,
                                 .size =0, .references =NULL};
    struct memblock mem_70606 = {.desc ="mem_70606", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70606,
                                 .size =0, .references =NULL};
    struct memblock mem_70609 = {.desc ="mem_70609", .mem =
                                 futhark_mc_segmap_parloop_struct_76836->free_mem_70609,
                                 .size =0, .references =NULL};
    size_t mem_75861_cached_sizze_76838 = 0;
    char *mem_75861 = NULL;
    size_t mem_75863_cached_sizze_76839 = 0;
    char *mem_75863 = NULL;
    size_t mem_75887_cached_sizze_76840 = 0;
    char *mem_75887 = NULL;
    size_t mem_75889_cached_sizze_76841 = 0;
    char *mem_75889 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76003 = start;
    
    if (mem_75861_cached_sizze_76838 < (size_t) bytes_70529) {
        mem_75861 = realloc(mem_75861, bytes_70529);
        mem_75861_cached_sizze_76838 = bytes_70529;
    }
    if (mem_75863_cached_sizze_76839 < (size_t) bytes_70529) {
        mem_75863 = realloc(mem_75863, bytes_70529);
        mem_75863_cached_sizze_76839 = bytes_70529;
    }
    if (mem_75887_cached_sizze_76840 < (size_t) bytes_70529) {
        mem_75887 = realloc(mem_75887, bytes_70529);
        mem_75887_cached_sizze_76840 = bytes_70529;
    }
    if (mem_75889_cached_sizze_76841 < (size_t) bytes_70529) {
        mem_75889 = realloc(mem_75889, bytes_70529);
        mem_75889_cached_sizze_76841 = bytes_70529;
    }
    for (; iter_76003 < end; iter_76003++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76122 = n_m_64072;
        int64_t gtid_68343 = iter_76003;
        int64_t remnant_76123 = iter_76003 - gtid_68343;
        int64_t min_arg_75762 = mul64(jump_64068, gtid_68343);
        int64_t min_res_75763 = smin64(i_64078, min_arg_75762);
        int64_t defunc_0_g_res_75764 = add64((int64_t) 1, min_res_75763);
        bool nearest_idx_75765;
        int64_t nearest_idx_75766;
        int64_t nearest_idx_75767;
        bool loop_while_76004;
        int64_t low_76005;
        int64_t high_76006;
        
        loop_while_76004 = x_64079;
        low_76005 = (int64_t) 0;
        high_76006 = i_64078;
        while (loop_while_76004) {
            int64_t x_76007 = add64(low_76005, high_76006);
            int64_t mid_76008 = sdiv64(x_76007, (int64_t) 2);
            bool x_76009 = sle64((int64_t) 0, mid_76008);
            bool y_76010 = slt64(mid_76008, n_64064);
            bool bounds_check_76011 = x_76009 && y_76010;
            bool index_certs_76012;
            
            if (!bounds_check_76011) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76008,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_76013 = ((int64_t *) mem_70525.mem)[mid_76008];
            bool cond_76014 = sle64(defunc_0_g_res_75764, x_76013);
            int64_t loopres_76015;
            int64_t loopres_76016;
            
            if (cond_76014) {
                int64_t loopres_t_res_76017 = sub64(mid_76008, (int64_t) 1);
                
                loopres_76015 = low_76005;
                loopres_76016 = loopres_t_res_76017;
            } else {
                int64_t loopres_f_res_76018 = add64((int64_t) 1, mid_76008);
                
                loopres_76015 = loopres_f_res_76018;
                loopres_76016 = high_76006;
            }
            
            bool loop_cond_76019 = sle64(loopres_76015, loopres_76016);
            bool loop_while_tmp_76124 = loop_cond_76019;
            int64_t low_tmp_76125 = loopres_76015;
            int64_t high_tmp_76126 = loopres_76016;
            
            loop_while_76004 = loop_while_tmp_76124;
            low_76005 = low_tmp_76125;
            high_76006 = high_tmp_76126;
        }
        nearest_idx_75765 = loop_while_76004;
        nearest_idx_75766 = low_76005;
        nearest_idx_75767 = high_76006;
        
        int64_t max_arg_75784 = sub64(nearest_idx_75766, min_res_64084);
        int64_t max_res_75785 = smax64((int64_t) 0, max_arg_75784);
        int64_t j_75786 = add64(min_res_64084, max_res_75785);
        int64_t i_p_m_t_s_75787 = add64(m_64090, max_res_75785);
        bool zzero_leq_i_p_m_t_s_75788 = sle64((int64_t) 0, i_p_m_t_s_75787);
        bool i_p_m_t_s_leq_w_75789 = slt64(i_p_m_t_s_75787, n_64064);
        bool zzero_lte_i_75790 = sle64((int64_t) 0, max_res_75785);
        bool i_lte_j_75791 = sle64(max_res_75785, j_75786);
        bool y_75792 = i_p_m_t_s_leq_w_75789 && zzero_lte_i_75790;
        bool y_75793 = zzero_leq_i_p_m_t_s_75788 && y_75792;
        bool y_75794 = i_lte_j_75791 && y_75793;
        bool forwards_ok_75795 = zzero_lte_i_75790 && y_75794;
        bool ok_or_empty_75796 = empty_slice_64089 || forwards_ok_75795;
        bool index_certs_75797;
        
        if (!ok_or_empty_75796) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_75785, ":",
                          (long long) j_75786,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_75798;
        int64_t redout_76021 = (int64_t) 0;
        
        for (int64_t i_76020 = 0; i_76020 < min_res_64084; i_76020++) {
            int64_t slice_76022 = max_res_75785 + i_76020;
            int64_t x_76023 = ((int64_t *) mem_70528.mem)[slice_76022];
            int64_t abs_arg_76024 = sub64(x_76023, defunc_0_g_res_75764);
            int64_t abs_res_76025 = abs64(abs_arg_76024);
            int64_t defunc_1_op_res_76026 = add64(abs_res_76025, redout_76021);
            int64_t redout_tmp_76127 = defunc_1_op_res_76026;
            
            redout_76021 = redout_tmp_76127;
        }
        defunc_2_reduce_res_75798 = redout_76021;
        
        int64_t idx_75806;
        int64_t idx_75807;
        int64_t idx_75808;
        int64_t idx_75809;
        int64_t best_idx_76028;
        int64_t last_idx_76029;
        int64_t best_sum_76030;
        int64_t curr_sum_76031;
        
        best_idx_76028 = max_res_75785;
        last_idx_76029 = max_res_75785;
        best_sum_76030 = defunc_2_reduce_res_75798;
        curr_sum_76031 = defunc_2_reduce_res_75798;
        for (int64_t j_76027 = 0; j_76027 < min_res_64084; j_76027++) {
            int64_t new_idx_76032 = add64(max_res_75785, j_76027);
            int64_t x_76033 = add64(min_res_64084, new_idx_76032);
            bool cond_76034 = slt64(last_res_68562, x_76033);
            int64_t new_sum_76035;
            
            if (cond_76034) {
                new_sum_76035 = (int64_t) 9223372036854775807;
            } else {
                bool x_76036 = sle64((int64_t) 0, last_idx_76029);
                bool y_76037 = slt64(last_idx_76029, n_64064);
                bool bounds_check_76038 = x_76036 && y_76037;
                bool index_certs_76039;
                
                if (!bounds_check_76038) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_76029,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_76040 = ((int64_t *) mem_70528.mem)[last_idx_76029];
                int64_t binop_p_76041 = sub64(defunc_0_g_res_75764, y_76040);
                int64_t defunc_0_f_res_76042 = abs64(binop_p_76041);
                int64_t x_76043 = sub64(curr_sum_76031, defunc_0_f_res_76042);
                int64_t min_arg_76044 = add64(min_res_64084, last_idx_76029);
                int64_t min_res_76045 = smin64(i_64078, min_arg_76044);
                bool x_76046 = sle64((int64_t) 0, min_res_76045);
                bool y_76047 = slt64(min_res_76045, n_64064);
                bool bounds_check_76048 = x_76046 && y_76047;
                bool index_certs_76049;
                
                if (!bounds_check_76048) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76045,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_76050 = ((int64_t *) mem_70528.mem)[min_res_76045];
                int64_t binop_p_76051 = sub64(defunc_0_g_res_75764, y_76050);
                int64_t defunc_0_f_res_76052 = abs64(binop_p_76051);
                int64_t new_sum_f_res_76053 = add64(x_76043,
                                                    defunc_0_f_res_76052);
                
                new_sum_76035 = new_sum_f_res_76053;
            }
            
            bool cond_76054 = sle64(new_sum_76035, best_sum_76030);
            int64_t loopres_76055;
            
            if (cond_76054) {
                loopres_76055 = new_idx_76032;
            } else {
                loopres_76055 = best_idx_76028;
            }
            
            int64_t loopres_76056;
            
            if (cond_76054) {
                loopres_76056 = new_sum_76035;
            } else {
                loopres_76056 = best_sum_76030;
            }
            
            int64_t best_idx_tmp_76128 = loopres_76055;
            int64_t last_idx_tmp_76129 = new_idx_76032;
            int64_t best_sum_tmp_76130 = loopres_76056;
            int64_t curr_sum_tmp_76131 = new_sum_76035;
            
            best_idx_76028 = best_idx_tmp_76128;
            last_idx_76029 = last_idx_tmp_76129;
            best_sum_76030 = best_sum_tmp_76130;
            curr_sum_76031 = curr_sum_tmp_76131;
        }
        idx_75806 = best_idx_76028;
        idx_75807 = last_idx_76029;
        idx_75808 = best_sum_76030;
        idx_75809 = curr_sum_76031;
        
        int64_t min_res_75840 = smin64(min_arg_68574, idx_75806);
        int64_t x_75841 = add64(min_res_64084, min_res_75840);
        int64_t r_75842 = sub64(x_75841, (int64_t) 1);
        bool x_75843 = sle64((int64_t) 0, r_75842);
        bool y_75844 = slt64(r_75842, n_64064);
        bool bounds_check_75845 = x_75843 && y_75844;
        bool index_certs_75846;
        
        if (!bounds_check_75845) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_75842,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_75847 = ((int64_t *) mem_70519.mem)[r_75842];
        int64_t abs_arg_75848 = sub64(x_75847, min_res_75763);
        int64_t abs_res_75849 = abs64(abs_arg_75848);
        bool x_75850 = sle64((int64_t) 0, min_res_75840);
        bool y_75851 = slt64(min_res_75840, n_64064);
        bool bounds_check_75852 = x_75850 && y_75851;
        bool index_certs_75853;
        
        if (!bounds_check_75852) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_75840,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_75854 = ((int64_t *) mem_70519.mem)[min_res_75840];
        int64_t abs_arg_75855 = sub64(x_75854, min_res_75763);
        int64_t abs_res_75856 = abs64(abs_arg_75855);
        int64_t max_res_75857 = smax64(abs_res_75849, abs_res_75856);
        float defunc_0_f_res_75858 = sitofp_i64_f32(max_res_75857);
        float defunc_1_f_res_75859 = max_res_68578 + defunc_0_f_res_75858;
        float defunc_0_f_res_75860 = sitofp_i64_f32(min_res_75763);
        
        for (int64_t i_76057 = 0; i_76057 < q_64066; i_76057++) {
            float x_76060 = ((float *) mem_70531.mem)[i_76057];
            bool cond_76061 = sle64(last_res_68562, i_76057);
            float defunc_0_f_res_76062;
            
            if (cond_76061) {
                defunc_0_f_res_76062 = 0.0F;
            } else {
                int64_t i_76063 = add64(min_res_75840, i_76057);
                float x_76064 = ((float *) mem_70522.mem)[i_76063];
                float defunc_0_f_res_f_res_76065 = 1.0F + x_76064;
                
                defunc_0_f_res_76062 = defunc_0_f_res_f_res_76065;
            }
            
            float x_j_76066 = defunc_0_f_res_76062 - defunc_0_f_res_75860;
            float abs_res_76067 = (float) fabs(x_j_76066);
            float tmp1_76068 = abs_res_76067 / defunc_1_f_res_75859;
            float x_76069 = tmp1_76068 * tmp1_76068;
            float y_76070 = tmp1_76068 * x_76069;
            float tmp2_76071 = 1.0F - y_76070;
            float x_76072 = tmp2_76071 * tmp2_76071;
            float tmp3_76073 = tmp2_76071 * x_76072;
            float tmp4_76074 = x_76060 * tmp3_76073;
            
            ((float *) mem_75861)[i_76057] = x_j_76066;
            ((float *) mem_75863)[i_76057] = tmp4_76074;
        }
        
        float defunc_2_reduce_res_75891;
        float defunc_2_reduce_res_75892;
        float defunc_2_reduce_res_75893;
        float defunc_2_reduce_res_75894;
        float defunc_2_reduce_res_75895;
        float redout_76078;
        float redout_76079;
        float redout_76080;
        float redout_76081;
        float redout_76082;
        
        redout_76078 = 0.0F;
        redout_76079 = 0.0F;
        redout_76080 = 0.0F;
        redout_76081 = 0.0F;
        redout_76082 = 0.0F;
        for (int64_t i_76077 = 0; i_76077 < q_64066; i_76077++) {
            float x_76085 = ((float *) mem_75861)[i_76077];
            float x_76086 = ((float *) mem_75863)[i_76077];
            float defunc_1_f_res_76087 = x_76085 * x_76086;
            float defunc_1_f_res_76088 = x_76085 * defunc_1_f_res_76087;
            float defunc_1_f_res_76089 = x_76085 * defunc_1_f_res_76088;
            float defunc_1_f_res_76090 = x_76085 * defunc_1_f_res_76089;
            float defunc_1_op_res_76091 = x_76086 + redout_76078;
            float defunc_1_op_res_76092 = defunc_1_f_res_76087 + redout_76079;
            float defunc_1_op_res_76093 = defunc_1_f_res_76088 + redout_76080;
            float defunc_1_op_res_76094 = defunc_1_f_res_76089 + redout_76081;
            float defunc_1_op_res_76095 = defunc_1_f_res_76090 + redout_76082;
            
            ((float *) mem_75887)[i_76077] = defunc_1_f_res_76088;
            ((float *) mem_75889)[i_76077] = defunc_1_f_res_76087;
            
            float redout_tmp_76134 = defunc_1_op_res_76091;
            float redout_tmp_76135 = defunc_1_op_res_76092;
            float redout_tmp_76136 = defunc_1_op_res_76093;
            float redout_tmp_76137 = defunc_1_op_res_76094;
            float redout_tmp_76138 = defunc_1_op_res_76095;
            
            redout_76078 = redout_tmp_76134;
            redout_76079 = redout_tmp_76135;
            redout_76080 = redout_tmp_76136;
            redout_76081 = redout_tmp_76137;
            redout_76082 = redout_tmp_76138;
        }
        defunc_2_reduce_res_75891 = redout_76078;
        defunc_2_reduce_res_75892 = redout_76079;
        defunc_2_reduce_res_75893 = redout_76080;
        defunc_2_reduce_res_75894 = redout_76081;
        defunc_2_reduce_res_75895 = redout_76082;
        
        float x_75919 = defunc_2_reduce_res_75893 * defunc_2_reduce_res_75895;
        float y_75920 = defunc_2_reduce_res_75894 * defunc_2_reduce_res_75894;
        float a12_75921 = x_75919 - y_75920;
        float x_75922 = defunc_2_reduce_res_75893 * defunc_2_reduce_res_75894;
        float y_75923 = defunc_2_reduce_res_75892 * defunc_2_reduce_res_75895;
        float b12_75924 = x_75922 - y_75923;
        float x_75925 = defunc_2_reduce_res_75892 * defunc_2_reduce_res_75894;
        float y_75926 = defunc_2_reduce_res_75893 * defunc_2_reduce_res_75893;
        float c12_75927 = x_75925 - y_75926;
        float x_75928 = defunc_2_reduce_res_75891 * defunc_2_reduce_res_75895;
        float b2_75929 = x_75928 - y_75926;
        float x_75930 = defunc_2_reduce_res_75892 * defunc_2_reduce_res_75893;
        float y_75931 = defunc_2_reduce_res_75891 * defunc_2_reduce_res_75894;
        float c2_75932 = x_75930 - y_75931;
        float x_75933 = defunc_2_reduce_res_75891 * a12_75921;
        float y_75934 = defunc_2_reduce_res_75892 * b12_75924;
        float x_75935 = x_75933 + y_75934;
        float y_75936 = defunc_2_reduce_res_75893 * c12_75927;
        float y_75937 = x_75935 + y_75936;
        float det_75938 = 1.0F / y_75937;
        float a12_75939 = a12_75921 * det_75938;
        float b12_75940 = b12_75924 * det_75938;
        float c12_75941 = c12_75927 * det_75938;
        float b2_75942 = b2_75929 * det_75938;
        float c2_75943 = c2_75932 * det_75938;
        float defunc_2_reduce_res_75944;
        float defunc_2_reduce_res_75945;
        float redout_76099;
        float redout_76100;
        
        redout_76099 = 0.0F;
        redout_76100 = 0.0F;
        for (int64_t i_76098 = 0; i_76098 < q_64066; i_76098++) {
            float x_76101 = ((float *) mem_75863)[i_76098];
            float x_76102 = ((float *) mem_75889)[i_76098];
            float x_76103 = ((float *) mem_75887)[i_76098];
            bool cond_76104 = sle64(last_res_68562, i_76098);
            float defunc_0_f_res_76105;
            
            if (cond_76104) {
                defunc_0_f_res_76105 = 0.0F;
            } else {
                int64_t i_76106 = add64(min_res_75840, i_76098);
                float x_76107 = ((float *) mem_70516.mem)[i_76106];
                
                defunc_0_f_res_76105 = x_76107;
            }
            
            float x_76108 = a12_75939 * x_76101;
            float y_76109 = b12_75940 * x_76102;
            float x_76110 = x_76108 + y_76109;
            float y_76111 = c12_75941 * x_76103;
            float x_76112 = x_76110 + y_76111;
            float defunc_9_fit_fun_res_76113 = defunc_0_f_res_76105 * x_76112;
            float x_76114 = b12_75940 * x_76101;
            float y_76115 = b2_75942 * x_76102;
            float x_76116 = x_76114 + y_76115;
            float y_76117 = c2_75943 * x_76103;
            float x_76118 = x_76116 + y_76117;
            float defunc_9_slope_fun_res_76119 = defunc_0_f_res_76105 * x_76118;
            float defunc_1_op_res_76120 = defunc_9_fit_fun_res_76113 +
                  redout_76099;
            float defunc_1_op_res_76121 = defunc_9_slope_fun_res_76119 +
                  redout_76100;
            float redout_tmp_76141 = defunc_1_op_res_76120;
            float redout_tmp_76142 = defunc_1_op_res_76121;
            
            redout_76099 = redout_tmp_76141;
            redout_76100 = redout_tmp_76142;
        }
        defunc_2_reduce_res_75944 = redout_76099;
        defunc_2_reduce_res_75945 = redout_76100;
        ((float *) mem_70606.mem)[gtid_68343] = defunc_2_reduce_res_75944;
        ((float *) mem_70609.mem)[gtid_68343] = defunc_2_reduce_res_75945;
    }
    
  cleanup:
    { }
    free(mem_75861);
    free(mem_75863);
    free(mem_75887);
    free(mem_75889);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76837_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76837_end -
                 futhark_mc_segmap_parloop_76837_start;
        
        ctx->futhark_mc_segmap_parloop_76837_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76837_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76837_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76835(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68342 = tid;
    int num_tasks_76002 = info.nsubtasks;
    struct futhark_mc_task_76834 *futhark_mc_task_76834 =
                                 (struct futhark_mc_task_76834 *) args;
    struct futhark_context *ctx = futhark_mc_task_76834->ctx;
    uint64_t futhark_mc_segmap_task_76835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76835_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76834->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76834->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76834->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76834->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76834->free_i_64078;
    bool x_64079 = futhark_mc_task_76834->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76834->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76834->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76834->free_m_64090;
    int64_t last_res_68562 = futhark_mc_task_76834->free_last_res_68562;
    int64_t min_arg_68574 = futhark_mc_task_76834->free_min_arg_68574;
    float max_res_68578 = futhark_mc_task_76834->free_max_res_68578;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_task_76834->free_mem_70516, .size =
                                 0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_task_76834->free_mem_70519, .size =
                                 0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_task_76834->free_mem_70522, .size =
                                 0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_task_76834->free_mem_70525, .size =
                                 0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_task_76834->free_mem_70528, .size =
                                 0, .references =NULL};
    int64_t bytes_70529 = futhark_mc_task_76834->free_bytes_70529;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_task_76834->free_mem_70531, .size =
                                 0, .references =NULL};
    struct memblock mem_70606 = {.desc ="mem_70606", .mem =
                                 futhark_mc_task_76834->free_mem_70606, .size =
                                 0, .references =NULL};
    struct memblock mem_70609 = {.desc ="mem_70609", .mem =
                                 futhark_mc_task_76834->free_mem_70609, .size =
                                 0, .references =NULL};
    int64_t iter_76003;
    struct futhark_mc_segmap_parloop_struct_76836
    futhark_mc_segmap_parloop_struct_76836;
    
    futhark_mc_segmap_parloop_struct_76836.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76836.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76836.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76836.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76836.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76836.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76836.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76836.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76836.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76836.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76836.free_last_res_68562 = last_res_68562;
    futhark_mc_segmap_parloop_struct_76836.free_min_arg_68574 = min_arg_68574;
    futhark_mc_segmap_parloop_struct_76836.free_max_res_68578 = max_res_68578;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70516 = mem_70516.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70519 = mem_70519.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70522 = mem_70522.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70525 = mem_70525.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70528 = mem_70528.mem;
    futhark_mc_segmap_parloop_struct_76836.free_bytes_70529 = bytes_70529;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70531 = mem_70531.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70606 = mem_70606.mem;
    futhark_mc_segmap_parloop_struct_76836.free_mem_70609 = mem_70609.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76837_task;
    
    futhark_mc_segmap_parloop_76837_task.name =
        "futhark_mc_segmap_parloop_76837";
    futhark_mc_segmap_parloop_76837_task.fn = futhark_mc_segmap_parloop_76837;
    futhark_mc_segmap_parloop_76837_task.args =
        &futhark_mc_segmap_parloop_struct_76836;
    futhark_mc_segmap_parloop_76837_task.iterations = iterations;
    futhark_mc_segmap_parloop_76837_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76837_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76837_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76837_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76837_task);
    
    if (futhark_mc_segmap_parloop_76837_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76837_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76837_total_end -
                 futhark_mc_segmap_parloop_76837_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76837_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76837_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76837_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76835_end -
                 futhark_mc_segmap_task_76835_start;
        
        ctx->futhark_mc_segmap_task_76835_runs[tid]++;
        ctx->futhark_mc_segmap_task_76835_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76835_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76843 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_q_64066;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    bool free_x_64079;
    int64_t free_min_res_64084;
    bool free_empty_slice_64089;
    int64_t free_m_64090;
    int64_t free_last_res_68562;
    int64_t free_min_arg_68574;
    float free_max_res_68578;
    char *free_mem_70516;
    char *free_mem_70519;
    char *free_mem_70522;
    char *free_mem_70525;
    char *free_mem_70528;
    int64_t free_bytes_70529;
    char *free_mem_70531;
    char *free_mem_70606;
    char *free_mem_70609;
};
struct futhark_mc_task_76849 {
    struct futhark_context *ctx;
    char *free_mem_70528;
    int64_t free_defunc_0_g_res_75564;
    int64_t free_max_res_75585;
    int64_t *retval_defunc_2_reduce_res_75598;
};
struct futhark_mc_segred_stage_1_parloop_struct_76852 {
    struct futhark_context *ctx;
    char *free_mem_70528;
    int64_t free_defunc_0_g_res_75564;
    int64_t free_max_res_75585;
    char *free_reduce_stage_1_tid_res_arr_mem_76264;
};
static int futhark_mc_segred_stage_1_parloop_76853(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68346, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76852
    *futhark_mc_segred_stage_1_parloop_struct_76852 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76852 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76852->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76853_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76853_start = get_wall_time();
    
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76852->free_mem_70528,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_75564 =
            futhark_mc_segred_stage_1_parloop_struct_76852->free_defunc_0_g_res_75564;
    int64_t max_res_75585 =
            futhark_mc_segred_stage_1_parloop_struct_76852->free_max_res_75585;
    struct memblock reduce_stage_1_tid_res_arr_mem_76264 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76264",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76852->free_reduce_stage_1_tid_res_arr_mem_76264,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76266 = start;
    int64_t x_76160;
    int64_t x_76161;
    int64_t local_acc_76267 = (int64_t) 0;
    
    for (; iter_76266 < end; iter_76266++) {
        int64_t gtid_68347 = iter_76266;
        int64_t slice_76163 = gtid_68347 + max_res_75585;
        int64_t x_76164 = ((int64_t *) mem_70528.mem)[slice_76163];
        int64_t abs_arg_76165 = sub64(x_76164, defunc_0_g_res_75564);
        int64_t abs_res_76166 = abs64(abs_arg_76165);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_76160 = local_acc_76267;
        }
        // Load next params
        {
            x_76161 = abs_res_76166;
        }
        // Red body
        {
            int64_t defunc_1_op_res_76162 = add64(x_76160, x_76161);
            
            local_acc_76267 = defunc_1_op_res_76162;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_76264.mem)[flat_tid_68346] =
        local_acc_76267;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76853_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76853_end -
                 futhark_mc_segred_stage_1_parloop_76853_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76853_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76853_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76853_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76850(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68346 = tid;
    int num_tasks_76263 = info.nsubtasks;
    struct futhark_mc_task_76849 *futhark_mc_task_76849 =
                                 (struct futhark_mc_task_76849 *) args;
    struct futhark_context *ctx = futhark_mc_task_76849->ctx;
    uint64_t futhark_mc_segred_task_76850_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76850_start = get_wall_time();
    
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_task_76849->free_mem_70528, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_75564 =
            futhark_mc_task_76849->free_defunc_0_g_res_75564;
    int64_t max_res_75585 = futhark_mc_task_76849->free_max_res_75585;
    int64_t defunc_2_reduce_res_75598 =
            *futhark_mc_task_76849->retval_defunc_2_reduce_res_75598;
    size_t reduce_stage_1_tid_res_arr_mem_76264_cached_sizze_76851 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76264 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76264_cached_sizze_76851 <
        (size_t) ((int64_t) 8 * num_tasks_76263)) {
        reduce_stage_1_tid_res_arr_mem_76264 =
            realloc(reduce_stage_1_tid_res_arr_mem_76264, (int64_t) 8 *
                    num_tasks_76263);
        reduce_stage_1_tid_res_arr_mem_76264_cached_sizze_76851 = (int64_t) 8 *
            num_tasks_76263;
    }
    
    int64_t iter_76266;
    struct futhark_mc_segred_stage_1_parloop_struct_76852
    futhark_mc_segred_stage_1_parloop_struct_76852;
    
    futhark_mc_segred_stage_1_parloop_struct_76852.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76852.free_mem_70528 =
        mem_70528.mem;
    futhark_mc_segred_stage_1_parloop_struct_76852.free_defunc_0_g_res_75564 =
        defunc_0_g_res_75564;
    futhark_mc_segred_stage_1_parloop_struct_76852.free_max_res_75585 =
        max_res_75585;
    futhark_mc_segred_stage_1_parloop_struct_76852.free_reduce_stage_1_tid_res_arr_mem_76264 =
        reduce_stage_1_tid_res_arr_mem_76264;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76853_task;
    
    futhark_mc_segred_stage_1_parloop_76853_task.name =
        "futhark_mc_segred_stage_1_parloop_76853";
    futhark_mc_segred_stage_1_parloop_76853_task.fn =
        futhark_mc_segred_stage_1_parloop_76853;
    futhark_mc_segred_stage_1_parloop_76853_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76852;
    futhark_mc_segred_stage_1_parloop_76853_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76853_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76853_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76853_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76853_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76853_task);
    
    if (futhark_mc_segred_stage_1_parloop_76853_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76853_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76853_total_end -
                 futhark_mc_segred_stage_1_parloop_76853_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76853_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76853_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76853_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75598 = (int64_t) 0;
    }
    
    int64_t x_76268;
    int64_t x_76269;
    
    for (int32_t i_76271 = 0; i_76271 < num_tasks_76263; i_76271++) {
        flat_tid_68346 = i_76271;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76268 = defunc_2_reduce_res_75598;
            }
            // load next params
            {
                x_76269 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_76264)[flat_tid_68346];
            }
            // red body
            {
                int64_t defunc_1_op_res_76270 = add64(x_76268, x_76269);
                
                defunc_2_reduce_res_75598 = defunc_1_op_res_76270;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76264);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76850_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76850_end -
                 futhark_mc_segred_task_76850_start;
        
        ctx->futhark_mc_segred_task_76850_runs[tid]++;
        ctx->futhark_mc_segred_task_76850_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76850_iter[tid] += iterations;
    }
    *futhark_mc_task_76849->retval_defunc_2_reduce_res_75598 =
        defunc_2_reduce_res_75598;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76854 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_68562;
    char *free_mem_70522;
    char *free_mem_70531;
    int64_t free_min_res_75640;
    float free_defunc_1_f_res_75659;
    float free_defunc_0_f_res_75660;
    char *free_mem_75661;
    char *free_mem_75662;
};
struct futhark_mc_segmap_parloop_struct_76856 {
    struct futhark_context *ctx;
    int64_t free_q_64066;
    int64_t free_last_res_68562;
    char *free_mem_70522;
    char *free_mem_70531;
    int64_t free_min_res_75640;
    float free_defunc_1_f_res_75659;
    float free_defunc_0_f_res_75660;
    char *free_mem_75661;
    char *free_mem_75662;
};
static int futhark_mc_segmap_parloop_76857(void *args, int64_t start,
                                           int64_t end, int flat_tid_68348,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76856
    *futhark_mc_segmap_parloop_struct_76856 =
    (struct futhark_mc_segmap_parloop_struct_76856 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76856->ctx;
    uint64_t futhark_mc_segmap_parloop_76857_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76857_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76856->free_q_64066;
    int64_t last_res_68562 =
            futhark_mc_segmap_parloop_struct_76856->free_last_res_68562;
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_segmap_parloop_struct_76856->free_mem_70522,
                                 .size =0, .references =NULL};
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_segmap_parloop_struct_76856->free_mem_70531,
                                 .size =0, .references =NULL};
    int64_t min_res_75640 =
            futhark_mc_segmap_parloop_struct_76856->free_min_res_75640;
    float defunc_1_f_res_75659 =
          futhark_mc_segmap_parloop_struct_76856->free_defunc_1_f_res_75659;
    float defunc_0_f_res_75660 =
          futhark_mc_segmap_parloop_struct_76856->free_defunc_0_f_res_75660;
    struct memblock mem_75661 = {.desc ="mem_75661", .mem =
                                 futhark_mc_segmap_parloop_struct_76856->free_mem_75661,
                                 .size =0, .references =NULL};
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_segmap_parloop_struct_76856->free_mem_75662,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76277 = start;
    
    for (; iter_76277 < end; iter_76277++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76281 = q_64066;
        int64_t gtid_68349 = iter_76277;
        int64_t remnant_76282 = iter_76277 - gtid_68349;
        float x_76197 = ((float *) mem_70531.mem)[gtid_68349];
        bool cond_76198 = sle64(last_res_68562, gtid_68349);
        float defunc_0_f_res_76199;
        
        if (cond_76198) {
            defunc_0_f_res_76199 = 0.0F;
        } else {
            int64_t i_76278 = add64(gtid_68349, min_res_75640);
            float x_76279 = ((float *) mem_70522.mem)[i_76278];
            float defunc_0_f_res_f_res_76280 = 1.0F + x_76279;
            
            defunc_0_f_res_76199 = defunc_0_f_res_f_res_76280;
        }
        
        float x_j_76203 = defunc_0_f_res_76199 - defunc_0_f_res_75660;
        float abs_res_76204 = (float) fabs(x_j_76203);
        float tmp1_76205 = abs_res_76204 / defunc_1_f_res_75659;
        float x_76206 = tmp1_76205 * tmp1_76205;
        float y_76207 = tmp1_76205 * x_76206;
        float tmp2_76208 = 1.0F - y_76207;
        float x_76209 = tmp2_76208 * tmp2_76208;
        float tmp3_76210 = tmp2_76208 * x_76209;
        float tmp4_76211 = x_76197 * tmp3_76210;
        
        ((float *) mem_75661.mem)[gtid_68349] = x_j_76203;
        ((float *) mem_75662.mem)[gtid_68349] = tmp4_76211;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76857_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76857_end -
                 futhark_mc_segmap_parloop_76857_start;
        
        ctx->futhark_mc_segmap_parloop_76857_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76857_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76857_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76855(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68348 = tid;
    int num_tasks_76276 = info.nsubtasks;
    struct futhark_mc_task_76854 *futhark_mc_task_76854 =
                                 (struct futhark_mc_task_76854 *) args;
    struct futhark_context *ctx = futhark_mc_task_76854->ctx;
    uint64_t futhark_mc_segmap_task_76855_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76855_start = get_wall_time();
    
    int64_t q_64066 = futhark_mc_task_76854->free_q_64066;
    int64_t last_res_68562 = futhark_mc_task_76854->free_last_res_68562;
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_task_76854->free_mem_70522, .size =
                                 0, .references =NULL};
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_task_76854->free_mem_70531, .size =
                                 0, .references =NULL};
    int64_t min_res_75640 = futhark_mc_task_76854->free_min_res_75640;
    float defunc_1_f_res_75659 =
          futhark_mc_task_76854->free_defunc_1_f_res_75659;
    float defunc_0_f_res_75660 =
          futhark_mc_task_76854->free_defunc_0_f_res_75660;
    struct memblock mem_75661 = {.desc ="mem_75661", .mem =
                                 futhark_mc_task_76854->free_mem_75661, .size =
                                 0, .references =NULL};
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_task_76854->free_mem_75662, .size =
                                 0, .references =NULL};
    int64_t iter_76277;
    struct futhark_mc_segmap_parloop_struct_76856
    futhark_mc_segmap_parloop_struct_76856;
    
    futhark_mc_segmap_parloop_struct_76856.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76856.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76856.free_last_res_68562 = last_res_68562;
    futhark_mc_segmap_parloop_struct_76856.free_mem_70522 = mem_70522.mem;
    futhark_mc_segmap_parloop_struct_76856.free_mem_70531 = mem_70531.mem;
    futhark_mc_segmap_parloop_struct_76856.free_min_res_75640 = min_res_75640;
    futhark_mc_segmap_parloop_struct_76856.free_defunc_1_f_res_75659 =
        defunc_1_f_res_75659;
    futhark_mc_segmap_parloop_struct_76856.free_defunc_0_f_res_75660 =
        defunc_0_f_res_75660;
    futhark_mc_segmap_parloop_struct_76856.free_mem_75661 = mem_75661.mem;
    futhark_mc_segmap_parloop_struct_76856.free_mem_75662 = mem_75662.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76857_task;
    
    futhark_mc_segmap_parloop_76857_task.name =
        "futhark_mc_segmap_parloop_76857";
    futhark_mc_segmap_parloop_76857_task.fn = futhark_mc_segmap_parloop_76857;
    futhark_mc_segmap_parloop_76857_task.args =
        &futhark_mc_segmap_parloop_struct_76856;
    futhark_mc_segmap_parloop_76857_task.iterations = iterations;
    futhark_mc_segmap_parloop_76857_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76857_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76857_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76857_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76857_task);
    
    if (futhark_mc_segmap_parloop_76857_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76857_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76857_total_end -
                 futhark_mc_segmap_parloop_76857_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76857_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76857_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76857_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76855_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76855_end -
                 futhark_mc_segmap_task_76855_start;
        
        ctx->futhark_mc_segmap_task_76855_runs[tid]++;
        ctx->futhark_mc_segmap_task_76855_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76855_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76858 {
    struct futhark_context *ctx;
    char *free_mem_75661;
    char *free_mem_75662;
    float *retval_defunc_2_reduce_res_75682;
    float *retval_defunc_2_reduce_res_75683;
    float *retval_defunc_2_reduce_res_75684;
    float *retval_defunc_2_reduce_res_75685;
    float *retval_defunc_2_reduce_res_75686;
    char *retval_mem_75680;
    char *retval_mem_75681;
};
struct futhark_mc_segred_stage_1_parloop_struct_76865 {
    struct futhark_context *ctx;
    char *free_mem_75661;
    char *free_mem_75662;
    char *free_mem_75680;
    char *free_mem_75681;
    char *free_reduce_stage_1_tid_res_arr_mem_76284;
    char *free_reduce_stage_1_tid_res_arr_mem_76286;
    char *free_reduce_stage_1_tid_res_arr_mem_76288;
    char *free_reduce_stage_1_tid_res_arr_mem_76290;
    char *free_reduce_stage_1_tid_res_arr_mem_76292;
};
static int futhark_mc_segred_stage_1_parloop_76866(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68350, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76865
    *futhark_mc_segred_stage_1_parloop_struct_76865 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76865 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76865->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76866_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76866_start = get_wall_time();
    
    struct memblock mem_75661 = {.desc ="mem_75661", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76865->free_mem_75661,
                                 .size =0, .references =NULL};
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76865->free_mem_75662,
                                 .size =0, .references =NULL};
    struct memblock mem_75680 = {.desc ="mem_75680", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76865->free_mem_75680,
                                 .size =0, .references =NULL};
    struct memblock mem_75681 = {.desc ="mem_75681", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76865->free_mem_75681,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76284 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76284",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76865->free_reduce_stage_1_tid_res_arr_mem_76284,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76286 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76286",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76865->free_reduce_stage_1_tid_res_arr_mem_76286,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76288 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76288",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76865->free_reduce_stage_1_tid_res_arr_mem_76288,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76290 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76290",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76865->free_reduce_stage_1_tid_res_arr_mem_76290,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76292 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76292",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76865->free_reduce_stage_1_tid_res_arr_mem_76292,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76294 = start;
    float x_76212;
    float x_76213;
    float x_76215;
    float x_76216;
    float x_76218;
    float x_76219;
    float x_76221;
    float x_76222;
    float x_76224;
    float x_76225;
    float local_acc_76295 = 0.0F;
    float local_acc_76296 = 0.0F;
    float local_acc_76297 = 0.0F;
    float local_acc_76298 = 0.0F;
    float local_acc_76299 = 0.0F;
    
    for (; iter_76294 < end; iter_76294++) {
        int64_t gtid_68351 = iter_76294;
        float x_76227 = ((float *) mem_75661.mem)[gtid_68351];
        float x_76228 = ((float *) mem_75662.mem)[gtid_68351];
        float defunc_1_f_res_76229 = x_76227 * x_76228;
        float defunc_1_f_res_76230 = x_76227 * defunc_1_f_res_76229;
        float defunc_1_f_res_76231 = x_76227 * defunc_1_f_res_76230;
        float defunc_1_f_res_76232 = x_76227 * defunc_1_f_res_76231;
        
        // save map-out results
        {
            ((float *) mem_75680.mem)[gtid_68351] = defunc_1_f_res_76230;
            ((float *) mem_75681.mem)[gtid_68351] = defunc_1_f_res_76229;
        }
        // Load accum params
        {
            x_76212 = local_acc_76295;
        }
        // Load next params
        {
            x_76213 = x_76228;
        }
        // Red body
        {
            float defunc_1_op_res_76214 = x_76212 + x_76213;
            
            local_acc_76295 = defunc_1_op_res_76214;
        }
        // Load accum params
        {
            x_76215 = local_acc_76296;
        }
        // Load next params
        {
            x_76216 = defunc_1_f_res_76229;
        }
        // Red body
        {
            float defunc_1_op_res_76217 = x_76215 + x_76216;
            
            local_acc_76296 = defunc_1_op_res_76217;
        }
        // Load accum params
        {
            x_76218 = local_acc_76297;
        }
        // Load next params
        {
            x_76219 = defunc_1_f_res_76230;
        }
        // Red body
        {
            float defunc_1_op_res_76220 = x_76218 + x_76219;
            
            local_acc_76297 = defunc_1_op_res_76220;
        }
        // Load accum params
        {
            x_76221 = local_acc_76298;
        }
        // Load next params
        {
            x_76222 = defunc_1_f_res_76231;
        }
        // Red body
        {
            float defunc_1_op_res_76223 = x_76221 + x_76222;
            
            local_acc_76298 = defunc_1_op_res_76223;
        }
        // Load accum params
        {
            x_76224 = local_acc_76299;
        }
        // Load next params
        {
            x_76225 = defunc_1_f_res_76232;
        }
        // Red body
        {
            float defunc_1_op_res_76226 = x_76224 + x_76225;
            
            local_acc_76299 = defunc_1_op_res_76226;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_76284.mem)[flat_tid_68350] =
        local_acc_76295;
    ((float *) reduce_stage_1_tid_res_arr_mem_76286.mem)[flat_tid_68350] =
        local_acc_76296;
    ((float *) reduce_stage_1_tid_res_arr_mem_76288.mem)[flat_tid_68350] =
        local_acc_76297;
    ((float *) reduce_stage_1_tid_res_arr_mem_76290.mem)[flat_tid_68350] =
        local_acc_76298;
    ((float *) reduce_stage_1_tid_res_arr_mem_76292.mem)[flat_tid_68350] =
        local_acc_76299;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76866_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76866_end -
                 futhark_mc_segred_stage_1_parloop_76866_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76866_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76866_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76866_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76859(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68350 = tid;
    int num_tasks_76283 = info.nsubtasks;
    struct futhark_mc_task_76858 *futhark_mc_task_76858 =
                                 (struct futhark_mc_task_76858 *) args;
    struct futhark_context *ctx = futhark_mc_task_76858->ctx;
    uint64_t futhark_mc_segred_task_76859_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76859_start = get_wall_time();
    
    struct memblock mem_75661 = {.desc ="mem_75661", .mem =
                                 futhark_mc_task_76858->free_mem_75661, .size =
                                 0, .references =NULL};
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_task_76858->free_mem_75662, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_75682 =
          *futhark_mc_task_76858->retval_defunc_2_reduce_res_75682;
    float defunc_2_reduce_res_75683 =
          *futhark_mc_task_76858->retval_defunc_2_reduce_res_75683;
    float defunc_2_reduce_res_75684 =
          *futhark_mc_task_76858->retval_defunc_2_reduce_res_75684;
    float defunc_2_reduce_res_75685 =
          *futhark_mc_task_76858->retval_defunc_2_reduce_res_75685;
    float defunc_2_reduce_res_75686 =
          *futhark_mc_task_76858->retval_defunc_2_reduce_res_75686;
    struct memblock mem_75680 = {.desc ="mem_75680", .mem =
                                 futhark_mc_task_76858->retval_mem_75680,
                                 .size =0, .references =NULL};
    struct memblock mem_75681 = {.desc ="mem_75681", .mem =
                                 futhark_mc_task_76858->retval_mem_75681,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_76284_cached_sizze_76860 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76284 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76286_cached_sizze_76861 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76286 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76288_cached_sizze_76862 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76288 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76290_cached_sizze_76863 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76290 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76292_cached_sizze_76864 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76292 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76284_cached_sizze_76860 <
        (size_t) ((int64_t) 4 * num_tasks_76283)) {
        reduce_stage_1_tid_res_arr_mem_76284 =
            realloc(reduce_stage_1_tid_res_arr_mem_76284, (int64_t) 4 *
                    num_tasks_76283);
        reduce_stage_1_tid_res_arr_mem_76284_cached_sizze_76860 = (int64_t) 4 *
            num_tasks_76283;
    }
    if (reduce_stage_1_tid_res_arr_mem_76286_cached_sizze_76861 <
        (size_t) ((int64_t) 4 * num_tasks_76283)) {
        reduce_stage_1_tid_res_arr_mem_76286 =
            realloc(reduce_stage_1_tid_res_arr_mem_76286, (int64_t) 4 *
                    num_tasks_76283);
        reduce_stage_1_tid_res_arr_mem_76286_cached_sizze_76861 = (int64_t) 4 *
            num_tasks_76283;
    }
    if (reduce_stage_1_tid_res_arr_mem_76288_cached_sizze_76862 <
        (size_t) ((int64_t) 4 * num_tasks_76283)) {
        reduce_stage_1_tid_res_arr_mem_76288 =
            realloc(reduce_stage_1_tid_res_arr_mem_76288, (int64_t) 4 *
                    num_tasks_76283);
        reduce_stage_1_tid_res_arr_mem_76288_cached_sizze_76862 = (int64_t) 4 *
            num_tasks_76283;
    }
    if (reduce_stage_1_tid_res_arr_mem_76290_cached_sizze_76863 <
        (size_t) ((int64_t) 4 * num_tasks_76283)) {
        reduce_stage_1_tid_res_arr_mem_76290 =
            realloc(reduce_stage_1_tid_res_arr_mem_76290, (int64_t) 4 *
                    num_tasks_76283);
        reduce_stage_1_tid_res_arr_mem_76290_cached_sizze_76863 = (int64_t) 4 *
            num_tasks_76283;
    }
    if (reduce_stage_1_tid_res_arr_mem_76292_cached_sizze_76864 <
        (size_t) ((int64_t) 4 * num_tasks_76283)) {
        reduce_stage_1_tid_res_arr_mem_76292 =
            realloc(reduce_stage_1_tid_res_arr_mem_76292, (int64_t) 4 *
                    num_tasks_76283);
        reduce_stage_1_tid_res_arr_mem_76292_cached_sizze_76864 = (int64_t) 4 *
            num_tasks_76283;
    }
    
    int64_t iter_76294;
    struct futhark_mc_segred_stage_1_parloop_struct_76865
    futhark_mc_segred_stage_1_parloop_struct_76865;
    
    futhark_mc_segred_stage_1_parloop_struct_76865.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_mem_75661 =
        mem_75661.mem;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_mem_75662 =
        mem_75662.mem;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_mem_75680 =
        mem_75680.mem;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_mem_75681 =
        mem_75681.mem;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_reduce_stage_1_tid_res_arr_mem_76284 =
        reduce_stage_1_tid_res_arr_mem_76284;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_reduce_stage_1_tid_res_arr_mem_76286 =
        reduce_stage_1_tid_res_arr_mem_76286;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_reduce_stage_1_tid_res_arr_mem_76288 =
        reduce_stage_1_tid_res_arr_mem_76288;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_reduce_stage_1_tid_res_arr_mem_76290 =
        reduce_stage_1_tid_res_arr_mem_76290;
    futhark_mc_segred_stage_1_parloop_struct_76865.free_reduce_stage_1_tid_res_arr_mem_76292 =
        reduce_stage_1_tid_res_arr_mem_76292;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76866_task;
    
    futhark_mc_segred_stage_1_parloop_76866_task.name =
        "futhark_mc_segred_stage_1_parloop_76866";
    futhark_mc_segred_stage_1_parloop_76866_task.fn =
        futhark_mc_segred_stage_1_parloop_76866;
    futhark_mc_segred_stage_1_parloop_76866_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76865;
    futhark_mc_segred_stage_1_parloop_76866_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76866_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76866_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76866_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76866_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76866_task);
    
    if (futhark_mc_segred_stage_1_parloop_76866_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76866_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76866_total_end -
                 futhark_mc_segred_stage_1_parloop_76866_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76866_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76866_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76866_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75682 = 0.0F;
        defunc_2_reduce_res_75683 = 0.0F;
        defunc_2_reduce_res_75684 = 0.0F;
        defunc_2_reduce_res_75685 = 0.0F;
        defunc_2_reduce_res_75686 = 0.0F;
    }
    
    float x_76300;
    float x_76301;
    float x_76303;
    float x_76304;
    float x_76306;
    float x_76307;
    float x_76309;
    float x_76310;
    float x_76312;
    float x_76313;
    
    for (int32_t i_76315 = 0; i_76315 < num_tasks_76283; i_76315++) {
        flat_tid_68350 = i_76315;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76300 = defunc_2_reduce_res_75682;
            }
            // load next params
            {
                x_76301 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76284)[flat_tid_68350];
            }
            // red body
            {
                float defunc_1_op_res_76302 = x_76300 + x_76301;
                
                defunc_2_reduce_res_75682 = defunc_1_op_res_76302;
            }
            // load acc params
            {
                x_76303 = defunc_2_reduce_res_75683;
            }
            // load next params
            {
                x_76304 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76286)[flat_tid_68350];
            }
            // red body
            {
                float defunc_1_op_res_76305 = x_76303 + x_76304;
                
                defunc_2_reduce_res_75683 = defunc_1_op_res_76305;
            }
            // load acc params
            {
                x_76306 = defunc_2_reduce_res_75684;
            }
            // load next params
            {
                x_76307 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76288)[flat_tid_68350];
            }
            // red body
            {
                float defunc_1_op_res_76308 = x_76306 + x_76307;
                
                defunc_2_reduce_res_75684 = defunc_1_op_res_76308;
            }
            // load acc params
            {
                x_76309 = defunc_2_reduce_res_75685;
            }
            // load next params
            {
                x_76310 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76290)[flat_tid_68350];
            }
            // red body
            {
                float defunc_1_op_res_76311 = x_76309 + x_76310;
                
                defunc_2_reduce_res_75685 = defunc_1_op_res_76311;
            }
            // load acc params
            {
                x_76312 = defunc_2_reduce_res_75686;
            }
            // load next params
            {
                x_76313 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76292)[flat_tid_68350];
            }
            // red body
            {
                float defunc_1_op_res_76314 = x_76312 + x_76313;
                
                defunc_2_reduce_res_75686 = defunc_1_op_res_76314;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76284);
    free(reduce_stage_1_tid_res_arr_mem_76286);
    free(reduce_stage_1_tid_res_arr_mem_76288);
    free(reduce_stage_1_tid_res_arr_mem_76290);
    free(reduce_stage_1_tid_res_arr_mem_76292);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76859_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76859_end -
                 futhark_mc_segred_task_76859_start;
        
        ctx->futhark_mc_segred_task_76859_runs[tid]++;
        ctx->futhark_mc_segred_task_76859_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76859_iter[tid] += iterations;
    }
    *futhark_mc_task_76858->retval_defunc_2_reduce_res_75682 =
        defunc_2_reduce_res_75682;
    *futhark_mc_task_76858->retval_defunc_2_reduce_res_75683 =
        defunc_2_reduce_res_75683;
    *futhark_mc_task_76858->retval_defunc_2_reduce_res_75684 =
        defunc_2_reduce_res_75684;
    *futhark_mc_task_76858->retval_defunc_2_reduce_res_75685 =
        defunc_2_reduce_res_75685;
    *futhark_mc_task_76858->retval_defunc_2_reduce_res_75686 =
        defunc_2_reduce_res_75686;
    futhark_mc_task_76858->retval_mem_75680 = mem_75680.mem;
    futhark_mc_task_76858->retval_mem_75681 = mem_75681.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76867 {
    struct futhark_context *ctx;
    int64_t free_last_res_68562;
    char *free_mem_70516;
    int64_t free_min_res_75640;
    char *free_mem_75662;
    char *free_mem_75680;
    char *free_mem_75681;
    float free_a12_75730;
    float free_b12_75731;
    float free_c12_75732;
    float free_b2_75733;
    float free_c2_75734;
    float *retval_defunc_2_reduce_res_75735;
    float *retval_defunc_2_reduce_res_75736;
};
struct futhark_mc_segred_stage_1_parloop_struct_76871 {
    struct futhark_context *ctx;
    int64_t free_last_res_68562;
    char *free_mem_70516;
    int64_t free_min_res_75640;
    char *free_mem_75662;
    char *free_mem_75680;
    char *free_mem_75681;
    float free_a12_75730;
    float free_b12_75731;
    float free_c12_75732;
    float free_b2_75733;
    float free_c2_75734;
    char *free_reduce_stage_1_tid_res_arr_mem_76317;
    char *free_reduce_stage_1_tid_res_arr_mem_76319;
};
static int futhark_mc_segred_stage_1_parloop_76872(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68352, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76871
    *futhark_mc_segred_stage_1_parloop_struct_76871 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76871 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76871->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76872_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76872_start = get_wall_time();
    
    int64_t last_res_68562 =
            futhark_mc_segred_stage_1_parloop_struct_76871->free_last_res_68562;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76871->free_mem_70516,
                                 .size =0, .references =NULL};
    int64_t min_res_75640 =
            futhark_mc_segred_stage_1_parloop_struct_76871->free_min_res_75640;
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76871->free_mem_75662,
                                 .size =0, .references =NULL};
    struct memblock mem_75680 = {.desc ="mem_75680", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76871->free_mem_75680,
                                 .size =0, .references =NULL};
    struct memblock mem_75681 = {.desc ="mem_75681", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76871->free_mem_75681,
                                 .size =0, .references =NULL};
    float a12_75730 =
          futhark_mc_segred_stage_1_parloop_struct_76871->free_a12_75730;
    float b12_75731 =
          futhark_mc_segred_stage_1_parloop_struct_76871->free_b12_75731;
    float c12_75732 =
          futhark_mc_segred_stage_1_parloop_struct_76871->free_c12_75732;
    float b2_75733 =
          futhark_mc_segred_stage_1_parloop_struct_76871->free_b2_75733;
    float c2_75734 =
          futhark_mc_segred_stage_1_parloop_struct_76871->free_c2_75734;
    struct memblock reduce_stage_1_tid_res_arr_mem_76317 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76317",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76871->free_reduce_stage_1_tid_res_arr_mem_76317,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76319 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76319",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76871->free_reduce_stage_1_tid_res_arr_mem_76319,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76321 = start;
    float x_76233;
    float x_76234;
    float x_76236;
    float x_76237;
    float local_acc_76322 = 0.0F;
    float local_acc_76323 = 0.0F;
    
    for (; iter_76321 < end; iter_76321++) {
        int64_t gtid_68353 = iter_76321;
        float x_76239 = ((float *) mem_75662.mem)[gtid_68353];
        float x_76240 = ((float *) mem_75681.mem)[gtid_68353];
        float x_76241 = ((float *) mem_75680.mem)[gtid_68353];
        bool cond_76242 = sle64(last_res_68562, gtid_68353);
        float defunc_0_f_res_76243;
        
        if (cond_76242) {
            defunc_0_f_res_76243 = 0.0F;
        } else {
            int64_t i_76244 = add64(gtid_68353, min_res_75640);
            float x_76245 = ((float *) mem_70516.mem)[i_76244];
            
            defunc_0_f_res_76243 = x_76245;
        }
        
        float x_76246 = a12_75730 * x_76239;
        float y_76247 = b12_75731 * x_76240;
        float x_76248 = x_76246 + y_76247;
        float y_76249 = c12_75732 * x_76241;
        float x_76250 = x_76248 + y_76249;
        float defunc_9_fit_fun_res_76251 = defunc_0_f_res_76243 * x_76250;
        float x_76252 = b12_75731 * x_76239;
        float y_76253 = b2_75733 * x_76240;
        float x_76254 = x_76252 + y_76253;
        float y_76255 = c2_75734 * x_76241;
        float x_76256 = x_76254 + y_76255;
        float defunc_9_slope_fun_res_76257 = defunc_0_f_res_76243 * x_76256;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_76233 = local_acc_76322;
        }
        // Load next params
        {
            x_76234 = defunc_9_fit_fun_res_76251;
        }
        // Red body
        {
            float defunc_1_op_res_76235 = x_76233 + x_76234;
            
            local_acc_76322 = defunc_1_op_res_76235;
        }
        // Load accum params
        {
            x_76236 = local_acc_76323;
        }
        // Load next params
        {
            x_76237 = defunc_9_slope_fun_res_76257;
        }
        // Red body
        {
            float defunc_1_op_res_76238 = x_76236 + x_76237;
            
            local_acc_76323 = defunc_1_op_res_76238;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_76317.mem)[flat_tid_68352] =
        local_acc_76322;
    ((float *) reduce_stage_1_tid_res_arr_mem_76319.mem)[flat_tid_68352] =
        local_acc_76323;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76872_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76872_end -
                 futhark_mc_segred_stage_1_parloop_76872_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76872_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76872_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76872_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76868(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68352 = tid;
    int num_tasks_76316 = info.nsubtasks;
    struct futhark_mc_task_76867 *futhark_mc_task_76867 =
                                 (struct futhark_mc_task_76867 *) args;
    struct futhark_context *ctx = futhark_mc_task_76867->ctx;
    uint64_t futhark_mc_segred_task_76868_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76868_start = get_wall_time();
    
    int64_t last_res_68562 = futhark_mc_task_76867->free_last_res_68562;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_task_76867->free_mem_70516, .size =
                                 0, .references =NULL};
    int64_t min_res_75640 = futhark_mc_task_76867->free_min_res_75640;
    struct memblock mem_75662 = {.desc ="mem_75662", .mem =
                                 futhark_mc_task_76867->free_mem_75662, .size =
                                 0, .references =NULL};
    struct memblock mem_75680 = {.desc ="mem_75680", .mem =
                                 futhark_mc_task_76867->free_mem_75680, .size =
                                 0, .references =NULL};
    struct memblock mem_75681 = {.desc ="mem_75681", .mem =
                                 futhark_mc_task_76867->free_mem_75681, .size =
                                 0, .references =NULL};
    float a12_75730 = futhark_mc_task_76867->free_a12_75730;
    float b12_75731 = futhark_mc_task_76867->free_b12_75731;
    float c12_75732 = futhark_mc_task_76867->free_c12_75732;
    float b2_75733 = futhark_mc_task_76867->free_b2_75733;
    float c2_75734 = futhark_mc_task_76867->free_c2_75734;
    float defunc_2_reduce_res_75735 =
          *futhark_mc_task_76867->retval_defunc_2_reduce_res_75735;
    float defunc_2_reduce_res_75736 =
          *futhark_mc_task_76867->retval_defunc_2_reduce_res_75736;
    size_t reduce_stage_1_tid_res_arr_mem_76317_cached_sizze_76869 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76317 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76319_cached_sizze_76870 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76319 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76317_cached_sizze_76869 <
        (size_t) ((int64_t) 4 * num_tasks_76316)) {
        reduce_stage_1_tid_res_arr_mem_76317 =
            realloc(reduce_stage_1_tid_res_arr_mem_76317, (int64_t) 4 *
                    num_tasks_76316);
        reduce_stage_1_tid_res_arr_mem_76317_cached_sizze_76869 = (int64_t) 4 *
            num_tasks_76316;
    }
    if (reduce_stage_1_tid_res_arr_mem_76319_cached_sizze_76870 <
        (size_t) ((int64_t) 4 * num_tasks_76316)) {
        reduce_stage_1_tid_res_arr_mem_76319 =
            realloc(reduce_stage_1_tid_res_arr_mem_76319, (int64_t) 4 *
                    num_tasks_76316);
        reduce_stage_1_tid_res_arr_mem_76319_cached_sizze_76870 = (int64_t) 4 *
            num_tasks_76316;
    }
    
    int64_t iter_76321;
    struct futhark_mc_segred_stage_1_parloop_struct_76871
    futhark_mc_segred_stage_1_parloop_struct_76871;
    
    futhark_mc_segred_stage_1_parloop_struct_76871.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_last_res_68562 =
        last_res_68562;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_mem_70516 =
        mem_70516.mem;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_min_res_75640 =
        min_res_75640;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_mem_75662 =
        mem_75662.mem;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_mem_75680 =
        mem_75680.mem;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_mem_75681 =
        mem_75681.mem;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_a12_75730 = a12_75730;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_b12_75731 = b12_75731;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_c12_75732 = c12_75732;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_b2_75733 = b2_75733;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_c2_75734 = c2_75734;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_reduce_stage_1_tid_res_arr_mem_76317 =
        reduce_stage_1_tid_res_arr_mem_76317;
    futhark_mc_segred_stage_1_parloop_struct_76871.free_reduce_stage_1_tid_res_arr_mem_76319 =
        reduce_stage_1_tid_res_arr_mem_76319;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76872_task;
    
    futhark_mc_segred_stage_1_parloop_76872_task.name =
        "futhark_mc_segred_stage_1_parloop_76872";
    futhark_mc_segred_stage_1_parloop_76872_task.fn =
        futhark_mc_segred_stage_1_parloop_76872;
    futhark_mc_segred_stage_1_parloop_76872_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76871;
    futhark_mc_segred_stage_1_parloop_76872_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76872_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76872_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76872_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76872_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76872_task);
    
    if (futhark_mc_segred_stage_1_parloop_76872_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76872_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76872_total_end -
                 futhark_mc_segred_stage_1_parloop_76872_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76872_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76872_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76872_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75735 = 0.0F;
        defunc_2_reduce_res_75736 = 0.0F;
    }
    
    float x_76324;
    float x_76325;
    float x_76327;
    float x_76328;
    
    for (int32_t i_76330 = 0; i_76330 < num_tasks_76316; i_76330++) {
        flat_tid_68352 = i_76330;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76324 = defunc_2_reduce_res_75735;
            }
            // load next params
            {
                x_76325 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76317)[flat_tid_68352];
            }
            // red body
            {
                float defunc_1_op_res_76326 = x_76324 + x_76325;
                
                defunc_2_reduce_res_75735 = defunc_1_op_res_76326;
            }
            // load acc params
            {
                x_76327 = defunc_2_reduce_res_75736;
            }
            // load next params
            {
                x_76328 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76319)[flat_tid_68352];
            }
            // red body
            {
                float defunc_1_op_res_76329 = x_76327 + x_76328;
                
                defunc_2_reduce_res_75736 = defunc_1_op_res_76329;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76317);
    free(reduce_stage_1_tid_res_arr_mem_76319);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76868_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76868_end -
                 futhark_mc_segred_task_76868_start;
        
        ctx->futhark_mc_segred_task_76868_runs[tid]++;
        ctx->futhark_mc_segred_task_76868_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76868_iter[tid] += iterations;
    }
    *futhark_mc_task_76867->retval_defunc_2_reduce_res_75735 =
        defunc_2_reduce_res_75735;
    *futhark_mc_task_76867->retval_defunc_2_reduce_res_75736 =
        defunc_2_reduce_res_75736;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76844(void *args, int64_t start,
                                           int64_t end, int flat_tid_68344,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76843
    *futhark_mc_segmap_parloop_struct_76843 =
    (struct futhark_mc_segmap_parloop_struct_76843 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76843->ctx;
    uint64_t futhark_mc_segmap_parloop_76844_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76844_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76843->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76843->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76843->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76843->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76843->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76843->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76843->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76843->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76843->free_m_64090;
    int64_t last_res_68562 =
            futhark_mc_segmap_parloop_struct_76843->free_last_res_68562;
    int64_t min_arg_68574 =
            futhark_mc_segmap_parloop_struct_76843->free_min_arg_68574;
    float max_res_68578 =
          futhark_mc_segmap_parloop_struct_76843->free_max_res_68578;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70516,
                                 .size =0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70519,
                                 .size =0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70522,
                                 .size =0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70525,
                                 .size =0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70528,
                                 .size =0, .references =NULL};
    int64_t bytes_70529 =
            futhark_mc_segmap_parloop_struct_76843->free_bytes_70529;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70531,
                                 .size =0, .references =NULL};
    struct memblock mem_70606 = {.desc ="mem_70606", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70606,
                                 .size =0, .references =NULL};
    struct memblock mem_70609 = {.desc ="mem_70609", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70609,
                                 .size =0, .references =NULL};
    size_t mem_75661_cached_sizze_76845 = 0;
    char *mem_75661 = NULL;
    size_t mem_75662_cached_sizze_76846 = 0;
    char *mem_75662 = NULL;
    size_t mem_75680_cached_sizze_76847 = 0;
    char *mem_75680 = NULL;
    size_t mem_75681_cached_sizze_76848 = 0;
    char *mem_75681 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76143 = start;
    
    if (mem_75661_cached_sizze_76845 < (size_t) bytes_70529) {
        mem_75661 = realloc(mem_75661, bytes_70529);
        mem_75661_cached_sizze_76845 = bytes_70529;
    }
    if (mem_75662_cached_sizze_76846 < (size_t) bytes_70529) {
        mem_75662 = realloc(mem_75662, bytes_70529);
        mem_75662_cached_sizze_76846 = bytes_70529;
    }
    if (mem_75680_cached_sizze_76847 < (size_t) bytes_70529) {
        mem_75680 = realloc(mem_75680, bytes_70529);
        mem_75680_cached_sizze_76847 = bytes_70529;
    }
    if (mem_75681_cached_sizze_76848 < (size_t) bytes_70529) {
        mem_75681 = realloc(mem_75681, bytes_70529);
        mem_75681_cached_sizze_76848 = bytes_70529;
    }
    for (; iter_76143 < end; iter_76143++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76258 = n_m_64072;
        int64_t gtid_68345 = iter_76143;
        int64_t remnant_76259 = iter_76143 - gtid_68345;
        int64_t min_arg_75562 = mul64(jump_64068, gtid_68345);
        int64_t min_res_75563 = smin64(i_64078, min_arg_75562);
        int64_t defunc_0_g_res_75564 = add64((int64_t) 1, min_res_75563);
        bool nearest_idx_75565;
        int64_t nearest_idx_75566;
        int64_t nearest_idx_75567;
        bool loop_while_76144;
        int64_t low_76145;
        int64_t high_76146;
        
        loop_while_76144 = x_64079;
        low_76145 = (int64_t) 0;
        high_76146 = i_64078;
        while (loop_while_76144) {
            int64_t x_76147 = add64(low_76145, high_76146);
            int64_t mid_76148 = sdiv64(x_76147, (int64_t) 2);
            bool x_76149 = sle64((int64_t) 0, mid_76148);
            bool y_76150 = slt64(mid_76148, n_64064);
            bool bounds_check_76151 = x_76149 && y_76150;
            bool index_certs_76152;
            
            if (!bounds_check_76151) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76148,
                              "] out of bounds for array of shape [",
                              (long long) n_64064, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            int64_t x_76153 = ((int64_t *) mem_70525.mem)[mid_76148];
            bool cond_76154 = sle64(defunc_0_g_res_75564, x_76153);
            int64_t loopres_76155;
            int64_t loopres_76156;
            
            if (cond_76154) {
                int64_t loopres_t_res_76157 = sub64(mid_76148, (int64_t) 1);
                
                loopres_76155 = low_76145;
                loopres_76156 = loopres_t_res_76157;
            } else {
                int64_t loopres_f_res_76158 = add64((int64_t) 1, mid_76148);
                
                loopres_76155 = loopres_f_res_76158;
                loopres_76156 = high_76146;
            }
            
            bool loop_cond_76159 = sle64(loopres_76155, loopres_76156);
            bool loop_while_tmp_76260 = loop_cond_76159;
            int64_t low_tmp_76261 = loopres_76155;
            int64_t high_tmp_76262 = loopres_76156;
            
            loop_while_76144 = loop_while_tmp_76260;
            low_76145 = low_tmp_76261;
            high_76146 = high_tmp_76262;
        }
        nearest_idx_75565 = loop_while_76144;
        nearest_idx_75566 = low_76145;
        nearest_idx_75567 = high_76146;
        
        int64_t max_arg_75584 = sub64(nearest_idx_75566, min_res_64084);
        int64_t max_res_75585 = smax64((int64_t) 0, max_arg_75584);
        int64_t j_75586 = add64(min_res_64084, max_res_75585);
        int64_t i_p_m_t_s_75587 = add64(m_64090, max_res_75585);
        bool zzero_leq_i_p_m_t_s_75588 = sle64((int64_t) 0, i_p_m_t_s_75587);
        bool i_p_m_t_s_leq_w_75589 = slt64(i_p_m_t_s_75587, n_64064);
        bool zzero_lte_i_75590 = sle64((int64_t) 0, max_res_75585);
        bool i_lte_j_75591 = sle64(max_res_75585, j_75586);
        bool y_75592 = i_p_m_t_s_leq_w_75589 && zzero_lte_i_75590;
        bool y_75593 = zzero_leq_i_p_m_t_s_75588 && y_75592;
        bool y_75594 = i_lte_j_75591 && y_75593;
        bool forwards_ok_75595 = zzero_lte_i_75590 && y_75594;
        bool ok_or_empty_75596 = empty_slice_64089 || forwards_ok_75595;
        bool index_certs_75597;
        
        if (!ok_or_empty_75596) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_75585, ":",
                          (long long) j_75586,
                          "] out of bounds for array of shape [",
                          (long long) n_64064, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_75598;
        int64_t flat_tid_68346 = (int64_t) 0;
        int32_t num_tasks_76263;
        struct futhark_mc_task_76849 futhark_mc_task_76849;
        
        futhark_mc_task_76849.ctx = ctx;
        futhark_mc_task_76849.free_mem_70528 = mem_70528.mem;
        futhark_mc_task_76849.free_defunc_0_g_res_75564 = defunc_0_g_res_75564;
        futhark_mc_task_76849.free_max_res_75585 = max_res_75585;
        futhark_mc_task_76849.retval_defunc_2_reduce_res_75598 =
            &defunc_2_reduce_res_75598;
        
        struct scheduler_segop futhark_mc_task_76849_task;
        
        futhark_mc_task_76849_task.args = &futhark_mc_task_76849;
        futhark_mc_task_76849_task.top_level_fn = futhark_mc_segred_task_76850;
        futhark_mc_task_76849_task.name = "futhark_mc_segred_task_76850";
        futhark_mc_task_76849_task.iterations = min_res_64084;
        futhark_mc_task_76849_task.task_time =
            &ctx->futhark_mc_segred_task_76850_total_time;
        futhark_mc_task_76849_task.task_iter =
            &ctx->futhark_mc_segred_task_76850_total_iter;
        futhark_mc_task_76849_task.sched = STATIC;
        futhark_mc_task_76849_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76850_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76849_task);
        
        if (futhark_mc_segred_task_76850_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_75606;
        int64_t idx_75607;
        int64_t idx_75608;
        int64_t idx_75609;
        int64_t best_idx_76168;
        int64_t last_idx_76169;
        int64_t best_sum_76170;
        int64_t curr_sum_76171;
        
        best_idx_76168 = max_res_75585;
        last_idx_76169 = max_res_75585;
        best_sum_76170 = defunc_2_reduce_res_75598;
        curr_sum_76171 = defunc_2_reduce_res_75598;
        for (int64_t j_76167 = 0; j_76167 < min_res_64084; j_76167++) {
            int64_t new_idx_76172 = add64(max_res_75585, j_76167);
            int64_t x_76173 = add64(min_res_64084, new_idx_76172);
            bool cond_76174 = slt64(last_res_68562, x_76173);
            int64_t new_sum_76175;
            
            if (cond_76174) {
                new_sum_76175 = (int64_t) 9223372036854775807;
            } else {
                bool x_76176 = sle64((int64_t) 0, last_idx_76169);
                bool y_76177 = slt64(last_idx_76169, n_64064);
                bool bounds_check_76178 = x_76176 && y_76177;
                bool index_certs_76179;
                
                if (!bounds_check_76178) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_76169,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_76180 = ((int64_t *) mem_70528.mem)[last_idx_76169];
                int64_t binop_p_76181 = sub64(defunc_0_g_res_75564, y_76180);
                int64_t defunc_0_f_res_76182 = abs64(binop_p_76181);
                int64_t x_76183 = sub64(curr_sum_76171, defunc_0_f_res_76182);
                int64_t min_arg_76184 = add64(min_res_64084, last_idx_76169);
                int64_t min_res_76185 = smin64(i_64078, min_arg_76184);
                bool x_76186 = sle64((int64_t) 0, min_res_76185);
                bool y_76187 = slt64(min_res_76185, n_64064);
                bool bounds_check_76188 = x_76186 && y_76187;
                bool index_certs_76189;
                
                if (!bounds_check_76188) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76185,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64064, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                    return 1;
                }
                
                int64_t y_76190 = ((int64_t *) mem_70528.mem)[min_res_76185];
                int64_t binop_p_76191 = sub64(defunc_0_g_res_75564, y_76190);
                int64_t defunc_0_f_res_76192 = abs64(binop_p_76191);
                int64_t new_sum_f_res_76193 = add64(x_76183,
                                                    defunc_0_f_res_76192);
                
                new_sum_76175 = new_sum_f_res_76193;
            }
            
            bool cond_76194 = sle64(new_sum_76175, best_sum_76170);
            int64_t loopres_76195;
            
            if (cond_76194) {
                loopres_76195 = new_idx_76172;
            } else {
                loopres_76195 = best_idx_76168;
            }
            
            int64_t loopres_76196;
            
            if (cond_76194) {
                loopres_76196 = new_sum_76175;
            } else {
                loopres_76196 = best_sum_76170;
            }
            
            int64_t best_idx_tmp_76272 = loopres_76195;
            int64_t last_idx_tmp_76273 = new_idx_76172;
            int64_t best_sum_tmp_76274 = loopres_76196;
            int64_t curr_sum_tmp_76275 = new_sum_76175;
            
            best_idx_76168 = best_idx_tmp_76272;
            last_idx_76169 = last_idx_tmp_76273;
            best_sum_76170 = best_sum_tmp_76274;
            curr_sum_76171 = curr_sum_tmp_76275;
        }
        idx_75606 = best_idx_76168;
        idx_75607 = last_idx_76169;
        idx_75608 = best_sum_76170;
        idx_75609 = curr_sum_76171;
        
        int64_t min_res_75640 = smin64(min_arg_68574, idx_75606);
        int64_t x_75641 = add64(min_res_64084, min_res_75640);
        int64_t r_75642 = sub64(x_75641, (int64_t) 1);
        bool x_75643 = sle64((int64_t) 0, r_75642);
        bool y_75644 = slt64(r_75642, n_64064);
        bool bounds_check_75645 = x_75643 && y_75644;
        bool index_certs_75646;
        
        if (!bounds_check_75645) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_75642,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_75647 = ((int64_t *) mem_70519.mem)[r_75642];
        int64_t abs_arg_75648 = sub64(x_75647, min_res_75563);
        int64_t abs_res_75649 = abs64(abs_arg_75648);
        bool x_75650 = sle64((int64_t) 0, min_res_75640);
        bool y_75651 = slt64(min_res_75640, n_64064);
        bool bounds_check_75652 = x_75650 && y_75651;
        bool index_certs_75653;
        
        if (!bounds_check_75652) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_75640,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64064, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        int64_t x_75654 = ((int64_t *) mem_70519.mem)[min_res_75640];
        int64_t abs_arg_75655 = sub64(x_75654, min_res_75563);
        int64_t abs_res_75656 = abs64(abs_arg_75655);
        int64_t max_res_75657 = smax64(abs_res_75649, abs_res_75656);
        float defunc_0_f_res_75658 = sitofp_i64_f32(max_res_75657);
        float defunc_1_f_res_75659 = max_res_68578 + defunc_0_f_res_75658;
        float defunc_0_f_res_75660 = sitofp_i64_f32(min_res_75563);
        int64_t flat_tid_68348 = (int64_t) 0;
        int32_t num_tasks_76276;
        struct futhark_mc_task_76854 futhark_mc_task_76854;
        
        futhark_mc_task_76854.ctx = ctx;
        futhark_mc_task_76854.free_q_64066 = q_64066;
        futhark_mc_task_76854.free_last_res_68562 = last_res_68562;
        futhark_mc_task_76854.free_mem_70522 = mem_70522.mem;
        futhark_mc_task_76854.free_mem_70531 = mem_70531.mem;
        futhark_mc_task_76854.free_min_res_75640 = min_res_75640;
        futhark_mc_task_76854.free_defunc_1_f_res_75659 = defunc_1_f_res_75659;
        futhark_mc_task_76854.free_defunc_0_f_res_75660 = defunc_0_f_res_75660;
        futhark_mc_task_76854.free_mem_75661 = mem_75661;
        futhark_mc_task_76854.free_mem_75662 = mem_75662;
        
        struct scheduler_segop futhark_mc_task_76854_task;
        
        futhark_mc_task_76854_task.args = &futhark_mc_task_76854;
        futhark_mc_task_76854_task.top_level_fn = futhark_mc_segmap_task_76855;
        futhark_mc_task_76854_task.name = "futhark_mc_segmap_task_76855";
        futhark_mc_task_76854_task.iterations = q_64066;
        futhark_mc_task_76854_task.task_time =
            &ctx->futhark_mc_segmap_task_76855_total_time;
        futhark_mc_task_76854_task.task_iter =
            &ctx->futhark_mc_segmap_task_76855_total_iter;
        futhark_mc_task_76854_task.sched = STATIC;
        futhark_mc_task_76854_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76855_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76854_task);
        
        if (futhark_mc_segmap_task_76855_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_75682;
        float defunc_2_reduce_res_75683;
        float defunc_2_reduce_res_75684;
        float defunc_2_reduce_res_75685;
        float defunc_2_reduce_res_75686;
        int64_t flat_tid_68350 = (int64_t) 0;
        int32_t num_tasks_76283;
        struct futhark_mc_task_76858 futhark_mc_task_76858;
        
        futhark_mc_task_76858.ctx = ctx;
        futhark_mc_task_76858.free_mem_75661 = mem_75661;
        futhark_mc_task_76858.free_mem_75662 = mem_75662;
        futhark_mc_task_76858.retval_defunc_2_reduce_res_75682 =
            &defunc_2_reduce_res_75682;
        futhark_mc_task_76858.retval_defunc_2_reduce_res_75683 =
            &defunc_2_reduce_res_75683;
        futhark_mc_task_76858.retval_defunc_2_reduce_res_75684 =
            &defunc_2_reduce_res_75684;
        futhark_mc_task_76858.retval_defunc_2_reduce_res_75685 =
            &defunc_2_reduce_res_75685;
        futhark_mc_task_76858.retval_defunc_2_reduce_res_75686 =
            &defunc_2_reduce_res_75686;
        futhark_mc_task_76858.retval_mem_75680 = mem_75680;
        futhark_mc_task_76858.retval_mem_75681 = mem_75681;
        
        struct scheduler_segop futhark_mc_task_76858_task;
        
        futhark_mc_task_76858_task.args = &futhark_mc_task_76858;
        futhark_mc_task_76858_task.top_level_fn = futhark_mc_segred_task_76859;
        futhark_mc_task_76858_task.name = "futhark_mc_segred_task_76859";
        futhark_mc_task_76858_task.iterations = q_64066;
        futhark_mc_task_76858_task.task_time =
            &ctx->futhark_mc_segred_task_76859_total_time;
        futhark_mc_task_76858_task.task_iter =
            &ctx->futhark_mc_segred_task_76859_total_iter;
        futhark_mc_task_76858_task.sched = STATIC;
        futhark_mc_task_76858_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76859_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76858_task);
        
        if (futhark_mc_segred_task_76859_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_75710 = defunc_2_reduce_res_75684 * defunc_2_reduce_res_75686;
        float y_75711 = defunc_2_reduce_res_75685 * defunc_2_reduce_res_75685;
        float a12_75712 = x_75710 - y_75711;
        float x_75713 = defunc_2_reduce_res_75684 * defunc_2_reduce_res_75685;
        float y_75714 = defunc_2_reduce_res_75683 * defunc_2_reduce_res_75686;
        float b12_75715 = x_75713 - y_75714;
        float x_75716 = defunc_2_reduce_res_75683 * defunc_2_reduce_res_75685;
        float y_75717 = defunc_2_reduce_res_75684 * defunc_2_reduce_res_75684;
        float c12_75718 = x_75716 - y_75717;
        float x_75719 = defunc_2_reduce_res_75682 * defunc_2_reduce_res_75686;
        float b2_75720 = x_75719 - y_75717;
        float x_75721 = defunc_2_reduce_res_75683 * defunc_2_reduce_res_75684;
        float y_75722 = defunc_2_reduce_res_75682 * defunc_2_reduce_res_75685;
        float c2_75723 = x_75721 - y_75722;
        float x_75724 = defunc_2_reduce_res_75682 * a12_75712;
        float y_75725 = defunc_2_reduce_res_75683 * b12_75715;
        float x_75726 = x_75724 + y_75725;
        float y_75727 = defunc_2_reduce_res_75684 * c12_75718;
        float y_75728 = x_75726 + y_75727;
        float det_75729 = 1.0F / y_75728;
        float a12_75730 = a12_75712 * det_75729;
        float b12_75731 = b12_75715 * det_75729;
        float c12_75732 = c12_75718 * det_75729;
        float b2_75733 = b2_75720 * det_75729;
        float c2_75734 = c2_75723 * det_75729;
        float defunc_2_reduce_res_75735;
        float defunc_2_reduce_res_75736;
        int64_t flat_tid_68352 = (int64_t) 0;
        int32_t num_tasks_76316;
        struct futhark_mc_task_76867 futhark_mc_task_76867;
        
        futhark_mc_task_76867.ctx = ctx;
        futhark_mc_task_76867.free_last_res_68562 = last_res_68562;
        futhark_mc_task_76867.free_mem_70516 = mem_70516.mem;
        futhark_mc_task_76867.free_min_res_75640 = min_res_75640;
        futhark_mc_task_76867.free_mem_75662 = mem_75662;
        futhark_mc_task_76867.free_mem_75680 = mem_75680;
        futhark_mc_task_76867.free_mem_75681 = mem_75681;
        futhark_mc_task_76867.free_a12_75730 = a12_75730;
        futhark_mc_task_76867.free_b12_75731 = b12_75731;
        futhark_mc_task_76867.free_c12_75732 = c12_75732;
        futhark_mc_task_76867.free_b2_75733 = b2_75733;
        futhark_mc_task_76867.free_c2_75734 = c2_75734;
        futhark_mc_task_76867.retval_defunc_2_reduce_res_75735 =
            &defunc_2_reduce_res_75735;
        futhark_mc_task_76867.retval_defunc_2_reduce_res_75736 =
            &defunc_2_reduce_res_75736;
        
        struct scheduler_segop futhark_mc_task_76867_task;
        
        futhark_mc_task_76867_task.args = &futhark_mc_task_76867;
        futhark_mc_task_76867_task.top_level_fn = futhark_mc_segred_task_76868;
        futhark_mc_task_76867_task.name = "futhark_mc_segred_task_76868";
        futhark_mc_task_76867_task.iterations = q_64066;
        futhark_mc_task_76867_task.task_time =
            &ctx->futhark_mc_segred_task_76868_total_time;
        futhark_mc_task_76867_task.task_iter =
            &ctx->futhark_mc_segred_task_76868_total_iter;
        futhark_mc_task_76867_task.sched = STATIC;
        futhark_mc_task_76867_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76868_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76867_task);
        
        if (futhark_mc_segred_task_76868_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70606.mem)[gtid_68345] = defunc_2_reduce_res_75735;
        ((float *) mem_70609.mem)[gtid_68345] = defunc_2_reduce_res_75736;
    }
    
  cleanup:
    { }
    free(mem_75661);
    free(mem_75662);
    free(mem_75680);
    free(mem_75681);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76844_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76844_end -
                 futhark_mc_segmap_parloop_76844_start;
        
        ctx->futhark_mc_segmap_parloop_76844_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76844_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76844_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76842(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68344 = tid;
    int num_tasks_76002 = info.nsubtasks;
    struct futhark_mc_task_76834 *futhark_mc_task_76834 =
                                 (struct futhark_mc_task_76834 *) args;
    struct futhark_context *ctx = futhark_mc_task_76834->ctx;
    uint64_t futhark_mc_segmap_nested_task_76842_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76842_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76834->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76834->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76834->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76834->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76834->free_i_64078;
    bool x_64079 = futhark_mc_task_76834->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76834->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76834->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76834->free_m_64090;
    int64_t last_res_68562 = futhark_mc_task_76834->free_last_res_68562;
    int64_t min_arg_68574 = futhark_mc_task_76834->free_min_arg_68574;
    float max_res_68578 = futhark_mc_task_76834->free_max_res_68578;
    struct memblock mem_70516 = {.desc ="mem_70516", .mem =
                                 futhark_mc_task_76834->free_mem_70516, .size =
                                 0, .references =NULL};
    struct memblock mem_70519 = {.desc ="mem_70519", .mem =
                                 futhark_mc_task_76834->free_mem_70519, .size =
                                 0, .references =NULL};
    struct memblock mem_70522 = {.desc ="mem_70522", .mem =
                                 futhark_mc_task_76834->free_mem_70522, .size =
                                 0, .references =NULL};
    struct memblock mem_70525 = {.desc ="mem_70525", .mem =
                                 futhark_mc_task_76834->free_mem_70525, .size =
                                 0, .references =NULL};
    struct memblock mem_70528 = {.desc ="mem_70528", .mem =
                                 futhark_mc_task_76834->free_mem_70528, .size =
                                 0, .references =NULL};
    int64_t bytes_70529 = futhark_mc_task_76834->free_bytes_70529;
    struct memblock mem_70531 = {.desc ="mem_70531", .mem =
                                 futhark_mc_task_76834->free_mem_70531, .size =
                                 0, .references =NULL};
    struct memblock mem_70606 = {.desc ="mem_70606", .mem =
                                 futhark_mc_task_76834->free_mem_70606, .size =
                                 0, .references =NULL};
    struct memblock mem_70609 = {.desc ="mem_70609", .mem =
                                 futhark_mc_task_76834->free_mem_70609, .size =
                                 0, .references =NULL};
    int64_t iter_76143;
    struct futhark_mc_segmap_parloop_struct_76843
    futhark_mc_segmap_parloop_struct_76843;
    
    futhark_mc_segmap_parloop_struct_76843.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76843.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76843.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76843.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76843.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76843.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76843.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76843.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76843.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76843.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76843.free_last_res_68562 = last_res_68562;
    futhark_mc_segmap_parloop_struct_76843.free_min_arg_68574 = min_arg_68574;
    futhark_mc_segmap_parloop_struct_76843.free_max_res_68578 = max_res_68578;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70516 = mem_70516.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70519 = mem_70519.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70522 = mem_70522.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70525 = mem_70525.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70528 = mem_70528.mem;
    futhark_mc_segmap_parloop_struct_76843.free_bytes_70529 = bytes_70529;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70531 = mem_70531.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70606 = mem_70606.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70609 = mem_70609.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76844_task;
    
    futhark_mc_segmap_parloop_76844_task.name =
        "futhark_mc_segmap_parloop_76844";
    futhark_mc_segmap_parloop_76844_task.fn = futhark_mc_segmap_parloop_76844;
    futhark_mc_segmap_parloop_76844_task.args =
        &futhark_mc_segmap_parloop_struct_76843;
    futhark_mc_segmap_parloop_76844_task.iterations = iterations;
    futhark_mc_segmap_parloop_76844_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76844_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76844_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76844_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76844_task);
    
    if (futhark_mc_segmap_parloop_76844_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76844_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76844_total_end -
                 futhark_mc_segmap_parloop_76844_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76842_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76842_end -
                 futhark_mc_segmap_nested_task_76842_start;
        
        ctx->futhark_mc_segmap_nested_task_76842_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76842_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76842_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76805(void *args, int64_t start,
                                           int64_t end, int flat_tid_68332,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76804
    *futhark_mc_segmap_parloop_struct_76804 =
    (struct futhark_mc_segmap_parloop_struct_76804 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76804->ctx;
    uint64_t futhark_mc_segmap_parloop_76805_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76805_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76804->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76804->free_n_64064;
    int64_t q_64066 = futhark_mc_segmap_parloop_struct_76804->free_q_64066;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76804->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76804->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76804->free_i_64078;
    bool x_64079 = futhark_mc_segmap_parloop_struct_76804->free_x_64079;
    int64_t min_res_64084 =
            futhark_mc_segmap_parloop_struct_76804->free_min_res_64084;
    bool empty_slice_64089 =
         futhark_mc_segmap_parloop_struct_76804->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_segmap_parloop_struct_76804->free_m_64090;
    float i64_res_64091 =
          futhark_mc_segmap_parloop_struct_76804->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_segmap_parloop_struct_76804->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70511 =
            futhark_mc_segmap_parloop_struct_76804->free_bytes_70511;
    int64_t bytes_70514 =
            futhark_mc_segmap_parloop_struct_76804->free_bytes_70514;
    int64_t bytes_70529 =
            futhark_mc_segmap_parloop_struct_76804->free_bytes_70529;
    int64_t bytes_70604 =
            futhark_mc_segmap_parloop_struct_76804->free_bytes_70604;
    struct memblock mem_70808 = {.desc ="mem_70808", .mem =
                                 futhark_mc_segmap_parloop_struct_76804->free_mem_70808,
                                 .size =0, .references =NULL};
    struct memblock mem_70812 = {.desc ="mem_70812", .mem =
                                 futhark_mc_segmap_parloop_struct_76804->free_mem_70812,
                                 .size =0, .references =NULL};
    size_t mem_70513_cached_sizze_76806 = 0;
    char *mem_70513 = NULL;
    size_t mem_70516_cached_sizze_76807 = 0;
    char *mem_70516 = NULL;
    size_t mem_70519_cached_sizze_76808 = 0;
    char *mem_70519 = NULL;
    size_t mem_70522_cached_sizze_76809 = 0;
    char *mem_70522 = NULL;
    size_t mem_70525_cached_sizze_76810 = 0;
    char *mem_70525 = NULL;
    size_t mem_70528_cached_sizze_76811 = 0;
    char *mem_70528 = NULL;
    size_t mem_70531_cached_sizze_76812 = 0;
    char *mem_70531 = NULL;
    size_t mem_70606_cached_sizze_76813 = 0;
    char *mem_70606 = NULL;
    size_t mem_70609_cached_sizze_76814 = 0;
    char *mem_70609 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75541 = start;
    
    if (mem_70513_cached_sizze_76806 < (size_t) bytes_70511) {
        mem_70513 = realloc(mem_70513, bytes_70511);
        mem_70513_cached_sizze_76806 = bytes_70511;
    }
    if (mem_70516_cached_sizze_76807 < (size_t) bytes_70514) {
        mem_70516 = realloc(mem_70516, bytes_70514);
        mem_70516_cached_sizze_76807 = bytes_70514;
    }
    if (mem_70519_cached_sizze_76808 < (size_t) bytes_70511) {
        mem_70519 = realloc(mem_70519, bytes_70511);
        mem_70519_cached_sizze_76808 = bytes_70511;
    }
    if (mem_70522_cached_sizze_76809 < (size_t) bytes_70514) {
        mem_70522 = realloc(mem_70522, bytes_70514);
        mem_70522_cached_sizze_76809 = bytes_70514;
    }
    if (mem_70525_cached_sizze_76810 < (size_t) bytes_70511) {
        mem_70525 = realloc(mem_70525, bytes_70511);
        mem_70525_cached_sizze_76810 = bytes_70511;
    }
    if (mem_70528_cached_sizze_76811 < (size_t) bytes_70511) {
        mem_70528 = realloc(mem_70528, bytes_70511);
        mem_70528_cached_sizze_76811 = bytes_70511;
    }
    if (mem_70531_cached_sizze_76812 < (size_t) bytes_70529) {
        mem_70531 = realloc(mem_70531, bytes_70529);
        mem_70531_cached_sizze_76812 = bytes_70529;
    }
    if (mem_70606_cached_sizze_76813 < (size_t) bytes_70604) {
        mem_70606 = realloc(mem_70606, bytes_70604);
        mem_70606_cached_sizze_76813 = bytes_70604;
    }
    if (mem_70609_cached_sizze_76814 < (size_t) bytes_70604) {
        mem_70609 = realloc(mem_70609, bytes_70604);
        mem_70609_cached_sizze_76814 = bytes_70604;
    }
    for (; iter_75541 < end; iter_75541++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75970 = m_64063;
        int64_t gtid_68333 = iter_75541;
        int64_t remnant_75971 = iter_75541 - gtid_68333;
        int64_t flat_tid_68334 = (int64_t) 0;
        int32_t num_tasks_75972;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76815 futhark_mc_task_76815;
        
        futhark_mc_task_76815.ctx = ctx;
        futhark_mc_task_76815.free_n_64064 = n_64064;
        futhark_mc_task_76815.free_gtid_68333 = gtid_68333;
        futhark_mc_task_76815.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76815.free_mem_70513 = mem_70513;
        
        struct scheduler_segop futhark_mc_task_76815_task;
        
        futhark_mc_task_76815_task.args = &futhark_mc_task_76815;
        futhark_mc_task_76815_task.top_level_fn = futhark_mc_segscan_task_76816;
        futhark_mc_task_76815_task.name = "futhark_mc_segscan_task_76816";
        futhark_mc_task_76815_task.iterations = n_64064;
        futhark_mc_task_76815_task.task_time =
            &ctx->futhark_mc_segscan_task_76816_total_time;
        futhark_mc_task_76815_task.task_iter =
            &ctx->futhark_mc_segscan_task_76816_total_iter;
        futhark_mc_task_76815_task.sched = STATIC;
        futhark_mc_task_76815_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76816_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76815_task);
        
        if (futhark_mc_segscan_task_76816_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_68562 = ((int64_t *) mem_70513)[i_64078];
        
        for (int64_t i_75986 = 0; i_75986 < n_64064; i_75986++) {
            ((float *) mem_70516)[i_75986] = 0.0F;
        }
        for (int64_t i_75987 = 0; i_75987 < n_64064; i_75987++) {
            ((int64_t *) mem_70519)[i_75987] = (int64_t) -1;
        }
        
        int64_t flat_tid_68336 = (int64_t) 0;
        int32_t num_tasks_75988;
        struct futhark_mc_task_76822 futhark_mc_task_76822;
        
        futhark_mc_task_76822.ctx = ctx;
        futhark_mc_task_76822.free_n_64064 = n_64064;
        futhark_mc_task_76822.free_gtid_68333 = gtid_68333;
        futhark_mc_task_76822.free_Y_mem_69593 = Y_mem_69593.mem;
        futhark_mc_task_76822.free_mem_70513 = mem_70513;
        futhark_mc_task_76822.free_mem_70516 = mem_70516;
        futhark_mc_task_76822.free_mem_70519 = mem_70519;
        
        struct scheduler_segop futhark_mc_task_76822_task;
        
        futhark_mc_task_76822_task.args = &futhark_mc_task_76822;
        futhark_mc_task_76822_task.top_level_fn = futhark_mc_segmap_task_76823;
        futhark_mc_task_76822_task.name = "futhark_mc_segmap_task_76823";
        futhark_mc_task_76822_task.iterations = n_64064;
        futhark_mc_task_76822_task.task_time =
            &ctx->futhark_mc_segmap_task_76823_total_time;
        futhark_mc_task_76822_task.task_iter =
            &ctx->futhark_mc_segmap_task_76823_total_iter;
        futhark_mc_task_76822_task.sched = STATIC;
        futhark_mc_task_76822_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76823_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76822_task);
        
        if (futhark_mc_segmap_task_76823_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_68574 = sub64(last_res_68562, min_res_64084);
        float i64_res_68575 = sitofp_i64_f32(last_res_68562);
        float x_68576 = i64_res_64091 - i64_res_68575;
        float max_arg_68577 = x_68576 / 2.0F;
        float max_res_68578 = fmax32(0.0F, max_arg_68577);
        int64_t flat_tid_68338 = (int64_t) 0;
        int32_t num_tasks_75994;
        struct futhark_mc_task_76826 futhark_mc_task_76826;
        
        futhark_mc_task_76826.ctx = ctx;
        futhark_mc_task_76826.free_n_64064 = n_64064;
        futhark_mc_task_76826.free_mem_70519 = mem_70519;
        futhark_mc_task_76826.free_mem_70522 = mem_70522;
        futhark_mc_task_76826.free_mem_70525 = mem_70525;
        futhark_mc_task_76826.free_mem_70528 = mem_70528;
        
        struct scheduler_segop futhark_mc_task_76826_task;
        
        futhark_mc_task_76826_task.args = &futhark_mc_task_76826;
        futhark_mc_task_76826_task.top_level_fn = futhark_mc_segmap_task_76827;
        futhark_mc_task_76826_task.name = "futhark_mc_segmap_task_76827";
        futhark_mc_task_76826_task.iterations = n_64064;
        futhark_mc_task_76826_task.task_time =
            &ctx->futhark_mc_segmap_task_76827_total_time;
        futhark_mc_task_76826_task.task_iter =
            &ctx->futhark_mc_segmap_task_76827_total_iter;
        futhark_mc_task_76826_task.sched = STATIC;
        futhark_mc_task_76826_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76827_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76826_task);
        
        if (futhark_mc_segmap_task_76827_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_68340 = (int64_t) 0;
        int32_t num_tasks_75998;
        struct futhark_mc_task_76830 futhark_mc_task_76830;
        
        futhark_mc_task_76830.ctx = ctx;
        futhark_mc_task_76830.free_q_64066 = q_64066;
        futhark_mc_task_76830.free_last_res_68562 = last_res_68562;
        futhark_mc_task_76830.free_mem_70531 = mem_70531;
        
        struct scheduler_segop futhark_mc_task_76830_task;
        
        futhark_mc_task_76830_task.args = &futhark_mc_task_76830;
        futhark_mc_task_76830_task.top_level_fn = futhark_mc_segmap_task_76831;
        futhark_mc_task_76830_task.name = "futhark_mc_segmap_task_76831";
        futhark_mc_task_76830_task.iterations = q_64066;
        futhark_mc_task_76830_task.task_time =
            &ctx->futhark_mc_segmap_task_76831_total_time;
        futhark_mc_task_76830_task.task_iter =
            &ctx->futhark_mc_segmap_task_76831_total_iter;
        futhark_mc_task_76830_task.sched = STATIC;
        futhark_mc_task_76830_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76831_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76830_task);
        
        if (futhark_mc_segmap_task_76831_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_68342 = (int64_t) 0;
        int32_t num_tasks_76002;
        int64_t flat_tid_68344 = (int64_t) 0;
        struct futhark_mc_task_76834 futhark_mc_task_76834;
        
        futhark_mc_task_76834.ctx = ctx;
        futhark_mc_task_76834.free_n_64064 = n_64064;
        futhark_mc_task_76834.free_q_64066 = q_64066;
        futhark_mc_task_76834.free_jump_64068 = jump_64068;
        futhark_mc_task_76834.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76834.free_i_64078 = i_64078;
        futhark_mc_task_76834.free_x_64079 = x_64079;
        futhark_mc_task_76834.free_min_res_64084 = min_res_64084;
        futhark_mc_task_76834.free_empty_slice_64089 = empty_slice_64089;
        futhark_mc_task_76834.free_m_64090 = m_64090;
        futhark_mc_task_76834.free_last_res_68562 = last_res_68562;
        futhark_mc_task_76834.free_min_arg_68574 = min_arg_68574;
        futhark_mc_task_76834.free_max_res_68578 = max_res_68578;
        futhark_mc_task_76834.free_mem_70516 = mem_70516;
        futhark_mc_task_76834.free_mem_70519 = mem_70519;
        futhark_mc_task_76834.free_mem_70522 = mem_70522;
        futhark_mc_task_76834.free_mem_70525 = mem_70525;
        futhark_mc_task_76834.free_mem_70528 = mem_70528;
        futhark_mc_task_76834.free_bytes_70529 = bytes_70529;
        futhark_mc_task_76834.free_mem_70531 = mem_70531;
        futhark_mc_task_76834.free_mem_70606 = mem_70606;
        futhark_mc_task_76834.free_mem_70609 = mem_70609;
        
        struct scheduler_segop futhark_mc_task_76834_task;
        
        futhark_mc_task_76834_task.args = &futhark_mc_task_76834;
        futhark_mc_task_76834_task.top_level_fn = futhark_mc_segmap_task_76835;
        futhark_mc_task_76834_task.name = "futhark_mc_segmap_task_76835";
        futhark_mc_task_76834_task.iterations = n_m_64072;
        futhark_mc_task_76834_task.task_time =
            &ctx->futhark_mc_segmap_task_76835_total_time;
        futhark_mc_task_76834_task.task_iter =
            &ctx->futhark_mc_segmap_task_76835_total_iter;
        futhark_mc_task_76834_task.sched = DYNAMIC;
        futhark_mc_task_76834_task.nested_fn =
            futhark_mc_segmap_nested_task_76842;
        
        int futhark_mc_segmap_task_76835_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76834_task);
        
        if (futhark_mc_segmap_task_76835_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70808.mem + gtid_68333 * n_m_64072 * (int64_t) 4,
                mem_70606 + (int64_t) 0, n_m_64072 * (int64_t) 4);
        memmove(mem_70812.mem + gtid_68333 * n_m_64072 * (int64_t) 4,
                mem_70609 + (int64_t) 0, n_m_64072 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70513);
    free(mem_70516);
    free(mem_70519);
    free(mem_70522);
    free(mem_70525);
    free(mem_70528);
    free(mem_70531);
    free(mem_70606);
    free(mem_70609);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76805_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76805_end -
                 futhark_mc_segmap_parloop_76805_start;
        
        ctx->futhark_mc_segmap_parloop_76805_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76805_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76805_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76803(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68332 = tid;
    int num_tasks_75259 = info.nsubtasks;
    struct futhark_mc_task_76786 *futhark_mc_task_76786 =
                                 (struct futhark_mc_task_76786 *) args;
    struct futhark_context *ctx = futhark_mc_task_76786->ctx;
    uint64_t futhark_mc_segmap_nested_task_76803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76803_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76786->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76786->free_n_64064;
    int64_t q_64066 = futhark_mc_task_76786->free_q_64066;
    int64_t jump_64068 = futhark_mc_task_76786->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76786->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76786->free_i_64078;
    bool x_64079 = futhark_mc_task_76786->free_x_64079;
    int64_t min_res_64084 = futhark_mc_task_76786->free_min_res_64084;
    bool empty_slice_64089 = futhark_mc_task_76786->free_empty_slice_64089;
    int64_t m_64090 = futhark_mc_task_76786->free_m_64090;
    float i64_res_64091 = futhark_mc_task_76786->free_i64_res_64091;
    struct memblock Y_mem_69593 = {.desc ="Y_mem_69593", .mem =
                                   futhark_mc_task_76786->free_Y_mem_69593,
                                   .size =0, .references =NULL};
    int64_t bytes_70511 = futhark_mc_task_76786->free_bytes_70511;
    int64_t bytes_70514 = futhark_mc_task_76786->free_bytes_70514;
    int64_t bytes_70529 = futhark_mc_task_76786->free_bytes_70529;
    int64_t bytes_70604 = futhark_mc_task_76786->free_bytes_70604;
    struct memblock mem_70808 = {.desc ="mem_70808", .mem =
                                 futhark_mc_task_76786->free_mem_70808, .size =
                                 0, .references =NULL};
    struct memblock mem_70812 = {.desc ="mem_70812", .mem =
                                 futhark_mc_task_76786->free_mem_70812, .size =
                                 0, .references =NULL};
    int64_t iter_75541;
    struct futhark_mc_segmap_parloop_struct_76804
    futhark_mc_segmap_parloop_struct_76804;
    
    futhark_mc_segmap_parloop_struct_76804.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76804.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76804.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76804.free_q_64066 = q_64066;
    futhark_mc_segmap_parloop_struct_76804.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76804.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76804.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76804.free_x_64079 = x_64079;
    futhark_mc_segmap_parloop_struct_76804.free_min_res_64084 = min_res_64084;
    futhark_mc_segmap_parloop_struct_76804.free_empty_slice_64089 =
        empty_slice_64089;
    futhark_mc_segmap_parloop_struct_76804.free_m_64090 = m_64090;
    futhark_mc_segmap_parloop_struct_76804.free_i64_res_64091 = i64_res_64091;
    futhark_mc_segmap_parloop_struct_76804.free_Y_mem_69593 = Y_mem_69593.mem;
    futhark_mc_segmap_parloop_struct_76804.free_bytes_70511 = bytes_70511;
    futhark_mc_segmap_parloop_struct_76804.free_bytes_70514 = bytes_70514;
    futhark_mc_segmap_parloop_struct_76804.free_bytes_70529 = bytes_70529;
    futhark_mc_segmap_parloop_struct_76804.free_bytes_70604 = bytes_70604;
    futhark_mc_segmap_parloop_struct_76804.free_mem_70808 = mem_70808.mem;
    futhark_mc_segmap_parloop_struct_76804.free_mem_70812 = mem_70812.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76805_task;
    
    futhark_mc_segmap_parloop_76805_task.name =
        "futhark_mc_segmap_parloop_76805";
    futhark_mc_segmap_parloop_76805_task.fn = futhark_mc_segmap_parloop_76805;
    futhark_mc_segmap_parloop_76805_task.args =
        &futhark_mc_segmap_parloop_struct_76804;
    futhark_mc_segmap_parloop_76805_task.iterations = iterations;
    futhark_mc_segmap_parloop_76805_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76805_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76805_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76805_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76805_task);
    
    if (futhark_mc_segmap_parloop_76805_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76805_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76805_total_end -
                 futhark_mc_segmap_parloop_76805_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76805_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76805_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76805_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76803_end -
                 futhark_mc_segmap_nested_task_76803_start;
        
        ctx->futhark_mc_segmap_nested_task_76803_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76803_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76873 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    int64_t free_y_65498;
    char *free_ext_mem_70817;
    char *free_ext_mem_70818;
    int64_t free_bytes_70819;
    char *free_mem_70840;
};
struct futhark_mc_segmap_parloop_struct_76875 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    int64_t free_y_65498;
    char *free_ext_mem_70817;
    char *free_ext_mem_70818;
    int64_t free_bytes_70819;
    char *free_mem_70840;
};
static int futhark_mc_segmap_parloop_76876(void *args, int64_t start,
                                           int64_t end, int flat_tid_68991,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76875
    *futhark_mc_segmap_parloop_struct_76875 =
    (struct futhark_mc_segmap_parloop_struct_76875 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76875->ctx;
    uint64_t futhark_mc_segmap_parloop_76876_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76876_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76875->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76875->free_n_64064;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76875->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76875->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76875->free_i_64078;
    int64_t y_65498 = futhark_mc_segmap_parloop_struct_76875->free_y_65498;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_segmap_parloop_struct_76875->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_segmap_parloop_struct_76875->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    int64_t bytes_70819 =
            futhark_mc_segmap_parloop_struct_76875->free_bytes_70819;
    struct memblock mem_70840 = {.desc ="mem_70840", .mem =
                                 futhark_mc_segmap_parloop_struct_76875->free_mem_70840,
                                 .size =0, .references =NULL};
    size_t mem_70824_cached_sizze_76877 = 0;
    char *mem_70824 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76332 = start;
    
    if (mem_70824_cached_sizze_76877 < (size_t) bytes_70819) {
        mem_70824 = realloc(mem_70824, bytes_70819);
        mem_70824_cached_sizze_76877 = bytes_70819;
    }
    for (; iter_76332 < end; iter_76332++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76382 = m_64063;
        int64_t gtid_68992 = iter_76332;
        int64_t remnant_76383 = iter_76332 - gtid_68992;
        
        for (int64_t i_76333 = 0; i_76333 < n_64064; i_76333++) {
            int64_t m_v_76335 = sdiv64(i_76333, jump_64068);
            bool cond_76336 = m_v_76335 == y_65498;
            int64_t j_76337;
            
            if (cond_76336) {
                int64_t j_t_res_76338 = sub64(m_v_76335, (int64_t) 1);
                
                j_76337 = j_t_res_76338;
            } else {
                j_76337 = m_v_76335;
            }
            
            int64_t min_arg_76339 = mul64(jump_64068, j_76337);
            int64_t min_res_76340 = smin64(i_64078, min_arg_76339);
            int64_t defunc_0_m_fun_arg_76341 = add64((int64_t) 1, j_76337);
            int64_t min_arg_76342 = mul64(jump_64068, defunc_0_m_fun_arg_76341);
            int64_t min_res_76343 = smin64(i_64078, min_arg_76342);
            int64_t i64_arg_76344 = sub64(min_res_76343, min_res_76340);
            float i64_res_76345 = sitofp_i64_f32(i64_arg_76344);
            int64_t i64_arg_76346 = sub64(i_76333, min_res_76340);
            float i64_res_76347 = sitofp_i64_f32(i64_arg_76346);
            float u_76348 = i64_res_76347 / i64_res_76345;
            float u2_76349 = u_76348 * u_76348;
            float u3_76350 = u_76348 * u2_76349;
            float x_76351 = 2.0F * u3_76350;
            float y_76352 = 3.0F * u2_76349;
            float x_76353 = x_76351 - y_76352;
            float x_76354 = 1.0F + x_76353;
            bool x_76355 = sle64((int64_t) 0, j_76337);
            bool y_76356 = slt64(j_76337, n_m_64072);
            bool bounds_check_76357 = x_76355 && y_76356;
            bool index_certs_76358;
            
            if (!bounds_check_76357) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_76337,
                              "] out of bounds for array of shape [",
                              (long long) n_m_64072, "].",
                              "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            float y_76359 = ((float *) ext_mem_70818.mem)[gtid_68992 *
                                                          n_m_64072 + j_76337];
            float x_76360 = x_76354 * y_76359;
            float x_76361 = y_76352 - x_76351;
            bool x_76362 = sle64((int64_t) 0, defunc_0_m_fun_arg_76341);
            bool y_76363 = slt64(defunc_0_m_fun_arg_76341, n_m_64072);
            bool bounds_check_76364 = x_76362 && y_76363;
            bool index_certs_76365;
            
            if (!bounds_check_76364) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_76341,
                              "] out of bounds for array of shape [",
                              (long long) n_m_64072, "].",
                              "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
                return 1;
            }
            
            float y_76366 = ((float *) ext_mem_70818.mem)[gtid_68992 *
                                                          n_m_64072 +
                                                          defunc_0_m_fun_arg_76341];
            float y_76367 = x_76361 * y_76366;
            float x_76368 = x_76360 + y_76367;
            float y_76369 = 2.0F * u2_76349;
            float x_76370 = u3_76350 - y_76369;
            float x_76371 = u_76348 + x_76370;
            float y_76372 = ((float *) ext_mem_70817.mem)[gtid_68992 *
                                                          n_m_64072 + j_76337];
            float x_76373 = x_76371 * y_76372;
            float y_76374 = i64_res_76345 * x_76373;
            float x_76375 = x_76368 + y_76374;
            float x_76376 = u3_76350 - u2_76349;
            float y_76377 = ((float *) ext_mem_70817.mem)[gtid_68992 *
                                                          n_m_64072 +
                                                          defunc_0_m_fun_arg_76341];
            float x_76378 = x_76376 * y_76377;
            float y_76379 = i64_res_76345 * x_76378;
            float defunc_0_f_res_76380 = x_76375 + y_76379;
            
            ((float *) mem_70824)[i_76333] = defunc_0_f_res_76380;
        }
        memmove(mem_70840.mem + gtid_68992 * n_64064 * (int64_t) 4, mem_70824 +
                (int64_t) 0, n_64064 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70824);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76876_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76876_end -
                 futhark_mc_segmap_parloop_76876_start;
        
        ctx->futhark_mc_segmap_parloop_76876_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76876_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76876_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76874(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68991 = tid;
    int num_tasks_76331 = info.nsubtasks;
    struct futhark_mc_task_76873 *futhark_mc_task_76873 =
                                 (struct futhark_mc_task_76873 *) args;
    struct futhark_context *ctx = futhark_mc_task_76873->ctx;
    uint64_t futhark_mc_segmap_task_76874_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76874_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76873->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76873->free_n_64064;
    int64_t jump_64068 = futhark_mc_task_76873->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76873->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76873->free_i_64078;
    int64_t y_65498 = futhark_mc_task_76873->free_y_65498;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_task_76873->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_task_76873->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    int64_t bytes_70819 = futhark_mc_task_76873->free_bytes_70819;
    struct memblock mem_70840 = {.desc ="mem_70840", .mem =
                                 futhark_mc_task_76873->free_mem_70840, .size =
                                 0, .references =NULL};
    int64_t iter_76332;
    struct futhark_mc_segmap_parloop_struct_76875
    futhark_mc_segmap_parloop_struct_76875;
    
    futhark_mc_segmap_parloop_struct_76875.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76875.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76875.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76875.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76875.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76875.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76875.free_y_65498 = y_65498;
    futhark_mc_segmap_parloop_struct_76875.free_ext_mem_70817 =
        ext_mem_70817.mem;
    futhark_mc_segmap_parloop_struct_76875.free_ext_mem_70818 =
        ext_mem_70818.mem;
    futhark_mc_segmap_parloop_struct_76875.free_bytes_70819 = bytes_70819;
    futhark_mc_segmap_parloop_struct_76875.free_mem_70840 = mem_70840.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76876_task;
    
    futhark_mc_segmap_parloop_76876_task.name =
        "futhark_mc_segmap_parloop_76876";
    futhark_mc_segmap_parloop_76876_task.fn = futhark_mc_segmap_parloop_76876;
    futhark_mc_segmap_parloop_76876_task.args =
        &futhark_mc_segmap_parloop_struct_76875;
    futhark_mc_segmap_parloop_76876_task.iterations = iterations;
    futhark_mc_segmap_parloop_76876_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76876_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76876_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76876_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76876_task);
    
    if (futhark_mc_segmap_parloop_76876_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76876_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76876_total_end -
                 futhark_mc_segmap_parloop_76876_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76876_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76876_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76876_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76874_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76874_end -
                 futhark_mc_segmap_task_76874_start;
        
        ctx->futhark_mc_segmap_task_76874_runs[tid]++;
        ctx->futhark_mc_segmap_task_76874_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76874_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76879 {
    struct futhark_context *ctx;
    int64_t free_m_64063;
    int64_t free_n_64064;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    int64_t free_y_65498;
    char *free_ext_mem_70817;
    char *free_ext_mem_70818;
    int64_t free_bytes_70819;
    char *free_mem_70840;
};
struct futhark_mc_task_76882 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    int64_t free_y_65498;
    int64_t free_gtid_68994;
    char *free_ext_mem_70817;
    char *free_ext_mem_70818;
    char *free_mem_70821;
};
struct futhark_mc_segmap_parloop_struct_76884 {
    struct futhark_context *ctx;
    int64_t free_n_64064;
    int64_t free_jump_64068;
    int64_t free_n_m_64072;
    int64_t free_i_64078;
    int64_t free_y_65498;
    int64_t free_gtid_68994;
    char *free_ext_mem_70817;
    char *free_ext_mem_70818;
    char *free_mem_70821;
};
static int futhark_mc_segmap_parloop_76885(void *args, int64_t start,
                                           int64_t end, int flat_tid_68995,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76884
    *futhark_mc_segmap_parloop_struct_76884 =
    (struct futhark_mc_segmap_parloop_struct_76884 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76884->ctx;
    uint64_t futhark_mc_segmap_parloop_76885_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76885_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76884->free_n_64064;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76884->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76884->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76884->free_i_64078;
    int64_t y_65498 = futhark_mc_segmap_parloop_struct_76884->free_y_65498;
    int64_t gtid_68994 =
            futhark_mc_segmap_parloop_struct_76884->free_gtid_68994;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_segmap_parloop_struct_76884->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_segmap_parloop_struct_76884->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    struct memblock mem_70821 = {.desc ="mem_70821", .mem =
                                 futhark_mc_segmap_parloop_struct_76884->free_mem_70821,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76435 = start;
    
    for (; iter_76435 < end; iter_76435++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76437 = n_64064;
        int64_t gtid_68996 = iter_76435;
        int64_t remnant_76438 = iter_76435 - gtid_68996;
        int64_t m_v_76386 = sdiv64(gtid_68996, jump_64068);
        bool cond_76387 = m_v_76386 == y_65498;
        int64_t j_76388;
        
        if (cond_76387) {
            int64_t j_t_res_76436 = sub64(m_v_76386, (int64_t) 1);
            
            j_76388 = j_t_res_76436;
        } else {
            j_76388 = m_v_76386;
        }
        
        int64_t min_arg_76390 = mul64(jump_64068, j_76388);
        int64_t min_res_76391 = smin64(i_64078, min_arg_76390);
        int64_t defunc_0_m_fun_arg_76392 = add64((int64_t) 1, j_76388);
        int64_t min_arg_76393 = mul64(jump_64068, defunc_0_m_fun_arg_76392);
        int64_t min_res_76394 = smin64(i_64078, min_arg_76393);
        int64_t i64_arg_76395 = sub64(min_res_76394, min_res_76391);
        float i64_res_76396 = sitofp_i64_f32(i64_arg_76395);
        int64_t i64_arg_76397 = sub64(gtid_68996, min_res_76391);
        float i64_res_76398 = sitofp_i64_f32(i64_arg_76397);
        float u_76399 = i64_res_76398 / i64_res_76396;
        float u2_76400 = u_76399 * u_76399;
        float u3_76401 = u_76399 * u2_76400;
        float x_76402 = 2.0F * u3_76401;
        float y_76403 = 3.0F * u2_76400;
        float x_76404 = x_76402 - y_76403;
        float x_76405 = 1.0F + x_76404;
        bool x_76406 = sle64((int64_t) 0, j_76388);
        bool y_76407 = slt64(j_76388, n_m_64072);
        bool bounds_check_76408 = x_76406 && y_76407;
        bool index_certs_76409;
        
        if (!bounds_check_76408) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_76388,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_64072, "].",
                                   "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        float y_76410 = ((float *) ext_mem_70818.mem)[gtid_68994 * n_m_64072 +
                                                      j_76388];
        float x_76411 = x_76405 * y_76410;
        float x_76412 = y_76403 - x_76402;
        bool x_76413 = sle64((int64_t) 0, defunc_0_m_fun_arg_76392);
        bool y_76414 = slt64(defunc_0_m_fun_arg_76392, n_m_64072);
        bool bounds_check_76415 = x_76413 && y_76414;
        bool index_certs_76416;
        
        if (!bounds_check_76415) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_76392,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_64072, "].",
                                   "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
            return 1;
        }
        
        float y_76417 = ((float *) ext_mem_70818.mem)[gtid_68994 * n_m_64072 +
                                                      defunc_0_m_fun_arg_76392];
        float y_76418 = x_76412 * y_76417;
        float x_76419 = x_76411 + y_76418;
        float y_76420 = 2.0F * u2_76400;
        float x_76421 = u3_76401 - y_76420;
        float x_76422 = u_76399 + x_76421;
        float y_76423 = ((float *) ext_mem_70817.mem)[gtid_68994 * n_m_64072 +
                                                      j_76388];
        float x_76424 = x_76422 * y_76423;
        float y_76425 = i64_res_76396 * x_76424;
        float x_76426 = x_76419 + y_76425;
        float x_76427 = u3_76401 - u2_76400;
        float y_76428 = ((float *) ext_mem_70817.mem)[gtid_68994 * n_m_64072 +
                                                      defunc_0_m_fun_arg_76392];
        float x_76429 = x_76427 * y_76428;
        float y_76430 = i64_res_76396 * x_76429;
        float defunc_0_f_res_76431 = x_76426 + y_76430;
        
        ((float *) mem_70821.mem)[gtid_68996] = defunc_0_f_res_76431;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76885_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76885_end -
                 futhark_mc_segmap_parloop_76885_start;
        
        ctx->futhark_mc_segmap_parloop_76885_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76885_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76885_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76883(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68995 = tid;
    int num_tasks_76434 = info.nsubtasks;
    struct futhark_mc_task_76882 *futhark_mc_task_76882 =
                                 (struct futhark_mc_task_76882 *) args;
    struct futhark_context *ctx = futhark_mc_task_76882->ctx;
    uint64_t futhark_mc_segmap_task_76883_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76883_start = get_wall_time();
    
    int64_t n_64064 = futhark_mc_task_76882->free_n_64064;
    int64_t jump_64068 = futhark_mc_task_76882->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76882->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76882->free_i_64078;
    int64_t y_65498 = futhark_mc_task_76882->free_y_65498;
    int64_t gtid_68994 = futhark_mc_task_76882->free_gtid_68994;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_task_76882->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_task_76882->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    struct memblock mem_70821 = {.desc ="mem_70821", .mem =
                                 futhark_mc_task_76882->free_mem_70821, .size =
                                 0, .references =NULL};
    int64_t iter_76435;
    struct futhark_mc_segmap_parloop_struct_76884
    futhark_mc_segmap_parloop_struct_76884;
    
    futhark_mc_segmap_parloop_struct_76884.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76884.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76884.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76884.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76884.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76884.free_y_65498 = y_65498;
    futhark_mc_segmap_parloop_struct_76884.free_gtid_68994 = gtid_68994;
    futhark_mc_segmap_parloop_struct_76884.free_ext_mem_70817 =
        ext_mem_70817.mem;
    futhark_mc_segmap_parloop_struct_76884.free_ext_mem_70818 =
        ext_mem_70818.mem;
    futhark_mc_segmap_parloop_struct_76884.free_mem_70821 = mem_70821.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76885_task;
    
    futhark_mc_segmap_parloop_76885_task.name =
        "futhark_mc_segmap_parloop_76885";
    futhark_mc_segmap_parloop_76885_task.fn = futhark_mc_segmap_parloop_76885;
    futhark_mc_segmap_parloop_76885_task.args =
        &futhark_mc_segmap_parloop_struct_76884;
    futhark_mc_segmap_parloop_76885_task.iterations = iterations;
    futhark_mc_segmap_parloop_76885_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76885_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76885_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76885_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76885_task);
    
    if (futhark_mc_segmap_parloop_76885_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76885_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76885_total_end -
                 futhark_mc_segmap_parloop_76885_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76885_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76885_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76885_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76883_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76883_end -
                 futhark_mc_segmap_task_76883_start;
        
        ctx->futhark_mc_segmap_task_76883_runs[tid]++;
        ctx->futhark_mc_segmap_task_76883_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76883_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76880(void *args, int64_t start,
                                           int64_t end, int flat_tid_68993,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76879
    *futhark_mc_segmap_parloop_struct_76879 =
    (struct futhark_mc_segmap_parloop_struct_76879 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76879->ctx;
    uint64_t futhark_mc_segmap_parloop_76880_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76880_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_segmap_parloop_struct_76879->free_m_64063;
    int64_t n_64064 = futhark_mc_segmap_parloop_struct_76879->free_n_64064;
    int64_t jump_64068 =
            futhark_mc_segmap_parloop_struct_76879->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_segmap_parloop_struct_76879->free_n_m_64072;
    int64_t i_64078 = futhark_mc_segmap_parloop_struct_76879->free_i_64078;
    int64_t y_65498 = futhark_mc_segmap_parloop_struct_76879->free_y_65498;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_segmap_parloop_struct_76879->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_segmap_parloop_struct_76879->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    int64_t bytes_70819 =
            futhark_mc_segmap_parloop_struct_76879->free_bytes_70819;
    struct memblock mem_70840 = {.desc ="mem_70840", .mem =
                                 futhark_mc_segmap_parloop_struct_76879->free_mem_70840,
                                 .size =0, .references =NULL};
    size_t mem_70821_cached_sizze_76881 = 0;
    char *mem_70821 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76385 = start;
    
    if (mem_70821_cached_sizze_76881 < (size_t) bytes_70819) {
        mem_70821 = realloc(mem_70821, bytes_70819);
        mem_70821_cached_sizze_76881 = bytes_70819;
    }
    for (; iter_76385 < end; iter_76385++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76432 = m_64063;
        int64_t gtid_68994 = iter_76385;
        int64_t remnant_76433 = iter_76385 - gtid_68994;
        int64_t flat_tid_68995 = (int64_t) 0;
        int32_t num_tasks_76434;
        struct futhark_mc_task_76882 futhark_mc_task_76882;
        
        futhark_mc_task_76882.ctx = ctx;
        futhark_mc_task_76882.free_n_64064 = n_64064;
        futhark_mc_task_76882.free_jump_64068 = jump_64068;
        futhark_mc_task_76882.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76882.free_i_64078 = i_64078;
        futhark_mc_task_76882.free_y_65498 = y_65498;
        futhark_mc_task_76882.free_gtid_68994 = gtid_68994;
        futhark_mc_task_76882.free_ext_mem_70817 = ext_mem_70817.mem;
        futhark_mc_task_76882.free_ext_mem_70818 = ext_mem_70818.mem;
        futhark_mc_task_76882.free_mem_70821 = mem_70821;
        
        struct scheduler_segop futhark_mc_task_76882_task;
        
        futhark_mc_task_76882_task.args = &futhark_mc_task_76882;
        futhark_mc_task_76882_task.top_level_fn = futhark_mc_segmap_task_76883;
        futhark_mc_task_76882_task.name = "futhark_mc_segmap_task_76883";
        futhark_mc_task_76882_task.iterations = n_64064;
        futhark_mc_task_76882_task.task_time =
            &ctx->futhark_mc_segmap_task_76883_total_time;
        futhark_mc_task_76882_task.task_iter =
            &ctx->futhark_mc_segmap_task_76883_total_iter;
        futhark_mc_task_76882_task.sched = STATIC;
        futhark_mc_task_76882_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76883_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76882_task);
        
        if (futhark_mc_segmap_task_76883_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70840.mem + gtid_68994 * n_64064 * (int64_t) 4, mem_70821 +
                (int64_t) 0, n_64064 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70821);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76880_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76880_end -
                 futhark_mc_segmap_parloop_76880_start;
        
        ctx->futhark_mc_segmap_parloop_76880_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76880_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76880_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76878(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68993 = tid;
    int num_tasks_76331 = info.nsubtasks;
    struct futhark_mc_task_76873 *futhark_mc_task_76873 =
                                 (struct futhark_mc_task_76873 *) args;
    struct futhark_context *ctx = futhark_mc_task_76873->ctx;
    uint64_t futhark_mc_segmap_nested_task_76878_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76878_start = get_wall_time();
    
    int64_t m_64063 = futhark_mc_task_76873->free_m_64063;
    int64_t n_64064 = futhark_mc_task_76873->free_n_64064;
    int64_t jump_64068 = futhark_mc_task_76873->free_jump_64068;
    int64_t n_m_64072 = futhark_mc_task_76873->free_n_m_64072;
    int64_t i_64078 = futhark_mc_task_76873->free_i_64078;
    int64_t y_65498 = futhark_mc_task_76873->free_y_65498;
    struct memblock ext_mem_70817 = {.desc ="ext_mem_70817", .mem =
                                     futhark_mc_task_76873->free_ext_mem_70817,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70818 = {.desc ="ext_mem_70818", .mem =
                                     futhark_mc_task_76873->free_ext_mem_70818,
                                     .size =0, .references =NULL};
    int64_t bytes_70819 = futhark_mc_task_76873->free_bytes_70819;
    struct memblock mem_70840 = {.desc ="mem_70840", .mem =
                                 futhark_mc_task_76873->free_mem_70840, .size =
                                 0, .references =NULL};
    int64_t iter_76385;
    struct futhark_mc_segmap_parloop_struct_76879
    futhark_mc_segmap_parloop_struct_76879;
    
    futhark_mc_segmap_parloop_struct_76879.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76879.free_m_64063 = m_64063;
    futhark_mc_segmap_parloop_struct_76879.free_n_64064 = n_64064;
    futhark_mc_segmap_parloop_struct_76879.free_jump_64068 = jump_64068;
    futhark_mc_segmap_parloop_struct_76879.free_n_m_64072 = n_m_64072;
    futhark_mc_segmap_parloop_struct_76879.free_i_64078 = i_64078;
    futhark_mc_segmap_parloop_struct_76879.free_y_65498 = y_65498;
    futhark_mc_segmap_parloop_struct_76879.free_ext_mem_70817 =
        ext_mem_70817.mem;
    futhark_mc_segmap_parloop_struct_76879.free_ext_mem_70818 =
        ext_mem_70818.mem;
    futhark_mc_segmap_parloop_struct_76879.free_bytes_70819 = bytes_70819;
    futhark_mc_segmap_parloop_struct_76879.free_mem_70840 = mem_70840.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76880_task;
    
    futhark_mc_segmap_parloop_76880_task.name =
        "futhark_mc_segmap_parloop_76880";
    futhark_mc_segmap_parloop_76880_task.fn = futhark_mc_segmap_parloop_76880;
    futhark_mc_segmap_parloop_76880_task.args =
        &futhark_mc_segmap_parloop_struct_76879;
    futhark_mc_segmap_parloop_76880_task.iterations = iterations;
    futhark_mc_segmap_parloop_76880_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76880_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76880_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76880_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76880_task);
    
    if (futhark_mc_segmap_parloop_76880_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76880_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76880_total_end -
                 futhark_mc_segmap_parloop_76880_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76880_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76880_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76880_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76878_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76878_end -
                 futhark_mc_segmap_nested_task_76878_start;
        
        ctx->futhark_mc_segmap_nested_task_76878_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76878_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76878_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_76439,
                             struct memblock Y_mem_69593, int64_t m_64063,
                             int64_t n_64064, int64_t q_64066,
                             int64_t degree_64067, int64_t jump_64068,
                             int64_t jump_threshold_64069,
                             int64_t q_threshold_64070)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_70858;
    
    mem_out_70858.references = NULL;
    
    bool cond_64071 = jump_64068 == (int64_t) 1;
    int64_t n_m_64072;
    
    if (cond_64071) {
        n_m_64072 = n_64064;
    } else {
        bool zzero_64073 = jump_64068 == (int64_t) 0;
        bool nonzzero_64074 = !zzero_64073;
        bool nonzzero_cert_64075;
        
        if (!nonzzero_64074) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:461:38-45\n   #1  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_64076 = sdiv64(n_64064, jump_64068);
        int64_t n_m_f_res_64077 = add64((int64_t) 1, x_64076);
        
        n_m_64072 = n_m_f_res_64077;
    }
    
    int64_t i_64078 = sub64(n_64064, (int64_t) 1);
    bool x_64079 = sle64((int64_t) 0, i_64078);
    bool y_64080 = slt64(i_64078, n_64064);
    bool bounds_check_64081 = x_64079 && y_64080;
    bool index_certs_64082;
    
    if (!bounds_check_64081) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_64078,
                               "] out of bounds for array of shape [",
                               (long long) n_64064, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:466:5-54\n   #3  loess.fut:454:1-494:26\n");
        if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_64084 = smin64(n_64064, q_64066);
    bool bounds_invalid_upwards_64085 = slt64(n_m_64072, (int64_t) 0);
    bool valid_64086 = !bounds_invalid_upwards_64085;
    bool range_valid_c_64087;
    
    if (!valid_64086) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_64072, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:348:3-389:7\n   #3  loess.fut:424:15-58\n   #4  loess.fut:471:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:470:5-472:26\n   #8  loess.fut:454:1-494:26\n");
        if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_64089 = min_res_64084 == (int64_t) 0;
    int64_t m_64090 = sub64(min_res_64084, (int64_t) 1);
    float i64_res_64091 = sitofp_i64_f32(q_64066);
    bool cond_64092 = slt64(jump_64068, jump_threshold_64069);
    bool cond_f_res_64093 = slt64(q_threshold_64070, q_64066);
    bool x_64094 = !cond_64092;
    bool y_64095 = cond_f_res_64093 && x_64094;
    bool cond_64096 = cond_64092 || y_64095;
    struct memblock ext_mem_70818;
    
    ext_mem_70818.references = NULL;
    
    struct memblock ext_mem_70817;
    
    ext_mem_70817.references = NULL;
    if (cond_64096) {
        bool match_lit_64099 = (int64_t) 0 == degree_64067;
        int64_t binop_x_69595 = m_64063 * n_m_64072;
        int64_t binop_y_69596 = (int64_t) 4 * binop_x_69595;
        int64_t bytes_69594 = smax64((int64_t) 0, binop_y_69596);
        struct memblock ext_mem_70089;
        
        ext_mem_70089.references = NULL;
        
        struct memblock ext_mem_70088;
        
        ext_mem_70088.references = NULL;
        if (match_lit_64099) {
            struct memblock mem_69597;
            
            mem_69597.references = NULL;
            if (memblock_alloc(ctx, &mem_69597, bytes_69594, "mem_69597")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_70859 = 0; i_70859 < m_64063; i_70859++) {
                for (int64_t i_70860 = 0; i_70860 < n_m_64072; i_70860++) {
                    ((float *) mem_69597.mem)[i_70859 * n_m_64072 + i_70860] =
                        0.0F;
                }
            }
            
            struct memblock mem_69745;
            
            mem_69745.references = NULL;
            if (memblock_alloc(ctx, &mem_69745, bytes_69594, "mem_69745")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_69599 = (int64_t) 8 * n_64064;
            int64_t bytes_69598 = smax64((int64_t) 0, binop_y_69599);
            int64_t binop_y_69602 = (int64_t) 4 * n_64064;
            int64_t bytes_69601 = smax64((int64_t) 0, binop_y_69602);
            int64_t binop_y_69617 = (int64_t) 4 * q_64066;
            int64_t bytes_69616 = smax64((int64_t) 0, binop_y_69617);
            int64_t binop_y_69620 = (int64_t) 4 * n_m_64072;
            int64_t bytes_69619 = smax64((int64_t) 0, binop_y_69620);
            int64_t flat_tid_65553 = (int64_t) 0;
            int32_t num_tasks_70861;
            int64_t flat_tid_65555 = (int64_t) 0;
            struct futhark_mc_task_76440 futhark_mc_task_76440;
            
            futhark_mc_task_76440.ctx = ctx;
            futhark_mc_task_76440.free_m_64063 = m_64063;
            futhark_mc_task_76440.free_n_64064 = n_64064;
            futhark_mc_task_76440.free_q_64066 = q_64066;
            futhark_mc_task_76440.free_jump_64068 = jump_64068;
            futhark_mc_task_76440.free_n_m_64072 = n_m_64072;
            futhark_mc_task_76440.free_i_64078 = i_64078;
            futhark_mc_task_76440.free_x_64079 = x_64079;
            futhark_mc_task_76440.free_min_res_64084 = min_res_64084;
            futhark_mc_task_76440.free_empty_slice_64089 = empty_slice_64089;
            futhark_mc_task_76440.free_m_64090 = m_64090;
            futhark_mc_task_76440.free_i64_res_64091 = i64_res_64091;
            futhark_mc_task_76440.free_Y_mem_69593 = Y_mem_69593.mem;
            futhark_mc_task_76440.free_bytes_69598 = bytes_69598;
            futhark_mc_task_76440.free_bytes_69601 = bytes_69601;
            futhark_mc_task_76440.free_bytes_69616 = bytes_69616;
            futhark_mc_task_76440.free_bytes_69619 = bytes_69619;
            futhark_mc_task_76440.free_mem_69745 = mem_69745.mem;
            
            struct scheduler_segop futhark_mc_task_76440_task;
            
            futhark_mc_task_76440_task.args = &futhark_mc_task_76440;
            futhark_mc_task_76440_task.top_level_fn =
                futhark_mc_segmap_task_76441;
            futhark_mc_task_76440_task.name = "futhark_mc_segmap_task_76441";
            futhark_mc_task_76440_task.iterations = m_64063;
            futhark_mc_task_76440_task.task_time =
                &ctx->futhark_mc_segmap_task_76441_total_time;
            futhark_mc_task_76440_task.task_iter =
                &ctx->futhark_mc_segmap_task_76441_total_iter;
            futhark_mc_task_76440_task.sched = DYNAMIC;
            futhark_mc_task_76440_task.nested_fn =
                futhark_mc_segmap_nested_task_76452;
            
            int futhark_mc_segmap_task_76441_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_76440_task);
            
            if (futhark_mc_segmap_task_76441_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_70089, &mem_69745, "mem_69745") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70088, &mem_69597, "mem_69597") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_69745, "mem_69745") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_69597, "mem_69597") != 0)
                return 1;
        } else {
            bool match_lit_64301 = (int64_t) 1 == degree_64067;
            struct memblock ext_mem_70087;
            
            ext_mem_70087.references = NULL;
            
            struct memblock ext_mem_70086;
            
            ext_mem_70086.references = NULL;
            if (match_lit_64301) {
                struct memblock mem_69911;
                
                mem_69911.references = NULL;
                if (memblock_alloc(ctx, &mem_69911, bytes_69594, "mem_69911")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_69915;
                
                mem_69915.references = NULL;
                if (memblock_alloc(ctx, &mem_69915, bytes_69594, "mem_69915")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_69747 = (int64_t) 8 * n_64064;
                int64_t bytes_69746 = smax64((int64_t) 0, binop_y_69747);
                int64_t binop_y_69750 = (int64_t) 4 * n_64064;
                int64_t bytes_69749 = smax64((int64_t) 0, binop_y_69750);
                int64_t binop_y_69765 = (int64_t) 4 * q_64066;
                int64_t bytes_69764 = smax64((int64_t) 0, binop_y_69765);
                int64_t binop_y_69768 = (int64_t) 4 * n_m_64072;
                int64_t bytes_69767 = smax64((int64_t) 0, binop_y_69768);
                int64_t flat_tid_66052 = (int64_t) 0;
                int32_t num_tasks_71648;
                int64_t flat_tid_66054 = (int64_t) 0;
                struct futhark_mc_task_76504 futhark_mc_task_76504;
                
                futhark_mc_task_76504.ctx = ctx;
                futhark_mc_task_76504.free_m_64063 = m_64063;
                futhark_mc_task_76504.free_n_64064 = n_64064;
                futhark_mc_task_76504.free_q_64066 = q_64066;
                futhark_mc_task_76504.free_jump_64068 = jump_64068;
                futhark_mc_task_76504.free_n_m_64072 = n_m_64072;
                futhark_mc_task_76504.free_i_64078 = i_64078;
                futhark_mc_task_76504.free_x_64079 = x_64079;
                futhark_mc_task_76504.free_min_res_64084 = min_res_64084;
                futhark_mc_task_76504.free_empty_slice_64089 =
                    empty_slice_64089;
                futhark_mc_task_76504.free_m_64090 = m_64090;
                futhark_mc_task_76504.free_i64_res_64091 = i64_res_64091;
                futhark_mc_task_76504.free_Y_mem_69593 = Y_mem_69593.mem;
                futhark_mc_task_76504.free_bytes_69746 = bytes_69746;
                futhark_mc_task_76504.free_bytes_69749 = bytes_69749;
                futhark_mc_task_76504.free_bytes_69764 = bytes_69764;
                futhark_mc_task_76504.free_bytes_69767 = bytes_69767;
                futhark_mc_task_76504.free_mem_69911 = mem_69911.mem;
                futhark_mc_task_76504.free_mem_69915 = mem_69915.mem;
                
                struct scheduler_segop futhark_mc_task_76504_task;
                
                futhark_mc_task_76504_task.args = &futhark_mc_task_76504;
                futhark_mc_task_76504_task.top_level_fn =
                    futhark_mc_segmap_task_76505;
                futhark_mc_task_76504_task.name =
                    "futhark_mc_segmap_task_76505";
                futhark_mc_task_76504_task.iterations = m_64063;
                futhark_mc_task_76504_task.task_time =
                    &ctx->futhark_mc_segmap_task_76505_total_time;
                futhark_mc_task_76504_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76505_total_iter;
                futhark_mc_task_76504_task.sched = DYNAMIC;
                futhark_mc_task_76504_task.nested_fn =
                    futhark_mc_segmap_nested_task_76517;
                
                int futhark_mc_segmap_task_76505_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76504_task);
                
                if (futhark_mc_segmap_task_76505_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70087, &mem_69911,
                                 "mem_69911") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70086, &mem_69915,
                                 "mem_69915") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_69915, "mem_69915") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_69911, "mem_69911") != 0)
                    return 1;
            } else {
                struct memblock mem_70081;
                
                mem_70081.references = NULL;
                if (memblock_alloc(ctx, &mem_70081, bytes_69594, "mem_70081")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70085;
                
                mem_70085.references = NULL;
                if (memblock_alloc(ctx, &mem_70085, bytes_69594, "mem_70085")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_69917 = (int64_t) 8 * n_64064;
                int64_t bytes_69916 = smax64((int64_t) 0, binop_y_69917);
                int64_t binop_y_69920 = (int64_t) 4 * n_64064;
                int64_t bytes_69919 = smax64((int64_t) 0, binop_y_69920);
                int64_t binop_y_69935 = (int64_t) 4 * q_64066;
                int64_t bytes_69934 = smax64((int64_t) 0, binop_y_69935);
                int64_t binop_y_69938 = (int64_t) 4 * n_m_64072;
                int64_t bytes_69937 = smax64((int64_t) 0, binop_y_69938);
                int64_t flat_tid_66636 = (int64_t) 0;
                int32_t num_tasks_72573;
                int64_t flat_tid_66638 = (int64_t) 0;
                struct futhark_mc_task_76573 futhark_mc_task_76573;
                
                futhark_mc_task_76573.ctx = ctx;
                futhark_mc_task_76573.free_m_64063 = m_64063;
                futhark_mc_task_76573.free_n_64064 = n_64064;
                futhark_mc_task_76573.free_q_64066 = q_64066;
                futhark_mc_task_76573.free_jump_64068 = jump_64068;
                futhark_mc_task_76573.free_n_m_64072 = n_m_64072;
                futhark_mc_task_76573.free_i_64078 = i_64078;
                futhark_mc_task_76573.free_x_64079 = x_64079;
                futhark_mc_task_76573.free_min_res_64084 = min_res_64084;
                futhark_mc_task_76573.free_empty_slice_64089 =
                    empty_slice_64089;
                futhark_mc_task_76573.free_m_64090 = m_64090;
                futhark_mc_task_76573.free_i64_res_64091 = i64_res_64091;
                futhark_mc_task_76573.free_Y_mem_69593 = Y_mem_69593.mem;
                futhark_mc_task_76573.free_bytes_69916 = bytes_69916;
                futhark_mc_task_76573.free_bytes_69919 = bytes_69919;
                futhark_mc_task_76573.free_bytes_69934 = bytes_69934;
                futhark_mc_task_76573.free_bytes_69937 = bytes_69937;
                futhark_mc_task_76573.free_mem_70081 = mem_70081.mem;
                futhark_mc_task_76573.free_mem_70085 = mem_70085.mem;
                
                struct scheduler_segop futhark_mc_task_76573_task;
                
                futhark_mc_task_76573_task.args = &futhark_mc_task_76573;
                futhark_mc_task_76573_task.top_level_fn =
                    futhark_mc_segmap_task_76574;
                futhark_mc_task_76573_task.name =
                    "futhark_mc_segmap_task_76574";
                futhark_mc_task_76573_task.iterations = m_64063;
                futhark_mc_task_76573_task.task_time =
                    &ctx->futhark_mc_segmap_task_76574_total_time;
                futhark_mc_task_76573_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76574_total_iter;
                futhark_mc_task_76573_task.sched = DYNAMIC;
                futhark_mc_task_76573_task.nested_fn =
                    futhark_mc_segmap_nested_task_76586;
                
                int futhark_mc_segmap_task_76574_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76573_task);
                
                if (futhark_mc_segmap_task_76574_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70087, &mem_70081,
                                 "mem_70081") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70086, &mem_70085,
                                 "mem_70085") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70085, "mem_70085") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70081, "mem_70081") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_70089, &ext_mem_70087,
                             "ext_mem_70087") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70088, &ext_mem_70086,
                             "ext_mem_70086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70086, "ext_mem_70086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70087, "ext_mem_70087") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_70818, &ext_mem_70089,
                         "ext_mem_70089") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_70817, &ext_mem_70088,
                         "ext_mem_70088") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70088, "ext_mem_70088") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70089, "ext_mem_70089") != 0)
            return 1;
    } else {
        bool match_lit_64792 = (int64_t) 0 == degree_64067;
        int64_t binop_x_70091 = m_64063 * n_m_64072;
        int64_t binop_y_70092 = (int64_t) 4 * binop_x_70091;
        int64_t bytes_70090 = smax64((int64_t) 0, binop_y_70092);
        struct memblock ext_mem_70816;
        
        ext_mem_70816.references = NULL;
        
        struct memblock ext_mem_70815;
        
        ext_mem_70815.references = NULL;
        if (match_lit_64792) {
            struct memblock mem_70093;
            
            mem_70093.references = NULL;
            if (memblock_alloc(ctx, &mem_70093, bytes_70090, "mem_70093")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_73630 = 0; i_73630 < m_64063; i_73630++) {
                for (int64_t i_73631 = 0; i_73631 < n_m_64072; i_73631++) {
                    ((float *) mem_70093.mem)[i_73630 * n_m_64072 + i_73631] =
                        0.0F;
                }
            }
            
            struct memblock mem_70274;
            
            mem_70274.references = NULL;
            if (memblock_alloc(ctx, &mem_70274, bytes_70090, "mem_70274")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_70095 = (int64_t) 8 * n_64064;
            int64_t bytes_70094 = smax64((int64_t) 0, binop_y_70095);
            int64_t binop_y_70098 = (int64_t) 4 * n_64064;
            int64_t bytes_70097 = smax64((int64_t) 0, binop_y_70098);
            int64_t binop_y_70113 = (int64_t) 4 * q_64066;
            int64_t bytes_70112 = smax64((int64_t) 0, binop_y_70113);
            int64_t binop_y_70134 = (int64_t) 4 * n_m_64072;
            int64_t bytes_70133 = smax64((int64_t) 0, binop_y_70134);
            int64_t flat_tid_67316 = (int64_t) 0;
            int32_t num_tasks_73632;
            int64_t flat_tid_67318 = (int64_t) 0;
            struct futhark_mc_task_76644 futhark_mc_task_76644;
            
            futhark_mc_task_76644.ctx = ctx;
            futhark_mc_task_76644.free_m_64063 = m_64063;
            futhark_mc_task_76644.free_n_64064 = n_64064;
            futhark_mc_task_76644.free_q_64066 = q_64066;
            futhark_mc_task_76644.free_jump_64068 = jump_64068;
            futhark_mc_task_76644.free_n_m_64072 = n_m_64072;
            futhark_mc_task_76644.free_i_64078 = i_64078;
            futhark_mc_task_76644.free_x_64079 = x_64079;
            futhark_mc_task_76644.free_min_res_64084 = min_res_64084;
            futhark_mc_task_76644.free_empty_slice_64089 = empty_slice_64089;
            futhark_mc_task_76644.free_m_64090 = m_64090;
            futhark_mc_task_76644.free_i64_res_64091 = i64_res_64091;
            futhark_mc_task_76644.free_Y_mem_69593 = Y_mem_69593.mem;
            futhark_mc_task_76644.free_bytes_70094 = bytes_70094;
            futhark_mc_task_76644.free_bytes_70097 = bytes_70097;
            futhark_mc_task_76644.free_bytes_70112 = bytes_70112;
            futhark_mc_task_76644.free_bytes_70133 = bytes_70133;
            futhark_mc_task_76644.free_mem_70274 = mem_70274.mem;
            
            struct scheduler_segop futhark_mc_task_76644_task;
            
            futhark_mc_task_76644_task.args = &futhark_mc_task_76644;
            futhark_mc_task_76644_task.top_level_fn =
                futhark_mc_segmap_task_76645;
            futhark_mc_task_76644_task.name = "futhark_mc_segmap_task_76645";
            futhark_mc_task_76644_task.iterations = m_64063;
            futhark_mc_task_76644_task.task_time =
                &ctx->futhark_mc_segmap_task_76645_total_time;
            futhark_mc_task_76644_task.task_iter =
                &ctx->futhark_mc_segmap_task_76645_total_iter;
            futhark_mc_task_76644_task.sched = DYNAMIC;
            futhark_mc_task_76644_task.nested_fn =
                futhark_mc_segmap_nested_task_76657;
            
            int futhark_mc_segmap_task_76645_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_76644_task);
            
            if (futhark_mc_segmap_task_76645_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_70816, &mem_70274, "mem_70274") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70815, &mem_70093, "mem_70093") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_70274, "mem_70274") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_70093, "mem_70093") != 0)
                return 1;
        } else {
            bool match_lit_64982 = (int64_t) 1 == degree_64067;
            struct memblock ext_mem_70814;
            
            ext_mem_70814.references = NULL;
            
            struct memblock ext_mem_70813;
            
            ext_mem_70813.references = NULL;
            if (match_lit_64982) {
                struct memblock mem_70506;
                
                mem_70506.references = NULL;
                if (memblock_alloc(ctx, &mem_70506, bytes_70090, "mem_70506")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70510;
                
                mem_70510.references = NULL;
                if (memblock_alloc(ctx, &mem_70510, bytes_70090, "mem_70510")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_70276 = (int64_t) 8 * n_64064;
                int64_t bytes_70275 = smax64((int64_t) 0, binop_y_70276);
                int64_t binop_y_70279 = (int64_t) 4 * n_64064;
                int64_t bytes_70278 = smax64((int64_t) 0, binop_y_70279);
                int64_t binop_y_70294 = (int64_t) 4 * q_64066;
                int64_t bytes_70293 = smax64((int64_t) 0, binop_y_70294);
                int64_t binop_y_70333 = (int64_t) 4 * n_m_64072;
                int64_t bytes_70332 = smax64((int64_t) 0, binop_y_70333);
                int64_t flat_tid_67779 = (int64_t) 0;
                int32_t num_tasks_74369;
                int64_t flat_tid_67781 = (int64_t) 0;
                struct futhark_mc_task_76711 futhark_mc_task_76711;
                
                futhark_mc_task_76711.ctx = ctx;
                futhark_mc_task_76711.free_m_64063 = m_64063;
                futhark_mc_task_76711.free_n_64064 = n_64064;
                futhark_mc_task_76711.free_q_64066 = q_64066;
                futhark_mc_task_76711.free_jump_64068 = jump_64068;
                futhark_mc_task_76711.free_n_m_64072 = n_m_64072;
                futhark_mc_task_76711.free_i_64078 = i_64078;
                futhark_mc_task_76711.free_x_64079 = x_64079;
                futhark_mc_task_76711.free_min_res_64084 = min_res_64084;
                futhark_mc_task_76711.free_empty_slice_64089 =
                    empty_slice_64089;
                futhark_mc_task_76711.free_m_64090 = m_64090;
                futhark_mc_task_76711.free_i64_res_64091 = i64_res_64091;
                futhark_mc_task_76711.free_Y_mem_69593 = Y_mem_69593.mem;
                futhark_mc_task_76711.free_bytes_70275 = bytes_70275;
                futhark_mc_task_76711.free_bytes_70278 = bytes_70278;
                futhark_mc_task_76711.free_bytes_70293 = bytes_70293;
                futhark_mc_task_76711.free_bytes_70332 = bytes_70332;
                futhark_mc_task_76711.free_mem_70506 = mem_70506.mem;
                futhark_mc_task_76711.free_mem_70510 = mem_70510.mem;
                
                struct scheduler_segop futhark_mc_task_76711_task;
                
                futhark_mc_task_76711_task.args = &futhark_mc_task_76711;
                futhark_mc_task_76711_task.top_level_fn =
                    futhark_mc_segmap_task_76712;
                futhark_mc_task_76711_task.name =
                    "futhark_mc_segmap_task_76712";
                futhark_mc_task_76711_task.iterations = m_64063;
                futhark_mc_task_76711_task.task_time =
                    &ctx->futhark_mc_segmap_task_76712_total_time;
                futhark_mc_task_76711_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76712_total_iter;
                futhark_mc_task_76711_task.sched = DYNAMIC;
                futhark_mc_task_76711_task.nested_fn =
                    futhark_mc_segmap_nested_task_76726;
                
                int futhark_mc_segmap_task_76712_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76711_task);
                
                if (futhark_mc_segmap_task_76712_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70814, &mem_70506,
                                 "mem_70506") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70813, &mem_70510,
                                 "mem_70510") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70510, "mem_70510") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70506, "mem_70506") != 0)
                    return 1;
            } else {
                struct memblock mem_70808;
                
                mem_70808.references = NULL;
                if (memblock_alloc(ctx, &mem_70808, bytes_70090, "mem_70808")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70812;
                
                mem_70812.references = NULL;
                if (memblock_alloc(ctx, &mem_70812, bytes_70090, "mem_70812")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_70512 = (int64_t) 8 * n_64064;
                int64_t bytes_70511 = smax64((int64_t) 0, binop_y_70512);
                int64_t binop_y_70515 = (int64_t) 4 * n_64064;
                int64_t bytes_70514 = smax64((int64_t) 0, binop_y_70515);
                int64_t binop_y_70530 = (int64_t) 4 * q_64066;
                int64_t bytes_70529 = smax64((int64_t) 0, binop_y_70530);
                int64_t binop_y_70605 = (int64_t) 4 * n_m_64072;
                int64_t bytes_70604 = smax64((int64_t) 0, binop_y_70605);
                int64_t flat_tid_68330 = (int64_t) 0;
                int32_t num_tasks_75259;
                int64_t flat_tid_68332 = (int64_t) 0;
                struct futhark_mc_task_76786 futhark_mc_task_76786;
                
                futhark_mc_task_76786.ctx = ctx;
                futhark_mc_task_76786.free_m_64063 = m_64063;
                futhark_mc_task_76786.free_n_64064 = n_64064;
                futhark_mc_task_76786.free_q_64066 = q_64066;
                futhark_mc_task_76786.free_jump_64068 = jump_64068;
                futhark_mc_task_76786.free_n_m_64072 = n_m_64072;
                futhark_mc_task_76786.free_i_64078 = i_64078;
                futhark_mc_task_76786.free_x_64079 = x_64079;
                futhark_mc_task_76786.free_min_res_64084 = min_res_64084;
                futhark_mc_task_76786.free_empty_slice_64089 =
                    empty_slice_64089;
                futhark_mc_task_76786.free_m_64090 = m_64090;
                futhark_mc_task_76786.free_i64_res_64091 = i64_res_64091;
                futhark_mc_task_76786.free_Y_mem_69593 = Y_mem_69593.mem;
                futhark_mc_task_76786.free_bytes_70511 = bytes_70511;
                futhark_mc_task_76786.free_bytes_70514 = bytes_70514;
                futhark_mc_task_76786.free_bytes_70529 = bytes_70529;
                futhark_mc_task_76786.free_bytes_70604 = bytes_70604;
                futhark_mc_task_76786.free_mem_70808 = mem_70808.mem;
                futhark_mc_task_76786.free_mem_70812 = mem_70812.mem;
                
                struct scheduler_segop futhark_mc_task_76786_task;
                
                futhark_mc_task_76786_task.args = &futhark_mc_task_76786;
                futhark_mc_task_76786_task.top_level_fn =
                    futhark_mc_segmap_task_76787;
                futhark_mc_task_76786_task.name =
                    "futhark_mc_segmap_task_76787";
                futhark_mc_task_76786_task.iterations = m_64063;
                futhark_mc_task_76786_task.task_time =
                    &ctx->futhark_mc_segmap_task_76787_total_time;
                futhark_mc_task_76786_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76787_total_iter;
                futhark_mc_task_76786_task.sched = DYNAMIC;
                futhark_mc_task_76786_task.nested_fn =
                    futhark_mc_segmap_nested_task_76803;
                
                int futhark_mc_segmap_task_76787_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76786_task);
                
                if (futhark_mc_segmap_task_76787_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70814, &mem_70808,
                                 "mem_70808") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70813, &mem_70812,
                                 "mem_70812") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70812, "mem_70812") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70808, "mem_70808") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_70816, &ext_mem_70814,
                             "ext_mem_70814") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70815, &ext_mem_70813,
                             "ext_mem_70813") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70813, "ext_mem_70813") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70814, "ext_mem_70814") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_70818, &ext_mem_70816,
                         "ext_mem_70816") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_70817, &ext_mem_70815,
                         "ext_mem_70815") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70815, "ext_mem_70815") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70816, "ext_mem_70816") != 0)
            return 1;
    }
    
    bool cond_65493 = slt64((int64_t) 1, jump_64068);
    int64_t binop_x_70838 = m_64063 * n_64064;
    int64_t binop_y_70839 = (int64_t) 4 * binop_x_70838;
    int64_t bytes_70837 = smax64((int64_t) 0, binop_y_70839);
    int64_t ext_70842;
    
    if (cond_65493) {
        ext_70842 = n_64064;
    } else {
        ext_70842 = n_m_64072;
    }
    
    struct memblock ext_mem_70841;
    
    ext_mem_70841.references = NULL;
    if (cond_65493) {
        bool zzero_65495 = jump_64068 == (int64_t) 0;
        bool nonzzero_65496 = !zzero_65495;
        bool nonzzero_cert_65497;
        
        if (!nonzzero_65496) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:438:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &ext_mem_70841, "ext_mem_70841") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70817, "ext_mem_70817") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70818, "ext_mem_70818") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_65498 = sub64(n_m_64072, (int64_t) 1);
        struct memblock mem_70840;
        
        mem_70840.references = NULL;
        if (memblock_alloc(ctx, &mem_70840, bytes_70837, "mem_70840")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_70820 = (int64_t) 4 * n_64064;
        int64_t bytes_70819 = smax64((int64_t) 0, binop_y_70820);
        int64_t flat_tid_68991 = (int64_t) 0;
        int32_t num_tasks_76331;
        int64_t flat_tid_68993 = (int64_t) 0;
        struct futhark_mc_task_76873 futhark_mc_task_76873;
        
        futhark_mc_task_76873.ctx = ctx;
        futhark_mc_task_76873.free_m_64063 = m_64063;
        futhark_mc_task_76873.free_n_64064 = n_64064;
        futhark_mc_task_76873.free_jump_64068 = jump_64068;
        futhark_mc_task_76873.free_n_m_64072 = n_m_64072;
        futhark_mc_task_76873.free_i_64078 = i_64078;
        futhark_mc_task_76873.free_y_65498 = y_65498;
        futhark_mc_task_76873.free_ext_mem_70817 = ext_mem_70817.mem;
        futhark_mc_task_76873.free_ext_mem_70818 = ext_mem_70818.mem;
        futhark_mc_task_76873.free_bytes_70819 = bytes_70819;
        futhark_mc_task_76873.free_mem_70840 = mem_70840.mem;
        
        struct scheduler_segop futhark_mc_task_76873_task;
        
        futhark_mc_task_76873_task.args = &futhark_mc_task_76873;
        futhark_mc_task_76873_task.top_level_fn = futhark_mc_segmap_task_76874;
        futhark_mc_task_76873_task.name = "futhark_mc_segmap_task_76874";
        futhark_mc_task_76873_task.iterations = m_64063;
        futhark_mc_task_76873_task.task_time =
            &ctx->futhark_mc_segmap_task_76874_total_time;
        futhark_mc_task_76873_task.task_iter =
            &ctx->futhark_mc_segmap_task_76874_total_iter;
        futhark_mc_task_76873_task.sched = STATIC;
        futhark_mc_task_76873_task.nested_fn =
            futhark_mc_segmap_nested_task_76878;
        
        int futhark_mc_segmap_task_76874_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76873_task);
        
        if (futhark_mc_segmap_task_76874_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_70841, &mem_70840, "mem_70840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_70840, "mem_70840") != 0)
            return 1;
    } else {
        bool dim_match_65550 = n_64064 == n_m_64072;
        bool empty_or_match_cert_65551;
        
        if (!dim_match_65550) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_64063, ", ", (long long) n_m_64072,
                          ") cannot match shape of type `[",
                          (long long) m_64063, "][", (long long) n_64064,
                          "]f32`.",
                          "-> #0  loess.fut:494:5-26\n   #1  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &ext_mem_70841, "ext_mem_70841") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70817, "ext_mem_70817") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70818, "ext_mem_70818") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_70841, &ext_mem_70818,
                         "ext_mem_70818") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_70817, "ext_mem_70817") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70818, "ext_mem_70818") != 0)
        return 1;
    
    struct memblock mem_70846;
    
    mem_70846.references = NULL;
    if (memblock_alloc(ctx, &mem_70846, bytes_70837, "mem_70846")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_70846.mem + (int64_t) 0, ext_mem_70841.mem + (int64_t) 0,
            m_64063 * n_64064 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_70841, "ext_mem_70841") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_70858, &mem_70846, "mem_70846") != 0)
        return 1;
    (*mem_out_p_76439).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_76439, &mem_out_70858, "mem_out_70858") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_70846, "mem_70846") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70841, "ext_mem_70841") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70817, "ext_mem_70817") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70818, "ext_mem_70818") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_70858, "mem_out_70858") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_69593;
    
    Y_mem_69593.references = NULL;
    
    int64_t m_64063;
    int64_t n_64064;
    int64_t q_64066;
    int64_t degree_64067;
    int64_t jump_64068;
    int64_t jump_threshold_64069;
    int64_t q_threshold_64070;
    struct memblock mem_out_70858;
    
    mem_out_70858.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_69593 = in0->mem;
    m_64063 = in0->shape[0];
    n_64064 = in0->shape[1];
    q_64066 = in1;
    degree_64067 = in2;
    jump_64068 = in3;
    jump_threshold_64069 = in4;
    q_threshold_64070 = in5;
    if (!(m_64063 == in0->shape[0] && n_64064 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_70858, Y_mem_69593, m_64063,
                                n_64064, q_64066, degree_64067, jump_64068,
                                jump_threshold_64069, q_threshold_64070);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_70858;
            (*out0)->shape[0] = m_64063;
            (*out0)->shape[1] = n_64064;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
