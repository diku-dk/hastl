// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_73884_total_runtime;
    int *futhark_mc_segmap_parloop_73884_runs;
    int64_t *futhark_mc_segmap_parloop_73884_iter;
    int64_t futhark_mc_segmap_parloop_73884_total_total_runtime;
    int futhark_mc_segmap_parloop_73884_total_runs;
    int64_t futhark_mc_segmap_parloop_73884_total_iter;
    int64_t *futhark_mc_segmap_task_73882_total_runtime;
    int *futhark_mc_segmap_task_73882_runs;
    int64_t *futhark_mc_segmap_task_73882_iter;
    int64_t futhark_mc_segmap_task_73882_total_time;
    int64_t futhark_mc_segmap_task_73882_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_73906_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_73906_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_73906_iter;
    int64_t futhark_mc_scan_stage_1_parloop_73906_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_73906_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_73906_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_73908_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_73908_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_73908_iter;
    int64_t futhark_mc_scan_stage_3_parloop_73908_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_73908_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_73908_total_iter;
    int64_t *futhark_mc_segscan_task_73903_total_runtime;
    int *futhark_mc_segscan_task_73903_runs;
    int64_t *futhark_mc_segscan_task_73903_iter;
    int64_t futhark_mc_segscan_task_73903_total_time;
    int64_t futhark_mc_segscan_task_73903_total_iter;
    int64_t *futhark_mc_segmap_parloop_73912_total_runtime;
    int *futhark_mc_segmap_parloop_73912_runs;
    int64_t *futhark_mc_segmap_parloop_73912_iter;
    int64_t futhark_mc_segmap_parloop_73912_total_total_runtime;
    int futhark_mc_segmap_parloop_73912_total_runs;
    int64_t futhark_mc_segmap_parloop_73912_total_iter;
    int64_t *futhark_mc_segmap_task_73910_total_runtime;
    int *futhark_mc_segmap_task_73910_runs;
    int64_t *futhark_mc_segmap_task_73910_iter;
    int64_t futhark_mc_segmap_task_73910_total_time;
    int64_t futhark_mc_segmap_task_73910_total_iter;
    int64_t *futhark_mc_segmap_parloop_73916_total_runtime;
    int *futhark_mc_segmap_parloop_73916_runs;
    int64_t *futhark_mc_segmap_parloop_73916_iter;
    int64_t futhark_mc_segmap_parloop_73916_total_total_runtime;
    int futhark_mc_segmap_parloop_73916_total_runs;
    int64_t futhark_mc_segmap_parloop_73916_total_iter;
    int64_t *futhark_mc_segmap_task_73914_total_runtime;
    int *futhark_mc_segmap_task_73914_runs;
    int64_t *futhark_mc_segmap_task_73914_iter;
    int64_t futhark_mc_segmap_task_73914_total_time;
    int64_t futhark_mc_segmap_task_73914_total_iter;
    int64_t *futhark_mc_segmap_parloop_73920_total_runtime;
    int *futhark_mc_segmap_parloop_73920_runs;
    int64_t *futhark_mc_segmap_parloop_73920_iter;
    int64_t futhark_mc_segmap_parloop_73920_total_total_runtime;
    int futhark_mc_segmap_parloop_73920_total_runs;
    int64_t futhark_mc_segmap_parloop_73920_total_iter;
    int64_t *futhark_mc_segmap_task_73918_total_runtime;
    int *futhark_mc_segmap_task_73918_runs;
    int64_t *futhark_mc_segmap_task_73918_iter;
    int64_t futhark_mc_segmap_task_73918_total_time;
    int64_t futhark_mc_segmap_task_73918_total_iter;
    int64_t *futhark_mc_segmap_parloop_73924_total_runtime;
    int *futhark_mc_segmap_parloop_73924_runs;
    int64_t *futhark_mc_segmap_parloop_73924_iter;
    int64_t futhark_mc_segmap_parloop_73924_total_total_runtime;
    int futhark_mc_segmap_parloop_73924_total_runs;
    int64_t futhark_mc_segmap_parloop_73924_total_iter;
    int64_t *futhark_mc_segmap_task_73922_total_runtime;
    int *futhark_mc_segmap_task_73922_runs;
    int64_t *futhark_mc_segmap_task_73922_iter;
    int64_t futhark_mc_segmap_task_73922_total_time;
    int64_t futhark_mc_segmap_task_73922_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73932_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73932_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73932_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73932_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73932_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73932_total_iter;
    int64_t *futhark_mc_segred_task_73929_total_runtime;
    int *futhark_mc_segred_task_73929_runs;
    int64_t *futhark_mc_segred_task_73929_iter;
    int64_t futhark_mc_segred_task_73929_total_time;
    int64_t futhark_mc_segred_task_73929_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73937_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73937_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73937_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73937_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73937_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73937_total_iter;
    int64_t *futhark_mc_segred_task_73934_total_runtime;
    int *futhark_mc_segred_task_73934_runs;
    int64_t *futhark_mc_segred_task_73934_iter;
    int64_t futhark_mc_segred_task_73934_total_time;
    int64_t futhark_mc_segred_task_73934_total_iter;
    int64_t *futhark_mc_segmap_parloop_73927_total_runtime;
    int *futhark_mc_segmap_parloop_73927_runs;
    int64_t *futhark_mc_segmap_parloop_73927_iter;
    int64_t futhark_mc_segmap_parloop_73927_total_total_runtime;
    int futhark_mc_segmap_parloop_73927_total_runs;
    int64_t futhark_mc_segmap_parloop_73927_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73925_total_runtime;
    int *futhark_mc_segmap_nested_task_73925_runs;
    int64_t *futhark_mc_segmap_nested_task_73925_iter;
    int64_t *futhark_mc_segmap_parloop_73894_total_runtime;
    int *futhark_mc_segmap_parloop_73894_runs;
    int64_t *futhark_mc_segmap_parloop_73894_iter;
    int64_t futhark_mc_segmap_parloop_73894_total_total_runtime;
    int futhark_mc_segmap_parloop_73894_total_runs;
    int64_t futhark_mc_segmap_parloop_73894_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73892_total_runtime;
    int *futhark_mc_segmap_nested_task_73892_runs;
    int64_t *futhark_mc_segmap_nested_task_73892_iter;
    int64_t *futhark_mc_segmap_parloop_73941_total_runtime;
    int *futhark_mc_segmap_parloop_73941_runs;
    int64_t *futhark_mc_segmap_parloop_73941_iter;
    int64_t futhark_mc_segmap_parloop_73941_total_total_runtime;
    int futhark_mc_segmap_parloop_73941_total_runs;
    int64_t futhark_mc_segmap_parloop_73941_total_iter;
    int64_t *futhark_mc_segmap_task_73939_total_runtime;
    int *futhark_mc_segmap_task_73939_runs;
    int64_t *futhark_mc_segmap_task_73939_iter;
    int64_t futhark_mc_segmap_task_73939_total_time;
    int64_t futhark_mc_segmap_task_73939_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_73965_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_73965_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_73965_iter;
    int64_t futhark_mc_scan_stage_1_parloop_73965_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_73965_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_73965_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_73967_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_73967_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_73967_iter;
    int64_t futhark_mc_scan_stage_3_parloop_73967_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_73967_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_73967_total_iter;
    int64_t *futhark_mc_segscan_task_73962_total_runtime;
    int *futhark_mc_segscan_task_73962_runs;
    int64_t *futhark_mc_segscan_task_73962_iter;
    int64_t futhark_mc_segscan_task_73962_total_time;
    int64_t futhark_mc_segscan_task_73962_total_iter;
    int64_t *futhark_mc_segmap_parloop_73971_total_runtime;
    int *futhark_mc_segmap_parloop_73971_runs;
    int64_t *futhark_mc_segmap_parloop_73971_iter;
    int64_t futhark_mc_segmap_parloop_73971_total_total_runtime;
    int futhark_mc_segmap_parloop_73971_total_runs;
    int64_t futhark_mc_segmap_parloop_73971_total_iter;
    int64_t *futhark_mc_segmap_task_73969_total_runtime;
    int *futhark_mc_segmap_task_73969_runs;
    int64_t *futhark_mc_segmap_task_73969_iter;
    int64_t futhark_mc_segmap_task_73969_total_time;
    int64_t futhark_mc_segmap_task_73969_total_iter;
    int64_t *futhark_mc_segmap_parloop_73975_total_runtime;
    int *futhark_mc_segmap_parloop_73975_runs;
    int64_t *futhark_mc_segmap_parloop_73975_iter;
    int64_t futhark_mc_segmap_parloop_73975_total_total_runtime;
    int futhark_mc_segmap_parloop_73975_total_runs;
    int64_t futhark_mc_segmap_parloop_73975_total_iter;
    int64_t *futhark_mc_segmap_task_73973_total_runtime;
    int *futhark_mc_segmap_task_73973_runs;
    int64_t *futhark_mc_segmap_task_73973_iter;
    int64_t futhark_mc_segmap_task_73973_total_time;
    int64_t futhark_mc_segmap_task_73973_total_iter;
    int64_t *futhark_mc_segmap_parloop_73979_total_runtime;
    int *futhark_mc_segmap_parloop_73979_runs;
    int64_t *futhark_mc_segmap_parloop_73979_iter;
    int64_t futhark_mc_segmap_parloop_73979_total_total_runtime;
    int futhark_mc_segmap_parloop_73979_total_runs;
    int64_t futhark_mc_segmap_parloop_73979_total_iter;
    int64_t *futhark_mc_segmap_task_73977_total_runtime;
    int *futhark_mc_segmap_task_73977_runs;
    int64_t *futhark_mc_segmap_task_73977_iter;
    int64_t futhark_mc_segmap_task_73977_total_time;
    int64_t futhark_mc_segmap_task_73977_total_iter;
    int64_t *futhark_mc_segmap_parloop_73983_total_runtime;
    int *futhark_mc_segmap_parloop_73983_runs;
    int64_t *futhark_mc_segmap_parloop_73983_iter;
    int64_t futhark_mc_segmap_parloop_73983_total_total_runtime;
    int futhark_mc_segmap_parloop_73983_total_runs;
    int64_t futhark_mc_segmap_parloop_73983_total_iter;
    int64_t *futhark_mc_segmap_task_73981_total_runtime;
    int *futhark_mc_segmap_task_73981_runs;
    int64_t *futhark_mc_segmap_task_73981_iter;
    int64_t futhark_mc_segmap_task_73981_total_time;
    int64_t futhark_mc_segmap_task_73981_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73993_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73993_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73993_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73993_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73993_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73993_total_iter;
    int64_t *futhark_mc_segred_task_73988_total_runtime;
    int *futhark_mc_segred_task_73988_runs;
    int64_t *futhark_mc_segred_task_73988_iter;
    int64_t futhark_mc_segred_task_73988_total_time;
    int64_t futhark_mc_segred_task_73988_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73999_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73999_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73999_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73999_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73999_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73999_total_iter;
    int64_t *futhark_mc_segred_task_73995_total_runtime;
    int *futhark_mc_segred_task_73995_runs;
    int64_t *futhark_mc_segred_task_73995_iter;
    int64_t futhark_mc_segred_task_73995_total_time;
    int64_t futhark_mc_segred_task_73995_total_iter;
    int64_t *futhark_mc_segmap_parloop_73986_total_runtime;
    int *futhark_mc_segmap_parloop_73986_runs;
    int64_t *futhark_mc_segmap_parloop_73986_iter;
    int64_t futhark_mc_segmap_parloop_73986_total_total_runtime;
    int futhark_mc_segmap_parloop_73986_total_runs;
    int64_t futhark_mc_segmap_parloop_73986_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73984_total_runtime;
    int *futhark_mc_segmap_nested_task_73984_runs;
    int64_t *futhark_mc_segmap_nested_task_73984_iter;
    int64_t *futhark_mc_segmap_parloop_73952_total_runtime;
    int *futhark_mc_segmap_parloop_73952_runs;
    int64_t *futhark_mc_segmap_parloop_73952_iter;
    int64_t futhark_mc_segmap_parloop_73952_total_total_runtime;
    int futhark_mc_segmap_parloop_73952_total_runs;
    int64_t futhark_mc_segmap_parloop_73952_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73950_total_runtime;
    int *futhark_mc_segmap_nested_task_73950_runs;
    int64_t *futhark_mc_segmap_nested_task_73950_iter;
    int64_t *futhark_mc_segmap_parloop_74003_total_runtime;
    int *futhark_mc_segmap_parloop_74003_runs;
    int64_t *futhark_mc_segmap_parloop_74003_iter;
    int64_t futhark_mc_segmap_parloop_74003_total_total_runtime;
    int futhark_mc_segmap_parloop_74003_total_runs;
    int64_t futhark_mc_segmap_parloop_74003_total_iter;
    int64_t *futhark_mc_segmap_task_74001_total_runtime;
    int *futhark_mc_segmap_task_74001_runs;
    int64_t *futhark_mc_segmap_task_74001_iter;
    int64_t futhark_mc_segmap_task_74001_total_time;
    int64_t futhark_mc_segmap_task_74001_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74027_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74027_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74027_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74027_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74027_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74027_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74029_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74029_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74029_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74029_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74029_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74029_total_iter;
    int64_t *futhark_mc_segscan_task_74024_total_runtime;
    int *futhark_mc_segscan_task_74024_runs;
    int64_t *futhark_mc_segscan_task_74024_iter;
    int64_t futhark_mc_segscan_task_74024_total_time;
    int64_t futhark_mc_segscan_task_74024_total_iter;
    int64_t *futhark_mc_segmap_parloop_74033_total_runtime;
    int *futhark_mc_segmap_parloop_74033_runs;
    int64_t *futhark_mc_segmap_parloop_74033_iter;
    int64_t futhark_mc_segmap_parloop_74033_total_total_runtime;
    int futhark_mc_segmap_parloop_74033_total_runs;
    int64_t futhark_mc_segmap_parloop_74033_total_iter;
    int64_t *futhark_mc_segmap_task_74031_total_runtime;
    int *futhark_mc_segmap_task_74031_runs;
    int64_t *futhark_mc_segmap_task_74031_iter;
    int64_t futhark_mc_segmap_task_74031_total_time;
    int64_t futhark_mc_segmap_task_74031_total_iter;
    int64_t *futhark_mc_segmap_parloop_74037_total_runtime;
    int *futhark_mc_segmap_parloop_74037_runs;
    int64_t *futhark_mc_segmap_parloop_74037_iter;
    int64_t futhark_mc_segmap_parloop_74037_total_total_runtime;
    int futhark_mc_segmap_parloop_74037_total_runs;
    int64_t futhark_mc_segmap_parloop_74037_total_iter;
    int64_t *futhark_mc_segmap_task_74035_total_runtime;
    int *futhark_mc_segmap_task_74035_runs;
    int64_t *futhark_mc_segmap_task_74035_iter;
    int64_t futhark_mc_segmap_task_74035_total_time;
    int64_t futhark_mc_segmap_task_74035_total_iter;
    int64_t *futhark_mc_segmap_parloop_74041_total_runtime;
    int *futhark_mc_segmap_parloop_74041_runs;
    int64_t *futhark_mc_segmap_parloop_74041_iter;
    int64_t futhark_mc_segmap_parloop_74041_total_total_runtime;
    int futhark_mc_segmap_parloop_74041_total_runs;
    int64_t futhark_mc_segmap_parloop_74041_total_iter;
    int64_t *futhark_mc_segmap_task_74039_total_runtime;
    int *futhark_mc_segmap_task_74039_runs;
    int64_t *futhark_mc_segmap_task_74039_iter;
    int64_t futhark_mc_segmap_task_74039_total_time;
    int64_t futhark_mc_segmap_task_74039_total_iter;
    int64_t *futhark_mc_segmap_parloop_74045_total_runtime;
    int *futhark_mc_segmap_parloop_74045_runs;
    int64_t *futhark_mc_segmap_parloop_74045_iter;
    int64_t futhark_mc_segmap_parloop_74045_total_total_runtime;
    int futhark_mc_segmap_parloop_74045_total_runs;
    int64_t futhark_mc_segmap_parloop_74045_total_iter;
    int64_t *futhark_mc_segmap_task_74043_total_runtime;
    int *futhark_mc_segmap_task_74043_runs;
    int64_t *futhark_mc_segmap_task_74043_iter;
    int64_t futhark_mc_segmap_task_74043_total_time;
    int64_t futhark_mc_segmap_task_74043_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74057_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74057_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74057_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74057_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74057_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74057_total_iter;
    int64_t *futhark_mc_segred_task_74050_total_runtime;
    int *futhark_mc_segred_task_74050_runs;
    int64_t *futhark_mc_segred_task_74050_iter;
    int64_t futhark_mc_segred_task_74050_total_time;
    int64_t futhark_mc_segred_task_74050_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74063_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74063_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74063_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74063_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74063_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74063_total_iter;
    int64_t *futhark_mc_segred_task_74059_total_runtime;
    int *futhark_mc_segred_task_74059_runs;
    int64_t *futhark_mc_segred_task_74059_iter;
    int64_t futhark_mc_segred_task_74059_total_time;
    int64_t futhark_mc_segred_task_74059_total_iter;
    int64_t *futhark_mc_segmap_parloop_74048_total_runtime;
    int *futhark_mc_segmap_parloop_74048_runs;
    int64_t *futhark_mc_segmap_parloop_74048_iter;
    int64_t futhark_mc_segmap_parloop_74048_total_total_runtime;
    int futhark_mc_segmap_parloop_74048_total_runs;
    int64_t futhark_mc_segmap_parloop_74048_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74046_total_runtime;
    int *futhark_mc_segmap_nested_task_74046_runs;
    int64_t *futhark_mc_segmap_nested_task_74046_iter;
    int64_t *futhark_mc_segmap_parloop_74014_total_runtime;
    int *futhark_mc_segmap_parloop_74014_runs;
    int64_t *futhark_mc_segmap_parloop_74014_iter;
    int64_t futhark_mc_segmap_parloop_74014_total_total_runtime;
    int futhark_mc_segmap_parloop_74014_total_runs;
    int64_t futhark_mc_segmap_parloop_74014_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74012_total_runtime;
    int *futhark_mc_segmap_nested_task_74012_runs;
    int64_t *futhark_mc_segmap_nested_task_74012_iter;
    int64_t *futhark_mc_segmap_parloop_74067_total_runtime;
    int *futhark_mc_segmap_parloop_74067_runs;
    int64_t *futhark_mc_segmap_parloop_74067_iter;
    int64_t futhark_mc_segmap_parloop_74067_total_total_runtime;
    int futhark_mc_segmap_parloop_74067_total_runs;
    int64_t futhark_mc_segmap_parloop_74067_total_iter;
    int64_t *futhark_mc_segmap_task_74065_total_runtime;
    int *futhark_mc_segmap_task_74065_runs;
    int64_t *futhark_mc_segmap_task_74065_iter;
    int64_t futhark_mc_segmap_task_74065_total_time;
    int64_t futhark_mc_segmap_task_74065_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74090_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74090_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74090_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74090_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74090_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74090_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74092_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74092_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74092_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74092_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74092_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74092_total_iter;
    int64_t *futhark_mc_segscan_task_74087_total_runtime;
    int *futhark_mc_segscan_task_74087_runs;
    int64_t *futhark_mc_segscan_task_74087_iter;
    int64_t futhark_mc_segscan_task_74087_total_time;
    int64_t futhark_mc_segscan_task_74087_total_iter;
    int64_t *futhark_mc_segmap_parloop_74096_total_runtime;
    int *futhark_mc_segmap_parloop_74096_runs;
    int64_t *futhark_mc_segmap_parloop_74096_iter;
    int64_t futhark_mc_segmap_parloop_74096_total_total_runtime;
    int futhark_mc_segmap_parloop_74096_total_runs;
    int64_t futhark_mc_segmap_parloop_74096_total_iter;
    int64_t *futhark_mc_segmap_task_74094_total_runtime;
    int *futhark_mc_segmap_task_74094_runs;
    int64_t *futhark_mc_segmap_task_74094_iter;
    int64_t futhark_mc_segmap_task_74094_total_time;
    int64_t futhark_mc_segmap_task_74094_total_iter;
    int64_t *futhark_mc_segmap_parloop_74100_total_runtime;
    int *futhark_mc_segmap_parloop_74100_runs;
    int64_t *futhark_mc_segmap_parloop_74100_iter;
    int64_t futhark_mc_segmap_parloop_74100_total_total_runtime;
    int futhark_mc_segmap_parloop_74100_total_runs;
    int64_t futhark_mc_segmap_parloop_74100_total_iter;
    int64_t *futhark_mc_segmap_task_74098_total_runtime;
    int *futhark_mc_segmap_task_74098_runs;
    int64_t *futhark_mc_segmap_task_74098_iter;
    int64_t futhark_mc_segmap_task_74098_total_time;
    int64_t futhark_mc_segmap_task_74098_total_iter;
    int64_t *futhark_mc_segmap_parloop_74104_total_runtime;
    int *futhark_mc_segmap_parloop_74104_runs;
    int64_t *futhark_mc_segmap_parloop_74104_iter;
    int64_t futhark_mc_segmap_parloop_74104_total_total_runtime;
    int futhark_mc_segmap_parloop_74104_total_runs;
    int64_t futhark_mc_segmap_parloop_74104_total_iter;
    int64_t *futhark_mc_segmap_task_74102_total_runtime;
    int *futhark_mc_segmap_task_74102_runs;
    int64_t *futhark_mc_segmap_task_74102_iter;
    int64_t futhark_mc_segmap_task_74102_total_time;
    int64_t futhark_mc_segmap_task_74102_total_iter;
    int64_t *futhark_mc_segmap_parloop_74108_total_runtime;
    int *futhark_mc_segmap_parloop_74108_runs;
    int64_t *futhark_mc_segmap_parloop_74108_iter;
    int64_t futhark_mc_segmap_parloop_74108_total_total_runtime;
    int futhark_mc_segmap_parloop_74108_total_runs;
    int64_t futhark_mc_segmap_parloop_74108_total_iter;
    int64_t *futhark_mc_segmap_task_74106_total_runtime;
    int *futhark_mc_segmap_task_74106_runs;
    int64_t *futhark_mc_segmap_task_74106_iter;
    int64_t futhark_mc_segmap_task_74106_total_time;
    int64_t futhark_mc_segmap_task_74106_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74118_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74118_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74118_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74118_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74118_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74118_total_iter;
    int64_t *futhark_mc_segred_task_74115_total_runtime;
    int *futhark_mc_segred_task_74115_runs;
    int64_t *futhark_mc_segred_task_74115_iter;
    int64_t futhark_mc_segred_task_74115_total_time;
    int64_t futhark_mc_segred_task_74115_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74123_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74123_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74123_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74123_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74123_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74123_total_iter;
    int64_t *futhark_mc_segred_task_74120_total_runtime;
    int *futhark_mc_segred_task_74120_runs;
    int64_t *futhark_mc_segred_task_74120_iter;
    int64_t futhark_mc_segred_task_74120_total_time;
    int64_t futhark_mc_segred_task_74120_total_iter;
    int64_t *futhark_mc_segmap_parloop_74112_total_runtime;
    int *futhark_mc_segmap_parloop_74112_runs;
    int64_t *futhark_mc_segmap_parloop_74112_iter;
    int64_t futhark_mc_segmap_parloop_74112_total_total_runtime;
    int futhark_mc_segmap_parloop_74112_total_runs;
    int64_t futhark_mc_segmap_parloop_74112_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74110_total_runtime;
    int *futhark_mc_segmap_nested_task_74110_runs;
    int64_t *futhark_mc_segmap_nested_task_74110_iter;
    int64_t *futhark_mc_segmap_parloop_74078_total_runtime;
    int *futhark_mc_segmap_parloop_74078_runs;
    int64_t *futhark_mc_segmap_parloop_74078_iter;
    int64_t futhark_mc_segmap_parloop_74078_total_total_runtime;
    int futhark_mc_segmap_parloop_74078_total_runs;
    int64_t futhark_mc_segmap_parloop_74078_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74076_total_runtime;
    int *futhark_mc_segmap_nested_task_74076_runs;
    int64_t *futhark_mc_segmap_nested_task_74076_iter;
    int64_t *futhark_mc_segmap_parloop_74127_total_runtime;
    int *futhark_mc_segmap_parloop_74127_runs;
    int64_t *futhark_mc_segmap_parloop_74127_iter;
    int64_t futhark_mc_segmap_parloop_74127_total_total_runtime;
    int futhark_mc_segmap_parloop_74127_total_runs;
    int64_t futhark_mc_segmap_parloop_74127_total_iter;
    int64_t *futhark_mc_segmap_task_74125_total_runtime;
    int *futhark_mc_segmap_task_74125_runs;
    int64_t *futhark_mc_segmap_task_74125_iter;
    int64_t futhark_mc_segmap_task_74125_total_time;
    int64_t futhark_mc_segmap_task_74125_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74153_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74153_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74153_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74153_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74153_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74153_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74155_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74155_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74155_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74155_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74155_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74155_total_iter;
    int64_t *futhark_mc_segscan_task_74150_total_runtime;
    int *futhark_mc_segscan_task_74150_runs;
    int64_t *futhark_mc_segscan_task_74150_iter;
    int64_t futhark_mc_segscan_task_74150_total_time;
    int64_t futhark_mc_segscan_task_74150_total_iter;
    int64_t *futhark_mc_segmap_parloop_74159_total_runtime;
    int *futhark_mc_segmap_parloop_74159_runs;
    int64_t *futhark_mc_segmap_parloop_74159_iter;
    int64_t futhark_mc_segmap_parloop_74159_total_total_runtime;
    int futhark_mc_segmap_parloop_74159_total_runs;
    int64_t futhark_mc_segmap_parloop_74159_total_iter;
    int64_t *futhark_mc_segmap_task_74157_total_runtime;
    int *futhark_mc_segmap_task_74157_runs;
    int64_t *futhark_mc_segmap_task_74157_iter;
    int64_t futhark_mc_segmap_task_74157_total_time;
    int64_t futhark_mc_segmap_task_74157_total_iter;
    int64_t *futhark_mc_segmap_parloop_74163_total_runtime;
    int *futhark_mc_segmap_parloop_74163_runs;
    int64_t *futhark_mc_segmap_parloop_74163_iter;
    int64_t futhark_mc_segmap_parloop_74163_total_total_runtime;
    int futhark_mc_segmap_parloop_74163_total_runs;
    int64_t futhark_mc_segmap_parloop_74163_total_iter;
    int64_t *futhark_mc_segmap_task_74161_total_runtime;
    int *futhark_mc_segmap_task_74161_runs;
    int64_t *futhark_mc_segmap_task_74161_iter;
    int64_t futhark_mc_segmap_task_74161_total_time;
    int64_t futhark_mc_segmap_task_74161_total_iter;
    int64_t *futhark_mc_segmap_parloop_74167_total_runtime;
    int *futhark_mc_segmap_parloop_74167_runs;
    int64_t *futhark_mc_segmap_parloop_74167_iter;
    int64_t futhark_mc_segmap_parloop_74167_total_total_runtime;
    int futhark_mc_segmap_parloop_74167_total_runs;
    int64_t futhark_mc_segmap_parloop_74167_total_iter;
    int64_t *futhark_mc_segmap_task_74165_total_runtime;
    int *futhark_mc_segmap_task_74165_runs;
    int64_t *futhark_mc_segmap_task_74165_iter;
    int64_t futhark_mc_segmap_task_74165_total_time;
    int64_t futhark_mc_segmap_task_74165_total_iter;
    int64_t *futhark_mc_segmap_parloop_74171_total_runtime;
    int *futhark_mc_segmap_parloop_74171_runs;
    int64_t *futhark_mc_segmap_parloop_74171_iter;
    int64_t futhark_mc_segmap_parloop_74171_total_total_runtime;
    int futhark_mc_segmap_parloop_74171_total_runs;
    int64_t futhark_mc_segmap_parloop_74171_total_iter;
    int64_t *futhark_mc_segmap_task_74169_total_runtime;
    int *futhark_mc_segmap_task_74169_runs;
    int64_t *futhark_mc_segmap_task_74169_iter;
    int64_t futhark_mc_segmap_task_74169_total_time;
    int64_t futhark_mc_segmap_task_74169_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74185_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74185_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74185_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74185_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74185_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74185_total_iter;
    int64_t *futhark_mc_segred_task_74180_total_runtime;
    int *futhark_mc_segred_task_74180_runs;
    int64_t *futhark_mc_segred_task_74180_iter;
    int64_t futhark_mc_segred_task_74180_total_time;
    int64_t futhark_mc_segred_task_74180_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74191_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74191_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74191_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74191_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74191_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74191_total_iter;
    int64_t *futhark_mc_segred_task_74187_total_runtime;
    int *futhark_mc_segred_task_74187_runs;
    int64_t *futhark_mc_segred_task_74187_iter;
    int64_t futhark_mc_segred_task_74187_total_time;
    int64_t futhark_mc_segred_task_74187_total_iter;
    int64_t *futhark_mc_segmap_parloop_74176_total_runtime;
    int *futhark_mc_segmap_parloop_74176_runs;
    int64_t *futhark_mc_segmap_parloop_74176_iter;
    int64_t futhark_mc_segmap_parloop_74176_total_total_runtime;
    int futhark_mc_segmap_parloop_74176_total_runs;
    int64_t futhark_mc_segmap_parloop_74176_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74174_total_runtime;
    int *futhark_mc_segmap_nested_task_74174_runs;
    int64_t *futhark_mc_segmap_nested_task_74174_iter;
    int64_t *futhark_mc_segmap_parloop_74140_total_runtime;
    int *futhark_mc_segmap_parloop_74140_runs;
    int64_t *futhark_mc_segmap_parloop_74140_iter;
    int64_t futhark_mc_segmap_parloop_74140_total_total_runtime;
    int futhark_mc_segmap_parloop_74140_total_runs;
    int64_t futhark_mc_segmap_parloop_74140_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74138_total_runtime;
    int *futhark_mc_segmap_nested_task_74138_runs;
    int64_t *futhark_mc_segmap_nested_task_74138_iter;
    int64_t *futhark_mc_segmap_parloop_74195_total_runtime;
    int *futhark_mc_segmap_parloop_74195_runs;
    int64_t *futhark_mc_segmap_parloop_74195_iter;
    int64_t futhark_mc_segmap_parloop_74195_total_total_runtime;
    int futhark_mc_segmap_parloop_74195_total_runs;
    int64_t futhark_mc_segmap_parloop_74195_total_iter;
    int64_t *futhark_mc_segmap_task_74193_total_runtime;
    int *futhark_mc_segmap_task_74193_runs;
    int64_t *futhark_mc_segmap_task_74193_iter;
    int64_t futhark_mc_segmap_task_74193_total_time;
    int64_t futhark_mc_segmap_task_74193_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74223_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74223_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74223_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74223_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74223_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74223_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74225_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74225_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74225_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74225_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74225_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74225_total_iter;
    int64_t *futhark_mc_segscan_task_74220_total_runtime;
    int *futhark_mc_segscan_task_74220_runs;
    int64_t *futhark_mc_segscan_task_74220_iter;
    int64_t futhark_mc_segscan_task_74220_total_time;
    int64_t futhark_mc_segscan_task_74220_total_iter;
    int64_t *futhark_mc_segmap_parloop_74229_total_runtime;
    int *futhark_mc_segmap_parloop_74229_runs;
    int64_t *futhark_mc_segmap_parloop_74229_iter;
    int64_t futhark_mc_segmap_parloop_74229_total_total_runtime;
    int futhark_mc_segmap_parloop_74229_total_runs;
    int64_t futhark_mc_segmap_parloop_74229_total_iter;
    int64_t *futhark_mc_segmap_task_74227_total_runtime;
    int *futhark_mc_segmap_task_74227_runs;
    int64_t *futhark_mc_segmap_task_74227_iter;
    int64_t futhark_mc_segmap_task_74227_total_time;
    int64_t futhark_mc_segmap_task_74227_total_iter;
    int64_t *futhark_mc_segmap_parloop_74233_total_runtime;
    int *futhark_mc_segmap_parloop_74233_runs;
    int64_t *futhark_mc_segmap_parloop_74233_iter;
    int64_t futhark_mc_segmap_parloop_74233_total_total_runtime;
    int futhark_mc_segmap_parloop_74233_total_runs;
    int64_t futhark_mc_segmap_parloop_74233_total_iter;
    int64_t *futhark_mc_segmap_task_74231_total_runtime;
    int *futhark_mc_segmap_task_74231_runs;
    int64_t *futhark_mc_segmap_task_74231_iter;
    int64_t futhark_mc_segmap_task_74231_total_time;
    int64_t futhark_mc_segmap_task_74231_total_iter;
    int64_t *futhark_mc_segmap_parloop_74237_total_runtime;
    int *futhark_mc_segmap_parloop_74237_runs;
    int64_t *futhark_mc_segmap_parloop_74237_iter;
    int64_t futhark_mc_segmap_parloop_74237_total_total_runtime;
    int futhark_mc_segmap_parloop_74237_total_runs;
    int64_t futhark_mc_segmap_parloop_74237_total_iter;
    int64_t *futhark_mc_segmap_task_74235_total_runtime;
    int *futhark_mc_segmap_task_74235_runs;
    int64_t *futhark_mc_segmap_task_74235_iter;
    int64_t futhark_mc_segmap_task_74235_total_time;
    int64_t futhark_mc_segmap_task_74235_total_iter;
    int64_t *futhark_mc_segmap_parloop_74241_total_runtime;
    int *futhark_mc_segmap_parloop_74241_runs;
    int64_t *futhark_mc_segmap_parloop_74241_iter;
    int64_t futhark_mc_segmap_parloop_74241_total_total_runtime;
    int futhark_mc_segmap_parloop_74241_total_runs;
    int64_t futhark_mc_segmap_parloop_74241_total_iter;
    int64_t *futhark_mc_segmap_task_74239_total_runtime;
    int *futhark_mc_segmap_task_74239_runs;
    int64_t *futhark_mc_segmap_task_74239_iter;
    int64_t futhark_mc_segmap_task_74239_total_time;
    int64_t futhark_mc_segmap_task_74239_total_iter;
    int64_t *futhark_mc_segmap_parloop_74256_total_runtime;
    int *futhark_mc_segmap_parloop_74256_runs;
    int64_t *futhark_mc_segmap_parloop_74256_iter;
    int64_t futhark_mc_segmap_parloop_74256_total_total_runtime;
    int futhark_mc_segmap_parloop_74256_total_runs;
    int64_t futhark_mc_segmap_parloop_74256_total_iter;
    int64_t *futhark_mc_segmap_task_74254_total_runtime;
    int *futhark_mc_segmap_task_74254_runs;
    int64_t *futhark_mc_segmap_task_74254_iter;
    int64_t futhark_mc_segmap_task_74254_total_time;
    int64_t futhark_mc_segmap_task_74254_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74265_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74265_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74265_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74265_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74265_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74265_total_iter;
    int64_t *futhark_mc_segred_task_74258_total_runtime;
    int *futhark_mc_segred_task_74258_runs;
    int64_t *futhark_mc_segred_task_74258_iter;
    int64_t futhark_mc_segred_task_74258_total_time;
    int64_t futhark_mc_segred_task_74258_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74271_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74271_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74271_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74271_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74271_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74271_total_iter;
    int64_t *futhark_mc_segred_task_74267_total_runtime;
    int *futhark_mc_segred_task_74267_runs;
    int64_t *futhark_mc_segred_task_74267_iter;
    int64_t futhark_mc_segred_task_74267_total_time;
    int64_t futhark_mc_segred_task_74267_total_iter;
    int64_t *futhark_mc_segmap_parloop_74248_total_runtime;
    int *futhark_mc_segmap_parloop_74248_runs;
    int64_t *futhark_mc_segmap_parloop_74248_iter;
    int64_t futhark_mc_segmap_parloop_74248_total_total_runtime;
    int futhark_mc_segmap_parloop_74248_total_runs;
    int64_t futhark_mc_segmap_parloop_74248_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74246_total_runtime;
    int *futhark_mc_segmap_nested_task_74246_runs;
    int64_t *futhark_mc_segmap_nested_task_74246_iter;
    int64_t *futhark_mc_segmap_parloop_74210_total_runtime;
    int *futhark_mc_segmap_parloop_74210_runs;
    int64_t *futhark_mc_segmap_parloop_74210_iter;
    int64_t futhark_mc_segmap_parloop_74210_total_total_runtime;
    int futhark_mc_segmap_parloop_74210_total_runs;
    int64_t futhark_mc_segmap_parloop_74210_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74208_total_runtime;
    int *futhark_mc_segmap_nested_task_74208_runs;
    int64_t *futhark_mc_segmap_nested_task_74208_iter;
    int64_t *futhark_mc_segmap_parloop_74275_total_runtime;
    int *futhark_mc_segmap_parloop_74275_runs;
    int64_t *futhark_mc_segmap_parloop_74275_iter;
    int64_t futhark_mc_segmap_parloop_74275_total_total_runtime;
    int futhark_mc_segmap_parloop_74275_total_runs;
    int64_t futhark_mc_segmap_parloop_74275_total_iter;
    int64_t *futhark_mc_segmap_task_74273_total_runtime;
    int *futhark_mc_segmap_task_74273_runs;
    int64_t *futhark_mc_segmap_task_74273_iter;
    int64_t futhark_mc_segmap_task_74273_total_time;
    int64_t futhark_mc_segmap_task_74273_total_iter;
    int64_t *futhark_mc_segmap_parloop_74284_total_runtime;
    int *futhark_mc_segmap_parloop_74284_runs;
    int64_t *futhark_mc_segmap_parloop_74284_iter;
    int64_t futhark_mc_segmap_parloop_74284_total_total_runtime;
    int futhark_mc_segmap_parloop_74284_total_runs;
    int64_t futhark_mc_segmap_parloop_74284_total_iter;
    int64_t *futhark_mc_segmap_task_74282_total_runtime;
    int *futhark_mc_segmap_task_74282_runs;
    int64_t *futhark_mc_segmap_task_74282_iter;
    int64_t futhark_mc_segmap_task_74282_total_time;
    int64_t futhark_mc_segmap_task_74282_total_iter;
    int64_t *futhark_mc_segmap_parloop_74279_total_runtime;
    int *futhark_mc_segmap_parloop_74279_runs;
    int64_t *futhark_mc_segmap_parloop_74279_iter;
    int64_t futhark_mc_segmap_parloop_74279_total_total_runtime;
    int futhark_mc_segmap_parloop_74279_total_runs;
    int64_t futhark_mc_segmap_parloop_74279_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74277_total_runtime;
    int *futhark_mc_segmap_nested_task_74277_runs;
    int64_t *futhark_mc_segmap_nested_task_74277_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_73884_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73884_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73884_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73884_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73884_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73884_total_iter = 0;
    ctx->futhark_mc_segmap_task_73882_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73882_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73882_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73882_total_time = 0;
    ctx->futhark_mc_segmap_task_73882_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73906_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73906_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73906_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73908_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73908_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73908_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter = 0;
    ctx->futhark_mc_segscan_task_73903_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73903_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73903_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73903_total_time = 0;
    ctx->futhark_mc_segscan_task_73903_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73912_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73912_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73912_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73912_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73912_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73912_total_iter = 0;
    ctx->futhark_mc_segmap_task_73910_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73910_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73910_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73910_total_time = 0;
    ctx->futhark_mc_segmap_task_73910_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73916_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73916_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73916_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73916_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73916_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73916_total_iter = 0;
    ctx->futhark_mc_segmap_task_73914_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73914_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73914_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73914_total_time = 0;
    ctx->futhark_mc_segmap_task_73914_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73920_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73920_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73920_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73920_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73920_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73920_total_iter = 0;
    ctx->futhark_mc_segmap_task_73918_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73918_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73918_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73918_total_time = 0;
    ctx->futhark_mc_segmap_task_73918_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73924_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73924_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73924_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73924_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73924_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73924_total_iter = 0;
    ctx->futhark_mc_segmap_task_73922_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73922_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73922_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73922_total_time = 0;
    ctx->futhark_mc_segmap_task_73922_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73932_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73932_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73932_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter = 0;
    ctx->futhark_mc_segred_task_73929_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73929_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73929_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73929_total_time = 0;
    ctx->futhark_mc_segred_task_73929_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73937_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73937_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73937_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter = 0;
    ctx->futhark_mc_segred_task_73934_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_total_time = 0;
    ctx->futhark_mc_segred_task_73934_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73927_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73927_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73927_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73927_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73927_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73927_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73925_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73925_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73925_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73894_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73894_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73894_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73894_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73894_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73894_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73892_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73892_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73892_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73941_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73941_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73941_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73941_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73941_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73941_total_iter = 0;
    ctx->futhark_mc_segmap_task_73939_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73939_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73939_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73939_total_time = 0;
    ctx->futhark_mc_segmap_task_73939_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73965_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73965_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73965_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73967_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73967_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73967_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter = 0;
    ctx->futhark_mc_segscan_task_73962_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73962_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73962_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73962_total_time = 0;
    ctx->futhark_mc_segscan_task_73962_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73971_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73971_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73971_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73971_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73971_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73971_total_iter = 0;
    ctx->futhark_mc_segmap_task_73969_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73969_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73969_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73969_total_time = 0;
    ctx->futhark_mc_segmap_task_73969_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73975_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73975_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73975_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73975_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73975_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73975_total_iter = 0;
    ctx->futhark_mc_segmap_task_73973_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73973_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73973_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73973_total_time = 0;
    ctx->futhark_mc_segmap_task_73973_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_iter = 0;
    ctx->futhark_mc_segmap_task_73977_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_total_time = 0;
    ctx->futhark_mc_segmap_task_73977_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_iter = 0;
    ctx->futhark_mc_segmap_task_73981_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_total_time = 0;
    ctx->futhark_mc_segmap_task_73981_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73993_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73993_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73993_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter = 0;
    ctx->futhark_mc_segred_task_73988_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73988_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73988_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73988_total_time = 0;
    ctx->futhark_mc_segred_task_73988_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73999_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73999_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73999_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter = 0;
    ctx->futhark_mc_segred_task_73995_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73995_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73995_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73995_total_time = 0;
    ctx->futhark_mc_segred_task_73995_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73986_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73986_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73986_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73986_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73986_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73986_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73984_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73984_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73984_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73952_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73952_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73952_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73952_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73952_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73952_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73950_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73950_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73950_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74003_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74003_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74003_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74003_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74003_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74003_total_iter = 0;
    ctx->futhark_mc_segmap_task_74001_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74001_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74001_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74001_total_time = 0;
    ctx->futhark_mc_segmap_task_74001_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74027_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74027_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74027_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74029_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74029_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74029_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter = 0;
    ctx->futhark_mc_segscan_task_74024_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74024_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74024_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74024_total_time = 0;
    ctx->futhark_mc_segscan_task_74024_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74033_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74033_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74033_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74033_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74033_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74033_total_iter = 0;
    ctx->futhark_mc_segmap_task_74031_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74031_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74031_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74031_total_time = 0;
    ctx->futhark_mc_segmap_task_74031_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74037_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74037_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74037_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74037_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74037_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74037_total_iter = 0;
    ctx->futhark_mc_segmap_task_74035_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74035_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74035_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74035_total_time = 0;
    ctx->futhark_mc_segmap_task_74035_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74041_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74041_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74041_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74041_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74041_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74041_total_iter = 0;
    ctx->futhark_mc_segmap_task_74039_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74039_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74039_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74039_total_time = 0;
    ctx->futhark_mc_segmap_task_74039_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74045_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74045_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74045_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74045_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74045_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74045_total_iter = 0;
    ctx->futhark_mc_segmap_task_74043_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74043_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74043_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74043_total_time = 0;
    ctx->futhark_mc_segmap_task_74043_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74057_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74057_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74057_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter = 0;
    ctx->futhark_mc_segred_task_74050_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74050_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74050_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74050_total_time = 0;
    ctx->futhark_mc_segred_task_74050_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74063_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74063_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74063_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter = 0;
    ctx->futhark_mc_segred_task_74059_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74059_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74059_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74059_total_time = 0;
    ctx->futhark_mc_segred_task_74059_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74048_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74048_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74048_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74048_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74048_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74048_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74046_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74046_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74046_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74014_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74014_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74014_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74014_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74014_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74014_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74012_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74012_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74012_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74067_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74067_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74067_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74067_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74067_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74067_total_iter = 0;
    ctx->futhark_mc_segmap_task_74065_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74065_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74065_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74065_total_time = 0;
    ctx->futhark_mc_segmap_task_74065_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74090_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74090_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74090_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74092_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74092_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74092_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter = 0;
    ctx->futhark_mc_segscan_task_74087_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74087_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74087_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74087_total_time = 0;
    ctx->futhark_mc_segscan_task_74087_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74096_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74096_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74096_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74096_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74096_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74096_total_iter = 0;
    ctx->futhark_mc_segmap_task_74094_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74094_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74094_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74094_total_time = 0;
    ctx->futhark_mc_segmap_task_74094_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74100_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74100_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74100_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74100_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74100_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74100_total_iter = 0;
    ctx->futhark_mc_segmap_task_74098_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74098_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74098_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74098_total_time = 0;
    ctx->futhark_mc_segmap_task_74098_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74104_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74104_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74104_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74104_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74104_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74104_total_iter = 0;
    ctx->futhark_mc_segmap_task_74102_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74102_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74102_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74102_total_time = 0;
    ctx->futhark_mc_segmap_task_74102_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74108_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74108_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74108_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74108_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74108_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74108_total_iter = 0;
    ctx->futhark_mc_segmap_task_74106_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74106_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74106_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74106_total_time = 0;
    ctx->futhark_mc_segmap_task_74106_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74118_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74118_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74118_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter = 0;
    ctx->futhark_mc_segred_task_74115_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74115_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74115_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74115_total_time = 0;
    ctx->futhark_mc_segred_task_74115_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74123_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74123_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74123_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter = 0;
    ctx->futhark_mc_segred_task_74120_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74120_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74120_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74120_total_time = 0;
    ctx->futhark_mc_segred_task_74120_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74112_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74112_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74112_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74112_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74112_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74112_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74110_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74110_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74110_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74078_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74078_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74078_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74078_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74078_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74078_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74076_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74076_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74076_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74127_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74127_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74127_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74127_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74127_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74127_total_iter = 0;
    ctx->futhark_mc_segmap_task_74125_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74125_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74125_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74125_total_time = 0;
    ctx->futhark_mc_segmap_task_74125_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74153_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74153_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74153_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74155_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74155_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74155_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter = 0;
    ctx->futhark_mc_segscan_task_74150_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74150_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74150_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74150_total_time = 0;
    ctx->futhark_mc_segscan_task_74150_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74159_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74159_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74159_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74159_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74159_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74159_total_iter = 0;
    ctx->futhark_mc_segmap_task_74157_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74157_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74157_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74157_total_time = 0;
    ctx->futhark_mc_segmap_task_74157_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74163_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74163_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74163_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74163_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74163_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74163_total_iter = 0;
    ctx->futhark_mc_segmap_task_74161_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74161_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74161_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74161_total_time = 0;
    ctx->futhark_mc_segmap_task_74161_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74167_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74167_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74167_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74167_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74167_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74167_total_iter = 0;
    ctx->futhark_mc_segmap_task_74165_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74165_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74165_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74165_total_time = 0;
    ctx->futhark_mc_segmap_task_74165_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74171_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74171_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74171_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74171_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74171_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74171_total_iter = 0;
    ctx->futhark_mc_segmap_task_74169_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74169_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74169_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74169_total_time = 0;
    ctx->futhark_mc_segmap_task_74169_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74185_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74185_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74185_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter = 0;
    ctx->futhark_mc_segred_task_74180_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74180_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74180_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74180_total_time = 0;
    ctx->futhark_mc_segred_task_74180_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74191_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74191_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74191_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter = 0;
    ctx->futhark_mc_segred_task_74187_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74187_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74187_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74187_total_time = 0;
    ctx->futhark_mc_segred_task_74187_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74176_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74176_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74176_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74176_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74176_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74176_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74174_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74174_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74174_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74140_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74140_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74140_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74140_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74140_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74140_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74138_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74138_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74138_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74195_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74195_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74195_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74195_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74195_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74195_total_iter = 0;
    ctx->futhark_mc_segmap_task_74193_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74193_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74193_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74193_total_time = 0;
    ctx->futhark_mc_segmap_task_74193_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74223_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74223_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74223_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74225_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74225_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74225_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter = 0;
    ctx->futhark_mc_segscan_task_74220_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74220_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74220_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74220_total_time = 0;
    ctx->futhark_mc_segscan_task_74220_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74229_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74229_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74229_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74229_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74229_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74229_total_iter = 0;
    ctx->futhark_mc_segmap_task_74227_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74227_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74227_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74227_total_time = 0;
    ctx->futhark_mc_segmap_task_74227_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74233_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74233_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74233_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74233_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74233_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74233_total_iter = 0;
    ctx->futhark_mc_segmap_task_74231_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74231_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74231_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74231_total_time = 0;
    ctx->futhark_mc_segmap_task_74231_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74237_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74237_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74237_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74237_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74237_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74237_total_iter = 0;
    ctx->futhark_mc_segmap_task_74235_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74235_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74235_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74235_total_time = 0;
    ctx->futhark_mc_segmap_task_74235_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74241_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74241_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74241_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74241_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74241_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74241_total_iter = 0;
    ctx->futhark_mc_segmap_task_74239_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74239_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74239_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74239_total_time = 0;
    ctx->futhark_mc_segmap_task_74239_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74256_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74256_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74256_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74256_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74256_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74256_total_iter = 0;
    ctx->futhark_mc_segmap_task_74254_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74254_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74254_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74254_total_time = 0;
    ctx->futhark_mc_segmap_task_74254_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74265_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74265_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74265_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter = 0;
    ctx->futhark_mc_segred_task_74258_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74258_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74258_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74258_total_time = 0;
    ctx->futhark_mc_segred_task_74258_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74271_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74271_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74271_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter = 0;
    ctx->futhark_mc_segred_task_74267_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74267_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74267_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74267_total_time = 0;
    ctx->futhark_mc_segred_task_74267_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74248_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74248_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74248_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74248_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74248_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74248_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74246_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74246_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74246_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74210_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74210_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74210_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74210_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74210_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74210_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74208_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74208_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74208_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74275_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74275_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74275_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74275_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74275_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74275_total_iter = 0;
    ctx->futhark_mc_segmap_task_74273_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74273_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74273_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74273_total_time = 0;
    ctx->futhark_mc_segmap_task_74273_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74284_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74284_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74284_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74284_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74284_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74284_total_iter = 0;
    ctx->futhark_mc_segmap_task_74282_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74282_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74282_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74282_total_time = 0;
    ctx->futhark_mc_segmap_task_74282_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74279_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74279_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74279_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74279_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74279_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74279_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74277_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74277_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74277_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73884          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73884_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73884_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73884_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73884_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73884_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73884_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73884_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73884_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73884_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73884_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73884_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73884_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73884_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73884_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73884_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73884_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73884_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73884_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73884_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73884_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73884_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73884_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73884_total_iter /
                (ctx->futhark_mc_segmap_parloop_73884_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73884_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73884_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73884_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_73906    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_73906_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73906_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73906_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_73906_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73906_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73906_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73906_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73906_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73906_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73906_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_73906_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_73908    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_73908_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73908_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73908_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_73908_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73908_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73908_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73908_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73908_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73908_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73908_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_73908_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_73903            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_73903_runs[i],
                    (long) ctx->futhark_mc_segscan_task_73903_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73903_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73903_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_73903_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_73903_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73903_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_73903_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_73903_iter[i],
                    (long) ctx->futhark_mc_segscan_task_73903_iter[i] /
                    (ctx->futhark_mc_segscan_task_73903_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73903_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73912          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73912_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73912_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73912_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73912_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73912_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73912_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73912_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73912_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73912_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73912_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73912_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73912_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73912_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73912_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73912_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73912_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73912_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73912_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73912_total_iter /
                (ctx->futhark_mc_segmap_parloop_73912_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73912_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73912_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73912_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73910             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73910_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73910_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73910_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73910_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73910_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73910_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73910_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73910_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73910_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73910_iter[i] /
                    (ctx->futhark_mc_segmap_task_73910_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73910_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73916          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73916_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73916_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73916_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73916_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73916_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73916_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73916_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73916_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73916_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73916_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73916_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73916_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73916_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73916_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73916_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73916_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73916_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73916_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73916_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73916_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73916_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73916_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73916_total_iter /
                (ctx->futhark_mc_segmap_parloop_73916_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73916_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73916_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73916_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73914             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73914_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73914_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73914_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73914_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73914_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73914_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73914_iter[i] /
                    (ctx->futhark_mc_segmap_task_73914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73914_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73920          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73920_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73920_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73920_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73920_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73920_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73920_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73920_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73920_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73920_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73920_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73920_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73920_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73920_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73920_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73920_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73920_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73920_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73920_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73920_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73920_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73920_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73920_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73920_total_iter /
                (ctx->futhark_mc_segmap_parloop_73920_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73920_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73920_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73920_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73918             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73918_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73918_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73918_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73918_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73918_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73918_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73918_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73918_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73918_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73918_iter[i] /
                    (ctx->futhark_mc_segmap_task_73918_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73918_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73924          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73924_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73924_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73924_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73924_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73924_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73924_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73924_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73924_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73924_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73924_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73924_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73924_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73924_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73924_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73924_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73924_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73924_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73924_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73924_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73924_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73924_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73924_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73924_total_iter /
                (ctx->futhark_mc_segmap_parloop_73924_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73924_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73924_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73924_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73932  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73932_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73932_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73932_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73932_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73932_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73932_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73932_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73932_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73932_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73932_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73932_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73929             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73929_runs[i],
                    (long) ctx->futhark_mc_segred_task_73929_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73929_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73929_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73929_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73929_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73929_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73929_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73929_iter[i],
                    (long) ctx->futhark_mc_segred_task_73929_iter[i] /
                    (ctx->futhark_mc_segred_task_73929_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73929_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73937  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73937_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73937_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73937_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73937_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73937_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73937_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73937_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73937_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73937_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73937_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73937_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73934             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73934_runs[i],
                    (long) ctx->futhark_mc_segred_task_73934_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73934_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73934_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73934_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73934_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73934_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73934_iter[i],
                    (long) ctx->futhark_mc_segred_task_73934_iter[i] /
                    (ctx->futhark_mc_segred_task_73934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73934_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73927          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73927_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73927_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73927_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73927_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73927_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73927_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73927_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73927_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73927_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73927_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73927_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73927_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73927_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73927_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73927_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73927_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73927_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73927_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73927_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73927_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73927_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73927_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73927_total_iter /
                (ctx->futhark_mc_segmap_parloop_73927_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73927_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73927_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73927_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73922             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73922_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73922_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73922_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73922_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73922_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73922_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73922_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73922_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73922_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73922_iter[i] /
                    (ctx->futhark_mc_segmap_task_73922_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73922_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73925      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73925_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73925_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73925_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73925_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73925_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73925_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73925_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73925_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73894          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73894_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73894_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73894_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73894_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73894_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73894_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73894_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73894_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73894_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73894_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73894_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73894_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73894_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73894_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73894_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73894_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73894_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73894_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73894_total_iter /
                (ctx->futhark_mc_segmap_parloop_73894_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73894_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73894_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73894_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73882             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73882_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73882_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73882_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73882_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73882_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73882_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73882_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73882_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73882_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73882_iter[i] /
                    (ctx->futhark_mc_segmap_task_73882_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73882_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73892      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73892_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73892_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73892_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73892_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73892_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73892_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73892_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73892_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73892_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73892_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73892_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73892_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73941          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73941_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73941_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73941_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73941_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73941_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73941_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73941_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73941_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73941_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73941_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73941_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73941_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73941_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73941_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73941_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73941_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73941_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73941_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73941_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73941_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73941_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73941_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73941_total_iter /
                (ctx->futhark_mc_segmap_parloop_73941_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73941_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73941_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73941_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_73965    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_73965_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73965_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73965_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_73965_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73965_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73965_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73965_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73965_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73965_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73965_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_73965_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_73967    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_73967_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73967_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73967_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_73967_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73967_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73967_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73967_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73967_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73967_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73967_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_73967_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_73962            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_73962_runs[i],
                    (long) ctx->futhark_mc_segscan_task_73962_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73962_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73962_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_73962_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_73962_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73962_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_73962_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_73962_iter[i],
                    (long) ctx->futhark_mc_segscan_task_73962_iter[i] /
                    (ctx->futhark_mc_segscan_task_73962_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73962_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73971          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73971_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73971_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73971_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73971_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73971_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73971_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73971_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73971_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73971_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73971_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73971_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73971_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73971_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73971_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73971_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73971_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73971_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73971_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73971_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73971_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73971_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73971_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73971_total_iter /
                (ctx->futhark_mc_segmap_parloop_73971_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73971_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73971_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73971_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73969             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73969_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73969_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73969_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73969_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73969_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73969_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73969_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73969_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73969_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73969_iter[i] /
                    (ctx->futhark_mc_segmap_task_73969_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73969_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73975          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73975_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73975_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73975_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73975_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73975_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73975_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73975_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73975_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73975_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73975_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73975_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73975_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73975_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73975_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73975_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73975_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73975_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73975_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73975_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73975_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73975_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73975_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73975_total_iter /
                (ctx->futhark_mc_segmap_parloop_73975_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73975_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73975_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73975_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73973             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73973_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73973_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73973_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73973_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73973_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73973_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73973_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73973_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73973_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73973_iter[i] /
                    (ctx->futhark_mc_segmap_task_73973_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73973_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73979          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73979_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73979_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73979_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73979_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73979_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73979_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73979_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73979_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73979_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73979_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73979_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73979_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73979_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73979_total_iter /
                (ctx->futhark_mc_segmap_parloop_73979_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73979_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73979_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73979_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73977             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73977_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73977_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73977_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73977_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73977_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73977_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73977_iter[i] /
                    (ctx->futhark_mc_segmap_task_73977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73977_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73983          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73983_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73983_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73983_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73983_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73983_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73983_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73983_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73983_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73983_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73983_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73983_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73983_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73983_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73983_total_iter /
                (ctx->futhark_mc_segmap_parloop_73983_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73983_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73983_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73983_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73993  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73993_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73993_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73993_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73993_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73993_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73993_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73993_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73993_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73993_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73993_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73993_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73988             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73988_runs[i],
                    (long) ctx->futhark_mc_segred_task_73988_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73988_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73988_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73988_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73988_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73988_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73988_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73988_iter[i],
                    (long) ctx->futhark_mc_segred_task_73988_iter[i] /
                    (ctx->futhark_mc_segred_task_73988_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73988_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73999  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73999_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73999_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73999_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73999_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73999_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73999_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73999_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73999_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73999_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73999_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73999_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73995             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73995_runs[i],
                    (long) ctx->futhark_mc_segred_task_73995_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73995_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73995_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73995_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73995_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73995_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73995_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73995_iter[i],
                    (long) ctx->futhark_mc_segred_task_73995_iter[i] /
                    (ctx->futhark_mc_segred_task_73995_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73995_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73986          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73986_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73986_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73986_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73986_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73986_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73986_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73986_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73986_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73986_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73986_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73986_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73986_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73986_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73986_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73986_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73986_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73986_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73986_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73986_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73986_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73986_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73986_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73986_total_iter /
                (ctx->futhark_mc_segmap_parloop_73986_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73986_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73986_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73986_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73981             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73981_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73981_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73981_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73981_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73981_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73981_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73981_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73981_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73981_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73981_iter[i] /
                    (ctx->futhark_mc_segmap_task_73981_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73981_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73984      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73984_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73984_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73984_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73984_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73984_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73984_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73984_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73984_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73984_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73984_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73984_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73984_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73952          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73952_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73952_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73952_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73952_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73952_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73952_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73952_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73952_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73952_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73952_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73952_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73952_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73952_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73952_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73952_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73952_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73952_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73952_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73952_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73952_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73952_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73952_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73952_total_iter /
                (ctx->futhark_mc_segmap_parloop_73952_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73952_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73952_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73952_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73939             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73939_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73939_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73939_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73939_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73939_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73939_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73939_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73939_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73939_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73939_iter[i] /
                    (ctx->futhark_mc_segmap_task_73939_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73939_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73950      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73950_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73950_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73950_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73950_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73950_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73950_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73950_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73950_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73950_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73950_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73950_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73950_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74003          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74003_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74003_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74003_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74003_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74003_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74003_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74003_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74003_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74003_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74003_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74003_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74003_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74003_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74003_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74003_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74003_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74003_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74003_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74003_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74003_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74003_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74003_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74003_total_iter /
                (ctx->futhark_mc_segmap_parloop_74003_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74003_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74003_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74003_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74027    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74027_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74027_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74027_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74027_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74027_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74027_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74027_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74027_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74027_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74027_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74027_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74029    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74029_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74029_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74029_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74029_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74029_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74029_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74029_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74029_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74029_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74029_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74029_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74024            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74024_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74024_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74024_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74024_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74024_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74024_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74024_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74024_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74024_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74024_iter[i] /
                    (ctx->futhark_mc_segscan_task_74024_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74024_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74033          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74033_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74033_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74033_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74033_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74033_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74033_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74033_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74033_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74033_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74033_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74033_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74033_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74033_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74033_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74033_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74033_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74033_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74033_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74033_total_iter /
                (ctx->futhark_mc_segmap_parloop_74033_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74033_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74033_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74033_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74031             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74031_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74031_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74031_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74031_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74031_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74031_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74031_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74031_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74031_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74031_iter[i] /
                    (ctx->futhark_mc_segmap_task_74031_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74031_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74037          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74037_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74037_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74037_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74037_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74037_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74037_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74037_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74037_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74037_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74037_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74037_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74037_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74037_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74037_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74037_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74037_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74037_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74037_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74037_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74037_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74037_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74037_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74037_total_iter /
                (ctx->futhark_mc_segmap_parloop_74037_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74037_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74037_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74037_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74035             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74035_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74035_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74035_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74035_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74035_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74035_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74035_iter[i] /
                    (ctx->futhark_mc_segmap_task_74035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74035_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74041          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74041_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74041_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74041_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74041_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74041_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74041_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74041_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74041_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74041_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74041_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74041_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74041_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74041_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74041_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74041_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74041_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74041_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74041_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74041_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74041_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74041_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74041_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74041_total_iter /
                (ctx->futhark_mc_segmap_parloop_74041_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74041_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74041_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74041_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74039             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74039_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74039_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74039_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74039_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74039_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74039_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74039_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74039_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74039_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74039_iter[i] /
                    (ctx->futhark_mc_segmap_task_74039_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74039_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74045          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74045_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74045_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74045_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74045_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74045_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74045_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74045_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74045_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74045_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74045_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74045_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74045_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74045_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74045_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74045_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74045_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74045_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74045_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74045_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74045_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74045_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74045_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74045_total_iter /
                (ctx->futhark_mc_segmap_parloop_74045_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74045_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74045_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74045_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74057  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74057_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74057_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74057_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74057_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74057_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74057_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74057_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74057_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74057_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74057_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74057_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74050             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74050_runs[i],
                    (long) ctx->futhark_mc_segred_task_74050_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74050_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74050_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74050_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74050_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74050_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74050_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74050_iter[i],
                    (long) ctx->futhark_mc_segred_task_74050_iter[i] /
                    (ctx->futhark_mc_segred_task_74050_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74050_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74063  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74063_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74063_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74063_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74063_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74063_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74063_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74063_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74063_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74063_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74063_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74063_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74059             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74059_runs[i],
                    (long) ctx->futhark_mc_segred_task_74059_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74059_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74059_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74059_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74059_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74059_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74059_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74059_iter[i],
                    (long) ctx->futhark_mc_segred_task_74059_iter[i] /
                    (ctx->futhark_mc_segred_task_74059_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74059_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74048          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74048_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74048_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74048_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74048_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74048_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74048_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74048_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74048_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74048_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74048_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74048_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74048_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74048_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74048_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74048_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74048_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74048_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74048_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74048_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74048_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74048_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74048_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74048_total_iter /
                (ctx->futhark_mc_segmap_parloop_74048_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74048_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74048_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74048_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74043             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74043_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74043_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74043_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74043_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74043_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74043_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74043_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74043_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74043_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74043_iter[i] /
                    (ctx->futhark_mc_segmap_task_74043_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74043_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74046      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74046_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74046_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74046_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74046_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74046_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74046_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74046_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74046_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74046_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74046_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74046_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74046_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74014          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74014_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74014_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74014_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74014_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74014_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74014_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74014_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74014_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74014_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74014_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74014_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74014_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74014_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74014_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74014_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74014_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74014_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74014_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74014_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74014_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74014_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74014_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74014_total_iter /
                (ctx->futhark_mc_segmap_parloop_74014_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74014_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74014_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74014_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74001             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74001_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74001_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74001_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74001_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74001_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74001_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74001_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74001_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74001_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74001_iter[i] /
                    (ctx->futhark_mc_segmap_task_74001_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74001_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74012      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74012_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74012_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74012_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74012_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74012_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74012_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74012_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74012_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74012_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74012_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74012_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74012_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74067          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74067_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74067_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74067_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74067_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74067_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74067_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74067_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74067_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74067_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74067_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74067_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74067_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74067_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74067_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74067_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74067_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74067_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74067_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74067_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74067_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74067_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74067_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74067_total_iter /
                (ctx->futhark_mc_segmap_parloop_74067_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74067_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74067_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74067_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74090    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74090_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74090_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74090_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74090_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74090_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74090_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74090_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74090_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74090_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74090_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74090_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74092    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74092_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74092_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74092_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74092_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74092_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74092_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74092_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74092_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74092_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74092_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74092_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74087            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74087_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74087_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74087_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74087_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74087_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74087_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74087_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74087_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74087_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74087_iter[i] /
                    (ctx->futhark_mc_segscan_task_74087_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74087_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74096          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74096_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74096_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74096_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74096_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74096_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74096_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74096_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74096_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74096_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74096_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74096_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74096_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74096_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74096_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74096_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74096_total_iter /
                (ctx->futhark_mc_segmap_parloop_74096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74096_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74096_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74096_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74094             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74094_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74094_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74094_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74094_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74094_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74094_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74094_iter[i] /
                    (ctx->futhark_mc_segmap_task_74094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74094_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74100          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74100_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74100_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74100_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74100_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74100_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74100_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74100_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74100_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74100_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74100_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74100_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74100_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74100_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74100_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74100_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74100_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74100_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74100_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74100_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74100_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74100_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74100_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74100_total_iter /
                (ctx->futhark_mc_segmap_parloop_74100_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74100_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74100_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74100_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74098             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74098_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74098_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74098_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74098_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74098_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74098_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74098_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74098_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74098_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74098_iter[i] /
                    (ctx->futhark_mc_segmap_task_74098_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74098_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74104          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74104_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74104_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74104_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74104_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74104_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74104_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74104_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74104_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74104_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74104_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74104_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74104_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74104_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74104_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74104_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74104_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74104_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74104_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74104_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74104_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74104_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74104_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74104_total_iter /
                (ctx->futhark_mc_segmap_parloop_74104_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74104_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74104_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74104_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74102             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74102_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74102_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74102_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74102_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74102_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74102_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74102_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74102_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74102_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74102_iter[i] /
                    (ctx->futhark_mc_segmap_task_74102_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74102_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74108          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74108_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74108_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74108_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74108_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74108_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74108_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74108_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74108_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74108_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74108_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74108_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74108_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74108_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74108_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74108_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74108_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74108_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74108_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74108_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74108_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74108_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74108_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74108_total_iter /
                (ctx->futhark_mc_segmap_parloop_74108_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74108_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74108_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74108_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74118  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74118_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74118_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74118_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74118_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74118_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74118_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74118_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74118_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74118_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74118_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74118_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74115             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74115_runs[i],
                    (long) ctx->futhark_mc_segred_task_74115_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74115_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74115_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74115_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74115_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74115_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74115_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74115_iter[i],
                    (long) ctx->futhark_mc_segred_task_74115_iter[i] /
                    (ctx->futhark_mc_segred_task_74115_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74115_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74123  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74123_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74123_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74123_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74123_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74123_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74123_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74123_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74123_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74123_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74123_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74123_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74120             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74120_runs[i],
                    (long) ctx->futhark_mc_segred_task_74120_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74120_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74120_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74120_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74120_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74120_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74120_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74120_iter[i],
                    (long) ctx->futhark_mc_segred_task_74120_iter[i] /
                    (ctx->futhark_mc_segred_task_74120_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74120_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74112          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74112_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74112_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74112_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74112_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74112_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74112_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74112_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74112_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74112_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74112_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74112_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74112_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74112_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74112_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74112_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74112_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74112_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74112_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74112_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74112_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74112_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74112_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74112_total_iter /
                (ctx->futhark_mc_segmap_parloop_74112_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74112_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74112_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74112_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74106             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74106_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74106_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74106_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74106_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74106_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74106_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74106_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74106_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74106_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74106_iter[i] /
                    (ctx->futhark_mc_segmap_task_74106_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74106_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74110      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74110_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74110_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74110_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74110_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74110_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74110_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74110_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74110_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74110_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74110_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74110_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74110_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74078          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74078_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74078_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74078_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74078_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74078_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74078_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74078_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74078_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74078_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74078_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74078_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74078_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74078_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74078_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74078_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74078_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74078_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74078_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74078_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74078_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74078_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74078_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74078_total_iter /
                (ctx->futhark_mc_segmap_parloop_74078_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74078_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74078_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74078_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74065             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74065_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74065_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74065_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74065_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74065_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74065_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74065_iter[i] /
                    (ctx->futhark_mc_segmap_task_74065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74065_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74076      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74076_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74076_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74076_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74076_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74076_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74076_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74076_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74076_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74076_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74076_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74076_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74076_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74127          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74127_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74127_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74127_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74127_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74127_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74127_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74127_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74127_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74127_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74127_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74127_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74127_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74127_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74127_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74127_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74127_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74127_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74127_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74127_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74127_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74127_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74127_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74127_total_iter /
                (ctx->futhark_mc_segmap_parloop_74127_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74127_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74127_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74127_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74153    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74153_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74153_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74153_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74153_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74153_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74153_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74153_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74153_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74153_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74153_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74153_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74155    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74155_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74155_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74155_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74155_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74155_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74155_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74155_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74155_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74155_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74155_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74155_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74150            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74150_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74150_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74150_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74150_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74150_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74150_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74150_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74150_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74150_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74150_iter[i] /
                    (ctx->futhark_mc_segscan_task_74150_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74150_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74159          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74159_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74159_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74159_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74159_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74159_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74159_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74159_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74159_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74159_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74159_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74159_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74159_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74159_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74159_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74159_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74159_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74159_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74159_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74159_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74159_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74159_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74159_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74159_total_iter /
                (ctx->futhark_mc_segmap_parloop_74159_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74159_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74159_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74159_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74157             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74157_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74157_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74157_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74157_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74157_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74157_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74157_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74157_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74157_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74157_iter[i] /
                    (ctx->futhark_mc_segmap_task_74157_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74157_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74163          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74163_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74163_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74163_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74163_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74163_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74163_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74163_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74163_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74163_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74163_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74163_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74163_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74163_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74163_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74163_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74163_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74163_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74163_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74163_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74163_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74163_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74163_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74163_total_iter /
                (ctx->futhark_mc_segmap_parloop_74163_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74163_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74163_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74163_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74161             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74161_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74161_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74161_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74161_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74161_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74161_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74161_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74161_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74161_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74161_iter[i] /
                    (ctx->futhark_mc_segmap_task_74161_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74161_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74167          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74167_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74167_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74167_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74167_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74167_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74167_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74167_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74167_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74167_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74167_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74167_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74167_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74167_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74167_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74167_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74167_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74167_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74167_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74167_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74167_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74167_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74167_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74167_total_iter /
                (ctx->futhark_mc_segmap_parloop_74167_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74167_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74167_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74167_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74165             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74165_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74165_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74165_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74165_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74165_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74165_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74165_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74165_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74165_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74165_iter[i] /
                    (ctx->futhark_mc_segmap_task_74165_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74165_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74171          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74171_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74171_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74171_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74171_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74171_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74171_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74171_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74171_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74171_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74171_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74171_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74171_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74171_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74171_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74171_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74171_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74171_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74171_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74171_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74171_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74171_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74171_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74171_total_iter /
                (ctx->futhark_mc_segmap_parloop_74171_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74171_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74171_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74171_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74185  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74185_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74185_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74185_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74185_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74185_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74185_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74185_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74185_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74185_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74185_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74185_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74180             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74180_runs[i],
                    (long) ctx->futhark_mc_segred_task_74180_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74180_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74180_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74180_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74180_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74180_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74180_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74180_iter[i],
                    (long) ctx->futhark_mc_segred_task_74180_iter[i] /
                    (ctx->futhark_mc_segred_task_74180_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74180_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74191  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74191_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74191_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74191_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74191_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74191_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74191_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74191_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74191_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74191_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74191_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74191_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74187             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74187_runs[i],
                    (long) ctx->futhark_mc_segred_task_74187_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74187_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74187_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74187_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74187_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74187_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74187_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74187_iter[i],
                    (long) ctx->futhark_mc_segred_task_74187_iter[i] /
                    (ctx->futhark_mc_segred_task_74187_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74187_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74176          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74176_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74176_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74176_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74176_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74176_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74176_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74176_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74176_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74176_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74176_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74176_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74176_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74176_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74176_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74176_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74176_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74176_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74176_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74176_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74176_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74176_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74176_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74176_total_iter /
                (ctx->futhark_mc_segmap_parloop_74176_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74176_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74176_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74176_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74169             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74169_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74169_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74169_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74169_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74169_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74169_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74169_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74169_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74169_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74169_iter[i] /
                    (ctx->futhark_mc_segmap_task_74169_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74169_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74174      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74174_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74174_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74174_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74174_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74174_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74174_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74174_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74174_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74174_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74174_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74174_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74174_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74140          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74140_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74140_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74140_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74140_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74140_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74140_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74140_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74140_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74140_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74140_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74140_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74140_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74140_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74140_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74140_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74140_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74140_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74140_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74140_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74140_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74140_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74140_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74140_total_iter /
                (ctx->futhark_mc_segmap_parloop_74140_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74140_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74140_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74140_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74125             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74125_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74125_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74125_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74125_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74125_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74125_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74125_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74125_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74125_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74125_iter[i] /
                    (ctx->futhark_mc_segmap_task_74125_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74125_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74138      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74138_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74138_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74138_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74138_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74138_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74138_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74138_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74138_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74138_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74138_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74138_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74138_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74195          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74195_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74195_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74195_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74195_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74195_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74195_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74195_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74195_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74195_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74195_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74195_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74195_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74195_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74195_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74195_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74195_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74195_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74195_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74195_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74195_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74195_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74195_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74195_total_iter /
                (ctx->futhark_mc_segmap_parloop_74195_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74195_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74195_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74195_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74223    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74223_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74223_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74223_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74223_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74223_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74223_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74223_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74223_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74223_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74223_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74223_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74225    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74225_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74225_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74225_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74225_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74225_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74225_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74225_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74225_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74225_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74225_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74225_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74220            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74220_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74220_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74220_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74220_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74220_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74220_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74220_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74220_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74220_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74220_iter[i] /
                    (ctx->futhark_mc_segscan_task_74220_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74220_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74229          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74229_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74229_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74229_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74229_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74229_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74229_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74229_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74229_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74229_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74229_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74229_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74229_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74229_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74229_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74229_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74229_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74229_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74229_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74229_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74229_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74229_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74229_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74229_total_iter /
                (ctx->futhark_mc_segmap_parloop_74229_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74229_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74229_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74229_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74227             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74227_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74227_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74227_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74227_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74227_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74227_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74227_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74227_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74227_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74227_iter[i] /
                    (ctx->futhark_mc_segmap_task_74227_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74227_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74233          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74233_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74233_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74233_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74233_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74233_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74233_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74233_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74233_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74233_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74233_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74233_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74233_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74233_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74233_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74233_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74233_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74233_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74233_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74233_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74233_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74233_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74233_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74233_total_iter /
                (ctx->futhark_mc_segmap_parloop_74233_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74233_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74233_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74233_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74231             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74231_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74231_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74231_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74231_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74231_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74231_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74231_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74231_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74231_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74231_iter[i] /
                    (ctx->futhark_mc_segmap_task_74231_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74231_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74237          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74237_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74237_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74237_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74237_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74237_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74237_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74237_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74237_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74237_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74237_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74237_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74237_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74237_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74237_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74237_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74237_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74237_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74237_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74237_total_iter /
                (ctx->futhark_mc_segmap_parloop_74237_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74237_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74237_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74237_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74235             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74235_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74235_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74235_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74235_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74235_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74235_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74235_iter[i] /
                    (ctx->futhark_mc_segmap_task_74235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74235_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74241          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74241_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74241_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74241_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74241_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74241_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74241_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74241_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74241_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74241_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74241_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74241_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74241_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74241_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74241_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74241_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74241_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74241_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74241_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74241_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74241_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74241_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74241_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74241_total_iter /
                (ctx->futhark_mc_segmap_parloop_74241_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74241_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74241_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74241_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74256          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74256_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74256_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74256_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74256_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74256_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74256_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74256_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74256_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74256_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74256_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74256_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74256_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74256_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74256_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74256_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74256_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74256_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74256_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74256_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74256_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74256_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74256_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74256_total_iter /
                (ctx->futhark_mc_segmap_parloop_74256_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74256_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74256_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74256_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74254             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74254_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74254_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74254_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74254_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74254_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74254_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74254_iter[i] /
                    (ctx->futhark_mc_segmap_task_74254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74254_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74265  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74265_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74265_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74265_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74265_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74265_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74265_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74265_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74265_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74265_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74265_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74265_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74258             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74258_runs[i],
                    (long) ctx->futhark_mc_segred_task_74258_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74258_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74258_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74258_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74258_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74258_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74258_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74258_iter[i],
                    (long) ctx->futhark_mc_segred_task_74258_iter[i] /
                    (ctx->futhark_mc_segred_task_74258_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74258_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74271  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74271_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74271_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74271_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74271_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74271_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74271_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74271_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74271_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74271_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74271_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74271_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74267             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74267_runs[i],
                    (long) ctx->futhark_mc_segred_task_74267_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74267_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74267_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74267_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74267_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74267_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74267_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74267_iter[i],
                    (long) ctx->futhark_mc_segred_task_74267_iter[i] /
                    (ctx->futhark_mc_segred_task_74267_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74267_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74248          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74248_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74248_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74248_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74248_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74248_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74248_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74248_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74248_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74248_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74248_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74248_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74248_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74248_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74248_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74248_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74248_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74248_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74248_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74248_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74248_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74248_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74248_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74248_total_iter /
                (ctx->futhark_mc_segmap_parloop_74248_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74248_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74248_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74248_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74239             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74239_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74239_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74239_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74239_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74239_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74239_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74239_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74239_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74239_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74239_iter[i] /
                    (ctx->futhark_mc_segmap_task_74239_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74239_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74246      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74246_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74246_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74246_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74246_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74246_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74246_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74246_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74246_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74246_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74246_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74246_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74246_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74210          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74210_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74210_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74210_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74210_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74210_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74210_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74210_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74210_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74210_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74210_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74210_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74210_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74210_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74210_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74210_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74210_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74210_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74210_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74210_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74210_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74210_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74210_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74210_total_iter /
                (ctx->futhark_mc_segmap_parloop_74210_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74210_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74210_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74210_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74193             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74193_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74193_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74193_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74193_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74193_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74193_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74193_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74193_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74193_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74193_iter[i] /
                    (ctx->futhark_mc_segmap_task_74193_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74193_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74208      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74208_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74208_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74208_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74208_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74208_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74208_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74208_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74208_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74208_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74208_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74208_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74208_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74275          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74275_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74275_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74275_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74275_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74275_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74275_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74275_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74275_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74275_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74275_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74275_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74275_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74275_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74275_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74275_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74275_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74275_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74275_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74275_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74275_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74275_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74275_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74275_total_iter /
                (ctx->futhark_mc_segmap_parloop_74275_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74275_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74275_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74275_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74284          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74284_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74284_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74284_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74284_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74284_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74284_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74284_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74284_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74284_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74284_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74284_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74284_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74284_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74284_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74284_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74284_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74284_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74284_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74284_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74284_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74284_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74284_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74284_total_iter /
                (ctx->futhark_mc_segmap_parloop_74284_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74284_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74284_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74284_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74282             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74282_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74282_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74282_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74282_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74282_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74282_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74282_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74282_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74282_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74282_iter[i] /
                    (ctx->futhark_mc_segmap_task_74282_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74282_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74279          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74279_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74279_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74279_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74279_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74279_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74279_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74279_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74279_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74279_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74279_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74279_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74279_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74279_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74279_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74279_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74279_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74279_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74279_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74279_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74279_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74279_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74279_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74279_total_iter /
                (ctx->futhark_mc_segmap_parloop_74279_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74279_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74279_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74279_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74273             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74273_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74273_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74273_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74273_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74273_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74273_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74273_iter[i] /
                    (ctx->futhark_mc_segmap_task_74273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74273_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74277      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74277_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74277_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74277_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74277_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74277_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74277_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74277_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74277_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74277_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74277_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74277_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74277_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_73880,
                             struct memblock Y_mem_67460, int64_t m_62363,
                             int64_t n_62364, int64_t q_62366,
                             int64_t degree_62367, int64_t jump_62368,
                             int64_t jump_threshold_62369,
                             int64_t q_threshold_62370);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_73881 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67465;
    int64_t free_bytes_67468;
    int64_t free_bytes_67480;
    int64_t free_bytes_67483;
    char *free_mem_67594;
};
struct futhark_mc_segmap_parloop_struct_73883 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67465;
    int64_t free_bytes_67468;
    int64_t free_bytes_67480;
    int64_t free_bytes_67483;
    char *free_mem_67594;
};
static int futhark_mc_segmap_parloop_73884(void *args, int64_t start,
                                           int64_t end, int flat_tid_63738,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73883
    *futhark_mc_segmap_parloop_struct_73883 =
    (struct futhark_mc_segmap_parloop_struct_73883 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73883->ctx;
    uint64_t futhark_mc_segmap_parloop_73884_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73884_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_73883->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73883->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73883->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73883->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73883->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73883->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73883->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73883->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73883->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_73883->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73883->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67465 =
            futhark_mc_segmap_parloop_struct_73883->free_bytes_67465;
    int64_t bytes_67468 =
            futhark_mc_segmap_parloop_struct_73883->free_bytes_67468;
    int64_t bytes_67480 =
            futhark_mc_segmap_parloop_struct_73883->free_bytes_67480;
    int64_t bytes_67483 =
            futhark_mc_segmap_parloop_struct_73883->free_bytes_67483;
    struct memblock mem_67594 = {.desc ="mem_67594", .mem =
                                 futhark_mc_segmap_parloop_struct_73883->free_mem_67594,
                                 .size =0, .references =NULL};
    size_t mem_67488_cached_sizze_73885 = 0;
    char *mem_67488 = NULL;
    size_t mem_67503_cached_sizze_73886 = 0;
    char *mem_67503 = NULL;
    size_t mem_67506_cached_sizze_73887 = 0;
    char *mem_67506 = NULL;
    size_t mem_67533_cached_sizze_73888 = 0;
    char *mem_67533 = NULL;
    size_t mem_67536_cached_sizze_73889 = 0;
    char *mem_67536 = NULL;
    size_t mem_67563_cached_sizze_73890 = 0;
    char *mem_67563 = NULL;
    size_t mem_67578_cached_sizze_73891 = 0;
    char *mem_67578 = NULL;
    int64_t iterations = end - start;
    int64_t iter_68621 = start;
    
    if (mem_67488_cached_sizze_73885 < (size_t) bytes_67465) {
        mem_67488 = realloc(mem_67488, bytes_67465);
        mem_67488_cached_sizze_73885 = bytes_67465;
    }
    if (mem_67503_cached_sizze_73886 < (size_t) bytes_67468) {
        mem_67503 = realloc(mem_67503, bytes_67468);
        mem_67503_cached_sizze_73886 = bytes_67468;
    }
    if (mem_67506_cached_sizze_73887 < (size_t) bytes_67465) {
        mem_67506 = realloc(mem_67506, bytes_67465);
        mem_67506_cached_sizze_73887 = bytes_67465;
    }
    if (mem_67533_cached_sizze_73888 < (size_t) bytes_67468) {
        mem_67533 = realloc(mem_67533, bytes_67468);
        mem_67533_cached_sizze_73888 = bytes_67468;
    }
    if (mem_67536_cached_sizze_73889 < (size_t) bytes_67465) {
        mem_67536 = realloc(mem_67536, bytes_67465);
        mem_67536_cached_sizze_73889 = bytes_67465;
    }
    if (mem_67563_cached_sizze_73890 < (size_t) bytes_67480) {
        mem_67563 = realloc(mem_67563, bytes_67480);
        mem_67563_cached_sizze_73890 = bytes_67480;
    }
    if (mem_67578_cached_sizze_73891 < (size_t) bytes_67483) {
        mem_67578 = realloc(mem_67578, bytes_67483);
        mem_67578_cached_sizze_73891 = bytes_67483;
    }
    for (; iter_68621 < end; iter_68621++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_68789 = m_62363;
        int64_t gtid_63739 = iter_68621;
        int64_t remnant_68790 = iter_68621 - gtid_63739;
        int64_t discard_67057;
        int64_t scanacc_68623 = (int64_t) 0;
        
        for (int64_t i_68622 = 0; i_68622 < n_62364; i_68622++) {
            float x_68625 = ((float *) Y_mem_67460.mem)[gtid_63739 * n_62364 +
                                                        i_68622];
            bool isnan_res_68626;
            
            isnan_res_68626 = futrts_isnan32(x_68625);
            
            bool defunc_0_p_res_68627 = !isnan_res_68626;
            int64_t defunc_0_f_res_68628 = btoi_bool_i64(defunc_0_p_res_68627);
            int64_t defunc_1_op_res_68629 = add64(defunc_0_f_res_68628,
                                                  scanacc_68623);
            
            ((int64_t *) mem_67488)[i_68622] = defunc_1_op_res_68629;
            
            int64_t scanacc_tmp_68791 = defunc_1_op_res_68629;
            
            scanacc_68623 = scanacc_tmp_68791;
        }
        discard_67057 = scanacc_68623;
        
        int64_t last_res_62413 = ((int64_t *) mem_67488)[i_62378];
        
        for (int64_t i_68793 = 0; i_68793 < n_62364; i_68793++) {
            ((float *) mem_67503)[i_68793] = 0.0F;
        }
        for (int64_t i_68794 = 0; i_68794 < n_62364; i_68794++) {
            ((int64_t *) mem_67506)[i_68794] = (int64_t) -1;
        }
        for (int64_t write_iter_68631 = 0; write_iter_68631 < n_62364;
             write_iter_68631++) {
            float write_iv_68634 = ((float *) Y_mem_67460.mem)[gtid_63739 *
                                                               n_62364 +
                                                               write_iter_68631];
            bool isnan_res_68635;
            
            isnan_res_68635 = futrts_isnan32(write_iv_68634);
            
            bool defunc_0_p_res_68636 = !isnan_res_68635;
            int64_t defunc_1_f_res_68637;
            
            if (defunc_0_p_res_68636) {
                int64_t write_iv_68638 =
                        ((int64_t *) mem_67488)[write_iter_68631];
                int64_t defunc_1_f_res_t_res_68639 = sub64(write_iv_68638,
                                                           (int64_t) 1);
                
                defunc_1_f_res_68637 = defunc_1_f_res_t_res_68639;
            } else {
                defunc_1_f_res_68637 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_68637) &&
                slt64(defunc_1_f_res_68637, n_62364)) {
                ((int64_t *) mem_67506)[defunc_1_f_res_68637] =
                    write_iter_68631;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_68637) &&
                slt64(defunc_1_f_res_68637, n_62364)) {
                memmove(mem_67503 + defunc_1_f_res_68637 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_63739 * n_62364 +
                                           write_iter_68631) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62428 = sub64(last_res_62413, (int64_t) 1);
        int64_t min_arg_62429 = sub64(last_res_62413, min_res_62384);
        float i64_res_62430 = sitofp_i64_f32(last_res_62413);
        float x_62431 = i64_res_62390 - i64_res_62430;
        float max_arg_62432 = x_62431 / 2.0F;
        float max_res_62433 = fmax32(0.0F, max_arg_62432);
        
        for (int64_t i_68643 = 0; i_68643 < n_62364; i_68643++) {
            int64_t x_68646 = ((int64_t *) mem_67506)[i_68643];
            int64_t defunc_0_f_res_68647 = add64((int64_t) 1, x_68646);
            float defunc_0_f_res_68648 = sitofp_i64_f32(x_68646);
            
            ((float *) mem_67533)[i_68643] = defunc_0_f_res_68648;
            ((int64_t *) mem_67536)[i_68643] = defunc_0_f_res_68647;
        }
        for (int64_t i_68651 = 0; i_68651 < q_62366; i_68651++) {
            bool cond_68653 = sle64(last_res_62413, i_68651);
            float defunc_0_f_res_68654;
            
            if (cond_68653) {
                defunc_0_f_res_68654 = 0.0F;
            } else {
                defunc_0_f_res_68654 = 1.0F;
            }
            ((float *) mem_67563)[i_68651] = defunc_0_f_res_68654;
        }
        for (int64_t i_68656 = 0; i_68656 < n_m_62372; i_68656++) {
            int64_t min_arg_68658 = mul64(jump_62368, i_68656);
            int64_t min_res_68659 = smin64(i_62378, min_arg_68658);
            int64_t defunc_0_g_res_68660 = add64((int64_t) 1, min_res_68659);
            bool init_idx_68661;
            int64_t init_idx_68662;
            int64_t init_idx_68663;
            bool loop_while_68664;
            int64_t low_68665;
            int64_t high_68666;
            
            loop_while_68664 = x_62379;
            low_68665 = (int64_t) 0;
            high_68666 = i_62378;
            while (loop_while_68664) {
                int64_t x_68667 = add64(low_68665, high_68666);
                int64_t mid_68668 = sdiv64(x_68667, (int64_t) 2);
                bool x_68669 = sle64((int64_t) 0, mid_68668);
                bool y_68670 = slt64(mid_68668, n_62364);
                bool bounds_check_68671 = x_68669 && y_68670;
                bool index_certs_68672;
                
                if (!bounds_check_68671) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_68668,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_68673 = ((int64_t *) mem_67536)[mid_68668];
                bool cond_68674 = slt64(mid_id_68673, (int64_t) 0);
                int64_t mid_idx_68675;
                
                if (cond_68674) {
                    mid_idx_68675 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_68675 = mid_id_68673;
                }
                
                bool cond_68676 = sle64(defunc_0_g_res_68660, mid_idx_68675);
                int64_t loopres_68677;
                int64_t loopres_68678;
                
                if (cond_68676) {
                    int64_t loopres_t_res_68679 = sub64(mid_68668, (int64_t) 1);
                    
                    loopres_68677 = low_68665;
                    loopres_68678 = loopres_t_res_68679;
                } else {
                    int64_t loopres_f_res_68680 = add64((int64_t) 1, mid_68668);
                    
                    loopres_68677 = loopres_f_res_68680;
                    loopres_68678 = high_68666;
                }
                
                bool loop_cond_68681 = sle64(loopres_68677, loopres_68678);
                bool loop_while_tmp_68801 = loop_cond_68681;
                int64_t low_tmp_68802 = loopres_68677;
                int64_t high_tmp_68803 = loopres_68678;
                
                loop_while_68664 = loop_while_tmp_68801;
                low_68665 = low_tmp_68802;
                high_68666 = high_tmp_68803;
            }
            init_idx_68661 = loop_while_68664;
            init_idx_68662 = low_68665;
            init_idx_68663 = high_68666;
            
            bool idx_68682;
            int64_t idx_68683;
            int64_t idx_68684;
            int64_t idx_68685;
            bool loop_while_68686;
            int64_t l_idx_68687;
            int64_t r_idx_68688;
            int64_t span_68689;
            
            loop_while_68686 = loop_cond_62389;
            l_idx_68687 = init_idx_68662;
            r_idx_68688 = init_idx_68662;
            span_68689 = (int64_t) 1;
            while (loop_while_68686) {
                int64_t max_arg_68690 = sub64(l_idx_68687, (int64_t) 1);
                int64_t max_res_68691 = smax64((int64_t) 0, max_arg_68690);
                int64_t min_arg_68692 = add64((int64_t) 1, r_idx_68688);
                int64_t min_res_68693 = smin64(min_arg_62428, min_arg_68692);
                bool x_68694 = sle64((int64_t) 0, max_res_68691);
                bool y_68695 = slt64(max_res_68691, n_62364);
                bool bounds_check_68696 = x_68694 && y_68695;
                bool index_certs_68697;
                
                if (!bounds_check_68696) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_68691,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_68698 = ((int64_t *) mem_67536)[max_res_68691];
                int64_t abs_arg_68699 = sub64(x_68698, defunc_0_g_res_68660);
                int64_t abs_res_68700 = abs64(abs_arg_68699);
                bool x_68701 = sle64((int64_t) 0, min_res_68693);
                bool y_68702 = slt64(min_res_68693, n_62364);
                bool bounds_check_68703 = x_68701 && y_68702;
                bool index_certs_68704;
                
                if (!bounds_check_68703) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_68693,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_68705 = ((int64_t *) mem_67536)[min_res_68693];
                int64_t abs_arg_68706 = sub64(x_68705, defunc_0_g_res_68660);
                int64_t abs_res_68707 = abs64(abs_arg_68706);
                bool cond_68708 = max_res_68691 == l_idx_68687;
                int64_t loopres_68709;
                int64_t loopres_68710;
                int64_t loopres_68711;
                
                if (cond_68708) {
                    loopres_68709 = l_idx_68687;
                    loopres_68710 = r_idx_68688;
                    loopres_68711 = min_res_62384;
                } else {
                    bool cond_68712 = slt64(abs_res_68700, abs_res_68707);
                    bool cond_f_res_68713 = min_res_68693 == r_idx_68688;
                    bool x_68714 = !cond_68712;
                    bool y_68715 = cond_f_res_68713 && x_68714;
                    bool cond_68716 = cond_68712 || y_68715;
                    int64_t loopres_f_res_68717;
                    
                    if (cond_68716) {
                        loopres_f_res_68717 = max_res_68691;
                    } else {
                        loopres_f_res_68717 = l_idx_68687;
                    }
                    
                    int64_t loopres_f_res_68718;
                    
                    if (cond_68716) {
                        loopres_f_res_68718 = r_idx_68688;
                    } else {
                        loopres_f_res_68718 = min_res_68693;
                    }
                    
                    int64_t loopres_f_res_68719;
                    
                    if (cond_68716) {
                        int64_t loopres_f_res_t_res_68720 = add64((int64_t) 1,
                                                                  span_68689);
                        
                        loopres_f_res_68719 = loopres_f_res_t_res_68720;
                    } else {
                        int64_t loopres_f_res_f_res_68721 = add64((int64_t) 1,
                                                                  span_68689);
                        
                        loopres_f_res_68719 = loopres_f_res_f_res_68721;
                    }
                    loopres_68709 = loopres_f_res_68717;
                    loopres_68710 = loopres_f_res_68718;
                    loopres_68711 = loopres_f_res_68719;
                }
                
                bool loop_cond_68722 = slt64(loopres_68711, min_res_62384);
                bool loop_while_tmp_68804 = loop_cond_68722;
                int64_t l_idx_tmp_68805 = loopres_68709;
                int64_t r_idx_tmp_68806 = loopres_68710;
                int64_t span_tmp_68807 = loopres_68711;
                
                loop_while_68686 = loop_while_tmp_68804;
                l_idx_68687 = l_idx_tmp_68805;
                r_idx_68688 = r_idx_tmp_68806;
                span_68689 = span_tmp_68807;
            }
            idx_68682 = loop_while_68686;
            idx_68683 = l_idx_68687;
            idx_68684 = r_idx_68688;
            idx_68685 = span_68689;
            
            int64_t min_res_68723 = smin64(min_arg_62429, idx_68683);
            int64_t x_68724 = add64(min_res_62384, min_res_68723);
            int64_t r_68725 = sub64(x_68724, (int64_t) 1);
            bool x_68726 = sle64((int64_t) 0, r_68725);
            bool y_68727 = slt64(r_68725, n_62364);
            bool bounds_check_68728 = x_68726 && y_68727;
            bool index_certs_68729;
            
            if (!bounds_check_68728) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_68725,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_68730 = ((int64_t *) mem_67506)[r_68725];
            int64_t abs_arg_68731 = sub64(x_68730, min_res_68659);
            int64_t abs_res_68732 = abs64(abs_arg_68731);
            bool x_68733 = sle64((int64_t) 0, min_res_68723);
            bool y_68734 = slt64(min_res_68723, n_62364);
            bool bounds_check_68735 = x_68733 && y_68734;
            bool index_certs_68736;
            
            if (!bounds_check_68735) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_68723,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_68737 = ((int64_t *) mem_67506)[min_res_68723];
            int64_t abs_arg_68738 = sub64(x_68737, min_res_68659);
            int64_t abs_res_68739 = abs64(abs_arg_68738);
            int64_t max_res_68740 = smax64(abs_res_68732, abs_res_68739);
            float defunc_0_f_res_68741 = sitofp_i64_f32(max_res_68740);
            float defunc_1_f_res_68742 = max_res_62433 + defunc_0_f_res_68741;
            float defunc_0_f_res_68743 = sitofp_i64_f32(min_res_68659);
            float defunc_2_reduce_res_68744;
            float redout_68746 = 0.0F;
            
            for (int64_t i_68745 = 0; i_68745 < q_62366; i_68745++) {
                float x_68747 = ((float *) mem_67563)[i_68745];
                bool cond_68748 = sle64(last_res_62413, i_68745);
                float defunc_0_f_res_68749;
                
                if (cond_68748) {
                    defunc_0_f_res_68749 = 0.0F;
                } else {
                    int64_t i_68750 = add64(min_res_68723, i_68745);
                    float x_68751 = ((float *) mem_67533)[i_68750];
                    float defunc_0_f_res_f_res_68752 = 1.0F + x_68751;
                    
                    defunc_0_f_res_68749 = defunc_0_f_res_f_res_68752;
                }
                
                float x_j_68753 = defunc_0_f_res_68749 - defunc_0_f_res_68743;
                float abs_res_68754 = (float) fabs(x_j_68753);
                float tmp1_68755 = abs_res_68754 / defunc_1_f_res_68742;
                float x_68756 = tmp1_68755 * tmp1_68755;
                float y_68757 = tmp1_68755 * x_68756;
                float tmp2_68758 = 1.0F - y_68757;
                float x_68759 = tmp2_68758 * tmp2_68758;
                float tmp3_68760 = tmp2_68758 * x_68759;
                float w_j_68761 = x_68747 * tmp3_68760;
                float defunc_1_op_res_68762 = w_j_68761 + redout_68746;
                float redout_tmp_68808 = defunc_1_op_res_68762;
                
                redout_68746 = redout_tmp_68808;
            }
            defunc_2_reduce_res_68744 = redout_68746;
            
            float a0_68763 = 1.0F / defunc_2_reduce_res_68744;
            float defunc_2_reduce_res_68764;
            float redout_68766 = 0.0F;
            
            for (int64_t i_68765 = 0; i_68765 < q_62366; i_68765++) {
                float x_68767 = ((float *) mem_67563)[i_68765];
                bool cond_68768 = sle64(last_res_62413, i_68765);
                float defunc_0_f_res_68769;
                
                if (cond_68768) {
                    defunc_0_f_res_68769 = 0.0F;
                } else {
                    int64_t i_68770 = add64(min_res_68723, i_68765);
                    float x_68771 = ((float *) mem_67533)[i_68770];
                    float defunc_0_f_res_f_res_68772 = 1.0F + x_68771;
                    
                    defunc_0_f_res_68769 = defunc_0_f_res_f_res_68772;
                }
                
                float x_j_68773 = defunc_0_f_res_68769 - defunc_0_f_res_68743;
                float abs_res_68774 = (float) fabs(x_j_68773);
                float tmp1_68775 = abs_res_68774 / defunc_1_f_res_68742;
                float x_68776 = tmp1_68775 * tmp1_68775;
                float y_68777 = tmp1_68775 * x_68776;
                float tmp2_68778 = 1.0F - y_68777;
                float x_68779 = tmp2_68778 * tmp2_68778;
                float tmp3_68780 = tmp2_68778 * x_68779;
                float tmp4_68781 = x_68767 * tmp3_68780;
                float defunc_0_f_res_68782;
                
                if (cond_68768) {
                    defunc_0_f_res_68782 = 0.0F;
                } else {
                    int64_t i_68783 = add64(min_res_68723, i_68765);
                    float x_68784 = ((float *) mem_67503)[i_68783];
                    
                    defunc_0_f_res_68782 = x_68784;
                }
                
                float x_68785 = a0_68763 * tmp4_68781;
                float defunc_9_fit_fun_res_68786 = defunc_0_f_res_68782 *
                      x_68785;
                float defunc_1_op_res_68787 = defunc_9_fit_fun_res_68786 +
                      redout_68766;
                float redout_tmp_68809 = defunc_1_op_res_68787;
                
                redout_68766 = redout_tmp_68809;
            }
            defunc_2_reduce_res_68764 = redout_68766;
            ((float *) mem_67578)[i_68656] = defunc_2_reduce_res_68764;
        }
        memmove(mem_67594.mem + gtid_63739 * n_m_62372 * (int64_t) 4,
                mem_67578 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67488);
    free(mem_67503);
    free(mem_67506);
    free(mem_67533);
    free(mem_67536);
    free(mem_67563);
    free(mem_67578);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73884_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73884_end -
                 futhark_mc_segmap_parloop_73884_start;
        
        ctx->futhark_mc_segmap_parloop_73884_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73884_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73884_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73882(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63738 = tid;
    int num_tasks_68620 = info.nsubtasks;
    struct futhark_mc_task_73881 *futhark_mc_task_73881 =
                                 (struct futhark_mc_task_73881 *) args;
    struct futhark_context *ctx = futhark_mc_task_73881->ctx;
    uint64_t futhark_mc_segmap_task_73882_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73882_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_73881->free_m_62363;
    int64_t n_62364 = futhark_mc_task_73881->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73881->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73881->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73881->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73881->free_i_62378;
    bool x_62379 = futhark_mc_task_73881->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73881->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73881->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_73881->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73881->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67465 = futhark_mc_task_73881->free_bytes_67465;
    int64_t bytes_67468 = futhark_mc_task_73881->free_bytes_67468;
    int64_t bytes_67480 = futhark_mc_task_73881->free_bytes_67480;
    int64_t bytes_67483 = futhark_mc_task_73881->free_bytes_67483;
    struct memblock mem_67594 = {.desc ="mem_67594", .mem =
                                 futhark_mc_task_73881->free_mem_67594, .size =
                                 0, .references =NULL};
    int64_t iter_68621;
    struct futhark_mc_segmap_parloop_struct_73883
    futhark_mc_segmap_parloop_struct_73883;
    
    futhark_mc_segmap_parloop_struct_73883.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73883.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_73883.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73883.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73883.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73883.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73883.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73883.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73883.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73883.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73883.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_73883.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73883.free_bytes_67465 = bytes_67465;
    futhark_mc_segmap_parloop_struct_73883.free_bytes_67468 = bytes_67468;
    futhark_mc_segmap_parloop_struct_73883.free_bytes_67480 = bytes_67480;
    futhark_mc_segmap_parloop_struct_73883.free_bytes_67483 = bytes_67483;
    futhark_mc_segmap_parloop_struct_73883.free_mem_67594 = mem_67594.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73884_task;
    
    futhark_mc_segmap_parloop_73884_task.name =
        "futhark_mc_segmap_parloop_73884";
    futhark_mc_segmap_parloop_73884_task.fn = futhark_mc_segmap_parloop_73884;
    futhark_mc_segmap_parloop_73884_task.args =
        &futhark_mc_segmap_parloop_struct_73883;
    futhark_mc_segmap_parloop_73884_task.iterations = iterations;
    futhark_mc_segmap_parloop_73884_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73884_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73884_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73884_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73884_task);
    
    if (futhark_mc_segmap_parloop_73884_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73884_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73884_total_end -
                 futhark_mc_segmap_parloop_73884_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73884_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73884_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73884_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73882_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73882_end -
                 futhark_mc_segmap_task_73882_start;
        
        ctx->futhark_mc_segmap_task_73882_runs[tid]++;
        ctx->futhark_mc_segmap_task_73882_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73882_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73893 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67465;
    int64_t free_bytes_67468;
    int64_t free_bytes_67480;
    int64_t free_bytes_67483;
    char *free_mem_67594;
};
struct futhark_mc_task_73902 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_63741;
    char *free_Y_mem_67460;
    char *free_mem_67467;
};
struct futhark_mc_scan_stage_1_parloop_struct_73905 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_63741;
    char *free_Y_mem_67460;
    char *free_mem_67467;
};
static int futhark_mc_scan_stage_1_parloop_73906(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_63742, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_73905
    *futhark_mc_scan_stage_1_parloop_struct_73905 =
    (struct futhark_mc_scan_stage_1_parloop_struct_73905 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_73905->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_73906_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73906_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_73905->free_n_62364;
    int64_t gtid_63741 =
            futhark_mc_scan_stage_1_parloop_struct_73905->free_gtid_63741;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_73905->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67467 = {.desc ="mem_67467", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_73905->free_mem_67467,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69092 = start;
    int64_t x_68811;
    int64_t x_68812;
    
    x_68811 = (int64_t) 0;
    for (; iter_69092 < end; iter_69092++) {
        int64_t gtid_63743 = iter_69092;
        
        // stage 1 scan body
        {
            float x_68814 = ((float *) Y_mem_67460.mem)[gtid_63741 * n_62364 +
                                                        gtid_63743];
            bool isnan_res_68815;
            
            isnan_res_68815 = futrts_isnan32(x_68814);
            
            bool defunc_0_p_res_68816 = !isnan_res_68815;
            int64_t defunc_0_f_res_68817 = btoi_bool_i64(defunc_0_p_res_68816);
            
            // write mapped values results to memory
            { }
            x_68811 = x_68811;
            // Read next values
            {
                x_68812 = defunc_0_f_res_68817;
            }
            
            int64_t defunc_1_op_res_68813 = add64(x_68811, x_68812);
            
            ((int64_t *) mem_67467.mem)[gtid_63743] = defunc_1_op_res_68813;
            x_68811 = defunc_1_op_res_68813;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73906_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73906_end -
                 futhark_mc_scan_stage_1_parloop_73906_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_73906_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_73906_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_73906_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_73907 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_63741;
    char *free_Y_mem_67460;
    char *free_mem_67467;
};
static int futhark_mc_scan_stage_3_parloop_73908(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_63742, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_73907
    *futhark_mc_scan_stage_3_parloop_struct_73907 =
    (struct futhark_mc_scan_stage_3_parloop_struct_73907 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_73907->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_73908_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_73908_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_73907->free_n_62364;
    int64_t gtid_63741 =
            futhark_mc_scan_stage_3_parloop_struct_73907->free_gtid_63741;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_73907->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67467 = {.desc ="mem_67467", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_73907->free_mem_67467,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69104 = start;
    int64_t x_69101;
    int64_t x_69102;
    
    if (iter_69104 == (int64_t) 0) {
        x_69101 = (int64_t) 0;
    } else {
        x_69101 = ((int64_t *) mem_67467.mem)[iter_69104 - (int64_t) 1];
    }
    for (; iter_69104 < end; iter_69104++) {
        int64_t gtid_63743 = iter_69104;
        
        // stage 3 scan body
        {
            float x_68814 = ((float *) Y_mem_67460.mem)[gtid_63741 * n_62364 +
                                                        gtid_63743];
            bool isnan_res_68815;
            
            isnan_res_68815 = futrts_isnan32(x_68814);
            
            bool defunc_0_p_res_68816 = !isnan_res_68815;
            int64_t defunc_0_f_res_68817 = btoi_bool_i64(defunc_0_p_res_68816);
            
            x_69101 = x_69101;
            x_69102 = defunc_0_f_res_68817;
            
            int64_t defunc_1_op_res_69103 = add64(x_69101, x_69102);
            
            ((int64_t *) mem_67467.mem)[gtid_63743] = defunc_1_op_res_69103;
            x_69101 = defunc_1_op_res_69103;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_73908_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73908_end -
                 futhark_mc_scan_stage_3_parloop_73908_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_73908_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_73908_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_73908_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_73903(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63742 = tid;
    int num_tasks_69091 = info.nsubtasks;
    struct futhark_mc_task_73902 *futhark_mc_task_73902 =
                                 (struct futhark_mc_task_73902 *) args;
    struct futhark_context *ctx = futhark_mc_task_73902->ctx;
    uint64_t futhark_mc_segscan_task_73903_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_73903_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73902->free_n_62364;
    int64_t gtid_63741 = futhark_mc_task_73902->free_gtid_63741;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73902->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67467 = {.desc ="mem_67467", .mem =
                                 futhark_mc_task_73902->free_mem_67467, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_69098_cached_sizze_73904 = 0;
    char *scan_stage_2_accum_mem_69098 = NULL;
    int64_t iter_69092;
    struct futhark_mc_scan_stage_1_parloop_struct_73905
    futhark_mc_scan_stage_1_parloop_struct_73905;
    
    futhark_mc_scan_stage_1_parloop_struct_73905.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_73905.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_73905.free_gtid_63741 = gtid_63741;
    futhark_mc_scan_stage_1_parloop_struct_73905.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_73905.free_mem_67467 = mem_67467.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_73906_task;
    
    futhark_mc_scan_stage_1_parloop_73906_task.name =
        "futhark_mc_scan_stage_1_parloop_73906";
    futhark_mc_scan_stage_1_parloop_73906_task.fn =
        futhark_mc_scan_stage_1_parloop_73906;
    futhark_mc_scan_stage_1_parloop_73906_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_73905;
    futhark_mc_scan_stage_1_parloop_73906_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_73906_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_73906_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73906_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_73906_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_73906_task);
    
    if (futhark_mc_scan_stage_1_parloop_73906_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73906_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73906_total_end -
                 futhark_mc_scan_stage_1_parloop_73906_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73906_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73906_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73906_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_69091)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_69093;
        int64_t x_69094;
        int64_t offset_69096 = (int64_t) 0;
        int64_t offset_index_69097 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_69098_cached_sizze_73904 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_69098 = realloc(scan_stage_2_accum_mem_69098,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_69098_cached_sizze_73904 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_69098)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_69100 = 0; i_69100 < num_tasks_69091 - 1; i_69100++) {
            offset_69096 = squot64(n_62364, sext_i32_i64(num_tasks_69091));
            if (slt64(sext_i32_i64(i_69100), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_69091)))) {
                offset_69096 += (int64_t) 1;
            }
            offset_index_69097 += offset_69096;
            
            int64_t gtid_63743 = offset_index_69097;
            float x_68814 = ((float *) Y_mem_67460.mem)[gtid_63741 * n_62364 +
                                                        gtid_63743];
            bool isnan_res_68815;
            
            isnan_res_68815 = futrts_isnan32(x_68814);
            
            bool defunc_0_p_res_68816 = !isnan_res_68815;
            int64_t defunc_0_f_res_68817 = btoi_bool_i64(defunc_0_p_res_68816);
            
            // Read carry in
            {
                x_69093 =
                    ((int64_t *) scan_stage_2_accum_mem_69098)[(int64_t) 0];
            }
            // Read next values
            {
                x_69094 = ((int64_t *) mem_67467.mem)[offset_index_69097 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_69095 = add64(x_69093, x_69094);
            
            ((int64_t *) mem_67467.mem)[offset_index_69097 - (int64_t) 1] =
                defunc_1_op_res_69095;
            ((int64_t *) scan_stage_2_accum_mem_69098)[(int64_t) 0] =
                defunc_1_op_res_69095;
        }
        
        int64_t iter_69104 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_73907
        futhark_mc_scan_stage_3_parloop_struct_73907;
        
        futhark_mc_scan_stage_3_parloop_struct_73907.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_73907.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_73907.free_gtid_63741 =
            gtid_63741;
        futhark_mc_scan_stage_3_parloop_struct_73907.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_73907.free_mem_67467 =
            mem_67467.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_73908_task;
        
        futhark_mc_scan_stage_3_parloop_73908_task.name =
            "futhark_mc_scan_stage_3_parloop_73908";
        futhark_mc_scan_stage_3_parloop_73908_task.fn =
            futhark_mc_scan_stage_3_parloop_73908;
        futhark_mc_scan_stage_3_parloop_73908_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_73907;
        futhark_mc_scan_stage_3_parloop_73908_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_73908_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_73908_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_73908_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_73908_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_73908_task);
        
        if (futhark_mc_scan_stage_3_parloop_73908_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_73908_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73908_total_end -
                     futhark_mc_scan_stage_3_parloop_73908_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73908_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73908_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73908_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_69098);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_73903_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_73903_end -
                 futhark_mc_segscan_task_73903_start;
        
        ctx->futhark_mc_segscan_task_73903_runs[tid]++;
        ctx->futhark_mc_segscan_task_73903_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_73903_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73909 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_63741;
    char *free_Y_mem_67460;
    char *free_mem_67467;
    char *free_mem_67470;
    char *free_mem_67473;
};
struct futhark_mc_segmap_parloop_struct_73911 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_63741;
    char *free_Y_mem_67460;
    char *free_mem_67467;
    char *free_mem_67470;
    char *free_mem_67473;
};
static int futhark_mc_segmap_parloop_73912(void *args, int64_t start,
                                           int64_t end, int flat_tid_63744,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73911
    *futhark_mc_segmap_parloop_struct_73911 =
    (struct futhark_mc_segmap_parloop_struct_73911 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73911->ctx;
    uint64_t futhark_mc_segmap_parloop_73912_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73912_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73911->free_n_62364;
    int64_t gtid_63741 =
            futhark_mc_segmap_parloop_struct_73911->free_gtid_63741;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73911->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67467 = {.desc ="mem_67467", .mem =
                                 futhark_mc_segmap_parloop_struct_73911->free_mem_67467,
                                 .size =0, .references =NULL};
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_segmap_parloop_struct_73911->free_mem_67470,
                                 .size =0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_segmap_parloop_struct_73911->free_mem_67473,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69108 = start;
    
    for (; iter_69108 < end; iter_69108++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69111 = n_62364;
        int64_t gtid_63745 = iter_69108;
        int64_t remnant_69112 = iter_69108 - gtid_63745;
        float x_68818 = ((float *) Y_mem_67460.mem)[gtid_63741 * n_62364 +
                                                    gtid_63745];
        bool isnan_res_68819;
        
        isnan_res_68819 = futrts_isnan32(x_68818);
        
        bool defunc_0_p_res_68820 = !isnan_res_68819;
        int64_t defunc_1_f_res_68821;
        
        if (defunc_0_p_res_68820) {
            int64_t x_69109 = ((int64_t *) mem_67467.mem)[gtid_63745];
            int64_t defunc_1_f_res_t_res_69110 = sub64(x_69109, (int64_t) 1);
            
            defunc_1_f_res_68821 = defunc_1_f_res_t_res_69110;
        } else {
            defunc_1_f_res_68821 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_68821) &&
            slt64(defunc_1_f_res_68821, n_62364)) {
            ((int64_t *) mem_67473.mem)[defunc_1_f_res_68821] = gtid_63745;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_68821) &&
            slt64(defunc_1_f_res_68821, n_62364)) {
            ((float *) mem_67470.mem)[defunc_1_f_res_68821] = x_68818;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73912_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73912_end -
                 futhark_mc_segmap_parloop_73912_start;
        
        ctx->futhark_mc_segmap_parloop_73912_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73912_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73912_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73910(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63744 = tid;
    int num_tasks_69107 = info.nsubtasks;
    struct futhark_mc_task_73909 *futhark_mc_task_73909 =
                                 (struct futhark_mc_task_73909 *) args;
    struct futhark_context *ctx = futhark_mc_task_73909->ctx;
    uint64_t futhark_mc_segmap_task_73910_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73910_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73909->free_n_62364;
    int64_t gtid_63741 = futhark_mc_task_73909->free_gtid_63741;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73909->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67467 = {.desc ="mem_67467", .mem =
                                 futhark_mc_task_73909->free_mem_67467, .size =
                                 0, .references =NULL};
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_task_73909->free_mem_67470, .size =
                                 0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_task_73909->free_mem_67473, .size =
                                 0, .references =NULL};
    int64_t iter_69108;
    struct futhark_mc_segmap_parloop_struct_73911
    futhark_mc_segmap_parloop_struct_73911;
    
    futhark_mc_segmap_parloop_struct_73911.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73911.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73911.free_gtid_63741 = gtid_63741;
    futhark_mc_segmap_parloop_struct_73911.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73911.free_mem_67467 = mem_67467.mem;
    futhark_mc_segmap_parloop_struct_73911.free_mem_67470 = mem_67470.mem;
    futhark_mc_segmap_parloop_struct_73911.free_mem_67473 = mem_67473.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73912_task;
    
    futhark_mc_segmap_parloop_73912_task.name =
        "futhark_mc_segmap_parloop_73912";
    futhark_mc_segmap_parloop_73912_task.fn = futhark_mc_segmap_parloop_73912;
    futhark_mc_segmap_parloop_73912_task.args =
        &futhark_mc_segmap_parloop_struct_73911;
    futhark_mc_segmap_parloop_73912_task.iterations = iterations;
    futhark_mc_segmap_parloop_73912_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73912_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73912_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73912_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73912_task);
    
    if (futhark_mc_segmap_parloop_73912_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73912_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73912_total_end -
                 futhark_mc_segmap_parloop_73912_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73912_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73912_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73912_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73910_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73910_end -
                 futhark_mc_segmap_task_73910_start;
        
        ctx->futhark_mc_segmap_task_73910_runs[tid]++;
        ctx->futhark_mc_segmap_task_73910_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73910_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73913 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67473;
    char *free_mem_67476;
    char *free_mem_67479;
};
struct futhark_mc_segmap_parloop_struct_73915 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67473;
    char *free_mem_67476;
    char *free_mem_67479;
};
static int futhark_mc_segmap_parloop_73916(void *args, int64_t start,
                                           int64_t end, int flat_tid_63746,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73915
    *futhark_mc_segmap_parloop_struct_73915 =
    (struct futhark_mc_segmap_parloop_struct_73915 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73915->ctx;
    uint64_t futhark_mc_segmap_parloop_73916_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73916_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73915->free_n_62364;
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_segmap_parloop_struct_73915->free_mem_67473,
                                 .size =0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_segmap_parloop_struct_73915->free_mem_67476,
                                 .size =0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_segmap_parloop_struct_73915->free_mem_67479,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69114 = start;
    
    for (; iter_69114 < end; iter_69114++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69115 = n_62364;
        int64_t gtid_63747 = iter_69114;
        int64_t remnant_69116 = iter_69114 - gtid_63747;
        int64_t x_68824 = ((int64_t *) mem_67473.mem)[gtid_63747];
        int64_t defunc_0_f_res_68825 = add64((int64_t) 1, x_68824);
        float defunc_0_f_res_68826 = sitofp_i64_f32(x_68824);
        
        ((float *) mem_67476.mem)[gtid_63747] = defunc_0_f_res_68826;
        ((int64_t *) mem_67479.mem)[gtid_63747] = defunc_0_f_res_68825;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73916_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73916_end -
                 futhark_mc_segmap_parloop_73916_start;
        
        ctx->futhark_mc_segmap_parloop_73916_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73916_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73916_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73914(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63746 = tid;
    int num_tasks_69113 = info.nsubtasks;
    struct futhark_mc_task_73913 *futhark_mc_task_73913 =
                                 (struct futhark_mc_task_73913 *) args;
    struct futhark_context *ctx = futhark_mc_task_73913->ctx;
    uint64_t futhark_mc_segmap_task_73914_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73914_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73913->free_n_62364;
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_task_73913->free_mem_67473, .size =
                                 0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_task_73913->free_mem_67476, .size =
                                 0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_task_73913->free_mem_67479, .size =
                                 0, .references =NULL};
    int64_t iter_69114;
    struct futhark_mc_segmap_parloop_struct_73915
    futhark_mc_segmap_parloop_struct_73915;
    
    futhark_mc_segmap_parloop_struct_73915.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73915.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73915.free_mem_67473 = mem_67473.mem;
    futhark_mc_segmap_parloop_struct_73915.free_mem_67476 = mem_67476.mem;
    futhark_mc_segmap_parloop_struct_73915.free_mem_67479 = mem_67479.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73916_task;
    
    futhark_mc_segmap_parloop_73916_task.name =
        "futhark_mc_segmap_parloop_73916";
    futhark_mc_segmap_parloop_73916_task.fn = futhark_mc_segmap_parloop_73916;
    futhark_mc_segmap_parloop_73916_task.args =
        &futhark_mc_segmap_parloop_struct_73915;
    futhark_mc_segmap_parloop_73916_task.iterations = iterations;
    futhark_mc_segmap_parloop_73916_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73916_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73916_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73916_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73916_task);
    
    if (futhark_mc_segmap_parloop_73916_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73916_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73916_total_end -
                 futhark_mc_segmap_parloop_73916_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73916_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73916_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73916_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73914_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73914_end -
                 futhark_mc_segmap_task_73914_start;
        
        ctx->futhark_mc_segmap_task_73914_runs[tid]++;
        ctx->futhark_mc_segmap_task_73914_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73914_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73917 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_63900;
    char *free_mem_67482;
};
struct futhark_mc_segmap_parloop_struct_73919 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_63900;
    char *free_mem_67482;
};
static int futhark_mc_segmap_parloop_73920(void *args, int64_t start,
                                           int64_t end, int flat_tid_63748,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73919
    *futhark_mc_segmap_parloop_struct_73919 =
    (struct futhark_mc_segmap_parloop_struct_73919 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73919->ctx;
    uint64_t futhark_mc_segmap_parloop_73920_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73920_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73919->free_q_62366;
    int64_t last_res_63900 =
            futhark_mc_segmap_parloop_struct_73919->free_last_res_63900;
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_segmap_parloop_struct_73919->free_mem_67482,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69118 = start;
    
    for (; iter_69118 < end; iter_69118++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69119 = q_62366;
        int64_t gtid_63749 = iter_69118;
        int64_t remnant_69120 = iter_69118 - gtid_63749;
        bool cond_68827 = sle64(last_res_63900, gtid_63749);
        float defunc_0_f_res_68828;
        
        if (cond_68827) {
            defunc_0_f_res_68828 = 0.0F;
        } else {
            defunc_0_f_res_68828 = 1.0F;
        }
        ((float *) mem_67482.mem)[gtid_63749] = defunc_0_f_res_68828;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73920_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73920_end -
                 futhark_mc_segmap_parloop_73920_start;
        
        ctx->futhark_mc_segmap_parloop_73920_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73920_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73920_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73918(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63748 = tid;
    int num_tasks_69117 = info.nsubtasks;
    struct futhark_mc_task_73917 *futhark_mc_task_73917 =
                                 (struct futhark_mc_task_73917 *) args;
    struct futhark_context *ctx = futhark_mc_task_73917->ctx;
    uint64_t futhark_mc_segmap_task_73918_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73918_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_73917->free_q_62366;
    int64_t last_res_63900 = futhark_mc_task_73917->free_last_res_63900;
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_task_73917->free_mem_67482, .size =
                                 0, .references =NULL};
    int64_t iter_69118;
    struct futhark_mc_segmap_parloop_struct_73919
    futhark_mc_segmap_parloop_struct_73919;
    
    futhark_mc_segmap_parloop_struct_73919.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73919.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73919.free_last_res_63900 = last_res_63900;
    futhark_mc_segmap_parloop_struct_73919.free_mem_67482 = mem_67482.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73920_task;
    
    futhark_mc_segmap_parloop_73920_task.name =
        "futhark_mc_segmap_parloop_73920";
    futhark_mc_segmap_parloop_73920_task.fn = futhark_mc_segmap_parloop_73920;
    futhark_mc_segmap_parloop_73920_task.args =
        &futhark_mc_segmap_parloop_struct_73919;
    futhark_mc_segmap_parloop_73920_task.iterations = iterations;
    futhark_mc_segmap_parloop_73920_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73920_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73920_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73920_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73920_task);
    
    if (futhark_mc_segmap_parloop_73920_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73920_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73920_total_end -
                 futhark_mc_segmap_parloop_73920_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73920_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73920_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73920_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73918_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73918_end -
                 futhark_mc_segmap_task_73918_start;
        
        ctx->futhark_mc_segmap_task_73918_runs[tid]++;
        ctx->futhark_mc_segmap_task_73918_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73918_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73921 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_63900;
    int64_t free_min_arg_63912;
    int64_t free_min_arg_63913;
    float free_max_res_63917;
    char *free_mem_67470;
    char *free_mem_67473;
    char *free_mem_67476;
    char *free_mem_67479;
    char *free_mem_67482;
    char *free_mem_67485;
};
struct futhark_mc_segmap_parloop_struct_73923 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_63900;
    int64_t free_min_arg_63912;
    int64_t free_min_arg_63913;
    float free_max_res_63917;
    char *free_mem_67470;
    char *free_mem_67473;
    char *free_mem_67476;
    char *free_mem_67479;
    char *free_mem_67482;
    char *free_mem_67485;
};
static int futhark_mc_segmap_parloop_73924(void *args, int64_t start,
                                           int64_t end, int flat_tid_63750,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73923
    *futhark_mc_segmap_parloop_struct_73923 =
    (struct futhark_mc_segmap_parloop_struct_73923 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73923->ctx;
    uint64_t futhark_mc_segmap_parloop_73924_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73924_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73923->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73923->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73923->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73923->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73923->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73923->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73923->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73923->free_loop_cond_62389;
    int64_t last_res_63900 =
            futhark_mc_segmap_parloop_struct_73923->free_last_res_63900;
    int64_t min_arg_63912 =
            futhark_mc_segmap_parloop_struct_73923->free_min_arg_63912;
    int64_t min_arg_63913 =
            futhark_mc_segmap_parloop_struct_73923->free_min_arg_63913;
    float max_res_63917 =
          futhark_mc_segmap_parloop_struct_73923->free_max_res_63917;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67470,
                                 .size =0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67473,
                                 .size =0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67476,
                                 .size =0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67479,
                                 .size =0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67482,
                                 .size =0, .references =NULL};
    struct memblock mem_67485 = {.desc ="mem_67485", .mem =
                                 futhark_mc_segmap_parloop_struct_73923->free_mem_67485,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69122 = start;
    
    for (; iter_69122 < end; iter_69122++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69219 = n_m_62372;
        int64_t gtid_63751 = iter_69122;
        int64_t remnant_69220 = iter_69122 - gtid_63751;
        int64_t min_arg_68959 = mul64(jump_62368, gtid_63751);
        int64_t min_res_68960 = smin64(i_62378, min_arg_68959);
        int64_t defunc_0_g_res_68961 = add64((int64_t) 1, min_res_68960);
        bool init_idx_68962;
        int64_t init_idx_68963;
        int64_t init_idx_68964;
        bool loop_while_69123;
        int64_t low_69124;
        int64_t high_69125;
        
        loop_while_69123 = x_62379;
        low_69124 = (int64_t) 0;
        high_69125 = i_62378;
        while (loop_while_69123) {
            int64_t x_69126 = add64(low_69124, high_69125);
            int64_t mid_69127 = sdiv64(x_69126, (int64_t) 2);
            bool x_69128 = sle64((int64_t) 0, mid_69127);
            bool y_69129 = slt64(mid_69127, n_62364);
            bool bounds_check_69130 = x_69128 && y_69129;
            bool index_certs_69131;
            
            if (!bounds_check_69130) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69127,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_69132 = ((int64_t *) mem_67479.mem)[mid_69127];
            bool cond_69133 = slt64(mid_id_69132, (int64_t) 0);
            int64_t mid_idx_69134;
            
            if (cond_69133) {
                mid_idx_69134 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69134 = mid_id_69132;
            }
            
            bool cond_69135 = sle64(defunc_0_g_res_68961, mid_idx_69134);
            int64_t loopres_69136;
            int64_t loopres_69137;
            
            if (cond_69135) {
                int64_t loopres_t_res_69138 = sub64(mid_69127, (int64_t) 1);
                
                loopres_69136 = low_69124;
                loopres_69137 = loopres_t_res_69138;
            } else {
                int64_t loopres_f_res_69139 = add64((int64_t) 1, mid_69127);
                
                loopres_69136 = loopres_f_res_69139;
                loopres_69137 = high_69125;
            }
            
            bool loop_cond_69140 = sle64(loopres_69136, loopres_69137);
            bool loop_while_tmp_69221 = loop_cond_69140;
            int64_t low_tmp_69222 = loopres_69136;
            int64_t high_tmp_69223 = loopres_69137;
            
            loop_while_69123 = loop_while_tmp_69221;
            low_69124 = low_tmp_69222;
            high_69125 = high_tmp_69223;
        }
        init_idx_68962 = loop_while_69123;
        init_idx_68963 = low_69124;
        init_idx_68964 = high_69125;
        
        bool idx_68983;
        int64_t idx_68984;
        int64_t idx_68985;
        int64_t idx_68986;
        bool loop_while_69141;
        int64_t l_idx_69142;
        int64_t r_idx_69143;
        int64_t span_69144;
        
        loop_while_69141 = loop_cond_62389;
        l_idx_69142 = init_idx_68963;
        r_idx_69143 = init_idx_68963;
        span_69144 = (int64_t) 1;
        while (loop_while_69141) {
            int64_t max_arg_69145 = sub64(l_idx_69142, (int64_t) 1);
            int64_t max_res_69146 = smax64((int64_t) 0, max_arg_69145);
            int64_t min_arg_69147 = add64((int64_t) 1, r_idx_69143);
            int64_t min_res_69148 = smin64(min_arg_63912, min_arg_69147);
            bool x_69149 = sle64((int64_t) 0, max_res_69146);
            bool y_69150 = slt64(max_res_69146, n_62364);
            bool bounds_check_69151 = x_69149 && y_69150;
            bool index_certs_69152;
            
            if (!bounds_check_69151) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69146,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69153 = ((int64_t *) mem_67479.mem)[max_res_69146];
            int64_t abs_arg_69154 = sub64(x_69153, defunc_0_g_res_68961);
            int64_t abs_res_69155 = abs64(abs_arg_69154);
            bool x_69156 = sle64((int64_t) 0, min_res_69148);
            bool y_69157 = slt64(min_res_69148, n_62364);
            bool bounds_check_69158 = x_69156 && y_69157;
            bool index_certs_69159;
            
            if (!bounds_check_69158) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69148,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69160 = ((int64_t *) mem_67479.mem)[min_res_69148];
            int64_t abs_arg_69161 = sub64(x_69160, defunc_0_g_res_68961);
            int64_t abs_res_69162 = abs64(abs_arg_69161);
            bool cond_69163 = max_res_69146 == l_idx_69142;
            int64_t loopres_69164;
            int64_t loopres_69165;
            int64_t loopres_69166;
            
            if (cond_69163) {
                loopres_69164 = l_idx_69142;
                loopres_69165 = r_idx_69143;
                loopres_69166 = min_res_62384;
            } else {
                bool cond_69167 = slt64(abs_res_69155, abs_res_69162);
                bool cond_f_res_69168 = min_res_69148 == r_idx_69143;
                bool x_69169 = !cond_69167;
                bool y_69170 = cond_f_res_69168 && x_69169;
                bool cond_69171 = cond_69167 || y_69170;
                int64_t loopres_f_res_69172;
                
                if (cond_69171) {
                    loopres_f_res_69172 = max_res_69146;
                } else {
                    loopres_f_res_69172 = l_idx_69142;
                }
                
                int64_t loopres_f_res_69173;
                
                if (cond_69171) {
                    loopres_f_res_69173 = r_idx_69143;
                } else {
                    loopres_f_res_69173 = min_res_69148;
                }
                
                int64_t loopres_f_res_69174;
                
                if (cond_69171) {
                    int64_t loopres_f_res_t_res_69175 = add64((int64_t) 1,
                                                              span_69144);
                    
                    loopres_f_res_69174 = loopres_f_res_t_res_69175;
                } else {
                    int64_t loopres_f_res_f_res_69176 = add64((int64_t) 1,
                                                              span_69144);
                    
                    loopres_f_res_69174 = loopres_f_res_f_res_69176;
                }
                loopres_69164 = loopres_f_res_69172;
                loopres_69165 = loopres_f_res_69173;
                loopres_69166 = loopres_f_res_69174;
            }
            
            bool loop_cond_69177 = slt64(loopres_69166, min_res_62384);
            bool loop_while_tmp_69224 = loop_cond_69177;
            int64_t l_idx_tmp_69225 = loopres_69164;
            int64_t r_idx_tmp_69226 = loopres_69165;
            int64_t span_tmp_69227 = loopres_69166;
            
            loop_while_69141 = loop_while_tmp_69224;
            l_idx_69142 = l_idx_tmp_69225;
            r_idx_69143 = r_idx_tmp_69226;
            span_69144 = span_tmp_69227;
        }
        idx_68983 = loop_while_69141;
        idx_68984 = l_idx_69142;
        idx_68985 = r_idx_69143;
        idx_68986 = span_69144;
        
        int64_t min_res_69024 = smin64(min_arg_63913, idx_68984);
        int64_t x_69025 = add64(min_res_62384, min_res_69024);
        int64_t r_69026 = sub64(x_69025, (int64_t) 1);
        bool x_69027 = sle64((int64_t) 0, r_69026);
        bool y_69028 = slt64(r_69026, n_62364);
        bool bounds_check_69029 = x_69027 && y_69028;
        bool index_certs_69030;
        
        if (!bounds_check_69029) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_69026,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69031 = ((int64_t *) mem_67473.mem)[r_69026];
        int64_t abs_arg_69032 = sub64(x_69031, min_res_68960);
        int64_t abs_res_69033 = abs64(abs_arg_69032);
        bool x_69034 = sle64((int64_t) 0, min_res_69024);
        bool y_69035 = slt64(min_res_69024, n_62364);
        bool bounds_check_69036 = x_69034 && y_69035;
        bool index_certs_69037;
        
        if (!bounds_check_69036) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_69024,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69038 = ((int64_t *) mem_67473.mem)[min_res_69024];
        int64_t abs_arg_69039 = sub64(x_69038, min_res_68960);
        int64_t abs_res_69040 = abs64(abs_arg_69039);
        int64_t max_res_69041 = smax64(abs_res_69033, abs_res_69040);
        float defunc_0_f_res_69042 = sitofp_i64_f32(max_res_69041);
        float defunc_1_f_res_69043 = max_res_63917 + defunc_0_f_res_69042;
        float defunc_0_f_res_69044 = sitofp_i64_f32(min_res_68960);
        float defunc_2_reduce_res_69045;
        float redout_69179 = 0.0F;
        
        for (int64_t i_69178 = 0; i_69178 < q_62366; i_69178++) {
            float x_69180 = ((float *) mem_67482.mem)[i_69178];
            bool cond_69181 = sle64(last_res_63900, i_69178);
            float defunc_0_f_res_69182;
            
            if (cond_69181) {
                defunc_0_f_res_69182 = 0.0F;
            } else {
                int64_t i_69183 = add64(min_res_69024, i_69178);
                float x_69184 = ((float *) mem_67476.mem)[i_69183];
                float defunc_0_f_res_f_res_69185 = 1.0F + x_69184;
                
                defunc_0_f_res_69182 = defunc_0_f_res_f_res_69185;
            }
            
            float x_j_69186 = defunc_0_f_res_69182 - defunc_0_f_res_69044;
            float abs_res_69187 = (float) fabs(x_j_69186);
            float tmp1_69188 = abs_res_69187 / defunc_1_f_res_69043;
            float x_69189 = tmp1_69188 * tmp1_69188;
            float y_69190 = tmp1_69188 * x_69189;
            float tmp2_69191 = 1.0F - y_69190;
            float x_69192 = tmp2_69191 * tmp2_69191;
            float tmp3_69193 = tmp2_69191 * x_69192;
            float w_j_69194 = x_69180 * tmp3_69193;
            float defunc_1_op_res_69195 = w_j_69194 + redout_69179;
            float redout_tmp_69228 = defunc_1_op_res_69195;
            
            redout_69179 = redout_tmp_69228;
        }
        defunc_2_reduce_res_69045 = redout_69179;
        
        float a0_69064 = 1.0F / defunc_2_reduce_res_69045;
        float defunc_2_reduce_res_69065;
        float redout_69197 = 0.0F;
        
        for (int64_t i_69196 = 0; i_69196 < q_62366; i_69196++) {
            float x_69198 = ((float *) mem_67482.mem)[i_69196];
            bool cond_69199 = sle64(last_res_63900, i_69196);
            float defunc_0_f_res_69200;
            
            if (cond_69199) {
                defunc_0_f_res_69200 = 0.0F;
            } else {
                int64_t i_69201 = add64(min_res_69024, i_69196);
                float x_69202 = ((float *) mem_67476.mem)[i_69201];
                float defunc_0_f_res_f_res_69203 = 1.0F + x_69202;
                
                defunc_0_f_res_69200 = defunc_0_f_res_f_res_69203;
            }
            
            float x_j_69204 = defunc_0_f_res_69200 - defunc_0_f_res_69044;
            float abs_res_69205 = (float) fabs(x_j_69204);
            float tmp1_69206 = abs_res_69205 / defunc_1_f_res_69043;
            float x_69207 = tmp1_69206 * tmp1_69206;
            float y_69208 = tmp1_69206 * x_69207;
            float tmp2_69209 = 1.0F - y_69208;
            float x_69210 = tmp2_69209 * tmp2_69209;
            float tmp3_69211 = tmp2_69209 * x_69210;
            float tmp4_69212 = x_69198 * tmp3_69211;
            float defunc_0_f_res_69213;
            
            if (cond_69199) {
                defunc_0_f_res_69213 = 0.0F;
            } else {
                int64_t i_69214 = add64(min_res_69024, i_69196);
                float x_69215 = ((float *) mem_67470.mem)[i_69214];
                
                defunc_0_f_res_69213 = x_69215;
            }
            
            float x_69216 = a0_69064 * tmp4_69212;
            float defunc_9_fit_fun_res_69217 = defunc_0_f_res_69213 * x_69216;
            float defunc_1_op_res_69218 = defunc_9_fit_fun_res_69217 +
                  redout_69197;
            float redout_tmp_69229 = defunc_1_op_res_69218;
            
            redout_69197 = redout_tmp_69229;
        }
        defunc_2_reduce_res_69065 = redout_69197;
        ((float *) mem_67485.mem)[gtid_63751] = defunc_2_reduce_res_69065;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73924_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73924_end -
                 futhark_mc_segmap_parloop_73924_start;
        
        ctx->futhark_mc_segmap_parloop_73924_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73924_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73924_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73922(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63750 = tid;
    int num_tasks_69121 = info.nsubtasks;
    struct futhark_mc_task_73921 *futhark_mc_task_73921 =
                                 (struct futhark_mc_task_73921 *) args;
    struct futhark_context *ctx = futhark_mc_task_73921->ctx;
    uint64_t futhark_mc_segmap_task_73922_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73922_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73921->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73921->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73921->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73921->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73921->free_i_62378;
    bool x_62379 = futhark_mc_task_73921->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73921->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73921->free_loop_cond_62389;
    int64_t last_res_63900 = futhark_mc_task_73921->free_last_res_63900;
    int64_t min_arg_63912 = futhark_mc_task_73921->free_min_arg_63912;
    int64_t min_arg_63913 = futhark_mc_task_73921->free_min_arg_63913;
    float max_res_63917 = futhark_mc_task_73921->free_max_res_63917;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_task_73921->free_mem_67470, .size =
                                 0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_task_73921->free_mem_67473, .size =
                                 0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_task_73921->free_mem_67476, .size =
                                 0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_task_73921->free_mem_67479, .size =
                                 0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_task_73921->free_mem_67482, .size =
                                 0, .references =NULL};
    struct memblock mem_67485 = {.desc ="mem_67485", .mem =
                                 futhark_mc_task_73921->free_mem_67485, .size =
                                 0, .references =NULL};
    int64_t iter_69122;
    struct futhark_mc_segmap_parloop_struct_73923
    futhark_mc_segmap_parloop_struct_73923;
    
    futhark_mc_segmap_parloop_struct_73923.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73923.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73923.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73923.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73923.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73923.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73923.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73923.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73923.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73923.free_last_res_63900 = last_res_63900;
    futhark_mc_segmap_parloop_struct_73923.free_min_arg_63912 = min_arg_63912;
    futhark_mc_segmap_parloop_struct_73923.free_min_arg_63913 = min_arg_63913;
    futhark_mc_segmap_parloop_struct_73923.free_max_res_63917 = max_res_63917;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67470 = mem_67470.mem;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67473 = mem_67473.mem;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67476 = mem_67476.mem;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67479 = mem_67479.mem;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67482 = mem_67482.mem;
    futhark_mc_segmap_parloop_struct_73923.free_mem_67485 = mem_67485.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73924_task;
    
    futhark_mc_segmap_parloop_73924_task.name =
        "futhark_mc_segmap_parloop_73924";
    futhark_mc_segmap_parloop_73924_task.fn = futhark_mc_segmap_parloop_73924;
    futhark_mc_segmap_parloop_73924_task.args =
        &futhark_mc_segmap_parloop_struct_73923;
    futhark_mc_segmap_parloop_73924_task.iterations = iterations;
    futhark_mc_segmap_parloop_73924_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73924_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73924_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73924_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73924_task);
    
    if (futhark_mc_segmap_parloop_73924_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73924_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73924_total_end -
                 futhark_mc_segmap_parloop_73924_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73924_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73924_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73924_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73922_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73922_end -
                 futhark_mc_segmap_task_73922_start;
        
        ctx->futhark_mc_segmap_task_73922_runs[tid]++;
        ctx->futhark_mc_segmap_task_73922_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73922_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73926 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_63900;
    int64_t free_min_arg_63912;
    int64_t free_min_arg_63913;
    float free_max_res_63917;
    char *free_mem_67470;
    char *free_mem_67473;
    char *free_mem_67476;
    char *free_mem_67479;
    char *free_mem_67482;
    char *free_mem_67485;
};
struct futhark_mc_task_73928 {
    struct futhark_context *ctx;
    int64_t free_last_res_63900;
    char *free_mem_67476;
    char *free_mem_67482;
    int64_t free_min_res_68894;
    float free_defunc_1_f_res_68913;
    float free_defunc_0_f_res_68914;
    float *retval_defunc_2_reduce_res_68915;
};
struct futhark_mc_segred_stage_1_parloop_struct_73931 {
    struct futhark_context *ctx;
    int64_t free_last_res_63900;
    char *free_mem_67476;
    char *free_mem_67482;
    int64_t free_min_res_68894;
    float free_defunc_1_f_res_68913;
    float free_defunc_0_f_res_68914;
    char *free_reduce_stage_1_tid_res_arr_mem_69337;
};
static int futhark_mc_segred_stage_1_parloop_73932(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_63754, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73931
    *futhark_mc_segred_stage_1_parloop_struct_73931 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73931 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73931->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73932_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73932_start = get_wall_time();
    
    int64_t last_res_63900 =
            futhark_mc_segred_stage_1_parloop_struct_73931->free_last_res_63900;
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73931->free_mem_67476,
                                 .size =0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73931->free_mem_67482,
                                 .size =0, .references =NULL};
    int64_t min_res_68894 =
            futhark_mc_segred_stage_1_parloop_struct_73931->free_min_res_68894;
    float defunc_1_f_res_68913 =
          futhark_mc_segred_stage_1_parloop_struct_73931->free_defunc_1_f_res_68913;
    float defunc_0_f_res_68914 =
          futhark_mc_segred_stage_1_parloop_struct_73931->free_defunc_0_f_res_68914;
    struct memblock reduce_stage_1_tid_res_arr_mem_69337 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_69337",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73931->free_reduce_stage_1_tid_res_arr_mem_69337,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69339 = start;
    float x_69286;
    float x_69287;
    float local_acc_69340 = 0.0F;
    
    for (; iter_69339 < end; iter_69339++) {
        int64_t gtid_63755 = iter_69339;
        float x_69289 = ((float *) mem_67482.mem)[gtid_63755];
        bool cond_69290 = sle64(last_res_63900, gtid_63755);
        float defunc_0_f_res_69291;
        
        if (cond_69290) {
            defunc_0_f_res_69291 = 0.0F;
        } else {
            int64_t i_69292 = add64(gtid_63755, min_res_68894);
            float x_69293 = ((float *) mem_67476.mem)[i_69292];
            float defunc_0_f_res_f_res_69294 = 1.0F + x_69293;
            
            defunc_0_f_res_69291 = defunc_0_f_res_f_res_69294;
        }
        
        float x_j_69295 = defunc_0_f_res_69291 - defunc_0_f_res_68914;
        float abs_res_69296 = (float) fabs(x_j_69295);
        float tmp1_69297 = abs_res_69296 / defunc_1_f_res_68913;
        float x_69298 = tmp1_69297 * tmp1_69297;
        float y_69299 = tmp1_69297 * x_69298;
        float tmp2_69300 = 1.0F - y_69299;
        float x_69301 = tmp2_69300 * tmp2_69300;
        float tmp3_69302 = tmp2_69300 * x_69301;
        float w_j_69303 = x_69289 * tmp3_69302;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_69286 = local_acc_69340;
        }
        // Load next params
        {
            x_69287 = w_j_69303;
        }
        // Red body
        {
            float defunc_1_op_res_69288 = x_69286 + x_69287;
            
            local_acc_69340 = defunc_1_op_res_69288;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_69337.mem)[flat_tid_63754] =
        local_acc_69340;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73932_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73932_end -
                 futhark_mc_segred_stage_1_parloop_73932_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73932_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73932_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73932_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73929(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63754 = tid;
    int num_tasks_69336 = info.nsubtasks;
    struct futhark_mc_task_73928 *futhark_mc_task_73928 =
                                 (struct futhark_mc_task_73928 *) args;
    struct futhark_context *ctx = futhark_mc_task_73928->ctx;
    uint64_t futhark_mc_segred_task_73929_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73929_start = get_wall_time();
    
    int64_t last_res_63900 = futhark_mc_task_73928->free_last_res_63900;
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_task_73928->free_mem_67476, .size =
                                 0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_task_73928->free_mem_67482, .size =
                                 0, .references =NULL};
    int64_t min_res_68894 = futhark_mc_task_73928->free_min_res_68894;
    float defunc_1_f_res_68913 =
          futhark_mc_task_73928->free_defunc_1_f_res_68913;
    float defunc_0_f_res_68914 =
          futhark_mc_task_73928->free_defunc_0_f_res_68914;
    float defunc_2_reduce_res_68915 =
          *futhark_mc_task_73928->retval_defunc_2_reduce_res_68915;
    size_t reduce_stage_1_tid_res_arr_mem_69337_cached_sizze_73930 = 0;
    char *reduce_stage_1_tid_res_arr_mem_69337 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_69337_cached_sizze_73930 <
        (size_t) ((int64_t) 4 * num_tasks_69336)) {
        reduce_stage_1_tid_res_arr_mem_69337 =
            realloc(reduce_stage_1_tid_res_arr_mem_69337, (int64_t) 4 *
                    num_tasks_69336);
        reduce_stage_1_tid_res_arr_mem_69337_cached_sizze_73930 = (int64_t) 4 *
            num_tasks_69336;
    }
    
    int64_t iter_69339;
    struct futhark_mc_segred_stage_1_parloop_struct_73931
    futhark_mc_segred_stage_1_parloop_struct_73931;
    
    futhark_mc_segred_stage_1_parloop_struct_73931.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_last_res_63900 =
        last_res_63900;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_mem_67476 =
        mem_67476.mem;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_mem_67482 =
        mem_67482.mem;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_min_res_68894 =
        min_res_68894;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_defunc_1_f_res_68913 =
        defunc_1_f_res_68913;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_defunc_0_f_res_68914 =
        defunc_0_f_res_68914;
    futhark_mc_segred_stage_1_parloop_struct_73931.free_reduce_stage_1_tid_res_arr_mem_69337 =
        reduce_stage_1_tid_res_arr_mem_69337;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73932_task;
    
    futhark_mc_segred_stage_1_parloop_73932_task.name =
        "futhark_mc_segred_stage_1_parloop_73932";
    futhark_mc_segred_stage_1_parloop_73932_task.fn =
        futhark_mc_segred_stage_1_parloop_73932;
    futhark_mc_segred_stage_1_parloop_73932_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73931;
    futhark_mc_segred_stage_1_parloop_73932_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73932_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73932_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73932_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73932_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73932_task);
    
    if (futhark_mc_segred_stage_1_parloop_73932_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73932_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73932_total_end -
                 futhark_mc_segred_stage_1_parloop_73932_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73932_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73932_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73932_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_68915 = 0.0F;
    }
    
    float x_69341;
    float x_69342;
    
    for (int32_t i_69344 = 0; i_69344 < num_tasks_69336; i_69344++) {
        flat_tid_63754 = i_69344;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_69341 = defunc_2_reduce_res_68915;
            }
            // load next params
            {
                x_69342 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_69337)[flat_tid_63754];
            }
            // red body
            {
                float defunc_1_op_res_69343 = x_69341 + x_69342;
                
                defunc_2_reduce_res_68915 = defunc_1_op_res_69343;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_69337);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73929_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73929_end -
                 futhark_mc_segred_task_73929_start;
        
        ctx->futhark_mc_segred_task_73929_runs[tid]++;
        ctx->futhark_mc_segred_task_73929_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73929_iter[tid] += iterations;
    }
    *futhark_mc_task_73928->retval_defunc_2_reduce_res_68915 =
        defunc_2_reduce_res_68915;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73933 {
    struct futhark_context *ctx;
    int64_t free_last_res_63900;
    char *free_mem_67470;
    char *free_mem_67476;
    char *free_mem_67482;
    int64_t free_min_res_68894;
    float free_defunc_1_f_res_68913;
    float free_defunc_0_f_res_68914;
    float free_a0_68934;
    float *retval_defunc_2_reduce_res_68935;
};
struct futhark_mc_segred_stage_1_parloop_struct_73936 {
    struct futhark_context *ctx;
    int64_t free_last_res_63900;
    char *free_mem_67470;
    char *free_mem_67476;
    char *free_mem_67482;
    int64_t free_min_res_68894;
    float free_defunc_1_f_res_68913;
    float free_defunc_0_f_res_68914;
    float free_a0_68934;
    char *free_reduce_stage_1_tid_res_arr_mem_69346;
};
static int futhark_mc_segred_stage_1_parloop_73937(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_63756, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73936
    *futhark_mc_segred_stage_1_parloop_struct_73936 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73936 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73936->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73937_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73937_start = get_wall_time();
    
    int64_t last_res_63900 =
            futhark_mc_segred_stage_1_parloop_struct_73936->free_last_res_63900;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73936->free_mem_67470,
                                 .size =0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73936->free_mem_67476,
                                 .size =0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73936->free_mem_67482,
                                 .size =0, .references =NULL};
    int64_t min_res_68894 =
            futhark_mc_segred_stage_1_parloop_struct_73936->free_min_res_68894;
    float defunc_1_f_res_68913 =
          futhark_mc_segred_stage_1_parloop_struct_73936->free_defunc_1_f_res_68913;
    float defunc_0_f_res_68914 =
          futhark_mc_segred_stage_1_parloop_struct_73936->free_defunc_0_f_res_68914;
    float a0_68934 =
          futhark_mc_segred_stage_1_parloop_struct_73936->free_a0_68934;
    struct memblock reduce_stage_1_tid_res_arr_mem_69346 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_69346",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73936->free_reduce_stage_1_tid_res_arr_mem_69346,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69348 = start;
    float x_69304;
    float x_69305;
    float local_acc_69349 = 0.0F;
    
    for (; iter_69348 < end; iter_69348++) {
        int64_t gtid_63757 = iter_69348;
        float x_69307 = ((float *) mem_67482.mem)[gtid_63757];
        bool cond_69308 = sle64(last_res_63900, gtid_63757);
        float defunc_0_f_res_69309;
        
        if (cond_69308) {
            defunc_0_f_res_69309 = 0.0F;
        } else {
            int64_t i_69310 = add64(gtid_63757, min_res_68894);
            float x_69311 = ((float *) mem_67476.mem)[i_69310];
            float defunc_0_f_res_f_res_69312 = 1.0F + x_69311;
            
            defunc_0_f_res_69309 = defunc_0_f_res_f_res_69312;
        }
        
        float x_j_69313 = defunc_0_f_res_69309 - defunc_0_f_res_68914;
        float abs_res_69314 = (float) fabs(x_j_69313);
        float tmp1_69315 = abs_res_69314 / defunc_1_f_res_68913;
        float x_69316 = tmp1_69315 * tmp1_69315;
        float y_69317 = tmp1_69315 * x_69316;
        float tmp2_69318 = 1.0F - y_69317;
        float x_69319 = tmp2_69318 * tmp2_69318;
        float tmp3_69320 = tmp2_69318 * x_69319;
        float tmp4_69321 = x_69307 * tmp3_69320;
        float defunc_0_f_res_69322;
        
        if (cond_69308) {
            defunc_0_f_res_69322 = 0.0F;
        } else {
            int64_t i_69323 = add64(gtid_63757, min_res_68894);
            float x_69324 = ((float *) mem_67470.mem)[i_69323];
            
            defunc_0_f_res_69322 = x_69324;
        }
        
        float x_69325 = a0_68934 * tmp4_69321;
        float defunc_9_fit_fun_res_69326 = defunc_0_f_res_69322 * x_69325;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_69304 = local_acc_69349;
        }
        // Load next params
        {
            x_69305 = defunc_9_fit_fun_res_69326;
        }
        // Red body
        {
            float defunc_1_op_res_69306 = x_69304 + x_69305;
            
            local_acc_69349 = defunc_1_op_res_69306;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_69346.mem)[flat_tid_63756] =
        local_acc_69349;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73937_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73937_end -
                 futhark_mc_segred_stage_1_parloop_73937_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73937_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73937_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73937_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73934(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63756 = tid;
    int num_tasks_69345 = info.nsubtasks;
    struct futhark_mc_task_73933 *futhark_mc_task_73933 =
                                 (struct futhark_mc_task_73933 *) args;
    struct futhark_context *ctx = futhark_mc_task_73933->ctx;
    uint64_t futhark_mc_segred_task_73934_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73934_start = get_wall_time();
    
    int64_t last_res_63900 = futhark_mc_task_73933->free_last_res_63900;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_task_73933->free_mem_67470, .size =
                                 0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_task_73933->free_mem_67476, .size =
                                 0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_task_73933->free_mem_67482, .size =
                                 0, .references =NULL};
    int64_t min_res_68894 = futhark_mc_task_73933->free_min_res_68894;
    float defunc_1_f_res_68913 =
          futhark_mc_task_73933->free_defunc_1_f_res_68913;
    float defunc_0_f_res_68914 =
          futhark_mc_task_73933->free_defunc_0_f_res_68914;
    float a0_68934 = futhark_mc_task_73933->free_a0_68934;
    float defunc_2_reduce_res_68935 =
          *futhark_mc_task_73933->retval_defunc_2_reduce_res_68935;
    size_t reduce_stage_1_tid_res_arr_mem_69346_cached_sizze_73935 = 0;
    char *reduce_stage_1_tid_res_arr_mem_69346 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_69346_cached_sizze_73935 <
        (size_t) ((int64_t) 4 * num_tasks_69345)) {
        reduce_stage_1_tid_res_arr_mem_69346 =
            realloc(reduce_stage_1_tid_res_arr_mem_69346, (int64_t) 4 *
                    num_tasks_69345);
        reduce_stage_1_tid_res_arr_mem_69346_cached_sizze_73935 = (int64_t) 4 *
            num_tasks_69345;
    }
    
    int64_t iter_69348;
    struct futhark_mc_segred_stage_1_parloop_struct_73936
    futhark_mc_segred_stage_1_parloop_struct_73936;
    
    futhark_mc_segred_stage_1_parloop_struct_73936.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_last_res_63900 =
        last_res_63900;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_mem_67470 =
        mem_67470.mem;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_mem_67476 =
        mem_67476.mem;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_mem_67482 =
        mem_67482.mem;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_min_res_68894 =
        min_res_68894;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_defunc_1_f_res_68913 =
        defunc_1_f_res_68913;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_defunc_0_f_res_68914 =
        defunc_0_f_res_68914;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_a0_68934 = a0_68934;
    futhark_mc_segred_stage_1_parloop_struct_73936.free_reduce_stage_1_tid_res_arr_mem_69346 =
        reduce_stage_1_tid_res_arr_mem_69346;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73937_task;
    
    futhark_mc_segred_stage_1_parloop_73937_task.name =
        "futhark_mc_segred_stage_1_parloop_73937";
    futhark_mc_segred_stage_1_parloop_73937_task.fn =
        futhark_mc_segred_stage_1_parloop_73937;
    futhark_mc_segred_stage_1_parloop_73937_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73936;
    futhark_mc_segred_stage_1_parloop_73937_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73937_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73937_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73937_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73937_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73937_task);
    
    if (futhark_mc_segred_stage_1_parloop_73937_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73937_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73937_total_end -
                 futhark_mc_segred_stage_1_parloop_73937_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73937_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73937_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73937_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_68935 = 0.0F;
    }
    
    float x_69350;
    float x_69351;
    
    for (int32_t i_69353 = 0; i_69353 < num_tasks_69345; i_69353++) {
        flat_tid_63756 = i_69353;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_69350 = defunc_2_reduce_res_68935;
            }
            // load next params
            {
                x_69351 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_69346)[flat_tid_63756];
            }
            // red body
            {
                float defunc_1_op_res_69352 = x_69350 + x_69351;
                
                defunc_2_reduce_res_68935 = defunc_1_op_res_69352;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_69346);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73934_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73934_end -
                 futhark_mc_segred_task_73934_start;
        
        ctx->futhark_mc_segred_task_73934_runs[tid]++;
        ctx->futhark_mc_segred_task_73934_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73934_iter[tid] += iterations;
    }
    *futhark_mc_task_73933->retval_defunc_2_reduce_res_68935 =
        defunc_2_reduce_res_68935;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73927(void *args, int64_t start,
                                           int64_t end, int flat_tid_63752,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73926
    *futhark_mc_segmap_parloop_struct_73926 =
    (struct futhark_mc_segmap_parloop_struct_73926 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73926->ctx;
    uint64_t futhark_mc_segmap_parloop_73927_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73927_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73926->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73926->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73926->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73926->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73926->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73926->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73926->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73926->free_loop_cond_62389;
    int64_t last_res_63900 =
            futhark_mc_segmap_parloop_struct_73926->free_last_res_63900;
    int64_t min_arg_63912 =
            futhark_mc_segmap_parloop_struct_73926->free_min_arg_63912;
    int64_t min_arg_63913 =
            futhark_mc_segmap_parloop_struct_73926->free_min_arg_63913;
    float max_res_63917 =
          futhark_mc_segmap_parloop_struct_73926->free_max_res_63917;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67470,
                                 .size =0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67473,
                                 .size =0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67476,
                                 .size =0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67479,
                                 .size =0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67482,
                                 .size =0, .references =NULL};
    struct memblock mem_67485 = {.desc ="mem_67485", .mem =
                                 futhark_mc_segmap_parloop_struct_73926->free_mem_67485,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69230 = start;
    
    for (; iter_69230 < end; iter_69230++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69327 = n_m_62372;
        int64_t gtid_63753 = iter_69230;
        int64_t remnant_69328 = iter_69230 - gtid_63753;
        int64_t min_arg_68829 = mul64(jump_62368, gtid_63753);
        int64_t min_res_68830 = smin64(i_62378, min_arg_68829);
        int64_t defunc_0_g_res_68831 = add64((int64_t) 1, min_res_68830);
        bool init_idx_68832;
        int64_t init_idx_68833;
        int64_t init_idx_68834;
        bool loop_while_69231;
        int64_t low_69232;
        int64_t high_69233;
        
        loop_while_69231 = x_62379;
        low_69232 = (int64_t) 0;
        high_69233 = i_62378;
        while (loop_while_69231) {
            int64_t x_69234 = add64(low_69232, high_69233);
            int64_t mid_69235 = sdiv64(x_69234, (int64_t) 2);
            bool x_69236 = sle64((int64_t) 0, mid_69235);
            bool y_69237 = slt64(mid_69235, n_62364);
            bool bounds_check_69238 = x_69236 && y_69237;
            bool index_certs_69239;
            
            if (!bounds_check_69238) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69235,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_69240 = ((int64_t *) mem_67479.mem)[mid_69235];
            bool cond_69241 = slt64(mid_id_69240, (int64_t) 0);
            int64_t mid_idx_69242;
            
            if (cond_69241) {
                mid_idx_69242 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69242 = mid_id_69240;
            }
            
            bool cond_69243 = sle64(defunc_0_g_res_68831, mid_idx_69242);
            int64_t loopres_69244;
            int64_t loopres_69245;
            
            if (cond_69243) {
                int64_t loopres_t_res_69246 = sub64(mid_69235, (int64_t) 1);
                
                loopres_69244 = low_69232;
                loopres_69245 = loopres_t_res_69246;
            } else {
                int64_t loopres_f_res_69247 = add64((int64_t) 1, mid_69235);
                
                loopres_69244 = loopres_f_res_69247;
                loopres_69245 = high_69233;
            }
            
            bool loop_cond_69248 = sle64(loopres_69244, loopres_69245);
            bool loop_while_tmp_69329 = loop_cond_69248;
            int64_t low_tmp_69330 = loopres_69244;
            int64_t high_tmp_69331 = loopres_69245;
            
            loop_while_69231 = loop_while_tmp_69329;
            low_69232 = low_tmp_69330;
            high_69233 = high_tmp_69331;
        }
        init_idx_68832 = loop_while_69231;
        init_idx_68833 = low_69232;
        init_idx_68834 = high_69233;
        
        bool idx_68853;
        int64_t idx_68854;
        int64_t idx_68855;
        int64_t idx_68856;
        bool loop_while_69249;
        int64_t l_idx_69250;
        int64_t r_idx_69251;
        int64_t span_69252;
        
        loop_while_69249 = loop_cond_62389;
        l_idx_69250 = init_idx_68833;
        r_idx_69251 = init_idx_68833;
        span_69252 = (int64_t) 1;
        while (loop_while_69249) {
            int64_t max_arg_69253 = sub64(l_idx_69250, (int64_t) 1);
            int64_t max_res_69254 = smax64((int64_t) 0, max_arg_69253);
            int64_t min_arg_69255 = add64((int64_t) 1, r_idx_69251);
            int64_t min_res_69256 = smin64(min_arg_63912, min_arg_69255);
            bool x_69257 = sle64((int64_t) 0, max_res_69254);
            bool y_69258 = slt64(max_res_69254, n_62364);
            bool bounds_check_69259 = x_69257 && y_69258;
            bool index_certs_69260;
            
            if (!bounds_check_69259) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69254,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69261 = ((int64_t *) mem_67479.mem)[max_res_69254];
            int64_t abs_arg_69262 = sub64(x_69261, defunc_0_g_res_68831);
            int64_t abs_res_69263 = abs64(abs_arg_69262);
            bool x_69264 = sle64((int64_t) 0, min_res_69256);
            bool y_69265 = slt64(min_res_69256, n_62364);
            bool bounds_check_69266 = x_69264 && y_69265;
            bool index_certs_69267;
            
            if (!bounds_check_69266) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69256,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69268 = ((int64_t *) mem_67479.mem)[min_res_69256];
            int64_t abs_arg_69269 = sub64(x_69268, defunc_0_g_res_68831);
            int64_t abs_res_69270 = abs64(abs_arg_69269);
            bool cond_69271 = max_res_69254 == l_idx_69250;
            int64_t loopres_69272;
            int64_t loopres_69273;
            int64_t loopres_69274;
            
            if (cond_69271) {
                loopres_69272 = l_idx_69250;
                loopres_69273 = r_idx_69251;
                loopres_69274 = min_res_62384;
            } else {
                bool cond_69275 = slt64(abs_res_69263, abs_res_69270);
                bool cond_f_res_69276 = min_res_69256 == r_idx_69251;
                bool x_69277 = !cond_69275;
                bool y_69278 = cond_f_res_69276 && x_69277;
                bool cond_69279 = cond_69275 || y_69278;
                int64_t loopres_f_res_69280;
                
                if (cond_69279) {
                    loopres_f_res_69280 = max_res_69254;
                } else {
                    loopres_f_res_69280 = l_idx_69250;
                }
                
                int64_t loopres_f_res_69281;
                
                if (cond_69279) {
                    loopres_f_res_69281 = r_idx_69251;
                } else {
                    loopres_f_res_69281 = min_res_69256;
                }
                
                int64_t loopres_f_res_69282;
                
                if (cond_69279) {
                    int64_t loopres_f_res_t_res_69283 = add64((int64_t) 1,
                                                              span_69252);
                    
                    loopres_f_res_69282 = loopres_f_res_t_res_69283;
                } else {
                    int64_t loopres_f_res_f_res_69284 = add64((int64_t) 1,
                                                              span_69252);
                    
                    loopres_f_res_69282 = loopres_f_res_f_res_69284;
                }
                loopres_69272 = loopres_f_res_69280;
                loopres_69273 = loopres_f_res_69281;
                loopres_69274 = loopres_f_res_69282;
            }
            
            bool loop_cond_69285 = slt64(loopres_69274, min_res_62384);
            bool loop_while_tmp_69332 = loop_cond_69285;
            int64_t l_idx_tmp_69333 = loopres_69272;
            int64_t r_idx_tmp_69334 = loopres_69273;
            int64_t span_tmp_69335 = loopres_69274;
            
            loop_while_69249 = loop_while_tmp_69332;
            l_idx_69250 = l_idx_tmp_69333;
            r_idx_69251 = r_idx_tmp_69334;
            span_69252 = span_tmp_69335;
        }
        idx_68853 = loop_while_69249;
        idx_68854 = l_idx_69250;
        idx_68855 = r_idx_69251;
        idx_68856 = span_69252;
        
        int64_t min_res_68894 = smin64(min_arg_63913, idx_68854);
        int64_t x_68895 = add64(min_res_62384, min_res_68894);
        int64_t r_68896 = sub64(x_68895, (int64_t) 1);
        bool x_68897 = sle64((int64_t) 0, r_68896);
        bool y_68898 = slt64(r_68896, n_62364);
        bool bounds_check_68899 = x_68897 && y_68898;
        bool index_certs_68900;
        
        if (!bounds_check_68899) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_68896,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_68901 = ((int64_t *) mem_67473.mem)[r_68896];
        int64_t abs_arg_68902 = sub64(x_68901, min_res_68830);
        int64_t abs_res_68903 = abs64(abs_arg_68902);
        bool x_68904 = sle64((int64_t) 0, min_res_68894);
        bool y_68905 = slt64(min_res_68894, n_62364);
        bool bounds_check_68906 = x_68904 && y_68905;
        bool index_certs_68907;
        
        if (!bounds_check_68906) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_68894,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_68908 = ((int64_t *) mem_67473.mem)[min_res_68894];
        int64_t abs_arg_68909 = sub64(x_68908, min_res_68830);
        int64_t abs_res_68910 = abs64(abs_arg_68909);
        int64_t max_res_68911 = smax64(abs_res_68903, abs_res_68910);
        float defunc_0_f_res_68912 = sitofp_i64_f32(max_res_68911);
        float defunc_1_f_res_68913 = max_res_63917 + defunc_0_f_res_68912;
        float defunc_0_f_res_68914 = sitofp_i64_f32(min_res_68830);
        float defunc_2_reduce_res_68915;
        int64_t flat_tid_63754 = (int64_t) 0;
        int32_t num_tasks_69336;
        struct futhark_mc_task_73928 futhark_mc_task_73928;
        
        futhark_mc_task_73928.ctx = ctx;
        futhark_mc_task_73928.free_last_res_63900 = last_res_63900;
        futhark_mc_task_73928.free_mem_67476 = mem_67476.mem;
        futhark_mc_task_73928.free_mem_67482 = mem_67482.mem;
        futhark_mc_task_73928.free_min_res_68894 = min_res_68894;
        futhark_mc_task_73928.free_defunc_1_f_res_68913 = defunc_1_f_res_68913;
        futhark_mc_task_73928.free_defunc_0_f_res_68914 = defunc_0_f_res_68914;
        futhark_mc_task_73928.retval_defunc_2_reduce_res_68915 =
            &defunc_2_reduce_res_68915;
        
        struct scheduler_segop futhark_mc_task_73928_task;
        
        futhark_mc_task_73928_task.args = &futhark_mc_task_73928;
        futhark_mc_task_73928_task.top_level_fn = futhark_mc_segred_task_73929;
        futhark_mc_task_73928_task.name = "futhark_mc_segred_task_73929";
        futhark_mc_task_73928_task.iterations = q_62366;
        futhark_mc_task_73928_task.task_time =
            &ctx->futhark_mc_segred_task_73929_total_time;
        futhark_mc_task_73928_task.task_iter =
            &ctx->futhark_mc_segred_task_73929_total_iter;
        futhark_mc_task_73928_task.sched = STATIC;
        futhark_mc_task_73928_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73929_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73928_task);
        
        if (futhark_mc_segred_task_73929_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_68934 = 1.0F / defunc_2_reduce_res_68915;
        float defunc_2_reduce_res_68935;
        int64_t flat_tid_63756 = (int64_t) 0;
        int32_t num_tasks_69345;
        struct futhark_mc_task_73933 futhark_mc_task_73933;
        
        futhark_mc_task_73933.ctx = ctx;
        futhark_mc_task_73933.free_last_res_63900 = last_res_63900;
        futhark_mc_task_73933.free_mem_67470 = mem_67470.mem;
        futhark_mc_task_73933.free_mem_67476 = mem_67476.mem;
        futhark_mc_task_73933.free_mem_67482 = mem_67482.mem;
        futhark_mc_task_73933.free_min_res_68894 = min_res_68894;
        futhark_mc_task_73933.free_defunc_1_f_res_68913 = defunc_1_f_res_68913;
        futhark_mc_task_73933.free_defunc_0_f_res_68914 = defunc_0_f_res_68914;
        futhark_mc_task_73933.free_a0_68934 = a0_68934;
        futhark_mc_task_73933.retval_defunc_2_reduce_res_68935 =
            &defunc_2_reduce_res_68935;
        
        struct scheduler_segop futhark_mc_task_73933_task;
        
        futhark_mc_task_73933_task.args = &futhark_mc_task_73933;
        futhark_mc_task_73933_task.top_level_fn = futhark_mc_segred_task_73934;
        futhark_mc_task_73933_task.name = "futhark_mc_segred_task_73934";
        futhark_mc_task_73933_task.iterations = q_62366;
        futhark_mc_task_73933_task.task_time =
            &ctx->futhark_mc_segred_task_73934_total_time;
        futhark_mc_task_73933_task.task_iter =
            &ctx->futhark_mc_segred_task_73934_total_iter;
        futhark_mc_task_73933_task.sched = STATIC;
        futhark_mc_task_73933_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73934_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73933_task);
        
        if (futhark_mc_segred_task_73934_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67485.mem)[gtid_63753] = defunc_2_reduce_res_68935;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73927_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73927_end -
                 futhark_mc_segmap_parloop_73927_start;
        
        ctx->futhark_mc_segmap_parloop_73927_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73927_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73927_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73925(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63752 = tid;
    int num_tasks_69121 = info.nsubtasks;
    struct futhark_mc_task_73921 *futhark_mc_task_73921 =
                                 (struct futhark_mc_task_73921 *) args;
    struct futhark_context *ctx = futhark_mc_task_73921->ctx;
    uint64_t futhark_mc_segmap_nested_task_73925_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73925_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73921->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73921->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73921->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73921->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73921->free_i_62378;
    bool x_62379 = futhark_mc_task_73921->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73921->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73921->free_loop_cond_62389;
    int64_t last_res_63900 = futhark_mc_task_73921->free_last_res_63900;
    int64_t min_arg_63912 = futhark_mc_task_73921->free_min_arg_63912;
    int64_t min_arg_63913 = futhark_mc_task_73921->free_min_arg_63913;
    float max_res_63917 = futhark_mc_task_73921->free_max_res_63917;
    struct memblock mem_67470 = {.desc ="mem_67470", .mem =
                                 futhark_mc_task_73921->free_mem_67470, .size =
                                 0, .references =NULL};
    struct memblock mem_67473 = {.desc ="mem_67473", .mem =
                                 futhark_mc_task_73921->free_mem_67473, .size =
                                 0, .references =NULL};
    struct memblock mem_67476 = {.desc ="mem_67476", .mem =
                                 futhark_mc_task_73921->free_mem_67476, .size =
                                 0, .references =NULL};
    struct memblock mem_67479 = {.desc ="mem_67479", .mem =
                                 futhark_mc_task_73921->free_mem_67479, .size =
                                 0, .references =NULL};
    struct memblock mem_67482 = {.desc ="mem_67482", .mem =
                                 futhark_mc_task_73921->free_mem_67482, .size =
                                 0, .references =NULL};
    struct memblock mem_67485 = {.desc ="mem_67485", .mem =
                                 futhark_mc_task_73921->free_mem_67485, .size =
                                 0, .references =NULL};
    int64_t iter_69230;
    struct futhark_mc_segmap_parloop_struct_73926
    futhark_mc_segmap_parloop_struct_73926;
    
    futhark_mc_segmap_parloop_struct_73926.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73926.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73926.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73926.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73926.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73926.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73926.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73926.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73926.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73926.free_last_res_63900 = last_res_63900;
    futhark_mc_segmap_parloop_struct_73926.free_min_arg_63912 = min_arg_63912;
    futhark_mc_segmap_parloop_struct_73926.free_min_arg_63913 = min_arg_63913;
    futhark_mc_segmap_parloop_struct_73926.free_max_res_63917 = max_res_63917;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67470 = mem_67470.mem;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67473 = mem_67473.mem;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67476 = mem_67476.mem;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67479 = mem_67479.mem;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67482 = mem_67482.mem;
    futhark_mc_segmap_parloop_struct_73926.free_mem_67485 = mem_67485.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73927_task;
    
    futhark_mc_segmap_parloop_73927_task.name =
        "futhark_mc_segmap_parloop_73927";
    futhark_mc_segmap_parloop_73927_task.fn = futhark_mc_segmap_parloop_73927;
    futhark_mc_segmap_parloop_73927_task.args =
        &futhark_mc_segmap_parloop_struct_73926;
    futhark_mc_segmap_parloop_73927_task.iterations = iterations;
    futhark_mc_segmap_parloop_73927_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73927_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73927_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73927_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73927_task);
    
    if (futhark_mc_segmap_parloop_73927_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73927_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73927_total_end -
                 futhark_mc_segmap_parloop_73927_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73927_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73927_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73927_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73925_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73925_end -
                 futhark_mc_segmap_nested_task_73925_start;
        
        ctx->futhark_mc_segmap_nested_task_73925_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73925_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73925_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73894(void *args, int64_t start,
                                           int64_t end, int flat_tid_63740,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73893
    *futhark_mc_segmap_parloop_struct_73893 =
    (struct futhark_mc_segmap_parloop_struct_73893 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73893->ctx;
    uint64_t futhark_mc_segmap_parloop_73894_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73894_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_73893->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73893->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73893->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73893->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73893->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73893->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73893->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73893->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73893->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_73893->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73893->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67465 =
            futhark_mc_segmap_parloop_struct_73893->free_bytes_67465;
    int64_t bytes_67468 =
            futhark_mc_segmap_parloop_struct_73893->free_bytes_67468;
    int64_t bytes_67480 =
            futhark_mc_segmap_parloop_struct_73893->free_bytes_67480;
    int64_t bytes_67483 =
            futhark_mc_segmap_parloop_struct_73893->free_bytes_67483;
    struct memblock mem_67594 = {.desc ="mem_67594", .mem =
                                 futhark_mc_segmap_parloop_struct_73893->free_mem_67594,
                                 .size =0, .references =NULL};
    size_t mem_67467_cached_sizze_73895 = 0;
    char *mem_67467 = NULL;
    size_t mem_67470_cached_sizze_73896 = 0;
    char *mem_67470 = NULL;
    size_t mem_67473_cached_sizze_73897 = 0;
    char *mem_67473 = NULL;
    size_t mem_67476_cached_sizze_73898 = 0;
    char *mem_67476 = NULL;
    size_t mem_67479_cached_sizze_73899 = 0;
    char *mem_67479 = NULL;
    size_t mem_67482_cached_sizze_73900 = 0;
    char *mem_67482 = NULL;
    size_t mem_67485_cached_sizze_73901 = 0;
    char *mem_67485 = NULL;
    int64_t iterations = end - start;
    int64_t iter_68810 = start;
    
    if (mem_67467_cached_sizze_73895 < (size_t) bytes_67465) {
        mem_67467 = realloc(mem_67467, bytes_67465);
        mem_67467_cached_sizze_73895 = bytes_67465;
    }
    if (mem_67470_cached_sizze_73896 < (size_t) bytes_67468) {
        mem_67470 = realloc(mem_67470, bytes_67468);
        mem_67470_cached_sizze_73896 = bytes_67468;
    }
    if (mem_67473_cached_sizze_73897 < (size_t) bytes_67465) {
        mem_67473 = realloc(mem_67473, bytes_67465);
        mem_67473_cached_sizze_73897 = bytes_67465;
    }
    if (mem_67476_cached_sizze_73898 < (size_t) bytes_67468) {
        mem_67476 = realloc(mem_67476, bytes_67468);
        mem_67476_cached_sizze_73898 = bytes_67468;
    }
    if (mem_67479_cached_sizze_73899 < (size_t) bytes_67465) {
        mem_67479 = realloc(mem_67479, bytes_67465);
        mem_67479_cached_sizze_73899 = bytes_67465;
    }
    if (mem_67482_cached_sizze_73900 < (size_t) bytes_67480) {
        mem_67482 = realloc(mem_67482, bytes_67480);
        mem_67482_cached_sizze_73900 = bytes_67480;
    }
    if (mem_67485_cached_sizze_73901 < (size_t) bytes_67483) {
        mem_67485 = realloc(mem_67485, bytes_67483);
        mem_67485_cached_sizze_73901 = bytes_67483;
    }
    for (; iter_68810 < end; iter_68810++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69089 = m_62363;
        int64_t gtid_63741 = iter_68810;
        int64_t remnant_69090 = iter_68810 - gtid_63741;
        int64_t flat_tid_63742 = (int64_t) 0;
        int32_t num_tasks_69091;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_73902 futhark_mc_task_73902;
        
        futhark_mc_task_73902.ctx = ctx;
        futhark_mc_task_73902.free_n_62364 = n_62364;
        futhark_mc_task_73902.free_gtid_63741 = gtid_63741;
        futhark_mc_task_73902.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_73902.free_mem_67467 = mem_67467;
        
        struct scheduler_segop futhark_mc_task_73902_task;
        
        futhark_mc_task_73902_task.args = &futhark_mc_task_73902;
        futhark_mc_task_73902_task.top_level_fn = futhark_mc_segscan_task_73903;
        futhark_mc_task_73902_task.name = "futhark_mc_segscan_task_73903";
        futhark_mc_task_73902_task.iterations = n_62364;
        futhark_mc_task_73902_task.task_time =
            &ctx->futhark_mc_segscan_task_73903_total_time;
        futhark_mc_task_73902_task.task_iter =
            &ctx->futhark_mc_segscan_task_73903_total_iter;
        futhark_mc_task_73902_task.sched = STATIC;
        futhark_mc_task_73902_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_73903_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73902_task);
        
        if (futhark_mc_segscan_task_73903_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_63900 = ((int64_t *) mem_67467)[i_62378];
        
        for (int64_t i_69105 = 0; i_69105 < n_62364; i_69105++) {
            ((float *) mem_67470)[i_69105] = 0.0F;
        }
        for (int64_t i_69106 = 0; i_69106 < n_62364; i_69106++) {
            ((int64_t *) mem_67473)[i_69106] = (int64_t) -1;
        }
        
        int64_t flat_tid_63744 = (int64_t) 0;
        int32_t num_tasks_69107;
        struct futhark_mc_task_73909 futhark_mc_task_73909;
        
        futhark_mc_task_73909.ctx = ctx;
        futhark_mc_task_73909.free_n_62364 = n_62364;
        futhark_mc_task_73909.free_gtid_63741 = gtid_63741;
        futhark_mc_task_73909.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_73909.free_mem_67467 = mem_67467;
        futhark_mc_task_73909.free_mem_67470 = mem_67470;
        futhark_mc_task_73909.free_mem_67473 = mem_67473;
        
        struct scheduler_segop futhark_mc_task_73909_task;
        
        futhark_mc_task_73909_task.args = &futhark_mc_task_73909;
        futhark_mc_task_73909_task.top_level_fn = futhark_mc_segmap_task_73910;
        futhark_mc_task_73909_task.name = "futhark_mc_segmap_task_73910";
        futhark_mc_task_73909_task.iterations = n_62364;
        futhark_mc_task_73909_task.task_time =
            &ctx->futhark_mc_segmap_task_73910_total_time;
        futhark_mc_task_73909_task.task_iter =
            &ctx->futhark_mc_segmap_task_73910_total_iter;
        futhark_mc_task_73909_task.sched = STATIC;
        futhark_mc_task_73909_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73910_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73909_task);
        
        if (futhark_mc_segmap_task_73910_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_63912 = sub64(last_res_63900, (int64_t) 1);
        int64_t min_arg_63913 = sub64(last_res_63900, min_res_62384);
        float i64_res_63914 = sitofp_i64_f32(last_res_63900);
        float x_63915 = i64_res_62390 - i64_res_63914;
        float max_arg_63916 = x_63915 / 2.0F;
        float max_res_63917 = fmax32(0.0F, max_arg_63916);
        int64_t flat_tid_63746 = (int64_t) 0;
        int32_t num_tasks_69113;
        struct futhark_mc_task_73913 futhark_mc_task_73913;
        
        futhark_mc_task_73913.ctx = ctx;
        futhark_mc_task_73913.free_n_62364 = n_62364;
        futhark_mc_task_73913.free_mem_67473 = mem_67473;
        futhark_mc_task_73913.free_mem_67476 = mem_67476;
        futhark_mc_task_73913.free_mem_67479 = mem_67479;
        
        struct scheduler_segop futhark_mc_task_73913_task;
        
        futhark_mc_task_73913_task.args = &futhark_mc_task_73913;
        futhark_mc_task_73913_task.top_level_fn = futhark_mc_segmap_task_73914;
        futhark_mc_task_73913_task.name = "futhark_mc_segmap_task_73914";
        futhark_mc_task_73913_task.iterations = n_62364;
        futhark_mc_task_73913_task.task_time =
            &ctx->futhark_mc_segmap_task_73914_total_time;
        futhark_mc_task_73913_task.task_iter =
            &ctx->futhark_mc_segmap_task_73914_total_iter;
        futhark_mc_task_73913_task.sched = STATIC;
        futhark_mc_task_73913_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73914_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73913_task);
        
        if (futhark_mc_segmap_task_73914_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_63748 = (int64_t) 0;
        int32_t num_tasks_69117;
        struct futhark_mc_task_73917 futhark_mc_task_73917;
        
        futhark_mc_task_73917.ctx = ctx;
        futhark_mc_task_73917.free_q_62366 = q_62366;
        futhark_mc_task_73917.free_last_res_63900 = last_res_63900;
        futhark_mc_task_73917.free_mem_67482 = mem_67482;
        
        struct scheduler_segop futhark_mc_task_73917_task;
        
        futhark_mc_task_73917_task.args = &futhark_mc_task_73917;
        futhark_mc_task_73917_task.top_level_fn = futhark_mc_segmap_task_73918;
        futhark_mc_task_73917_task.name = "futhark_mc_segmap_task_73918";
        futhark_mc_task_73917_task.iterations = q_62366;
        futhark_mc_task_73917_task.task_time =
            &ctx->futhark_mc_segmap_task_73918_total_time;
        futhark_mc_task_73917_task.task_iter =
            &ctx->futhark_mc_segmap_task_73918_total_iter;
        futhark_mc_task_73917_task.sched = STATIC;
        futhark_mc_task_73917_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73918_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73917_task);
        
        if (futhark_mc_segmap_task_73918_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_63750 = (int64_t) 0;
        int32_t num_tasks_69121;
        int64_t flat_tid_63752 = (int64_t) 0;
        struct futhark_mc_task_73921 futhark_mc_task_73921;
        
        futhark_mc_task_73921.ctx = ctx;
        futhark_mc_task_73921.free_n_62364 = n_62364;
        futhark_mc_task_73921.free_q_62366 = q_62366;
        futhark_mc_task_73921.free_jump_62368 = jump_62368;
        futhark_mc_task_73921.free_n_m_62372 = n_m_62372;
        futhark_mc_task_73921.free_i_62378 = i_62378;
        futhark_mc_task_73921.free_x_62379 = x_62379;
        futhark_mc_task_73921.free_min_res_62384 = min_res_62384;
        futhark_mc_task_73921.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_73921.free_last_res_63900 = last_res_63900;
        futhark_mc_task_73921.free_min_arg_63912 = min_arg_63912;
        futhark_mc_task_73921.free_min_arg_63913 = min_arg_63913;
        futhark_mc_task_73921.free_max_res_63917 = max_res_63917;
        futhark_mc_task_73921.free_mem_67470 = mem_67470;
        futhark_mc_task_73921.free_mem_67473 = mem_67473;
        futhark_mc_task_73921.free_mem_67476 = mem_67476;
        futhark_mc_task_73921.free_mem_67479 = mem_67479;
        futhark_mc_task_73921.free_mem_67482 = mem_67482;
        futhark_mc_task_73921.free_mem_67485 = mem_67485;
        
        struct scheduler_segop futhark_mc_task_73921_task;
        
        futhark_mc_task_73921_task.args = &futhark_mc_task_73921;
        futhark_mc_task_73921_task.top_level_fn = futhark_mc_segmap_task_73922;
        futhark_mc_task_73921_task.name = "futhark_mc_segmap_task_73922";
        futhark_mc_task_73921_task.iterations = n_m_62372;
        futhark_mc_task_73921_task.task_time =
            &ctx->futhark_mc_segmap_task_73922_total_time;
        futhark_mc_task_73921_task.task_iter =
            &ctx->futhark_mc_segmap_task_73922_total_iter;
        futhark_mc_task_73921_task.sched = DYNAMIC;
        futhark_mc_task_73921_task.nested_fn =
            futhark_mc_segmap_nested_task_73925;
        
        int futhark_mc_segmap_task_73922_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73921_task);
        
        if (futhark_mc_segmap_task_73922_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67594.mem + gtid_63741 * n_m_62372 * (int64_t) 4,
                mem_67485 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67467);
    free(mem_67470);
    free(mem_67473);
    free(mem_67476);
    free(mem_67479);
    free(mem_67482);
    free(mem_67485);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73894_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73894_end -
                 futhark_mc_segmap_parloop_73894_start;
        
        ctx->futhark_mc_segmap_parloop_73894_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73894_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73894_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73892(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63740 = tid;
    int num_tasks_68620 = info.nsubtasks;
    struct futhark_mc_task_73881 *futhark_mc_task_73881 =
                                 (struct futhark_mc_task_73881 *) args;
    struct futhark_context *ctx = futhark_mc_task_73881->ctx;
    uint64_t futhark_mc_segmap_nested_task_73892_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73892_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_73881->free_m_62363;
    int64_t n_62364 = futhark_mc_task_73881->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73881->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73881->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73881->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73881->free_i_62378;
    bool x_62379 = futhark_mc_task_73881->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73881->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73881->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_73881->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73881->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67465 = futhark_mc_task_73881->free_bytes_67465;
    int64_t bytes_67468 = futhark_mc_task_73881->free_bytes_67468;
    int64_t bytes_67480 = futhark_mc_task_73881->free_bytes_67480;
    int64_t bytes_67483 = futhark_mc_task_73881->free_bytes_67483;
    struct memblock mem_67594 = {.desc ="mem_67594", .mem =
                                 futhark_mc_task_73881->free_mem_67594, .size =
                                 0, .references =NULL};
    int64_t iter_68810;
    struct futhark_mc_segmap_parloop_struct_73893
    futhark_mc_segmap_parloop_struct_73893;
    
    futhark_mc_segmap_parloop_struct_73893.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73893.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_73893.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73893.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73893.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73893.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73893.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73893.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73893.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73893.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73893.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_73893.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73893.free_bytes_67465 = bytes_67465;
    futhark_mc_segmap_parloop_struct_73893.free_bytes_67468 = bytes_67468;
    futhark_mc_segmap_parloop_struct_73893.free_bytes_67480 = bytes_67480;
    futhark_mc_segmap_parloop_struct_73893.free_bytes_67483 = bytes_67483;
    futhark_mc_segmap_parloop_struct_73893.free_mem_67594 = mem_67594.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73894_task;
    
    futhark_mc_segmap_parloop_73894_task.name =
        "futhark_mc_segmap_parloop_73894";
    futhark_mc_segmap_parloop_73894_task.fn = futhark_mc_segmap_parloop_73894;
    futhark_mc_segmap_parloop_73894_task.args =
        &futhark_mc_segmap_parloop_struct_73893;
    futhark_mc_segmap_parloop_73894_task.iterations = iterations;
    futhark_mc_segmap_parloop_73894_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73894_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73894_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73894_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73894_task);
    
    if (futhark_mc_segmap_parloop_73894_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73894_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73894_total_end -
                 futhark_mc_segmap_parloop_73894_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73894_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73894_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73894_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73892_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73892_end -
                 futhark_mc_segmap_nested_task_73892_start;
        
        ctx->futhark_mc_segmap_nested_task_73892_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73892_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73892_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73938 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67595;
    int64_t free_bytes_67598;
    int64_t free_bytes_67610;
    int64_t free_bytes_67613;
    char *free_mem_67742;
    char *free_mem_67746;
};
struct futhark_mc_segmap_parloop_struct_73940 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67595;
    int64_t free_bytes_67598;
    int64_t free_bytes_67610;
    int64_t free_bytes_67613;
    char *free_mem_67742;
    char *free_mem_67746;
};
static int futhark_mc_segmap_parloop_73941(void *args, int64_t start,
                                           int64_t end, int flat_tid_64194,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73940
    *futhark_mc_segmap_parloop_struct_73940 =
    (struct futhark_mc_segmap_parloop_struct_73940 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73940->ctx;
    uint64_t futhark_mc_segmap_parloop_73941_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73941_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_73940->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73940->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73940->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73940->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73940->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73940->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73940->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73940->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73940->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_73940->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73940->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67595 =
            futhark_mc_segmap_parloop_struct_73940->free_bytes_67595;
    int64_t bytes_67598 =
            futhark_mc_segmap_parloop_struct_73940->free_bytes_67598;
    int64_t bytes_67610 =
            futhark_mc_segmap_parloop_struct_73940->free_bytes_67610;
    int64_t bytes_67613 =
            futhark_mc_segmap_parloop_struct_73940->free_bytes_67613;
    struct memblock mem_67742 = {.desc ="mem_67742", .mem =
                                 futhark_mc_segmap_parloop_struct_73940->free_mem_67742,
                                 .size =0, .references =NULL};
    struct memblock mem_67746 = {.desc ="mem_67746", .mem =
                                 futhark_mc_segmap_parloop_struct_73940->free_mem_67746,
                                 .size =0, .references =NULL};
    size_t mem_67621_cached_sizze_73942 = 0;
    char *mem_67621 = NULL;
    size_t mem_67636_cached_sizze_73943 = 0;
    char *mem_67636 = NULL;
    size_t mem_67639_cached_sizze_73944 = 0;
    char *mem_67639 = NULL;
    size_t mem_67666_cached_sizze_73945 = 0;
    char *mem_67666 = NULL;
    size_t mem_67669_cached_sizze_73946 = 0;
    char *mem_67669 = NULL;
    size_t mem_67696_cached_sizze_73947 = 0;
    char *mem_67696 = NULL;
    size_t mem_67711_cached_sizze_73948 = 0;
    char *mem_67711 = NULL;
    size_t mem_67714_cached_sizze_73949 = 0;
    char *mem_67714 = NULL;
    int64_t iterations = end - start;
    int64_t iter_69355 = start;
    
    if (mem_67621_cached_sizze_73942 < (size_t) bytes_67595) {
        mem_67621 = realloc(mem_67621, bytes_67595);
        mem_67621_cached_sizze_73942 = bytes_67595;
    }
    if (mem_67636_cached_sizze_73943 < (size_t) bytes_67598) {
        mem_67636 = realloc(mem_67636, bytes_67598);
        mem_67636_cached_sizze_73943 = bytes_67598;
    }
    if (mem_67639_cached_sizze_73944 < (size_t) bytes_67595) {
        mem_67639 = realloc(mem_67639, bytes_67595);
        mem_67639_cached_sizze_73944 = bytes_67595;
    }
    if (mem_67666_cached_sizze_73945 < (size_t) bytes_67598) {
        mem_67666 = realloc(mem_67666, bytes_67598);
        mem_67666_cached_sizze_73945 = bytes_67598;
    }
    if (mem_67669_cached_sizze_73946 < (size_t) bytes_67595) {
        mem_67669 = realloc(mem_67669, bytes_67595);
        mem_67669_cached_sizze_73946 = bytes_67595;
    }
    if (mem_67696_cached_sizze_73947 < (size_t) bytes_67610) {
        mem_67696 = realloc(mem_67696, bytes_67610);
        mem_67696_cached_sizze_73947 = bytes_67610;
    }
    if (mem_67711_cached_sizze_73948 < (size_t) bytes_67613) {
        mem_67711 = realloc(mem_67711, bytes_67613);
        mem_67711_cached_sizze_73948 = bytes_67613;
    }
    if (mem_67714_cached_sizze_73949 < (size_t) bytes_67613) {
        mem_67714 = realloc(mem_67714, bytes_67613);
        mem_67714_cached_sizze_73949 = bytes_67613;
    }
    for (; iter_69355 < end; iter_69355++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69550 = m_62363;
        int64_t gtid_64195 = iter_69355;
        int64_t remnant_69551 = iter_69355 - gtid_64195;
        int64_t discard_67097;
        int64_t scanacc_69357 = (int64_t) 0;
        
        for (int64_t i_69356 = 0; i_69356 < n_62364; i_69356++) {
            float x_69359 = ((float *) Y_mem_67460.mem)[gtid_64195 * n_62364 +
                                                        i_69356];
            bool isnan_res_69360;
            
            isnan_res_69360 = futrts_isnan32(x_69359);
            
            bool defunc_0_p_res_69361 = !isnan_res_69360;
            int64_t defunc_0_f_res_69362 = btoi_bool_i64(defunc_0_p_res_69361);
            int64_t defunc_1_op_res_69363 = add64(defunc_0_f_res_69362,
                                                  scanacc_69357);
            
            ((int64_t *) mem_67621)[i_69356] = defunc_1_op_res_69363;
            
            int64_t scanacc_tmp_69552 = defunc_1_op_res_69363;
            
            scanacc_69357 = scanacc_tmp_69552;
        }
        discard_67097 = scanacc_69357;
        
        int64_t last_res_62596 = ((int64_t *) mem_67621)[i_62378];
        
        for (int64_t i_69554 = 0; i_69554 < n_62364; i_69554++) {
            ((float *) mem_67636)[i_69554] = 0.0F;
        }
        for (int64_t i_69555 = 0; i_69555 < n_62364; i_69555++) {
            ((int64_t *) mem_67639)[i_69555] = (int64_t) -1;
        }
        for (int64_t write_iter_69365 = 0; write_iter_69365 < n_62364;
             write_iter_69365++) {
            float write_iv_69368 = ((float *) Y_mem_67460.mem)[gtid_64195 *
                                                               n_62364 +
                                                               write_iter_69365];
            bool isnan_res_69369;
            
            isnan_res_69369 = futrts_isnan32(write_iv_69368);
            
            bool defunc_0_p_res_69370 = !isnan_res_69369;
            int64_t defunc_1_f_res_69371;
            
            if (defunc_0_p_res_69370) {
                int64_t write_iv_69372 =
                        ((int64_t *) mem_67621)[write_iter_69365];
                int64_t defunc_1_f_res_t_res_69373 = sub64(write_iv_69372,
                                                           (int64_t) 1);
                
                defunc_1_f_res_69371 = defunc_1_f_res_t_res_69373;
            } else {
                defunc_1_f_res_69371 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_69371) &&
                slt64(defunc_1_f_res_69371, n_62364)) {
                ((int64_t *) mem_67639)[defunc_1_f_res_69371] =
                    write_iter_69365;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_69371) &&
                slt64(defunc_1_f_res_69371, n_62364)) {
                memmove(mem_67636 + defunc_1_f_res_69371 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_64195 * n_62364 +
                                           write_iter_69365) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62611 = sub64(last_res_62596, (int64_t) 1);
        int64_t min_arg_62612 = sub64(last_res_62596, min_res_62384);
        float i64_res_62613 = sitofp_i64_f32(last_res_62596);
        float x_62614 = i64_res_62390 - i64_res_62613;
        float max_arg_62615 = x_62614 / 2.0F;
        float max_res_62616 = fmax32(0.0F, max_arg_62615);
        
        for (int64_t i_69377 = 0; i_69377 < n_62364; i_69377++) {
            int64_t x_69380 = ((int64_t *) mem_67639)[i_69377];
            int64_t defunc_0_f_res_69381 = add64((int64_t) 1, x_69380);
            float defunc_0_f_res_69382 = sitofp_i64_f32(x_69380);
            
            ((float *) mem_67666)[i_69377] = defunc_0_f_res_69382;
            ((int64_t *) mem_67669)[i_69377] = defunc_0_f_res_69381;
        }
        for (int64_t i_69385 = 0; i_69385 < q_62366; i_69385++) {
            bool cond_69387 = sle64(last_res_62596, i_69385);
            float defunc_0_f_res_69388;
            
            if (cond_69387) {
                defunc_0_f_res_69388 = 0.0F;
            } else {
                defunc_0_f_res_69388 = 1.0F;
            }
            ((float *) mem_67696)[i_69385] = defunc_0_f_res_69388;
        }
        for (int64_t i_69390 = 0; i_69390 < n_m_62372; i_69390++) {
            int64_t min_arg_69393 = mul64(jump_62368, i_69390);
            int64_t min_res_69394 = smin64(i_62378, min_arg_69393);
            int64_t defunc_0_g_res_69395 = add64((int64_t) 1, min_res_69394);
            bool init_idx_69396;
            int64_t init_idx_69397;
            int64_t init_idx_69398;
            bool loop_while_69399;
            int64_t low_69400;
            int64_t high_69401;
            
            loop_while_69399 = x_62379;
            low_69400 = (int64_t) 0;
            high_69401 = i_62378;
            while (loop_while_69399) {
                int64_t x_69402 = add64(low_69400, high_69401);
                int64_t mid_69403 = sdiv64(x_69402, (int64_t) 2);
                bool x_69404 = sle64((int64_t) 0, mid_69403);
                bool y_69405 = slt64(mid_69403, n_62364);
                bool bounds_check_69406 = x_69404 && y_69405;
                bool index_certs_69407;
                
                if (!bounds_check_69406) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_69403,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_69408 = ((int64_t *) mem_67669)[mid_69403];
                bool cond_69409 = slt64(mid_id_69408, (int64_t) 0);
                int64_t mid_idx_69410;
                
                if (cond_69409) {
                    mid_idx_69410 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_69410 = mid_id_69408;
                }
                
                bool cond_69411 = sle64(defunc_0_g_res_69395, mid_idx_69410);
                int64_t loopres_69412;
                int64_t loopres_69413;
                
                if (cond_69411) {
                    int64_t loopres_t_res_69414 = sub64(mid_69403, (int64_t) 1);
                    
                    loopres_69412 = low_69400;
                    loopres_69413 = loopres_t_res_69414;
                } else {
                    int64_t loopres_f_res_69415 = add64((int64_t) 1, mid_69403);
                    
                    loopres_69412 = loopres_f_res_69415;
                    loopres_69413 = high_69401;
                }
                
                bool loop_cond_69416 = sle64(loopres_69412, loopres_69413);
                bool loop_while_tmp_69563 = loop_cond_69416;
                int64_t low_tmp_69564 = loopres_69412;
                int64_t high_tmp_69565 = loopres_69413;
                
                loop_while_69399 = loop_while_tmp_69563;
                low_69400 = low_tmp_69564;
                high_69401 = high_tmp_69565;
            }
            init_idx_69396 = loop_while_69399;
            init_idx_69397 = low_69400;
            init_idx_69398 = high_69401;
            
            bool idx_69417;
            int64_t idx_69418;
            int64_t idx_69419;
            int64_t idx_69420;
            bool loop_while_69421;
            int64_t l_idx_69422;
            int64_t r_idx_69423;
            int64_t span_69424;
            
            loop_while_69421 = loop_cond_62389;
            l_idx_69422 = init_idx_69397;
            r_idx_69423 = init_idx_69397;
            span_69424 = (int64_t) 1;
            while (loop_while_69421) {
                int64_t max_arg_69425 = sub64(l_idx_69422, (int64_t) 1);
                int64_t max_res_69426 = smax64((int64_t) 0, max_arg_69425);
                int64_t min_arg_69427 = add64((int64_t) 1, r_idx_69423);
                int64_t min_res_69428 = smin64(min_arg_62611, min_arg_69427);
                bool x_69429 = sle64((int64_t) 0, max_res_69426);
                bool y_69430 = slt64(max_res_69426, n_62364);
                bool bounds_check_69431 = x_69429 && y_69430;
                bool index_certs_69432;
                
                if (!bounds_check_69431) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_69426,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_69433 = ((int64_t *) mem_67669)[max_res_69426];
                int64_t abs_arg_69434 = sub64(x_69433, defunc_0_g_res_69395);
                int64_t abs_res_69435 = abs64(abs_arg_69434);
                bool x_69436 = sle64((int64_t) 0, min_res_69428);
                bool y_69437 = slt64(min_res_69428, n_62364);
                bool bounds_check_69438 = x_69436 && y_69437;
                bool index_certs_69439;
                
                if (!bounds_check_69438) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_69428,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_69440 = ((int64_t *) mem_67669)[min_res_69428];
                int64_t abs_arg_69441 = sub64(x_69440, defunc_0_g_res_69395);
                int64_t abs_res_69442 = abs64(abs_arg_69441);
                bool cond_69443 = max_res_69426 == l_idx_69422;
                int64_t loopres_69444;
                int64_t loopres_69445;
                int64_t loopres_69446;
                
                if (cond_69443) {
                    loopres_69444 = l_idx_69422;
                    loopres_69445 = r_idx_69423;
                    loopres_69446 = min_res_62384;
                } else {
                    bool cond_69447 = slt64(abs_res_69435, abs_res_69442);
                    bool cond_f_res_69448 = min_res_69428 == r_idx_69423;
                    bool x_69449 = !cond_69447;
                    bool y_69450 = cond_f_res_69448 && x_69449;
                    bool cond_69451 = cond_69447 || y_69450;
                    int64_t loopres_f_res_69452;
                    
                    if (cond_69451) {
                        loopres_f_res_69452 = max_res_69426;
                    } else {
                        loopres_f_res_69452 = l_idx_69422;
                    }
                    
                    int64_t loopres_f_res_69453;
                    
                    if (cond_69451) {
                        loopres_f_res_69453 = r_idx_69423;
                    } else {
                        loopres_f_res_69453 = min_res_69428;
                    }
                    
                    int64_t loopres_f_res_69454;
                    
                    if (cond_69451) {
                        int64_t loopres_f_res_t_res_69455 = add64((int64_t) 1,
                                                                  span_69424);
                        
                        loopres_f_res_69454 = loopres_f_res_t_res_69455;
                    } else {
                        int64_t loopres_f_res_f_res_69456 = add64((int64_t) 1,
                                                                  span_69424);
                        
                        loopres_f_res_69454 = loopres_f_res_f_res_69456;
                    }
                    loopres_69444 = loopres_f_res_69452;
                    loopres_69445 = loopres_f_res_69453;
                    loopres_69446 = loopres_f_res_69454;
                }
                
                bool loop_cond_69457 = slt64(loopres_69446, min_res_62384);
                bool loop_while_tmp_69566 = loop_cond_69457;
                int64_t l_idx_tmp_69567 = loopres_69444;
                int64_t r_idx_tmp_69568 = loopres_69445;
                int64_t span_tmp_69569 = loopres_69446;
                
                loop_while_69421 = loop_while_tmp_69566;
                l_idx_69422 = l_idx_tmp_69567;
                r_idx_69423 = r_idx_tmp_69568;
                span_69424 = span_tmp_69569;
            }
            idx_69417 = loop_while_69421;
            idx_69418 = l_idx_69422;
            idx_69419 = r_idx_69423;
            idx_69420 = span_69424;
            
            int64_t min_res_69458 = smin64(min_arg_62612, idx_69418);
            int64_t x_69459 = add64(min_res_62384, min_res_69458);
            int64_t r_69460 = sub64(x_69459, (int64_t) 1);
            bool x_69461 = sle64((int64_t) 0, r_69460);
            bool y_69462 = slt64(r_69460, n_62364);
            bool bounds_check_69463 = x_69461 && y_69462;
            bool index_certs_69464;
            
            if (!bounds_check_69463) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_69460,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69465 = ((int64_t *) mem_67639)[r_69460];
            int64_t abs_arg_69466 = sub64(x_69465, min_res_69394);
            int64_t abs_res_69467 = abs64(abs_arg_69466);
            bool x_69468 = sle64((int64_t) 0, min_res_69458);
            bool y_69469 = slt64(min_res_69458, n_62364);
            bool bounds_check_69470 = x_69468 && y_69469;
            bool index_certs_69471;
            
            if (!bounds_check_69470) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69458,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69472 = ((int64_t *) mem_67639)[min_res_69458];
            int64_t abs_arg_69473 = sub64(x_69472, min_res_69394);
            int64_t abs_res_69474 = abs64(abs_arg_69473);
            int64_t max_res_69475 = smax64(abs_res_69467, abs_res_69474);
            float defunc_0_f_res_69476 = sitofp_i64_f32(max_res_69475);
            float defunc_1_f_res_69477 = max_res_62616 + defunc_0_f_res_69476;
            float defunc_0_f_res_69478 = sitofp_i64_f32(min_res_69394);
            float defunc_2_reduce_res_69479;
            float defunc_2_reduce_res_69480;
            float defunc_2_reduce_res_69481;
            float redout_69483;
            float redout_69484;
            float redout_69485;
            
            redout_69483 = 0.0F;
            redout_69484 = 0.0F;
            redout_69485 = 0.0F;
            for (int64_t i_69482 = 0; i_69482 < q_62366; i_69482++) {
                float x_69486 = ((float *) mem_67696)[i_69482];
                bool cond_69487 = sle64(last_res_62596, i_69482);
                float defunc_0_f_res_69488;
                
                if (cond_69487) {
                    defunc_0_f_res_69488 = 0.0F;
                } else {
                    int64_t i_69489 = add64(min_res_69458, i_69482);
                    float x_69490 = ((float *) mem_67666)[i_69489];
                    float defunc_0_f_res_f_res_69491 = 1.0F + x_69490;
                    
                    defunc_0_f_res_69488 = defunc_0_f_res_f_res_69491;
                }
                
                float x_j_69492 = defunc_0_f_res_69488 - defunc_0_f_res_69478;
                float abs_res_69493 = (float) fabs(x_j_69492);
                float tmp1_69494 = abs_res_69493 / defunc_1_f_res_69477;
                float x_69495 = tmp1_69494 * tmp1_69494;
                float y_69496 = tmp1_69494 * x_69495;
                float tmp2_69497 = 1.0F - y_69496;
                float x_69498 = tmp2_69497 * tmp2_69497;
                float tmp3_69499 = tmp2_69497 * x_69498;
                float w_j_69500 = x_69486 * tmp3_69499;
                float xw_j_69501 = x_j_69492 * w_j_69500;
                float x2w_j_69502 = x_j_69492 * xw_j_69501;
                float defunc_1_op_res_69503 = w_j_69500 + redout_69483;
                float defunc_1_op_res_69504 = xw_j_69501 + redout_69484;
                float defunc_1_op_res_69505 = x2w_j_69502 + redout_69485;
                float redout_tmp_69570 = defunc_1_op_res_69503;
                float redout_tmp_69571 = defunc_1_op_res_69504;
                float redout_tmp_69572 = defunc_1_op_res_69505;
                
                redout_69483 = redout_tmp_69570;
                redout_69484 = redout_tmp_69571;
                redout_69485 = redout_tmp_69572;
            }
            defunc_2_reduce_res_69479 = redout_69483;
            defunc_2_reduce_res_69480 = redout_69484;
            defunc_2_reduce_res_69481 = redout_69485;
            
            float x_69506 = defunc_2_reduce_res_69479 *
                  defunc_2_reduce_res_69481;
            float y_69507 = defunc_2_reduce_res_69480 *
                  defunc_2_reduce_res_69480;
            float y_69508 = x_69506 - y_69507;
            float det1_69509 = 1.0F / y_69508;
            float a11_69510 = defunc_2_reduce_res_69481 * det1_69509;
            float negate_arg_69511 = defunc_2_reduce_res_69480 * det1_69509;
            float b11_69512 = 0.0F - negate_arg_69511;
            float c11_69513 = defunc_2_reduce_res_69479 * det1_69509;
            float defunc_2_reduce_res_69514;
            float defunc_2_reduce_res_69515;
            float redout_69517;
            float redout_69518;
            
            redout_69517 = 0.0F;
            redout_69518 = 0.0F;
            for (int64_t i_69516 = 0; i_69516 < q_62366; i_69516++) {
                float x_69519 = ((float *) mem_67696)[i_69516];
                bool cond_69520 = sle64(last_res_62596, i_69516);
                float defunc_0_f_res_69521;
                
                if (cond_69520) {
                    defunc_0_f_res_69521 = 0.0F;
                } else {
                    int64_t i_69522 = add64(min_res_69458, i_69516);
                    float x_69523 = ((float *) mem_67666)[i_69522];
                    float defunc_0_f_res_f_res_69524 = 1.0F + x_69523;
                    
                    defunc_0_f_res_69521 = defunc_0_f_res_f_res_69524;
                }
                
                float x_j_69525 = defunc_0_f_res_69521 - defunc_0_f_res_69478;
                float abs_res_69526 = (float) fabs(x_j_69525);
                float tmp1_69527 = abs_res_69526 / defunc_1_f_res_69477;
                float x_69528 = tmp1_69527 * tmp1_69527;
                float y_69529 = tmp1_69527 * x_69528;
                float tmp2_69530 = 1.0F - y_69529;
                float x_69531 = tmp2_69530 * tmp2_69530;
                float tmp3_69532 = tmp2_69530 * x_69531;
                float tmp4_69533 = x_69519 * tmp3_69532;
                float defunc_1_f_res_69534 = x_j_69525 * tmp4_69533;
                float defunc_0_f_res_69535;
                
                if (cond_69520) {
                    defunc_0_f_res_69535 = 0.0F;
                } else {
                    int64_t i_69536 = add64(min_res_69458, i_69516);
                    float x_69537 = ((float *) mem_67636)[i_69536];
                    
                    defunc_0_f_res_69535 = x_69537;
                }
                
                float x_69538 = a11_69510 * tmp4_69533;
                float y_69539 = b11_69512 * defunc_1_f_res_69534;
                float x_69540 = x_69538 + y_69539;
                float defunc_9_fit_fun_res_69541 = defunc_0_f_res_69535 *
                      x_69540;
                float x_69542 = b11_69512 * tmp4_69533;
                float y_69543 = c11_69513 * defunc_1_f_res_69534;
                float x_69544 = x_69542 + y_69543;
                float defunc_9_slope_fun_res_69545 = defunc_0_f_res_69535 *
                      x_69544;
                float defunc_1_op_res_69546 = defunc_9_fit_fun_res_69541 +
                      redout_69517;
                float defunc_1_op_res_69547 = defunc_9_slope_fun_res_69545 +
                      redout_69518;
                float redout_tmp_69573 = defunc_1_op_res_69546;
                float redout_tmp_69574 = defunc_1_op_res_69547;
                
                redout_69517 = redout_tmp_69573;
                redout_69518 = redout_tmp_69574;
            }
            defunc_2_reduce_res_69514 = redout_69517;
            defunc_2_reduce_res_69515 = redout_69518;
            ((float *) mem_67711)[i_69390] = defunc_2_reduce_res_69514;
            ((float *) mem_67714)[i_69390] = defunc_2_reduce_res_69515;
        }
        memmove(mem_67742.mem + gtid_64195 * n_m_62372 * (int64_t) 4,
                mem_67711 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_67746.mem + gtid_64195 * n_m_62372 * (int64_t) 4,
                mem_67714 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67621);
    free(mem_67636);
    free(mem_67639);
    free(mem_67666);
    free(mem_67669);
    free(mem_67696);
    free(mem_67711);
    free(mem_67714);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73941_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73941_end -
                 futhark_mc_segmap_parloop_73941_start;
        
        ctx->futhark_mc_segmap_parloop_73941_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73941_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73941_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73939(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64194 = tid;
    int num_tasks_69354 = info.nsubtasks;
    struct futhark_mc_task_73938 *futhark_mc_task_73938 =
                                 (struct futhark_mc_task_73938 *) args;
    struct futhark_context *ctx = futhark_mc_task_73938->ctx;
    uint64_t futhark_mc_segmap_task_73939_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73939_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_73938->free_m_62363;
    int64_t n_62364 = futhark_mc_task_73938->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73938->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73938->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73938->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73938->free_i_62378;
    bool x_62379 = futhark_mc_task_73938->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73938->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73938->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_73938->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73938->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67595 = futhark_mc_task_73938->free_bytes_67595;
    int64_t bytes_67598 = futhark_mc_task_73938->free_bytes_67598;
    int64_t bytes_67610 = futhark_mc_task_73938->free_bytes_67610;
    int64_t bytes_67613 = futhark_mc_task_73938->free_bytes_67613;
    struct memblock mem_67742 = {.desc ="mem_67742", .mem =
                                 futhark_mc_task_73938->free_mem_67742, .size =
                                 0, .references =NULL};
    struct memblock mem_67746 = {.desc ="mem_67746", .mem =
                                 futhark_mc_task_73938->free_mem_67746, .size =
                                 0, .references =NULL};
    int64_t iter_69355;
    struct futhark_mc_segmap_parloop_struct_73940
    futhark_mc_segmap_parloop_struct_73940;
    
    futhark_mc_segmap_parloop_struct_73940.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73940.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_73940.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73940.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73940.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73940.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73940.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73940.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73940.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73940.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73940.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_73940.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73940.free_bytes_67595 = bytes_67595;
    futhark_mc_segmap_parloop_struct_73940.free_bytes_67598 = bytes_67598;
    futhark_mc_segmap_parloop_struct_73940.free_bytes_67610 = bytes_67610;
    futhark_mc_segmap_parloop_struct_73940.free_bytes_67613 = bytes_67613;
    futhark_mc_segmap_parloop_struct_73940.free_mem_67742 = mem_67742.mem;
    futhark_mc_segmap_parloop_struct_73940.free_mem_67746 = mem_67746.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73941_task;
    
    futhark_mc_segmap_parloop_73941_task.name =
        "futhark_mc_segmap_parloop_73941";
    futhark_mc_segmap_parloop_73941_task.fn = futhark_mc_segmap_parloop_73941;
    futhark_mc_segmap_parloop_73941_task.args =
        &futhark_mc_segmap_parloop_struct_73940;
    futhark_mc_segmap_parloop_73941_task.iterations = iterations;
    futhark_mc_segmap_parloop_73941_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73941_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73941_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73941_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73941_task);
    
    if (futhark_mc_segmap_parloop_73941_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73941_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73941_total_end -
                 futhark_mc_segmap_parloop_73941_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73941_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73941_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73941_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73939_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73939_end -
                 futhark_mc_segmap_task_73939_start;
        
        ctx->futhark_mc_segmap_task_73939_runs[tid]++;
        ctx->futhark_mc_segmap_task_73939_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73939_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73951 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67595;
    int64_t free_bytes_67598;
    int64_t free_bytes_67610;
    int64_t free_bytes_67613;
    char *free_mem_67742;
    char *free_mem_67746;
};
struct futhark_mc_task_73961 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64197;
    char *free_Y_mem_67460;
    char *free_mem_67597;
};
struct futhark_mc_scan_stage_1_parloop_struct_73964 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64197;
    char *free_Y_mem_67460;
    char *free_mem_67597;
};
static int futhark_mc_scan_stage_1_parloop_73965(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64198, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_73964
    *futhark_mc_scan_stage_1_parloop_struct_73964 =
    (struct futhark_mc_scan_stage_1_parloop_struct_73964 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_73964->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_73965_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73965_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_73964->free_n_62364;
    int64_t gtid_64197 =
            futhark_mc_scan_stage_1_parloop_struct_73964->free_gtid_64197;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_73964->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67597 = {.desc ="mem_67597", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_73964->free_mem_67597,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69910 = start;
    int64_t x_69576;
    int64_t x_69577;
    
    x_69576 = (int64_t) 0;
    for (; iter_69910 < end; iter_69910++) {
        int64_t gtid_64199 = iter_69910;
        
        // stage 1 scan body
        {
            float x_69579 = ((float *) Y_mem_67460.mem)[gtid_64197 * n_62364 +
                                                        gtid_64199];
            bool isnan_res_69580;
            
            isnan_res_69580 = futrts_isnan32(x_69579);
            
            bool defunc_0_p_res_69581 = !isnan_res_69580;
            int64_t defunc_0_f_res_69582 = btoi_bool_i64(defunc_0_p_res_69581);
            
            // write mapped values results to memory
            { }
            x_69576 = x_69576;
            // Read next values
            {
                x_69577 = defunc_0_f_res_69582;
            }
            
            int64_t defunc_1_op_res_69578 = add64(x_69576, x_69577);
            
            ((int64_t *) mem_67597.mem)[gtid_64199] = defunc_1_op_res_69578;
            x_69576 = defunc_1_op_res_69578;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73965_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73965_end -
                 futhark_mc_scan_stage_1_parloop_73965_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_73965_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_73965_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_73965_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_73966 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64197;
    char *free_Y_mem_67460;
    char *free_mem_67597;
};
static int futhark_mc_scan_stage_3_parloop_73967(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64198, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_73966
    *futhark_mc_scan_stage_3_parloop_struct_73966 =
    (struct futhark_mc_scan_stage_3_parloop_struct_73966 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_73966->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_73967_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_73967_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_73966->free_n_62364;
    int64_t gtid_64197 =
            futhark_mc_scan_stage_3_parloop_struct_73966->free_gtid_64197;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_73966->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67597 = {.desc ="mem_67597", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_73966->free_mem_67597,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69922 = start;
    int64_t x_69919;
    int64_t x_69920;
    
    if (iter_69922 == (int64_t) 0) {
        x_69919 = (int64_t) 0;
    } else {
        x_69919 = ((int64_t *) mem_67597.mem)[iter_69922 - (int64_t) 1];
    }
    for (; iter_69922 < end; iter_69922++) {
        int64_t gtid_64199 = iter_69922;
        
        // stage 3 scan body
        {
            float x_69579 = ((float *) Y_mem_67460.mem)[gtid_64197 * n_62364 +
                                                        gtid_64199];
            bool isnan_res_69580;
            
            isnan_res_69580 = futrts_isnan32(x_69579);
            
            bool defunc_0_p_res_69581 = !isnan_res_69580;
            int64_t defunc_0_f_res_69582 = btoi_bool_i64(defunc_0_p_res_69581);
            
            x_69919 = x_69919;
            x_69920 = defunc_0_f_res_69582;
            
            int64_t defunc_1_op_res_69921 = add64(x_69919, x_69920);
            
            ((int64_t *) mem_67597.mem)[gtid_64199] = defunc_1_op_res_69921;
            x_69919 = defunc_1_op_res_69921;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_73967_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73967_end -
                 futhark_mc_scan_stage_3_parloop_73967_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_73967_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_73967_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_73967_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_73962(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64198 = tid;
    int num_tasks_69909 = info.nsubtasks;
    struct futhark_mc_task_73961 *futhark_mc_task_73961 =
                                 (struct futhark_mc_task_73961 *) args;
    struct futhark_context *ctx = futhark_mc_task_73961->ctx;
    uint64_t futhark_mc_segscan_task_73962_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_73962_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73961->free_n_62364;
    int64_t gtid_64197 = futhark_mc_task_73961->free_gtid_64197;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73961->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67597 = {.desc ="mem_67597", .mem =
                                 futhark_mc_task_73961->free_mem_67597, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_69916_cached_sizze_73963 = 0;
    char *scan_stage_2_accum_mem_69916 = NULL;
    int64_t iter_69910;
    struct futhark_mc_scan_stage_1_parloop_struct_73964
    futhark_mc_scan_stage_1_parloop_struct_73964;
    
    futhark_mc_scan_stage_1_parloop_struct_73964.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_73964.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_73964.free_gtid_64197 = gtid_64197;
    futhark_mc_scan_stage_1_parloop_struct_73964.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_73964.free_mem_67597 = mem_67597.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_73965_task;
    
    futhark_mc_scan_stage_1_parloop_73965_task.name =
        "futhark_mc_scan_stage_1_parloop_73965";
    futhark_mc_scan_stage_1_parloop_73965_task.fn =
        futhark_mc_scan_stage_1_parloop_73965;
    futhark_mc_scan_stage_1_parloop_73965_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_73964;
    futhark_mc_scan_stage_1_parloop_73965_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_73965_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_73965_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73965_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_73965_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_73965_task);
    
    if (futhark_mc_scan_stage_1_parloop_73965_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73965_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73965_total_end -
                 futhark_mc_scan_stage_1_parloop_73965_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73965_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73965_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73965_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_69909)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_69911;
        int64_t x_69912;
        int64_t offset_69914 = (int64_t) 0;
        int64_t offset_index_69915 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_69916_cached_sizze_73963 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_69916 = realloc(scan_stage_2_accum_mem_69916,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_69916_cached_sizze_73963 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_69916)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_69918 = 0; i_69918 < num_tasks_69909 - 1; i_69918++) {
            offset_69914 = squot64(n_62364, sext_i32_i64(num_tasks_69909));
            if (slt64(sext_i32_i64(i_69918), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_69909)))) {
                offset_69914 += (int64_t) 1;
            }
            offset_index_69915 += offset_69914;
            
            int64_t gtid_64199 = offset_index_69915;
            float x_69579 = ((float *) Y_mem_67460.mem)[gtid_64197 * n_62364 +
                                                        gtid_64199];
            bool isnan_res_69580;
            
            isnan_res_69580 = futrts_isnan32(x_69579);
            
            bool defunc_0_p_res_69581 = !isnan_res_69580;
            int64_t defunc_0_f_res_69582 = btoi_bool_i64(defunc_0_p_res_69581);
            
            // Read carry in
            {
                x_69911 =
                    ((int64_t *) scan_stage_2_accum_mem_69916)[(int64_t) 0];
            }
            // Read next values
            {
                x_69912 = ((int64_t *) mem_67597.mem)[offset_index_69915 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_69913 = add64(x_69911, x_69912);
            
            ((int64_t *) mem_67597.mem)[offset_index_69915 - (int64_t) 1] =
                defunc_1_op_res_69913;
            ((int64_t *) scan_stage_2_accum_mem_69916)[(int64_t) 0] =
                defunc_1_op_res_69913;
        }
        
        int64_t iter_69922 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_73966
        futhark_mc_scan_stage_3_parloop_struct_73966;
        
        futhark_mc_scan_stage_3_parloop_struct_73966.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_73966.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_73966.free_gtid_64197 =
            gtid_64197;
        futhark_mc_scan_stage_3_parloop_struct_73966.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_73966.free_mem_67597 =
            mem_67597.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_73967_task;
        
        futhark_mc_scan_stage_3_parloop_73967_task.name =
            "futhark_mc_scan_stage_3_parloop_73967";
        futhark_mc_scan_stage_3_parloop_73967_task.fn =
            futhark_mc_scan_stage_3_parloop_73967;
        futhark_mc_scan_stage_3_parloop_73967_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_73966;
        futhark_mc_scan_stage_3_parloop_73967_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_73967_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_73967_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_73967_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_73967_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_73967_task);
        
        if (futhark_mc_scan_stage_3_parloop_73967_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_73967_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73967_total_end -
                     futhark_mc_scan_stage_3_parloop_73967_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73967_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73967_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73967_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_69916);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_73962_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_73962_end -
                 futhark_mc_segscan_task_73962_start;
        
        ctx->futhark_mc_segscan_task_73962_runs[tid]++;
        ctx->futhark_mc_segscan_task_73962_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_73962_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73968 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64197;
    char *free_Y_mem_67460;
    char *free_mem_67597;
    char *free_mem_67600;
    char *free_mem_67603;
};
struct futhark_mc_segmap_parloop_struct_73970 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64197;
    char *free_Y_mem_67460;
    char *free_mem_67597;
    char *free_mem_67600;
    char *free_mem_67603;
};
static int futhark_mc_segmap_parloop_73971(void *args, int64_t start,
                                           int64_t end, int flat_tid_64200,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73970
    *futhark_mc_segmap_parloop_struct_73970 =
    (struct futhark_mc_segmap_parloop_struct_73970 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73970->ctx;
    uint64_t futhark_mc_segmap_parloop_73971_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73971_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73970->free_n_62364;
    int64_t gtid_64197 =
            futhark_mc_segmap_parloop_struct_73970->free_gtid_64197;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73970->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67597 = {.desc ="mem_67597", .mem =
                                 futhark_mc_segmap_parloop_struct_73970->free_mem_67597,
                                 .size =0, .references =NULL};
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_segmap_parloop_struct_73970->free_mem_67600,
                                 .size =0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_segmap_parloop_struct_73970->free_mem_67603,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69926 = start;
    
    for (; iter_69926 < end; iter_69926++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69929 = n_62364;
        int64_t gtid_64201 = iter_69926;
        int64_t remnant_69930 = iter_69926 - gtid_64201;
        float x_69583 = ((float *) Y_mem_67460.mem)[gtid_64197 * n_62364 +
                                                    gtid_64201];
        bool isnan_res_69584;
        
        isnan_res_69584 = futrts_isnan32(x_69583);
        
        bool defunc_0_p_res_69585 = !isnan_res_69584;
        int64_t defunc_1_f_res_69586;
        
        if (defunc_0_p_res_69585) {
            int64_t x_69927 = ((int64_t *) mem_67597.mem)[gtid_64201];
            int64_t defunc_1_f_res_t_res_69928 = sub64(x_69927, (int64_t) 1);
            
            defunc_1_f_res_69586 = defunc_1_f_res_t_res_69928;
        } else {
            defunc_1_f_res_69586 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_69586) &&
            slt64(defunc_1_f_res_69586, n_62364)) {
            ((int64_t *) mem_67603.mem)[defunc_1_f_res_69586] = gtid_64201;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_69586) &&
            slt64(defunc_1_f_res_69586, n_62364)) {
            ((float *) mem_67600.mem)[defunc_1_f_res_69586] = x_69583;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73971_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73971_end -
                 futhark_mc_segmap_parloop_73971_start;
        
        ctx->futhark_mc_segmap_parloop_73971_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73971_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73971_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73969(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64200 = tid;
    int num_tasks_69925 = info.nsubtasks;
    struct futhark_mc_task_73968 *futhark_mc_task_73968 =
                                 (struct futhark_mc_task_73968 *) args;
    struct futhark_context *ctx = futhark_mc_task_73968->ctx;
    uint64_t futhark_mc_segmap_task_73969_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73969_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73968->free_n_62364;
    int64_t gtid_64197 = futhark_mc_task_73968->free_gtid_64197;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73968->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67597 = {.desc ="mem_67597", .mem =
                                 futhark_mc_task_73968->free_mem_67597, .size =
                                 0, .references =NULL};
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_task_73968->free_mem_67600, .size =
                                 0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_task_73968->free_mem_67603, .size =
                                 0, .references =NULL};
    int64_t iter_69926;
    struct futhark_mc_segmap_parloop_struct_73970
    futhark_mc_segmap_parloop_struct_73970;
    
    futhark_mc_segmap_parloop_struct_73970.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73970.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73970.free_gtid_64197 = gtid_64197;
    futhark_mc_segmap_parloop_struct_73970.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73970.free_mem_67597 = mem_67597.mem;
    futhark_mc_segmap_parloop_struct_73970.free_mem_67600 = mem_67600.mem;
    futhark_mc_segmap_parloop_struct_73970.free_mem_67603 = mem_67603.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73971_task;
    
    futhark_mc_segmap_parloop_73971_task.name =
        "futhark_mc_segmap_parloop_73971";
    futhark_mc_segmap_parloop_73971_task.fn = futhark_mc_segmap_parloop_73971;
    futhark_mc_segmap_parloop_73971_task.args =
        &futhark_mc_segmap_parloop_struct_73970;
    futhark_mc_segmap_parloop_73971_task.iterations = iterations;
    futhark_mc_segmap_parloop_73971_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73971_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73971_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73971_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73971_task);
    
    if (futhark_mc_segmap_parloop_73971_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73971_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73971_total_end -
                 futhark_mc_segmap_parloop_73971_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73971_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73971_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73971_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73969_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73969_end -
                 futhark_mc_segmap_task_73969_start;
        
        ctx->futhark_mc_segmap_task_73969_runs[tid]++;
        ctx->futhark_mc_segmap_task_73969_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73969_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73972 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67603;
    char *free_mem_67606;
    char *free_mem_67609;
};
struct futhark_mc_segmap_parloop_struct_73974 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67603;
    char *free_mem_67606;
    char *free_mem_67609;
};
static int futhark_mc_segmap_parloop_73975(void *args, int64_t start,
                                           int64_t end, int flat_tid_64202,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73974
    *futhark_mc_segmap_parloop_struct_73974 =
    (struct futhark_mc_segmap_parloop_struct_73974 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73974->ctx;
    uint64_t futhark_mc_segmap_parloop_73975_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73975_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73974->free_n_62364;
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_segmap_parloop_struct_73974->free_mem_67603,
                                 .size =0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_segmap_parloop_struct_73974->free_mem_67606,
                                 .size =0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_segmap_parloop_struct_73974->free_mem_67609,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69932 = start;
    
    for (; iter_69932 < end; iter_69932++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69933 = n_62364;
        int64_t gtid_64203 = iter_69932;
        int64_t remnant_69934 = iter_69932 - gtid_64203;
        int64_t x_69589 = ((int64_t *) mem_67603.mem)[gtid_64203];
        int64_t defunc_0_f_res_69590 = add64((int64_t) 1, x_69589);
        float defunc_0_f_res_69591 = sitofp_i64_f32(x_69589);
        
        ((float *) mem_67606.mem)[gtid_64203] = defunc_0_f_res_69591;
        ((int64_t *) mem_67609.mem)[gtid_64203] = defunc_0_f_res_69590;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73975_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73975_end -
                 futhark_mc_segmap_parloop_73975_start;
        
        ctx->futhark_mc_segmap_parloop_73975_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73975_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73975_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73973(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64202 = tid;
    int num_tasks_69931 = info.nsubtasks;
    struct futhark_mc_task_73972 *futhark_mc_task_73972 =
                                 (struct futhark_mc_task_73972 *) args;
    struct futhark_context *ctx = futhark_mc_task_73972->ctx;
    uint64_t futhark_mc_segmap_task_73973_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73973_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73972->free_n_62364;
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_task_73972->free_mem_67603, .size =
                                 0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_task_73972->free_mem_67606, .size =
                                 0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_task_73972->free_mem_67609, .size =
                                 0, .references =NULL};
    int64_t iter_69932;
    struct futhark_mc_segmap_parloop_struct_73974
    futhark_mc_segmap_parloop_struct_73974;
    
    futhark_mc_segmap_parloop_struct_73974.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73974.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73974.free_mem_67603 = mem_67603.mem;
    futhark_mc_segmap_parloop_struct_73974.free_mem_67606 = mem_67606.mem;
    futhark_mc_segmap_parloop_struct_73974.free_mem_67609 = mem_67609.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73975_task;
    
    futhark_mc_segmap_parloop_73975_task.name =
        "futhark_mc_segmap_parloop_73975";
    futhark_mc_segmap_parloop_73975_task.fn = futhark_mc_segmap_parloop_73975;
    futhark_mc_segmap_parloop_73975_task.args =
        &futhark_mc_segmap_parloop_struct_73974;
    futhark_mc_segmap_parloop_73975_task.iterations = iterations;
    futhark_mc_segmap_parloop_73975_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73975_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73975_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73975_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73975_task);
    
    if (futhark_mc_segmap_parloop_73975_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73975_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73975_total_end -
                 futhark_mc_segmap_parloop_73975_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73975_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73975_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73975_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73973_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73973_end -
                 futhark_mc_segmap_task_73973_start;
        
        ctx->futhark_mc_segmap_task_73973_runs[tid]++;
        ctx->futhark_mc_segmap_task_73973_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73973_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73976 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_64384;
    char *free_mem_67612;
};
struct futhark_mc_segmap_parloop_struct_73978 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_64384;
    char *free_mem_67612;
};
static int futhark_mc_segmap_parloop_73979(void *args, int64_t start,
                                           int64_t end, int flat_tid_64204,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73978
    *futhark_mc_segmap_parloop_struct_73978 =
    (struct futhark_mc_segmap_parloop_struct_73978 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73978->ctx;
    uint64_t futhark_mc_segmap_parloop_73979_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73979_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73978->free_q_62366;
    int64_t last_res_64384 =
            futhark_mc_segmap_parloop_struct_73978->free_last_res_64384;
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_segmap_parloop_struct_73978->free_mem_67612,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69936 = start;
    
    for (; iter_69936 < end; iter_69936++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69937 = q_62366;
        int64_t gtid_64205 = iter_69936;
        int64_t remnant_69938 = iter_69936 - gtid_64205;
        bool cond_69592 = sle64(last_res_64384, gtid_64205);
        float defunc_0_f_res_69593;
        
        if (cond_69592) {
            defunc_0_f_res_69593 = 0.0F;
        } else {
            defunc_0_f_res_69593 = 1.0F;
        }
        ((float *) mem_67612.mem)[gtid_64205] = defunc_0_f_res_69593;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73979_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73979_end -
                 futhark_mc_segmap_parloop_73979_start;
        
        ctx->futhark_mc_segmap_parloop_73979_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73979_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73979_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73977(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64204 = tid;
    int num_tasks_69935 = info.nsubtasks;
    struct futhark_mc_task_73976 *futhark_mc_task_73976 =
                                 (struct futhark_mc_task_73976 *) args;
    struct futhark_context *ctx = futhark_mc_task_73976->ctx;
    uint64_t futhark_mc_segmap_task_73977_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73977_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_73976->free_q_62366;
    int64_t last_res_64384 = futhark_mc_task_73976->free_last_res_64384;
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_task_73976->free_mem_67612, .size =
                                 0, .references =NULL};
    int64_t iter_69936;
    struct futhark_mc_segmap_parloop_struct_73978
    futhark_mc_segmap_parloop_struct_73978;
    
    futhark_mc_segmap_parloop_struct_73978.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73978.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73978.free_last_res_64384 = last_res_64384;
    futhark_mc_segmap_parloop_struct_73978.free_mem_67612 = mem_67612.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73979_task;
    
    futhark_mc_segmap_parloop_73979_task.name =
        "futhark_mc_segmap_parloop_73979";
    futhark_mc_segmap_parloop_73979_task.fn = futhark_mc_segmap_parloop_73979;
    futhark_mc_segmap_parloop_73979_task.args =
        &futhark_mc_segmap_parloop_struct_73978;
    futhark_mc_segmap_parloop_73979_task.iterations = iterations;
    futhark_mc_segmap_parloop_73979_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73979_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73979_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73979_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73979_task);
    
    if (futhark_mc_segmap_parloop_73979_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73979_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73979_total_end -
                 futhark_mc_segmap_parloop_73979_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73977_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73977_end -
                 futhark_mc_segmap_task_73977_start;
        
        ctx->futhark_mc_segmap_task_73977_runs[tid]++;
        ctx->futhark_mc_segmap_task_73977_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73977_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73980 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64384;
    int64_t free_min_arg_64396;
    int64_t free_min_arg_64397;
    float free_max_res_64401;
    char *free_mem_67600;
    char *free_mem_67603;
    char *free_mem_67606;
    char *free_mem_67609;
    char *free_mem_67612;
    char *free_mem_67615;
    char *free_mem_67618;
};
struct futhark_mc_segmap_parloop_struct_73982 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64384;
    int64_t free_min_arg_64396;
    int64_t free_min_arg_64397;
    float free_max_res_64401;
    char *free_mem_67600;
    char *free_mem_67603;
    char *free_mem_67606;
    char *free_mem_67609;
    char *free_mem_67612;
    char *free_mem_67615;
    char *free_mem_67618;
};
static int futhark_mc_segmap_parloop_73983(void *args, int64_t start,
                                           int64_t end, int flat_tid_64206,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73982
    *futhark_mc_segmap_parloop_struct_73982 =
    (struct futhark_mc_segmap_parloop_struct_73982 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73982->ctx;
    uint64_t futhark_mc_segmap_parloop_73983_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73983_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73982->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73982->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73982->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73982->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73982->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73982->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73982->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73982->free_loop_cond_62389;
    int64_t last_res_64384 =
            futhark_mc_segmap_parloop_struct_73982->free_last_res_64384;
    int64_t min_arg_64396 =
            futhark_mc_segmap_parloop_struct_73982->free_min_arg_64396;
    int64_t min_arg_64397 =
            futhark_mc_segmap_parloop_struct_73982->free_min_arg_64397;
    float max_res_64401 =
          futhark_mc_segmap_parloop_struct_73982->free_max_res_64401;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67600,
                                 .size =0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67603,
                                 .size =0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67606,
                                 .size =0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67609,
                                 .size =0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67612,
                                 .size =0, .references =NULL};
    struct memblock mem_67615 = {.desc ="mem_67615", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67615,
                                 .size =0, .references =NULL};
    struct memblock mem_67618 = {.desc ="mem_67618", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67618,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69940 = start;
    
    for (; iter_69940 < end; iter_69940++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70052 = n_m_62372;
        int64_t gtid_64207 = iter_69940;
        int64_t remnant_70053 = iter_69940 - gtid_64207;
        int64_t min_arg_69752 = mul64(jump_62368, gtid_64207);
        int64_t min_res_69753 = smin64(i_62378, min_arg_69752);
        int64_t defunc_0_g_res_69754 = add64((int64_t) 1, min_res_69753);
        bool init_idx_69755;
        int64_t init_idx_69756;
        int64_t init_idx_69757;
        bool loop_while_69941;
        int64_t low_69942;
        int64_t high_69943;
        
        loop_while_69941 = x_62379;
        low_69942 = (int64_t) 0;
        high_69943 = i_62378;
        while (loop_while_69941) {
            int64_t x_69944 = add64(low_69942, high_69943);
            int64_t mid_69945 = sdiv64(x_69944, (int64_t) 2);
            bool x_69946 = sle64((int64_t) 0, mid_69945);
            bool y_69947 = slt64(mid_69945, n_62364);
            bool bounds_check_69948 = x_69946 && y_69947;
            bool index_certs_69949;
            
            if (!bounds_check_69948) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69945,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_69950 = ((int64_t *) mem_67609.mem)[mid_69945];
            bool cond_69951 = slt64(mid_id_69950, (int64_t) 0);
            int64_t mid_idx_69952;
            
            if (cond_69951) {
                mid_idx_69952 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69952 = mid_id_69950;
            }
            
            bool cond_69953 = sle64(defunc_0_g_res_69754, mid_idx_69952);
            int64_t loopres_69954;
            int64_t loopres_69955;
            
            if (cond_69953) {
                int64_t loopres_t_res_69956 = sub64(mid_69945, (int64_t) 1);
                
                loopres_69954 = low_69942;
                loopres_69955 = loopres_t_res_69956;
            } else {
                int64_t loopres_f_res_69957 = add64((int64_t) 1, mid_69945);
                
                loopres_69954 = loopres_f_res_69957;
                loopres_69955 = high_69943;
            }
            
            bool loop_cond_69958 = sle64(loopres_69954, loopres_69955);
            bool loop_while_tmp_70054 = loop_cond_69958;
            int64_t low_tmp_70055 = loopres_69954;
            int64_t high_tmp_70056 = loopres_69955;
            
            loop_while_69941 = loop_while_tmp_70054;
            low_69942 = low_tmp_70055;
            high_69943 = high_tmp_70056;
        }
        init_idx_69755 = loop_while_69941;
        init_idx_69756 = low_69942;
        init_idx_69757 = high_69943;
        
        bool idx_69776;
        int64_t idx_69777;
        int64_t idx_69778;
        int64_t idx_69779;
        bool loop_while_69959;
        int64_t l_idx_69960;
        int64_t r_idx_69961;
        int64_t span_69962;
        
        loop_while_69959 = loop_cond_62389;
        l_idx_69960 = init_idx_69756;
        r_idx_69961 = init_idx_69756;
        span_69962 = (int64_t) 1;
        while (loop_while_69959) {
            int64_t max_arg_69963 = sub64(l_idx_69960, (int64_t) 1);
            int64_t max_res_69964 = smax64((int64_t) 0, max_arg_69963);
            int64_t min_arg_69965 = add64((int64_t) 1, r_idx_69961);
            int64_t min_res_69966 = smin64(min_arg_64396, min_arg_69965);
            bool x_69967 = sle64((int64_t) 0, max_res_69964);
            bool y_69968 = slt64(max_res_69964, n_62364);
            bool bounds_check_69969 = x_69967 && y_69968;
            bool index_certs_69970;
            
            if (!bounds_check_69969) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69964,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69971 = ((int64_t *) mem_67609.mem)[max_res_69964];
            int64_t abs_arg_69972 = sub64(x_69971, defunc_0_g_res_69754);
            int64_t abs_res_69973 = abs64(abs_arg_69972);
            bool x_69974 = sle64((int64_t) 0, min_res_69966);
            bool y_69975 = slt64(min_res_69966, n_62364);
            bool bounds_check_69976 = x_69974 && y_69975;
            bool index_certs_69977;
            
            if (!bounds_check_69976) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69966,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_69978 = ((int64_t *) mem_67609.mem)[min_res_69966];
            int64_t abs_arg_69979 = sub64(x_69978, defunc_0_g_res_69754);
            int64_t abs_res_69980 = abs64(abs_arg_69979);
            bool cond_69981 = max_res_69964 == l_idx_69960;
            int64_t loopres_69982;
            int64_t loopres_69983;
            int64_t loopres_69984;
            
            if (cond_69981) {
                loopres_69982 = l_idx_69960;
                loopres_69983 = r_idx_69961;
                loopres_69984 = min_res_62384;
            } else {
                bool cond_69985 = slt64(abs_res_69973, abs_res_69980);
                bool cond_f_res_69986 = min_res_69966 == r_idx_69961;
                bool x_69987 = !cond_69985;
                bool y_69988 = cond_f_res_69986 && x_69987;
                bool cond_69989 = cond_69985 || y_69988;
                int64_t loopres_f_res_69990;
                
                if (cond_69989) {
                    loopres_f_res_69990 = max_res_69964;
                } else {
                    loopres_f_res_69990 = l_idx_69960;
                }
                
                int64_t loopres_f_res_69991;
                
                if (cond_69989) {
                    loopres_f_res_69991 = r_idx_69961;
                } else {
                    loopres_f_res_69991 = min_res_69966;
                }
                
                int64_t loopres_f_res_69992;
                
                if (cond_69989) {
                    int64_t loopres_f_res_t_res_69993 = add64((int64_t) 1,
                                                              span_69962);
                    
                    loopres_f_res_69992 = loopres_f_res_t_res_69993;
                } else {
                    int64_t loopres_f_res_f_res_69994 = add64((int64_t) 1,
                                                              span_69962);
                    
                    loopres_f_res_69992 = loopres_f_res_f_res_69994;
                }
                loopres_69982 = loopres_f_res_69990;
                loopres_69983 = loopres_f_res_69991;
                loopres_69984 = loopres_f_res_69992;
            }
            
            bool loop_cond_69995 = slt64(loopres_69984, min_res_62384);
            bool loop_while_tmp_70057 = loop_cond_69995;
            int64_t l_idx_tmp_70058 = loopres_69982;
            int64_t r_idx_tmp_70059 = loopres_69983;
            int64_t span_tmp_70060 = loopres_69984;
            
            loop_while_69959 = loop_while_tmp_70057;
            l_idx_69960 = l_idx_tmp_70058;
            r_idx_69961 = r_idx_tmp_70059;
            span_69962 = span_tmp_70060;
        }
        idx_69776 = loop_while_69959;
        idx_69777 = l_idx_69960;
        idx_69778 = r_idx_69961;
        idx_69779 = span_69962;
        
        int64_t min_res_69817 = smin64(min_arg_64397, idx_69777);
        int64_t x_69818 = add64(min_res_62384, min_res_69817);
        int64_t r_69819 = sub64(x_69818, (int64_t) 1);
        bool x_69820 = sle64((int64_t) 0, r_69819);
        bool y_69821 = slt64(r_69819, n_62364);
        bool bounds_check_69822 = x_69820 && y_69821;
        bool index_certs_69823;
        
        if (!bounds_check_69822) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_69819,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69824 = ((int64_t *) mem_67603.mem)[r_69819];
        int64_t abs_arg_69825 = sub64(x_69824, min_res_69753);
        int64_t abs_res_69826 = abs64(abs_arg_69825);
        bool x_69827 = sle64((int64_t) 0, min_res_69817);
        bool y_69828 = slt64(min_res_69817, n_62364);
        bool bounds_check_69829 = x_69827 && y_69828;
        bool index_certs_69830;
        
        if (!bounds_check_69829) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_69817,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69831 = ((int64_t *) mem_67603.mem)[min_res_69817];
        int64_t abs_arg_69832 = sub64(x_69831, min_res_69753);
        int64_t abs_res_69833 = abs64(abs_arg_69832);
        int64_t max_res_69834 = smax64(abs_res_69826, abs_res_69833);
        float defunc_0_f_res_69835 = sitofp_i64_f32(max_res_69834);
        float defunc_1_f_res_69836 = max_res_64401 + defunc_0_f_res_69835;
        float defunc_0_f_res_69837 = sitofp_i64_f32(min_res_69753);
        float defunc_2_reduce_res_69838;
        float defunc_2_reduce_res_69839;
        float defunc_2_reduce_res_69840;
        float redout_69997;
        float redout_69998;
        float redout_69999;
        
        redout_69997 = 0.0F;
        redout_69998 = 0.0F;
        redout_69999 = 0.0F;
        for (int64_t i_69996 = 0; i_69996 < q_62366; i_69996++) {
            float x_70000 = ((float *) mem_67612.mem)[i_69996];
            bool cond_70001 = sle64(last_res_64384, i_69996);
            float defunc_0_f_res_70002;
            
            if (cond_70001) {
                defunc_0_f_res_70002 = 0.0F;
            } else {
                int64_t i_70003 = add64(min_res_69817, i_69996);
                float x_70004 = ((float *) mem_67606.mem)[i_70003];
                float defunc_0_f_res_f_res_70005 = 1.0F + x_70004;
                
                defunc_0_f_res_70002 = defunc_0_f_res_f_res_70005;
            }
            
            float x_j_70006 = defunc_0_f_res_70002 - defunc_0_f_res_69837;
            float abs_res_70007 = (float) fabs(x_j_70006);
            float tmp1_70008 = abs_res_70007 / defunc_1_f_res_69836;
            float x_70009 = tmp1_70008 * tmp1_70008;
            float y_70010 = tmp1_70008 * x_70009;
            float tmp2_70011 = 1.0F - y_70010;
            float x_70012 = tmp2_70011 * tmp2_70011;
            float tmp3_70013 = tmp2_70011 * x_70012;
            float w_j_70014 = x_70000 * tmp3_70013;
            float xw_j_70015 = x_j_70006 * w_j_70014;
            float x2w_j_70016 = x_j_70006 * xw_j_70015;
            float defunc_1_op_res_70017 = w_j_70014 + redout_69997;
            float defunc_1_op_res_70018 = xw_j_70015 + redout_69998;
            float defunc_1_op_res_70019 = x2w_j_70016 + redout_69999;
            float redout_tmp_70061 = defunc_1_op_res_70017;
            float redout_tmp_70062 = defunc_1_op_res_70018;
            float redout_tmp_70063 = defunc_1_op_res_70019;
            
            redout_69997 = redout_tmp_70061;
            redout_69998 = redout_tmp_70062;
            redout_69999 = redout_tmp_70063;
        }
        defunc_2_reduce_res_69838 = redout_69997;
        defunc_2_reduce_res_69839 = redout_69998;
        defunc_2_reduce_res_69840 = redout_69999;
        
        float x_69865 = defunc_2_reduce_res_69838 * defunc_2_reduce_res_69840;
        float y_69866 = defunc_2_reduce_res_69839 * defunc_2_reduce_res_69839;
        float y_69867 = x_69865 - y_69866;
        float det1_69868 = 1.0F / y_69867;
        float a11_69869 = defunc_2_reduce_res_69840 * det1_69868;
        float negate_arg_69870 = defunc_2_reduce_res_69839 * det1_69868;
        float b11_69871 = 0.0F - negate_arg_69870;
        float c11_69872 = defunc_2_reduce_res_69838 * det1_69868;
        float defunc_2_reduce_res_69873;
        float defunc_2_reduce_res_69874;
        float redout_70021;
        float redout_70022;
        
        redout_70021 = 0.0F;
        redout_70022 = 0.0F;
        for (int64_t i_70020 = 0; i_70020 < q_62366; i_70020++) {
            float x_70023 = ((float *) mem_67612.mem)[i_70020];
            bool cond_70024 = sle64(last_res_64384, i_70020);
            float defunc_0_f_res_70025;
            
            if (cond_70024) {
                defunc_0_f_res_70025 = 0.0F;
            } else {
                int64_t i_70026 = add64(min_res_69817, i_70020);
                float x_70027 = ((float *) mem_67606.mem)[i_70026];
                float defunc_0_f_res_f_res_70028 = 1.0F + x_70027;
                
                defunc_0_f_res_70025 = defunc_0_f_res_f_res_70028;
            }
            
            float x_j_70029 = defunc_0_f_res_70025 - defunc_0_f_res_69837;
            float abs_res_70030 = (float) fabs(x_j_70029);
            float tmp1_70031 = abs_res_70030 / defunc_1_f_res_69836;
            float x_70032 = tmp1_70031 * tmp1_70031;
            float y_70033 = tmp1_70031 * x_70032;
            float tmp2_70034 = 1.0F - y_70033;
            float x_70035 = tmp2_70034 * tmp2_70034;
            float tmp3_70036 = tmp2_70034 * x_70035;
            float tmp4_70037 = x_70023 * tmp3_70036;
            float defunc_1_f_res_70038 = x_j_70029 * tmp4_70037;
            float defunc_0_f_res_70039;
            
            if (cond_70024) {
                defunc_0_f_res_70039 = 0.0F;
            } else {
                int64_t i_70040 = add64(min_res_69817, i_70020);
                float x_70041 = ((float *) mem_67600.mem)[i_70040];
                
                defunc_0_f_res_70039 = x_70041;
            }
            
            float x_70042 = a11_69869 * tmp4_70037;
            float y_70043 = b11_69871 * defunc_1_f_res_70038;
            float x_70044 = x_70042 + y_70043;
            float defunc_9_fit_fun_res_70045 = defunc_0_f_res_70039 * x_70044;
            float x_70046 = b11_69871 * tmp4_70037;
            float y_70047 = c11_69872 * defunc_1_f_res_70038;
            float x_70048 = x_70046 + y_70047;
            float defunc_9_slope_fun_res_70049 = defunc_0_f_res_70039 * x_70048;
            float defunc_1_op_res_70050 = defunc_9_fit_fun_res_70045 +
                  redout_70021;
            float defunc_1_op_res_70051 = defunc_9_slope_fun_res_70049 +
                  redout_70022;
            float redout_tmp_70064 = defunc_1_op_res_70050;
            float redout_tmp_70065 = defunc_1_op_res_70051;
            
            redout_70021 = redout_tmp_70064;
            redout_70022 = redout_tmp_70065;
        }
        defunc_2_reduce_res_69873 = redout_70021;
        defunc_2_reduce_res_69874 = redout_70022;
        ((float *) mem_67615.mem)[gtid_64207] = defunc_2_reduce_res_69873;
        ((float *) mem_67618.mem)[gtid_64207] = defunc_2_reduce_res_69874;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73983_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73983_end -
                 futhark_mc_segmap_parloop_73983_start;
        
        ctx->futhark_mc_segmap_parloop_73983_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73983_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73983_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73981(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64206 = tid;
    int num_tasks_69939 = info.nsubtasks;
    struct futhark_mc_task_73980 *futhark_mc_task_73980 =
                                 (struct futhark_mc_task_73980 *) args;
    struct futhark_context *ctx = futhark_mc_task_73980->ctx;
    uint64_t futhark_mc_segmap_task_73981_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73981_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73980->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73980->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73980->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73980->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73980->free_i_62378;
    bool x_62379 = futhark_mc_task_73980->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73980->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73980->free_loop_cond_62389;
    int64_t last_res_64384 = futhark_mc_task_73980->free_last_res_64384;
    int64_t min_arg_64396 = futhark_mc_task_73980->free_min_arg_64396;
    int64_t min_arg_64397 = futhark_mc_task_73980->free_min_arg_64397;
    float max_res_64401 = futhark_mc_task_73980->free_max_res_64401;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_task_73980->free_mem_67600, .size =
                                 0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_task_73980->free_mem_67603, .size =
                                 0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_task_73980->free_mem_67606, .size =
                                 0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_task_73980->free_mem_67609, .size =
                                 0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_task_73980->free_mem_67612, .size =
                                 0, .references =NULL};
    struct memblock mem_67615 = {.desc ="mem_67615", .mem =
                                 futhark_mc_task_73980->free_mem_67615, .size =
                                 0, .references =NULL};
    struct memblock mem_67618 = {.desc ="mem_67618", .mem =
                                 futhark_mc_task_73980->free_mem_67618, .size =
                                 0, .references =NULL};
    int64_t iter_69940;
    struct futhark_mc_segmap_parloop_struct_73982
    futhark_mc_segmap_parloop_struct_73982;
    
    futhark_mc_segmap_parloop_struct_73982.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73982.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73982.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73982.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73982.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73982.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73982.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73982.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73982.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73982.free_last_res_64384 = last_res_64384;
    futhark_mc_segmap_parloop_struct_73982.free_min_arg_64396 = min_arg_64396;
    futhark_mc_segmap_parloop_struct_73982.free_min_arg_64397 = min_arg_64397;
    futhark_mc_segmap_parloop_struct_73982.free_max_res_64401 = max_res_64401;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67600 = mem_67600.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67603 = mem_67603.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67606 = mem_67606.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67609 = mem_67609.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67612 = mem_67612.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67615 = mem_67615.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67618 = mem_67618.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73983_task;
    
    futhark_mc_segmap_parloop_73983_task.name =
        "futhark_mc_segmap_parloop_73983";
    futhark_mc_segmap_parloop_73983_task.fn = futhark_mc_segmap_parloop_73983;
    futhark_mc_segmap_parloop_73983_task.args =
        &futhark_mc_segmap_parloop_struct_73982;
    futhark_mc_segmap_parloop_73983_task.iterations = iterations;
    futhark_mc_segmap_parloop_73983_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73983_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73983_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73983_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73983_task);
    
    if (futhark_mc_segmap_parloop_73983_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73983_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73983_total_end -
                 futhark_mc_segmap_parloop_73983_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73981_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73981_end -
                 futhark_mc_segmap_task_73981_start;
        
        ctx->futhark_mc_segmap_task_73981_runs[tid]++;
        ctx->futhark_mc_segmap_task_73981_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73981_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73985 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64384;
    int64_t free_min_arg_64396;
    int64_t free_min_arg_64397;
    float free_max_res_64401;
    char *free_mem_67600;
    char *free_mem_67603;
    char *free_mem_67606;
    char *free_mem_67609;
    char *free_mem_67612;
    char *free_mem_67615;
    char *free_mem_67618;
};
struct futhark_mc_task_73987 {
    struct futhark_context *ctx;
    int64_t free_last_res_64384;
    char *free_mem_67606;
    char *free_mem_67612;
    int64_t free_min_res_69659;
    float free_defunc_1_f_res_69678;
    float free_defunc_0_f_res_69679;
    float *retval_defunc_2_reduce_res_69680;
    float *retval_defunc_2_reduce_res_69681;
    float *retval_defunc_2_reduce_res_69682;
};
struct futhark_mc_segred_stage_1_parloop_struct_73992 {
    struct futhark_context *ctx;
    int64_t free_last_res_64384;
    char *free_mem_67606;
    char *free_mem_67612;
    int64_t free_min_res_69659;
    float free_defunc_1_f_res_69678;
    float free_defunc_0_f_res_69679;
    char *free_reduce_stage_1_tid_res_arr_mem_70191;
    char *free_reduce_stage_1_tid_res_arr_mem_70193;
    char *free_reduce_stage_1_tid_res_arr_mem_70195;
};
static int futhark_mc_segred_stage_1_parloop_73993(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64210, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73992
    *futhark_mc_segred_stage_1_parloop_struct_73992 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73992 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73992->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73993_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73993_start = get_wall_time();
    
    int64_t last_res_64384 =
            futhark_mc_segred_stage_1_parloop_struct_73992->free_last_res_64384;
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73992->free_mem_67606,
                                 .size =0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73992->free_mem_67612,
                                 .size =0, .references =NULL};
    int64_t min_res_69659 =
            futhark_mc_segred_stage_1_parloop_struct_73992->free_min_res_69659;
    float defunc_1_f_res_69678 =
          futhark_mc_segred_stage_1_parloop_struct_73992->free_defunc_1_f_res_69678;
    float defunc_0_f_res_69679 =
          futhark_mc_segred_stage_1_parloop_struct_73992->free_defunc_0_f_res_69679;
    struct memblock reduce_stage_1_tid_res_arr_mem_70191 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70191",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73992->free_reduce_stage_1_tid_res_arr_mem_70191,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70193 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70193",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73992->free_reduce_stage_1_tid_res_arr_mem_70193,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70195 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70195",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73992->free_reduce_stage_1_tid_res_arr_mem_70195,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70197 = start;
    float x_70122;
    float x_70123;
    float x_70125;
    float x_70126;
    float x_70128;
    float x_70129;
    float local_acc_70198 = 0.0F;
    float local_acc_70199 = 0.0F;
    float local_acc_70200 = 0.0F;
    
    for (; iter_70197 < end; iter_70197++) {
        int64_t gtid_64211 = iter_70197;
        float x_70131 = ((float *) mem_67612.mem)[gtid_64211];
        bool cond_70132 = sle64(last_res_64384, gtid_64211);
        float defunc_0_f_res_70133;
        
        if (cond_70132) {
            defunc_0_f_res_70133 = 0.0F;
        } else {
            int64_t i_70134 = add64(gtid_64211, min_res_69659);
            float x_70135 = ((float *) mem_67606.mem)[i_70134];
            float defunc_0_f_res_f_res_70136 = 1.0F + x_70135;
            
            defunc_0_f_res_70133 = defunc_0_f_res_f_res_70136;
        }
        
        float x_j_70137 = defunc_0_f_res_70133 - defunc_0_f_res_69679;
        float abs_res_70138 = (float) fabs(x_j_70137);
        float tmp1_70139 = abs_res_70138 / defunc_1_f_res_69678;
        float x_70140 = tmp1_70139 * tmp1_70139;
        float y_70141 = tmp1_70139 * x_70140;
        float tmp2_70142 = 1.0F - y_70141;
        float x_70143 = tmp2_70142 * tmp2_70142;
        float tmp3_70144 = tmp2_70142 * x_70143;
        float w_j_70145 = x_70131 * tmp3_70144;
        float xw_j_70146 = x_j_70137 * w_j_70145;
        float x2w_j_70147 = x_j_70137 * xw_j_70146;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_70122 = local_acc_70198;
        }
        // Load next params
        {
            x_70123 = w_j_70145;
        }
        // Red body
        {
            float defunc_1_op_res_70124 = x_70122 + x_70123;
            
            local_acc_70198 = defunc_1_op_res_70124;
        }
        // Load accum params
        {
            x_70125 = local_acc_70199;
        }
        // Load next params
        {
            x_70126 = xw_j_70146;
        }
        // Red body
        {
            float defunc_1_op_res_70127 = x_70125 + x_70126;
            
            local_acc_70199 = defunc_1_op_res_70127;
        }
        // Load accum params
        {
            x_70128 = local_acc_70200;
        }
        // Load next params
        {
            x_70129 = x2w_j_70147;
        }
        // Red body
        {
            float defunc_1_op_res_70130 = x_70128 + x_70129;
            
            local_acc_70200 = defunc_1_op_res_70130;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_70191.mem)[flat_tid_64210] =
        local_acc_70198;
    ((float *) reduce_stage_1_tid_res_arr_mem_70193.mem)[flat_tid_64210] =
        local_acc_70199;
    ((float *) reduce_stage_1_tid_res_arr_mem_70195.mem)[flat_tid_64210] =
        local_acc_70200;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73993_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73993_end -
                 futhark_mc_segred_stage_1_parloop_73993_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73993_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73993_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73993_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73988(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64210 = tid;
    int num_tasks_70190 = info.nsubtasks;
    struct futhark_mc_task_73987 *futhark_mc_task_73987 =
                                 (struct futhark_mc_task_73987 *) args;
    struct futhark_context *ctx = futhark_mc_task_73987->ctx;
    uint64_t futhark_mc_segred_task_73988_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73988_start = get_wall_time();
    
    int64_t last_res_64384 = futhark_mc_task_73987->free_last_res_64384;
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_task_73987->free_mem_67606, .size =
                                 0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_task_73987->free_mem_67612, .size =
                                 0, .references =NULL};
    int64_t min_res_69659 = futhark_mc_task_73987->free_min_res_69659;
    float defunc_1_f_res_69678 =
          futhark_mc_task_73987->free_defunc_1_f_res_69678;
    float defunc_0_f_res_69679 =
          futhark_mc_task_73987->free_defunc_0_f_res_69679;
    float defunc_2_reduce_res_69680 =
          *futhark_mc_task_73987->retval_defunc_2_reduce_res_69680;
    float defunc_2_reduce_res_69681 =
          *futhark_mc_task_73987->retval_defunc_2_reduce_res_69681;
    float defunc_2_reduce_res_69682 =
          *futhark_mc_task_73987->retval_defunc_2_reduce_res_69682;
    size_t reduce_stage_1_tid_res_arr_mem_70191_cached_sizze_73989 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70191 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70193_cached_sizze_73990 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70193 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70195_cached_sizze_73991 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70195 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_70191_cached_sizze_73989 <
        (size_t) ((int64_t) 4 * num_tasks_70190)) {
        reduce_stage_1_tid_res_arr_mem_70191 =
            realloc(reduce_stage_1_tid_res_arr_mem_70191, (int64_t) 4 *
                    num_tasks_70190);
        reduce_stage_1_tid_res_arr_mem_70191_cached_sizze_73989 = (int64_t) 4 *
            num_tasks_70190;
    }
    if (reduce_stage_1_tid_res_arr_mem_70193_cached_sizze_73990 <
        (size_t) ((int64_t) 4 * num_tasks_70190)) {
        reduce_stage_1_tid_res_arr_mem_70193 =
            realloc(reduce_stage_1_tid_res_arr_mem_70193, (int64_t) 4 *
                    num_tasks_70190);
        reduce_stage_1_tid_res_arr_mem_70193_cached_sizze_73990 = (int64_t) 4 *
            num_tasks_70190;
    }
    if (reduce_stage_1_tid_res_arr_mem_70195_cached_sizze_73991 <
        (size_t) ((int64_t) 4 * num_tasks_70190)) {
        reduce_stage_1_tid_res_arr_mem_70195 =
            realloc(reduce_stage_1_tid_res_arr_mem_70195, (int64_t) 4 *
                    num_tasks_70190);
        reduce_stage_1_tid_res_arr_mem_70195_cached_sizze_73991 = (int64_t) 4 *
            num_tasks_70190;
    }
    
    int64_t iter_70197;
    struct futhark_mc_segred_stage_1_parloop_struct_73992
    futhark_mc_segred_stage_1_parloop_struct_73992;
    
    futhark_mc_segred_stage_1_parloop_struct_73992.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_last_res_64384 =
        last_res_64384;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_mem_67606 =
        mem_67606.mem;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_mem_67612 =
        mem_67612.mem;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_min_res_69659 =
        min_res_69659;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_defunc_1_f_res_69678 =
        defunc_1_f_res_69678;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_defunc_0_f_res_69679 =
        defunc_0_f_res_69679;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_reduce_stage_1_tid_res_arr_mem_70191 =
        reduce_stage_1_tid_res_arr_mem_70191;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_reduce_stage_1_tid_res_arr_mem_70193 =
        reduce_stage_1_tid_res_arr_mem_70193;
    futhark_mc_segred_stage_1_parloop_struct_73992.free_reduce_stage_1_tid_res_arr_mem_70195 =
        reduce_stage_1_tid_res_arr_mem_70195;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73993_task;
    
    futhark_mc_segred_stage_1_parloop_73993_task.name =
        "futhark_mc_segred_stage_1_parloop_73993";
    futhark_mc_segred_stage_1_parloop_73993_task.fn =
        futhark_mc_segred_stage_1_parloop_73993;
    futhark_mc_segred_stage_1_parloop_73993_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73992;
    futhark_mc_segred_stage_1_parloop_73993_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73993_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73993_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73993_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73993_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73993_task);
    
    if (futhark_mc_segred_stage_1_parloop_73993_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73993_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73993_total_end -
                 futhark_mc_segred_stage_1_parloop_73993_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73993_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73993_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73993_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_69680 = 0.0F;
        defunc_2_reduce_res_69681 = 0.0F;
        defunc_2_reduce_res_69682 = 0.0F;
    }
    
    float x_70201;
    float x_70202;
    float x_70204;
    float x_70205;
    float x_70207;
    float x_70208;
    
    for (int32_t i_70210 = 0; i_70210 < num_tasks_70190; i_70210++) {
        flat_tid_64210 = i_70210;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_70201 = defunc_2_reduce_res_69680;
            }
            // load next params
            {
                x_70202 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70191)[flat_tid_64210];
            }
            // red body
            {
                float defunc_1_op_res_70203 = x_70201 + x_70202;
                
                defunc_2_reduce_res_69680 = defunc_1_op_res_70203;
            }
            // load acc params
            {
                x_70204 = defunc_2_reduce_res_69681;
            }
            // load next params
            {
                x_70205 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70193)[flat_tid_64210];
            }
            // red body
            {
                float defunc_1_op_res_70206 = x_70204 + x_70205;
                
                defunc_2_reduce_res_69681 = defunc_1_op_res_70206;
            }
            // load acc params
            {
                x_70207 = defunc_2_reduce_res_69682;
            }
            // load next params
            {
                x_70208 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70195)[flat_tid_64210];
            }
            // red body
            {
                float defunc_1_op_res_70209 = x_70207 + x_70208;
                
                defunc_2_reduce_res_69682 = defunc_1_op_res_70209;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_70191);
    free(reduce_stage_1_tid_res_arr_mem_70193);
    free(reduce_stage_1_tid_res_arr_mem_70195);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73988_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73988_end -
                 futhark_mc_segred_task_73988_start;
        
        ctx->futhark_mc_segred_task_73988_runs[tid]++;
        ctx->futhark_mc_segred_task_73988_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73988_iter[tid] += iterations;
    }
    *futhark_mc_task_73987->retval_defunc_2_reduce_res_69680 =
        defunc_2_reduce_res_69680;
    *futhark_mc_task_73987->retval_defunc_2_reduce_res_69681 =
        defunc_2_reduce_res_69681;
    *futhark_mc_task_73987->retval_defunc_2_reduce_res_69682 =
        defunc_2_reduce_res_69682;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73994 {
    struct futhark_context *ctx;
    int64_t free_last_res_64384;
    char *free_mem_67600;
    char *free_mem_67606;
    char *free_mem_67612;
    int64_t free_min_res_69659;
    float free_defunc_1_f_res_69678;
    float free_defunc_0_f_res_69679;
    float free_a11_69713;
    float free_b11_69715;
    float free_c11_69716;
    float *retval_defunc_2_reduce_res_69717;
    float *retval_defunc_2_reduce_res_69718;
};
struct futhark_mc_segred_stage_1_parloop_struct_73998 {
    struct futhark_context *ctx;
    int64_t free_last_res_64384;
    char *free_mem_67600;
    char *free_mem_67606;
    char *free_mem_67612;
    int64_t free_min_res_69659;
    float free_defunc_1_f_res_69678;
    float free_defunc_0_f_res_69679;
    float free_a11_69713;
    float free_b11_69715;
    float free_c11_69716;
    char *free_reduce_stage_1_tid_res_arr_mem_70212;
    char *free_reduce_stage_1_tid_res_arr_mem_70214;
};
static int futhark_mc_segred_stage_1_parloop_73999(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64212, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73998
    *futhark_mc_segred_stage_1_parloop_struct_73998 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73998 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73998->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73999_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73999_start = get_wall_time();
    
    int64_t last_res_64384 =
            futhark_mc_segred_stage_1_parloop_struct_73998->free_last_res_64384;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73998->free_mem_67600,
                                 .size =0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73998->free_mem_67606,
                                 .size =0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73998->free_mem_67612,
                                 .size =0, .references =NULL};
    int64_t min_res_69659 =
            futhark_mc_segred_stage_1_parloop_struct_73998->free_min_res_69659;
    float defunc_1_f_res_69678 =
          futhark_mc_segred_stage_1_parloop_struct_73998->free_defunc_1_f_res_69678;
    float defunc_0_f_res_69679 =
          futhark_mc_segred_stage_1_parloop_struct_73998->free_defunc_0_f_res_69679;
    float a11_69713 =
          futhark_mc_segred_stage_1_parloop_struct_73998->free_a11_69713;
    float b11_69715 =
          futhark_mc_segred_stage_1_parloop_struct_73998->free_b11_69715;
    float c11_69716 =
          futhark_mc_segred_stage_1_parloop_struct_73998->free_c11_69716;
    struct memblock reduce_stage_1_tid_res_arr_mem_70212 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70212",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73998->free_reduce_stage_1_tid_res_arr_mem_70212,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70214 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70214",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73998->free_reduce_stage_1_tid_res_arr_mem_70214,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70216 = start;
    float x_70148;
    float x_70149;
    float x_70151;
    float x_70152;
    float local_acc_70217 = 0.0F;
    float local_acc_70218 = 0.0F;
    
    for (; iter_70216 < end; iter_70216++) {
        int64_t gtid_64213 = iter_70216;
        float x_70154 = ((float *) mem_67612.mem)[gtid_64213];
        bool cond_70155 = sle64(last_res_64384, gtid_64213);
        float defunc_0_f_res_70156;
        
        if (cond_70155) {
            defunc_0_f_res_70156 = 0.0F;
        } else {
            int64_t i_70157 = add64(gtid_64213, min_res_69659);
            float x_70158 = ((float *) mem_67606.mem)[i_70157];
            float defunc_0_f_res_f_res_70159 = 1.0F + x_70158;
            
            defunc_0_f_res_70156 = defunc_0_f_res_f_res_70159;
        }
        
        float x_j_70160 = defunc_0_f_res_70156 - defunc_0_f_res_69679;
        float abs_res_70161 = (float) fabs(x_j_70160);
        float tmp1_70162 = abs_res_70161 / defunc_1_f_res_69678;
        float x_70163 = tmp1_70162 * tmp1_70162;
        float y_70164 = tmp1_70162 * x_70163;
        float tmp2_70165 = 1.0F - y_70164;
        float x_70166 = tmp2_70165 * tmp2_70165;
        float tmp3_70167 = tmp2_70165 * x_70166;
        float tmp4_70168 = x_70154 * tmp3_70167;
        float defunc_1_f_res_70169 = x_j_70160 * tmp4_70168;
        float defunc_0_f_res_70170;
        
        if (cond_70155) {
            defunc_0_f_res_70170 = 0.0F;
        } else {
            int64_t i_70171 = add64(gtid_64213, min_res_69659);
            float x_70172 = ((float *) mem_67600.mem)[i_70171];
            
            defunc_0_f_res_70170 = x_70172;
        }
        
        float x_70173 = a11_69713 * tmp4_70168;
        float y_70174 = b11_69715 * defunc_1_f_res_70169;
        float x_70175 = x_70173 + y_70174;
        float defunc_9_fit_fun_res_70176 = defunc_0_f_res_70170 * x_70175;
        float x_70177 = b11_69715 * tmp4_70168;
        float y_70178 = c11_69716 * defunc_1_f_res_70169;
        float x_70179 = x_70177 + y_70178;
        float defunc_9_slope_fun_res_70180 = defunc_0_f_res_70170 * x_70179;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_70148 = local_acc_70217;
        }
        // Load next params
        {
            x_70149 = defunc_9_fit_fun_res_70176;
        }
        // Red body
        {
            float defunc_1_op_res_70150 = x_70148 + x_70149;
            
            local_acc_70217 = defunc_1_op_res_70150;
        }
        // Load accum params
        {
            x_70151 = local_acc_70218;
        }
        // Load next params
        {
            x_70152 = defunc_9_slope_fun_res_70180;
        }
        // Red body
        {
            float defunc_1_op_res_70153 = x_70151 + x_70152;
            
            local_acc_70218 = defunc_1_op_res_70153;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_70212.mem)[flat_tid_64212] =
        local_acc_70217;
    ((float *) reduce_stage_1_tid_res_arr_mem_70214.mem)[flat_tid_64212] =
        local_acc_70218;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73999_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73999_end -
                 futhark_mc_segred_stage_1_parloop_73999_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73999_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73999_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73999_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73995(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64212 = tid;
    int num_tasks_70211 = info.nsubtasks;
    struct futhark_mc_task_73994 *futhark_mc_task_73994 =
                                 (struct futhark_mc_task_73994 *) args;
    struct futhark_context *ctx = futhark_mc_task_73994->ctx;
    uint64_t futhark_mc_segred_task_73995_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73995_start = get_wall_time();
    
    int64_t last_res_64384 = futhark_mc_task_73994->free_last_res_64384;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_task_73994->free_mem_67600, .size =
                                 0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_task_73994->free_mem_67606, .size =
                                 0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_task_73994->free_mem_67612, .size =
                                 0, .references =NULL};
    int64_t min_res_69659 = futhark_mc_task_73994->free_min_res_69659;
    float defunc_1_f_res_69678 =
          futhark_mc_task_73994->free_defunc_1_f_res_69678;
    float defunc_0_f_res_69679 =
          futhark_mc_task_73994->free_defunc_0_f_res_69679;
    float a11_69713 = futhark_mc_task_73994->free_a11_69713;
    float b11_69715 = futhark_mc_task_73994->free_b11_69715;
    float c11_69716 = futhark_mc_task_73994->free_c11_69716;
    float defunc_2_reduce_res_69717 =
          *futhark_mc_task_73994->retval_defunc_2_reduce_res_69717;
    float defunc_2_reduce_res_69718 =
          *futhark_mc_task_73994->retval_defunc_2_reduce_res_69718;
    size_t reduce_stage_1_tid_res_arr_mem_70212_cached_sizze_73996 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70212 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70214_cached_sizze_73997 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70214 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_70212_cached_sizze_73996 <
        (size_t) ((int64_t) 4 * num_tasks_70211)) {
        reduce_stage_1_tid_res_arr_mem_70212 =
            realloc(reduce_stage_1_tid_res_arr_mem_70212, (int64_t) 4 *
                    num_tasks_70211);
        reduce_stage_1_tid_res_arr_mem_70212_cached_sizze_73996 = (int64_t) 4 *
            num_tasks_70211;
    }
    if (reduce_stage_1_tid_res_arr_mem_70214_cached_sizze_73997 <
        (size_t) ((int64_t) 4 * num_tasks_70211)) {
        reduce_stage_1_tid_res_arr_mem_70214 =
            realloc(reduce_stage_1_tid_res_arr_mem_70214, (int64_t) 4 *
                    num_tasks_70211);
        reduce_stage_1_tid_res_arr_mem_70214_cached_sizze_73997 = (int64_t) 4 *
            num_tasks_70211;
    }
    
    int64_t iter_70216;
    struct futhark_mc_segred_stage_1_parloop_struct_73998
    futhark_mc_segred_stage_1_parloop_struct_73998;
    
    futhark_mc_segred_stage_1_parloop_struct_73998.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_last_res_64384 =
        last_res_64384;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_mem_67600 =
        mem_67600.mem;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_mem_67606 =
        mem_67606.mem;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_mem_67612 =
        mem_67612.mem;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_min_res_69659 =
        min_res_69659;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_defunc_1_f_res_69678 =
        defunc_1_f_res_69678;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_defunc_0_f_res_69679 =
        defunc_0_f_res_69679;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_a11_69713 = a11_69713;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_b11_69715 = b11_69715;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_c11_69716 = c11_69716;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_reduce_stage_1_tid_res_arr_mem_70212 =
        reduce_stage_1_tid_res_arr_mem_70212;
    futhark_mc_segred_stage_1_parloop_struct_73998.free_reduce_stage_1_tid_res_arr_mem_70214 =
        reduce_stage_1_tid_res_arr_mem_70214;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73999_task;
    
    futhark_mc_segred_stage_1_parloop_73999_task.name =
        "futhark_mc_segred_stage_1_parloop_73999";
    futhark_mc_segred_stage_1_parloop_73999_task.fn =
        futhark_mc_segred_stage_1_parloop_73999;
    futhark_mc_segred_stage_1_parloop_73999_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73998;
    futhark_mc_segred_stage_1_parloop_73999_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73999_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73999_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73999_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73999_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73999_task);
    
    if (futhark_mc_segred_stage_1_parloop_73999_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73999_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73999_total_end -
                 futhark_mc_segred_stage_1_parloop_73999_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73999_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73999_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73999_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_69717 = 0.0F;
        defunc_2_reduce_res_69718 = 0.0F;
    }
    
    float x_70219;
    float x_70220;
    float x_70222;
    float x_70223;
    
    for (int32_t i_70225 = 0; i_70225 < num_tasks_70211; i_70225++) {
        flat_tid_64212 = i_70225;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_70219 = defunc_2_reduce_res_69717;
            }
            // load next params
            {
                x_70220 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70212)[flat_tid_64212];
            }
            // red body
            {
                float defunc_1_op_res_70221 = x_70219 + x_70220;
                
                defunc_2_reduce_res_69717 = defunc_1_op_res_70221;
            }
            // load acc params
            {
                x_70222 = defunc_2_reduce_res_69718;
            }
            // load next params
            {
                x_70223 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70214)[flat_tid_64212];
            }
            // red body
            {
                float defunc_1_op_res_70224 = x_70222 + x_70223;
                
                defunc_2_reduce_res_69718 = defunc_1_op_res_70224;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_70212);
    free(reduce_stage_1_tid_res_arr_mem_70214);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73995_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73995_end -
                 futhark_mc_segred_task_73995_start;
        
        ctx->futhark_mc_segred_task_73995_runs[tid]++;
        ctx->futhark_mc_segred_task_73995_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73995_iter[tid] += iterations;
    }
    *futhark_mc_task_73994->retval_defunc_2_reduce_res_69717 =
        defunc_2_reduce_res_69717;
    *futhark_mc_task_73994->retval_defunc_2_reduce_res_69718 =
        defunc_2_reduce_res_69718;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73986(void *args, int64_t start,
                                           int64_t end, int flat_tid_64208,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73985
    *futhark_mc_segmap_parloop_struct_73985 =
    (struct futhark_mc_segmap_parloop_struct_73985 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73985->ctx;
    uint64_t futhark_mc_segmap_parloop_73986_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73986_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73985->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73985->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73985->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73985->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73985->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73985->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73985->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73985->free_loop_cond_62389;
    int64_t last_res_64384 =
            futhark_mc_segmap_parloop_struct_73985->free_last_res_64384;
    int64_t min_arg_64396 =
            futhark_mc_segmap_parloop_struct_73985->free_min_arg_64396;
    int64_t min_arg_64397 =
            futhark_mc_segmap_parloop_struct_73985->free_min_arg_64397;
    float max_res_64401 =
          futhark_mc_segmap_parloop_struct_73985->free_max_res_64401;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67600,
                                 .size =0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67603,
                                 .size =0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67606,
                                 .size =0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67609,
                                 .size =0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67612,
                                 .size =0, .references =NULL};
    struct memblock mem_67615 = {.desc ="mem_67615", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67615,
                                 .size =0, .references =NULL};
    struct memblock mem_67618 = {.desc ="mem_67618", .mem =
                                 futhark_mc_segmap_parloop_struct_73985->free_mem_67618,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70066 = start;
    
    for (; iter_70066 < end; iter_70066++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70181 = n_m_62372;
        int64_t gtid_64209 = iter_70066;
        int64_t remnant_70182 = iter_70066 - gtid_64209;
        int64_t min_arg_69594 = mul64(jump_62368, gtid_64209);
        int64_t min_res_69595 = smin64(i_62378, min_arg_69594);
        int64_t defunc_0_g_res_69596 = add64((int64_t) 1, min_res_69595);
        bool init_idx_69597;
        int64_t init_idx_69598;
        int64_t init_idx_69599;
        bool loop_while_70067;
        int64_t low_70068;
        int64_t high_70069;
        
        loop_while_70067 = x_62379;
        low_70068 = (int64_t) 0;
        high_70069 = i_62378;
        while (loop_while_70067) {
            int64_t x_70070 = add64(low_70068, high_70069);
            int64_t mid_70071 = sdiv64(x_70070, (int64_t) 2);
            bool x_70072 = sle64((int64_t) 0, mid_70071);
            bool y_70073 = slt64(mid_70071, n_62364);
            bool bounds_check_70074 = x_70072 && y_70073;
            bool index_certs_70075;
            
            if (!bounds_check_70074) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_70071,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_70076 = ((int64_t *) mem_67609.mem)[mid_70071];
            bool cond_70077 = slt64(mid_id_70076, (int64_t) 0);
            int64_t mid_idx_70078;
            
            if (cond_70077) {
                mid_idx_70078 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_70078 = mid_id_70076;
            }
            
            bool cond_70079 = sle64(defunc_0_g_res_69596, mid_idx_70078);
            int64_t loopres_70080;
            int64_t loopres_70081;
            
            if (cond_70079) {
                int64_t loopres_t_res_70082 = sub64(mid_70071, (int64_t) 1);
                
                loopres_70080 = low_70068;
                loopres_70081 = loopres_t_res_70082;
            } else {
                int64_t loopres_f_res_70083 = add64((int64_t) 1, mid_70071);
                
                loopres_70080 = loopres_f_res_70083;
                loopres_70081 = high_70069;
            }
            
            bool loop_cond_70084 = sle64(loopres_70080, loopres_70081);
            bool loop_while_tmp_70183 = loop_cond_70084;
            int64_t low_tmp_70184 = loopres_70080;
            int64_t high_tmp_70185 = loopres_70081;
            
            loop_while_70067 = loop_while_tmp_70183;
            low_70068 = low_tmp_70184;
            high_70069 = high_tmp_70185;
        }
        init_idx_69597 = loop_while_70067;
        init_idx_69598 = low_70068;
        init_idx_69599 = high_70069;
        
        bool idx_69618;
        int64_t idx_69619;
        int64_t idx_69620;
        int64_t idx_69621;
        bool loop_while_70085;
        int64_t l_idx_70086;
        int64_t r_idx_70087;
        int64_t span_70088;
        
        loop_while_70085 = loop_cond_62389;
        l_idx_70086 = init_idx_69598;
        r_idx_70087 = init_idx_69598;
        span_70088 = (int64_t) 1;
        while (loop_while_70085) {
            int64_t max_arg_70089 = sub64(l_idx_70086, (int64_t) 1);
            int64_t max_res_70090 = smax64((int64_t) 0, max_arg_70089);
            int64_t min_arg_70091 = add64((int64_t) 1, r_idx_70087);
            int64_t min_res_70092 = smin64(min_arg_64396, min_arg_70091);
            bool x_70093 = sle64((int64_t) 0, max_res_70090);
            bool y_70094 = slt64(max_res_70090, n_62364);
            bool bounds_check_70095 = x_70093 && y_70094;
            bool index_certs_70096;
            
            if (!bounds_check_70095) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70090,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70097 = ((int64_t *) mem_67609.mem)[max_res_70090];
            int64_t abs_arg_70098 = sub64(x_70097, defunc_0_g_res_69596);
            int64_t abs_res_70099 = abs64(abs_arg_70098);
            bool x_70100 = sle64((int64_t) 0, min_res_70092);
            bool y_70101 = slt64(min_res_70092, n_62364);
            bool bounds_check_70102 = x_70100 && y_70101;
            bool index_certs_70103;
            
            if (!bounds_check_70102) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70092,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70104 = ((int64_t *) mem_67609.mem)[min_res_70092];
            int64_t abs_arg_70105 = sub64(x_70104, defunc_0_g_res_69596);
            int64_t abs_res_70106 = abs64(abs_arg_70105);
            bool cond_70107 = max_res_70090 == l_idx_70086;
            int64_t loopres_70108;
            int64_t loopres_70109;
            int64_t loopres_70110;
            
            if (cond_70107) {
                loopres_70108 = l_idx_70086;
                loopres_70109 = r_idx_70087;
                loopres_70110 = min_res_62384;
            } else {
                bool cond_70111 = slt64(abs_res_70099, abs_res_70106);
                bool cond_f_res_70112 = min_res_70092 == r_idx_70087;
                bool x_70113 = !cond_70111;
                bool y_70114 = cond_f_res_70112 && x_70113;
                bool cond_70115 = cond_70111 || y_70114;
                int64_t loopres_f_res_70116;
                
                if (cond_70115) {
                    loopres_f_res_70116 = max_res_70090;
                } else {
                    loopres_f_res_70116 = l_idx_70086;
                }
                
                int64_t loopres_f_res_70117;
                
                if (cond_70115) {
                    loopres_f_res_70117 = r_idx_70087;
                } else {
                    loopres_f_res_70117 = min_res_70092;
                }
                
                int64_t loopres_f_res_70118;
                
                if (cond_70115) {
                    int64_t loopres_f_res_t_res_70119 = add64((int64_t) 1,
                                                              span_70088);
                    
                    loopres_f_res_70118 = loopres_f_res_t_res_70119;
                } else {
                    int64_t loopres_f_res_f_res_70120 = add64((int64_t) 1,
                                                              span_70088);
                    
                    loopres_f_res_70118 = loopres_f_res_f_res_70120;
                }
                loopres_70108 = loopres_f_res_70116;
                loopres_70109 = loopres_f_res_70117;
                loopres_70110 = loopres_f_res_70118;
            }
            
            bool loop_cond_70121 = slt64(loopres_70110, min_res_62384);
            bool loop_while_tmp_70186 = loop_cond_70121;
            int64_t l_idx_tmp_70187 = loopres_70108;
            int64_t r_idx_tmp_70188 = loopres_70109;
            int64_t span_tmp_70189 = loopres_70110;
            
            loop_while_70085 = loop_while_tmp_70186;
            l_idx_70086 = l_idx_tmp_70187;
            r_idx_70087 = r_idx_tmp_70188;
            span_70088 = span_tmp_70189;
        }
        idx_69618 = loop_while_70085;
        idx_69619 = l_idx_70086;
        idx_69620 = r_idx_70087;
        idx_69621 = span_70088;
        
        int64_t min_res_69659 = smin64(min_arg_64397, idx_69619);
        int64_t x_69660 = add64(min_res_62384, min_res_69659);
        int64_t r_69661 = sub64(x_69660, (int64_t) 1);
        bool x_69662 = sle64((int64_t) 0, r_69661);
        bool y_69663 = slt64(r_69661, n_62364);
        bool bounds_check_69664 = x_69662 && y_69663;
        bool index_certs_69665;
        
        if (!bounds_check_69664) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_69661,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69666 = ((int64_t *) mem_67603.mem)[r_69661];
        int64_t abs_arg_69667 = sub64(x_69666, min_res_69595);
        int64_t abs_res_69668 = abs64(abs_arg_69667);
        bool x_69669 = sle64((int64_t) 0, min_res_69659);
        bool y_69670 = slt64(min_res_69659, n_62364);
        bool bounds_check_69671 = x_69669 && y_69670;
        bool index_certs_69672;
        
        if (!bounds_check_69671) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_69659,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_69673 = ((int64_t *) mem_67603.mem)[min_res_69659];
        int64_t abs_arg_69674 = sub64(x_69673, min_res_69595);
        int64_t abs_res_69675 = abs64(abs_arg_69674);
        int64_t max_res_69676 = smax64(abs_res_69668, abs_res_69675);
        float defunc_0_f_res_69677 = sitofp_i64_f32(max_res_69676);
        float defunc_1_f_res_69678 = max_res_64401 + defunc_0_f_res_69677;
        float defunc_0_f_res_69679 = sitofp_i64_f32(min_res_69595);
        float defunc_2_reduce_res_69680;
        float defunc_2_reduce_res_69681;
        float defunc_2_reduce_res_69682;
        int64_t flat_tid_64210 = (int64_t) 0;
        int32_t num_tasks_70190;
        struct futhark_mc_task_73987 futhark_mc_task_73987;
        
        futhark_mc_task_73987.ctx = ctx;
        futhark_mc_task_73987.free_last_res_64384 = last_res_64384;
        futhark_mc_task_73987.free_mem_67606 = mem_67606.mem;
        futhark_mc_task_73987.free_mem_67612 = mem_67612.mem;
        futhark_mc_task_73987.free_min_res_69659 = min_res_69659;
        futhark_mc_task_73987.free_defunc_1_f_res_69678 = defunc_1_f_res_69678;
        futhark_mc_task_73987.free_defunc_0_f_res_69679 = defunc_0_f_res_69679;
        futhark_mc_task_73987.retval_defunc_2_reduce_res_69680 =
            &defunc_2_reduce_res_69680;
        futhark_mc_task_73987.retval_defunc_2_reduce_res_69681 =
            &defunc_2_reduce_res_69681;
        futhark_mc_task_73987.retval_defunc_2_reduce_res_69682 =
            &defunc_2_reduce_res_69682;
        
        struct scheduler_segop futhark_mc_task_73987_task;
        
        futhark_mc_task_73987_task.args = &futhark_mc_task_73987;
        futhark_mc_task_73987_task.top_level_fn = futhark_mc_segred_task_73988;
        futhark_mc_task_73987_task.name = "futhark_mc_segred_task_73988";
        futhark_mc_task_73987_task.iterations = q_62366;
        futhark_mc_task_73987_task.task_time =
            &ctx->futhark_mc_segred_task_73988_total_time;
        futhark_mc_task_73987_task.task_iter =
            &ctx->futhark_mc_segred_task_73988_total_iter;
        futhark_mc_task_73987_task.sched = STATIC;
        futhark_mc_task_73987_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73988_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73987_task);
        
        if (futhark_mc_segred_task_73988_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_69709 = defunc_2_reduce_res_69680 * defunc_2_reduce_res_69682;
        float y_69710 = defunc_2_reduce_res_69681 * defunc_2_reduce_res_69681;
        float y_69711 = x_69709 - y_69710;
        float det1_69712 = 1.0F / y_69711;
        float a11_69713 = defunc_2_reduce_res_69682 * det1_69712;
        float negate_arg_69714 = defunc_2_reduce_res_69681 * det1_69712;
        float b11_69715 = 0.0F - negate_arg_69714;
        float c11_69716 = defunc_2_reduce_res_69680 * det1_69712;
        float defunc_2_reduce_res_69717;
        float defunc_2_reduce_res_69718;
        int64_t flat_tid_64212 = (int64_t) 0;
        int32_t num_tasks_70211;
        struct futhark_mc_task_73994 futhark_mc_task_73994;
        
        futhark_mc_task_73994.ctx = ctx;
        futhark_mc_task_73994.free_last_res_64384 = last_res_64384;
        futhark_mc_task_73994.free_mem_67600 = mem_67600.mem;
        futhark_mc_task_73994.free_mem_67606 = mem_67606.mem;
        futhark_mc_task_73994.free_mem_67612 = mem_67612.mem;
        futhark_mc_task_73994.free_min_res_69659 = min_res_69659;
        futhark_mc_task_73994.free_defunc_1_f_res_69678 = defunc_1_f_res_69678;
        futhark_mc_task_73994.free_defunc_0_f_res_69679 = defunc_0_f_res_69679;
        futhark_mc_task_73994.free_a11_69713 = a11_69713;
        futhark_mc_task_73994.free_b11_69715 = b11_69715;
        futhark_mc_task_73994.free_c11_69716 = c11_69716;
        futhark_mc_task_73994.retval_defunc_2_reduce_res_69717 =
            &defunc_2_reduce_res_69717;
        futhark_mc_task_73994.retval_defunc_2_reduce_res_69718 =
            &defunc_2_reduce_res_69718;
        
        struct scheduler_segop futhark_mc_task_73994_task;
        
        futhark_mc_task_73994_task.args = &futhark_mc_task_73994;
        futhark_mc_task_73994_task.top_level_fn = futhark_mc_segred_task_73995;
        futhark_mc_task_73994_task.name = "futhark_mc_segred_task_73995";
        futhark_mc_task_73994_task.iterations = q_62366;
        futhark_mc_task_73994_task.task_time =
            &ctx->futhark_mc_segred_task_73995_total_time;
        futhark_mc_task_73994_task.task_iter =
            &ctx->futhark_mc_segred_task_73995_total_iter;
        futhark_mc_task_73994_task.sched = STATIC;
        futhark_mc_task_73994_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73995_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73994_task);
        
        if (futhark_mc_segred_task_73995_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67615.mem)[gtid_64209] = defunc_2_reduce_res_69717;
        ((float *) mem_67618.mem)[gtid_64209] = defunc_2_reduce_res_69718;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73986_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73986_end -
                 futhark_mc_segmap_parloop_73986_start;
        
        ctx->futhark_mc_segmap_parloop_73986_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73986_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73986_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73984(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64208 = tid;
    int num_tasks_69939 = info.nsubtasks;
    struct futhark_mc_task_73980 *futhark_mc_task_73980 =
                                 (struct futhark_mc_task_73980 *) args;
    struct futhark_context *ctx = futhark_mc_task_73980->ctx;
    uint64_t futhark_mc_segmap_nested_task_73984_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73984_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_73980->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73980->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73980->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73980->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73980->free_i_62378;
    bool x_62379 = futhark_mc_task_73980->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73980->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73980->free_loop_cond_62389;
    int64_t last_res_64384 = futhark_mc_task_73980->free_last_res_64384;
    int64_t min_arg_64396 = futhark_mc_task_73980->free_min_arg_64396;
    int64_t min_arg_64397 = futhark_mc_task_73980->free_min_arg_64397;
    float max_res_64401 = futhark_mc_task_73980->free_max_res_64401;
    struct memblock mem_67600 = {.desc ="mem_67600", .mem =
                                 futhark_mc_task_73980->free_mem_67600, .size =
                                 0, .references =NULL};
    struct memblock mem_67603 = {.desc ="mem_67603", .mem =
                                 futhark_mc_task_73980->free_mem_67603, .size =
                                 0, .references =NULL};
    struct memblock mem_67606 = {.desc ="mem_67606", .mem =
                                 futhark_mc_task_73980->free_mem_67606, .size =
                                 0, .references =NULL};
    struct memblock mem_67609 = {.desc ="mem_67609", .mem =
                                 futhark_mc_task_73980->free_mem_67609, .size =
                                 0, .references =NULL};
    struct memblock mem_67612 = {.desc ="mem_67612", .mem =
                                 futhark_mc_task_73980->free_mem_67612, .size =
                                 0, .references =NULL};
    struct memblock mem_67615 = {.desc ="mem_67615", .mem =
                                 futhark_mc_task_73980->free_mem_67615, .size =
                                 0, .references =NULL};
    struct memblock mem_67618 = {.desc ="mem_67618", .mem =
                                 futhark_mc_task_73980->free_mem_67618, .size =
                                 0, .references =NULL};
    int64_t iter_70066;
    struct futhark_mc_segmap_parloop_struct_73985
    futhark_mc_segmap_parloop_struct_73985;
    
    futhark_mc_segmap_parloop_struct_73985.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73985.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73985.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73985.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73985.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73985.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73985.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73985.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73985.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73985.free_last_res_64384 = last_res_64384;
    futhark_mc_segmap_parloop_struct_73985.free_min_arg_64396 = min_arg_64396;
    futhark_mc_segmap_parloop_struct_73985.free_min_arg_64397 = min_arg_64397;
    futhark_mc_segmap_parloop_struct_73985.free_max_res_64401 = max_res_64401;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67600 = mem_67600.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67603 = mem_67603.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67606 = mem_67606.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67609 = mem_67609.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67612 = mem_67612.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67615 = mem_67615.mem;
    futhark_mc_segmap_parloop_struct_73985.free_mem_67618 = mem_67618.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73986_task;
    
    futhark_mc_segmap_parloop_73986_task.name =
        "futhark_mc_segmap_parloop_73986";
    futhark_mc_segmap_parloop_73986_task.fn = futhark_mc_segmap_parloop_73986;
    futhark_mc_segmap_parloop_73986_task.args =
        &futhark_mc_segmap_parloop_struct_73985;
    futhark_mc_segmap_parloop_73986_task.iterations = iterations;
    futhark_mc_segmap_parloop_73986_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73986_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73986_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73986_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73986_task);
    
    if (futhark_mc_segmap_parloop_73986_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73986_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73986_total_end -
                 futhark_mc_segmap_parloop_73986_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73986_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73986_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73986_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73984_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73984_end -
                 futhark_mc_segmap_nested_task_73984_start;
        
        ctx->futhark_mc_segmap_nested_task_73984_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73984_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73984_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73952(void *args, int64_t start,
                                           int64_t end, int flat_tid_64196,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73951
    *futhark_mc_segmap_parloop_struct_73951 =
    (struct futhark_mc_segmap_parloop_struct_73951 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73951->ctx;
    uint64_t futhark_mc_segmap_parloop_73952_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73952_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_73951->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_73951->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_73951->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_73951->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_73951->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_73951->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_73951->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_73951->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_73951->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_73951->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_73951->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67595 =
            futhark_mc_segmap_parloop_struct_73951->free_bytes_67595;
    int64_t bytes_67598 =
            futhark_mc_segmap_parloop_struct_73951->free_bytes_67598;
    int64_t bytes_67610 =
            futhark_mc_segmap_parloop_struct_73951->free_bytes_67610;
    int64_t bytes_67613 =
            futhark_mc_segmap_parloop_struct_73951->free_bytes_67613;
    struct memblock mem_67742 = {.desc ="mem_67742", .mem =
                                 futhark_mc_segmap_parloop_struct_73951->free_mem_67742,
                                 .size =0, .references =NULL};
    struct memblock mem_67746 = {.desc ="mem_67746", .mem =
                                 futhark_mc_segmap_parloop_struct_73951->free_mem_67746,
                                 .size =0, .references =NULL};
    size_t mem_67597_cached_sizze_73953 = 0;
    char *mem_67597 = NULL;
    size_t mem_67600_cached_sizze_73954 = 0;
    char *mem_67600 = NULL;
    size_t mem_67603_cached_sizze_73955 = 0;
    char *mem_67603 = NULL;
    size_t mem_67606_cached_sizze_73956 = 0;
    char *mem_67606 = NULL;
    size_t mem_67609_cached_sizze_73957 = 0;
    char *mem_67609 = NULL;
    size_t mem_67612_cached_sizze_73958 = 0;
    char *mem_67612 = NULL;
    size_t mem_67615_cached_sizze_73959 = 0;
    char *mem_67615 = NULL;
    size_t mem_67618_cached_sizze_73960 = 0;
    char *mem_67618 = NULL;
    int64_t iterations = end - start;
    int64_t iter_69575 = start;
    
    if (mem_67597_cached_sizze_73953 < (size_t) bytes_67595) {
        mem_67597 = realloc(mem_67597, bytes_67595);
        mem_67597_cached_sizze_73953 = bytes_67595;
    }
    if (mem_67600_cached_sizze_73954 < (size_t) bytes_67598) {
        mem_67600 = realloc(mem_67600, bytes_67598);
        mem_67600_cached_sizze_73954 = bytes_67598;
    }
    if (mem_67603_cached_sizze_73955 < (size_t) bytes_67595) {
        mem_67603 = realloc(mem_67603, bytes_67595);
        mem_67603_cached_sizze_73955 = bytes_67595;
    }
    if (mem_67606_cached_sizze_73956 < (size_t) bytes_67598) {
        mem_67606 = realloc(mem_67606, bytes_67598);
        mem_67606_cached_sizze_73956 = bytes_67598;
    }
    if (mem_67609_cached_sizze_73957 < (size_t) bytes_67595) {
        mem_67609 = realloc(mem_67609, bytes_67595);
        mem_67609_cached_sizze_73957 = bytes_67595;
    }
    if (mem_67612_cached_sizze_73958 < (size_t) bytes_67610) {
        mem_67612 = realloc(mem_67612, bytes_67610);
        mem_67612_cached_sizze_73958 = bytes_67610;
    }
    if (mem_67615_cached_sizze_73959 < (size_t) bytes_67613) {
        mem_67615 = realloc(mem_67615, bytes_67613);
        mem_67615_cached_sizze_73959 = bytes_67613;
    }
    if (mem_67618_cached_sizze_73960 < (size_t) bytes_67613) {
        mem_67618 = realloc(mem_67618, bytes_67613);
        mem_67618_cached_sizze_73960 = bytes_67613;
    }
    for (; iter_69575 < end; iter_69575++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69907 = m_62363;
        int64_t gtid_64197 = iter_69575;
        int64_t remnant_69908 = iter_69575 - gtid_64197;
        int64_t flat_tid_64198 = (int64_t) 0;
        int32_t num_tasks_69909;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_73961 futhark_mc_task_73961;
        
        futhark_mc_task_73961.ctx = ctx;
        futhark_mc_task_73961.free_n_62364 = n_62364;
        futhark_mc_task_73961.free_gtid_64197 = gtid_64197;
        futhark_mc_task_73961.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_73961.free_mem_67597 = mem_67597;
        
        struct scheduler_segop futhark_mc_task_73961_task;
        
        futhark_mc_task_73961_task.args = &futhark_mc_task_73961;
        futhark_mc_task_73961_task.top_level_fn = futhark_mc_segscan_task_73962;
        futhark_mc_task_73961_task.name = "futhark_mc_segscan_task_73962";
        futhark_mc_task_73961_task.iterations = n_62364;
        futhark_mc_task_73961_task.task_time =
            &ctx->futhark_mc_segscan_task_73962_total_time;
        futhark_mc_task_73961_task.task_iter =
            &ctx->futhark_mc_segscan_task_73962_total_iter;
        futhark_mc_task_73961_task.sched = STATIC;
        futhark_mc_task_73961_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_73962_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73961_task);
        
        if (futhark_mc_segscan_task_73962_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_64384 = ((int64_t *) mem_67597)[i_62378];
        
        for (int64_t i_69923 = 0; i_69923 < n_62364; i_69923++) {
            ((float *) mem_67600)[i_69923] = 0.0F;
        }
        for (int64_t i_69924 = 0; i_69924 < n_62364; i_69924++) {
            ((int64_t *) mem_67603)[i_69924] = (int64_t) -1;
        }
        
        int64_t flat_tid_64200 = (int64_t) 0;
        int32_t num_tasks_69925;
        struct futhark_mc_task_73968 futhark_mc_task_73968;
        
        futhark_mc_task_73968.ctx = ctx;
        futhark_mc_task_73968.free_n_62364 = n_62364;
        futhark_mc_task_73968.free_gtid_64197 = gtid_64197;
        futhark_mc_task_73968.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_73968.free_mem_67597 = mem_67597;
        futhark_mc_task_73968.free_mem_67600 = mem_67600;
        futhark_mc_task_73968.free_mem_67603 = mem_67603;
        
        struct scheduler_segop futhark_mc_task_73968_task;
        
        futhark_mc_task_73968_task.args = &futhark_mc_task_73968;
        futhark_mc_task_73968_task.top_level_fn = futhark_mc_segmap_task_73969;
        futhark_mc_task_73968_task.name = "futhark_mc_segmap_task_73969";
        futhark_mc_task_73968_task.iterations = n_62364;
        futhark_mc_task_73968_task.task_time =
            &ctx->futhark_mc_segmap_task_73969_total_time;
        futhark_mc_task_73968_task.task_iter =
            &ctx->futhark_mc_segmap_task_73969_total_iter;
        futhark_mc_task_73968_task.sched = STATIC;
        futhark_mc_task_73968_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73969_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73968_task);
        
        if (futhark_mc_segmap_task_73969_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_64396 = sub64(last_res_64384, (int64_t) 1);
        int64_t min_arg_64397 = sub64(last_res_64384, min_res_62384);
        float i64_res_64398 = sitofp_i64_f32(last_res_64384);
        float x_64399 = i64_res_62390 - i64_res_64398;
        float max_arg_64400 = x_64399 / 2.0F;
        float max_res_64401 = fmax32(0.0F, max_arg_64400);
        int64_t flat_tid_64202 = (int64_t) 0;
        int32_t num_tasks_69931;
        struct futhark_mc_task_73972 futhark_mc_task_73972;
        
        futhark_mc_task_73972.ctx = ctx;
        futhark_mc_task_73972.free_n_62364 = n_62364;
        futhark_mc_task_73972.free_mem_67603 = mem_67603;
        futhark_mc_task_73972.free_mem_67606 = mem_67606;
        futhark_mc_task_73972.free_mem_67609 = mem_67609;
        
        struct scheduler_segop futhark_mc_task_73972_task;
        
        futhark_mc_task_73972_task.args = &futhark_mc_task_73972;
        futhark_mc_task_73972_task.top_level_fn = futhark_mc_segmap_task_73973;
        futhark_mc_task_73972_task.name = "futhark_mc_segmap_task_73973";
        futhark_mc_task_73972_task.iterations = n_62364;
        futhark_mc_task_73972_task.task_time =
            &ctx->futhark_mc_segmap_task_73973_total_time;
        futhark_mc_task_73972_task.task_iter =
            &ctx->futhark_mc_segmap_task_73973_total_iter;
        futhark_mc_task_73972_task.sched = STATIC;
        futhark_mc_task_73972_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73973_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73972_task);
        
        if (futhark_mc_segmap_task_73973_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64204 = (int64_t) 0;
        int32_t num_tasks_69935;
        struct futhark_mc_task_73976 futhark_mc_task_73976;
        
        futhark_mc_task_73976.ctx = ctx;
        futhark_mc_task_73976.free_q_62366 = q_62366;
        futhark_mc_task_73976.free_last_res_64384 = last_res_64384;
        futhark_mc_task_73976.free_mem_67612 = mem_67612;
        
        struct scheduler_segop futhark_mc_task_73976_task;
        
        futhark_mc_task_73976_task.args = &futhark_mc_task_73976;
        futhark_mc_task_73976_task.top_level_fn = futhark_mc_segmap_task_73977;
        futhark_mc_task_73976_task.name = "futhark_mc_segmap_task_73977";
        futhark_mc_task_73976_task.iterations = q_62366;
        futhark_mc_task_73976_task.task_time =
            &ctx->futhark_mc_segmap_task_73977_total_time;
        futhark_mc_task_73976_task.task_iter =
            &ctx->futhark_mc_segmap_task_73977_total_iter;
        futhark_mc_task_73976_task.sched = STATIC;
        futhark_mc_task_73976_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73977_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73976_task);
        
        if (futhark_mc_segmap_task_73977_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64206 = (int64_t) 0;
        int32_t num_tasks_69939;
        int64_t flat_tid_64208 = (int64_t) 0;
        struct futhark_mc_task_73980 futhark_mc_task_73980;
        
        futhark_mc_task_73980.ctx = ctx;
        futhark_mc_task_73980.free_n_62364 = n_62364;
        futhark_mc_task_73980.free_q_62366 = q_62366;
        futhark_mc_task_73980.free_jump_62368 = jump_62368;
        futhark_mc_task_73980.free_n_m_62372 = n_m_62372;
        futhark_mc_task_73980.free_i_62378 = i_62378;
        futhark_mc_task_73980.free_x_62379 = x_62379;
        futhark_mc_task_73980.free_min_res_62384 = min_res_62384;
        futhark_mc_task_73980.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_73980.free_last_res_64384 = last_res_64384;
        futhark_mc_task_73980.free_min_arg_64396 = min_arg_64396;
        futhark_mc_task_73980.free_min_arg_64397 = min_arg_64397;
        futhark_mc_task_73980.free_max_res_64401 = max_res_64401;
        futhark_mc_task_73980.free_mem_67600 = mem_67600;
        futhark_mc_task_73980.free_mem_67603 = mem_67603;
        futhark_mc_task_73980.free_mem_67606 = mem_67606;
        futhark_mc_task_73980.free_mem_67609 = mem_67609;
        futhark_mc_task_73980.free_mem_67612 = mem_67612;
        futhark_mc_task_73980.free_mem_67615 = mem_67615;
        futhark_mc_task_73980.free_mem_67618 = mem_67618;
        
        struct scheduler_segop futhark_mc_task_73980_task;
        
        futhark_mc_task_73980_task.args = &futhark_mc_task_73980;
        futhark_mc_task_73980_task.top_level_fn = futhark_mc_segmap_task_73981;
        futhark_mc_task_73980_task.name = "futhark_mc_segmap_task_73981";
        futhark_mc_task_73980_task.iterations = n_m_62372;
        futhark_mc_task_73980_task.task_time =
            &ctx->futhark_mc_segmap_task_73981_total_time;
        futhark_mc_task_73980_task.task_iter =
            &ctx->futhark_mc_segmap_task_73981_total_iter;
        futhark_mc_task_73980_task.sched = DYNAMIC;
        futhark_mc_task_73980_task.nested_fn =
            futhark_mc_segmap_nested_task_73984;
        
        int futhark_mc_segmap_task_73981_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73980_task);
        
        if (futhark_mc_segmap_task_73981_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67742.mem + gtid_64197 * n_m_62372 * (int64_t) 4,
                mem_67615 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_67746.mem + gtid_64197 * n_m_62372 * (int64_t) 4,
                mem_67618 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67597);
    free(mem_67600);
    free(mem_67603);
    free(mem_67606);
    free(mem_67609);
    free(mem_67612);
    free(mem_67615);
    free(mem_67618);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73952_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73952_end -
                 futhark_mc_segmap_parloop_73952_start;
        
        ctx->futhark_mc_segmap_parloop_73952_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73952_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73952_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73950(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64196 = tid;
    int num_tasks_69354 = info.nsubtasks;
    struct futhark_mc_task_73938 *futhark_mc_task_73938 =
                                 (struct futhark_mc_task_73938 *) args;
    struct futhark_context *ctx = futhark_mc_task_73938->ctx;
    uint64_t futhark_mc_segmap_nested_task_73950_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73950_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_73938->free_m_62363;
    int64_t n_62364 = futhark_mc_task_73938->free_n_62364;
    int64_t q_62366 = futhark_mc_task_73938->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_73938->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_73938->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_73938->free_i_62378;
    bool x_62379 = futhark_mc_task_73938->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_73938->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_73938->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_73938->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_73938->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67595 = futhark_mc_task_73938->free_bytes_67595;
    int64_t bytes_67598 = futhark_mc_task_73938->free_bytes_67598;
    int64_t bytes_67610 = futhark_mc_task_73938->free_bytes_67610;
    int64_t bytes_67613 = futhark_mc_task_73938->free_bytes_67613;
    struct memblock mem_67742 = {.desc ="mem_67742", .mem =
                                 futhark_mc_task_73938->free_mem_67742, .size =
                                 0, .references =NULL};
    struct memblock mem_67746 = {.desc ="mem_67746", .mem =
                                 futhark_mc_task_73938->free_mem_67746, .size =
                                 0, .references =NULL};
    int64_t iter_69575;
    struct futhark_mc_segmap_parloop_struct_73951
    futhark_mc_segmap_parloop_struct_73951;
    
    futhark_mc_segmap_parloop_struct_73951.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73951.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_73951.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_73951.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_73951.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_73951.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_73951.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_73951.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_73951.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_73951.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_73951.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_73951.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_73951.free_bytes_67595 = bytes_67595;
    futhark_mc_segmap_parloop_struct_73951.free_bytes_67598 = bytes_67598;
    futhark_mc_segmap_parloop_struct_73951.free_bytes_67610 = bytes_67610;
    futhark_mc_segmap_parloop_struct_73951.free_bytes_67613 = bytes_67613;
    futhark_mc_segmap_parloop_struct_73951.free_mem_67742 = mem_67742.mem;
    futhark_mc_segmap_parloop_struct_73951.free_mem_67746 = mem_67746.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73952_task;
    
    futhark_mc_segmap_parloop_73952_task.name =
        "futhark_mc_segmap_parloop_73952";
    futhark_mc_segmap_parloop_73952_task.fn = futhark_mc_segmap_parloop_73952;
    futhark_mc_segmap_parloop_73952_task.args =
        &futhark_mc_segmap_parloop_struct_73951;
    futhark_mc_segmap_parloop_73952_task.iterations = iterations;
    futhark_mc_segmap_parloop_73952_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73952_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73952_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73952_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73952_task);
    
    if (futhark_mc_segmap_parloop_73952_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73952_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73952_total_end -
                 futhark_mc_segmap_parloop_73952_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73952_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73952_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73952_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73950_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73950_end -
                 futhark_mc_segmap_nested_task_73950_start;
        
        ctx->futhark_mc_segmap_nested_task_73950_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73950_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73950_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74000 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67747;
    int64_t free_bytes_67750;
    int64_t free_bytes_67762;
    int64_t free_bytes_67765;
    char *free_mem_67894;
    char *free_mem_67898;
};
struct futhark_mc_segmap_parloop_struct_74002 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67747;
    int64_t free_bytes_67750;
    int64_t free_bytes_67762;
    int64_t free_bytes_67765;
    char *free_mem_67894;
    char *free_mem_67898;
};
static int futhark_mc_segmap_parloop_74003(void *args, int64_t start,
                                           int64_t end, int flat_tid_64735,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74002
    *futhark_mc_segmap_parloop_struct_74002 =
    (struct futhark_mc_segmap_parloop_struct_74002 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74002->ctx;
    uint64_t futhark_mc_segmap_parloop_74003_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74003_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74002->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74002->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74002->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74002->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74002->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74002->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74002->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74002->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74002->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74002->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74002->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67747 =
            futhark_mc_segmap_parloop_struct_74002->free_bytes_67747;
    int64_t bytes_67750 =
            futhark_mc_segmap_parloop_struct_74002->free_bytes_67750;
    int64_t bytes_67762 =
            futhark_mc_segmap_parloop_struct_74002->free_bytes_67762;
    int64_t bytes_67765 =
            futhark_mc_segmap_parloop_struct_74002->free_bytes_67765;
    struct memblock mem_67894 = {.desc ="mem_67894", .mem =
                                 futhark_mc_segmap_parloop_struct_74002->free_mem_67894,
                                 .size =0, .references =NULL};
    struct memblock mem_67898 = {.desc ="mem_67898", .mem =
                                 futhark_mc_segmap_parloop_struct_74002->free_mem_67898,
                                 .size =0, .references =NULL};
    size_t mem_67773_cached_sizze_74004 = 0;
    char *mem_67773 = NULL;
    size_t mem_67788_cached_sizze_74005 = 0;
    char *mem_67788 = NULL;
    size_t mem_67791_cached_sizze_74006 = 0;
    char *mem_67791 = NULL;
    size_t mem_67818_cached_sizze_74007 = 0;
    char *mem_67818 = NULL;
    size_t mem_67821_cached_sizze_74008 = 0;
    char *mem_67821 = NULL;
    size_t mem_67848_cached_sizze_74009 = 0;
    char *mem_67848 = NULL;
    size_t mem_67863_cached_sizze_74010 = 0;
    char *mem_67863 = NULL;
    size_t mem_67866_cached_sizze_74011 = 0;
    char *mem_67866 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70227 = start;
    
    if (mem_67773_cached_sizze_74004 < (size_t) bytes_67747) {
        mem_67773 = realloc(mem_67773, bytes_67747);
        mem_67773_cached_sizze_74004 = bytes_67747;
    }
    if (mem_67788_cached_sizze_74005 < (size_t) bytes_67750) {
        mem_67788 = realloc(mem_67788, bytes_67750);
        mem_67788_cached_sizze_74005 = bytes_67750;
    }
    if (mem_67791_cached_sizze_74006 < (size_t) bytes_67747) {
        mem_67791 = realloc(mem_67791, bytes_67747);
        mem_67791_cached_sizze_74006 = bytes_67747;
    }
    if (mem_67818_cached_sizze_74007 < (size_t) bytes_67750) {
        mem_67818 = realloc(mem_67818, bytes_67750);
        mem_67818_cached_sizze_74007 = bytes_67750;
    }
    if (mem_67821_cached_sizze_74008 < (size_t) bytes_67747) {
        mem_67821 = realloc(mem_67821, bytes_67747);
        mem_67821_cached_sizze_74008 = bytes_67747;
    }
    if (mem_67848_cached_sizze_74009 < (size_t) bytes_67762) {
        mem_67848 = realloc(mem_67848, bytes_67762);
        mem_67848_cached_sizze_74009 = bytes_67762;
    }
    if (mem_67863_cached_sizze_74010 < (size_t) bytes_67765) {
        mem_67863 = realloc(mem_67863, bytes_67765);
        mem_67863_cached_sizze_74010 = bytes_67765;
    }
    if (mem_67866_cached_sizze_74011 < (size_t) bytes_67765) {
        mem_67866 = realloc(mem_67866, bytes_67765);
        mem_67866_cached_sizze_74011 = bytes_67765;
    }
    for (; iter_70227 < end; iter_70227++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70452 = m_62363;
        int64_t gtid_64736 = iter_70227;
        int64_t remnant_70453 = iter_70227 - gtid_64736;
        int64_t discard_67145;
        int64_t scanacc_70229 = (int64_t) 0;
        
        for (int64_t i_70228 = 0; i_70228 < n_62364; i_70228++) {
            float x_70231 = ((float *) Y_mem_67460.mem)[gtid_64736 * n_62364 +
                                                        i_70228];
            bool isnan_res_70232;
            
            isnan_res_70232 = futrts_isnan32(x_70231);
            
            bool defunc_0_p_res_70233 = !isnan_res_70232;
            int64_t defunc_0_f_res_70234 = btoi_bool_i64(defunc_0_p_res_70233);
            int64_t defunc_1_op_res_70235 = add64(defunc_0_f_res_70234,
                                                  scanacc_70229);
            
            ((int64_t *) mem_67773)[i_70228] = defunc_1_op_res_70235;
            
            int64_t scanacc_tmp_70454 = defunc_1_op_res_70235;
            
            scanacc_70229 = scanacc_tmp_70454;
        }
        discard_67145 = scanacc_70229;
        
        int64_t last_res_62805 = ((int64_t *) mem_67773)[i_62378];
        
        for (int64_t i_70456 = 0; i_70456 < n_62364; i_70456++) {
            ((float *) mem_67788)[i_70456] = 0.0F;
        }
        for (int64_t i_70457 = 0; i_70457 < n_62364; i_70457++) {
            ((int64_t *) mem_67791)[i_70457] = (int64_t) -1;
        }
        for (int64_t write_iter_70237 = 0; write_iter_70237 < n_62364;
             write_iter_70237++) {
            float write_iv_70240 = ((float *) Y_mem_67460.mem)[gtid_64736 *
                                                               n_62364 +
                                                               write_iter_70237];
            bool isnan_res_70241;
            
            isnan_res_70241 = futrts_isnan32(write_iv_70240);
            
            bool defunc_0_p_res_70242 = !isnan_res_70241;
            int64_t defunc_1_f_res_70243;
            
            if (defunc_0_p_res_70242) {
                int64_t write_iv_70244 =
                        ((int64_t *) mem_67773)[write_iter_70237];
                int64_t defunc_1_f_res_t_res_70245 = sub64(write_iv_70244,
                                                           (int64_t) 1);
                
                defunc_1_f_res_70243 = defunc_1_f_res_t_res_70245;
            } else {
                defunc_1_f_res_70243 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70243) &&
                slt64(defunc_1_f_res_70243, n_62364)) {
                ((int64_t *) mem_67791)[defunc_1_f_res_70243] =
                    write_iter_70237;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70243) &&
                slt64(defunc_1_f_res_70243, n_62364)) {
                memmove(mem_67788 + defunc_1_f_res_70243 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_64736 * n_62364 +
                                           write_iter_70237) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62820 = sub64(last_res_62805, (int64_t) 1);
        int64_t min_arg_62821 = sub64(last_res_62805, min_res_62384);
        float i64_res_62822 = sitofp_i64_f32(last_res_62805);
        float x_62823 = i64_res_62390 - i64_res_62822;
        float max_arg_62824 = x_62823 / 2.0F;
        float max_res_62825 = fmax32(0.0F, max_arg_62824);
        
        for (int64_t i_70249 = 0; i_70249 < n_62364; i_70249++) {
            int64_t x_70252 = ((int64_t *) mem_67791)[i_70249];
            int64_t defunc_0_f_res_70253 = add64((int64_t) 1, x_70252);
            float defunc_0_f_res_70254 = sitofp_i64_f32(x_70252);
            
            ((float *) mem_67818)[i_70249] = defunc_0_f_res_70254;
            ((int64_t *) mem_67821)[i_70249] = defunc_0_f_res_70253;
        }
        for (int64_t i_70257 = 0; i_70257 < q_62366; i_70257++) {
            bool cond_70259 = sle64(last_res_62805, i_70257);
            float defunc_0_f_res_70260;
            
            if (cond_70259) {
                defunc_0_f_res_70260 = 0.0F;
            } else {
                defunc_0_f_res_70260 = 1.0F;
            }
            ((float *) mem_67848)[i_70257] = defunc_0_f_res_70260;
        }
        for (int64_t i_70262 = 0; i_70262 < n_m_62372; i_70262++) {
            int64_t min_arg_70265 = mul64(jump_62368, i_70262);
            int64_t min_res_70266 = smin64(i_62378, min_arg_70265);
            int64_t defunc_0_g_res_70267 = add64((int64_t) 1, min_res_70266);
            bool init_idx_70268;
            int64_t init_idx_70269;
            int64_t init_idx_70270;
            bool loop_while_70271;
            int64_t low_70272;
            int64_t high_70273;
            
            loop_while_70271 = x_62379;
            low_70272 = (int64_t) 0;
            high_70273 = i_62378;
            while (loop_while_70271) {
                int64_t x_70274 = add64(low_70272, high_70273);
                int64_t mid_70275 = sdiv64(x_70274, (int64_t) 2);
                bool x_70276 = sle64((int64_t) 0, mid_70275);
                bool y_70277 = slt64(mid_70275, n_62364);
                bool bounds_check_70278 = x_70276 && y_70277;
                bool index_certs_70279;
                
                if (!bounds_check_70278) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_70275,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_70280 = ((int64_t *) mem_67821)[mid_70275];
                bool cond_70281 = slt64(mid_id_70280, (int64_t) 0);
                int64_t mid_idx_70282;
                
                if (cond_70281) {
                    mid_idx_70282 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_70282 = mid_id_70280;
                }
                
                bool cond_70283 = sle64(defunc_0_g_res_70267, mid_idx_70282);
                int64_t loopres_70284;
                int64_t loopres_70285;
                
                if (cond_70283) {
                    int64_t loopres_t_res_70286 = sub64(mid_70275, (int64_t) 1);
                    
                    loopres_70284 = low_70272;
                    loopres_70285 = loopres_t_res_70286;
                } else {
                    int64_t loopres_f_res_70287 = add64((int64_t) 1, mid_70275);
                    
                    loopres_70284 = loopres_f_res_70287;
                    loopres_70285 = high_70273;
                }
                
                bool loop_cond_70288 = sle64(loopres_70284, loopres_70285);
                bool loop_while_tmp_70465 = loop_cond_70288;
                int64_t low_tmp_70466 = loopres_70284;
                int64_t high_tmp_70467 = loopres_70285;
                
                loop_while_70271 = loop_while_tmp_70465;
                low_70272 = low_tmp_70466;
                high_70273 = high_tmp_70467;
            }
            init_idx_70268 = loop_while_70271;
            init_idx_70269 = low_70272;
            init_idx_70270 = high_70273;
            
            bool idx_70289;
            int64_t idx_70290;
            int64_t idx_70291;
            int64_t idx_70292;
            bool loop_while_70293;
            int64_t l_idx_70294;
            int64_t r_idx_70295;
            int64_t span_70296;
            
            loop_while_70293 = loop_cond_62389;
            l_idx_70294 = init_idx_70269;
            r_idx_70295 = init_idx_70269;
            span_70296 = (int64_t) 1;
            while (loop_while_70293) {
                int64_t max_arg_70297 = sub64(l_idx_70294, (int64_t) 1);
                int64_t max_res_70298 = smax64((int64_t) 0, max_arg_70297);
                int64_t min_arg_70299 = add64((int64_t) 1, r_idx_70295);
                int64_t min_res_70300 = smin64(min_arg_62820, min_arg_70299);
                bool x_70301 = sle64((int64_t) 0, max_res_70298);
                bool y_70302 = slt64(max_res_70298, n_62364);
                bool bounds_check_70303 = x_70301 && y_70302;
                bool index_certs_70304;
                
                if (!bounds_check_70303) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_70298,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_70305 = ((int64_t *) mem_67821)[max_res_70298];
                int64_t abs_arg_70306 = sub64(x_70305, defunc_0_g_res_70267);
                int64_t abs_res_70307 = abs64(abs_arg_70306);
                bool x_70308 = sle64((int64_t) 0, min_res_70300);
                bool y_70309 = slt64(min_res_70300, n_62364);
                bool bounds_check_70310 = x_70308 && y_70309;
                bool index_certs_70311;
                
                if (!bounds_check_70310) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_70300,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_70312 = ((int64_t *) mem_67821)[min_res_70300];
                int64_t abs_arg_70313 = sub64(x_70312, defunc_0_g_res_70267);
                int64_t abs_res_70314 = abs64(abs_arg_70313);
                bool cond_70315 = max_res_70298 == l_idx_70294;
                int64_t loopres_70316;
                int64_t loopres_70317;
                int64_t loopres_70318;
                
                if (cond_70315) {
                    loopres_70316 = l_idx_70294;
                    loopres_70317 = r_idx_70295;
                    loopres_70318 = min_res_62384;
                } else {
                    bool cond_70319 = slt64(abs_res_70307, abs_res_70314);
                    bool cond_f_res_70320 = min_res_70300 == r_idx_70295;
                    bool x_70321 = !cond_70319;
                    bool y_70322 = cond_f_res_70320 && x_70321;
                    bool cond_70323 = cond_70319 || y_70322;
                    int64_t loopres_f_res_70324;
                    
                    if (cond_70323) {
                        loopres_f_res_70324 = max_res_70298;
                    } else {
                        loopres_f_res_70324 = l_idx_70294;
                    }
                    
                    int64_t loopres_f_res_70325;
                    
                    if (cond_70323) {
                        loopres_f_res_70325 = r_idx_70295;
                    } else {
                        loopres_f_res_70325 = min_res_70300;
                    }
                    
                    int64_t loopres_f_res_70326;
                    
                    if (cond_70323) {
                        int64_t loopres_f_res_t_res_70327 = add64((int64_t) 1,
                                                                  span_70296);
                        
                        loopres_f_res_70326 = loopres_f_res_t_res_70327;
                    } else {
                        int64_t loopres_f_res_f_res_70328 = add64((int64_t) 1,
                                                                  span_70296);
                        
                        loopres_f_res_70326 = loopres_f_res_f_res_70328;
                    }
                    loopres_70316 = loopres_f_res_70324;
                    loopres_70317 = loopres_f_res_70325;
                    loopres_70318 = loopres_f_res_70326;
                }
                
                bool loop_cond_70329 = slt64(loopres_70318, min_res_62384);
                bool loop_while_tmp_70468 = loop_cond_70329;
                int64_t l_idx_tmp_70469 = loopres_70316;
                int64_t r_idx_tmp_70470 = loopres_70317;
                int64_t span_tmp_70471 = loopres_70318;
                
                loop_while_70293 = loop_while_tmp_70468;
                l_idx_70294 = l_idx_tmp_70469;
                r_idx_70295 = r_idx_tmp_70470;
                span_70296 = span_tmp_70471;
            }
            idx_70289 = loop_while_70293;
            idx_70290 = l_idx_70294;
            idx_70291 = r_idx_70295;
            idx_70292 = span_70296;
            
            int64_t min_res_70330 = smin64(min_arg_62821, idx_70290);
            int64_t x_70331 = add64(min_res_62384, min_res_70330);
            int64_t r_70332 = sub64(x_70331, (int64_t) 1);
            bool x_70333 = sle64((int64_t) 0, r_70332);
            bool y_70334 = slt64(r_70332, n_62364);
            bool bounds_check_70335 = x_70333 && y_70334;
            bool index_certs_70336;
            
            if (!bounds_check_70335) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_70332,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70337 = ((int64_t *) mem_67791)[r_70332];
            int64_t abs_arg_70338 = sub64(x_70337, min_res_70266);
            int64_t abs_res_70339 = abs64(abs_arg_70338);
            bool x_70340 = sle64((int64_t) 0, min_res_70330);
            bool y_70341 = slt64(min_res_70330, n_62364);
            bool bounds_check_70342 = x_70340 && y_70341;
            bool index_certs_70343;
            
            if (!bounds_check_70342) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70330,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70344 = ((int64_t *) mem_67791)[min_res_70330];
            int64_t abs_arg_70345 = sub64(x_70344, min_res_70266);
            int64_t abs_res_70346 = abs64(abs_arg_70345);
            int64_t max_res_70347 = smax64(abs_res_70339, abs_res_70346);
            float defunc_0_f_res_70348 = sitofp_i64_f32(max_res_70347);
            float defunc_1_f_res_70349 = max_res_62825 + defunc_0_f_res_70348;
            float defunc_0_f_res_70350 = sitofp_i64_f32(min_res_70266);
            float defunc_2_reduce_res_70351;
            float defunc_2_reduce_res_70352;
            float defunc_2_reduce_res_70353;
            float defunc_2_reduce_res_70354;
            float defunc_2_reduce_res_70355;
            float redout_70357;
            float redout_70358;
            float redout_70359;
            float redout_70360;
            float redout_70361;
            
            redout_70357 = 0.0F;
            redout_70358 = 0.0F;
            redout_70359 = 0.0F;
            redout_70360 = 0.0F;
            redout_70361 = 0.0F;
            for (int64_t i_70356 = 0; i_70356 < q_62366; i_70356++) {
                float x_70362 = ((float *) mem_67848)[i_70356];
                bool cond_70363 = sle64(last_res_62805, i_70356);
                float defunc_0_f_res_70364;
                
                if (cond_70363) {
                    defunc_0_f_res_70364 = 0.0F;
                } else {
                    int64_t i_70365 = add64(min_res_70330, i_70356);
                    float x_70366 = ((float *) mem_67818)[i_70365];
                    float defunc_0_f_res_f_res_70367 = 1.0F + x_70366;
                    
                    defunc_0_f_res_70364 = defunc_0_f_res_f_res_70367;
                }
                
                float x_j_70368 = defunc_0_f_res_70364 - defunc_0_f_res_70350;
                float abs_res_70369 = (float) fabs(x_j_70368);
                float tmp1_70370 = abs_res_70369 / defunc_1_f_res_70349;
                float x_70371 = tmp1_70370 * tmp1_70370;
                float y_70372 = tmp1_70370 * x_70371;
                float tmp2_70373 = 1.0F - y_70372;
                float x_70374 = tmp2_70373 * tmp2_70373;
                float tmp3_70375 = tmp2_70373 * x_70374;
                float w_j_70376 = x_70362 * tmp3_70375;
                float xw_j_70377 = x_j_70368 * w_j_70376;
                float x2w_j_70378 = x_j_70368 * xw_j_70377;
                float x3w_j_70379 = x_j_70368 * x2w_j_70378;
                float x4w_j_70380 = x_j_70368 * x3w_j_70379;
                float defunc_1_op_res_70381 = w_j_70376 + redout_70357;
                float defunc_1_op_res_70382 = xw_j_70377 + redout_70358;
                float defunc_1_op_res_70383 = x2w_j_70378 + redout_70359;
                float defunc_1_op_res_70384 = x3w_j_70379 + redout_70360;
                float defunc_1_op_res_70385 = x4w_j_70380 + redout_70361;
                float redout_tmp_70472 = defunc_1_op_res_70381;
                float redout_tmp_70473 = defunc_1_op_res_70382;
                float redout_tmp_70474 = defunc_1_op_res_70383;
                float redout_tmp_70475 = defunc_1_op_res_70384;
                float redout_tmp_70476 = defunc_1_op_res_70385;
                
                redout_70357 = redout_tmp_70472;
                redout_70358 = redout_tmp_70473;
                redout_70359 = redout_tmp_70474;
                redout_70360 = redout_tmp_70475;
                redout_70361 = redout_tmp_70476;
            }
            defunc_2_reduce_res_70351 = redout_70357;
            defunc_2_reduce_res_70352 = redout_70358;
            defunc_2_reduce_res_70353 = redout_70359;
            defunc_2_reduce_res_70354 = redout_70360;
            defunc_2_reduce_res_70355 = redout_70361;
            
            float x_70386 = defunc_2_reduce_res_70353 *
                  defunc_2_reduce_res_70355;
            float y_70387 = defunc_2_reduce_res_70354 *
                  defunc_2_reduce_res_70354;
            float a12_70388 = x_70386 - y_70387;
            float x_70389 = defunc_2_reduce_res_70353 *
                  defunc_2_reduce_res_70354;
            float y_70390 = defunc_2_reduce_res_70352 *
                  defunc_2_reduce_res_70355;
            float b12_70391 = x_70389 - y_70390;
            float x_70392 = defunc_2_reduce_res_70352 *
                  defunc_2_reduce_res_70354;
            float y_70393 = defunc_2_reduce_res_70353 *
                  defunc_2_reduce_res_70353;
            float c12_70394 = x_70392 - y_70393;
            float x_70395 = defunc_2_reduce_res_70351 *
                  defunc_2_reduce_res_70355;
            float b2_70396 = x_70395 - y_70393;
            float x_70397 = defunc_2_reduce_res_70352 *
                  defunc_2_reduce_res_70353;
            float y_70398 = defunc_2_reduce_res_70351 *
                  defunc_2_reduce_res_70354;
            float c2_70399 = x_70397 - y_70398;
            float x_70400 = defunc_2_reduce_res_70351 * a12_70388;
            float y_70401 = defunc_2_reduce_res_70352 * b12_70391;
            float x_70402 = x_70400 + y_70401;
            float y_70403 = defunc_2_reduce_res_70353 * c12_70394;
            float y_70404 = x_70402 + y_70403;
            float det_70405 = 1.0F / y_70404;
            float a12_70406 = a12_70388 * det_70405;
            float b12_70407 = b12_70391 * det_70405;
            float c12_70408 = c12_70394 * det_70405;
            float b2_70409 = b2_70396 * det_70405;
            float c2_70410 = c2_70399 * det_70405;
            float defunc_2_reduce_res_70411;
            float defunc_2_reduce_res_70412;
            float redout_70414;
            float redout_70415;
            
            redout_70414 = 0.0F;
            redout_70415 = 0.0F;
            for (int64_t i_70413 = 0; i_70413 < q_62366; i_70413++) {
                float x_70416 = ((float *) mem_67848)[i_70413];
                bool cond_70417 = sle64(last_res_62805, i_70413);
                float defunc_0_f_res_70418;
                
                if (cond_70417) {
                    defunc_0_f_res_70418 = 0.0F;
                } else {
                    int64_t i_70419 = add64(min_res_70330, i_70413);
                    float x_70420 = ((float *) mem_67818)[i_70419];
                    float defunc_0_f_res_f_res_70421 = 1.0F + x_70420;
                    
                    defunc_0_f_res_70418 = defunc_0_f_res_f_res_70421;
                }
                
                float x_j_70422 = defunc_0_f_res_70418 - defunc_0_f_res_70350;
                float abs_res_70423 = (float) fabs(x_j_70422);
                float tmp1_70424 = abs_res_70423 / defunc_1_f_res_70349;
                float x_70425 = tmp1_70424 * tmp1_70424;
                float y_70426 = tmp1_70424 * x_70425;
                float tmp2_70427 = 1.0F - y_70426;
                float x_70428 = tmp2_70427 * tmp2_70427;
                float tmp3_70429 = tmp2_70427 * x_70428;
                float tmp4_70430 = x_70416 * tmp3_70429;
                float defunc_1_f_res_70431 = x_j_70422 * tmp4_70430;
                float defunc_1_f_res_70432 = x_j_70422 * defunc_1_f_res_70431;
                float defunc_0_f_res_70433;
                
                if (cond_70417) {
                    defunc_0_f_res_70433 = 0.0F;
                } else {
                    int64_t i_70434 = add64(min_res_70330, i_70413);
                    float x_70435 = ((float *) mem_67788)[i_70434];
                    
                    defunc_0_f_res_70433 = x_70435;
                }
                
                float x_70436 = a12_70406 * tmp4_70430;
                float y_70437 = b12_70407 * defunc_1_f_res_70431;
                float x_70438 = x_70436 + y_70437;
                float y_70439 = c12_70408 * defunc_1_f_res_70432;
                float x_70440 = x_70438 + y_70439;
                float defunc_9_fit_fun_res_70441 = defunc_0_f_res_70433 *
                      x_70440;
                float x_70442 = b12_70407 * tmp4_70430;
                float y_70443 = b2_70409 * defunc_1_f_res_70431;
                float x_70444 = x_70442 + y_70443;
                float y_70445 = c2_70410 * defunc_1_f_res_70432;
                float x_70446 = x_70444 + y_70445;
                float defunc_9_slope_fun_res_70447 = defunc_0_f_res_70433 *
                      x_70446;
                float defunc_1_op_res_70448 = defunc_9_fit_fun_res_70441 +
                      redout_70414;
                float defunc_1_op_res_70449 = defunc_9_slope_fun_res_70447 +
                      redout_70415;
                float redout_tmp_70477 = defunc_1_op_res_70448;
                float redout_tmp_70478 = defunc_1_op_res_70449;
                
                redout_70414 = redout_tmp_70477;
                redout_70415 = redout_tmp_70478;
            }
            defunc_2_reduce_res_70411 = redout_70414;
            defunc_2_reduce_res_70412 = redout_70415;
            ((float *) mem_67863)[i_70262] = defunc_2_reduce_res_70411;
            ((float *) mem_67866)[i_70262] = defunc_2_reduce_res_70412;
        }
        memmove(mem_67894.mem + gtid_64736 * n_m_62372 * (int64_t) 4,
                mem_67863 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_67898.mem + gtid_64736 * n_m_62372 * (int64_t) 4,
                mem_67866 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67773);
    free(mem_67788);
    free(mem_67791);
    free(mem_67818);
    free(mem_67821);
    free(mem_67848);
    free(mem_67863);
    free(mem_67866);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74003_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74003_end -
                 futhark_mc_segmap_parloop_74003_start;
        
        ctx->futhark_mc_segmap_parloop_74003_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74003_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74003_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74001(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64735 = tid;
    int num_tasks_70226 = info.nsubtasks;
    struct futhark_mc_task_74000 *futhark_mc_task_74000 =
                                 (struct futhark_mc_task_74000 *) args;
    struct futhark_context *ctx = futhark_mc_task_74000->ctx;
    uint64_t futhark_mc_segmap_task_74001_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74001_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74000->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74000->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74000->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74000->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74000->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74000->free_i_62378;
    bool x_62379 = futhark_mc_task_74000->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74000->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74000->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74000->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74000->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67747 = futhark_mc_task_74000->free_bytes_67747;
    int64_t bytes_67750 = futhark_mc_task_74000->free_bytes_67750;
    int64_t bytes_67762 = futhark_mc_task_74000->free_bytes_67762;
    int64_t bytes_67765 = futhark_mc_task_74000->free_bytes_67765;
    struct memblock mem_67894 = {.desc ="mem_67894", .mem =
                                 futhark_mc_task_74000->free_mem_67894, .size =
                                 0, .references =NULL};
    struct memblock mem_67898 = {.desc ="mem_67898", .mem =
                                 futhark_mc_task_74000->free_mem_67898, .size =
                                 0, .references =NULL};
    int64_t iter_70227;
    struct futhark_mc_segmap_parloop_struct_74002
    futhark_mc_segmap_parloop_struct_74002;
    
    futhark_mc_segmap_parloop_struct_74002.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74002.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74002.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74002.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74002.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74002.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74002.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74002.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74002.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74002.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74002.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74002.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74002.free_bytes_67747 = bytes_67747;
    futhark_mc_segmap_parloop_struct_74002.free_bytes_67750 = bytes_67750;
    futhark_mc_segmap_parloop_struct_74002.free_bytes_67762 = bytes_67762;
    futhark_mc_segmap_parloop_struct_74002.free_bytes_67765 = bytes_67765;
    futhark_mc_segmap_parloop_struct_74002.free_mem_67894 = mem_67894.mem;
    futhark_mc_segmap_parloop_struct_74002.free_mem_67898 = mem_67898.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74003_task;
    
    futhark_mc_segmap_parloop_74003_task.name =
        "futhark_mc_segmap_parloop_74003";
    futhark_mc_segmap_parloop_74003_task.fn = futhark_mc_segmap_parloop_74003;
    futhark_mc_segmap_parloop_74003_task.args =
        &futhark_mc_segmap_parloop_struct_74002;
    futhark_mc_segmap_parloop_74003_task.iterations = iterations;
    futhark_mc_segmap_parloop_74003_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74003_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74003_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74003_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74003_task);
    
    if (futhark_mc_segmap_parloop_74003_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74003_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74003_total_end -
                 futhark_mc_segmap_parloop_74003_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74003_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74003_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74003_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74001_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74001_end -
                 futhark_mc_segmap_task_74001_start;
        
        ctx->futhark_mc_segmap_task_74001_runs[tid]++;
        ctx->futhark_mc_segmap_task_74001_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74001_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74013 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67747;
    int64_t free_bytes_67750;
    int64_t free_bytes_67762;
    int64_t free_bytes_67765;
    char *free_mem_67894;
    char *free_mem_67898;
};
struct futhark_mc_task_74023 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64738;
    char *free_Y_mem_67460;
    char *free_mem_67749;
};
struct futhark_mc_scan_stage_1_parloop_struct_74026 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64738;
    char *free_Y_mem_67460;
    char *free_mem_67749;
};
static int futhark_mc_scan_stage_1_parloop_74027(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64739, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74026
    *futhark_mc_scan_stage_1_parloop_struct_74026 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74026 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74026->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74027_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74027_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_74026->free_n_62364;
    int64_t gtid_64738 =
            futhark_mc_scan_stage_1_parloop_struct_74026->free_gtid_64738;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74026->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67749 = {.desc ="mem_67749", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74026->free_mem_67749,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70876 = start;
    int64_t x_70480;
    int64_t x_70481;
    
    x_70480 = (int64_t) 0;
    for (; iter_70876 < end; iter_70876++) {
        int64_t gtid_64740 = iter_70876;
        
        // stage 1 scan body
        {
            float x_70483 = ((float *) Y_mem_67460.mem)[gtid_64738 * n_62364 +
                                                        gtid_64740];
            bool isnan_res_70484;
            
            isnan_res_70484 = futrts_isnan32(x_70483);
            
            bool defunc_0_p_res_70485 = !isnan_res_70484;
            int64_t defunc_0_f_res_70486 = btoi_bool_i64(defunc_0_p_res_70485);
            
            // write mapped values results to memory
            { }
            x_70480 = x_70480;
            // Read next values
            {
                x_70481 = defunc_0_f_res_70486;
            }
            
            int64_t defunc_1_op_res_70482 = add64(x_70480, x_70481);
            
            ((int64_t *) mem_67749.mem)[gtid_64740] = defunc_1_op_res_70482;
            x_70480 = defunc_1_op_res_70482;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74027_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74027_end -
                 futhark_mc_scan_stage_1_parloop_74027_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74027_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74027_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74027_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74028 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64738;
    char *free_Y_mem_67460;
    char *free_mem_67749;
};
static int futhark_mc_scan_stage_3_parloop_74029(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64739, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74028
    *futhark_mc_scan_stage_3_parloop_struct_74028 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74028 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74028->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74029_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74029_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_74028->free_n_62364;
    int64_t gtid_64738 =
            futhark_mc_scan_stage_3_parloop_struct_74028->free_gtid_64738;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74028->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67749 = {.desc ="mem_67749", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74028->free_mem_67749,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70888 = start;
    int64_t x_70885;
    int64_t x_70886;
    
    if (iter_70888 == (int64_t) 0) {
        x_70885 = (int64_t) 0;
    } else {
        x_70885 = ((int64_t *) mem_67749.mem)[iter_70888 - (int64_t) 1];
    }
    for (; iter_70888 < end; iter_70888++) {
        int64_t gtid_64740 = iter_70888;
        
        // stage 3 scan body
        {
            float x_70483 = ((float *) Y_mem_67460.mem)[gtid_64738 * n_62364 +
                                                        gtid_64740];
            bool isnan_res_70484;
            
            isnan_res_70484 = futrts_isnan32(x_70483);
            
            bool defunc_0_p_res_70485 = !isnan_res_70484;
            int64_t defunc_0_f_res_70486 = btoi_bool_i64(defunc_0_p_res_70485);
            
            x_70885 = x_70885;
            x_70886 = defunc_0_f_res_70486;
            
            int64_t defunc_1_op_res_70887 = add64(x_70885, x_70886);
            
            ((int64_t *) mem_67749.mem)[gtid_64740] = defunc_1_op_res_70887;
            x_70885 = defunc_1_op_res_70887;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74029_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74029_end -
                 futhark_mc_scan_stage_3_parloop_74029_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74029_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74029_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74029_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74024(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64739 = tid;
    int num_tasks_70875 = info.nsubtasks;
    struct futhark_mc_task_74023 *futhark_mc_task_74023 =
                                 (struct futhark_mc_task_74023 *) args;
    struct futhark_context *ctx = futhark_mc_task_74023->ctx;
    uint64_t futhark_mc_segscan_task_74024_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74024_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74023->free_n_62364;
    int64_t gtid_64738 = futhark_mc_task_74023->free_gtid_64738;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74023->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67749 = {.desc ="mem_67749", .mem =
                                 futhark_mc_task_74023->free_mem_67749, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_70882_cached_sizze_74025 = 0;
    char *scan_stage_2_accum_mem_70882 = NULL;
    int64_t iter_70876;
    struct futhark_mc_scan_stage_1_parloop_struct_74026
    futhark_mc_scan_stage_1_parloop_struct_74026;
    
    futhark_mc_scan_stage_1_parloop_struct_74026.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74026.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_74026.free_gtid_64738 = gtid_64738;
    futhark_mc_scan_stage_1_parloop_struct_74026.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_74026.free_mem_67749 = mem_67749.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74027_task;
    
    futhark_mc_scan_stage_1_parloop_74027_task.name =
        "futhark_mc_scan_stage_1_parloop_74027";
    futhark_mc_scan_stage_1_parloop_74027_task.fn =
        futhark_mc_scan_stage_1_parloop_74027;
    futhark_mc_scan_stage_1_parloop_74027_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74026;
    futhark_mc_scan_stage_1_parloop_74027_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74027_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74027_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74027_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74027_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74027_task);
    
    if (futhark_mc_scan_stage_1_parloop_74027_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74027_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74027_total_end -
                 futhark_mc_scan_stage_1_parloop_74027_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74027_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74027_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74027_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_70875)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_70877;
        int64_t x_70878;
        int64_t offset_70880 = (int64_t) 0;
        int64_t offset_index_70881 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_70882_cached_sizze_74025 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_70882 = realloc(scan_stage_2_accum_mem_70882,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_70882_cached_sizze_74025 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_70882)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_70884 = 0; i_70884 < num_tasks_70875 - 1; i_70884++) {
            offset_70880 = squot64(n_62364, sext_i32_i64(num_tasks_70875));
            if (slt64(sext_i32_i64(i_70884), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_70875)))) {
                offset_70880 += (int64_t) 1;
            }
            offset_index_70881 += offset_70880;
            
            int64_t gtid_64740 = offset_index_70881;
            float x_70483 = ((float *) Y_mem_67460.mem)[gtid_64738 * n_62364 +
                                                        gtid_64740];
            bool isnan_res_70484;
            
            isnan_res_70484 = futrts_isnan32(x_70483);
            
            bool defunc_0_p_res_70485 = !isnan_res_70484;
            int64_t defunc_0_f_res_70486 = btoi_bool_i64(defunc_0_p_res_70485);
            
            // Read carry in
            {
                x_70877 =
                    ((int64_t *) scan_stage_2_accum_mem_70882)[(int64_t) 0];
            }
            // Read next values
            {
                x_70878 = ((int64_t *) mem_67749.mem)[offset_index_70881 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_70879 = add64(x_70877, x_70878);
            
            ((int64_t *) mem_67749.mem)[offset_index_70881 - (int64_t) 1] =
                defunc_1_op_res_70879;
            ((int64_t *) scan_stage_2_accum_mem_70882)[(int64_t) 0] =
                defunc_1_op_res_70879;
        }
        
        int64_t iter_70888 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74028
        futhark_mc_scan_stage_3_parloop_struct_74028;
        
        futhark_mc_scan_stage_3_parloop_struct_74028.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74028.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_74028.free_gtid_64738 =
            gtid_64738;
        futhark_mc_scan_stage_3_parloop_struct_74028.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_74028.free_mem_67749 =
            mem_67749.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74029_task;
        
        futhark_mc_scan_stage_3_parloop_74029_task.name =
            "futhark_mc_scan_stage_3_parloop_74029";
        futhark_mc_scan_stage_3_parloop_74029_task.fn =
            futhark_mc_scan_stage_3_parloop_74029;
        futhark_mc_scan_stage_3_parloop_74029_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74028;
        futhark_mc_scan_stage_3_parloop_74029_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74029_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74029_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74029_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74029_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74029_task);
        
        if (futhark_mc_scan_stage_3_parloop_74029_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74029_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74029_total_end -
                     futhark_mc_scan_stage_3_parloop_74029_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74029_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74029_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74029_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_70882);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74024_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74024_end -
                 futhark_mc_segscan_task_74024_start;
        
        ctx->futhark_mc_segscan_task_74024_runs[tid]++;
        ctx->futhark_mc_segscan_task_74024_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74024_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74030 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64738;
    char *free_Y_mem_67460;
    char *free_mem_67749;
    char *free_mem_67752;
    char *free_mem_67755;
};
struct futhark_mc_segmap_parloop_struct_74032 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_64738;
    char *free_Y_mem_67460;
    char *free_mem_67749;
    char *free_mem_67752;
    char *free_mem_67755;
};
static int futhark_mc_segmap_parloop_74033(void *args, int64_t start,
                                           int64_t end, int flat_tid_64741,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74032
    *futhark_mc_segmap_parloop_struct_74032 =
    (struct futhark_mc_segmap_parloop_struct_74032 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74032->ctx;
    uint64_t futhark_mc_segmap_parloop_74033_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74033_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74032->free_n_62364;
    int64_t gtid_64738 =
            futhark_mc_segmap_parloop_struct_74032->free_gtid_64738;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74032->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67749 = {.desc ="mem_67749", .mem =
                                 futhark_mc_segmap_parloop_struct_74032->free_mem_67749,
                                 .size =0, .references =NULL};
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_segmap_parloop_struct_74032->free_mem_67752,
                                 .size =0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_segmap_parloop_struct_74032->free_mem_67755,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70892 = start;
    
    for (; iter_70892 < end; iter_70892++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70895 = n_62364;
        int64_t gtid_64742 = iter_70892;
        int64_t remnant_70896 = iter_70892 - gtid_64742;
        float x_70487 = ((float *) Y_mem_67460.mem)[gtid_64738 * n_62364 +
                                                    gtid_64742];
        bool isnan_res_70488;
        
        isnan_res_70488 = futrts_isnan32(x_70487);
        
        bool defunc_0_p_res_70489 = !isnan_res_70488;
        int64_t defunc_1_f_res_70490;
        
        if (defunc_0_p_res_70489) {
            int64_t x_70893 = ((int64_t *) mem_67749.mem)[gtid_64742];
            int64_t defunc_1_f_res_t_res_70894 = sub64(x_70893, (int64_t) 1);
            
            defunc_1_f_res_70490 = defunc_1_f_res_t_res_70894;
        } else {
            defunc_1_f_res_70490 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_70490) &&
            slt64(defunc_1_f_res_70490, n_62364)) {
            ((int64_t *) mem_67755.mem)[defunc_1_f_res_70490] = gtid_64742;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_70490) &&
            slt64(defunc_1_f_res_70490, n_62364)) {
            ((float *) mem_67752.mem)[defunc_1_f_res_70490] = x_70487;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74033_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74033_end -
                 futhark_mc_segmap_parloop_74033_start;
        
        ctx->futhark_mc_segmap_parloop_74033_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74033_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74033_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74031(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64741 = tid;
    int num_tasks_70891 = info.nsubtasks;
    struct futhark_mc_task_74030 *futhark_mc_task_74030 =
                                 (struct futhark_mc_task_74030 *) args;
    struct futhark_context *ctx = futhark_mc_task_74030->ctx;
    uint64_t futhark_mc_segmap_task_74031_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74031_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74030->free_n_62364;
    int64_t gtid_64738 = futhark_mc_task_74030->free_gtid_64738;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74030->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67749 = {.desc ="mem_67749", .mem =
                                 futhark_mc_task_74030->free_mem_67749, .size =
                                 0, .references =NULL};
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_task_74030->free_mem_67752, .size =
                                 0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_task_74030->free_mem_67755, .size =
                                 0, .references =NULL};
    int64_t iter_70892;
    struct futhark_mc_segmap_parloop_struct_74032
    futhark_mc_segmap_parloop_struct_74032;
    
    futhark_mc_segmap_parloop_struct_74032.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74032.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74032.free_gtid_64738 = gtid_64738;
    futhark_mc_segmap_parloop_struct_74032.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74032.free_mem_67749 = mem_67749.mem;
    futhark_mc_segmap_parloop_struct_74032.free_mem_67752 = mem_67752.mem;
    futhark_mc_segmap_parloop_struct_74032.free_mem_67755 = mem_67755.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74033_task;
    
    futhark_mc_segmap_parloop_74033_task.name =
        "futhark_mc_segmap_parloop_74033";
    futhark_mc_segmap_parloop_74033_task.fn = futhark_mc_segmap_parloop_74033;
    futhark_mc_segmap_parloop_74033_task.args =
        &futhark_mc_segmap_parloop_struct_74032;
    futhark_mc_segmap_parloop_74033_task.iterations = iterations;
    futhark_mc_segmap_parloop_74033_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74033_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74033_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74033_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74033_task);
    
    if (futhark_mc_segmap_parloop_74033_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74033_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74033_total_end -
                 futhark_mc_segmap_parloop_74033_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74033_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74033_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74033_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74031_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74031_end -
                 futhark_mc_segmap_task_74031_start;
        
        ctx->futhark_mc_segmap_task_74031_runs[tid]++;
        ctx->futhark_mc_segmap_task_74031_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74031_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74034 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67755;
    char *free_mem_67758;
    char *free_mem_67761;
};
struct futhark_mc_segmap_parloop_struct_74036 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67755;
    char *free_mem_67758;
    char *free_mem_67761;
};
static int futhark_mc_segmap_parloop_74037(void *args, int64_t start,
                                           int64_t end, int flat_tid_64743,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74036
    *futhark_mc_segmap_parloop_struct_74036 =
    (struct futhark_mc_segmap_parloop_struct_74036 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74036->ctx;
    uint64_t futhark_mc_segmap_parloop_74037_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74037_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74036->free_n_62364;
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_segmap_parloop_struct_74036->free_mem_67755,
                                 .size =0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_segmap_parloop_struct_74036->free_mem_67758,
                                 .size =0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_segmap_parloop_struct_74036->free_mem_67761,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70898 = start;
    
    for (; iter_70898 < end; iter_70898++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70899 = n_62364;
        int64_t gtid_64744 = iter_70898;
        int64_t remnant_70900 = iter_70898 - gtid_64744;
        int64_t x_70493 = ((int64_t *) mem_67755.mem)[gtid_64744];
        int64_t defunc_0_f_res_70494 = add64((int64_t) 1, x_70493);
        float defunc_0_f_res_70495 = sitofp_i64_f32(x_70493);
        
        ((float *) mem_67758.mem)[gtid_64744] = defunc_0_f_res_70495;
        ((int64_t *) mem_67761.mem)[gtid_64744] = defunc_0_f_res_70494;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74037_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74037_end -
                 futhark_mc_segmap_parloop_74037_start;
        
        ctx->futhark_mc_segmap_parloop_74037_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74037_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74037_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74035(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64743 = tid;
    int num_tasks_70897 = info.nsubtasks;
    struct futhark_mc_task_74034 *futhark_mc_task_74034 =
                                 (struct futhark_mc_task_74034 *) args;
    struct futhark_context *ctx = futhark_mc_task_74034->ctx;
    uint64_t futhark_mc_segmap_task_74035_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74035_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74034->free_n_62364;
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_task_74034->free_mem_67755, .size =
                                 0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_task_74034->free_mem_67758, .size =
                                 0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_task_74034->free_mem_67761, .size =
                                 0, .references =NULL};
    int64_t iter_70898;
    struct futhark_mc_segmap_parloop_struct_74036
    futhark_mc_segmap_parloop_struct_74036;
    
    futhark_mc_segmap_parloop_struct_74036.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74036.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74036.free_mem_67755 = mem_67755.mem;
    futhark_mc_segmap_parloop_struct_74036.free_mem_67758 = mem_67758.mem;
    futhark_mc_segmap_parloop_struct_74036.free_mem_67761 = mem_67761.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74037_task;
    
    futhark_mc_segmap_parloop_74037_task.name =
        "futhark_mc_segmap_parloop_74037";
    futhark_mc_segmap_parloop_74037_task.fn = futhark_mc_segmap_parloop_74037;
    futhark_mc_segmap_parloop_74037_task.args =
        &futhark_mc_segmap_parloop_struct_74036;
    futhark_mc_segmap_parloop_74037_task.iterations = iterations;
    futhark_mc_segmap_parloop_74037_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74037_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74037_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74037_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74037_task);
    
    if (futhark_mc_segmap_parloop_74037_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74037_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74037_total_end -
                 futhark_mc_segmap_parloop_74037_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74037_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74037_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74037_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74035_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74035_end -
                 futhark_mc_segmap_task_74035_start;
        
        ctx->futhark_mc_segmap_task_74035_runs[tid]++;
        ctx->futhark_mc_segmap_task_74035_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74035_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74038 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_64957;
    char *free_mem_67764;
};
struct futhark_mc_segmap_parloop_struct_74040 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_64957;
    char *free_mem_67764;
};
static int futhark_mc_segmap_parloop_74041(void *args, int64_t start,
                                           int64_t end, int flat_tid_64745,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74040
    *futhark_mc_segmap_parloop_struct_74040 =
    (struct futhark_mc_segmap_parloop_struct_74040 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74040->ctx;
    uint64_t futhark_mc_segmap_parloop_74041_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74041_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74040->free_q_62366;
    int64_t last_res_64957 =
            futhark_mc_segmap_parloop_struct_74040->free_last_res_64957;
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_segmap_parloop_struct_74040->free_mem_67764,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70902 = start;
    
    for (; iter_70902 < end; iter_70902++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70903 = q_62366;
        int64_t gtid_64746 = iter_70902;
        int64_t remnant_70904 = iter_70902 - gtid_64746;
        bool cond_70496 = sle64(last_res_64957, gtid_64746);
        float defunc_0_f_res_70497;
        
        if (cond_70496) {
            defunc_0_f_res_70497 = 0.0F;
        } else {
            defunc_0_f_res_70497 = 1.0F;
        }
        ((float *) mem_67764.mem)[gtid_64746] = defunc_0_f_res_70497;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74041_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74041_end -
                 futhark_mc_segmap_parloop_74041_start;
        
        ctx->futhark_mc_segmap_parloop_74041_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74041_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74041_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74039(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64745 = tid;
    int num_tasks_70901 = info.nsubtasks;
    struct futhark_mc_task_74038 *futhark_mc_task_74038 =
                                 (struct futhark_mc_task_74038 *) args;
    struct futhark_context *ctx = futhark_mc_task_74038->ctx;
    uint64_t futhark_mc_segmap_task_74039_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74039_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_74038->free_q_62366;
    int64_t last_res_64957 = futhark_mc_task_74038->free_last_res_64957;
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_task_74038->free_mem_67764, .size =
                                 0, .references =NULL};
    int64_t iter_70902;
    struct futhark_mc_segmap_parloop_struct_74040
    futhark_mc_segmap_parloop_struct_74040;
    
    futhark_mc_segmap_parloop_struct_74040.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74040.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74040.free_last_res_64957 = last_res_64957;
    futhark_mc_segmap_parloop_struct_74040.free_mem_67764 = mem_67764.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74041_task;
    
    futhark_mc_segmap_parloop_74041_task.name =
        "futhark_mc_segmap_parloop_74041";
    futhark_mc_segmap_parloop_74041_task.fn = futhark_mc_segmap_parloop_74041;
    futhark_mc_segmap_parloop_74041_task.args =
        &futhark_mc_segmap_parloop_struct_74040;
    futhark_mc_segmap_parloop_74041_task.iterations = iterations;
    futhark_mc_segmap_parloop_74041_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74041_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74041_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74041_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74041_task);
    
    if (futhark_mc_segmap_parloop_74041_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74041_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74041_total_end -
                 futhark_mc_segmap_parloop_74041_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74041_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74041_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74041_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74039_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74039_end -
                 futhark_mc_segmap_task_74039_start;
        
        ctx->futhark_mc_segmap_task_74039_runs[tid]++;
        ctx->futhark_mc_segmap_task_74039_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74039_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74042 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64957;
    int64_t free_min_arg_64969;
    int64_t free_min_arg_64970;
    float free_max_res_64974;
    char *free_mem_67752;
    char *free_mem_67755;
    char *free_mem_67758;
    char *free_mem_67761;
    char *free_mem_67764;
    char *free_mem_67767;
    char *free_mem_67770;
};
struct futhark_mc_segmap_parloop_struct_74044 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64957;
    int64_t free_min_arg_64969;
    int64_t free_min_arg_64970;
    float free_max_res_64974;
    char *free_mem_67752;
    char *free_mem_67755;
    char *free_mem_67758;
    char *free_mem_67761;
    char *free_mem_67764;
    char *free_mem_67767;
    char *free_mem_67770;
};
static int futhark_mc_segmap_parloop_74045(void *args, int64_t start,
                                           int64_t end, int flat_tid_64747,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74044
    *futhark_mc_segmap_parloop_struct_74044 =
    (struct futhark_mc_segmap_parloop_struct_74044 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74044->ctx;
    uint64_t futhark_mc_segmap_parloop_74045_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74045_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74044->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74044->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74044->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74044->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74044->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74044->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74044->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74044->free_loop_cond_62389;
    int64_t last_res_64957 =
            futhark_mc_segmap_parloop_struct_74044->free_last_res_64957;
    int64_t min_arg_64969 =
            futhark_mc_segmap_parloop_struct_74044->free_min_arg_64969;
    int64_t min_arg_64970 =
            futhark_mc_segmap_parloop_struct_74044->free_min_arg_64970;
    float max_res_64974 =
          futhark_mc_segmap_parloop_struct_74044->free_max_res_64974;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67752,
                                 .size =0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67755,
                                 .size =0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67758,
                                 .size =0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67761,
                                 .size =0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67764,
                                 .size =0, .references =NULL};
    struct memblock mem_67767 = {.desc ="mem_67767", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67767,
                                 .size =0, .references =NULL};
    struct memblock mem_67770 = {.desc ="mem_67770", .mem =
                                 futhark_mc_segmap_parloop_struct_74044->free_mem_67770,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70906 = start;
    
    for (; iter_70906 < end; iter_70906++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71029 = n_m_62372;
        int64_t gtid_64748 = iter_70906;
        int64_t remnant_71030 = iter_70906 - gtid_64748;
        int64_t min_arg_70688 = mul64(jump_62368, gtid_64748);
        int64_t min_res_70689 = smin64(i_62378, min_arg_70688);
        int64_t defunc_0_g_res_70690 = add64((int64_t) 1, min_res_70689);
        bool init_idx_70691;
        int64_t init_idx_70692;
        int64_t init_idx_70693;
        bool loop_while_70907;
        int64_t low_70908;
        int64_t high_70909;
        
        loop_while_70907 = x_62379;
        low_70908 = (int64_t) 0;
        high_70909 = i_62378;
        while (loop_while_70907) {
            int64_t x_70910 = add64(low_70908, high_70909);
            int64_t mid_70911 = sdiv64(x_70910, (int64_t) 2);
            bool x_70912 = sle64((int64_t) 0, mid_70911);
            bool y_70913 = slt64(mid_70911, n_62364);
            bool bounds_check_70914 = x_70912 && y_70913;
            bool index_certs_70915;
            
            if (!bounds_check_70914) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_70911,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_70916 = ((int64_t *) mem_67761.mem)[mid_70911];
            bool cond_70917 = slt64(mid_id_70916, (int64_t) 0);
            int64_t mid_idx_70918;
            
            if (cond_70917) {
                mid_idx_70918 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_70918 = mid_id_70916;
            }
            
            bool cond_70919 = sle64(defunc_0_g_res_70690, mid_idx_70918);
            int64_t loopres_70920;
            int64_t loopres_70921;
            
            if (cond_70919) {
                int64_t loopres_t_res_70922 = sub64(mid_70911, (int64_t) 1);
                
                loopres_70920 = low_70908;
                loopres_70921 = loopres_t_res_70922;
            } else {
                int64_t loopres_f_res_70923 = add64((int64_t) 1, mid_70911);
                
                loopres_70920 = loopres_f_res_70923;
                loopres_70921 = high_70909;
            }
            
            bool loop_cond_70924 = sle64(loopres_70920, loopres_70921);
            bool loop_while_tmp_71031 = loop_cond_70924;
            int64_t low_tmp_71032 = loopres_70920;
            int64_t high_tmp_71033 = loopres_70921;
            
            loop_while_70907 = loop_while_tmp_71031;
            low_70908 = low_tmp_71032;
            high_70909 = high_tmp_71033;
        }
        init_idx_70691 = loop_while_70907;
        init_idx_70692 = low_70908;
        init_idx_70693 = high_70909;
        
        bool idx_70712;
        int64_t idx_70713;
        int64_t idx_70714;
        int64_t idx_70715;
        bool loop_while_70925;
        int64_t l_idx_70926;
        int64_t r_idx_70927;
        int64_t span_70928;
        
        loop_while_70925 = loop_cond_62389;
        l_idx_70926 = init_idx_70692;
        r_idx_70927 = init_idx_70692;
        span_70928 = (int64_t) 1;
        while (loop_while_70925) {
            int64_t max_arg_70929 = sub64(l_idx_70926, (int64_t) 1);
            int64_t max_res_70930 = smax64((int64_t) 0, max_arg_70929);
            int64_t min_arg_70931 = add64((int64_t) 1, r_idx_70927);
            int64_t min_res_70932 = smin64(min_arg_64969, min_arg_70931);
            bool x_70933 = sle64((int64_t) 0, max_res_70930);
            bool y_70934 = slt64(max_res_70930, n_62364);
            bool bounds_check_70935 = x_70933 && y_70934;
            bool index_certs_70936;
            
            if (!bounds_check_70935) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70930,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70937 = ((int64_t *) mem_67761.mem)[max_res_70930];
            int64_t abs_arg_70938 = sub64(x_70937, defunc_0_g_res_70690);
            int64_t abs_res_70939 = abs64(abs_arg_70938);
            bool x_70940 = sle64((int64_t) 0, min_res_70932);
            bool y_70941 = slt64(min_res_70932, n_62364);
            bool bounds_check_70942 = x_70940 && y_70941;
            bool index_certs_70943;
            
            if (!bounds_check_70942) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70932,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_70944 = ((int64_t *) mem_67761.mem)[min_res_70932];
            int64_t abs_arg_70945 = sub64(x_70944, defunc_0_g_res_70690);
            int64_t abs_res_70946 = abs64(abs_arg_70945);
            bool cond_70947 = max_res_70930 == l_idx_70926;
            int64_t loopres_70948;
            int64_t loopres_70949;
            int64_t loopres_70950;
            
            if (cond_70947) {
                loopres_70948 = l_idx_70926;
                loopres_70949 = r_idx_70927;
                loopres_70950 = min_res_62384;
            } else {
                bool cond_70951 = slt64(abs_res_70939, abs_res_70946);
                bool cond_f_res_70952 = min_res_70932 == r_idx_70927;
                bool x_70953 = !cond_70951;
                bool y_70954 = cond_f_res_70952 && x_70953;
                bool cond_70955 = cond_70951 || y_70954;
                int64_t loopres_f_res_70956;
                
                if (cond_70955) {
                    loopres_f_res_70956 = max_res_70930;
                } else {
                    loopres_f_res_70956 = l_idx_70926;
                }
                
                int64_t loopres_f_res_70957;
                
                if (cond_70955) {
                    loopres_f_res_70957 = r_idx_70927;
                } else {
                    loopres_f_res_70957 = min_res_70932;
                }
                
                int64_t loopres_f_res_70958;
                
                if (cond_70955) {
                    int64_t loopres_f_res_t_res_70959 = add64((int64_t) 1,
                                                              span_70928);
                    
                    loopres_f_res_70958 = loopres_f_res_t_res_70959;
                } else {
                    int64_t loopres_f_res_f_res_70960 = add64((int64_t) 1,
                                                              span_70928);
                    
                    loopres_f_res_70958 = loopres_f_res_f_res_70960;
                }
                loopres_70948 = loopres_f_res_70956;
                loopres_70949 = loopres_f_res_70957;
                loopres_70950 = loopres_f_res_70958;
            }
            
            bool loop_cond_70961 = slt64(loopres_70950, min_res_62384);
            bool loop_while_tmp_71034 = loop_cond_70961;
            int64_t l_idx_tmp_71035 = loopres_70948;
            int64_t r_idx_tmp_71036 = loopres_70949;
            int64_t span_tmp_71037 = loopres_70950;
            
            loop_while_70925 = loop_while_tmp_71034;
            l_idx_70926 = l_idx_tmp_71035;
            r_idx_70927 = r_idx_tmp_71036;
            span_70928 = span_tmp_71037;
        }
        idx_70712 = loop_while_70925;
        idx_70713 = l_idx_70926;
        idx_70714 = r_idx_70927;
        idx_70715 = span_70928;
        
        int64_t min_res_70753 = smin64(min_arg_64970, idx_70713);
        int64_t x_70754 = add64(min_res_62384, min_res_70753);
        int64_t r_70755 = sub64(x_70754, (int64_t) 1);
        bool x_70756 = sle64((int64_t) 0, r_70755);
        bool y_70757 = slt64(r_70755, n_62364);
        bool bounds_check_70758 = x_70756 && y_70757;
        bool index_certs_70759;
        
        if (!bounds_check_70758) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_70755,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_70760 = ((int64_t *) mem_67755.mem)[r_70755];
        int64_t abs_arg_70761 = sub64(x_70760, min_res_70689);
        int64_t abs_res_70762 = abs64(abs_arg_70761);
        bool x_70763 = sle64((int64_t) 0, min_res_70753);
        bool y_70764 = slt64(min_res_70753, n_62364);
        bool bounds_check_70765 = x_70763 && y_70764;
        bool index_certs_70766;
        
        if (!bounds_check_70765) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_70753,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_70767 = ((int64_t *) mem_67755.mem)[min_res_70753];
        int64_t abs_arg_70768 = sub64(x_70767, min_res_70689);
        int64_t abs_res_70769 = abs64(abs_arg_70768);
        int64_t max_res_70770 = smax64(abs_res_70762, abs_res_70769);
        float defunc_0_f_res_70771 = sitofp_i64_f32(max_res_70770);
        float defunc_1_f_res_70772 = max_res_64974 + defunc_0_f_res_70771;
        float defunc_0_f_res_70773 = sitofp_i64_f32(min_res_70689);
        float defunc_2_reduce_res_70774;
        float defunc_2_reduce_res_70775;
        float defunc_2_reduce_res_70776;
        float defunc_2_reduce_res_70777;
        float defunc_2_reduce_res_70778;
        float redout_70963;
        float redout_70964;
        float redout_70965;
        float redout_70966;
        float redout_70967;
        
        redout_70963 = 0.0F;
        redout_70964 = 0.0F;
        redout_70965 = 0.0F;
        redout_70966 = 0.0F;
        redout_70967 = 0.0F;
        for (int64_t i_70962 = 0; i_70962 < q_62366; i_70962++) {
            float x_70968 = ((float *) mem_67764.mem)[i_70962];
            bool cond_70969 = sle64(last_res_64957, i_70962);
            float defunc_0_f_res_70970;
            
            if (cond_70969) {
                defunc_0_f_res_70970 = 0.0F;
            } else {
                int64_t i_70971 = add64(min_res_70753, i_70962);
                float x_70972 = ((float *) mem_67758.mem)[i_70971];
                float defunc_0_f_res_f_res_70973 = 1.0F + x_70972;
                
                defunc_0_f_res_70970 = defunc_0_f_res_f_res_70973;
            }
            
            float x_j_70974 = defunc_0_f_res_70970 - defunc_0_f_res_70773;
            float abs_res_70975 = (float) fabs(x_j_70974);
            float tmp1_70976 = abs_res_70975 / defunc_1_f_res_70772;
            float x_70977 = tmp1_70976 * tmp1_70976;
            float y_70978 = tmp1_70976 * x_70977;
            float tmp2_70979 = 1.0F - y_70978;
            float x_70980 = tmp2_70979 * tmp2_70979;
            float tmp3_70981 = tmp2_70979 * x_70980;
            float w_j_70982 = x_70968 * tmp3_70981;
            float xw_j_70983 = x_j_70974 * w_j_70982;
            float x2w_j_70984 = x_j_70974 * xw_j_70983;
            float x3w_j_70985 = x_j_70974 * x2w_j_70984;
            float x4w_j_70986 = x_j_70974 * x3w_j_70985;
            float defunc_1_op_res_70987 = w_j_70982 + redout_70963;
            float defunc_1_op_res_70988 = xw_j_70983 + redout_70964;
            float defunc_1_op_res_70989 = x2w_j_70984 + redout_70965;
            float defunc_1_op_res_70990 = x3w_j_70985 + redout_70966;
            float defunc_1_op_res_70991 = x4w_j_70986 + redout_70967;
            float redout_tmp_71038 = defunc_1_op_res_70987;
            float redout_tmp_71039 = defunc_1_op_res_70988;
            float redout_tmp_71040 = defunc_1_op_res_70989;
            float redout_tmp_71041 = defunc_1_op_res_70990;
            float redout_tmp_71042 = defunc_1_op_res_70991;
            
            redout_70963 = redout_tmp_71038;
            redout_70964 = redout_tmp_71039;
            redout_70965 = redout_tmp_71040;
            redout_70966 = redout_tmp_71041;
            redout_70967 = redout_tmp_71042;
        }
        defunc_2_reduce_res_70774 = redout_70963;
        defunc_2_reduce_res_70775 = redout_70964;
        defunc_2_reduce_res_70776 = redout_70965;
        defunc_2_reduce_res_70777 = redout_70966;
        defunc_2_reduce_res_70778 = redout_70967;
        
        float x_70809 = defunc_2_reduce_res_70776 * defunc_2_reduce_res_70778;
        float y_70810 = defunc_2_reduce_res_70777 * defunc_2_reduce_res_70777;
        float a12_70811 = x_70809 - y_70810;
        float x_70812 = defunc_2_reduce_res_70776 * defunc_2_reduce_res_70777;
        float y_70813 = defunc_2_reduce_res_70775 * defunc_2_reduce_res_70778;
        float b12_70814 = x_70812 - y_70813;
        float x_70815 = defunc_2_reduce_res_70775 * defunc_2_reduce_res_70777;
        float y_70816 = defunc_2_reduce_res_70776 * defunc_2_reduce_res_70776;
        float c12_70817 = x_70815 - y_70816;
        float x_70818 = defunc_2_reduce_res_70774 * defunc_2_reduce_res_70778;
        float b2_70819 = x_70818 - y_70816;
        float x_70820 = defunc_2_reduce_res_70775 * defunc_2_reduce_res_70776;
        float y_70821 = defunc_2_reduce_res_70774 * defunc_2_reduce_res_70777;
        float c2_70822 = x_70820 - y_70821;
        float x_70823 = defunc_2_reduce_res_70774 * a12_70811;
        float y_70824 = defunc_2_reduce_res_70775 * b12_70814;
        float x_70825 = x_70823 + y_70824;
        float y_70826 = defunc_2_reduce_res_70776 * c12_70817;
        float y_70827 = x_70825 + y_70826;
        float det_70828 = 1.0F / y_70827;
        float a12_70829 = a12_70811 * det_70828;
        float b12_70830 = b12_70814 * det_70828;
        float c12_70831 = c12_70817 * det_70828;
        float b2_70832 = b2_70819 * det_70828;
        float c2_70833 = c2_70822 * det_70828;
        float defunc_2_reduce_res_70834;
        float defunc_2_reduce_res_70835;
        float redout_70993;
        float redout_70994;
        
        redout_70993 = 0.0F;
        redout_70994 = 0.0F;
        for (int64_t i_70992 = 0; i_70992 < q_62366; i_70992++) {
            float x_70995 = ((float *) mem_67764.mem)[i_70992];
            bool cond_70996 = sle64(last_res_64957, i_70992);
            float defunc_0_f_res_70997;
            
            if (cond_70996) {
                defunc_0_f_res_70997 = 0.0F;
            } else {
                int64_t i_70998 = add64(min_res_70753, i_70992);
                float x_70999 = ((float *) mem_67758.mem)[i_70998];
                float defunc_0_f_res_f_res_71000 = 1.0F + x_70999;
                
                defunc_0_f_res_70997 = defunc_0_f_res_f_res_71000;
            }
            
            float x_j_71001 = defunc_0_f_res_70997 - defunc_0_f_res_70773;
            float abs_res_71002 = (float) fabs(x_j_71001);
            float tmp1_71003 = abs_res_71002 / defunc_1_f_res_70772;
            float x_71004 = tmp1_71003 * tmp1_71003;
            float y_71005 = tmp1_71003 * x_71004;
            float tmp2_71006 = 1.0F - y_71005;
            float x_71007 = tmp2_71006 * tmp2_71006;
            float tmp3_71008 = tmp2_71006 * x_71007;
            float tmp4_71009 = x_70995 * tmp3_71008;
            float defunc_1_f_res_71010 = x_j_71001 * tmp4_71009;
            float defunc_1_f_res_71011 = x_j_71001 * defunc_1_f_res_71010;
            float defunc_0_f_res_71012;
            
            if (cond_70996) {
                defunc_0_f_res_71012 = 0.0F;
            } else {
                int64_t i_71013 = add64(min_res_70753, i_70992);
                float x_71014 = ((float *) mem_67752.mem)[i_71013];
                
                defunc_0_f_res_71012 = x_71014;
            }
            
            float x_71015 = a12_70829 * tmp4_71009;
            float y_71016 = b12_70830 * defunc_1_f_res_71010;
            float x_71017 = x_71015 + y_71016;
            float y_71018 = c12_70831 * defunc_1_f_res_71011;
            float x_71019 = x_71017 + y_71018;
            float defunc_9_fit_fun_res_71020 = defunc_0_f_res_71012 * x_71019;
            float x_71021 = b12_70830 * tmp4_71009;
            float y_71022 = b2_70832 * defunc_1_f_res_71010;
            float x_71023 = x_71021 + y_71022;
            float y_71024 = c2_70833 * defunc_1_f_res_71011;
            float x_71025 = x_71023 + y_71024;
            float defunc_9_slope_fun_res_71026 = defunc_0_f_res_71012 * x_71025;
            float defunc_1_op_res_71027 = defunc_9_fit_fun_res_71020 +
                  redout_70993;
            float defunc_1_op_res_71028 = defunc_9_slope_fun_res_71026 +
                  redout_70994;
            float redout_tmp_71043 = defunc_1_op_res_71027;
            float redout_tmp_71044 = defunc_1_op_res_71028;
            
            redout_70993 = redout_tmp_71043;
            redout_70994 = redout_tmp_71044;
        }
        defunc_2_reduce_res_70834 = redout_70993;
        defunc_2_reduce_res_70835 = redout_70994;
        ((float *) mem_67767.mem)[gtid_64748] = defunc_2_reduce_res_70834;
        ((float *) mem_67770.mem)[gtid_64748] = defunc_2_reduce_res_70835;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74045_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74045_end -
                 futhark_mc_segmap_parloop_74045_start;
        
        ctx->futhark_mc_segmap_parloop_74045_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74045_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74045_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74043(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64747 = tid;
    int num_tasks_70905 = info.nsubtasks;
    struct futhark_mc_task_74042 *futhark_mc_task_74042 =
                                 (struct futhark_mc_task_74042 *) args;
    struct futhark_context *ctx = futhark_mc_task_74042->ctx;
    uint64_t futhark_mc_segmap_task_74043_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74043_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74042->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74042->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74042->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74042->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74042->free_i_62378;
    bool x_62379 = futhark_mc_task_74042->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74042->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74042->free_loop_cond_62389;
    int64_t last_res_64957 = futhark_mc_task_74042->free_last_res_64957;
    int64_t min_arg_64969 = futhark_mc_task_74042->free_min_arg_64969;
    int64_t min_arg_64970 = futhark_mc_task_74042->free_min_arg_64970;
    float max_res_64974 = futhark_mc_task_74042->free_max_res_64974;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_task_74042->free_mem_67752, .size =
                                 0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_task_74042->free_mem_67755, .size =
                                 0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_task_74042->free_mem_67758, .size =
                                 0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_task_74042->free_mem_67761, .size =
                                 0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_task_74042->free_mem_67764, .size =
                                 0, .references =NULL};
    struct memblock mem_67767 = {.desc ="mem_67767", .mem =
                                 futhark_mc_task_74042->free_mem_67767, .size =
                                 0, .references =NULL};
    struct memblock mem_67770 = {.desc ="mem_67770", .mem =
                                 futhark_mc_task_74042->free_mem_67770, .size =
                                 0, .references =NULL};
    int64_t iter_70906;
    struct futhark_mc_segmap_parloop_struct_74044
    futhark_mc_segmap_parloop_struct_74044;
    
    futhark_mc_segmap_parloop_struct_74044.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74044.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74044.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74044.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74044.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74044.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74044.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74044.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74044.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74044.free_last_res_64957 = last_res_64957;
    futhark_mc_segmap_parloop_struct_74044.free_min_arg_64969 = min_arg_64969;
    futhark_mc_segmap_parloop_struct_74044.free_min_arg_64970 = min_arg_64970;
    futhark_mc_segmap_parloop_struct_74044.free_max_res_64974 = max_res_64974;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67752 = mem_67752.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67755 = mem_67755.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67758 = mem_67758.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67761 = mem_67761.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67764 = mem_67764.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67767 = mem_67767.mem;
    futhark_mc_segmap_parloop_struct_74044.free_mem_67770 = mem_67770.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74045_task;
    
    futhark_mc_segmap_parloop_74045_task.name =
        "futhark_mc_segmap_parloop_74045";
    futhark_mc_segmap_parloop_74045_task.fn = futhark_mc_segmap_parloop_74045;
    futhark_mc_segmap_parloop_74045_task.args =
        &futhark_mc_segmap_parloop_struct_74044;
    futhark_mc_segmap_parloop_74045_task.iterations = iterations;
    futhark_mc_segmap_parloop_74045_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74045_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74045_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74045_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74045_task);
    
    if (futhark_mc_segmap_parloop_74045_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74045_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74045_total_end -
                 futhark_mc_segmap_parloop_74045_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74045_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74045_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74045_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74043_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74043_end -
                 futhark_mc_segmap_task_74043_start;
        
        ctx->futhark_mc_segmap_task_74043_runs[tid]++;
        ctx->futhark_mc_segmap_task_74043_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74043_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74047 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_64957;
    int64_t free_min_arg_64969;
    int64_t free_min_arg_64970;
    float free_max_res_64974;
    char *free_mem_67752;
    char *free_mem_67755;
    char *free_mem_67758;
    char *free_mem_67761;
    char *free_mem_67764;
    char *free_mem_67767;
    char *free_mem_67770;
};
struct futhark_mc_task_74049 {
    struct futhark_context *ctx;
    int64_t free_last_res_64957;
    char *free_mem_67758;
    char *free_mem_67764;
    int64_t free_min_res_70563;
    float free_defunc_1_f_res_70582;
    float free_defunc_0_f_res_70583;
    float *retval_defunc_2_reduce_res_70584;
    float *retval_defunc_2_reduce_res_70585;
    float *retval_defunc_2_reduce_res_70586;
    float *retval_defunc_2_reduce_res_70587;
    float *retval_defunc_2_reduce_res_70588;
};
struct futhark_mc_segred_stage_1_parloop_struct_74056 {
    struct futhark_context *ctx;
    int64_t free_last_res_64957;
    char *free_mem_67758;
    char *free_mem_67764;
    int64_t free_min_res_70563;
    float free_defunc_1_f_res_70582;
    float free_defunc_0_f_res_70583;
    char *free_reduce_stage_1_tid_res_arr_mem_71183;
    char *free_reduce_stage_1_tid_res_arr_mem_71185;
    char *free_reduce_stage_1_tid_res_arr_mem_71187;
    char *free_reduce_stage_1_tid_res_arr_mem_71189;
    char *free_reduce_stage_1_tid_res_arr_mem_71191;
};
static int futhark_mc_segred_stage_1_parloop_74057(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64751, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74056
    *futhark_mc_segred_stage_1_parloop_struct_74056 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74056 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74056->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74057_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74057_start = get_wall_time();
    
    int64_t last_res_64957 =
            futhark_mc_segred_stage_1_parloop_struct_74056->free_last_res_64957;
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74056->free_mem_67758,
                                 .size =0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74056->free_mem_67764,
                                 .size =0, .references =NULL};
    int64_t min_res_70563 =
            futhark_mc_segred_stage_1_parloop_struct_74056->free_min_res_70563;
    float defunc_1_f_res_70582 =
          futhark_mc_segred_stage_1_parloop_struct_74056->free_defunc_1_f_res_70582;
    float defunc_0_f_res_70583 =
          futhark_mc_segred_stage_1_parloop_struct_74056->free_defunc_0_f_res_70583;
    struct memblock reduce_stage_1_tid_res_arr_mem_71183 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71183",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74056->free_reduce_stage_1_tid_res_arr_mem_71183,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71185 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71185",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74056->free_reduce_stage_1_tid_res_arr_mem_71185,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71187 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71187",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74056->free_reduce_stage_1_tid_res_arr_mem_71187,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71189 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71189",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74056->free_reduce_stage_1_tid_res_arr_mem_71189,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71191 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71191",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74056->free_reduce_stage_1_tid_res_arr_mem_71191,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71193 = start;
    float x_71101;
    float x_71102;
    float x_71104;
    float x_71105;
    float x_71107;
    float x_71108;
    float x_71110;
    float x_71111;
    float x_71113;
    float x_71114;
    float local_acc_71194 = 0.0F;
    float local_acc_71195 = 0.0F;
    float local_acc_71196 = 0.0F;
    float local_acc_71197 = 0.0F;
    float local_acc_71198 = 0.0F;
    
    for (; iter_71193 < end; iter_71193++) {
        int64_t gtid_64752 = iter_71193;
        float x_71116 = ((float *) mem_67764.mem)[gtid_64752];
        bool cond_71117 = sle64(last_res_64957, gtid_64752);
        float defunc_0_f_res_71118;
        
        if (cond_71117) {
            defunc_0_f_res_71118 = 0.0F;
        } else {
            int64_t i_71119 = add64(gtid_64752, min_res_70563);
            float x_71120 = ((float *) mem_67758.mem)[i_71119];
            float defunc_0_f_res_f_res_71121 = 1.0F + x_71120;
            
            defunc_0_f_res_71118 = defunc_0_f_res_f_res_71121;
        }
        
        float x_j_71122 = defunc_0_f_res_71118 - defunc_0_f_res_70583;
        float abs_res_71123 = (float) fabs(x_j_71122);
        float tmp1_71124 = abs_res_71123 / defunc_1_f_res_70582;
        float x_71125 = tmp1_71124 * tmp1_71124;
        float y_71126 = tmp1_71124 * x_71125;
        float tmp2_71127 = 1.0F - y_71126;
        float x_71128 = tmp2_71127 * tmp2_71127;
        float tmp3_71129 = tmp2_71127 * x_71128;
        float w_j_71130 = x_71116 * tmp3_71129;
        float xw_j_71131 = x_j_71122 * w_j_71130;
        float x2w_j_71132 = x_j_71122 * xw_j_71131;
        float x3w_j_71133 = x_j_71122 * x2w_j_71132;
        float x4w_j_71134 = x_j_71122 * x3w_j_71133;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71101 = local_acc_71194;
        }
        // Load next params
        {
            x_71102 = w_j_71130;
        }
        // Red body
        {
            float defunc_1_op_res_71103 = x_71101 + x_71102;
            
            local_acc_71194 = defunc_1_op_res_71103;
        }
        // Load accum params
        {
            x_71104 = local_acc_71195;
        }
        // Load next params
        {
            x_71105 = xw_j_71131;
        }
        // Red body
        {
            float defunc_1_op_res_71106 = x_71104 + x_71105;
            
            local_acc_71195 = defunc_1_op_res_71106;
        }
        // Load accum params
        {
            x_71107 = local_acc_71196;
        }
        // Load next params
        {
            x_71108 = x2w_j_71132;
        }
        // Red body
        {
            float defunc_1_op_res_71109 = x_71107 + x_71108;
            
            local_acc_71196 = defunc_1_op_res_71109;
        }
        // Load accum params
        {
            x_71110 = local_acc_71197;
        }
        // Load next params
        {
            x_71111 = x3w_j_71133;
        }
        // Red body
        {
            float defunc_1_op_res_71112 = x_71110 + x_71111;
            
            local_acc_71197 = defunc_1_op_res_71112;
        }
        // Load accum params
        {
            x_71113 = local_acc_71198;
        }
        // Load next params
        {
            x_71114 = x4w_j_71134;
        }
        // Red body
        {
            float defunc_1_op_res_71115 = x_71113 + x_71114;
            
            local_acc_71198 = defunc_1_op_res_71115;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71183.mem)[flat_tid_64751] =
        local_acc_71194;
    ((float *) reduce_stage_1_tid_res_arr_mem_71185.mem)[flat_tid_64751] =
        local_acc_71195;
    ((float *) reduce_stage_1_tid_res_arr_mem_71187.mem)[flat_tid_64751] =
        local_acc_71196;
    ((float *) reduce_stage_1_tid_res_arr_mem_71189.mem)[flat_tid_64751] =
        local_acc_71197;
    ((float *) reduce_stage_1_tid_res_arr_mem_71191.mem)[flat_tid_64751] =
        local_acc_71198;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74057_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74057_end -
                 futhark_mc_segred_stage_1_parloop_74057_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74057_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74057_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74057_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74050(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64751 = tid;
    int num_tasks_71182 = info.nsubtasks;
    struct futhark_mc_task_74049 *futhark_mc_task_74049 =
                                 (struct futhark_mc_task_74049 *) args;
    struct futhark_context *ctx = futhark_mc_task_74049->ctx;
    uint64_t futhark_mc_segred_task_74050_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74050_start = get_wall_time();
    
    int64_t last_res_64957 = futhark_mc_task_74049->free_last_res_64957;
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_task_74049->free_mem_67758, .size =
                                 0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_task_74049->free_mem_67764, .size =
                                 0, .references =NULL};
    int64_t min_res_70563 = futhark_mc_task_74049->free_min_res_70563;
    float defunc_1_f_res_70582 =
          futhark_mc_task_74049->free_defunc_1_f_res_70582;
    float defunc_0_f_res_70583 =
          futhark_mc_task_74049->free_defunc_0_f_res_70583;
    float defunc_2_reduce_res_70584 =
          *futhark_mc_task_74049->retval_defunc_2_reduce_res_70584;
    float defunc_2_reduce_res_70585 =
          *futhark_mc_task_74049->retval_defunc_2_reduce_res_70585;
    float defunc_2_reduce_res_70586 =
          *futhark_mc_task_74049->retval_defunc_2_reduce_res_70586;
    float defunc_2_reduce_res_70587 =
          *futhark_mc_task_74049->retval_defunc_2_reduce_res_70587;
    float defunc_2_reduce_res_70588 =
          *futhark_mc_task_74049->retval_defunc_2_reduce_res_70588;
    size_t reduce_stage_1_tid_res_arr_mem_71183_cached_sizze_74051 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71183 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71185_cached_sizze_74052 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71185 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71187_cached_sizze_74053 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71187 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71189_cached_sizze_74054 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71189 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71191_cached_sizze_74055 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71191 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71183_cached_sizze_74051 <
        (size_t) ((int64_t) 4 * num_tasks_71182)) {
        reduce_stage_1_tid_res_arr_mem_71183 =
            realloc(reduce_stage_1_tid_res_arr_mem_71183, (int64_t) 4 *
                    num_tasks_71182);
        reduce_stage_1_tid_res_arr_mem_71183_cached_sizze_74051 = (int64_t) 4 *
            num_tasks_71182;
    }
    if (reduce_stage_1_tid_res_arr_mem_71185_cached_sizze_74052 <
        (size_t) ((int64_t) 4 * num_tasks_71182)) {
        reduce_stage_1_tid_res_arr_mem_71185 =
            realloc(reduce_stage_1_tid_res_arr_mem_71185, (int64_t) 4 *
                    num_tasks_71182);
        reduce_stage_1_tid_res_arr_mem_71185_cached_sizze_74052 = (int64_t) 4 *
            num_tasks_71182;
    }
    if (reduce_stage_1_tid_res_arr_mem_71187_cached_sizze_74053 <
        (size_t) ((int64_t) 4 * num_tasks_71182)) {
        reduce_stage_1_tid_res_arr_mem_71187 =
            realloc(reduce_stage_1_tid_res_arr_mem_71187, (int64_t) 4 *
                    num_tasks_71182);
        reduce_stage_1_tid_res_arr_mem_71187_cached_sizze_74053 = (int64_t) 4 *
            num_tasks_71182;
    }
    if (reduce_stage_1_tid_res_arr_mem_71189_cached_sizze_74054 <
        (size_t) ((int64_t) 4 * num_tasks_71182)) {
        reduce_stage_1_tid_res_arr_mem_71189 =
            realloc(reduce_stage_1_tid_res_arr_mem_71189, (int64_t) 4 *
                    num_tasks_71182);
        reduce_stage_1_tid_res_arr_mem_71189_cached_sizze_74054 = (int64_t) 4 *
            num_tasks_71182;
    }
    if (reduce_stage_1_tid_res_arr_mem_71191_cached_sizze_74055 <
        (size_t) ((int64_t) 4 * num_tasks_71182)) {
        reduce_stage_1_tid_res_arr_mem_71191 =
            realloc(reduce_stage_1_tid_res_arr_mem_71191, (int64_t) 4 *
                    num_tasks_71182);
        reduce_stage_1_tid_res_arr_mem_71191_cached_sizze_74055 = (int64_t) 4 *
            num_tasks_71182;
    }
    
    int64_t iter_71193;
    struct futhark_mc_segred_stage_1_parloop_struct_74056
    futhark_mc_segred_stage_1_parloop_struct_74056;
    
    futhark_mc_segred_stage_1_parloop_struct_74056.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_last_res_64957 =
        last_res_64957;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_mem_67758 =
        mem_67758.mem;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_mem_67764 =
        mem_67764.mem;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_min_res_70563 =
        min_res_70563;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_defunc_1_f_res_70582 =
        defunc_1_f_res_70582;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_defunc_0_f_res_70583 =
        defunc_0_f_res_70583;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_reduce_stage_1_tid_res_arr_mem_71183 =
        reduce_stage_1_tid_res_arr_mem_71183;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_reduce_stage_1_tid_res_arr_mem_71185 =
        reduce_stage_1_tid_res_arr_mem_71185;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_reduce_stage_1_tid_res_arr_mem_71187 =
        reduce_stage_1_tid_res_arr_mem_71187;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_reduce_stage_1_tid_res_arr_mem_71189 =
        reduce_stage_1_tid_res_arr_mem_71189;
    futhark_mc_segred_stage_1_parloop_struct_74056.free_reduce_stage_1_tid_res_arr_mem_71191 =
        reduce_stage_1_tid_res_arr_mem_71191;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74057_task;
    
    futhark_mc_segred_stage_1_parloop_74057_task.name =
        "futhark_mc_segred_stage_1_parloop_74057";
    futhark_mc_segred_stage_1_parloop_74057_task.fn =
        futhark_mc_segred_stage_1_parloop_74057;
    futhark_mc_segred_stage_1_parloop_74057_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74056;
    futhark_mc_segred_stage_1_parloop_74057_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74057_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74057_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74057_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74057_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74057_task);
    
    if (futhark_mc_segred_stage_1_parloop_74057_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74057_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74057_total_end -
                 futhark_mc_segred_stage_1_parloop_74057_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74057_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74057_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74057_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_70584 = 0.0F;
        defunc_2_reduce_res_70585 = 0.0F;
        defunc_2_reduce_res_70586 = 0.0F;
        defunc_2_reduce_res_70587 = 0.0F;
        defunc_2_reduce_res_70588 = 0.0F;
    }
    
    float x_71199;
    float x_71200;
    float x_71202;
    float x_71203;
    float x_71205;
    float x_71206;
    float x_71208;
    float x_71209;
    float x_71211;
    float x_71212;
    
    for (int32_t i_71214 = 0; i_71214 < num_tasks_71182; i_71214++) {
        flat_tid_64751 = i_71214;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71199 = defunc_2_reduce_res_70584;
            }
            // load next params
            {
                x_71200 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71183)[flat_tid_64751];
            }
            // red body
            {
                float defunc_1_op_res_71201 = x_71199 + x_71200;
                
                defunc_2_reduce_res_70584 = defunc_1_op_res_71201;
            }
            // load acc params
            {
                x_71202 = defunc_2_reduce_res_70585;
            }
            // load next params
            {
                x_71203 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71185)[flat_tid_64751];
            }
            // red body
            {
                float defunc_1_op_res_71204 = x_71202 + x_71203;
                
                defunc_2_reduce_res_70585 = defunc_1_op_res_71204;
            }
            // load acc params
            {
                x_71205 = defunc_2_reduce_res_70586;
            }
            // load next params
            {
                x_71206 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71187)[flat_tid_64751];
            }
            // red body
            {
                float defunc_1_op_res_71207 = x_71205 + x_71206;
                
                defunc_2_reduce_res_70586 = defunc_1_op_res_71207;
            }
            // load acc params
            {
                x_71208 = defunc_2_reduce_res_70587;
            }
            // load next params
            {
                x_71209 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71189)[flat_tid_64751];
            }
            // red body
            {
                float defunc_1_op_res_71210 = x_71208 + x_71209;
                
                defunc_2_reduce_res_70587 = defunc_1_op_res_71210;
            }
            // load acc params
            {
                x_71211 = defunc_2_reduce_res_70588;
            }
            // load next params
            {
                x_71212 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71191)[flat_tid_64751];
            }
            // red body
            {
                float defunc_1_op_res_71213 = x_71211 + x_71212;
                
                defunc_2_reduce_res_70588 = defunc_1_op_res_71213;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71183);
    free(reduce_stage_1_tid_res_arr_mem_71185);
    free(reduce_stage_1_tid_res_arr_mem_71187);
    free(reduce_stage_1_tid_res_arr_mem_71189);
    free(reduce_stage_1_tid_res_arr_mem_71191);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74050_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74050_end -
                 futhark_mc_segred_task_74050_start;
        
        ctx->futhark_mc_segred_task_74050_runs[tid]++;
        ctx->futhark_mc_segred_task_74050_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74050_iter[tid] += iterations;
    }
    *futhark_mc_task_74049->retval_defunc_2_reduce_res_70584 =
        defunc_2_reduce_res_70584;
    *futhark_mc_task_74049->retval_defunc_2_reduce_res_70585 =
        defunc_2_reduce_res_70585;
    *futhark_mc_task_74049->retval_defunc_2_reduce_res_70586 =
        defunc_2_reduce_res_70586;
    *futhark_mc_task_74049->retval_defunc_2_reduce_res_70587 =
        defunc_2_reduce_res_70587;
    *futhark_mc_task_74049->retval_defunc_2_reduce_res_70588 =
        defunc_2_reduce_res_70588;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74058 {
    struct futhark_context *ctx;
    int64_t free_last_res_64957;
    char *free_mem_67752;
    char *free_mem_67758;
    char *free_mem_67764;
    int64_t free_min_res_70563;
    float free_defunc_1_f_res_70582;
    float free_defunc_0_f_res_70583;
    float free_a12_70643;
    float free_b12_70644;
    float free_c12_70645;
    float free_b2_70646;
    float free_c2_70647;
    float *retval_defunc_2_reduce_res_70648;
    float *retval_defunc_2_reduce_res_70649;
};
struct futhark_mc_segred_stage_1_parloop_struct_74062 {
    struct futhark_context *ctx;
    int64_t free_last_res_64957;
    char *free_mem_67752;
    char *free_mem_67758;
    char *free_mem_67764;
    int64_t free_min_res_70563;
    float free_defunc_1_f_res_70582;
    float free_defunc_0_f_res_70583;
    float free_a12_70643;
    float free_b12_70644;
    float free_c12_70645;
    float free_b2_70646;
    float free_c2_70647;
    char *free_reduce_stage_1_tid_res_arr_mem_71216;
    char *free_reduce_stage_1_tid_res_arr_mem_71218;
};
static int futhark_mc_segred_stage_1_parloop_74063(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64753, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74062
    *futhark_mc_segred_stage_1_parloop_struct_74062 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74062 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74062->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74063_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74063_start = get_wall_time();
    
    int64_t last_res_64957 =
            futhark_mc_segred_stage_1_parloop_struct_74062->free_last_res_64957;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74062->free_mem_67752,
                                 .size =0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74062->free_mem_67758,
                                 .size =0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74062->free_mem_67764,
                                 .size =0, .references =NULL};
    int64_t min_res_70563 =
            futhark_mc_segred_stage_1_parloop_struct_74062->free_min_res_70563;
    float defunc_1_f_res_70582 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_defunc_1_f_res_70582;
    float defunc_0_f_res_70583 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_defunc_0_f_res_70583;
    float a12_70643 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_a12_70643;
    float b12_70644 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_b12_70644;
    float c12_70645 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_c12_70645;
    float b2_70646 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_b2_70646;
    float c2_70647 =
          futhark_mc_segred_stage_1_parloop_struct_74062->free_c2_70647;
    struct memblock reduce_stage_1_tid_res_arr_mem_71216 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71216",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74062->free_reduce_stage_1_tid_res_arr_mem_71216,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71218 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71218",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74062->free_reduce_stage_1_tid_res_arr_mem_71218,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71220 = start;
    float x_71135;
    float x_71136;
    float x_71138;
    float x_71139;
    float local_acc_71221 = 0.0F;
    float local_acc_71222 = 0.0F;
    
    for (; iter_71220 < end; iter_71220++) {
        int64_t gtid_64754 = iter_71220;
        float x_71141 = ((float *) mem_67764.mem)[gtid_64754];
        bool cond_71142 = sle64(last_res_64957, gtid_64754);
        float defunc_0_f_res_71143;
        
        if (cond_71142) {
            defunc_0_f_res_71143 = 0.0F;
        } else {
            int64_t i_71144 = add64(gtid_64754, min_res_70563);
            float x_71145 = ((float *) mem_67758.mem)[i_71144];
            float defunc_0_f_res_f_res_71146 = 1.0F + x_71145;
            
            defunc_0_f_res_71143 = defunc_0_f_res_f_res_71146;
        }
        
        float x_j_71147 = defunc_0_f_res_71143 - defunc_0_f_res_70583;
        float abs_res_71148 = (float) fabs(x_j_71147);
        float tmp1_71149 = abs_res_71148 / defunc_1_f_res_70582;
        float x_71150 = tmp1_71149 * tmp1_71149;
        float y_71151 = tmp1_71149 * x_71150;
        float tmp2_71152 = 1.0F - y_71151;
        float x_71153 = tmp2_71152 * tmp2_71152;
        float tmp3_71154 = tmp2_71152 * x_71153;
        float tmp4_71155 = x_71141 * tmp3_71154;
        float defunc_1_f_res_71156 = x_j_71147 * tmp4_71155;
        float defunc_1_f_res_71157 = x_j_71147 * defunc_1_f_res_71156;
        float defunc_0_f_res_71158;
        
        if (cond_71142) {
            defunc_0_f_res_71158 = 0.0F;
        } else {
            int64_t i_71159 = add64(gtid_64754, min_res_70563);
            float x_71160 = ((float *) mem_67752.mem)[i_71159];
            
            defunc_0_f_res_71158 = x_71160;
        }
        
        float x_71161 = a12_70643 * tmp4_71155;
        float y_71162 = b12_70644 * defunc_1_f_res_71156;
        float x_71163 = x_71161 + y_71162;
        float y_71164 = c12_70645 * defunc_1_f_res_71157;
        float x_71165 = x_71163 + y_71164;
        float defunc_9_fit_fun_res_71166 = defunc_0_f_res_71158 * x_71165;
        float x_71167 = b12_70644 * tmp4_71155;
        float y_71168 = b2_70646 * defunc_1_f_res_71156;
        float x_71169 = x_71167 + y_71168;
        float y_71170 = c2_70647 * defunc_1_f_res_71157;
        float x_71171 = x_71169 + y_71170;
        float defunc_9_slope_fun_res_71172 = defunc_0_f_res_71158 * x_71171;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71135 = local_acc_71221;
        }
        // Load next params
        {
            x_71136 = defunc_9_fit_fun_res_71166;
        }
        // Red body
        {
            float defunc_1_op_res_71137 = x_71135 + x_71136;
            
            local_acc_71221 = defunc_1_op_res_71137;
        }
        // Load accum params
        {
            x_71138 = local_acc_71222;
        }
        // Load next params
        {
            x_71139 = defunc_9_slope_fun_res_71172;
        }
        // Red body
        {
            float defunc_1_op_res_71140 = x_71138 + x_71139;
            
            local_acc_71222 = defunc_1_op_res_71140;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71216.mem)[flat_tid_64753] =
        local_acc_71221;
    ((float *) reduce_stage_1_tid_res_arr_mem_71218.mem)[flat_tid_64753] =
        local_acc_71222;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74063_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74063_end -
                 futhark_mc_segred_stage_1_parloop_74063_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74063_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74063_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74063_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74059(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64753 = tid;
    int num_tasks_71215 = info.nsubtasks;
    struct futhark_mc_task_74058 *futhark_mc_task_74058 =
                                 (struct futhark_mc_task_74058 *) args;
    struct futhark_context *ctx = futhark_mc_task_74058->ctx;
    uint64_t futhark_mc_segred_task_74059_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74059_start = get_wall_time();
    
    int64_t last_res_64957 = futhark_mc_task_74058->free_last_res_64957;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_task_74058->free_mem_67752, .size =
                                 0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_task_74058->free_mem_67758, .size =
                                 0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_task_74058->free_mem_67764, .size =
                                 0, .references =NULL};
    int64_t min_res_70563 = futhark_mc_task_74058->free_min_res_70563;
    float defunc_1_f_res_70582 =
          futhark_mc_task_74058->free_defunc_1_f_res_70582;
    float defunc_0_f_res_70583 =
          futhark_mc_task_74058->free_defunc_0_f_res_70583;
    float a12_70643 = futhark_mc_task_74058->free_a12_70643;
    float b12_70644 = futhark_mc_task_74058->free_b12_70644;
    float c12_70645 = futhark_mc_task_74058->free_c12_70645;
    float b2_70646 = futhark_mc_task_74058->free_b2_70646;
    float c2_70647 = futhark_mc_task_74058->free_c2_70647;
    float defunc_2_reduce_res_70648 =
          *futhark_mc_task_74058->retval_defunc_2_reduce_res_70648;
    float defunc_2_reduce_res_70649 =
          *futhark_mc_task_74058->retval_defunc_2_reduce_res_70649;
    size_t reduce_stage_1_tid_res_arr_mem_71216_cached_sizze_74060 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71216 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71218_cached_sizze_74061 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71218 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71216_cached_sizze_74060 <
        (size_t) ((int64_t) 4 * num_tasks_71215)) {
        reduce_stage_1_tid_res_arr_mem_71216 =
            realloc(reduce_stage_1_tid_res_arr_mem_71216, (int64_t) 4 *
                    num_tasks_71215);
        reduce_stage_1_tid_res_arr_mem_71216_cached_sizze_74060 = (int64_t) 4 *
            num_tasks_71215;
    }
    if (reduce_stage_1_tid_res_arr_mem_71218_cached_sizze_74061 <
        (size_t) ((int64_t) 4 * num_tasks_71215)) {
        reduce_stage_1_tid_res_arr_mem_71218 =
            realloc(reduce_stage_1_tid_res_arr_mem_71218, (int64_t) 4 *
                    num_tasks_71215);
        reduce_stage_1_tid_res_arr_mem_71218_cached_sizze_74061 = (int64_t) 4 *
            num_tasks_71215;
    }
    
    int64_t iter_71220;
    struct futhark_mc_segred_stage_1_parloop_struct_74062
    futhark_mc_segred_stage_1_parloop_struct_74062;
    
    futhark_mc_segred_stage_1_parloop_struct_74062.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_last_res_64957 =
        last_res_64957;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_mem_67752 =
        mem_67752.mem;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_mem_67758 =
        mem_67758.mem;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_mem_67764 =
        mem_67764.mem;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_min_res_70563 =
        min_res_70563;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_defunc_1_f_res_70582 =
        defunc_1_f_res_70582;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_defunc_0_f_res_70583 =
        defunc_0_f_res_70583;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_a12_70643 = a12_70643;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_b12_70644 = b12_70644;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_c12_70645 = c12_70645;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_b2_70646 = b2_70646;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_c2_70647 = c2_70647;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_reduce_stage_1_tid_res_arr_mem_71216 =
        reduce_stage_1_tid_res_arr_mem_71216;
    futhark_mc_segred_stage_1_parloop_struct_74062.free_reduce_stage_1_tid_res_arr_mem_71218 =
        reduce_stage_1_tid_res_arr_mem_71218;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74063_task;
    
    futhark_mc_segred_stage_1_parloop_74063_task.name =
        "futhark_mc_segred_stage_1_parloop_74063";
    futhark_mc_segred_stage_1_parloop_74063_task.fn =
        futhark_mc_segred_stage_1_parloop_74063;
    futhark_mc_segred_stage_1_parloop_74063_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74062;
    futhark_mc_segred_stage_1_parloop_74063_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74063_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74063_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74063_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74063_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74063_task);
    
    if (futhark_mc_segred_stage_1_parloop_74063_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74063_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74063_total_end -
                 futhark_mc_segred_stage_1_parloop_74063_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74063_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74063_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74063_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_70648 = 0.0F;
        defunc_2_reduce_res_70649 = 0.0F;
    }
    
    float x_71223;
    float x_71224;
    float x_71226;
    float x_71227;
    
    for (int32_t i_71229 = 0; i_71229 < num_tasks_71215; i_71229++) {
        flat_tid_64753 = i_71229;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71223 = defunc_2_reduce_res_70648;
            }
            // load next params
            {
                x_71224 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71216)[flat_tid_64753];
            }
            // red body
            {
                float defunc_1_op_res_71225 = x_71223 + x_71224;
                
                defunc_2_reduce_res_70648 = defunc_1_op_res_71225;
            }
            // load acc params
            {
                x_71226 = defunc_2_reduce_res_70649;
            }
            // load next params
            {
                x_71227 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71218)[flat_tid_64753];
            }
            // red body
            {
                float defunc_1_op_res_71228 = x_71226 + x_71227;
                
                defunc_2_reduce_res_70649 = defunc_1_op_res_71228;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71216);
    free(reduce_stage_1_tid_res_arr_mem_71218);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74059_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74059_end -
                 futhark_mc_segred_task_74059_start;
        
        ctx->futhark_mc_segred_task_74059_runs[tid]++;
        ctx->futhark_mc_segred_task_74059_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74059_iter[tid] += iterations;
    }
    *futhark_mc_task_74058->retval_defunc_2_reduce_res_70648 =
        defunc_2_reduce_res_70648;
    *futhark_mc_task_74058->retval_defunc_2_reduce_res_70649 =
        defunc_2_reduce_res_70649;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74048(void *args, int64_t start,
                                           int64_t end, int flat_tid_64749,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74047
    *futhark_mc_segmap_parloop_struct_74047 =
    (struct futhark_mc_segmap_parloop_struct_74047 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74047->ctx;
    uint64_t futhark_mc_segmap_parloop_74048_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74048_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74047->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74047->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74047->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74047->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74047->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74047->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74047->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74047->free_loop_cond_62389;
    int64_t last_res_64957 =
            futhark_mc_segmap_parloop_struct_74047->free_last_res_64957;
    int64_t min_arg_64969 =
            futhark_mc_segmap_parloop_struct_74047->free_min_arg_64969;
    int64_t min_arg_64970 =
            futhark_mc_segmap_parloop_struct_74047->free_min_arg_64970;
    float max_res_64974 =
          futhark_mc_segmap_parloop_struct_74047->free_max_res_64974;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67752,
                                 .size =0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67755,
                                 .size =0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67758,
                                 .size =0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67761,
                                 .size =0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67764,
                                 .size =0, .references =NULL};
    struct memblock mem_67767 = {.desc ="mem_67767", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67767,
                                 .size =0, .references =NULL};
    struct memblock mem_67770 = {.desc ="mem_67770", .mem =
                                 futhark_mc_segmap_parloop_struct_74047->free_mem_67770,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71045 = start;
    
    for (; iter_71045 < end; iter_71045++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71173 = n_m_62372;
        int64_t gtid_64750 = iter_71045;
        int64_t remnant_71174 = iter_71045 - gtid_64750;
        int64_t min_arg_70498 = mul64(jump_62368, gtid_64750);
        int64_t min_res_70499 = smin64(i_62378, min_arg_70498);
        int64_t defunc_0_g_res_70500 = add64((int64_t) 1, min_res_70499);
        bool init_idx_70501;
        int64_t init_idx_70502;
        int64_t init_idx_70503;
        bool loop_while_71046;
        int64_t low_71047;
        int64_t high_71048;
        
        loop_while_71046 = x_62379;
        low_71047 = (int64_t) 0;
        high_71048 = i_62378;
        while (loop_while_71046) {
            int64_t x_71049 = add64(low_71047, high_71048);
            int64_t mid_71050 = sdiv64(x_71049, (int64_t) 2);
            bool x_71051 = sle64((int64_t) 0, mid_71050);
            bool y_71052 = slt64(mid_71050, n_62364);
            bool bounds_check_71053 = x_71051 && y_71052;
            bool index_certs_71054;
            
            if (!bounds_check_71053) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71050,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_71055 = ((int64_t *) mem_67761.mem)[mid_71050];
            bool cond_71056 = slt64(mid_id_71055, (int64_t) 0);
            int64_t mid_idx_71057;
            
            if (cond_71056) {
                mid_idx_71057 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_71057 = mid_id_71055;
            }
            
            bool cond_71058 = sle64(defunc_0_g_res_70500, mid_idx_71057);
            int64_t loopres_71059;
            int64_t loopres_71060;
            
            if (cond_71058) {
                int64_t loopres_t_res_71061 = sub64(mid_71050, (int64_t) 1);
                
                loopres_71059 = low_71047;
                loopres_71060 = loopres_t_res_71061;
            } else {
                int64_t loopres_f_res_71062 = add64((int64_t) 1, mid_71050);
                
                loopres_71059 = loopres_f_res_71062;
                loopres_71060 = high_71048;
            }
            
            bool loop_cond_71063 = sle64(loopres_71059, loopres_71060);
            bool loop_while_tmp_71175 = loop_cond_71063;
            int64_t low_tmp_71176 = loopres_71059;
            int64_t high_tmp_71177 = loopres_71060;
            
            loop_while_71046 = loop_while_tmp_71175;
            low_71047 = low_tmp_71176;
            high_71048 = high_tmp_71177;
        }
        init_idx_70501 = loop_while_71046;
        init_idx_70502 = low_71047;
        init_idx_70503 = high_71048;
        
        bool idx_70522;
        int64_t idx_70523;
        int64_t idx_70524;
        int64_t idx_70525;
        bool loop_while_71064;
        int64_t l_idx_71065;
        int64_t r_idx_71066;
        int64_t span_71067;
        
        loop_while_71064 = loop_cond_62389;
        l_idx_71065 = init_idx_70502;
        r_idx_71066 = init_idx_70502;
        span_71067 = (int64_t) 1;
        while (loop_while_71064) {
            int64_t max_arg_71068 = sub64(l_idx_71065, (int64_t) 1);
            int64_t max_res_71069 = smax64((int64_t) 0, max_arg_71068);
            int64_t min_arg_71070 = add64((int64_t) 1, r_idx_71066);
            int64_t min_res_71071 = smin64(min_arg_64969, min_arg_71070);
            bool x_71072 = sle64((int64_t) 0, max_res_71069);
            bool y_71073 = slt64(max_res_71069, n_62364);
            bool bounds_check_71074 = x_71072 && y_71073;
            bool index_certs_71075;
            
            if (!bounds_check_71074) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71069,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71076 = ((int64_t *) mem_67761.mem)[max_res_71069];
            int64_t abs_arg_71077 = sub64(x_71076, defunc_0_g_res_70500);
            int64_t abs_res_71078 = abs64(abs_arg_71077);
            bool x_71079 = sle64((int64_t) 0, min_res_71071);
            bool y_71080 = slt64(min_res_71071, n_62364);
            bool bounds_check_71081 = x_71079 && y_71080;
            bool index_certs_71082;
            
            if (!bounds_check_71081) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71071,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71083 = ((int64_t *) mem_67761.mem)[min_res_71071];
            int64_t abs_arg_71084 = sub64(x_71083, defunc_0_g_res_70500);
            int64_t abs_res_71085 = abs64(abs_arg_71084);
            bool cond_71086 = max_res_71069 == l_idx_71065;
            int64_t loopres_71087;
            int64_t loopres_71088;
            int64_t loopres_71089;
            
            if (cond_71086) {
                loopres_71087 = l_idx_71065;
                loopres_71088 = r_idx_71066;
                loopres_71089 = min_res_62384;
            } else {
                bool cond_71090 = slt64(abs_res_71078, abs_res_71085);
                bool cond_f_res_71091 = min_res_71071 == r_idx_71066;
                bool x_71092 = !cond_71090;
                bool y_71093 = cond_f_res_71091 && x_71092;
                bool cond_71094 = cond_71090 || y_71093;
                int64_t loopres_f_res_71095;
                
                if (cond_71094) {
                    loopres_f_res_71095 = max_res_71069;
                } else {
                    loopres_f_res_71095 = l_idx_71065;
                }
                
                int64_t loopres_f_res_71096;
                
                if (cond_71094) {
                    loopres_f_res_71096 = r_idx_71066;
                } else {
                    loopres_f_res_71096 = min_res_71071;
                }
                
                int64_t loopres_f_res_71097;
                
                if (cond_71094) {
                    int64_t loopres_f_res_t_res_71098 = add64((int64_t) 1,
                                                              span_71067);
                    
                    loopres_f_res_71097 = loopres_f_res_t_res_71098;
                } else {
                    int64_t loopres_f_res_f_res_71099 = add64((int64_t) 1,
                                                              span_71067);
                    
                    loopres_f_res_71097 = loopres_f_res_f_res_71099;
                }
                loopres_71087 = loopres_f_res_71095;
                loopres_71088 = loopres_f_res_71096;
                loopres_71089 = loopres_f_res_71097;
            }
            
            bool loop_cond_71100 = slt64(loopres_71089, min_res_62384);
            bool loop_while_tmp_71178 = loop_cond_71100;
            int64_t l_idx_tmp_71179 = loopres_71087;
            int64_t r_idx_tmp_71180 = loopres_71088;
            int64_t span_tmp_71181 = loopres_71089;
            
            loop_while_71064 = loop_while_tmp_71178;
            l_idx_71065 = l_idx_tmp_71179;
            r_idx_71066 = r_idx_tmp_71180;
            span_71067 = span_tmp_71181;
        }
        idx_70522 = loop_while_71064;
        idx_70523 = l_idx_71065;
        idx_70524 = r_idx_71066;
        idx_70525 = span_71067;
        
        int64_t min_res_70563 = smin64(min_arg_64970, idx_70523);
        int64_t x_70564 = add64(min_res_62384, min_res_70563);
        int64_t r_70565 = sub64(x_70564, (int64_t) 1);
        bool x_70566 = sle64((int64_t) 0, r_70565);
        bool y_70567 = slt64(r_70565, n_62364);
        bool bounds_check_70568 = x_70566 && y_70567;
        bool index_certs_70569;
        
        if (!bounds_check_70568) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_70565,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_70570 = ((int64_t *) mem_67755.mem)[r_70565];
        int64_t abs_arg_70571 = sub64(x_70570, min_res_70499);
        int64_t abs_res_70572 = abs64(abs_arg_70571);
        bool x_70573 = sle64((int64_t) 0, min_res_70563);
        bool y_70574 = slt64(min_res_70563, n_62364);
        bool bounds_check_70575 = x_70573 && y_70574;
        bool index_certs_70576;
        
        if (!bounds_check_70575) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_70563,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_70577 = ((int64_t *) mem_67755.mem)[min_res_70563];
        int64_t abs_arg_70578 = sub64(x_70577, min_res_70499);
        int64_t abs_res_70579 = abs64(abs_arg_70578);
        int64_t max_res_70580 = smax64(abs_res_70572, abs_res_70579);
        float defunc_0_f_res_70581 = sitofp_i64_f32(max_res_70580);
        float defunc_1_f_res_70582 = max_res_64974 + defunc_0_f_res_70581;
        float defunc_0_f_res_70583 = sitofp_i64_f32(min_res_70499);
        float defunc_2_reduce_res_70584;
        float defunc_2_reduce_res_70585;
        float defunc_2_reduce_res_70586;
        float defunc_2_reduce_res_70587;
        float defunc_2_reduce_res_70588;
        int64_t flat_tid_64751 = (int64_t) 0;
        int32_t num_tasks_71182;
        struct futhark_mc_task_74049 futhark_mc_task_74049;
        
        futhark_mc_task_74049.ctx = ctx;
        futhark_mc_task_74049.free_last_res_64957 = last_res_64957;
        futhark_mc_task_74049.free_mem_67758 = mem_67758.mem;
        futhark_mc_task_74049.free_mem_67764 = mem_67764.mem;
        futhark_mc_task_74049.free_min_res_70563 = min_res_70563;
        futhark_mc_task_74049.free_defunc_1_f_res_70582 = defunc_1_f_res_70582;
        futhark_mc_task_74049.free_defunc_0_f_res_70583 = defunc_0_f_res_70583;
        futhark_mc_task_74049.retval_defunc_2_reduce_res_70584 =
            &defunc_2_reduce_res_70584;
        futhark_mc_task_74049.retval_defunc_2_reduce_res_70585 =
            &defunc_2_reduce_res_70585;
        futhark_mc_task_74049.retval_defunc_2_reduce_res_70586 =
            &defunc_2_reduce_res_70586;
        futhark_mc_task_74049.retval_defunc_2_reduce_res_70587 =
            &defunc_2_reduce_res_70587;
        futhark_mc_task_74049.retval_defunc_2_reduce_res_70588 =
            &defunc_2_reduce_res_70588;
        
        struct scheduler_segop futhark_mc_task_74049_task;
        
        futhark_mc_task_74049_task.args = &futhark_mc_task_74049;
        futhark_mc_task_74049_task.top_level_fn = futhark_mc_segred_task_74050;
        futhark_mc_task_74049_task.name = "futhark_mc_segred_task_74050";
        futhark_mc_task_74049_task.iterations = q_62366;
        futhark_mc_task_74049_task.task_time =
            &ctx->futhark_mc_segred_task_74050_total_time;
        futhark_mc_task_74049_task.task_iter =
            &ctx->futhark_mc_segred_task_74050_total_iter;
        futhark_mc_task_74049_task.sched = STATIC;
        futhark_mc_task_74049_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74050_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74049_task);
        
        if (futhark_mc_segred_task_74050_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_70623 = defunc_2_reduce_res_70586 * defunc_2_reduce_res_70588;
        float y_70624 = defunc_2_reduce_res_70587 * defunc_2_reduce_res_70587;
        float a12_70625 = x_70623 - y_70624;
        float x_70626 = defunc_2_reduce_res_70586 * defunc_2_reduce_res_70587;
        float y_70627 = defunc_2_reduce_res_70585 * defunc_2_reduce_res_70588;
        float b12_70628 = x_70626 - y_70627;
        float x_70629 = defunc_2_reduce_res_70585 * defunc_2_reduce_res_70587;
        float y_70630 = defunc_2_reduce_res_70586 * defunc_2_reduce_res_70586;
        float c12_70631 = x_70629 - y_70630;
        float x_70632 = defunc_2_reduce_res_70584 * defunc_2_reduce_res_70588;
        float b2_70633 = x_70632 - y_70630;
        float x_70634 = defunc_2_reduce_res_70585 * defunc_2_reduce_res_70586;
        float y_70635 = defunc_2_reduce_res_70584 * defunc_2_reduce_res_70587;
        float c2_70636 = x_70634 - y_70635;
        float x_70637 = defunc_2_reduce_res_70584 * a12_70625;
        float y_70638 = defunc_2_reduce_res_70585 * b12_70628;
        float x_70639 = x_70637 + y_70638;
        float y_70640 = defunc_2_reduce_res_70586 * c12_70631;
        float y_70641 = x_70639 + y_70640;
        float det_70642 = 1.0F / y_70641;
        float a12_70643 = a12_70625 * det_70642;
        float b12_70644 = b12_70628 * det_70642;
        float c12_70645 = c12_70631 * det_70642;
        float b2_70646 = b2_70633 * det_70642;
        float c2_70647 = c2_70636 * det_70642;
        float defunc_2_reduce_res_70648;
        float defunc_2_reduce_res_70649;
        int64_t flat_tid_64753 = (int64_t) 0;
        int32_t num_tasks_71215;
        struct futhark_mc_task_74058 futhark_mc_task_74058;
        
        futhark_mc_task_74058.ctx = ctx;
        futhark_mc_task_74058.free_last_res_64957 = last_res_64957;
        futhark_mc_task_74058.free_mem_67752 = mem_67752.mem;
        futhark_mc_task_74058.free_mem_67758 = mem_67758.mem;
        futhark_mc_task_74058.free_mem_67764 = mem_67764.mem;
        futhark_mc_task_74058.free_min_res_70563 = min_res_70563;
        futhark_mc_task_74058.free_defunc_1_f_res_70582 = defunc_1_f_res_70582;
        futhark_mc_task_74058.free_defunc_0_f_res_70583 = defunc_0_f_res_70583;
        futhark_mc_task_74058.free_a12_70643 = a12_70643;
        futhark_mc_task_74058.free_b12_70644 = b12_70644;
        futhark_mc_task_74058.free_c12_70645 = c12_70645;
        futhark_mc_task_74058.free_b2_70646 = b2_70646;
        futhark_mc_task_74058.free_c2_70647 = c2_70647;
        futhark_mc_task_74058.retval_defunc_2_reduce_res_70648 =
            &defunc_2_reduce_res_70648;
        futhark_mc_task_74058.retval_defunc_2_reduce_res_70649 =
            &defunc_2_reduce_res_70649;
        
        struct scheduler_segop futhark_mc_task_74058_task;
        
        futhark_mc_task_74058_task.args = &futhark_mc_task_74058;
        futhark_mc_task_74058_task.top_level_fn = futhark_mc_segred_task_74059;
        futhark_mc_task_74058_task.name = "futhark_mc_segred_task_74059";
        futhark_mc_task_74058_task.iterations = q_62366;
        futhark_mc_task_74058_task.task_time =
            &ctx->futhark_mc_segred_task_74059_total_time;
        futhark_mc_task_74058_task.task_iter =
            &ctx->futhark_mc_segred_task_74059_total_iter;
        futhark_mc_task_74058_task.sched = STATIC;
        futhark_mc_task_74058_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74059_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74058_task);
        
        if (futhark_mc_segred_task_74059_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67767.mem)[gtid_64750] = defunc_2_reduce_res_70648;
        ((float *) mem_67770.mem)[gtid_64750] = defunc_2_reduce_res_70649;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74048_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74048_end -
                 futhark_mc_segmap_parloop_74048_start;
        
        ctx->futhark_mc_segmap_parloop_74048_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74048_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74048_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74046(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64749 = tid;
    int num_tasks_70905 = info.nsubtasks;
    struct futhark_mc_task_74042 *futhark_mc_task_74042 =
                                 (struct futhark_mc_task_74042 *) args;
    struct futhark_context *ctx = futhark_mc_task_74042->ctx;
    uint64_t futhark_mc_segmap_nested_task_74046_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74046_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74042->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74042->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74042->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74042->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74042->free_i_62378;
    bool x_62379 = futhark_mc_task_74042->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74042->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74042->free_loop_cond_62389;
    int64_t last_res_64957 = futhark_mc_task_74042->free_last_res_64957;
    int64_t min_arg_64969 = futhark_mc_task_74042->free_min_arg_64969;
    int64_t min_arg_64970 = futhark_mc_task_74042->free_min_arg_64970;
    float max_res_64974 = futhark_mc_task_74042->free_max_res_64974;
    struct memblock mem_67752 = {.desc ="mem_67752", .mem =
                                 futhark_mc_task_74042->free_mem_67752, .size =
                                 0, .references =NULL};
    struct memblock mem_67755 = {.desc ="mem_67755", .mem =
                                 futhark_mc_task_74042->free_mem_67755, .size =
                                 0, .references =NULL};
    struct memblock mem_67758 = {.desc ="mem_67758", .mem =
                                 futhark_mc_task_74042->free_mem_67758, .size =
                                 0, .references =NULL};
    struct memblock mem_67761 = {.desc ="mem_67761", .mem =
                                 futhark_mc_task_74042->free_mem_67761, .size =
                                 0, .references =NULL};
    struct memblock mem_67764 = {.desc ="mem_67764", .mem =
                                 futhark_mc_task_74042->free_mem_67764, .size =
                                 0, .references =NULL};
    struct memblock mem_67767 = {.desc ="mem_67767", .mem =
                                 futhark_mc_task_74042->free_mem_67767, .size =
                                 0, .references =NULL};
    struct memblock mem_67770 = {.desc ="mem_67770", .mem =
                                 futhark_mc_task_74042->free_mem_67770, .size =
                                 0, .references =NULL};
    int64_t iter_71045;
    struct futhark_mc_segmap_parloop_struct_74047
    futhark_mc_segmap_parloop_struct_74047;
    
    futhark_mc_segmap_parloop_struct_74047.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74047.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74047.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74047.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74047.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74047.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74047.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74047.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74047.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74047.free_last_res_64957 = last_res_64957;
    futhark_mc_segmap_parloop_struct_74047.free_min_arg_64969 = min_arg_64969;
    futhark_mc_segmap_parloop_struct_74047.free_min_arg_64970 = min_arg_64970;
    futhark_mc_segmap_parloop_struct_74047.free_max_res_64974 = max_res_64974;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67752 = mem_67752.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67755 = mem_67755.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67758 = mem_67758.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67761 = mem_67761.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67764 = mem_67764.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67767 = mem_67767.mem;
    futhark_mc_segmap_parloop_struct_74047.free_mem_67770 = mem_67770.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74048_task;
    
    futhark_mc_segmap_parloop_74048_task.name =
        "futhark_mc_segmap_parloop_74048";
    futhark_mc_segmap_parloop_74048_task.fn = futhark_mc_segmap_parloop_74048;
    futhark_mc_segmap_parloop_74048_task.args =
        &futhark_mc_segmap_parloop_struct_74047;
    futhark_mc_segmap_parloop_74048_task.iterations = iterations;
    futhark_mc_segmap_parloop_74048_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74048_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74048_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74048_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74048_task);
    
    if (futhark_mc_segmap_parloop_74048_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74048_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74048_total_end -
                 futhark_mc_segmap_parloop_74048_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74048_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74048_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74048_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74046_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74046_end -
                 futhark_mc_segmap_nested_task_74046_start;
        
        ctx->futhark_mc_segmap_nested_task_74046_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74046_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74046_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74014(void *args, int64_t start,
                                           int64_t end, int flat_tid_64737,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74013
    *futhark_mc_segmap_parloop_struct_74013 =
    (struct futhark_mc_segmap_parloop_struct_74013 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74013->ctx;
    uint64_t futhark_mc_segmap_parloop_74014_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74014_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74013->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74013->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74013->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74013->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74013->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74013->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74013->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74013->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74013->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74013->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74013->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67747 =
            futhark_mc_segmap_parloop_struct_74013->free_bytes_67747;
    int64_t bytes_67750 =
            futhark_mc_segmap_parloop_struct_74013->free_bytes_67750;
    int64_t bytes_67762 =
            futhark_mc_segmap_parloop_struct_74013->free_bytes_67762;
    int64_t bytes_67765 =
            futhark_mc_segmap_parloop_struct_74013->free_bytes_67765;
    struct memblock mem_67894 = {.desc ="mem_67894", .mem =
                                 futhark_mc_segmap_parloop_struct_74013->free_mem_67894,
                                 .size =0, .references =NULL};
    struct memblock mem_67898 = {.desc ="mem_67898", .mem =
                                 futhark_mc_segmap_parloop_struct_74013->free_mem_67898,
                                 .size =0, .references =NULL};
    size_t mem_67749_cached_sizze_74015 = 0;
    char *mem_67749 = NULL;
    size_t mem_67752_cached_sizze_74016 = 0;
    char *mem_67752 = NULL;
    size_t mem_67755_cached_sizze_74017 = 0;
    char *mem_67755 = NULL;
    size_t mem_67758_cached_sizze_74018 = 0;
    char *mem_67758 = NULL;
    size_t mem_67761_cached_sizze_74019 = 0;
    char *mem_67761 = NULL;
    size_t mem_67764_cached_sizze_74020 = 0;
    char *mem_67764 = NULL;
    size_t mem_67767_cached_sizze_74021 = 0;
    char *mem_67767 = NULL;
    size_t mem_67770_cached_sizze_74022 = 0;
    char *mem_67770 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70479 = start;
    
    if (mem_67749_cached_sizze_74015 < (size_t) bytes_67747) {
        mem_67749 = realloc(mem_67749, bytes_67747);
        mem_67749_cached_sizze_74015 = bytes_67747;
    }
    if (mem_67752_cached_sizze_74016 < (size_t) bytes_67750) {
        mem_67752 = realloc(mem_67752, bytes_67750);
        mem_67752_cached_sizze_74016 = bytes_67750;
    }
    if (mem_67755_cached_sizze_74017 < (size_t) bytes_67747) {
        mem_67755 = realloc(mem_67755, bytes_67747);
        mem_67755_cached_sizze_74017 = bytes_67747;
    }
    if (mem_67758_cached_sizze_74018 < (size_t) bytes_67750) {
        mem_67758 = realloc(mem_67758, bytes_67750);
        mem_67758_cached_sizze_74018 = bytes_67750;
    }
    if (mem_67761_cached_sizze_74019 < (size_t) bytes_67747) {
        mem_67761 = realloc(mem_67761, bytes_67747);
        mem_67761_cached_sizze_74019 = bytes_67747;
    }
    if (mem_67764_cached_sizze_74020 < (size_t) bytes_67762) {
        mem_67764 = realloc(mem_67764, bytes_67762);
        mem_67764_cached_sizze_74020 = bytes_67762;
    }
    if (mem_67767_cached_sizze_74021 < (size_t) bytes_67765) {
        mem_67767 = realloc(mem_67767, bytes_67765);
        mem_67767_cached_sizze_74021 = bytes_67765;
    }
    if (mem_67770_cached_sizze_74022 < (size_t) bytes_67765) {
        mem_67770 = realloc(mem_67770, bytes_67765);
        mem_67770_cached_sizze_74022 = bytes_67765;
    }
    for (; iter_70479 < end; iter_70479++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70873 = m_62363;
        int64_t gtid_64738 = iter_70479;
        int64_t remnant_70874 = iter_70479 - gtid_64738;
        int64_t flat_tid_64739 = (int64_t) 0;
        int32_t num_tasks_70875;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74023 futhark_mc_task_74023;
        
        futhark_mc_task_74023.ctx = ctx;
        futhark_mc_task_74023.free_n_62364 = n_62364;
        futhark_mc_task_74023.free_gtid_64738 = gtid_64738;
        futhark_mc_task_74023.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74023.free_mem_67749 = mem_67749;
        
        struct scheduler_segop futhark_mc_task_74023_task;
        
        futhark_mc_task_74023_task.args = &futhark_mc_task_74023;
        futhark_mc_task_74023_task.top_level_fn = futhark_mc_segscan_task_74024;
        futhark_mc_task_74023_task.name = "futhark_mc_segscan_task_74024";
        futhark_mc_task_74023_task.iterations = n_62364;
        futhark_mc_task_74023_task.task_time =
            &ctx->futhark_mc_segscan_task_74024_total_time;
        futhark_mc_task_74023_task.task_iter =
            &ctx->futhark_mc_segscan_task_74024_total_iter;
        futhark_mc_task_74023_task.sched = STATIC;
        futhark_mc_task_74023_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74024_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74023_task);
        
        if (futhark_mc_segscan_task_74024_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_64957 = ((int64_t *) mem_67749)[i_62378];
        
        for (int64_t i_70889 = 0; i_70889 < n_62364; i_70889++) {
            ((float *) mem_67752)[i_70889] = 0.0F;
        }
        for (int64_t i_70890 = 0; i_70890 < n_62364; i_70890++) {
            ((int64_t *) mem_67755)[i_70890] = (int64_t) -1;
        }
        
        int64_t flat_tid_64741 = (int64_t) 0;
        int32_t num_tasks_70891;
        struct futhark_mc_task_74030 futhark_mc_task_74030;
        
        futhark_mc_task_74030.ctx = ctx;
        futhark_mc_task_74030.free_n_62364 = n_62364;
        futhark_mc_task_74030.free_gtid_64738 = gtid_64738;
        futhark_mc_task_74030.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74030.free_mem_67749 = mem_67749;
        futhark_mc_task_74030.free_mem_67752 = mem_67752;
        futhark_mc_task_74030.free_mem_67755 = mem_67755;
        
        struct scheduler_segop futhark_mc_task_74030_task;
        
        futhark_mc_task_74030_task.args = &futhark_mc_task_74030;
        futhark_mc_task_74030_task.top_level_fn = futhark_mc_segmap_task_74031;
        futhark_mc_task_74030_task.name = "futhark_mc_segmap_task_74031";
        futhark_mc_task_74030_task.iterations = n_62364;
        futhark_mc_task_74030_task.task_time =
            &ctx->futhark_mc_segmap_task_74031_total_time;
        futhark_mc_task_74030_task.task_iter =
            &ctx->futhark_mc_segmap_task_74031_total_iter;
        futhark_mc_task_74030_task.sched = STATIC;
        futhark_mc_task_74030_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74031_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74030_task);
        
        if (futhark_mc_segmap_task_74031_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_64969 = sub64(last_res_64957, (int64_t) 1);
        int64_t min_arg_64970 = sub64(last_res_64957, min_res_62384);
        float i64_res_64971 = sitofp_i64_f32(last_res_64957);
        float x_64972 = i64_res_62390 - i64_res_64971;
        float max_arg_64973 = x_64972 / 2.0F;
        float max_res_64974 = fmax32(0.0F, max_arg_64973);
        int64_t flat_tid_64743 = (int64_t) 0;
        int32_t num_tasks_70897;
        struct futhark_mc_task_74034 futhark_mc_task_74034;
        
        futhark_mc_task_74034.ctx = ctx;
        futhark_mc_task_74034.free_n_62364 = n_62364;
        futhark_mc_task_74034.free_mem_67755 = mem_67755;
        futhark_mc_task_74034.free_mem_67758 = mem_67758;
        futhark_mc_task_74034.free_mem_67761 = mem_67761;
        
        struct scheduler_segop futhark_mc_task_74034_task;
        
        futhark_mc_task_74034_task.args = &futhark_mc_task_74034;
        futhark_mc_task_74034_task.top_level_fn = futhark_mc_segmap_task_74035;
        futhark_mc_task_74034_task.name = "futhark_mc_segmap_task_74035";
        futhark_mc_task_74034_task.iterations = n_62364;
        futhark_mc_task_74034_task.task_time =
            &ctx->futhark_mc_segmap_task_74035_total_time;
        futhark_mc_task_74034_task.task_iter =
            &ctx->futhark_mc_segmap_task_74035_total_iter;
        futhark_mc_task_74034_task.sched = STATIC;
        futhark_mc_task_74034_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74035_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74034_task);
        
        if (futhark_mc_segmap_task_74035_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64745 = (int64_t) 0;
        int32_t num_tasks_70901;
        struct futhark_mc_task_74038 futhark_mc_task_74038;
        
        futhark_mc_task_74038.ctx = ctx;
        futhark_mc_task_74038.free_q_62366 = q_62366;
        futhark_mc_task_74038.free_last_res_64957 = last_res_64957;
        futhark_mc_task_74038.free_mem_67764 = mem_67764;
        
        struct scheduler_segop futhark_mc_task_74038_task;
        
        futhark_mc_task_74038_task.args = &futhark_mc_task_74038;
        futhark_mc_task_74038_task.top_level_fn = futhark_mc_segmap_task_74039;
        futhark_mc_task_74038_task.name = "futhark_mc_segmap_task_74039";
        futhark_mc_task_74038_task.iterations = q_62366;
        futhark_mc_task_74038_task.task_time =
            &ctx->futhark_mc_segmap_task_74039_total_time;
        futhark_mc_task_74038_task.task_iter =
            &ctx->futhark_mc_segmap_task_74039_total_iter;
        futhark_mc_task_74038_task.sched = STATIC;
        futhark_mc_task_74038_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74039_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74038_task);
        
        if (futhark_mc_segmap_task_74039_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64747 = (int64_t) 0;
        int32_t num_tasks_70905;
        int64_t flat_tid_64749 = (int64_t) 0;
        struct futhark_mc_task_74042 futhark_mc_task_74042;
        
        futhark_mc_task_74042.ctx = ctx;
        futhark_mc_task_74042.free_n_62364 = n_62364;
        futhark_mc_task_74042.free_q_62366 = q_62366;
        futhark_mc_task_74042.free_jump_62368 = jump_62368;
        futhark_mc_task_74042.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74042.free_i_62378 = i_62378;
        futhark_mc_task_74042.free_x_62379 = x_62379;
        futhark_mc_task_74042.free_min_res_62384 = min_res_62384;
        futhark_mc_task_74042.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_74042.free_last_res_64957 = last_res_64957;
        futhark_mc_task_74042.free_min_arg_64969 = min_arg_64969;
        futhark_mc_task_74042.free_min_arg_64970 = min_arg_64970;
        futhark_mc_task_74042.free_max_res_64974 = max_res_64974;
        futhark_mc_task_74042.free_mem_67752 = mem_67752;
        futhark_mc_task_74042.free_mem_67755 = mem_67755;
        futhark_mc_task_74042.free_mem_67758 = mem_67758;
        futhark_mc_task_74042.free_mem_67761 = mem_67761;
        futhark_mc_task_74042.free_mem_67764 = mem_67764;
        futhark_mc_task_74042.free_mem_67767 = mem_67767;
        futhark_mc_task_74042.free_mem_67770 = mem_67770;
        
        struct scheduler_segop futhark_mc_task_74042_task;
        
        futhark_mc_task_74042_task.args = &futhark_mc_task_74042;
        futhark_mc_task_74042_task.top_level_fn = futhark_mc_segmap_task_74043;
        futhark_mc_task_74042_task.name = "futhark_mc_segmap_task_74043";
        futhark_mc_task_74042_task.iterations = n_m_62372;
        futhark_mc_task_74042_task.task_time =
            &ctx->futhark_mc_segmap_task_74043_total_time;
        futhark_mc_task_74042_task.task_iter =
            &ctx->futhark_mc_segmap_task_74043_total_iter;
        futhark_mc_task_74042_task.sched = DYNAMIC;
        futhark_mc_task_74042_task.nested_fn =
            futhark_mc_segmap_nested_task_74046;
        
        int futhark_mc_segmap_task_74043_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74042_task);
        
        if (futhark_mc_segmap_task_74043_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67894.mem + gtid_64738 * n_m_62372 * (int64_t) 4,
                mem_67767 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_67898.mem + gtid_64738 * n_m_62372 * (int64_t) 4,
                mem_67770 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67749);
    free(mem_67752);
    free(mem_67755);
    free(mem_67758);
    free(mem_67761);
    free(mem_67764);
    free(mem_67767);
    free(mem_67770);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74014_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74014_end -
                 futhark_mc_segmap_parloop_74014_start;
        
        ctx->futhark_mc_segmap_parloop_74014_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74014_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74014_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74012(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64737 = tid;
    int num_tasks_70226 = info.nsubtasks;
    struct futhark_mc_task_74000 *futhark_mc_task_74000 =
                                 (struct futhark_mc_task_74000 *) args;
    struct futhark_context *ctx = futhark_mc_task_74000->ctx;
    uint64_t futhark_mc_segmap_nested_task_74012_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74012_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74000->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74000->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74000->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74000->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74000->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74000->free_i_62378;
    bool x_62379 = futhark_mc_task_74000->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74000->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74000->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74000->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74000->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67747 = futhark_mc_task_74000->free_bytes_67747;
    int64_t bytes_67750 = futhark_mc_task_74000->free_bytes_67750;
    int64_t bytes_67762 = futhark_mc_task_74000->free_bytes_67762;
    int64_t bytes_67765 = futhark_mc_task_74000->free_bytes_67765;
    struct memblock mem_67894 = {.desc ="mem_67894", .mem =
                                 futhark_mc_task_74000->free_mem_67894, .size =
                                 0, .references =NULL};
    struct memblock mem_67898 = {.desc ="mem_67898", .mem =
                                 futhark_mc_task_74000->free_mem_67898, .size =
                                 0, .references =NULL};
    int64_t iter_70479;
    struct futhark_mc_segmap_parloop_struct_74013
    futhark_mc_segmap_parloop_struct_74013;
    
    futhark_mc_segmap_parloop_struct_74013.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74013.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74013.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74013.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74013.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74013.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74013.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74013.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74013.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74013.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74013.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74013.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74013.free_bytes_67747 = bytes_67747;
    futhark_mc_segmap_parloop_struct_74013.free_bytes_67750 = bytes_67750;
    futhark_mc_segmap_parloop_struct_74013.free_bytes_67762 = bytes_67762;
    futhark_mc_segmap_parloop_struct_74013.free_bytes_67765 = bytes_67765;
    futhark_mc_segmap_parloop_struct_74013.free_mem_67894 = mem_67894.mem;
    futhark_mc_segmap_parloop_struct_74013.free_mem_67898 = mem_67898.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74014_task;
    
    futhark_mc_segmap_parloop_74014_task.name =
        "futhark_mc_segmap_parloop_74014";
    futhark_mc_segmap_parloop_74014_task.fn = futhark_mc_segmap_parloop_74014;
    futhark_mc_segmap_parloop_74014_task.args =
        &futhark_mc_segmap_parloop_struct_74013;
    futhark_mc_segmap_parloop_74014_task.iterations = iterations;
    futhark_mc_segmap_parloop_74014_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74014_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74014_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74014_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74014_task);
    
    if (futhark_mc_segmap_parloop_74014_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74014_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74014_total_end -
                 futhark_mc_segmap_parloop_74014_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74014_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74014_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74014_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74012_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74012_end -
                 futhark_mc_segmap_nested_task_74012_start;
        
        ctx->futhark_mc_segmap_nested_task_74012_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74012_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74012_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74064 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67907;
    int64_t free_bytes_67910;
    int64_t free_bytes_67922;
    int64_t free_bytes_67943;
    char *free_mem_68069;
};
struct futhark_mc_segmap_parloop_struct_74066 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67907;
    int64_t free_bytes_67910;
    int64_t free_bytes_67922;
    int64_t free_bytes_67943;
    char *free_mem_68069;
};
static int futhark_mc_segmap_parloop_74067(void *args, int64_t start,
                                           int64_t end, int flat_tid_65372,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74066
    *futhark_mc_segmap_parloop_struct_74066 =
    (struct futhark_mc_segmap_parloop_struct_74066 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74066->ctx;
    uint64_t futhark_mc_segmap_parloop_74067_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74067_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74066->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74066->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74066->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74066->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74066->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74066->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74066->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74066->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74066->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74066->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74066->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67907 =
            futhark_mc_segmap_parloop_struct_74066->free_bytes_67907;
    int64_t bytes_67910 =
            futhark_mc_segmap_parloop_struct_74066->free_bytes_67910;
    int64_t bytes_67922 =
            futhark_mc_segmap_parloop_struct_74066->free_bytes_67922;
    int64_t bytes_67943 =
            futhark_mc_segmap_parloop_struct_74066->free_bytes_67943;
    struct memblock mem_68069 = {.desc ="mem_68069", .mem =
                                 futhark_mc_segmap_parloop_struct_74066->free_mem_68069,
                                 .size =0, .references =NULL};
    size_t mem_67948_cached_sizze_74068 = 0;
    char *mem_67948 = NULL;
    size_t mem_67963_cached_sizze_74069 = 0;
    char *mem_67963 = NULL;
    size_t mem_67966_cached_sizze_74070 = 0;
    char *mem_67966 = NULL;
    size_t mem_67993_cached_sizze_74071 = 0;
    char *mem_67993 = NULL;
    size_t mem_67996_cached_sizze_74072 = 0;
    char *mem_67996 = NULL;
    size_t mem_68023_cached_sizze_74073 = 0;
    char *mem_68023 = NULL;
    size_t mem_68038_cached_sizze_74074 = 0;
    char *mem_68038 = NULL;
    size_t mem_68048_cached_sizze_74075 = 0;
    char *mem_68048 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71233 = start;
    
    if (mem_67948_cached_sizze_74068 < (size_t) bytes_67907) {
        mem_67948 = realloc(mem_67948, bytes_67907);
        mem_67948_cached_sizze_74068 = bytes_67907;
    }
    if (mem_67963_cached_sizze_74069 < (size_t) bytes_67910) {
        mem_67963 = realloc(mem_67963, bytes_67910);
        mem_67963_cached_sizze_74069 = bytes_67910;
    }
    if (mem_67966_cached_sizze_74070 < (size_t) bytes_67907) {
        mem_67966 = realloc(mem_67966, bytes_67907);
        mem_67966_cached_sizze_74070 = bytes_67907;
    }
    if (mem_67993_cached_sizze_74071 < (size_t) bytes_67910) {
        mem_67993 = realloc(mem_67993, bytes_67910);
        mem_67993_cached_sizze_74071 = bytes_67910;
    }
    if (mem_67996_cached_sizze_74072 < (size_t) bytes_67907) {
        mem_67996 = realloc(mem_67996, bytes_67907);
        mem_67996_cached_sizze_74072 = bytes_67907;
    }
    if (mem_68023_cached_sizze_74073 < (size_t) bytes_67922) {
        mem_68023 = realloc(mem_68023, bytes_67922);
        mem_68023_cached_sizze_74073 = bytes_67922;
    }
    if (mem_68038_cached_sizze_74074 < (size_t) bytes_67943) {
        mem_68038 = realloc(mem_68038, bytes_67943);
        mem_68038_cached_sizze_74074 = bytes_67943;
    }
    if (mem_68048_cached_sizze_74075 < (size_t) bytes_67922) {
        mem_68048 = realloc(mem_68048, bytes_67922);
        mem_68048_cached_sizze_74075 = bytes_67922;
    }
    for (; iter_71233 < end; iter_71233++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71392 = m_62363;
        int64_t gtid_65373 = iter_71233;
        int64_t remnant_71393 = iter_71233 - gtid_65373;
        int64_t discard_67193;
        int64_t scanacc_71235 = (int64_t) 0;
        
        for (int64_t i_71234 = 0; i_71234 < n_62364; i_71234++) {
            float x_71237 = ((float *) Y_mem_67460.mem)[gtid_65373 * n_62364 +
                                                        i_71234];
            bool isnan_res_71238;
            
            isnan_res_71238 = futrts_isnan32(x_71237);
            
            bool defunc_0_p_res_71239 = !isnan_res_71238;
            int64_t defunc_0_f_res_71240 = btoi_bool_i64(defunc_0_p_res_71239);
            int64_t defunc_1_op_res_71241 = add64(defunc_0_f_res_71240,
                                                  scanacc_71235);
            
            ((int64_t *) mem_67948)[i_71234] = defunc_1_op_res_71241;
            
            int64_t scanacc_tmp_71394 = defunc_1_op_res_71241;
            
            scanacc_71235 = scanacc_tmp_71394;
        }
        discard_67193 = scanacc_71235;
        
        int64_t last_res_63049 = ((int64_t *) mem_67948)[i_62378];
        
        for (int64_t i_71396 = 0; i_71396 < n_62364; i_71396++) {
            ((float *) mem_67963)[i_71396] = 0.0F;
        }
        for (int64_t i_71397 = 0; i_71397 < n_62364; i_71397++) {
            ((int64_t *) mem_67966)[i_71397] = (int64_t) -1;
        }
        for (int64_t write_iter_71243 = 0; write_iter_71243 < n_62364;
             write_iter_71243++) {
            float write_iv_71246 = ((float *) Y_mem_67460.mem)[gtid_65373 *
                                                               n_62364 +
                                                               write_iter_71243];
            bool isnan_res_71247;
            
            isnan_res_71247 = futrts_isnan32(write_iv_71246);
            
            bool defunc_0_p_res_71248 = !isnan_res_71247;
            int64_t defunc_1_f_res_71249;
            
            if (defunc_0_p_res_71248) {
                int64_t write_iv_71250 =
                        ((int64_t *) mem_67948)[write_iter_71243];
                int64_t defunc_1_f_res_t_res_71251 = sub64(write_iv_71250,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71249 = defunc_1_f_res_t_res_71251;
            } else {
                defunc_1_f_res_71249 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71249) &&
                slt64(defunc_1_f_res_71249, n_62364)) {
                ((int64_t *) mem_67966)[defunc_1_f_res_71249] =
                    write_iter_71243;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71249) &&
                slt64(defunc_1_f_res_71249, n_62364)) {
                memmove(mem_67963 + defunc_1_f_res_71249 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_65373 * n_62364 +
                                           write_iter_71243) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_63064 = sub64(last_res_63049, (int64_t) 1);
        int64_t min_arg_63065 = sub64(last_res_63049, min_res_62384);
        float i64_res_63066 = sitofp_i64_f32(last_res_63049);
        float x_63067 = i64_res_62390 - i64_res_63066;
        float max_arg_63068 = x_63067 / 2.0F;
        float max_res_63069 = fmax32(0.0F, max_arg_63068);
        
        for (int64_t i_71255 = 0; i_71255 < n_62364; i_71255++) {
            int64_t x_71258 = ((int64_t *) mem_67966)[i_71255];
            int64_t defunc_0_f_res_71259 = add64((int64_t) 1, x_71258);
            float defunc_0_f_res_71260 = sitofp_i64_f32(x_71258);
            
            ((float *) mem_67993)[i_71255] = defunc_0_f_res_71260;
            ((int64_t *) mem_67996)[i_71255] = defunc_0_f_res_71259;
        }
        for (int64_t i_71263 = 0; i_71263 < q_62366; i_71263++) {
            bool cond_71265 = sle64(last_res_63049, i_71263);
            float defunc_0_f_res_71266;
            
            if (cond_71265) {
                defunc_0_f_res_71266 = 0.0F;
            } else {
                defunc_0_f_res_71266 = 1.0F;
            }
            ((float *) mem_68023)[i_71263] = defunc_0_f_res_71266;
        }
        for (int64_t i_71268 = 0; i_71268 < n_m_62372; i_71268++) {
            int64_t min_arg_71270 = mul64(jump_62368, i_71268);
            int64_t min_res_71271 = smin64(i_62378, min_arg_71270);
            int64_t defunc_0_g_res_71272 = add64((int64_t) 1, min_res_71271);
            bool init_idx_71273;
            int64_t init_idx_71274;
            int64_t init_idx_71275;
            bool loop_while_71276;
            int64_t low_71277;
            int64_t high_71278;
            
            loop_while_71276 = x_62379;
            low_71277 = (int64_t) 0;
            high_71278 = i_62378;
            while (loop_while_71276) {
                int64_t x_71279 = add64(low_71277, high_71278);
                int64_t mid_71280 = sdiv64(x_71279, (int64_t) 2);
                bool x_71281 = sle64((int64_t) 0, mid_71280);
                bool y_71282 = slt64(mid_71280, n_62364);
                bool bounds_check_71283 = x_71281 && y_71282;
                bool index_certs_71284;
                
                if (!bounds_check_71283) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71280,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_71285 = ((int64_t *) mem_67996)[mid_71280];
                bool cond_71286 = slt64(mid_id_71285, (int64_t) 0);
                int64_t mid_idx_71287;
                
                if (cond_71286) {
                    mid_idx_71287 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_71287 = mid_id_71285;
                }
                
                bool cond_71288 = sle64(defunc_0_g_res_71272, mid_idx_71287);
                int64_t loopres_71289;
                int64_t loopres_71290;
                
                if (cond_71288) {
                    int64_t loopres_t_res_71291 = sub64(mid_71280, (int64_t) 1);
                    
                    loopres_71289 = low_71277;
                    loopres_71290 = loopres_t_res_71291;
                } else {
                    int64_t loopres_f_res_71292 = add64((int64_t) 1, mid_71280);
                    
                    loopres_71289 = loopres_f_res_71292;
                    loopres_71290 = high_71278;
                }
                
                bool loop_cond_71293 = sle64(loopres_71289, loopres_71290);
                bool loop_while_tmp_71404 = loop_cond_71293;
                int64_t low_tmp_71405 = loopres_71289;
                int64_t high_tmp_71406 = loopres_71290;
                
                loop_while_71276 = loop_while_tmp_71404;
                low_71277 = low_tmp_71405;
                high_71278 = high_tmp_71406;
            }
            init_idx_71273 = loop_while_71276;
            init_idx_71274 = low_71277;
            init_idx_71275 = high_71278;
            
            bool idx_71294;
            int64_t idx_71295;
            int64_t idx_71296;
            int64_t idx_71297;
            bool loop_while_71298;
            int64_t l_idx_71299;
            int64_t r_idx_71300;
            int64_t span_71301;
            
            loop_while_71298 = loop_cond_62389;
            l_idx_71299 = init_idx_71274;
            r_idx_71300 = init_idx_71274;
            span_71301 = (int64_t) 1;
            while (loop_while_71298) {
                int64_t max_arg_71302 = sub64(l_idx_71299, (int64_t) 1);
                int64_t max_res_71303 = smax64((int64_t) 0, max_arg_71302);
                int64_t min_arg_71304 = add64((int64_t) 1, r_idx_71300);
                int64_t min_res_71305 = smin64(min_arg_63064, min_arg_71304);
                bool x_71306 = sle64((int64_t) 0, max_res_71303);
                bool y_71307 = slt64(max_res_71303, n_62364);
                bool bounds_check_71308 = x_71306 && y_71307;
                bool index_certs_71309;
                
                if (!bounds_check_71308) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_71303,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_71310 = ((int64_t *) mem_67996)[max_res_71303];
                int64_t abs_arg_71311 = sub64(x_71310, defunc_0_g_res_71272);
                int64_t abs_res_71312 = abs64(abs_arg_71311);
                bool x_71313 = sle64((int64_t) 0, min_res_71305);
                bool y_71314 = slt64(min_res_71305, n_62364);
                bool bounds_check_71315 = x_71313 && y_71314;
                bool index_certs_71316;
                
                if (!bounds_check_71315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71305,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_71317 = ((int64_t *) mem_67996)[min_res_71305];
                int64_t abs_arg_71318 = sub64(x_71317, defunc_0_g_res_71272);
                int64_t abs_res_71319 = abs64(abs_arg_71318);
                bool cond_71320 = max_res_71303 == l_idx_71299;
                int64_t loopres_71321;
                int64_t loopres_71322;
                int64_t loopres_71323;
                
                if (cond_71320) {
                    loopres_71321 = l_idx_71299;
                    loopres_71322 = r_idx_71300;
                    loopres_71323 = min_res_62384;
                } else {
                    bool cond_71324 = slt64(abs_res_71312, abs_res_71319);
                    bool cond_f_res_71325 = min_res_71305 == r_idx_71300;
                    bool x_71326 = !cond_71324;
                    bool y_71327 = cond_f_res_71325 && x_71326;
                    bool cond_71328 = cond_71324 || y_71327;
                    int64_t loopres_f_res_71329;
                    
                    if (cond_71328) {
                        loopres_f_res_71329 = max_res_71303;
                    } else {
                        loopres_f_res_71329 = l_idx_71299;
                    }
                    
                    int64_t loopres_f_res_71330;
                    
                    if (cond_71328) {
                        loopres_f_res_71330 = r_idx_71300;
                    } else {
                        loopres_f_res_71330 = min_res_71305;
                    }
                    
                    int64_t loopres_f_res_71331;
                    
                    if (cond_71328) {
                        int64_t loopres_f_res_t_res_71332 = add64((int64_t) 1,
                                                                  span_71301);
                        
                        loopres_f_res_71331 = loopres_f_res_t_res_71332;
                    } else {
                        int64_t loopres_f_res_f_res_71333 = add64((int64_t) 1,
                                                                  span_71301);
                        
                        loopres_f_res_71331 = loopres_f_res_f_res_71333;
                    }
                    loopres_71321 = loopres_f_res_71329;
                    loopres_71322 = loopres_f_res_71330;
                    loopres_71323 = loopres_f_res_71331;
                }
                
                bool loop_cond_71334 = slt64(loopres_71323, min_res_62384);
                bool loop_while_tmp_71407 = loop_cond_71334;
                int64_t l_idx_tmp_71408 = loopres_71321;
                int64_t r_idx_tmp_71409 = loopres_71322;
                int64_t span_tmp_71410 = loopres_71323;
                
                loop_while_71298 = loop_while_tmp_71407;
                l_idx_71299 = l_idx_tmp_71408;
                r_idx_71300 = r_idx_tmp_71409;
                span_71301 = span_tmp_71410;
            }
            idx_71294 = loop_while_71298;
            idx_71295 = l_idx_71299;
            idx_71296 = r_idx_71300;
            idx_71297 = span_71301;
            
            int64_t min_res_71335 = smin64(min_arg_63065, idx_71295);
            int64_t x_71336 = add64(min_res_62384, min_res_71335);
            int64_t r_71337 = sub64(x_71336, (int64_t) 1);
            bool x_71338 = sle64((int64_t) 0, r_71337);
            bool y_71339 = slt64(r_71337, n_62364);
            bool bounds_check_71340 = x_71338 && y_71339;
            bool index_certs_71341;
            
            if (!bounds_check_71340) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_71337,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71342 = ((int64_t *) mem_67966)[r_71337];
            int64_t abs_arg_71343 = sub64(x_71342, min_res_71271);
            int64_t abs_res_71344 = abs64(abs_arg_71343);
            bool x_71345 = sle64((int64_t) 0, min_res_71335);
            bool y_71346 = slt64(min_res_71335, n_62364);
            bool bounds_check_71347 = x_71345 && y_71346;
            bool index_certs_71348;
            
            if (!bounds_check_71347) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71335,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71349 = ((int64_t *) mem_67966)[min_res_71335];
            int64_t abs_arg_71350 = sub64(x_71349, min_res_71271);
            int64_t abs_res_71351 = abs64(abs_arg_71350);
            int64_t max_res_71352 = smax64(abs_res_71344, abs_res_71351);
            float defunc_0_f_res_71353 = sitofp_i64_f32(max_res_71352);
            float defunc_1_f_res_71354 = max_res_63069 + defunc_0_f_res_71353;
            float defunc_0_f_res_71355 = sitofp_i64_f32(min_res_71271);
            float defunc_2_reduce_res_71357;
            float redout_71360 = 0.0F;
            
            for (int64_t i_71359 = 0; i_71359 < q_62366; i_71359++) {
                float x_71362 = ((float *) mem_68023)[i_71359];
                bool cond_71363 = sle64(last_res_63049, i_71359);
                float defunc_0_f_res_71364;
                
                if (cond_71363) {
                    defunc_0_f_res_71364 = 0.0F;
                } else {
                    int64_t i_71365 = add64(min_res_71335, i_71359);
                    float x_71366 = ((float *) mem_67993)[i_71365];
                    float defunc_0_f_res_f_res_71367 = 1.0F + x_71366;
                    
                    defunc_0_f_res_71364 = defunc_0_f_res_f_res_71367;
                }
                
                float x_j_71368 = defunc_0_f_res_71364 - defunc_0_f_res_71355;
                float abs_res_71369 = (float) fabs(x_j_71368);
                float tmp1_71370 = abs_res_71369 / defunc_1_f_res_71354;
                float x_71371 = tmp1_71370 * tmp1_71370;
                float y_71372 = tmp1_71370 * x_71371;
                float tmp2_71373 = 1.0F - y_71372;
                float x_71374 = tmp2_71373 * tmp2_71373;
                float tmp3_71375 = tmp2_71373 * x_71374;
                float tmp4_71376 = x_71362 * tmp3_71375;
                float defunc_1_op_res_71377 = tmp4_71376 + redout_71360;
                
                ((float *) mem_68048)[i_71359] = tmp4_71376;
                
                float redout_tmp_71411 = defunc_1_op_res_71377;
                
                redout_71360 = redout_tmp_71411;
            }
            defunc_2_reduce_res_71357 = redout_71360;
            
            float a0_71379 = 1.0F / defunc_2_reduce_res_71357;
            float defunc_2_reduce_res_71380;
            float redout_71382 = 0.0F;
            
            for (int64_t i_71381 = 0; i_71381 < q_62366; i_71381++) {
                float x_71383 = ((float *) mem_68048)[i_71381];
                bool cond_71384 = sle64(last_res_63049, i_71381);
                float defunc_0_f_res_71385;
                
                if (cond_71384) {
                    defunc_0_f_res_71385 = 0.0F;
                } else {
                    int64_t i_71386 = add64(min_res_71335, i_71381);
                    float x_71387 = ((float *) mem_67963)[i_71386];
                    
                    defunc_0_f_res_71385 = x_71387;
                }
                
                float x_71388 = a0_71379 * x_71383;
                float defunc_9_fit_fun_res_71389 = defunc_0_f_res_71385 *
                      x_71388;
                float defunc_1_op_res_71390 = defunc_9_fit_fun_res_71389 +
                      redout_71382;
                float redout_tmp_71413 = defunc_1_op_res_71390;
                
                redout_71382 = redout_tmp_71413;
            }
            defunc_2_reduce_res_71380 = redout_71382;
            ((float *) mem_68038)[i_71268] = defunc_2_reduce_res_71380;
        }
        memmove(mem_68069.mem + gtid_65373 * n_m_62372 * (int64_t) 4,
                mem_68038 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67948);
    free(mem_67963);
    free(mem_67966);
    free(mem_67993);
    free(mem_67996);
    free(mem_68023);
    free(mem_68038);
    free(mem_68048);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74067_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74067_end -
                 futhark_mc_segmap_parloop_74067_start;
        
        ctx->futhark_mc_segmap_parloop_74067_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74067_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74067_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74065(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65372 = tid;
    int num_tasks_71232 = info.nsubtasks;
    struct futhark_mc_task_74064 *futhark_mc_task_74064 =
                                 (struct futhark_mc_task_74064 *) args;
    struct futhark_context *ctx = futhark_mc_task_74064->ctx;
    uint64_t futhark_mc_segmap_task_74065_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74065_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74064->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74064->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74064->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74064->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74064->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74064->free_i_62378;
    bool x_62379 = futhark_mc_task_74064->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74064->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74064->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74064->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74064->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67907 = futhark_mc_task_74064->free_bytes_67907;
    int64_t bytes_67910 = futhark_mc_task_74064->free_bytes_67910;
    int64_t bytes_67922 = futhark_mc_task_74064->free_bytes_67922;
    int64_t bytes_67943 = futhark_mc_task_74064->free_bytes_67943;
    struct memblock mem_68069 = {.desc ="mem_68069", .mem =
                                 futhark_mc_task_74064->free_mem_68069, .size =
                                 0, .references =NULL};
    int64_t iter_71233;
    struct futhark_mc_segmap_parloop_struct_74066
    futhark_mc_segmap_parloop_struct_74066;
    
    futhark_mc_segmap_parloop_struct_74066.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74066.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74066.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74066.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74066.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74066.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74066.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74066.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74066.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74066.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74066.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74066.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74066.free_bytes_67907 = bytes_67907;
    futhark_mc_segmap_parloop_struct_74066.free_bytes_67910 = bytes_67910;
    futhark_mc_segmap_parloop_struct_74066.free_bytes_67922 = bytes_67922;
    futhark_mc_segmap_parloop_struct_74066.free_bytes_67943 = bytes_67943;
    futhark_mc_segmap_parloop_struct_74066.free_mem_68069 = mem_68069.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74067_task;
    
    futhark_mc_segmap_parloop_74067_task.name =
        "futhark_mc_segmap_parloop_74067";
    futhark_mc_segmap_parloop_74067_task.fn = futhark_mc_segmap_parloop_74067;
    futhark_mc_segmap_parloop_74067_task.args =
        &futhark_mc_segmap_parloop_struct_74066;
    futhark_mc_segmap_parloop_74067_task.iterations = iterations;
    futhark_mc_segmap_parloop_74067_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74067_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74067_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74067_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74067_task);
    
    if (futhark_mc_segmap_parloop_74067_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74067_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74067_total_end -
                 futhark_mc_segmap_parloop_74067_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74067_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74067_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74067_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74065_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74065_end -
                 futhark_mc_segmap_task_74065_start;
        
        ctx->futhark_mc_segmap_task_74065_runs[tid]++;
        ctx->futhark_mc_segmap_task_74065_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74065_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74077 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_67907;
    int64_t free_bytes_67910;
    int64_t free_bytes_67922;
    int64_t free_bytes_67943;
    char *free_mem_68069;
};
struct futhark_mc_task_74086 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65375;
    char *free_Y_mem_67460;
    char *free_mem_67909;
};
struct futhark_mc_scan_stage_1_parloop_struct_74089 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65375;
    char *free_Y_mem_67460;
    char *free_mem_67909;
};
static int futhark_mc_scan_stage_1_parloop_74090(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65376, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74089
    *futhark_mc_scan_stage_1_parloop_struct_74089 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74089 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74089->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74090_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74090_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_74089->free_n_62364;
    int64_t gtid_65375 =
            futhark_mc_scan_stage_1_parloop_struct_74089->free_gtid_65375;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74089->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67909 = {.desc ="mem_67909", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74089->free_mem_67909,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71677 = start;
    int64_t x_71415;
    int64_t x_71416;
    
    x_71415 = (int64_t) 0;
    for (; iter_71677 < end; iter_71677++) {
        int64_t gtid_65377 = iter_71677;
        
        // stage 1 scan body
        {
            float x_71418 = ((float *) Y_mem_67460.mem)[gtid_65375 * n_62364 +
                                                        gtid_65377];
            bool isnan_res_71419;
            
            isnan_res_71419 = futrts_isnan32(x_71418);
            
            bool defunc_0_p_res_71420 = !isnan_res_71419;
            int64_t defunc_0_f_res_71421 = btoi_bool_i64(defunc_0_p_res_71420);
            
            // write mapped values results to memory
            { }
            x_71415 = x_71415;
            // Read next values
            {
                x_71416 = defunc_0_f_res_71421;
            }
            
            int64_t defunc_1_op_res_71417 = add64(x_71415, x_71416);
            
            ((int64_t *) mem_67909.mem)[gtid_65377] = defunc_1_op_res_71417;
            x_71415 = defunc_1_op_res_71417;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74090_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74090_end -
                 futhark_mc_scan_stage_1_parloop_74090_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74090_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74090_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74090_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74091 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65375;
    char *free_Y_mem_67460;
    char *free_mem_67909;
};
static int futhark_mc_scan_stage_3_parloop_74092(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65376, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74091
    *futhark_mc_scan_stage_3_parloop_struct_74091 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74091 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74091->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74092_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74092_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_74091->free_n_62364;
    int64_t gtid_65375 =
            futhark_mc_scan_stage_3_parloop_struct_74091->free_gtid_65375;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74091->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67909 = {.desc ="mem_67909", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74091->free_mem_67909,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71689 = start;
    int64_t x_71686;
    int64_t x_71687;
    
    if (iter_71689 == (int64_t) 0) {
        x_71686 = (int64_t) 0;
    } else {
        x_71686 = ((int64_t *) mem_67909.mem)[iter_71689 - (int64_t) 1];
    }
    for (; iter_71689 < end; iter_71689++) {
        int64_t gtid_65377 = iter_71689;
        
        // stage 3 scan body
        {
            float x_71418 = ((float *) Y_mem_67460.mem)[gtid_65375 * n_62364 +
                                                        gtid_65377];
            bool isnan_res_71419;
            
            isnan_res_71419 = futrts_isnan32(x_71418);
            
            bool defunc_0_p_res_71420 = !isnan_res_71419;
            int64_t defunc_0_f_res_71421 = btoi_bool_i64(defunc_0_p_res_71420);
            
            x_71686 = x_71686;
            x_71687 = defunc_0_f_res_71421;
            
            int64_t defunc_1_op_res_71688 = add64(x_71686, x_71687);
            
            ((int64_t *) mem_67909.mem)[gtid_65377] = defunc_1_op_res_71688;
            x_71686 = defunc_1_op_res_71688;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74092_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74092_end -
                 futhark_mc_scan_stage_3_parloop_74092_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74092_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74092_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74092_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74087(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65376 = tid;
    int num_tasks_71676 = info.nsubtasks;
    struct futhark_mc_task_74086 *futhark_mc_task_74086 =
                                 (struct futhark_mc_task_74086 *) args;
    struct futhark_context *ctx = futhark_mc_task_74086->ctx;
    uint64_t futhark_mc_segscan_task_74087_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74087_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74086->free_n_62364;
    int64_t gtid_65375 = futhark_mc_task_74086->free_gtid_65375;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74086->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67909 = {.desc ="mem_67909", .mem =
                                 futhark_mc_task_74086->free_mem_67909, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_71683_cached_sizze_74088 = 0;
    char *scan_stage_2_accum_mem_71683 = NULL;
    int64_t iter_71677;
    struct futhark_mc_scan_stage_1_parloop_struct_74089
    futhark_mc_scan_stage_1_parloop_struct_74089;
    
    futhark_mc_scan_stage_1_parloop_struct_74089.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74089.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_74089.free_gtid_65375 = gtid_65375;
    futhark_mc_scan_stage_1_parloop_struct_74089.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_74089.free_mem_67909 = mem_67909.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74090_task;
    
    futhark_mc_scan_stage_1_parloop_74090_task.name =
        "futhark_mc_scan_stage_1_parloop_74090";
    futhark_mc_scan_stage_1_parloop_74090_task.fn =
        futhark_mc_scan_stage_1_parloop_74090;
    futhark_mc_scan_stage_1_parloop_74090_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74089;
    futhark_mc_scan_stage_1_parloop_74090_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74090_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74090_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74090_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74090_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74090_task);
    
    if (futhark_mc_scan_stage_1_parloop_74090_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74090_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74090_total_end -
                 futhark_mc_scan_stage_1_parloop_74090_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74090_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74090_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74090_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_71676)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_71678;
        int64_t x_71679;
        int64_t offset_71681 = (int64_t) 0;
        int64_t offset_index_71682 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_71683_cached_sizze_74088 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_71683 = realloc(scan_stage_2_accum_mem_71683,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_71683_cached_sizze_74088 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_71683)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_71685 = 0; i_71685 < num_tasks_71676 - 1; i_71685++) {
            offset_71681 = squot64(n_62364, sext_i32_i64(num_tasks_71676));
            if (slt64(sext_i32_i64(i_71685), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_71676)))) {
                offset_71681 += (int64_t) 1;
            }
            offset_index_71682 += offset_71681;
            
            int64_t gtid_65377 = offset_index_71682;
            float x_71418 = ((float *) Y_mem_67460.mem)[gtid_65375 * n_62364 +
                                                        gtid_65377];
            bool isnan_res_71419;
            
            isnan_res_71419 = futrts_isnan32(x_71418);
            
            bool defunc_0_p_res_71420 = !isnan_res_71419;
            int64_t defunc_0_f_res_71421 = btoi_bool_i64(defunc_0_p_res_71420);
            
            // Read carry in
            {
                x_71678 =
                    ((int64_t *) scan_stage_2_accum_mem_71683)[(int64_t) 0];
            }
            // Read next values
            {
                x_71679 = ((int64_t *) mem_67909.mem)[offset_index_71682 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_71680 = add64(x_71678, x_71679);
            
            ((int64_t *) mem_67909.mem)[offset_index_71682 - (int64_t) 1] =
                defunc_1_op_res_71680;
            ((int64_t *) scan_stage_2_accum_mem_71683)[(int64_t) 0] =
                defunc_1_op_res_71680;
        }
        
        int64_t iter_71689 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74091
        futhark_mc_scan_stage_3_parloop_struct_74091;
        
        futhark_mc_scan_stage_3_parloop_struct_74091.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74091.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_74091.free_gtid_65375 =
            gtid_65375;
        futhark_mc_scan_stage_3_parloop_struct_74091.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_74091.free_mem_67909 =
            mem_67909.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74092_task;
        
        futhark_mc_scan_stage_3_parloop_74092_task.name =
            "futhark_mc_scan_stage_3_parloop_74092";
        futhark_mc_scan_stage_3_parloop_74092_task.fn =
            futhark_mc_scan_stage_3_parloop_74092;
        futhark_mc_scan_stage_3_parloop_74092_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74091;
        futhark_mc_scan_stage_3_parloop_74092_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74092_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74092_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74092_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74092_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74092_task);
        
        if (futhark_mc_scan_stage_3_parloop_74092_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74092_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74092_total_end -
                     futhark_mc_scan_stage_3_parloop_74092_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74092_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74092_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74092_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_71683);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74087_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74087_end -
                 futhark_mc_segscan_task_74087_start;
        
        ctx->futhark_mc_segscan_task_74087_runs[tid]++;
        ctx->futhark_mc_segscan_task_74087_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74087_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74093 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65375;
    char *free_Y_mem_67460;
    char *free_mem_67909;
    char *free_mem_67912;
    char *free_mem_67915;
};
struct futhark_mc_segmap_parloop_struct_74095 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65375;
    char *free_Y_mem_67460;
    char *free_mem_67909;
    char *free_mem_67912;
    char *free_mem_67915;
};
static int futhark_mc_segmap_parloop_74096(void *args, int64_t start,
                                           int64_t end, int flat_tid_65378,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74095
    *futhark_mc_segmap_parloop_struct_74095 =
    (struct futhark_mc_segmap_parloop_struct_74095 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74095->ctx;
    uint64_t futhark_mc_segmap_parloop_74096_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74096_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74095->free_n_62364;
    int64_t gtid_65375 =
            futhark_mc_segmap_parloop_struct_74095->free_gtid_65375;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74095->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67909 = {.desc ="mem_67909", .mem =
                                 futhark_mc_segmap_parloop_struct_74095->free_mem_67909,
                                 .size =0, .references =NULL};
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_segmap_parloop_struct_74095->free_mem_67912,
                                 .size =0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_segmap_parloop_struct_74095->free_mem_67915,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71693 = start;
    
    for (; iter_71693 < end; iter_71693++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71696 = n_62364;
        int64_t gtid_65379 = iter_71693;
        int64_t remnant_71697 = iter_71693 - gtid_65379;
        float x_71422 = ((float *) Y_mem_67460.mem)[gtid_65375 * n_62364 +
                                                    gtid_65379];
        bool isnan_res_71423;
        
        isnan_res_71423 = futrts_isnan32(x_71422);
        
        bool defunc_0_p_res_71424 = !isnan_res_71423;
        int64_t defunc_1_f_res_71425;
        
        if (defunc_0_p_res_71424) {
            int64_t x_71694 = ((int64_t *) mem_67909.mem)[gtid_65379];
            int64_t defunc_1_f_res_t_res_71695 = sub64(x_71694, (int64_t) 1);
            
            defunc_1_f_res_71425 = defunc_1_f_res_t_res_71695;
        } else {
            defunc_1_f_res_71425 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71425) &&
            slt64(defunc_1_f_res_71425, n_62364)) {
            ((int64_t *) mem_67915.mem)[defunc_1_f_res_71425] = gtid_65379;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71425) &&
            slt64(defunc_1_f_res_71425, n_62364)) {
            ((float *) mem_67912.mem)[defunc_1_f_res_71425] = x_71422;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74096_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74096_end -
                 futhark_mc_segmap_parloop_74096_start;
        
        ctx->futhark_mc_segmap_parloop_74096_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74096_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74096_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74094(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65378 = tid;
    int num_tasks_71692 = info.nsubtasks;
    struct futhark_mc_task_74093 *futhark_mc_task_74093 =
                                 (struct futhark_mc_task_74093 *) args;
    struct futhark_context *ctx = futhark_mc_task_74093->ctx;
    uint64_t futhark_mc_segmap_task_74094_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74094_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74093->free_n_62364;
    int64_t gtid_65375 = futhark_mc_task_74093->free_gtid_65375;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74093->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_67909 = {.desc ="mem_67909", .mem =
                                 futhark_mc_task_74093->free_mem_67909, .size =
                                 0, .references =NULL};
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_task_74093->free_mem_67912, .size =
                                 0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_task_74093->free_mem_67915, .size =
                                 0, .references =NULL};
    int64_t iter_71693;
    struct futhark_mc_segmap_parloop_struct_74095
    futhark_mc_segmap_parloop_struct_74095;
    
    futhark_mc_segmap_parloop_struct_74095.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74095.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74095.free_gtid_65375 = gtid_65375;
    futhark_mc_segmap_parloop_struct_74095.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74095.free_mem_67909 = mem_67909.mem;
    futhark_mc_segmap_parloop_struct_74095.free_mem_67912 = mem_67912.mem;
    futhark_mc_segmap_parloop_struct_74095.free_mem_67915 = mem_67915.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74096_task;
    
    futhark_mc_segmap_parloop_74096_task.name =
        "futhark_mc_segmap_parloop_74096";
    futhark_mc_segmap_parloop_74096_task.fn = futhark_mc_segmap_parloop_74096;
    futhark_mc_segmap_parloop_74096_task.args =
        &futhark_mc_segmap_parloop_struct_74095;
    futhark_mc_segmap_parloop_74096_task.iterations = iterations;
    futhark_mc_segmap_parloop_74096_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74096_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74096_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74096_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74096_task);
    
    if (futhark_mc_segmap_parloop_74096_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74096_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74096_total_end -
                 futhark_mc_segmap_parloop_74096_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74096_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74096_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74096_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74094_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74094_end -
                 futhark_mc_segmap_task_74094_start;
        
        ctx->futhark_mc_segmap_task_74094_runs[tid]++;
        ctx->futhark_mc_segmap_task_74094_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74094_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74097 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67915;
    char *free_mem_67918;
    char *free_mem_67921;
};
struct futhark_mc_segmap_parloop_struct_74099 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_67915;
    char *free_mem_67918;
    char *free_mem_67921;
};
static int futhark_mc_segmap_parloop_74100(void *args, int64_t start,
                                           int64_t end, int flat_tid_65380,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74099
    *futhark_mc_segmap_parloop_struct_74099 =
    (struct futhark_mc_segmap_parloop_struct_74099 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74099->ctx;
    uint64_t futhark_mc_segmap_parloop_74100_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74100_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74099->free_n_62364;
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_segmap_parloop_struct_74099->free_mem_67915,
                                 .size =0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_segmap_parloop_struct_74099->free_mem_67918,
                                 .size =0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_segmap_parloop_struct_74099->free_mem_67921,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71699 = start;
    
    for (; iter_71699 < end; iter_71699++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71700 = n_62364;
        int64_t gtid_65381 = iter_71699;
        int64_t remnant_71701 = iter_71699 - gtid_65381;
        int64_t x_71428 = ((int64_t *) mem_67915.mem)[gtid_65381];
        int64_t defunc_0_f_res_71429 = add64((int64_t) 1, x_71428);
        float defunc_0_f_res_71430 = sitofp_i64_f32(x_71428);
        
        ((float *) mem_67918.mem)[gtid_65381] = defunc_0_f_res_71430;
        ((int64_t *) mem_67921.mem)[gtid_65381] = defunc_0_f_res_71429;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74100_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74100_end -
                 futhark_mc_segmap_parloop_74100_start;
        
        ctx->futhark_mc_segmap_parloop_74100_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74100_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74100_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74098(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65380 = tid;
    int num_tasks_71698 = info.nsubtasks;
    struct futhark_mc_task_74097 *futhark_mc_task_74097 =
                                 (struct futhark_mc_task_74097 *) args;
    struct futhark_context *ctx = futhark_mc_task_74097->ctx;
    uint64_t futhark_mc_segmap_task_74098_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74098_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74097->free_n_62364;
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_task_74097->free_mem_67915, .size =
                                 0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_task_74097->free_mem_67918, .size =
                                 0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_task_74097->free_mem_67921, .size =
                                 0, .references =NULL};
    int64_t iter_71699;
    struct futhark_mc_segmap_parloop_struct_74099
    futhark_mc_segmap_parloop_struct_74099;
    
    futhark_mc_segmap_parloop_struct_74099.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74099.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74099.free_mem_67915 = mem_67915.mem;
    futhark_mc_segmap_parloop_struct_74099.free_mem_67918 = mem_67918.mem;
    futhark_mc_segmap_parloop_struct_74099.free_mem_67921 = mem_67921.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74100_task;
    
    futhark_mc_segmap_parloop_74100_task.name =
        "futhark_mc_segmap_parloop_74100";
    futhark_mc_segmap_parloop_74100_task.fn = futhark_mc_segmap_parloop_74100;
    futhark_mc_segmap_parloop_74100_task.args =
        &futhark_mc_segmap_parloop_struct_74099;
    futhark_mc_segmap_parloop_74100_task.iterations = iterations;
    futhark_mc_segmap_parloop_74100_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74100_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74100_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74100_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74100_task);
    
    if (futhark_mc_segmap_parloop_74100_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74100_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74100_total_end -
                 futhark_mc_segmap_parloop_74100_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74100_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74100_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74100_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74098_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74098_end -
                 futhark_mc_segmap_task_74098_start;
        
        ctx->futhark_mc_segmap_task_74098_runs[tid]++;
        ctx->futhark_mc_segmap_task_74098_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74098_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74101 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_65522;
    char *free_mem_67924;
};
struct futhark_mc_segmap_parloop_struct_74103 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_65522;
    char *free_mem_67924;
};
static int futhark_mc_segmap_parloop_74104(void *args, int64_t start,
                                           int64_t end, int flat_tid_65382,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74103
    *futhark_mc_segmap_parloop_struct_74103 =
    (struct futhark_mc_segmap_parloop_struct_74103 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74103->ctx;
    uint64_t futhark_mc_segmap_parloop_74104_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74104_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74103->free_q_62366;
    int64_t last_res_65522 =
            futhark_mc_segmap_parloop_struct_74103->free_last_res_65522;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_segmap_parloop_struct_74103->free_mem_67924,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71703 = start;
    
    for (; iter_71703 < end; iter_71703++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71704 = q_62366;
        int64_t gtid_65383 = iter_71703;
        int64_t remnant_71705 = iter_71703 - gtid_65383;
        bool cond_71431 = sle64(last_res_65522, gtid_65383);
        float defunc_0_f_res_71432;
        
        if (cond_71431) {
            defunc_0_f_res_71432 = 0.0F;
        } else {
            defunc_0_f_res_71432 = 1.0F;
        }
        ((float *) mem_67924.mem)[gtid_65383] = defunc_0_f_res_71432;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74104_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74104_end -
                 futhark_mc_segmap_parloop_74104_start;
        
        ctx->futhark_mc_segmap_parloop_74104_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74104_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74104_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74102(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65382 = tid;
    int num_tasks_71702 = info.nsubtasks;
    struct futhark_mc_task_74101 *futhark_mc_task_74101 =
                                 (struct futhark_mc_task_74101 *) args;
    struct futhark_context *ctx = futhark_mc_task_74101->ctx;
    uint64_t futhark_mc_segmap_task_74102_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74102_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_74101->free_q_62366;
    int64_t last_res_65522 = futhark_mc_task_74101->free_last_res_65522;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_task_74101->free_mem_67924, .size =
                                 0, .references =NULL};
    int64_t iter_71703;
    struct futhark_mc_segmap_parloop_struct_74103
    futhark_mc_segmap_parloop_struct_74103;
    
    futhark_mc_segmap_parloop_struct_74103.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74103.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74103.free_last_res_65522 = last_res_65522;
    futhark_mc_segmap_parloop_struct_74103.free_mem_67924 = mem_67924.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74104_task;
    
    futhark_mc_segmap_parloop_74104_task.name =
        "futhark_mc_segmap_parloop_74104";
    futhark_mc_segmap_parloop_74104_task.fn = futhark_mc_segmap_parloop_74104;
    futhark_mc_segmap_parloop_74104_task.args =
        &futhark_mc_segmap_parloop_struct_74103;
    futhark_mc_segmap_parloop_74104_task.iterations = iterations;
    futhark_mc_segmap_parloop_74104_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74104_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74104_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74104_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74104_task);
    
    if (futhark_mc_segmap_parloop_74104_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74104_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74104_total_end -
                 futhark_mc_segmap_parloop_74104_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74104_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74104_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74104_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74102_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74102_end -
                 futhark_mc_segmap_task_74102_start;
        
        ctx->futhark_mc_segmap_task_74102_runs[tid]++;
        ctx->futhark_mc_segmap_task_74102_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74102_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74105 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65522;
    int64_t free_min_arg_65534;
    int64_t free_min_arg_65535;
    float free_max_res_65539;
    char *free_mem_67912;
    char *free_mem_67915;
    char *free_mem_67918;
    char *free_mem_67921;
    int64_t free_bytes_67922;
    char *free_mem_67924;
    char *free_mem_67945;
};
struct futhark_mc_segmap_parloop_struct_74107 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65522;
    int64_t free_min_arg_65534;
    int64_t free_min_arg_65535;
    float free_max_res_65539;
    char *free_mem_67912;
    char *free_mem_67915;
    char *free_mem_67918;
    char *free_mem_67921;
    int64_t free_bytes_67922;
    char *free_mem_67924;
    char *free_mem_67945;
};
static int futhark_mc_segmap_parloop_74108(void *args, int64_t start,
                                           int64_t end, int flat_tid_65384,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74107
    *futhark_mc_segmap_parloop_struct_74107 =
    (struct futhark_mc_segmap_parloop_struct_74107 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74107->ctx;
    uint64_t futhark_mc_segmap_parloop_74108_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74108_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74107->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74107->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74107->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74107->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74107->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74107->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74107->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74107->free_loop_cond_62389;
    int64_t last_res_65522 =
            futhark_mc_segmap_parloop_struct_74107->free_last_res_65522;
    int64_t min_arg_65534 =
            futhark_mc_segmap_parloop_struct_74107->free_min_arg_65534;
    int64_t min_arg_65535 =
            futhark_mc_segmap_parloop_struct_74107->free_min_arg_65535;
    float max_res_65539 =
          futhark_mc_segmap_parloop_struct_74107->free_max_res_65539;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67912,
                                 .size =0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67915,
                                 .size =0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67918,
                                 .size =0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67921,
                                 .size =0, .references =NULL};
    int64_t bytes_67922 =
            futhark_mc_segmap_parloop_struct_74107->free_bytes_67922;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67924,
                                 .size =0, .references =NULL};
    struct memblock mem_67945 = {.desc ="mem_67945", .mem =
                                 futhark_mc_segmap_parloop_struct_74107->free_mem_67945,
                                 .size =0, .references =NULL};
    size_t mem_71638_cached_sizze_74109 = 0;
    char *mem_71638 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71707 = start;
    
    if (mem_71638_cached_sizze_74109 < (size_t) bytes_67922) {
        mem_71638 = realloc(mem_71638, bytes_67922);
        mem_71638_cached_sizze_74109 = bytes_67922;
    }
    for (; iter_71707 < end; iter_71707++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71793 = n_m_62372;
        int64_t gtid_65385 = iter_71707;
        int64_t remnant_71794 = iter_71707 - gtid_65385;
        int64_t min_arg_71552 = mul64(jump_62368, gtid_65385);
        int64_t min_res_71553 = smin64(i_62378, min_arg_71552);
        int64_t defunc_0_g_res_71554 = add64((int64_t) 1, min_res_71553);
        bool init_idx_71555;
        int64_t init_idx_71556;
        int64_t init_idx_71557;
        bool loop_while_71708;
        int64_t low_71709;
        int64_t high_71710;
        
        loop_while_71708 = x_62379;
        low_71709 = (int64_t) 0;
        high_71710 = i_62378;
        while (loop_while_71708) {
            int64_t x_71711 = add64(low_71709, high_71710);
            int64_t mid_71712 = sdiv64(x_71711, (int64_t) 2);
            bool x_71713 = sle64((int64_t) 0, mid_71712);
            bool y_71714 = slt64(mid_71712, n_62364);
            bool bounds_check_71715 = x_71713 && y_71714;
            bool index_certs_71716;
            
            if (!bounds_check_71715) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71712,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_71717 = ((int64_t *) mem_67921.mem)[mid_71712];
            bool cond_71718 = slt64(mid_id_71717, (int64_t) 0);
            int64_t mid_idx_71719;
            
            if (cond_71718) {
                mid_idx_71719 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_71719 = mid_id_71717;
            }
            
            bool cond_71720 = sle64(defunc_0_g_res_71554, mid_idx_71719);
            int64_t loopres_71721;
            int64_t loopres_71722;
            
            if (cond_71720) {
                int64_t loopres_t_res_71723 = sub64(mid_71712, (int64_t) 1);
                
                loopres_71721 = low_71709;
                loopres_71722 = loopres_t_res_71723;
            } else {
                int64_t loopres_f_res_71724 = add64((int64_t) 1, mid_71712);
                
                loopres_71721 = loopres_f_res_71724;
                loopres_71722 = high_71710;
            }
            
            bool loop_cond_71725 = sle64(loopres_71721, loopres_71722);
            bool loop_while_tmp_71795 = loop_cond_71725;
            int64_t low_tmp_71796 = loopres_71721;
            int64_t high_tmp_71797 = loopres_71722;
            
            loop_while_71708 = loop_while_tmp_71795;
            low_71709 = low_tmp_71796;
            high_71710 = high_tmp_71797;
        }
        init_idx_71555 = loop_while_71708;
        init_idx_71556 = low_71709;
        init_idx_71557 = high_71710;
        
        bool idx_71576;
        int64_t idx_71577;
        int64_t idx_71578;
        int64_t idx_71579;
        bool loop_while_71726;
        int64_t l_idx_71727;
        int64_t r_idx_71728;
        int64_t span_71729;
        
        loop_while_71726 = loop_cond_62389;
        l_idx_71727 = init_idx_71556;
        r_idx_71728 = init_idx_71556;
        span_71729 = (int64_t) 1;
        while (loop_while_71726) {
            int64_t max_arg_71730 = sub64(l_idx_71727, (int64_t) 1);
            int64_t max_res_71731 = smax64((int64_t) 0, max_arg_71730);
            int64_t min_arg_71732 = add64((int64_t) 1, r_idx_71728);
            int64_t min_res_71733 = smin64(min_arg_65534, min_arg_71732);
            bool x_71734 = sle64((int64_t) 0, max_res_71731);
            bool y_71735 = slt64(max_res_71731, n_62364);
            bool bounds_check_71736 = x_71734 && y_71735;
            bool index_certs_71737;
            
            if (!bounds_check_71736) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71731,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71738 = ((int64_t *) mem_67921.mem)[max_res_71731];
            int64_t abs_arg_71739 = sub64(x_71738, defunc_0_g_res_71554);
            int64_t abs_res_71740 = abs64(abs_arg_71739);
            bool x_71741 = sle64((int64_t) 0, min_res_71733);
            bool y_71742 = slt64(min_res_71733, n_62364);
            bool bounds_check_71743 = x_71741 && y_71742;
            bool index_certs_71744;
            
            if (!bounds_check_71743) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71733,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71745 = ((int64_t *) mem_67921.mem)[min_res_71733];
            int64_t abs_arg_71746 = sub64(x_71745, defunc_0_g_res_71554);
            int64_t abs_res_71747 = abs64(abs_arg_71746);
            bool cond_71748 = max_res_71731 == l_idx_71727;
            int64_t loopres_71749;
            int64_t loopres_71750;
            int64_t loopres_71751;
            
            if (cond_71748) {
                loopres_71749 = l_idx_71727;
                loopres_71750 = r_idx_71728;
                loopres_71751 = min_res_62384;
            } else {
                bool cond_71752 = slt64(abs_res_71740, abs_res_71747);
                bool cond_f_res_71753 = min_res_71733 == r_idx_71728;
                bool x_71754 = !cond_71752;
                bool y_71755 = cond_f_res_71753 && x_71754;
                bool cond_71756 = cond_71752 || y_71755;
                int64_t loopres_f_res_71757;
                
                if (cond_71756) {
                    loopres_f_res_71757 = max_res_71731;
                } else {
                    loopres_f_res_71757 = l_idx_71727;
                }
                
                int64_t loopres_f_res_71758;
                
                if (cond_71756) {
                    loopres_f_res_71758 = r_idx_71728;
                } else {
                    loopres_f_res_71758 = min_res_71733;
                }
                
                int64_t loopres_f_res_71759;
                
                if (cond_71756) {
                    int64_t loopres_f_res_t_res_71760 = add64((int64_t) 1,
                                                              span_71729);
                    
                    loopres_f_res_71759 = loopres_f_res_t_res_71760;
                } else {
                    int64_t loopres_f_res_f_res_71761 = add64((int64_t) 1,
                                                              span_71729);
                    
                    loopres_f_res_71759 = loopres_f_res_f_res_71761;
                }
                loopres_71749 = loopres_f_res_71757;
                loopres_71750 = loopres_f_res_71758;
                loopres_71751 = loopres_f_res_71759;
            }
            
            bool loop_cond_71762 = slt64(loopres_71751, min_res_62384);
            bool loop_while_tmp_71798 = loop_cond_71762;
            int64_t l_idx_tmp_71799 = loopres_71749;
            int64_t r_idx_tmp_71800 = loopres_71750;
            int64_t span_tmp_71801 = loopres_71751;
            
            loop_while_71726 = loop_while_tmp_71798;
            l_idx_71727 = l_idx_tmp_71799;
            r_idx_71728 = r_idx_tmp_71800;
            span_71729 = span_tmp_71801;
        }
        idx_71576 = loop_while_71726;
        idx_71577 = l_idx_71727;
        idx_71578 = r_idx_71728;
        idx_71579 = span_71729;
        
        int64_t min_res_71617 = smin64(min_arg_65535, idx_71577);
        int64_t x_71618 = add64(min_res_62384, min_res_71617);
        int64_t r_71619 = sub64(x_71618, (int64_t) 1);
        bool x_71620 = sle64((int64_t) 0, r_71619);
        bool y_71621 = slt64(r_71619, n_62364);
        bool bounds_check_71622 = x_71620 && y_71621;
        bool index_certs_71623;
        
        if (!bounds_check_71622) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71619,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_71624 = ((int64_t *) mem_67915.mem)[r_71619];
        int64_t abs_arg_71625 = sub64(x_71624, min_res_71553);
        int64_t abs_res_71626 = abs64(abs_arg_71625);
        bool x_71627 = sle64((int64_t) 0, min_res_71617);
        bool y_71628 = slt64(min_res_71617, n_62364);
        bool bounds_check_71629 = x_71627 && y_71628;
        bool index_certs_71630;
        
        if (!bounds_check_71629) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71617,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_71631 = ((int64_t *) mem_67915.mem)[min_res_71617];
        int64_t abs_arg_71632 = sub64(x_71631, min_res_71553);
        int64_t abs_res_71633 = abs64(abs_arg_71632);
        int64_t max_res_71634 = smax64(abs_res_71626, abs_res_71633);
        float defunc_0_f_res_71635 = sitofp_i64_f32(max_res_71634);
        float defunc_1_f_res_71636 = max_res_65539 + defunc_0_f_res_71635;
        float defunc_0_f_res_71637 = sitofp_i64_f32(min_res_71553);
        float defunc_2_reduce_res_71640;
        float redout_71764 = 0.0F;
        
        for (int64_t i_71763 = 0; i_71763 < q_62366; i_71763++) {
            float x_71766 = ((float *) mem_67924.mem)[i_71763];
            bool cond_71767 = sle64(last_res_65522, i_71763);
            float defunc_0_f_res_71768;
            
            if (cond_71767) {
                defunc_0_f_res_71768 = 0.0F;
            } else {
                int64_t i_71769 = add64(min_res_71617, i_71763);
                float x_71770 = ((float *) mem_67918.mem)[i_71769];
                float defunc_0_f_res_f_res_71771 = 1.0F + x_71770;
                
                defunc_0_f_res_71768 = defunc_0_f_res_f_res_71771;
            }
            
            float x_j_71772 = defunc_0_f_res_71768 - defunc_0_f_res_71637;
            float abs_res_71773 = (float) fabs(x_j_71772);
            float tmp1_71774 = abs_res_71773 / defunc_1_f_res_71636;
            float x_71775 = tmp1_71774 * tmp1_71774;
            float y_71776 = tmp1_71774 * x_71775;
            float tmp2_71777 = 1.0F - y_71776;
            float x_71778 = tmp2_71777 * tmp2_71777;
            float tmp3_71779 = tmp2_71777 * x_71778;
            float tmp4_71780 = x_71766 * tmp3_71779;
            float defunc_1_op_res_71781 = tmp4_71780 + redout_71764;
            
            ((float *) mem_71638)[i_71763] = tmp4_71780;
            
            float redout_tmp_71802 = defunc_1_op_res_71781;
            
            redout_71764 = redout_tmp_71802;
        }
        defunc_2_reduce_res_71640 = redout_71764;
        
        float a0_71662 = 1.0F / defunc_2_reduce_res_71640;
        float defunc_2_reduce_res_71663;
        float redout_71784 = 0.0F;
        
        for (int64_t i_71783 = 0; i_71783 < q_62366; i_71783++) {
            float x_71785 = ((float *) mem_71638)[i_71783];
            bool cond_71786 = sle64(last_res_65522, i_71783);
            float defunc_0_f_res_71787;
            
            if (cond_71786) {
                defunc_0_f_res_71787 = 0.0F;
            } else {
                int64_t i_71788 = add64(min_res_71617, i_71783);
                float x_71789 = ((float *) mem_67912.mem)[i_71788];
                
                defunc_0_f_res_71787 = x_71789;
            }
            
            float x_71790 = a0_71662 * x_71785;
            float defunc_9_fit_fun_res_71791 = defunc_0_f_res_71787 * x_71790;
            float defunc_1_op_res_71792 = defunc_9_fit_fun_res_71791 +
                  redout_71784;
            float redout_tmp_71804 = defunc_1_op_res_71792;
            
            redout_71784 = redout_tmp_71804;
        }
        defunc_2_reduce_res_71663 = redout_71784;
        ((float *) mem_67945.mem)[gtid_65385] = defunc_2_reduce_res_71663;
    }
    
  cleanup:
    { }
    free(mem_71638);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74108_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74108_end -
                 futhark_mc_segmap_parloop_74108_start;
        
        ctx->futhark_mc_segmap_parloop_74108_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74108_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74108_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74106(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65384 = tid;
    int num_tasks_71706 = info.nsubtasks;
    struct futhark_mc_task_74105 *futhark_mc_task_74105 =
                                 (struct futhark_mc_task_74105 *) args;
    struct futhark_context *ctx = futhark_mc_task_74105->ctx;
    uint64_t futhark_mc_segmap_task_74106_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74106_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74105->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74105->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74105->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74105->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74105->free_i_62378;
    bool x_62379 = futhark_mc_task_74105->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74105->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74105->free_loop_cond_62389;
    int64_t last_res_65522 = futhark_mc_task_74105->free_last_res_65522;
    int64_t min_arg_65534 = futhark_mc_task_74105->free_min_arg_65534;
    int64_t min_arg_65535 = futhark_mc_task_74105->free_min_arg_65535;
    float max_res_65539 = futhark_mc_task_74105->free_max_res_65539;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_task_74105->free_mem_67912, .size =
                                 0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_task_74105->free_mem_67915, .size =
                                 0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_task_74105->free_mem_67918, .size =
                                 0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_task_74105->free_mem_67921, .size =
                                 0, .references =NULL};
    int64_t bytes_67922 = futhark_mc_task_74105->free_bytes_67922;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_task_74105->free_mem_67924, .size =
                                 0, .references =NULL};
    struct memblock mem_67945 = {.desc ="mem_67945", .mem =
                                 futhark_mc_task_74105->free_mem_67945, .size =
                                 0, .references =NULL};
    int64_t iter_71707;
    struct futhark_mc_segmap_parloop_struct_74107
    futhark_mc_segmap_parloop_struct_74107;
    
    futhark_mc_segmap_parloop_struct_74107.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74107.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74107.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74107.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74107.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74107.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74107.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74107.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74107.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74107.free_last_res_65522 = last_res_65522;
    futhark_mc_segmap_parloop_struct_74107.free_min_arg_65534 = min_arg_65534;
    futhark_mc_segmap_parloop_struct_74107.free_min_arg_65535 = min_arg_65535;
    futhark_mc_segmap_parloop_struct_74107.free_max_res_65539 = max_res_65539;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67912 = mem_67912.mem;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67915 = mem_67915.mem;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67918 = mem_67918.mem;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67921 = mem_67921.mem;
    futhark_mc_segmap_parloop_struct_74107.free_bytes_67922 = bytes_67922;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67924 = mem_67924.mem;
    futhark_mc_segmap_parloop_struct_74107.free_mem_67945 = mem_67945.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74108_task;
    
    futhark_mc_segmap_parloop_74108_task.name =
        "futhark_mc_segmap_parloop_74108";
    futhark_mc_segmap_parloop_74108_task.fn = futhark_mc_segmap_parloop_74108;
    futhark_mc_segmap_parloop_74108_task.args =
        &futhark_mc_segmap_parloop_struct_74107;
    futhark_mc_segmap_parloop_74108_task.iterations = iterations;
    futhark_mc_segmap_parloop_74108_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74108_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74108_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74108_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74108_task);
    
    if (futhark_mc_segmap_parloop_74108_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74108_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74108_total_end -
                 futhark_mc_segmap_parloop_74108_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74108_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74108_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74108_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74106_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74106_end -
                 futhark_mc_segmap_task_74106_start;
        
        ctx->futhark_mc_segmap_task_74106_runs[tid]++;
        ctx->futhark_mc_segmap_task_74106_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74106_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74111 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65522;
    int64_t free_min_arg_65534;
    int64_t free_min_arg_65535;
    float free_max_res_65539;
    char *free_mem_67912;
    char *free_mem_67915;
    char *free_mem_67918;
    char *free_mem_67921;
    int64_t free_bytes_67922;
    char *free_mem_67924;
    char *free_mem_67945;
};
struct futhark_mc_task_74114 {
    struct futhark_context *ctx;
    int64_t free_last_res_65522;
    char *free_mem_67918;
    char *free_mem_67924;
    int64_t free_min_res_71498;
    float free_defunc_1_f_res_71517;
    float free_defunc_0_f_res_71518;
    float *retval_defunc_2_reduce_res_71520;
    char *retval_mem_71519;
};
struct futhark_mc_segred_stage_1_parloop_struct_74117 {
    struct futhark_context *ctx;
    int64_t free_last_res_65522;
    char *free_mem_67918;
    char *free_mem_67924;
    int64_t free_min_res_71498;
    float free_defunc_1_f_res_71517;
    float free_defunc_0_f_res_71518;
    char *free_mem_71519;
    char *free_reduce_stage_1_tid_res_arr_mem_71899;
};
static int futhark_mc_segred_stage_1_parloop_74118(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65388, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74117
    *futhark_mc_segred_stage_1_parloop_struct_74117 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74117 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74117->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74118_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74118_start = get_wall_time();
    
    int64_t last_res_65522 =
            futhark_mc_segred_stage_1_parloop_struct_74117->free_last_res_65522;
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74117->free_mem_67918,
                                 .size =0, .references =NULL};
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74117->free_mem_67924,
                                 .size =0, .references =NULL};
    int64_t min_res_71498 =
            futhark_mc_segred_stage_1_parloop_struct_74117->free_min_res_71498;
    float defunc_1_f_res_71517 =
          futhark_mc_segred_stage_1_parloop_struct_74117->free_defunc_1_f_res_71517;
    float defunc_0_f_res_71518 =
          futhark_mc_segred_stage_1_parloop_struct_74117->free_defunc_0_f_res_71518;
    struct memblock mem_71519 = {.desc ="mem_71519", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74117->free_mem_71519,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71899 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71899",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74117->free_reduce_stage_1_tid_res_arr_mem_71899,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71901 = start;
    float x_71861;
    float x_71862;
    float local_acc_71902 = 0.0F;
    
    for (; iter_71901 < end; iter_71901++) {
        int64_t gtid_65389 = iter_71901;
        float x_71864 = ((float *) mem_67924.mem)[gtid_65389];
        bool cond_71865 = sle64(last_res_65522, gtid_65389);
        float defunc_0_f_res_71866;
        
        if (cond_71865) {
            defunc_0_f_res_71866 = 0.0F;
        } else {
            int64_t i_71867 = add64(gtid_65389, min_res_71498);
            float x_71868 = ((float *) mem_67918.mem)[i_71867];
            float defunc_0_f_res_f_res_71869 = 1.0F + x_71868;
            
            defunc_0_f_res_71866 = defunc_0_f_res_f_res_71869;
        }
        
        float x_j_71870 = defunc_0_f_res_71866 - defunc_0_f_res_71518;
        float abs_res_71871 = (float) fabs(x_j_71870);
        float tmp1_71872 = abs_res_71871 / defunc_1_f_res_71517;
        float x_71873 = tmp1_71872 * tmp1_71872;
        float y_71874 = tmp1_71872 * x_71873;
        float tmp2_71875 = 1.0F - y_71874;
        float x_71876 = tmp2_71875 * tmp2_71875;
        float tmp3_71877 = tmp2_71875 * x_71876;
        float tmp4_71878 = x_71864 * tmp3_71877;
        
        // save map-out results
        {
            ((float *) mem_71519.mem)[gtid_65389] = tmp4_71878;
        }
        // Load accum params
        {
            x_71861 = local_acc_71902;
        }
        // Load next params
        {
            x_71862 = tmp4_71878;
        }
        // Red body
        {
            float defunc_1_op_res_71863 = x_71861 + x_71862;
            
            local_acc_71902 = defunc_1_op_res_71863;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71899.mem)[flat_tid_65388] =
        local_acc_71902;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74118_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74118_end -
                 futhark_mc_segred_stage_1_parloop_74118_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74118_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74118_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74118_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74115(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65388 = tid;
    int num_tasks_71898 = info.nsubtasks;
    struct futhark_mc_task_74114 *futhark_mc_task_74114 =
                                 (struct futhark_mc_task_74114 *) args;
    struct futhark_context *ctx = futhark_mc_task_74114->ctx;
    uint64_t futhark_mc_segred_task_74115_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74115_start = get_wall_time();
    
    int64_t last_res_65522 = futhark_mc_task_74114->free_last_res_65522;
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_task_74114->free_mem_67918, .size =
                                 0, .references =NULL};
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_task_74114->free_mem_67924, .size =
                                 0, .references =NULL};
    int64_t min_res_71498 = futhark_mc_task_74114->free_min_res_71498;
    float defunc_1_f_res_71517 =
          futhark_mc_task_74114->free_defunc_1_f_res_71517;
    float defunc_0_f_res_71518 =
          futhark_mc_task_74114->free_defunc_0_f_res_71518;
    float defunc_2_reduce_res_71520 =
          *futhark_mc_task_74114->retval_defunc_2_reduce_res_71520;
    struct memblock mem_71519 = {.desc ="mem_71519", .mem =
                                 futhark_mc_task_74114->retval_mem_71519,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_71899_cached_sizze_74116 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71899 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71899_cached_sizze_74116 <
        (size_t) ((int64_t) 4 * num_tasks_71898)) {
        reduce_stage_1_tid_res_arr_mem_71899 =
            realloc(reduce_stage_1_tid_res_arr_mem_71899, (int64_t) 4 *
                    num_tasks_71898);
        reduce_stage_1_tid_res_arr_mem_71899_cached_sizze_74116 = (int64_t) 4 *
            num_tasks_71898;
    }
    
    int64_t iter_71901;
    struct futhark_mc_segred_stage_1_parloop_struct_74117
    futhark_mc_segred_stage_1_parloop_struct_74117;
    
    futhark_mc_segred_stage_1_parloop_struct_74117.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_last_res_65522 =
        last_res_65522;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_mem_67918 =
        mem_67918.mem;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_mem_67924 =
        mem_67924.mem;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_min_res_71498 =
        min_res_71498;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_defunc_1_f_res_71517 =
        defunc_1_f_res_71517;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_defunc_0_f_res_71518 =
        defunc_0_f_res_71518;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_mem_71519 =
        mem_71519.mem;
    futhark_mc_segred_stage_1_parloop_struct_74117.free_reduce_stage_1_tid_res_arr_mem_71899 =
        reduce_stage_1_tid_res_arr_mem_71899;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74118_task;
    
    futhark_mc_segred_stage_1_parloop_74118_task.name =
        "futhark_mc_segred_stage_1_parloop_74118";
    futhark_mc_segred_stage_1_parloop_74118_task.fn =
        futhark_mc_segred_stage_1_parloop_74118;
    futhark_mc_segred_stage_1_parloop_74118_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74117;
    futhark_mc_segred_stage_1_parloop_74118_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74118_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74118_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74118_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74118_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74118_task);
    
    if (futhark_mc_segred_stage_1_parloop_74118_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74118_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74118_total_end -
                 futhark_mc_segred_stage_1_parloop_74118_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74118_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74118_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74118_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71520 = 0.0F;
    }
    
    float x_71903;
    float x_71904;
    
    for (int32_t i_71906 = 0; i_71906 < num_tasks_71898; i_71906++) {
        flat_tid_65388 = i_71906;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71903 = defunc_2_reduce_res_71520;
            }
            // load next params
            {
                x_71904 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71899)[flat_tid_65388];
            }
            // red body
            {
                float defunc_1_op_res_71905 = x_71903 + x_71904;
                
                defunc_2_reduce_res_71520 = defunc_1_op_res_71905;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71899);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74115_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74115_end -
                 futhark_mc_segred_task_74115_start;
        
        ctx->futhark_mc_segred_task_74115_runs[tid]++;
        ctx->futhark_mc_segred_task_74115_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74115_iter[tid] += iterations;
    }
    *futhark_mc_task_74114->retval_defunc_2_reduce_res_71520 =
        defunc_2_reduce_res_71520;
    futhark_mc_task_74114->retval_mem_71519 = mem_71519.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74119 {
    struct futhark_context *ctx;
    int64_t free_last_res_65522;
    char *free_mem_67912;
    int64_t free_min_res_71498;
    char *free_mem_71519;
    float free_a0_71540;
    float *retval_defunc_2_reduce_res_71541;
};
struct futhark_mc_segred_stage_1_parloop_struct_74122 {
    struct futhark_context *ctx;
    int64_t free_last_res_65522;
    char *free_mem_67912;
    int64_t free_min_res_71498;
    char *free_mem_71519;
    float free_a0_71540;
    char *free_reduce_stage_1_tid_res_arr_mem_71908;
};
static int futhark_mc_segred_stage_1_parloop_74123(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65390, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74122
    *futhark_mc_segred_stage_1_parloop_struct_74122 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74122 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74122->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74123_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74123_start = get_wall_time();
    
    int64_t last_res_65522 =
            futhark_mc_segred_stage_1_parloop_struct_74122->free_last_res_65522;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74122->free_mem_67912,
                                 .size =0, .references =NULL};
    int64_t min_res_71498 =
            futhark_mc_segred_stage_1_parloop_struct_74122->free_min_res_71498;
    struct memblock mem_71519 = {.desc ="mem_71519", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74122->free_mem_71519,
                                 .size =0, .references =NULL};
    float a0_71540 =
          futhark_mc_segred_stage_1_parloop_struct_74122->free_a0_71540;
    struct memblock reduce_stage_1_tid_res_arr_mem_71908 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71908",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74122->free_reduce_stage_1_tid_res_arr_mem_71908,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71910 = start;
    float x_71879;
    float x_71880;
    float local_acc_71911 = 0.0F;
    
    for (; iter_71910 < end; iter_71910++) {
        int64_t gtid_65391 = iter_71910;
        float x_71882 = ((float *) mem_71519.mem)[gtid_65391];
        bool cond_71883 = sle64(last_res_65522, gtid_65391);
        float defunc_0_f_res_71884;
        
        if (cond_71883) {
            defunc_0_f_res_71884 = 0.0F;
        } else {
            int64_t i_71885 = add64(gtid_65391, min_res_71498);
            float x_71886 = ((float *) mem_67912.mem)[i_71885];
            
            defunc_0_f_res_71884 = x_71886;
        }
        
        float x_71887 = a0_71540 * x_71882;
        float defunc_9_fit_fun_res_71888 = defunc_0_f_res_71884 * x_71887;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71879 = local_acc_71911;
        }
        // Load next params
        {
            x_71880 = defunc_9_fit_fun_res_71888;
        }
        // Red body
        {
            float defunc_1_op_res_71881 = x_71879 + x_71880;
            
            local_acc_71911 = defunc_1_op_res_71881;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71908.mem)[flat_tid_65390] =
        local_acc_71911;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74123_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74123_end -
                 futhark_mc_segred_stage_1_parloop_74123_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74123_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74123_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74123_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74120(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65390 = tid;
    int num_tasks_71907 = info.nsubtasks;
    struct futhark_mc_task_74119 *futhark_mc_task_74119 =
                                 (struct futhark_mc_task_74119 *) args;
    struct futhark_context *ctx = futhark_mc_task_74119->ctx;
    uint64_t futhark_mc_segred_task_74120_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74120_start = get_wall_time();
    
    int64_t last_res_65522 = futhark_mc_task_74119->free_last_res_65522;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_task_74119->free_mem_67912, .size =
                                 0, .references =NULL};
    int64_t min_res_71498 = futhark_mc_task_74119->free_min_res_71498;
    struct memblock mem_71519 = {.desc ="mem_71519", .mem =
                                 futhark_mc_task_74119->free_mem_71519, .size =
                                 0, .references =NULL};
    float a0_71540 = futhark_mc_task_74119->free_a0_71540;
    float defunc_2_reduce_res_71541 =
          *futhark_mc_task_74119->retval_defunc_2_reduce_res_71541;
    size_t reduce_stage_1_tid_res_arr_mem_71908_cached_sizze_74121 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71908 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71908_cached_sizze_74121 <
        (size_t) ((int64_t) 4 * num_tasks_71907)) {
        reduce_stage_1_tid_res_arr_mem_71908 =
            realloc(reduce_stage_1_tid_res_arr_mem_71908, (int64_t) 4 *
                    num_tasks_71907);
        reduce_stage_1_tid_res_arr_mem_71908_cached_sizze_74121 = (int64_t) 4 *
            num_tasks_71907;
    }
    
    int64_t iter_71910;
    struct futhark_mc_segred_stage_1_parloop_struct_74122
    futhark_mc_segred_stage_1_parloop_struct_74122;
    
    futhark_mc_segred_stage_1_parloop_struct_74122.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_last_res_65522 =
        last_res_65522;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_mem_67912 =
        mem_67912.mem;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_min_res_71498 =
        min_res_71498;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_mem_71519 =
        mem_71519.mem;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_a0_71540 = a0_71540;
    futhark_mc_segred_stage_1_parloop_struct_74122.free_reduce_stage_1_tid_res_arr_mem_71908 =
        reduce_stage_1_tid_res_arr_mem_71908;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74123_task;
    
    futhark_mc_segred_stage_1_parloop_74123_task.name =
        "futhark_mc_segred_stage_1_parloop_74123";
    futhark_mc_segred_stage_1_parloop_74123_task.fn =
        futhark_mc_segred_stage_1_parloop_74123;
    futhark_mc_segred_stage_1_parloop_74123_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74122;
    futhark_mc_segred_stage_1_parloop_74123_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74123_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74123_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74123_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74123_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74123_task);
    
    if (futhark_mc_segred_stage_1_parloop_74123_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74123_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74123_total_end -
                 futhark_mc_segred_stage_1_parloop_74123_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74123_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74123_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74123_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71541 = 0.0F;
    }
    
    float x_71912;
    float x_71913;
    
    for (int32_t i_71915 = 0; i_71915 < num_tasks_71907; i_71915++) {
        flat_tid_65390 = i_71915;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71912 = defunc_2_reduce_res_71541;
            }
            // load next params
            {
                x_71913 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71908)[flat_tid_65390];
            }
            // red body
            {
                float defunc_1_op_res_71914 = x_71912 + x_71913;
                
                defunc_2_reduce_res_71541 = defunc_1_op_res_71914;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71908);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74120_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74120_end -
                 futhark_mc_segred_task_74120_start;
        
        ctx->futhark_mc_segred_task_74120_runs[tid]++;
        ctx->futhark_mc_segred_task_74120_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74120_iter[tid] += iterations;
    }
    *futhark_mc_task_74119->retval_defunc_2_reduce_res_71541 =
        defunc_2_reduce_res_71541;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74112(void *args, int64_t start,
                                           int64_t end, int flat_tid_65386,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74111
    *futhark_mc_segmap_parloop_struct_74111 =
    (struct futhark_mc_segmap_parloop_struct_74111 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74111->ctx;
    uint64_t futhark_mc_segmap_parloop_74112_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74112_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74111->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74111->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74111->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74111->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74111->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74111->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74111->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74111->free_loop_cond_62389;
    int64_t last_res_65522 =
            futhark_mc_segmap_parloop_struct_74111->free_last_res_65522;
    int64_t min_arg_65534 =
            futhark_mc_segmap_parloop_struct_74111->free_min_arg_65534;
    int64_t min_arg_65535 =
            futhark_mc_segmap_parloop_struct_74111->free_min_arg_65535;
    float max_res_65539 =
          futhark_mc_segmap_parloop_struct_74111->free_max_res_65539;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67912,
                                 .size =0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67915,
                                 .size =0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67918,
                                 .size =0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67921,
                                 .size =0, .references =NULL};
    int64_t bytes_67922 =
            futhark_mc_segmap_parloop_struct_74111->free_bytes_67922;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67924,
                                 .size =0, .references =NULL};
    struct memblock mem_67945 = {.desc ="mem_67945", .mem =
                                 futhark_mc_segmap_parloop_struct_74111->free_mem_67945,
                                 .size =0, .references =NULL};
    size_t mem_71519_cached_sizze_74113 = 0;
    char *mem_71519 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71805 = start;
    
    if (mem_71519_cached_sizze_74113 < (size_t) bytes_67922) {
        mem_71519 = realloc(mem_71519, bytes_67922);
        mem_71519_cached_sizze_74113 = bytes_67922;
    }
    for (; iter_71805 < end; iter_71805++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71889 = n_m_62372;
        int64_t gtid_65387 = iter_71805;
        int64_t remnant_71890 = iter_71805 - gtid_65387;
        int64_t min_arg_71433 = mul64(jump_62368, gtid_65387);
        int64_t min_res_71434 = smin64(i_62378, min_arg_71433);
        int64_t defunc_0_g_res_71435 = add64((int64_t) 1, min_res_71434);
        bool init_idx_71436;
        int64_t init_idx_71437;
        int64_t init_idx_71438;
        bool loop_while_71806;
        int64_t low_71807;
        int64_t high_71808;
        
        loop_while_71806 = x_62379;
        low_71807 = (int64_t) 0;
        high_71808 = i_62378;
        while (loop_while_71806) {
            int64_t x_71809 = add64(low_71807, high_71808);
            int64_t mid_71810 = sdiv64(x_71809, (int64_t) 2);
            bool x_71811 = sle64((int64_t) 0, mid_71810);
            bool y_71812 = slt64(mid_71810, n_62364);
            bool bounds_check_71813 = x_71811 && y_71812;
            bool index_certs_71814;
            
            if (!bounds_check_71813) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71810,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_71815 = ((int64_t *) mem_67921.mem)[mid_71810];
            bool cond_71816 = slt64(mid_id_71815, (int64_t) 0);
            int64_t mid_idx_71817;
            
            if (cond_71816) {
                mid_idx_71817 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_71817 = mid_id_71815;
            }
            
            bool cond_71818 = sle64(defunc_0_g_res_71435, mid_idx_71817);
            int64_t loopres_71819;
            int64_t loopres_71820;
            
            if (cond_71818) {
                int64_t loopres_t_res_71821 = sub64(mid_71810, (int64_t) 1);
                
                loopres_71819 = low_71807;
                loopres_71820 = loopres_t_res_71821;
            } else {
                int64_t loopres_f_res_71822 = add64((int64_t) 1, mid_71810);
                
                loopres_71819 = loopres_f_res_71822;
                loopres_71820 = high_71808;
            }
            
            bool loop_cond_71823 = sle64(loopres_71819, loopres_71820);
            bool loop_while_tmp_71891 = loop_cond_71823;
            int64_t low_tmp_71892 = loopres_71819;
            int64_t high_tmp_71893 = loopres_71820;
            
            loop_while_71806 = loop_while_tmp_71891;
            low_71807 = low_tmp_71892;
            high_71808 = high_tmp_71893;
        }
        init_idx_71436 = loop_while_71806;
        init_idx_71437 = low_71807;
        init_idx_71438 = high_71808;
        
        bool idx_71457;
        int64_t idx_71458;
        int64_t idx_71459;
        int64_t idx_71460;
        bool loop_while_71824;
        int64_t l_idx_71825;
        int64_t r_idx_71826;
        int64_t span_71827;
        
        loop_while_71824 = loop_cond_62389;
        l_idx_71825 = init_idx_71437;
        r_idx_71826 = init_idx_71437;
        span_71827 = (int64_t) 1;
        while (loop_while_71824) {
            int64_t max_arg_71828 = sub64(l_idx_71825, (int64_t) 1);
            int64_t max_res_71829 = smax64((int64_t) 0, max_arg_71828);
            int64_t min_arg_71830 = add64((int64_t) 1, r_idx_71826);
            int64_t min_res_71831 = smin64(min_arg_65534, min_arg_71830);
            bool x_71832 = sle64((int64_t) 0, max_res_71829);
            bool y_71833 = slt64(max_res_71829, n_62364);
            bool bounds_check_71834 = x_71832 && y_71833;
            bool index_certs_71835;
            
            if (!bounds_check_71834) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71829,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71836 = ((int64_t *) mem_67921.mem)[max_res_71829];
            int64_t abs_arg_71837 = sub64(x_71836, defunc_0_g_res_71435);
            int64_t abs_res_71838 = abs64(abs_arg_71837);
            bool x_71839 = sle64((int64_t) 0, min_res_71831);
            bool y_71840 = slt64(min_res_71831, n_62364);
            bool bounds_check_71841 = x_71839 && y_71840;
            bool index_certs_71842;
            
            if (!bounds_check_71841) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71831,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_71843 = ((int64_t *) mem_67921.mem)[min_res_71831];
            int64_t abs_arg_71844 = sub64(x_71843, defunc_0_g_res_71435);
            int64_t abs_res_71845 = abs64(abs_arg_71844);
            bool cond_71846 = max_res_71829 == l_idx_71825;
            int64_t loopres_71847;
            int64_t loopres_71848;
            int64_t loopres_71849;
            
            if (cond_71846) {
                loopres_71847 = l_idx_71825;
                loopres_71848 = r_idx_71826;
                loopres_71849 = min_res_62384;
            } else {
                bool cond_71850 = slt64(abs_res_71838, abs_res_71845);
                bool cond_f_res_71851 = min_res_71831 == r_idx_71826;
                bool x_71852 = !cond_71850;
                bool y_71853 = cond_f_res_71851 && x_71852;
                bool cond_71854 = cond_71850 || y_71853;
                int64_t loopres_f_res_71855;
                
                if (cond_71854) {
                    loopres_f_res_71855 = max_res_71829;
                } else {
                    loopres_f_res_71855 = l_idx_71825;
                }
                
                int64_t loopres_f_res_71856;
                
                if (cond_71854) {
                    loopres_f_res_71856 = r_idx_71826;
                } else {
                    loopres_f_res_71856 = min_res_71831;
                }
                
                int64_t loopres_f_res_71857;
                
                if (cond_71854) {
                    int64_t loopres_f_res_t_res_71858 = add64((int64_t) 1,
                                                              span_71827);
                    
                    loopres_f_res_71857 = loopres_f_res_t_res_71858;
                } else {
                    int64_t loopres_f_res_f_res_71859 = add64((int64_t) 1,
                                                              span_71827);
                    
                    loopres_f_res_71857 = loopres_f_res_f_res_71859;
                }
                loopres_71847 = loopres_f_res_71855;
                loopres_71848 = loopres_f_res_71856;
                loopres_71849 = loopres_f_res_71857;
            }
            
            bool loop_cond_71860 = slt64(loopres_71849, min_res_62384);
            bool loop_while_tmp_71894 = loop_cond_71860;
            int64_t l_idx_tmp_71895 = loopres_71847;
            int64_t r_idx_tmp_71896 = loopres_71848;
            int64_t span_tmp_71897 = loopres_71849;
            
            loop_while_71824 = loop_while_tmp_71894;
            l_idx_71825 = l_idx_tmp_71895;
            r_idx_71826 = r_idx_tmp_71896;
            span_71827 = span_tmp_71897;
        }
        idx_71457 = loop_while_71824;
        idx_71458 = l_idx_71825;
        idx_71459 = r_idx_71826;
        idx_71460 = span_71827;
        
        int64_t min_res_71498 = smin64(min_arg_65535, idx_71458);
        int64_t x_71499 = add64(min_res_62384, min_res_71498);
        int64_t r_71500 = sub64(x_71499, (int64_t) 1);
        bool x_71501 = sle64((int64_t) 0, r_71500);
        bool y_71502 = slt64(r_71500, n_62364);
        bool bounds_check_71503 = x_71501 && y_71502;
        bool index_certs_71504;
        
        if (!bounds_check_71503) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71500,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_71505 = ((int64_t *) mem_67915.mem)[r_71500];
        int64_t abs_arg_71506 = sub64(x_71505, min_res_71434);
        int64_t abs_res_71507 = abs64(abs_arg_71506);
        bool x_71508 = sle64((int64_t) 0, min_res_71498);
        bool y_71509 = slt64(min_res_71498, n_62364);
        bool bounds_check_71510 = x_71508 && y_71509;
        bool index_certs_71511;
        
        if (!bounds_check_71510) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71498,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_71512 = ((int64_t *) mem_67915.mem)[min_res_71498];
        int64_t abs_arg_71513 = sub64(x_71512, min_res_71434);
        int64_t abs_res_71514 = abs64(abs_arg_71513);
        int64_t max_res_71515 = smax64(abs_res_71507, abs_res_71514);
        float defunc_0_f_res_71516 = sitofp_i64_f32(max_res_71515);
        float defunc_1_f_res_71517 = max_res_65539 + defunc_0_f_res_71516;
        float defunc_0_f_res_71518 = sitofp_i64_f32(min_res_71434);
        float defunc_2_reduce_res_71520;
        int64_t flat_tid_65388 = (int64_t) 0;
        int32_t num_tasks_71898;
        struct futhark_mc_task_74114 futhark_mc_task_74114;
        
        futhark_mc_task_74114.ctx = ctx;
        futhark_mc_task_74114.free_last_res_65522 = last_res_65522;
        futhark_mc_task_74114.free_mem_67918 = mem_67918.mem;
        futhark_mc_task_74114.free_mem_67924 = mem_67924.mem;
        futhark_mc_task_74114.free_min_res_71498 = min_res_71498;
        futhark_mc_task_74114.free_defunc_1_f_res_71517 = defunc_1_f_res_71517;
        futhark_mc_task_74114.free_defunc_0_f_res_71518 = defunc_0_f_res_71518;
        futhark_mc_task_74114.retval_defunc_2_reduce_res_71520 =
            &defunc_2_reduce_res_71520;
        futhark_mc_task_74114.retval_mem_71519 = mem_71519;
        
        struct scheduler_segop futhark_mc_task_74114_task;
        
        futhark_mc_task_74114_task.args = &futhark_mc_task_74114;
        futhark_mc_task_74114_task.top_level_fn = futhark_mc_segred_task_74115;
        futhark_mc_task_74114_task.name = "futhark_mc_segred_task_74115";
        futhark_mc_task_74114_task.iterations = q_62366;
        futhark_mc_task_74114_task.task_time =
            &ctx->futhark_mc_segred_task_74115_total_time;
        futhark_mc_task_74114_task.task_iter =
            &ctx->futhark_mc_segred_task_74115_total_iter;
        futhark_mc_task_74114_task.sched = STATIC;
        futhark_mc_task_74114_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74115_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74114_task);
        
        if (futhark_mc_segred_task_74115_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_71540 = 1.0F / defunc_2_reduce_res_71520;
        float defunc_2_reduce_res_71541;
        int64_t flat_tid_65390 = (int64_t) 0;
        int32_t num_tasks_71907;
        struct futhark_mc_task_74119 futhark_mc_task_74119;
        
        futhark_mc_task_74119.ctx = ctx;
        futhark_mc_task_74119.free_last_res_65522 = last_res_65522;
        futhark_mc_task_74119.free_mem_67912 = mem_67912.mem;
        futhark_mc_task_74119.free_min_res_71498 = min_res_71498;
        futhark_mc_task_74119.free_mem_71519 = mem_71519;
        futhark_mc_task_74119.free_a0_71540 = a0_71540;
        futhark_mc_task_74119.retval_defunc_2_reduce_res_71541 =
            &defunc_2_reduce_res_71541;
        
        struct scheduler_segop futhark_mc_task_74119_task;
        
        futhark_mc_task_74119_task.args = &futhark_mc_task_74119;
        futhark_mc_task_74119_task.top_level_fn = futhark_mc_segred_task_74120;
        futhark_mc_task_74119_task.name = "futhark_mc_segred_task_74120";
        futhark_mc_task_74119_task.iterations = q_62366;
        futhark_mc_task_74119_task.task_time =
            &ctx->futhark_mc_segred_task_74120_total_time;
        futhark_mc_task_74119_task.task_iter =
            &ctx->futhark_mc_segred_task_74120_total_iter;
        futhark_mc_task_74119_task.sched = STATIC;
        futhark_mc_task_74119_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74120_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74119_task);
        
        if (futhark_mc_segred_task_74120_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67945.mem)[gtid_65387] = defunc_2_reduce_res_71541;
    }
    
  cleanup:
    { }
    free(mem_71519);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74112_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74112_end -
                 futhark_mc_segmap_parloop_74112_start;
        
        ctx->futhark_mc_segmap_parloop_74112_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74112_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74112_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74110(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65386 = tid;
    int num_tasks_71706 = info.nsubtasks;
    struct futhark_mc_task_74105 *futhark_mc_task_74105 =
                                 (struct futhark_mc_task_74105 *) args;
    struct futhark_context *ctx = futhark_mc_task_74105->ctx;
    uint64_t futhark_mc_segmap_nested_task_74110_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74110_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74105->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74105->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74105->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74105->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74105->free_i_62378;
    bool x_62379 = futhark_mc_task_74105->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74105->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74105->free_loop_cond_62389;
    int64_t last_res_65522 = futhark_mc_task_74105->free_last_res_65522;
    int64_t min_arg_65534 = futhark_mc_task_74105->free_min_arg_65534;
    int64_t min_arg_65535 = futhark_mc_task_74105->free_min_arg_65535;
    float max_res_65539 = futhark_mc_task_74105->free_max_res_65539;
    struct memblock mem_67912 = {.desc ="mem_67912", .mem =
                                 futhark_mc_task_74105->free_mem_67912, .size =
                                 0, .references =NULL};
    struct memblock mem_67915 = {.desc ="mem_67915", .mem =
                                 futhark_mc_task_74105->free_mem_67915, .size =
                                 0, .references =NULL};
    struct memblock mem_67918 = {.desc ="mem_67918", .mem =
                                 futhark_mc_task_74105->free_mem_67918, .size =
                                 0, .references =NULL};
    struct memblock mem_67921 = {.desc ="mem_67921", .mem =
                                 futhark_mc_task_74105->free_mem_67921, .size =
                                 0, .references =NULL};
    int64_t bytes_67922 = futhark_mc_task_74105->free_bytes_67922;
    struct memblock mem_67924 = {.desc ="mem_67924", .mem =
                                 futhark_mc_task_74105->free_mem_67924, .size =
                                 0, .references =NULL};
    struct memblock mem_67945 = {.desc ="mem_67945", .mem =
                                 futhark_mc_task_74105->free_mem_67945, .size =
                                 0, .references =NULL};
    int64_t iter_71805;
    struct futhark_mc_segmap_parloop_struct_74111
    futhark_mc_segmap_parloop_struct_74111;
    
    futhark_mc_segmap_parloop_struct_74111.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74111.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74111.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74111.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74111.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74111.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74111.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74111.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74111.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74111.free_last_res_65522 = last_res_65522;
    futhark_mc_segmap_parloop_struct_74111.free_min_arg_65534 = min_arg_65534;
    futhark_mc_segmap_parloop_struct_74111.free_min_arg_65535 = min_arg_65535;
    futhark_mc_segmap_parloop_struct_74111.free_max_res_65539 = max_res_65539;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67912 = mem_67912.mem;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67915 = mem_67915.mem;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67918 = mem_67918.mem;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67921 = mem_67921.mem;
    futhark_mc_segmap_parloop_struct_74111.free_bytes_67922 = bytes_67922;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67924 = mem_67924.mem;
    futhark_mc_segmap_parloop_struct_74111.free_mem_67945 = mem_67945.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74112_task;
    
    futhark_mc_segmap_parloop_74112_task.name =
        "futhark_mc_segmap_parloop_74112";
    futhark_mc_segmap_parloop_74112_task.fn = futhark_mc_segmap_parloop_74112;
    futhark_mc_segmap_parloop_74112_task.args =
        &futhark_mc_segmap_parloop_struct_74111;
    futhark_mc_segmap_parloop_74112_task.iterations = iterations;
    futhark_mc_segmap_parloop_74112_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74112_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74112_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74112_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74112_task);
    
    if (futhark_mc_segmap_parloop_74112_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74112_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74112_total_end -
                 futhark_mc_segmap_parloop_74112_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74112_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74112_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74112_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74110_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74110_end -
                 futhark_mc_segmap_nested_task_74110_start;
        
        ctx->futhark_mc_segmap_nested_task_74110_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74110_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74110_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74078(void *args, int64_t start,
                                           int64_t end, int flat_tid_65374,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74077
    *futhark_mc_segmap_parloop_struct_74077 =
    (struct futhark_mc_segmap_parloop_struct_74077 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74077->ctx;
    uint64_t futhark_mc_segmap_parloop_74078_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74078_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74077->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74077->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74077->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74077->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74077->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74077->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74077->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74077->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74077->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74077->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74077->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67907 =
            futhark_mc_segmap_parloop_struct_74077->free_bytes_67907;
    int64_t bytes_67910 =
            futhark_mc_segmap_parloop_struct_74077->free_bytes_67910;
    int64_t bytes_67922 =
            futhark_mc_segmap_parloop_struct_74077->free_bytes_67922;
    int64_t bytes_67943 =
            futhark_mc_segmap_parloop_struct_74077->free_bytes_67943;
    struct memblock mem_68069 = {.desc ="mem_68069", .mem =
                                 futhark_mc_segmap_parloop_struct_74077->free_mem_68069,
                                 .size =0, .references =NULL};
    size_t mem_67909_cached_sizze_74079 = 0;
    char *mem_67909 = NULL;
    size_t mem_67912_cached_sizze_74080 = 0;
    char *mem_67912 = NULL;
    size_t mem_67915_cached_sizze_74081 = 0;
    char *mem_67915 = NULL;
    size_t mem_67918_cached_sizze_74082 = 0;
    char *mem_67918 = NULL;
    size_t mem_67921_cached_sizze_74083 = 0;
    char *mem_67921 = NULL;
    size_t mem_67924_cached_sizze_74084 = 0;
    char *mem_67924 = NULL;
    size_t mem_67945_cached_sizze_74085 = 0;
    char *mem_67945 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71414 = start;
    
    if (mem_67909_cached_sizze_74079 < (size_t) bytes_67907) {
        mem_67909 = realloc(mem_67909, bytes_67907);
        mem_67909_cached_sizze_74079 = bytes_67907;
    }
    if (mem_67912_cached_sizze_74080 < (size_t) bytes_67910) {
        mem_67912 = realloc(mem_67912, bytes_67910);
        mem_67912_cached_sizze_74080 = bytes_67910;
    }
    if (mem_67915_cached_sizze_74081 < (size_t) bytes_67907) {
        mem_67915 = realloc(mem_67915, bytes_67907);
        mem_67915_cached_sizze_74081 = bytes_67907;
    }
    if (mem_67918_cached_sizze_74082 < (size_t) bytes_67910) {
        mem_67918 = realloc(mem_67918, bytes_67910);
        mem_67918_cached_sizze_74082 = bytes_67910;
    }
    if (mem_67921_cached_sizze_74083 < (size_t) bytes_67907) {
        mem_67921 = realloc(mem_67921, bytes_67907);
        mem_67921_cached_sizze_74083 = bytes_67907;
    }
    if (mem_67924_cached_sizze_74084 < (size_t) bytes_67922) {
        mem_67924 = realloc(mem_67924, bytes_67922);
        mem_67924_cached_sizze_74084 = bytes_67922;
    }
    if (mem_67945_cached_sizze_74085 < (size_t) bytes_67943) {
        mem_67945 = realloc(mem_67945, bytes_67943);
        mem_67945_cached_sizze_74085 = bytes_67943;
    }
    for (; iter_71414 < end; iter_71414++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71674 = m_62363;
        int64_t gtid_65375 = iter_71414;
        int64_t remnant_71675 = iter_71414 - gtid_65375;
        int64_t flat_tid_65376 = (int64_t) 0;
        int32_t num_tasks_71676;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74086 futhark_mc_task_74086;
        
        futhark_mc_task_74086.ctx = ctx;
        futhark_mc_task_74086.free_n_62364 = n_62364;
        futhark_mc_task_74086.free_gtid_65375 = gtid_65375;
        futhark_mc_task_74086.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74086.free_mem_67909 = mem_67909;
        
        struct scheduler_segop futhark_mc_task_74086_task;
        
        futhark_mc_task_74086_task.args = &futhark_mc_task_74086;
        futhark_mc_task_74086_task.top_level_fn = futhark_mc_segscan_task_74087;
        futhark_mc_task_74086_task.name = "futhark_mc_segscan_task_74087";
        futhark_mc_task_74086_task.iterations = n_62364;
        futhark_mc_task_74086_task.task_time =
            &ctx->futhark_mc_segscan_task_74087_total_time;
        futhark_mc_task_74086_task.task_iter =
            &ctx->futhark_mc_segscan_task_74087_total_iter;
        futhark_mc_task_74086_task.sched = STATIC;
        futhark_mc_task_74086_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74087_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74086_task);
        
        if (futhark_mc_segscan_task_74087_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65522 = ((int64_t *) mem_67909)[i_62378];
        
        for (int64_t i_71690 = 0; i_71690 < n_62364; i_71690++) {
            ((float *) mem_67912)[i_71690] = 0.0F;
        }
        for (int64_t i_71691 = 0; i_71691 < n_62364; i_71691++) {
            ((int64_t *) mem_67915)[i_71691] = (int64_t) -1;
        }
        
        int64_t flat_tid_65378 = (int64_t) 0;
        int32_t num_tasks_71692;
        struct futhark_mc_task_74093 futhark_mc_task_74093;
        
        futhark_mc_task_74093.ctx = ctx;
        futhark_mc_task_74093.free_n_62364 = n_62364;
        futhark_mc_task_74093.free_gtid_65375 = gtid_65375;
        futhark_mc_task_74093.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74093.free_mem_67909 = mem_67909;
        futhark_mc_task_74093.free_mem_67912 = mem_67912;
        futhark_mc_task_74093.free_mem_67915 = mem_67915;
        
        struct scheduler_segop futhark_mc_task_74093_task;
        
        futhark_mc_task_74093_task.args = &futhark_mc_task_74093;
        futhark_mc_task_74093_task.top_level_fn = futhark_mc_segmap_task_74094;
        futhark_mc_task_74093_task.name = "futhark_mc_segmap_task_74094";
        futhark_mc_task_74093_task.iterations = n_62364;
        futhark_mc_task_74093_task.task_time =
            &ctx->futhark_mc_segmap_task_74094_total_time;
        futhark_mc_task_74093_task.task_iter =
            &ctx->futhark_mc_segmap_task_74094_total_iter;
        futhark_mc_task_74093_task.sched = STATIC;
        futhark_mc_task_74093_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74094_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74093_task);
        
        if (futhark_mc_segmap_task_74094_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65534 = sub64(last_res_65522, (int64_t) 1);
        int64_t min_arg_65535 = sub64(last_res_65522, min_res_62384);
        float i64_res_65536 = sitofp_i64_f32(last_res_65522);
        float x_65537 = i64_res_62390 - i64_res_65536;
        float max_arg_65538 = x_65537 / 2.0F;
        float max_res_65539 = fmax32(0.0F, max_arg_65538);
        int64_t flat_tid_65380 = (int64_t) 0;
        int32_t num_tasks_71698;
        struct futhark_mc_task_74097 futhark_mc_task_74097;
        
        futhark_mc_task_74097.ctx = ctx;
        futhark_mc_task_74097.free_n_62364 = n_62364;
        futhark_mc_task_74097.free_mem_67915 = mem_67915;
        futhark_mc_task_74097.free_mem_67918 = mem_67918;
        futhark_mc_task_74097.free_mem_67921 = mem_67921;
        
        struct scheduler_segop futhark_mc_task_74097_task;
        
        futhark_mc_task_74097_task.args = &futhark_mc_task_74097;
        futhark_mc_task_74097_task.top_level_fn = futhark_mc_segmap_task_74098;
        futhark_mc_task_74097_task.name = "futhark_mc_segmap_task_74098";
        futhark_mc_task_74097_task.iterations = n_62364;
        futhark_mc_task_74097_task.task_time =
            &ctx->futhark_mc_segmap_task_74098_total_time;
        futhark_mc_task_74097_task.task_iter =
            &ctx->futhark_mc_segmap_task_74098_total_iter;
        futhark_mc_task_74097_task.sched = STATIC;
        futhark_mc_task_74097_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74098_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74097_task);
        
        if (futhark_mc_segmap_task_74098_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65382 = (int64_t) 0;
        int32_t num_tasks_71702;
        struct futhark_mc_task_74101 futhark_mc_task_74101;
        
        futhark_mc_task_74101.ctx = ctx;
        futhark_mc_task_74101.free_q_62366 = q_62366;
        futhark_mc_task_74101.free_last_res_65522 = last_res_65522;
        futhark_mc_task_74101.free_mem_67924 = mem_67924;
        
        struct scheduler_segop futhark_mc_task_74101_task;
        
        futhark_mc_task_74101_task.args = &futhark_mc_task_74101;
        futhark_mc_task_74101_task.top_level_fn = futhark_mc_segmap_task_74102;
        futhark_mc_task_74101_task.name = "futhark_mc_segmap_task_74102";
        futhark_mc_task_74101_task.iterations = q_62366;
        futhark_mc_task_74101_task.task_time =
            &ctx->futhark_mc_segmap_task_74102_total_time;
        futhark_mc_task_74101_task.task_iter =
            &ctx->futhark_mc_segmap_task_74102_total_iter;
        futhark_mc_task_74101_task.sched = STATIC;
        futhark_mc_task_74101_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74102_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74101_task);
        
        if (futhark_mc_segmap_task_74102_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65384 = (int64_t) 0;
        int32_t num_tasks_71706;
        int64_t flat_tid_65386 = (int64_t) 0;
        struct futhark_mc_task_74105 futhark_mc_task_74105;
        
        futhark_mc_task_74105.ctx = ctx;
        futhark_mc_task_74105.free_n_62364 = n_62364;
        futhark_mc_task_74105.free_q_62366 = q_62366;
        futhark_mc_task_74105.free_jump_62368 = jump_62368;
        futhark_mc_task_74105.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74105.free_i_62378 = i_62378;
        futhark_mc_task_74105.free_x_62379 = x_62379;
        futhark_mc_task_74105.free_min_res_62384 = min_res_62384;
        futhark_mc_task_74105.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_74105.free_last_res_65522 = last_res_65522;
        futhark_mc_task_74105.free_min_arg_65534 = min_arg_65534;
        futhark_mc_task_74105.free_min_arg_65535 = min_arg_65535;
        futhark_mc_task_74105.free_max_res_65539 = max_res_65539;
        futhark_mc_task_74105.free_mem_67912 = mem_67912;
        futhark_mc_task_74105.free_mem_67915 = mem_67915;
        futhark_mc_task_74105.free_mem_67918 = mem_67918;
        futhark_mc_task_74105.free_mem_67921 = mem_67921;
        futhark_mc_task_74105.free_bytes_67922 = bytes_67922;
        futhark_mc_task_74105.free_mem_67924 = mem_67924;
        futhark_mc_task_74105.free_mem_67945 = mem_67945;
        
        struct scheduler_segop futhark_mc_task_74105_task;
        
        futhark_mc_task_74105_task.args = &futhark_mc_task_74105;
        futhark_mc_task_74105_task.top_level_fn = futhark_mc_segmap_task_74106;
        futhark_mc_task_74105_task.name = "futhark_mc_segmap_task_74106";
        futhark_mc_task_74105_task.iterations = n_m_62372;
        futhark_mc_task_74105_task.task_time =
            &ctx->futhark_mc_segmap_task_74106_total_time;
        futhark_mc_task_74105_task.task_iter =
            &ctx->futhark_mc_segmap_task_74106_total_iter;
        futhark_mc_task_74105_task.sched = DYNAMIC;
        futhark_mc_task_74105_task.nested_fn =
            futhark_mc_segmap_nested_task_74110;
        
        int futhark_mc_segmap_task_74106_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74105_task);
        
        if (futhark_mc_segmap_task_74106_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68069.mem + gtid_65375 * n_m_62372 * (int64_t) 4,
                mem_67945 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67909);
    free(mem_67912);
    free(mem_67915);
    free(mem_67918);
    free(mem_67921);
    free(mem_67924);
    free(mem_67945);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74078_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74078_end -
                 futhark_mc_segmap_parloop_74078_start;
        
        ctx->futhark_mc_segmap_parloop_74078_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74078_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74078_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74076(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65374 = tid;
    int num_tasks_71232 = info.nsubtasks;
    struct futhark_mc_task_74064 *futhark_mc_task_74064 =
                                 (struct futhark_mc_task_74064 *) args;
    struct futhark_context *ctx = futhark_mc_task_74064->ctx;
    uint64_t futhark_mc_segmap_nested_task_74076_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74076_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74064->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74064->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74064->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74064->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74064->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74064->free_i_62378;
    bool x_62379 = futhark_mc_task_74064->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74064->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74064->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74064->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74064->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_67907 = futhark_mc_task_74064->free_bytes_67907;
    int64_t bytes_67910 = futhark_mc_task_74064->free_bytes_67910;
    int64_t bytes_67922 = futhark_mc_task_74064->free_bytes_67922;
    int64_t bytes_67943 = futhark_mc_task_74064->free_bytes_67943;
    struct memblock mem_68069 = {.desc ="mem_68069", .mem =
                                 futhark_mc_task_74064->free_mem_68069, .size =
                                 0, .references =NULL};
    int64_t iter_71414;
    struct futhark_mc_segmap_parloop_struct_74077
    futhark_mc_segmap_parloop_struct_74077;
    
    futhark_mc_segmap_parloop_struct_74077.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74077.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74077.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74077.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74077.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74077.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74077.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74077.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74077.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74077.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74077.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74077.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74077.free_bytes_67907 = bytes_67907;
    futhark_mc_segmap_parloop_struct_74077.free_bytes_67910 = bytes_67910;
    futhark_mc_segmap_parloop_struct_74077.free_bytes_67922 = bytes_67922;
    futhark_mc_segmap_parloop_struct_74077.free_bytes_67943 = bytes_67943;
    futhark_mc_segmap_parloop_struct_74077.free_mem_68069 = mem_68069.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74078_task;
    
    futhark_mc_segmap_parloop_74078_task.name =
        "futhark_mc_segmap_parloop_74078";
    futhark_mc_segmap_parloop_74078_task.fn = futhark_mc_segmap_parloop_74078;
    futhark_mc_segmap_parloop_74078_task.args =
        &futhark_mc_segmap_parloop_struct_74077;
    futhark_mc_segmap_parloop_74078_task.iterations = iterations;
    futhark_mc_segmap_parloop_74078_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74078_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74078_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74078_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74078_task);
    
    if (futhark_mc_segmap_parloop_74078_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74078_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74078_total_end -
                 futhark_mc_segmap_parloop_74078_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74078_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74078_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74078_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74076_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74076_end -
                 futhark_mc_segmap_nested_task_74076_start;
        
        ctx->futhark_mc_segmap_nested_task_74076_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74076_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74076_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74124 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68070;
    int64_t free_bytes_68073;
    int64_t free_bytes_68085;
    int64_t free_bytes_68124;
    char *free_mem_68283;
    char *free_mem_68287;
};
struct futhark_mc_segmap_parloop_struct_74126 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68070;
    int64_t free_bytes_68073;
    int64_t free_bytes_68085;
    int64_t free_bytes_68124;
    char *free_mem_68283;
    char *free_mem_68287;
};
static int futhark_mc_segmap_parloop_74127(void *args, int64_t start,
                                           int64_t end, int flat_tid_65792,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74126
    *futhark_mc_segmap_parloop_struct_74126 =
    (struct futhark_mc_segmap_parloop_struct_74126 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74126->ctx;
    uint64_t futhark_mc_segmap_parloop_74127_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74127_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74126->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74126->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74126->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74126->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74126->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74126->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74126->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74126->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74126->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74126->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74126->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68070 =
            futhark_mc_segmap_parloop_struct_74126->free_bytes_68070;
    int64_t bytes_68073 =
            futhark_mc_segmap_parloop_struct_74126->free_bytes_68073;
    int64_t bytes_68085 =
            futhark_mc_segmap_parloop_struct_74126->free_bytes_68085;
    int64_t bytes_68124 =
            futhark_mc_segmap_parloop_struct_74126->free_bytes_68124;
    struct memblock mem_68283 = {.desc ="mem_68283", .mem =
                                 futhark_mc_segmap_parloop_struct_74126->free_mem_68283,
                                 .size =0, .references =NULL};
    struct memblock mem_68287 = {.desc ="mem_68287", .mem =
                                 futhark_mc_segmap_parloop_struct_74126->free_mem_68287,
                                 .size =0, .references =NULL};
    size_t mem_68132_cached_sizze_74128 = 0;
    char *mem_68132 = NULL;
    size_t mem_68147_cached_sizze_74129 = 0;
    char *mem_68147 = NULL;
    size_t mem_68150_cached_sizze_74130 = 0;
    char *mem_68150 = NULL;
    size_t mem_68177_cached_sizze_74131 = 0;
    char *mem_68177 = NULL;
    size_t mem_68180_cached_sizze_74132 = 0;
    char *mem_68180 = NULL;
    size_t mem_68207_cached_sizze_74133 = 0;
    char *mem_68207 = NULL;
    size_t mem_68222_cached_sizze_74134 = 0;
    char *mem_68222 = NULL;
    size_t mem_68225_cached_sizze_74135 = 0;
    char *mem_68225 = NULL;
    size_t mem_68242_cached_sizze_74136 = 0;
    char *mem_68242 = NULL;
    size_t mem_68245_cached_sizze_74137 = 0;
    char *mem_68245 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71917 = start;
    
    if (mem_68132_cached_sizze_74128 < (size_t) bytes_68070) {
        mem_68132 = realloc(mem_68132, bytes_68070);
        mem_68132_cached_sizze_74128 = bytes_68070;
    }
    if (mem_68147_cached_sizze_74129 < (size_t) bytes_68073) {
        mem_68147 = realloc(mem_68147, bytes_68073);
        mem_68147_cached_sizze_74129 = bytes_68073;
    }
    if (mem_68150_cached_sizze_74130 < (size_t) bytes_68070) {
        mem_68150 = realloc(mem_68150, bytes_68070);
        mem_68150_cached_sizze_74130 = bytes_68070;
    }
    if (mem_68177_cached_sizze_74131 < (size_t) bytes_68073) {
        mem_68177 = realloc(mem_68177, bytes_68073);
        mem_68177_cached_sizze_74131 = bytes_68073;
    }
    if (mem_68180_cached_sizze_74132 < (size_t) bytes_68070) {
        mem_68180 = realloc(mem_68180, bytes_68070);
        mem_68180_cached_sizze_74132 = bytes_68070;
    }
    if (mem_68207_cached_sizze_74133 < (size_t) bytes_68085) {
        mem_68207 = realloc(mem_68207, bytes_68085);
        mem_68207_cached_sizze_74133 = bytes_68085;
    }
    if (mem_68222_cached_sizze_74134 < (size_t) bytes_68124) {
        mem_68222 = realloc(mem_68222, bytes_68124);
        mem_68222_cached_sizze_74134 = bytes_68124;
    }
    if (mem_68225_cached_sizze_74135 < (size_t) bytes_68124) {
        mem_68225 = realloc(mem_68225, bytes_68124);
        mem_68225_cached_sizze_74135 = bytes_68124;
    }
    if (mem_68242_cached_sizze_74136 < (size_t) bytes_68085) {
        mem_68242 = realloc(mem_68242, bytes_68085);
        mem_68242_cached_sizze_74136 = bytes_68085;
    }
    if (mem_68245_cached_sizze_74137 < (size_t) bytes_68085) {
        mem_68245 = realloc(mem_68245, bytes_68085);
        mem_68245_cached_sizze_74137 = bytes_68085;
    }
    for (; iter_71917 < end; iter_71917++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72107 = m_62363;
        int64_t gtid_65793 = iter_71917;
        int64_t remnant_72108 = iter_71917 - gtid_65793;
        int64_t discard_67242;
        int64_t scanacc_71919 = (int64_t) 0;
        
        for (int64_t i_71918 = 0; i_71918 < n_62364; i_71918++) {
            float x_71921 = ((float *) Y_mem_67460.mem)[gtid_65793 * n_62364 +
                                                        i_71918];
            bool isnan_res_71922;
            
            isnan_res_71922 = futrts_isnan32(x_71921);
            
            bool defunc_0_p_res_71923 = !isnan_res_71922;
            int64_t defunc_0_f_res_71924 = btoi_bool_i64(defunc_0_p_res_71923);
            int64_t defunc_1_op_res_71925 = add64(defunc_0_f_res_71924,
                                                  scanacc_71919);
            
            ((int64_t *) mem_68132)[i_71918] = defunc_1_op_res_71925;
            
            int64_t scanacc_tmp_72109 = defunc_1_op_res_71925;
            
            scanacc_71919 = scanacc_tmp_72109;
        }
        discard_67242 = scanacc_71919;
        
        int64_t last_res_63220 = ((int64_t *) mem_68132)[i_62378];
        
        for (int64_t i_72111 = 0; i_72111 < n_62364; i_72111++) {
            ((float *) mem_68147)[i_72111] = 0.0F;
        }
        for (int64_t i_72112 = 0; i_72112 < n_62364; i_72112++) {
            ((int64_t *) mem_68150)[i_72112] = (int64_t) -1;
        }
        for (int64_t write_iter_71927 = 0; write_iter_71927 < n_62364;
             write_iter_71927++) {
            float write_iv_71930 = ((float *) Y_mem_67460.mem)[gtid_65793 *
                                                               n_62364 +
                                                               write_iter_71927];
            bool isnan_res_71931;
            
            isnan_res_71931 = futrts_isnan32(write_iv_71930);
            
            bool defunc_0_p_res_71932 = !isnan_res_71931;
            int64_t defunc_1_f_res_71933;
            
            if (defunc_0_p_res_71932) {
                int64_t write_iv_71934 =
                        ((int64_t *) mem_68132)[write_iter_71927];
                int64_t defunc_1_f_res_t_res_71935 = sub64(write_iv_71934,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71933 = defunc_1_f_res_t_res_71935;
            } else {
                defunc_1_f_res_71933 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71933) &&
                slt64(defunc_1_f_res_71933, n_62364)) {
                ((int64_t *) mem_68150)[defunc_1_f_res_71933] =
                    write_iter_71927;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71933) &&
                slt64(defunc_1_f_res_71933, n_62364)) {
                memmove(mem_68147 + defunc_1_f_res_71933 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_65793 * n_62364 +
                                           write_iter_71927) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_63235 = sub64(last_res_63220, (int64_t) 1);
        int64_t min_arg_63236 = sub64(last_res_63220, min_res_62384);
        float i64_res_63237 = sitofp_i64_f32(last_res_63220);
        float x_63238 = i64_res_62390 - i64_res_63237;
        float max_arg_63239 = x_63238 / 2.0F;
        float max_res_63240 = fmax32(0.0F, max_arg_63239);
        
        for (int64_t i_71939 = 0; i_71939 < n_62364; i_71939++) {
            int64_t x_71942 = ((int64_t *) mem_68150)[i_71939];
            int64_t defunc_0_f_res_71943 = add64((int64_t) 1, x_71942);
            float defunc_0_f_res_71944 = sitofp_i64_f32(x_71942);
            
            ((float *) mem_68177)[i_71939] = defunc_0_f_res_71944;
            ((int64_t *) mem_68180)[i_71939] = defunc_0_f_res_71943;
        }
        for (int64_t i_71947 = 0; i_71947 < q_62366; i_71947++) {
            bool cond_71949 = sle64(last_res_63220, i_71947);
            float defunc_0_f_res_71950;
            
            if (cond_71949) {
                defunc_0_f_res_71950 = 0.0F;
            } else {
                defunc_0_f_res_71950 = 1.0F;
            }
            ((float *) mem_68207)[i_71947] = defunc_0_f_res_71950;
        }
        for (int64_t i_71952 = 0; i_71952 < n_m_62372; i_71952++) {
            int64_t min_arg_71955 = mul64(jump_62368, i_71952);
            int64_t min_res_71956 = smin64(i_62378, min_arg_71955);
            int64_t defunc_0_g_res_71957 = add64((int64_t) 1, min_res_71956);
            bool init_idx_71958;
            int64_t init_idx_71959;
            int64_t init_idx_71960;
            bool loop_while_71961;
            int64_t low_71962;
            int64_t high_71963;
            
            loop_while_71961 = x_62379;
            low_71962 = (int64_t) 0;
            high_71963 = i_62378;
            while (loop_while_71961) {
                int64_t x_71964 = add64(low_71962, high_71963);
                int64_t mid_71965 = sdiv64(x_71964, (int64_t) 2);
                bool x_71966 = sle64((int64_t) 0, mid_71965);
                bool y_71967 = slt64(mid_71965, n_62364);
                bool bounds_check_71968 = x_71966 && y_71967;
                bool index_certs_71969;
                
                if (!bounds_check_71968) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71965,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_71970 = ((int64_t *) mem_68180)[mid_71965];
                bool cond_71971 = slt64(mid_id_71970, (int64_t) 0);
                int64_t mid_idx_71972;
                
                if (cond_71971) {
                    mid_idx_71972 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_71972 = mid_id_71970;
                }
                
                bool cond_71973 = sle64(defunc_0_g_res_71957, mid_idx_71972);
                int64_t loopres_71974;
                int64_t loopres_71975;
                
                if (cond_71973) {
                    int64_t loopres_t_res_71976 = sub64(mid_71965, (int64_t) 1);
                    
                    loopres_71974 = low_71962;
                    loopres_71975 = loopres_t_res_71976;
                } else {
                    int64_t loopres_f_res_71977 = add64((int64_t) 1, mid_71965);
                    
                    loopres_71974 = loopres_f_res_71977;
                    loopres_71975 = high_71963;
                }
                
                bool loop_cond_71978 = sle64(loopres_71974, loopres_71975);
                bool loop_while_tmp_72120 = loop_cond_71978;
                int64_t low_tmp_72121 = loopres_71974;
                int64_t high_tmp_72122 = loopres_71975;
                
                loop_while_71961 = loop_while_tmp_72120;
                low_71962 = low_tmp_72121;
                high_71963 = high_tmp_72122;
            }
            init_idx_71958 = loop_while_71961;
            init_idx_71959 = low_71962;
            init_idx_71960 = high_71963;
            
            bool idx_71979;
            int64_t idx_71980;
            int64_t idx_71981;
            int64_t idx_71982;
            bool loop_while_71983;
            int64_t l_idx_71984;
            int64_t r_idx_71985;
            int64_t span_71986;
            
            loop_while_71983 = loop_cond_62389;
            l_idx_71984 = init_idx_71959;
            r_idx_71985 = init_idx_71959;
            span_71986 = (int64_t) 1;
            while (loop_while_71983) {
                int64_t max_arg_71987 = sub64(l_idx_71984, (int64_t) 1);
                int64_t max_res_71988 = smax64((int64_t) 0, max_arg_71987);
                int64_t min_arg_71989 = add64((int64_t) 1, r_idx_71985);
                int64_t min_res_71990 = smin64(min_arg_63235, min_arg_71989);
                bool x_71991 = sle64((int64_t) 0, max_res_71988);
                bool y_71992 = slt64(max_res_71988, n_62364);
                bool bounds_check_71993 = x_71991 && y_71992;
                bool index_certs_71994;
                
                if (!bounds_check_71993) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_71988,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_71995 = ((int64_t *) mem_68180)[max_res_71988];
                int64_t abs_arg_71996 = sub64(x_71995, defunc_0_g_res_71957);
                int64_t abs_res_71997 = abs64(abs_arg_71996);
                bool x_71998 = sle64((int64_t) 0, min_res_71990);
                bool y_71999 = slt64(min_res_71990, n_62364);
                bool bounds_check_72000 = x_71998 && y_71999;
                bool index_certs_72001;
                
                if (!bounds_check_72000) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71990,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_72002 = ((int64_t *) mem_68180)[min_res_71990];
                int64_t abs_arg_72003 = sub64(x_72002, defunc_0_g_res_71957);
                int64_t abs_res_72004 = abs64(abs_arg_72003);
                bool cond_72005 = max_res_71988 == l_idx_71984;
                int64_t loopres_72006;
                int64_t loopres_72007;
                int64_t loopres_72008;
                
                if (cond_72005) {
                    loopres_72006 = l_idx_71984;
                    loopres_72007 = r_idx_71985;
                    loopres_72008 = min_res_62384;
                } else {
                    bool cond_72009 = slt64(abs_res_71997, abs_res_72004);
                    bool cond_f_res_72010 = min_res_71990 == r_idx_71985;
                    bool x_72011 = !cond_72009;
                    bool y_72012 = cond_f_res_72010 && x_72011;
                    bool cond_72013 = cond_72009 || y_72012;
                    int64_t loopres_f_res_72014;
                    
                    if (cond_72013) {
                        loopres_f_res_72014 = max_res_71988;
                    } else {
                        loopres_f_res_72014 = l_idx_71984;
                    }
                    
                    int64_t loopres_f_res_72015;
                    
                    if (cond_72013) {
                        loopres_f_res_72015 = r_idx_71985;
                    } else {
                        loopres_f_res_72015 = min_res_71990;
                    }
                    
                    int64_t loopres_f_res_72016;
                    
                    if (cond_72013) {
                        int64_t loopres_f_res_t_res_72017 = add64((int64_t) 1,
                                                                  span_71986);
                        
                        loopres_f_res_72016 = loopres_f_res_t_res_72017;
                    } else {
                        int64_t loopres_f_res_f_res_72018 = add64((int64_t) 1,
                                                                  span_71986);
                        
                        loopres_f_res_72016 = loopres_f_res_f_res_72018;
                    }
                    loopres_72006 = loopres_f_res_72014;
                    loopres_72007 = loopres_f_res_72015;
                    loopres_72008 = loopres_f_res_72016;
                }
                
                bool loop_cond_72019 = slt64(loopres_72008, min_res_62384);
                bool loop_while_tmp_72123 = loop_cond_72019;
                int64_t l_idx_tmp_72124 = loopres_72006;
                int64_t r_idx_tmp_72125 = loopres_72007;
                int64_t span_tmp_72126 = loopres_72008;
                
                loop_while_71983 = loop_while_tmp_72123;
                l_idx_71984 = l_idx_tmp_72124;
                r_idx_71985 = r_idx_tmp_72125;
                span_71986 = span_tmp_72126;
            }
            idx_71979 = loop_while_71983;
            idx_71980 = l_idx_71984;
            idx_71981 = r_idx_71985;
            idx_71982 = span_71986;
            
            int64_t min_res_72020 = smin64(min_arg_63236, idx_71980);
            int64_t x_72021 = add64(min_res_62384, min_res_72020);
            int64_t r_72022 = sub64(x_72021, (int64_t) 1);
            bool x_72023 = sle64((int64_t) 0, r_72022);
            bool y_72024 = slt64(r_72022, n_62364);
            bool bounds_check_72025 = x_72023 && y_72024;
            bool index_certs_72026;
            
            if (!bounds_check_72025) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_72022,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72027 = ((int64_t *) mem_68150)[r_72022];
            int64_t abs_arg_72028 = sub64(x_72027, min_res_71956);
            int64_t abs_res_72029 = abs64(abs_arg_72028);
            bool x_72030 = sle64((int64_t) 0, min_res_72020);
            bool y_72031 = slt64(min_res_72020, n_62364);
            bool bounds_check_72032 = x_72030 && y_72031;
            bool index_certs_72033;
            
            if (!bounds_check_72032) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72020,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72034 = ((int64_t *) mem_68150)[min_res_72020];
            int64_t abs_arg_72035 = sub64(x_72034, min_res_71956);
            int64_t abs_res_72036 = abs64(abs_arg_72035);
            int64_t max_res_72037 = smax64(abs_res_72029, abs_res_72036);
            float defunc_0_f_res_72038 = sitofp_i64_f32(max_res_72037);
            float defunc_1_f_res_72039 = max_res_63240 + defunc_0_f_res_72038;
            float defunc_0_f_res_72040 = sitofp_i64_f32(min_res_71956);
            float defunc_2_reduce_res_72043;
            float defunc_2_reduce_res_72044;
            float defunc_2_reduce_res_72045;
            float redout_72049;
            float redout_72050;
            float redout_72051;
            
            redout_72049 = 0.0F;
            redout_72050 = 0.0F;
            redout_72051 = 0.0F;
            for (int64_t i_72048 = 0; i_72048 < q_62366; i_72048++) {
                float x_72054 = ((float *) mem_68207)[i_72048];
                bool cond_72055 = sle64(last_res_63220, i_72048);
                float defunc_0_f_res_72056;
                
                if (cond_72055) {
                    defunc_0_f_res_72056 = 0.0F;
                } else {
                    int64_t i_72057 = add64(min_res_72020, i_72048);
                    float x_72058 = ((float *) mem_68177)[i_72057];
                    float defunc_0_f_res_f_res_72059 = 1.0F + x_72058;
                    
                    defunc_0_f_res_72056 = defunc_0_f_res_f_res_72059;
                }
                
                float x_j_72060 = defunc_0_f_res_72056 - defunc_0_f_res_72040;
                float abs_res_72061 = (float) fabs(x_j_72060);
                float tmp1_72062 = abs_res_72061 / defunc_1_f_res_72039;
                float x_72063 = tmp1_72062 * tmp1_72062;
                float y_72064 = tmp1_72062 * x_72063;
                float tmp2_72065 = 1.0F - y_72064;
                float x_72066 = tmp2_72065 * tmp2_72065;
                float tmp3_72067 = tmp2_72065 * x_72066;
                float tmp4_72068 = x_72054 * tmp3_72067;
                float defunc_1_f_res_72069 = x_j_72060 * tmp4_72068;
                float defunc_1_f_res_72070 = x_j_72060 * defunc_1_f_res_72069;
                float defunc_1_op_res_72071 = tmp4_72068 + redout_72049;
                float defunc_1_op_res_72072 = defunc_1_f_res_72069 +
                      redout_72050;
                float defunc_1_op_res_72073 = defunc_1_f_res_72070 +
                      redout_72051;
                
                ((float *) mem_68242)[i_72048] = defunc_1_f_res_72069;
                ((float *) mem_68245)[i_72048] = tmp4_72068;
                
                float redout_tmp_72127 = defunc_1_op_res_72071;
                float redout_tmp_72128 = defunc_1_op_res_72072;
                float redout_tmp_72129 = defunc_1_op_res_72073;
                
                redout_72049 = redout_tmp_72127;
                redout_72050 = redout_tmp_72128;
                redout_72051 = redout_tmp_72129;
            }
            defunc_2_reduce_res_72043 = redout_72049;
            defunc_2_reduce_res_72044 = redout_72050;
            defunc_2_reduce_res_72045 = redout_72051;
            
            float x_72076 = defunc_2_reduce_res_72043 *
                  defunc_2_reduce_res_72045;
            float y_72077 = defunc_2_reduce_res_72044 *
                  defunc_2_reduce_res_72044;
            float y_72078 = x_72076 - y_72077;
            float det1_72079 = 1.0F / y_72078;
            float a11_72080 = defunc_2_reduce_res_72045 * det1_72079;
            float negate_arg_72081 = defunc_2_reduce_res_72044 * det1_72079;
            float b11_72082 = 0.0F - negate_arg_72081;
            float c11_72083 = defunc_2_reduce_res_72043 * det1_72079;
            float defunc_2_reduce_res_72084;
            float defunc_2_reduce_res_72085;
            float redout_72087;
            float redout_72088;
            
            redout_72087 = 0.0F;
            redout_72088 = 0.0F;
            for (int64_t i_72086 = 0; i_72086 < q_62366; i_72086++) {
                float x_72089 = ((float *) mem_68245)[i_72086];
                float x_72090 = ((float *) mem_68242)[i_72086];
                bool cond_72091 = sle64(last_res_63220, i_72086);
                float defunc_0_f_res_72092;
                
                if (cond_72091) {
                    defunc_0_f_res_72092 = 0.0F;
                } else {
                    int64_t i_72093 = add64(min_res_72020, i_72086);
                    float x_72094 = ((float *) mem_68147)[i_72093];
                    
                    defunc_0_f_res_72092 = x_72094;
                }
                
                float x_72095 = a11_72080 * x_72089;
                float y_72096 = b11_72082 * x_72090;
                float x_72097 = x_72095 + y_72096;
                float defunc_9_fit_fun_res_72098 = defunc_0_f_res_72092 *
                      x_72097;
                float x_72099 = b11_72082 * x_72089;
                float y_72100 = c11_72083 * x_72090;
                float x_72101 = x_72099 + y_72100;
                float defunc_9_slope_fun_res_72102 = defunc_0_f_res_72092 *
                      x_72101;
                float defunc_1_op_res_72103 = defunc_9_fit_fun_res_72098 +
                      redout_72087;
                float defunc_1_op_res_72104 = defunc_9_slope_fun_res_72102 +
                      redout_72088;
                float redout_tmp_72132 = defunc_1_op_res_72103;
                float redout_tmp_72133 = defunc_1_op_res_72104;
                
                redout_72087 = redout_tmp_72132;
                redout_72088 = redout_tmp_72133;
            }
            defunc_2_reduce_res_72084 = redout_72087;
            defunc_2_reduce_res_72085 = redout_72088;
            ((float *) mem_68222)[i_71952] = defunc_2_reduce_res_72084;
            ((float *) mem_68225)[i_71952] = defunc_2_reduce_res_72085;
        }
        memmove(mem_68283.mem + gtid_65793 * n_m_62372 * (int64_t) 4,
                mem_68222 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_68287.mem + gtid_65793 * n_m_62372 * (int64_t) 4,
                mem_68225 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68132);
    free(mem_68147);
    free(mem_68150);
    free(mem_68177);
    free(mem_68180);
    free(mem_68207);
    free(mem_68222);
    free(mem_68225);
    free(mem_68242);
    free(mem_68245);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74127_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74127_end -
                 futhark_mc_segmap_parloop_74127_start;
        
        ctx->futhark_mc_segmap_parloop_74127_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74127_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74127_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74125(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65792 = tid;
    int num_tasks_71916 = info.nsubtasks;
    struct futhark_mc_task_74124 *futhark_mc_task_74124 =
                                 (struct futhark_mc_task_74124 *) args;
    struct futhark_context *ctx = futhark_mc_task_74124->ctx;
    uint64_t futhark_mc_segmap_task_74125_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74125_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74124->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74124->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74124->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74124->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74124->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74124->free_i_62378;
    bool x_62379 = futhark_mc_task_74124->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74124->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74124->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74124->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74124->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68070 = futhark_mc_task_74124->free_bytes_68070;
    int64_t bytes_68073 = futhark_mc_task_74124->free_bytes_68073;
    int64_t bytes_68085 = futhark_mc_task_74124->free_bytes_68085;
    int64_t bytes_68124 = futhark_mc_task_74124->free_bytes_68124;
    struct memblock mem_68283 = {.desc ="mem_68283", .mem =
                                 futhark_mc_task_74124->free_mem_68283, .size =
                                 0, .references =NULL};
    struct memblock mem_68287 = {.desc ="mem_68287", .mem =
                                 futhark_mc_task_74124->free_mem_68287, .size =
                                 0, .references =NULL};
    int64_t iter_71917;
    struct futhark_mc_segmap_parloop_struct_74126
    futhark_mc_segmap_parloop_struct_74126;
    
    futhark_mc_segmap_parloop_struct_74126.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74126.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74126.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74126.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74126.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74126.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74126.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74126.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74126.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74126.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74126.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74126.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74126.free_bytes_68070 = bytes_68070;
    futhark_mc_segmap_parloop_struct_74126.free_bytes_68073 = bytes_68073;
    futhark_mc_segmap_parloop_struct_74126.free_bytes_68085 = bytes_68085;
    futhark_mc_segmap_parloop_struct_74126.free_bytes_68124 = bytes_68124;
    futhark_mc_segmap_parloop_struct_74126.free_mem_68283 = mem_68283.mem;
    futhark_mc_segmap_parloop_struct_74126.free_mem_68287 = mem_68287.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74127_task;
    
    futhark_mc_segmap_parloop_74127_task.name =
        "futhark_mc_segmap_parloop_74127";
    futhark_mc_segmap_parloop_74127_task.fn = futhark_mc_segmap_parloop_74127;
    futhark_mc_segmap_parloop_74127_task.args =
        &futhark_mc_segmap_parloop_struct_74126;
    futhark_mc_segmap_parloop_74127_task.iterations = iterations;
    futhark_mc_segmap_parloop_74127_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74127_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74127_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74127_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74127_task);
    
    if (futhark_mc_segmap_parloop_74127_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74127_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74127_total_end -
                 futhark_mc_segmap_parloop_74127_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74127_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74127_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74127_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74125_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74125_end -
                 futhark_mc_segmap_task_74125_start;
        
        ctx->futhark_mc_segmap_task_74125_runs[tid]++;
        ctx->futhark_mc_segmap_task_74125_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74125_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74139 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68070;
    int64_t free_bytes_68073;
    int64_t free_bytes_68085;
    int64_t free_bytes_68124;
    char *free_mem_68283;
    char *free_mem_68287;
};
struct futhark_mc_task_74149 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65795;
    char *free_Y_mem_67460;
    char *free_mem_68072;
};
struct futhark_mc_scan_stage_1_parloop_struct_74152 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65795;
    char *free_Y_mem_67460;
    char *free_mem_68072;
};
static int futhark_mc_scan_stage_1_parloop_74153(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65796, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74152
    *futhark_mc_scan_stage_1_parloop_struct_74152 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74152 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74152->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74153_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74153_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_74152->free_n_62364;
    int64_t gtid_65795 =
            futhark_mc_scan_stage_1_parloop_struct_74152->free_gtid_65795;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74152->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68072 = {.desc ="mem_68072", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74152->free_mem_68072,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72457 = start;
    int64_t x_72135;
    int64_t x_72136;
    
    x_72135 = (int64_t) 0;
    for (; iter_72457 < end; iter_72457++) {
        int64_t gtid_65797 = iter_72457;
        
        // stage 1 scan body
        {
            float x_72138 = ((float *) Y_mem_67460.mem)[gtid_65795 * n_62364 +
                                                        gtid_65797];
            bool isnan_res_72139;
            
            isnan_res_72139 = futrts_isnan32(x_72138);
            
            bool defunc_0_p_res_72140 = !isnan_res_72139;
            int64_t defunc_0_f_res_72141 = btoi_bool_i64(defunc_0_p_res_72140);
            
            // write mapped values results to memory
            { }
            x_72135 = x_72135;
            // Read next values
            {
                x_72136 = defunc_0_f_res_72141;
            }
            
            int64_t defunc_1_op_res_72137 = add64(x_72135, x_72136);
            
            ((int64_t *) mem_68072.mem)[gtid_65797] = defunc_1_op_res_72137;
            x_72135 = defunc_1_op_res_72137;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74153_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74153_end -
                 futhark_mc_scan_stage_1_parloop_74153_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74153_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74153_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74153_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74154 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65795;
    char *free_Y_mem_67460;
    char *free_mem_68072;
};
static int futhark_mc_scan_stage_3_parloop_74155(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65796, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74154
    *futhark_mc_scan_stage_3_parloop_struct_74154 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74154 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74154->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74155_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74155_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_74154->free_n_62364;
    int64_t gtid_65795 =
            futhark_mc_scan_stage_3_parloop_struct_74154->free_gtid_65795;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74154->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68072 = {.desc ="mem_68072", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74154->free_mem_68072,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72469 = start;
    int64_t x_72466;
    int64_t x_72467;
    
    if (iter_72469 == (int64_t) 0) {
        x_72466 = (int64_t) 0;
    } else {
        x_72466 = ((int64_t *) mem_68072.mem)[iter_72469 - (int64_t) 1];
    }
    for (; iter_72469 < end; iter_72469++) {
        int64_t gtid_65797 = iter_72469;
        
        // stage 3 scan body
        {
            float x_72138 = ((float *) Y_mem_67460.mem)[gtid_65795 * n_62364 +
                                                        gtid_65797];
            bool isnan_res_72139;
            
            isnan_res_72139 = futrts_isnan32(x_72138);
            
            bool defunc_0_p_res_72140 = !isnan_res_72139;
            int64_t defunc_0_f_res_72141 = btoi_bool_i64(defunc_0_p_res_72140);
            
            x_72466 = x_72466;
            x_72467 = defunc_0_f_res_72141;
            
            int64_t defunc_1_op_res_72468 = add64(x_72466, x_72467);
            
            ((int64_t *) mem_68072.mem)[gtid_65797] = defunc_1_op_res_72468;
            x_72466 = defunc_1_op_res_72468;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74155_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74155_end -
                 futhark_mc_scan_stage_3_parloop_74155_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74155_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74155_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74155_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74150(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65796 = tid;
    int num_tasks_72456 = info.nsubtasks;
    struct futhark_mc_task_74149 *futhark_mc_task_74149 =
                                 (struct futhark_mc_task_74149 *) args;
    struct futhark_context *ctx = futhark_mc_task_74149->ctx;
    uint64_t futhark_mc_segscan_task_74150_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74150_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74149->free_n_62364;
    int64_t gtid_65795 = futhark_mc_task_74149->free_gtid_65795;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74149->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68072 = {.desc ="mem_68072", .mem =
                                 futhark_mc_task_74149->free_mem_68072, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_72463_cached_sizze_74151 = 0;
    char *scan_stage_2_accum_mem_72463 = NULL;
    int64_t iter_72457;
    struct futhark_mc_scan_stage_1_parloop_struct_74152
    futhark_mc_scan_stage_1_parloop_struct_74152;
    
    futhark_mc_scan_stage_1_parloop_struct_74152.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74152.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_74152.free_gtid_65795 = gtid_65795;
    futhark_mc_scan_stage_1_parloop_struct_74152.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_74152.free_mem_68072 = mem_68072.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74153_task;
    
    futhark_mc_scan_stage_1_parloop_74153_task.name =
        "futhark_mc_scan_stage_1_parloop_74153";
    futhark_mc_scan_stage_1_parloop_74153_task.fn =
        futhark_mc_scan_stage_1_parloop_74153;
    futhark_mc_scan_stage_1_parloop_74153_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74152;
    futhark_mc_scan_stage_1_parloop_74153_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74153_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74153_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74153_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74153_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74153_task);
    
    if (futhark_mc_scan_stage_1_parloop_74153_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74153_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74153_total_end -
                 futhark_mc_scan_stage_1_parloop_74153_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74153_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74153_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74153_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_72456)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_72458;
        int64_t x_72459;
        int64_t offset_72461 = (int64_t) 0;
        int64_t offset_index_72462 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_72463_cached_sizze_74151 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_72463 = realloc(scan_stage_2_accum_mem_72463,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_72463_cached_sizze_74151 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_72463)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_72465 = 0; i_72465 < num_tasks_72456 - 1; i_72465++) {
            offset_72461 = squot64(n_62364, sext_i32_i64(num_tasks_72456));
            if (slt64(sext_i32_i64(i_72465), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_72456)))) {
                offset_72461 += (int64_t) 1;
            }
            offset_index_72462 += offset_72461;
            
            int64_t gtid_65797 = offset_index_72462;
            float x_72138 = ((float *) Y_mem_67460.mem)[gtid_65795 * n_62364 +
                                                        gtid_65797];
            bool isnan_res_72139;
            
            isnan_res_72139 = futrts_isnan32(x_72138);
            
            bool defunc_0_p_res_72140 = !isnan_res_72139;
            int64_t defunc_0_f_res_72141 = btoi_bool_i64(defunc_0_p_res_72140);
            
            // Read carry in
            {
                x_72458 =
                    ((int64_t *) scan_stage_2_accum_mem_72463)[(int64_t) 0];
            }
            // Read next values
            {
                x_72459 = ((int64_t *) mem_68072.mem)[offset_index_72462 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_72460 = add64(x_72458, x_72459);
            
            ((int64_t *) mem_68072.mem)[offset_index_72462 - (int64_t) 1] =
                defunc_1_op_res_72460;
            ((int64_t *) scan_stage_2_accum_mem_72463)[(int64_t) 0] =
                defunc_1_op_res_72460;
        }
        
        int64_t iter_72469 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74154
        futhark_mc_scan_stage_3_parloop_struct_74154;
        
        futhark_mc_scan_stage_3_parloop_struct_74154.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74154.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_74154.free_gtid_65795 =
            gtid_65795;
        futhark_mc_scan_stage_3_parloop_struct_74154.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_74154.free_mem_68072 =
            mem_68072.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74155_task;
        
        futhark_mc_scan_stage_3_parloop_74155_task.name =
            "futhark_mc_scan_stage_3_parloop_74155";
        futhark_mc_scan_stage_3_parloop_74155_task.fn =
            futhark_mc_scan_stage_3_parloop_74155;
        futhark_mc_scan_stage_3_parloop_74155_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74154;
        futhark_mc_scan_stage_3_parloop_74155_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74155_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74155_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74155_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74155_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74155_task);
        
        if (futhark_mc_scan_stage_3_parloop_74155_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74155_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74155_total_end -
                     futhark_mc_scan_stage_3_parloop_74155_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74155_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74155_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74155_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_72463);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74150_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74150_end -
                 futhark_mc_segscan_task_74150_start;
        
        ctx->futhark_mc_segscan_task_74150_runs[tid]++;
        ctx->futhark_mc_segscan_task_74150_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74150_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74156 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65795;
    char *free_Y_mem_67460;
    char *free_mem_68072;
    char *free_mem_68075;
    char *free_mem_68078;
};
struct futhark_mc_segmap_parloop_struct_74158 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_65795;
    char *free_Y_mem_67460;
    char *free_mem_68072;
    char *free_mem_68075;
    char *free_mem_68078;
};
static int futhark_mc_segmap_parloop_74159(void *args, int64_t start,
                                           int64_t end, int flat_tid_65798,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74158
    *futhark_mc_segmap_parloop_struct_74158 =
    (struct futhark_mc_segmap_parloop_struct_74158 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74158->ctx;
    uint64_t futhark_mc_segmap_parloop_74159_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74159_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74158->free_n_62364;
    int64_t gtid_65795 =
            futhark_mc_segmap_parloop_struct_74158->free_gtid_65795;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74158->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68072 = {.desc ="mem_68072", .mem =
                                 futhark_mc_segmap_parloop_struct_74158->free_mem_68072,
                                 .size =0, .references =NULL};
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_segmap_parloop_struct_74158->free_mem_68075,
                                 .size =0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_segmap_parloop_struct_74158->free_mem_68078,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72473 = start;
    
    for (; iter_72473 < end; iter_72473++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72476 = n_62364;
        int64_t gtid_65799 = iter_72473;
        int64_t remnant_72477 = iter_72473 - gtid_65799;
        float x_72142 = ((float *) Y_mem_67460.mem)[gtid_65795 * n_62364 +
                                                    gtid_65799];
        bool isnan_res_72143;
        
        isnan_res_72143 = futrts_isnan32(x_72142);
        
        bool defunc_0_p_res_72144 = !isnan_res_72143;
        int64_t defunc_1_f_res_72145;
        
        if (defunc_0_p_res_72144) {
            int64_t x_72474 = ((int64_t *) mem_68072.mem)[gtid_65799];
            int64_t defunc_1_f_res_t_res_72475 = sub64(x_72474, (int64_t) 1);
            
            defunc_1_f_res_72145 = defunc_1_f_res_t_res_72475;
        } else {
            defunc_1_f_res_72145 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72145) &&
            slt64(defunc_1_f_res_72145, n_62364)) {
            ((int64_t *) mem_68078.mem)[defunc_1_f_res_72145] = gtid_65799;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72145) &&
            slt64(defunc_1_f_res_72145, n_62364)) {
            ((float *) mem_68075.mem)[defunc_1_f_res_72145] = x_72142;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74159_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74159_end -
                 futhark_mc_segmap_parloop_74159_start;
        
        ctx->futhark_mc_segmap_parloop_74159_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74159_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74159_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74157(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65798 = tid;
    int num_tasks_72472 = info.nsubtasks;
    struct futhark_mc_task_74156 *futhark_mc_task_74156 =
                                 (struct futhark_mc_task_74156 *) args;
    struct futhark_context *ctx = futhark_mc_task_74156->ctx;
    uint64_t futhark_mc_segmap_task_74157_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74157_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74156->free_n_62364;
    int64_t gtid_65795 = futhark_mc_task_74156->free_gtid_65795;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74156->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68072 = {.desc ="mem_68072", .mem =
                                 futhark_mc_task_74156->free_mem_68072, .size =
                                 0, .references =NULL};
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_task_74156->free_mem_68075, .size =
                                 0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_task_74156->free_mem_68078, .size =
                                 0, .references =NULL};
    int64_t iter_72473;
    struct futhark_mc_segmap_parloop_struct_74158
    futhark_mc_segmap_parloop_struct_74158;
    
    futhark_mc_segmap_parloop_struct_74158.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74158.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74158.free_gtid_65795 = gtid_65795;
    futhark_mc_segmap_parloop_struct_74158.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74158.free_mem_68072 = mem_68072.mem;
    futhark_mc_segmap_parloop_struct_74158.free_mem_68075 = mem_68075.mem;
    futhark_mc_segmap_parloop_struct_74158.free_mem_68078 = mem_68078.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74159_task;
    
    futhark_mc_segmap_parloop_74159_task.name =
        "futhark_mc_segmap_parloop_74159";
    futhark_mc_segmap_parloop_74159_task.fn = futhark_mc_segmap_parloop_74159;
    futhark_mc_segmap_parloop_74159_task.args =
        &futhark_mc_segmap_parloop_struct_74158;
    futhark_mc_segmap_parloop_74159_task.iterations = iterations;
    futhark_mc_segmap_parloop_74159_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74159_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74159_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74159_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74159_task);
    
    if (futhark_mc_segmap_parloop_74159_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74159_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74159_total_end -
                 futhark_mc_segmap_parloop_74159_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74159_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74159_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74159_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74157_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74157_end -
                 futhark_mc_segmap_task_74157_start;
        
        ctx->futhark_mc_segmap_task_74157_runs[tid]++;
        ctx->futhark_mc_segmap_task_74157_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74157_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74160 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_68078;
    char *free_mem_68081;
    char *free_mem_68084;
};
struct futhark_mc_segmap_parloop_struct_74162 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_68078;
    char *free_mem_68081;
    char *free_mem_68084;
};
static int futhark_mc_segmap_parloop_74163(void *args, int64_t start,
                                           int64_t end, int flat_tid_65800,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74162
    *futhark_mc_segmap_parloop_struct_74162 =
    (struct futhark_mc_segmap_parloop_struct_74162 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74162->ctx;
    uint64_t futhark_mc_segmap_parloop_74163_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74163_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74162->free_n_62364;
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_segmap_parloop_struct_74162->free_mem_68078,
                                 .size =0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_segmap_parloop_struct_74162->free_mem_68081,
                                 .size =0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_segmap_parloop_struct_74162->free_mem_68084,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72479 = start;
    
    for (; iter_72479 < end; iter_72479++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72480 = n_62364;
        int64_t gtid_65801 = iter_72479;
        int64_t remnant_72481 = iter_72479 - gtid_65801;
        int64_t x_72148 = ((int64_t *) mem_68078.mem)[gtid_65801];
        int64_t defunc_0_f_res_72149 = add64((int64_t) 1, x_72148);
        float defunc_0_f_res_72150 = sitofp_i64_f32(x_72148);
        
        ((float *) mem_68081.mem)[gtid_65801] = defunc_0_f_res_72150;
        ((int64_t *) mem_68084.mem)[gtid_65801] = defunc_0_f_res_72149;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74163_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74163_end -
                 futhark_mc_segmap_parloop_74163_start;
        
        ctx->futhark_mc_segmap_parloop_74163_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74163_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74163_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74161(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65800 = tid;
    int num_tasks_72478 = info.nsubtasks;
    struct futhark_mc_task_74160 *futhark_mc_task_74160 =
                                 (struct futhark_mc_task_74160 *) args;
    struct futhark_context *ctx = futhark_mc_task_74160->ctx;
    uint64_t futhark_mc_segmap_task_74161_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74161_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74160->free_n_62364;
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_task_74160->free_mem_68078, .size =
                                 0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_task_74160->free_mem_68081, .size =
                                 0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_task_74160->free_mem_68084, .size =
                                 0, .references =NULL};
    int64_t iter_72479;
    struct futhark_mc_segmap_parloop_struct_74162
    futhark_mc_segmap_parloop_struct_74162;
    
    futhark_mc_segmap_parloop_struct_74162.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74162.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74162.free_mem_68078 = mem_68078.mem;
    futhark_mc_segmap_parloop_struct_74162.free_mem_68081 = mem_68081.mem;
    futhark_mc_segmap_parloop_struct_74162.free_mem_68084 = mem_68084.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74163_task;
    
    futhark_mc_segmap_parloop_74163_task.name =
        "futhark_mc_segmap_parloop_74163";
    futhark_mc_segmap_parloop_74163_task.fn = futhark_mc_segmap_parloop_74163;
    futhark_mc_segmap_parloop_74163_task.args =
        &futhark_mc_segmap_parloop_struct_74162;
    futhark_mc_segmap_parloop_74163_task.iterations = iterations;
    futhark_mc_segmap_parloop_74163_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74163_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74163_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74163_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74163_task);
    
    if (futhark_mc_segmap_parloop_74163_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74163_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74163_total_end -
                 futhark_mc_segmap_parloop_74163_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74163_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74163_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74163_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74161_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74161_end -
                 futhark_mc_segmap_task_74161_start;
        
        ctx->futhark_mc_segmap_task_74161_runs[tid]++;
        ctx->futhark_mc_segmap_task_74161_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74161_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74164 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_65971;
    char *free_mem_68087;
};
struct futhark_mc_segmap_parloop_struct_74166 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_65971;
    char *free_mem_68087;
};
static int futhark_mc_segmap_parloop_74167(void *args, int64_t start,
                                           int64_t end, int flat_tid_65802,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74166
    *futhark_mc_segmap_parloop_struct_74166 =
    (struct futhark_mc_segmap_parloop_struct_74166 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74166->ctx;
    uint64_t futhark_mc_segmap_parloop_74167_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74167_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74166->free_q_62366;
    int64_t last_res_65971 =
            futhark_mc_segmap_parloop_struct_74166->free_last_res_65971;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_segmap_parloop_struct_74166->free_mem_68087,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72483 = start;
    
    for (; iter_72483 < end; iter_72483++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72484 = q_62366;
        int64_t gtid_65803 = iter_72483;
        int64_t remnant_72485 = iter_72483 - gtid_65803;
        bool cond_72151 = sle64(last_res_65971, gtid_65803);
        float defunc_0_f_res_72152;
        
        if (cond_72151) {
            defunc_0_f_res_72152 = 0.0F;
        } else {
            defunc_0_f_res_72152 = 1.0F;
        }
        ((float *) mem_68087.mem)[gtid_65803] = defunc_0_f_res_72152;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74167_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74167_end -
                 futhark_mc_segmap_parloop_74167_start;
        
        ctx->futhark_mc_segmap_parloop_74167_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74167_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74167_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74165(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65802 = tid;
    int num_tasks_72482 = info.nsubtasks;
    struct futhark_mc_task_74164 *futhark_mc_task_74164 =
                                 (struct futhark_mc_task_74164 *) args;
    struct futhark_context *ctx = futhark_mc_task_74164->ctx;
    uint64_t futhark_mc_segmap_task_74165_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74165_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_74164->free_q_62366;
    int64_t last_res_65971 = futhark_mc_task_74164->free_last_res_65971;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_task_74164->free_mem_68087, .size =
                                 0, .references =NULL};
    int64_t iter_72483;
    struct futhark_mc_segmap_parloop_struct_74166
    futhark_mc_segmap_parloop_struct_74166;
    
    futhark_mc_segmap_parloop_struct_74166.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74166.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74166.free_last_res_65971 = last_res_65971;
    futhark_mc_segmap_parloop_struct_74166.free_mem_68087 = mem_68087.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74167_task;
    
    futhark_mc_segmap_parloop_74167_task.name =
        "futhark_mc_segmap_parloop_74167";
    futhark_mc_segmap_parloop_74167_task.fn = futhark_mc_segmap_parloop_74167;
    futhark_mc_segmap_parloop_74167_task.args =
        &futhark_mc_segmap_parloop_struct_74166;
    futhark_mc_segmap_parloop_74167_task.iterations = iterations;
    futhark_mc_segmap_parloop_74167_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74167_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74167_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74167_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74167_task);
    
    if (futhark_mc_segmap_parloop_74167_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74167_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74167_total_end -
                 futhark_mc_segmap_parloop_74167_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74167_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74167_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74167_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74165_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74165_end -
                 futhark_mc_segmap_task_74165_start;
        
        ctx->futhark_mc_segmap_task_74165_runs[tid]++;
        ctx->futhark_mc_segmap_task_74165_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74165_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74168 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65971;
    int64_t free_min_arg_65983;
    int64_t free_min_arg_65984;
    float free_max_res_65988;
    char *free_mem_68075;
    char *free_mem_68078;
    char *free_mem_68081;
    char *free_mem_68084;
    int64_t free_bytes_68085;
    char *free_mem_68087;
    char *free_mem_68126;
    char *free_mem_68129;
};
struct futhark_mc_segmap_parloop_struct_74170 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65971;
    int64_t free_min_arg_65983;
    int64_t free_min_arg_65984;
    float free_max_res_65988;
    char *free_mem_68075;
    char *free_mem_68078;
    char *free_mem_68081;
    char *free_mem_68084;
    int64_t free_bytes_68085;
    char *free_mem_68087;
    char *free_mem_68126;
    char *free_mem_68129;
};
static int futhark_mc_segmap_parloop_74171(void *args, int64_t start,
                                           int64_t end, int flat_tid_65804,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74170
    *futhark_mc_segmap_parloop_struct_74170 =
    (struct futhark_mc_segmap_parloop_struct_74170 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74170->ctx;
    uint64_t futhark_mc_segmap_parloop_74171_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74171_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74170->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74170->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74170->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74170->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74170->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74170->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74170->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74170->free_loop_cond_62389;
    int64_t last_res_65971 =
            futhark_mc_segmap_parloop_struct_74170->free_last_res_65971;
    int64_t min_arg_65983 =
            futhark_mc_segmap_parloop_struct_74170->free_min_arg_65983;
    int64_t min_arg_65984 =
            futhark_mc_segmap_parloop_struct_74170->free_min_arg_65984;
    float max_res_65988 =
          futhark_mc_segmap_parloop_struct_74170->free_max_res_65988;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68075,
                                 .size =0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68078,
                                 .size =0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68081,
                                 .size =0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68084,
                                 .size =0, .references =NULL};
    int64_t bytes_68085 =
            futhark_mc_segmap_parloop_struct_74170->free_bytes_68085;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68087,
                                 .size =0, .references =NULL};
    struct memblock mem_68126 = {.desc ="mem_68126", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68126,
                                 .size =0, .references =NULL};
    struct memblock mem_68129 = {.desc ="mem_68129", .mem =
                                 futhark_mc_segmap_parloop_struct_74170->free_mem_68129,
                                 .size =0, .references =NULL};
    size_t mem_72388_cached_sizze_74172 = 0;
    char *mem_72388 = NULL;
    size_t mem_72390_cached_sizze_74173 = 0;
    char *mem_72390 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72487 = start;
    
    if (mem_72388_cached_sizze_74172 < (size_t) bytes_68085) {
        mem_72388 = realloc(mem_72388, bytes_68085);
        mem_72388_cached_sizze_74172 = bytes_68085;
    }
    if (mem_72390_cached_sizze_74173 < (size_t) bytes_68085) {
        mem_72390 = realloc(mem_72390, bytes_68085);
        mem_72390_cached_sizze_74173 = bytes_68085;
    }
    for (; iter_72487 < end; iter_72487++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72590 = n_m_62372;
        int64_t gtid_65805 = iter_72487;
        int64_t remnant_72591 = iter_72487 - gtid_65805;
        int64_t min_arg_72302 = mul64(jump_62368, gtid_65805);
        int64_t min_res_72303 = smin64(i_62378, min_arg_72302);
        int64_t defunc_0_g_res_72304 = add64((int64_t) 1, min_res_72303);
        bool init_idx_72305;
        int64_t init_idx_72306;
        int64_t init_idx_72307;
        bool loop_while_72488;
        int64_t low_72489;
        int64_t high_72490;
        
        loop_while_72488 = x_62379;
        low_72489 = (int64_t) 0;
        high_72490 = i_62378;
        while (loop_while_72488) {
            int64_t x_72491 = add64(low_72489, high_72490);
            int64_t mid_72492 = sdiv64(x_72491, (int64_t) 2);
            bool x_72493 = sle64((int64_t) 0, mid_72492);
            bool y_72494 = slt64(mid_72492, n_62364);
            bool bounds_check_72495 = x_72493 && y_72494;
            bool index_certs_72496;
            
            if (!bounds_check_72495) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72492,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_72497 = ((int64_t *) mem_68084.mem)[mid_72492];
            bool cond_72498 = slt64(mid_id_72497, (int64_t) 0);
            int64_t mid_idx_72499;
            
            if (cond_72498) {
                mid_idx_72499 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_72499 = mid_id_72497;
            }
            
            bool cond_72500 = sle64(defunc_0_g_res_72304, mid_idx_72499);
            int64_t loopres_72501;
            int64_t loopres_72502;
            
            if (cond_72500) {
                int64_t loopres_t_res_72503 = sub64(mid_72492, (int64_t) 1);
                
                loopres_72501 = low_72489;
                loopres_72502 = loopres_t_res_72503;
            } else {
                int64_t loopres_f_res_72504 = add64((int64_t) 1, mid_72492);
                
                loopres_72501 = loopres_f_res_72504;
                loopres_72502 = high_72490;
            }
            
            bool loop_cond_72505 = sle64(loopres_72501, loopres_72502);
            bool loop_while_tmp_72592 = loop_cond_72505;
            int64_t low_tmp_72593 = loopres_72501;
            int64_t high_tmp_72594 = loopres_72502;
            
            loop_while_72488 = loop_while_tmp_72592;
            low_72489 = low_tmp_72593;
            high_72490 = high_tmp_72594;
        }
        init_idx_72305 = loop_while_72488;
        init_idx_72306 = low_72489;
        init_idx_72307 = high_72490;
        
        bool idx_72326;
        int64_t idx_72327;
        int64_t idx_72328;
        int64_t idx_72329;
        bool loop_while_72506;
        int64_t l_idx_72507;
        int64_t r_idx_72508;
        int64_t span_72509;
        
        loop_while_72506 = loop_cond_62389;
        l_idx_72507 = init_idx_72306;
        r_idx_72508 = init_idx_72306;
        span_72509 = (int64_t) 1;
        while (loop_while_72506) {
            int64_t max_arg_72510 = sub64(l_idx_72507, (int64_t) 1);
            int64_t max_res_72511 = smax64((int64_t) 0, max_arg_72510);
            int64_t min_arg_72512 = add64((int64_t) 1, r_idx_72508);
            int64_t min_res_72513 = smin64(min_arg_65983, min_arg_72512);
            bool x_72514 = sle64((int64_t) 0, max_res_72511);
            bool y_72515 = slt64(max_res_72511, n_62364);
            bool bounds_check_72516 = x_72514 && y_72515;
            bool index_certs_72517;
            
            if (!bounds_check_72516) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72511,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72518 = ((int64_t *) mem_68084.mem)[max_res_72511];
            int64_t abs_arg_72519 = sub64(x_72518, defunc_0_g_res_72304);
            int64_t abs_res_72520 = abs64(abs_arg_72519);
            bool x_72521 = sle64((int64_t) 0, min_res_72513);
            bool y_72522 = slt64(min_res_72513, n_62364);
            bool bounds_check_72523 = x_72521 && y_72522;
            bool index_certs_72524;
            
            if (!bounds_check_72523) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72513,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72525 = ((int64_t *) mem_68084.mem)[min_res_72513];
            int64_t abs_arg_72526 = sub64(x_72525, defunc_0_g_res_72304);
            int64_t abs_res_72527 = abs64(abs_arg_72526);
            bool cond_72528 = max_res_72511 == l_idx_72507;
            int64_t loopres_72529;
            int64_t loopres_72530;
            int64_t loopres_72531;
            
            if (cond_72528) {
                loopres_72529 = l_idx_72507;
                loopres_72530 = r_idx_72508;
                loopres_72531 = min_res_62384;
            } else {
                bool cond_72532 = slt64(abs_res_72520, abs_res_72527);
                bool cond_f_res_72533 = min_res_72513 == r_idx_72508;
                bool x_72534 = !cond_72532;
                bool y_72535 = cond_f_res_72533 && x_72534;
                bool cond_72536 = cond_72532 || y_72535;
                int64_t loopres_f_res_72537;
                
                if (cond_72536) {
                    loopres_f_res_72537 = max_res_72511;
                } else {
                    loopres_f_res_72537 = l_idx_72507;
                }
                
                int64_t loopres_f_res_72538;
                
                if (cond_72536) {
                    loopres_f_res_72538 = r_idx_72508;
                } else {
                    loopres_f_res_72538 = min_res_72513;
                }
                
                int64_t loopres_f_res_72539;
                
                if (cond_72536) {
                    int64_t loopres_f_res_t_res_72540 = add64((int64_t) 1,
                                                              span_72509);
                    
                    loopres_f_res_72539 = loopres_f_res_t_res_72540;
                } else {
                    int64_t loopres_f_res_f_res_72541 = add64((int64_t) 1,
                                                              span_72509);
                    
                    loopres_f_res_72539 = loopres_f_res_f_res_72541;
                }
                loopres_72529 = loopres_f_res_72537;
                loopres_72530 = loopres_f_res_72538;
                loopres_72531 = loopres_f_res_72539;
            }
            
            bool loop_cond_72542 = slt64(loopres_72531, min_res_62384);
            bool loop_while_tmp_72595 = loop_cond_72542;
            int64_t l_idx_tmp_72596 = loopres_72529;
            int64_t r_idx_tmp_72597 = loopres_72530;
            int64_t span_tmp_72598 = loopres_72531;
            
            loop_while_72506 = loop_while_tmp_72595;
            l_idx_72507 = l_idx_tmp_72596;
            r_idx_72508 = r_idx_tmp_72597;
            span_72509 = span_tmp_72598;
        }
        idx_72326 = loop_while_72506;
        idx_72327 = l_idx_72507;
        idx_72328 = r_idx_72508;
        idx_72329 = span_72509;
        
        int64_t min_res_72367 = smin64(min_arg_65984, idx_72327);
        int64_t x_72368 = add64(min_res_62384, min_res_72367);
        int64_t r_72369 = sub64(x_72368, (int64_t) 1);
        bool x_72370 = sle64((int64_t) 0, r_72369);
        bool y_72371 = slt64(r_72369, n_62364);
        bool bounds_check_72372 = x_72370 && y_72371;
        bool index_certs_72373;
        
        if (!bounds_check_72372) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72369,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_72374 = ((int64_t *) mem_68078.mem)[r_72369];
        int64_t abs_arg_72375 = sub64(x_72374, min_res_72303);
        int64_t abs_res_72376 = abs64(abs_arg_72375);
        bool x_72377 = sle64((int64_t) 0, min_res_72367);
        bool y_72378 = slt64(min_res_72367, n_62364);
        bool bounds_check_72379 = x_72377 && y_72378;
        bool index_certs_72380;
        
        if (!bounds_check_72379) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72367,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_72381 = ((int64_t *) mem_68078.mem)[min_res_72367];
        int64_t abs_arg_72382 = sub64(x_72381, min_res_72303);
        int64_t abs_res_72383 = abs64(abs_arg_72382);
        int64_t max_res_72384 = smax64(abs_res_72376, abs_res_72383);
        float defunc_0_f_res_72385 = sitofp_i64_f32(max_res_72384);
        float defunc_1_f_res_72386 = max_res_65988 + defunc_0_f_res_72385;
        float defunc_0_f_res_72387 = sitofp_i64_f32(min_res_72303);
        float defunc_2_reduce_res_72392;
        float defunc_2_reduce_res_72393;
        float defunc_2_reduce_res_72394;
        float redout_72544;
        float redout_72545;
        float redout_72546;
        
        redout_72544 = 0.0F;
        redout_72545 = 0.0F;
        redout_72546 = 0.0F;
        for (int64_t i_72543 = 0; i_72543 < q_62366; i_72543++) {
            float x_72549 = ((float *) mem_68087.mem)[i_72543];
            bool cond_72550 = sle64(last_res_65971, i_72543);
            float defunc_0_f_res_72551;
            
            if (cond_72550) {
                defunc_0_f_res_72551 = 0.0F;
            } else {
                int64_t i_72552 = add64(min_res_72367, i_72543);
                float x_72553 = ((float *) mem_68081.mem)[i_72552];
                float defunc_0_f_res_f_res_72554 = 1.0F + x_72553;
                
                defunc_0_f_res_72551 = defunc_0_f_res_f_res_72554;
            }
            
            float x_j_72555 = defunc_0_f_res_72551 - defunc_0_f_res_72387;
            float abs_res_72556 = (float) fabs(x_j_72555);
            float tmp1_72557 = abs_res_72556 / defunc_1_f_res_72386;
            float x_72558 = tmp1_72557 * tmp1_72557;
            float y_72559 = tmp1_72557 * x_72558;
            float tmp2_72560 = 1.0F - y_72559;
            float x_72561 = tmp2_72560 * tmp2_72560;
            float tmp3_72562 = tmp2_72560 * x_72561;
            float tmp4_72563 = x_72549 * tmp3_72562;
            float defunc_1_f_res_72564 = x_j_72555 * tmp4_72563;
            float defunc_1_f_res_72565 = x_j_72555 * defunc_1_f_res_72564;
            float defunc_1_op_res_72566 = tmp4_72563 + redout_72544;
            float defunc_1_op_res_72567 = defunc_1_f_res_72564 + redout_72545;
            float defunc_1_op_res_72568 = defunc_1_f_res_72565 + redout_72546;
            
            ((float *) mem_72388)[i_72543] = defunc_1_f_res_72564;
            ((float *) mem_72390)[i_72543] = tmp4_72563;
            
            float redout_tmp_72599 = defunc_1_op_res_72566;
            float redout_tmp_72600 = defunc_1_op_res_72567;
            float redout_tmp_72601 = defunc_1_op_res_72568;
            
            redout_72544 = redout_tmp_72599;
            redout_72545 = redout_tmp_72600;
            redout_72546 = redout_tmp_72601;
        }
        defunc_2_reduce_res_72392 = redout_72544;
        defunc_2_reduce_res_72393 = redout_72545;
        defunc_2_reduce_res_72394 = redout_72546;
        
        float x_72425 = defunc_2_reduce_res_72392 * defunc_2_reduce_res_72394;
        float y_72426 = defunc_2_reduce_res_72393 * defunc_2_reduce_res_72393;
        float y_72427 = x_72425 - y_72426;
        float det1_72428 = 1.0F / y_72427;
        float a11_72429 = defunc_2_reduce_res_72394 * det1_72428;
        float negate_arg_72430 = defunc_2_reduce_res_72393 * det1_72428;
        float b11_72431 = 0.0F - negate_arg_72430;
        float c11_72432 = defunc_2_reduce_res_72392 * det1_72428;
        float defunc_2_reduce_res_72433;
        float defunc_2_reduce_res_72434;
        float redout_72572;
        float redout_72573;
        
        redout_72572 = 0.0F;
        redout_72573 = 0.0F;
        for (int64_t i_72571 = 0; i_72571 < q_62366; i_72571++) {
            float x_72574 = ((float *) mem_72390)[i_72571];
            float x_72575 = ((float *) mem_72388)[i_72571];
            bool cond_72576 = sle64(last_res_65971, i_72571);
            float defunc_0_f_res_72577;
            
            if (cond_72576) {
                defunc_0_f_res_72577 = 0.0F;
            } else {
                int64_t i_72578 = add64(min_res_72367, i_72571);
                float x_72579 = ((float *) mem_68075.mem)[i_72578];
                
                defunc_0_f_res_72577 = x_72579;
            }
            
            float x_72580 = a11_72429 * x_72574;
            float y_72581 = b11_72431 * x_72575;
            float x_72582 = x_72580 + y_72581;
            float defunc_9_fit_fun_res_72583 = defunc_0_f_res_72577 * x_72582;
            float x_72584 = b11_72431 * x_72574;
            float y_72585 = c11_72432 * x_72575;
            float x_72586 = x_72584 + y_72585;
            float defunc_9_slope_fun_res_72587 = defunc_0_f_res_72577 * x_72586;
            float defunc_1_op_res_72588 = defunc_9_fit_fun_res_72583 +
                  redout_72572;
            float defunc_1_op_res_72589 = defunc_9_slope_fun_res_72587 +
                  redout_72573;
            float redout_tmp_72604 = defunc_1_op_res_72588;
            float redout_tmp_72605 = defunc_1_op_res_72589;
            
            redout_72572 = redout_tmp_72604;
            redout_72573 = redout_tmp_72605;
        }
        defunc_2_reduce_res_72433 = redout_72572;
        defunc_2_reduce_res_72434 = redout_72573;
        ((float *) mem_68126.mem)[gtid_65805] = defunc_2_reduce_res_72433;
        ((float *) mem_68129.mem)[gtid_65805] = defunc_2_reduce_res_72434;
    }
    
  cleanup:
    { }
    free(mem_72388);
    free(mem_72390);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74171_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74171_end -
                 futhark_mc_segmap_parloop_74171_start;
        
        ctx->futhark_mc_segmap_parloop_74171_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74171_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74171_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74169(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65804 = tid;
    int num_tasks_72486 = info.nsubtasks;
    struct futhark_mc_task_74168 *futhark_mc_task_74168 =
                                 (struct futhark_mc_task_74168 *) args;
    struct futhark_context *ctx = futhark_mc_task_74168->ctx;
    uint64_t futhark_mc_segmap_task_74169_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74169_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74168->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74168->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74168->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74168->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74168->free_i_62378;
    bool x_62379 = futhark_mc_task_74168->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74168->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74168->free_loop_cond_62389;
    int64_t last_res_65971 = futhark_mc_task_74168->free_last_res_65971;
    int64_t min_arg_65983 = futhark_mc_task_74168->free_min_arg_65983;
    int64_t min_arg_65984 = futhark_mc_task_74168->free_min_arg_65984;
    float max_res_65988 = futhark_mc_task_74168->free_max_res_65988;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_task_74168->free_mem_68075, .size =
                                 0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_task_74168->free_mem_68078, .size =
                                 0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_task_74168->free_mem_68081, .size =
                                 0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_task_74168->free_mem_68084, .size =
                                 0, .references =NULL};
    int64_t bytes_68085 = futhark_mc_task_74168->free_bytes_68085;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_task_74168->free_mem_68087, .size =
                                 0, .references =NULL};
    struct memblock mem_68126 = {.desc ="mem_68126", .mem =
                                 futhark_mc_task_74168->free_mem_68126, .size =
                                 0, .references =NULL};
    struct memblock mem_68129 = {.desc ="mem_68129", .mem =
                                 futhark_mc_task_74168->free_mem_68129, .size =
                                 0, .references =NULL};
    int64_t iter_72487;
    struct futhark_mc_segmap_parloop_struct_74170
    futhark_mc_segmap_parloop_struct_74170;
    
    futhark_mc_segmap_parloop_struct_74170.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74170.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74170.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74170.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74170.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74170.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74170.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74170.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74170.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74170.free_last_res_65971 = last_res_65971;
    futhark_mc_segmap_parloop_struct_74170.free_min_arg_65983 = min_arg_65983;
    futhark_mc_segmap_parloop_struct_74170.free_min_arg_65984 = min_arg_65984;
    futhark_mc_segmap_parloop_struct_74170.free_max_res_65988 = max_res_65988;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68075 = mem_68075.mem;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68078 = mem_68078.mem;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68081 = mem_68081.mem;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68084 = mem_68084.mem;
    futhark_mc_segmap_parloop_struct_74170.free_bytes_68085 = bytes_68085;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68087 = mem_68087.mem;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68126 = mem_68126.mem;
    futhark_mc_segmap_parloop_struct_74170.free_mem_68129 = mem_68129.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74171_task;
    
    futhark_mc_segmap_parloop_74171_task.name =
        "futhark_mc_segmap_parloop_74171";
    futhark_mc_segmap_parloop_74171_task.fn = futhark_mc_segmap_parloop_74171;
    futhark_mc_segmap_parloop_74171_task.args =
        &futhark_mc_segmap_parloop_struct_74170;
    futhark_mc_segmap_parloop_74171_task.iterations = iterations;
    futhark_mc_segmap_parloop_74171_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74171_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74171_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74171_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74171_task);
    
    if (futhark_mc_segmap_parloop_74171_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74171_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74171_total_end -
                 futhark_mc_segmap_parloop_74171_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74171_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74171_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74171_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74169_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74169_end -
                 futhark_mc_segmap_task_74169_start;
        
        ctx->futhark_mc_segmap_task_74169_runs[tid]++;
        ctx->futhark_mc_segmap_task_74169_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74169_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74175 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_65971;
    int64_t free_min_arg_65983;
    int64_t free_min_arg_65984;
    float free_max_res_65988;
    char *free_mem_68075;
    char *free_mem_68078;
    char *free_mem_68081;
    char *free_mem_68084;
    int64_t free_bytes_68085;
    char *free_mem_68087;
    char *free_mem_68126;
    char *free_mem_68129;
};
struct futhark_mc_task_74179 {
    struct futhark_context *ctx;
    int64_t free_last_res_65971;
    char *free_mem_68081;
    char *free_mem_68087;
    int64_t free_min_res_72218;
    float free_defunc_1_f_res_72237;
    float free_defunc_0_f_res_72238;
    float *retval_defunc_2_reduce_res_72241;
    float *retval_defunc_2_reduce_res_72242;
    float *retval_defunc_2_reduce_res_72243;
    char *retval_mem_72239;
    char *retval_mem_72240;
};
struct futhark_mc_segred_stage_1_parloop_struct_74184 {
    struct futhark_context *ctx;
    int64_t free_last_res_65971;
    char *free_mem_68081;
    char *free_mem_68087;
    int64_t free_min_res_72218;
    float free_defunc_1_f_res_72237;
    float free_defunc_0_f_res_72238;
    char *free_mem_72239;
    char *free_mem_72240;
    char *free_reduce_stage_1_tid_res_arr_mem_72718;
    char *free_reduce_stage_1_tid_res_arr_mem_72720;
    char *free_reduce_stage_1_tid_res_arr_mem_72722;
};
static int futhark_mc_segred_stage_1_parloop_74185(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65808, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74184
    *futhark_mc_segred_stage_1_parloop_struct_74184 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74184 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74184->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74185_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74185_start = get_wall_time();
    
    int64_t last_res_65971 =
            futhark_mc_segred_stage_1_parloop_struct_74184->free_last_res_65971;
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74184->free_mem_68081,
                                 .size =0, .references =NULL};
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74184->free_mem_68087,
                                 .size =0, .references =NULL};
    int64_t min_res_72218 =
            futhark_mc_segred_stage_1_parloop_struct_74184->free_min_res_72218;
    float defunc_1_f_res_72237 =
          futhark_mc_segred_stage_1_parloop_struct_74184->free_defunc_1_f_res_72237;
    float defunc_0_f_res_72238 =
          futhark_mc_segred_stage_1_parloop_struct_74184->free_defunc_0_f_res_72238;
    struct memblock mem_72239 = {.desc ="mem_72239", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74184->free_mem_72239,
                                 .size =0, .references =NULL};
    struct memblock mem_72240 = {.desc ="mem_72240", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74184->free_mem_72240,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72718 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72718",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74184->free_reduce_stage_1_tid_res_arr_mem_72718,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72720 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72720",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74184->free_reduce_stage_1_tid_res_arr_mem_72720,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72722 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72722",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74184->free_reduce_stage_1_tid_res_arr_mem_72722,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72724 = start;
    float x_72662;
    float x_72663;
    float x_72665;
    float x_72666;
    float x_72668;
    float x_72669;
    float local_acc_72725 = 0.0F;
    float local_acc_72726 = 0.0F;
    float local_acc_72727 = 0.0F;
    
    for (; iter_72724 < end; iter_72724++) {
        int64_t gtid_65809 = iter_72724;
        float x_72671 = ((float *) mem_68087.mem)[gtid_65809];
        bool cond_72672 = sle64(last_res_65971, gtid_65809);
        float defunc_0_f_res_72673;
        
        if (cond_72672) {
            defunc_0_f_res_72673 = 0.0F;
        } else {
            int64_t i_72674 = add64(gtid_65809, min_res_72218);
            float x_72675 = ((float *) mem_68081.mem)[i_72674];
            float defunc_0_f_res_f_res_72676 = 1.0F + x_72675;
            
            defunc_0_f_res_72673 = defunc_0_f_res_f_res_72676;
        }
        
        float x_j_72677 = defunc_0_f_res_72673 - defunc_0_f_res_72238;
        float abs_res_72678 = (float) fabs(x_j_72677);
        float tmp1_72679 = abs_res_72678 / defunc_1_f_res_72237;
        float x_72680 = tmp1_72679 * tmp1_72679;
        float y_72681 = tmp1_72679 * x_72680;
        float tmp2_72682 = 1.0F - y_72681;
        float x_72683 = tmp2_72682 * tmp2_72682;
        float tmp3_72684 = tmp2_72682 * x_72683;
        float tmp4_72685 = x_72671 * tmp3_72684;
        float defunc_1_f_res_72686 = x_j_72677 * tmp4_72685;
        float defunc_1_f_res_72687 = x_j_72677 * defunc_1_f_res_72686;
        
        // save map-out results
        {
            ((float *) mem_72239.mem)[gtid_65809] = defunc_1_f_res_72686;
            ((float *) mem_72240.mem)[gtid_65809] = tmp4_72685;
        }
        // Load accum params
        {
            x_72662 = local_acc_72725;
        }
        // Load next params
        {
            x_72663 = tmp4_72685;
        }
        // Red body
        {
            float defunc_1_op_res_72664 = x_72662 + x_72663;
            
            local_acc_72725 = defunc_1_op_res_72664;
        }
        // Load accum params
        {
            x_72665 = local_acc_72726;
        }
        // Load next params
        {
            x_72666 = defunc_1_f_res_72686;
        }
        // Red body
        {
            float defunc_1_op_res_72667 = x_72665 + x_72666;
            
            local_acc_72726 = defunc_1_op_res_72667;
        }
        // Load accum params
        {
            x_72668 = local_acc_72727;
        }
        // Load next params
        {
            x_72669 = defunc_1_f_res_72687;
        }
        // Red body
        {
            float defunc_1_op_res_72670 = x_72668 + x_72669;
            
            local_acc_72727 = defunc_1_op_res_72670;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72718.mem)[flat_tid_65808] =
        local_acc_72725;
    ((float *) reduce_stage_1_tid_res_arr_mem_72720.mem)[flat_tid_65808] =
        local_acc_72726;
    ((float *) reduce_stage_1_tid_res_arr_mem_72722.mem)[flat_tid_65808] =
        local_acc_72727;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74185_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74185_end -
                 futhark_mc_segred_stage_1_parloop_74185_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74185_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74185_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74185_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74180(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65808 = tid;
    int num_tasks_72717 = info.nsubtasks;
    struct futhark_mc_task_74179 *futhark_mc_task_74179 =
                                 (struct futhark_mc_task_74179 *) args;
    struct futhark_context *ctx = futhark_mc_task_74179->ctx;
    uint64_t futhark_mc_segred_task_74180_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74180_start = get_wall_time();
    
    int64_t last_res_65971 = futhark_mc_task_74179->free_last_res_65971;
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_task_74179->free_mem_68081, .size =
                                 0, .references =NULL};
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_task_74179->free_mem_68087, .size =
                                 0, .references =NULL};
    int64_t min_res_72218 = futhark_mc_task_74179->free_min_res_72218;
    float defunc_1_f_res_72237 =
          futhark_mc_task_74179->free_defunc_1_f_res_72237;
    float defunc_0_f_res_72238 =
          futhark_mc_task_74179->free_defunc_0_f_res_72238;
    float defunc_2_reduce_res_72241 =
          *futhark_mc_task_74179->retval_defunc_2_reduce_res_72241;
    float defunc_2_reduce_res_72242 =
          *futhark_mc_task_74179->retval_defunc_2_reduce_res_72242;
    float defunc_2_reduce_res_72243 =
          *futhark_mc_task_74179->retval_defunc_2_reduce_res_72243;
    struct memblock mem_72239 = {.desc ="mem_72239", .mem =
                                 futhark_mc_task_74179->retval_mem_72239,
                                 .size =0, .references =NULL};
    struct memblock mem_72240 = {.desc ="mem_72240", .mem =
                                 futhark_mc_task_74179->retval_mem_72240,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_72718_cached_sizze_74181 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72718 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72720_cached_sizze_74182 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72720 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72722_cached_sizze_74183 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72722 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72718_cached_sizze_74181 <
        (size_t) ((int64_t) 4 * num_tasks_72717)) {
        reduce_stage_1_tid_res_arr_mem_72718 =
            realloc(reduce_stage_1_tid_res_arr_mem_72718, (int64_t) 4 *
                    num_tasks_72717);
        reduce_stage_1_tid_res_arr_mem_72718_cached_sizze_74181 = (int64_t) 4 *
            num_tasks_72717;
    }
    if (reduce_stage_1_tid_res_arr_mem_72720_cached_sizze_74182 <
        (size_t) ((int64_t) 4 * num_tasks_72717)) {
        reduce_stage_1_tid_res_arr_mem_72720 =
            realloc(reduce_stage_1_tid_res_arr_mem_72720, (int64_t) 4 *
                    num_tasks_72717);
        reduce_stage_1_tid_res_arr_mem_72720_cached_sizze_74182 = (int64_t) 4 *
            num_tasks_72717;
    }
    if (reduce_stage_1_tid_res_arr_mem_72722_cached_sizze_74183 <
        (size_t) ((int64_t) 4 * num_tasks_72717)) {
        reduce_stage_1_tid_res_arr_mem_72722 =
            realloc(reduce_stage_1_tid_res_arr_mem_72722, (int64_t) 4 *
                    num_tasks_72717);
        reduce_stage_1_tid_res_arr_mem_72722_cached_sizze_74183 = (int64_t) 4 *
            num_tasks_72717;
    }
    
    int64_t iter_72724;
    struct futhark_mc_segred_stage_1_parloop_struct_74184
    futhark_mc_segred_stage_1_parloop_struct_74184;
    
    futhark_mc_segred_stage_1_parloop_struct_74184.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_last_res_65971 =
        last_res_65971;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_mem_68081 =
        mem_68081.mem;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_mem_68087 =
        mem_68087.mem;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_min_res_72218 =
        min_res_72218;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_defunc_1_f_res_72237 =
        defunc_1_f_res_72237;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_defunc_0_f_res_72238 =
        defunc_0_f_res_72238;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_mem_72239 =
        mem_72239.mem;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_mem_72240 =
        mem_72240.mem;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_reduce_stage_1_tid_res_arr_mem_72718 =
        reduce_stage_1_tid_res_arr_mem_72718;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_reduce_stage_1_tid_res_arr_mem_72720 =
        reduce_stage_1_tid_res_arr_mem_72720;
    futhark_mc_segred_stage_1_parloop_struct_74184.free_reduce_stage_1_tid_res_arr_mem_72722 =
        reduce_stage_1_tid_res_arr_mem_72722;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74185_task;
    
    futhark_mc_segred_stage_1_parloop_74185_task.name =
        "futhark_mc_segred_stage_1_parloop_74185";
    futhark_mc_segred_stage_1_parloop_74185_task.fn =
        futhark_mc_segred_stage_1_parloop_74185;
    futhark_mc_segred_stage_1_parloop_74185_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74184;
    futhark_mc_segred_stage_1_parloop_74185_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74185_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74185_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74185_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74185_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74185_task);
    
    if (futhark_mc_segred_stage_1_parloop_74185_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74185_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74185_total_end -
                 futhark_mc_segred_stage_1_parloop_74185_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74185_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74185_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74185_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72241 = 0.0F;
        defunc_2_reduce_res_72242 = 0.0F;
        defunc_2_reduce_res_72243 = 0.0F;
    }
    
    float x_72728;
    float x_72729;
    float x_72731;
    float x_72732;
    float x_72734;
    float x_72735;
    
    for (int32_t i_72737 = 0; i_72737 < num_tasks_72717; i_72737++) {
        flat_tid_65808 = i_72737;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72728 = defunc_2_reduce_res_72241;
            }
            // load next params
            {
                x_72729 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72718)[flat_tid_65808];
            }
            // red body
            {
                float defunc_1_op_res_72730 = x_72728 + x_72729;
                
                defunc_2_reduce_res_72241 = defunc_1_op_res_72730;
            }
            // load acc params
            {
                x_72731 = defunc_2_reduce_res_72242;
            }
            // load next params
            {
                x_72732 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72720)[flat_tid_65808];
            }
            // red body
            {
                float defunc_1_op_res_72733 = x_72731 + x_72732;
                
                defunc_2_reduce_res_72242 = defunc_1_op_res_72733;
            }
            // load acc params
            {
                x_72734 = defunc_2_reduce_res_72243;
            }
            // load next params
            {
                x_72735 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72722)[flat_tid_65808];
            }
            // red body
            {
                float defunc_1_op_res_72736 = x_72734 + x_72735;
                
                defunc_2_reduce_res_72243 = defunc_1_op_res_72736;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72718);
    free(reduce_stage_1_tid_res_arr_mem_72720);
    free(reduce_stage_1_tid_res_arr_mem_72722);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74180_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74180_end -
                 futhark_mc_segred_task_74180_start;
        
        ctx->futhark_mc_segred_task_74180_runs[tid]++;
        ctx->futhark_mc_segred_task_74180_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74180_iter[tid] += iterations;
    }
    *futhark_mc_task_74179->retval_defunc_2_reduce_res_72241 =
        defunc_2_reduce_res_72241;
    *futhark_mc_task_74179->retval_defunc_2_reduce_res_72242 =
        defunc_2_reduce_res_72242;
    *futhark_mc_task_74179->retval_defunc_2_reduce_res_72243 =
        defunc_2_reduce_res_72243;
    futhark_mc_task_74179->retval_mem_72239 = mem_72239.mem;
    futhark_mc_task_74179->retval_mem_72240 = mem_72240.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74186 {
    struct futhark_context *ctx;
    int64_t free_last_res_65971;
    char *free_mem_68075;
    int64_t free_min_res_72218;
    char *free_mem_72239;
    char *free_mem_72240;
    float free_a11_72276;
    float free_b11_72278;
    float free_c11_72279;
    float *retval_defunc_2_reduce_res_72280;
    float *retval_defunc_2_reduce_res_72281;
};
struct futhark_mc_segred_stage_1_parloop_struct_74190 {
    struct futhark_context *ctx;
    int64_t free_last_res_65971;
    char *free_mem_68075;
    int64_t free_min_res_72218;
    char *free_mem_72239;
    char *free_mem_72240;
    float free_a11_72276;
    float free_b11_72278;
    float free_c11_72279;
    char *free_reduce_stage_1_tid_res_arr_mem_72739;
    char *free_reduce_stage_1_tid_res_arr_mem_72741;
};
static int futhark_mc_segred_stage_1_parloop_74191(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65810, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74190
    *futhark_mc_segred_stage_1_parloop_struct_74190 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74190 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74190->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74191_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74191_start = get_wall_time();
    
    int64_t last_res_65971 =
            futhark_mc_segred_stage_1_parloop_struct_74190->free_last_res_65971;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74190->free_mem_68075,
                                 .size =0, .references =NULL};
    int64_t min_res_72218 =
            futhark_mc_segred_stage_1_parloop_struct_74190->free_min_res_72218;
    struct memblock mem_72239 = {.desc ="mem_72239", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74190->free_mem_72239,
                                 .size =0, .references =NULL};
    struct memblock mem_72240 = {.desc ="mem_72240", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74190->free_mem_72240,
                                 .size =0, .references =NULL};
    float a11_72276 =
          futhark_mc_segred_stage_1_parloop_struct_74190->free_a11_72276;
    float b11_72278 =
          futhark_mc_segred_stage_1_parloop_struct_74190->free_b11_72278;
    float c11_72279 =
          futhark_mc_segred_stage_1_parloop_struct_74190->free_c11_72279;
    struct memblock reduce_stage_1_tid_res_arr_mem_72739 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72739",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74190->free_reduce_stage_1_tid_res_arr_mem_72739,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72741 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72741",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74190->free_reduce_stage_1_tid_res_arr_mem_72741,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72743 = start;
    float x_72688;
    float x_72689;
    float x_72691;
    float x_72692;
    float local_acc_72744 = 0.0F;
    float local_acc_72745 = 0.0F;
    
    for (; iter_72743 < end; iter_72743++) {
        int64_t gtid_65811 = iter_72743;
        float x_72694 = ((float *) mem_72240.mem)[gtid_65811];
        float x_72695 = ((float *) mem_72239.mem)[gtid_65811];
        bool cond_72696 = sle64(last_res_65971, gtid_65811);
        float defunc_0_f_res_72697;
        
        if (cond_72696) {
            defunc_0_f_res_72697 = 0.0F;
        } else {
            int64_t i_72698 = add64(gtid_65811, min_res_72218);
            float x_72699 = ((float *) mem_68075.mem)[i_72698];
            
            defunc_0_f_res_72697 = x_72699;
        }
        
        float x_72700 = a11_72276 * x_72694;
        float y_72701 = b11_72278 * x_72695;
        float x_72702 = x_72700 + y_72701;
        float defunc_9_fit_fun_res_72703 = defunc_0_f_res_72697 * x_72702;
        float x_72704 = b11_72278 * x_72694;
        float y_72705 = c11_72279 * x_72695;
        float x_72706 = x_72704 + y_72705;
        float defunc_9_slope_fun_res_72707 = defunc_0_f_res_72697 * x_72706;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72688 = local_acc_72744;
        }
        // Load next params
        {
            x_72689 = defunc_9_fit_fun_res_72703;
        }
        // Red body
        {
            float defunc_1_op_res_72690 = x_72688 + x_72689;
            
            local_acc_72744 = defunc_1_op_res_72690;
        }
        // Load accum params
        {
            x_72691 = local_acc_72745;
        }
        // Load next params
        {
            x_72692 = defunc_9_slope_fun_res_72707;
        }
        // Red body
        {
            float defunc_1_op_res_72693 = x_72691 + x_72692;
            
            local_acc_72745 = defunc_1_op_res_72693;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72739.mem)[flat_tid_65810] =
        local_acc_72744;
    ((float *) reduce_stage_1_tid_res_arr_mem_72741.mem)[flat_tid_65810] =
        local_acc_72745;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74191_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74191_end -
                 futhark_mc_segred_stage_1_parloop_74191_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74191_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74191_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74191_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74187(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65810 = tid;
    int num_tasks_72738 = info.nsubtasks;
    struct futhark_mc_task_74186 *futhark_mc_task_74186 =
                                 (struct futhark_mc_task_74186 *) args;
    struct futhark_context *ctx = futhark_mc_task_74186->ctx;
    uint64_t futhark_mc_segred_task_74187_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74187_start = get_wall_time();
    
    int64_t last_res_65971 = futhark_mc_task_74186->free_last_res_65971;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_task_74186->free_mem_68075, .size =
                                 0, .references =NULL};
    int64_t min_res_72218 = futhark_mc_task_74186->free_min_res_72218;
    struct memblock mem_72239 = {.desc ="mem_72239", .mem =
                                 futhark_mc_task_74186->free_mem_72239, .size =
                                 0, .references =NULL};
    struct memblock mem_72240 = {.desc ="mem_72240", .mem =
                                 futhark_mc_task_74186->free_mem_72240, .size =
                                 0, .references =NULL};
    float a11_72276 = futhark_mc_task_74186->free_a11_72276;
    float b11_72278 = futhark_mc_task_74186->free_b11_72278;
    float c11_72279 = futhark_mc_task_74186->free_c11_72279;
    float defunc_2_reduce_res_72280 =
          *futhark_mc_task_74186->retval_defunc_2_reduce_res_72280;
    float defunc_2_reduce_res_72281 =
          *futhark_mc_task_74186->retval_defunc_2_reduce_res_72281;
    size_t reduce_stage_1_tid_res_arr_mem_72739_cached_sizze_74188 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72739 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72741_cached_sizze_74189 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72741 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72739_cached_sizze_74188 <
        (size_t) ((int64_t) 4 * num_tasks_72738)) {
        reduce_stage_1_tid_res_arr_mem_72739 =
            realloc(reduce_stage_1_tid_res_arr_mem_72739, (int64_t) 4 *
                    num_tasks_72738);
        reduce_stage_1_tid_res_arr_mem_72739_cached_sizze_74188 = (int64_t) 4 *
            num_tasks_72738;
    }
    if (reduce_stage_1_tid_res_arr_mem_72741_cached_sizze_74189 <
        (size_t) ((int64_t) 4 * num_tasks_72738)) {
        reduce_stage_1_tid_res_arr_mem_72741 =
            realloc(reduce_stage_1_tid_res_arr_mem_72741, (int64_t) 4 *
                    num_tasks_72738);
        reduce_stage_1_tid_res_arr_mem_72741_cached_sizze_74189 = (int64_t) 4 *
            num_tasks_72738;
    }
    
    int64_t iter_72743;
    struct futhark_mc_segred_stage_1_parloop_struct_74190
    futhark_mc_segred_stage_1_parloop_struct_74190;
    
    futhark_mc_segred_stage_1_parloop_struct_74190.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_last_res_65971 =
        last_res_65971;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_mem_68075 =
        mem_68075.mem;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_min_res_72218 =
        min_res_72218;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_mem_72239 =
        mem_72239.mem;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_mem_72240 =
        mem_72240.mem;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_a11_72276 = a11_72276;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_b11_72278 = b11_72278;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_c11_72279 = c11_72279;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_reduce_stage_1_tid_res_arr_mem_72739 =
        reduce_stage_1_tid_res_arr_mem_72739;
    futhark_mc_segred_stage_1_parloop_struct_74190.free_reduce_stage_1_tid_res_arr_mem_72741 =
        reduce_stage_1_tid_res_arr_mem_72741;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74191_task;
    
    futhark_mc_segred_stage_1_parloop_74191_task.name =
        "futhark_mc_segred_stage_1_parloop_74191";
    futhark_mc_segred_stage_1_parloop_74191_task.fn =
        futhark_mc_segred_stage_1_parloop_74191;
    futhark_mc_segred_stage_1_parloop_74191_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74190;
    futhark_mc_segred_stage_1_parloop_74191_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74191_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74191_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74191_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74191_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74191_task);
    
    if (futhark_mc_segred_stage_1_parloop_74191_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74191_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74191_total_end -
                 futhark_mc_segred_stage_1_parloop_74191_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74191_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74191_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74191_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72280 = 0.0F;
        defunc_2_reduce_res_72281 = 0.0F;
    }
    
    float x_72746;
    float x_72747;
    float x_72749;
    float x_72750;
    
    for (int32_t i_72752 = 0; i_72752 < num_tasks_72738; i_72752++) {
        flat_tid_65810 = i_72752;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72746 = defunc_2_reduce_res_72280;
            }
            // load next params
            {
                x_72747 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72739)[flat_tid_65810];
            }
            // red body
            {
                float defunc_1_op_res_72748 = x_72746 + x_72747;
                
                defunc_2_reduce_res_72280 = defunc_1_op_res_72748;
            }
            // load acc params
            {
                x_72749 = defunc_2_reduce_res_72281;
            }
            // load next params
            {
                x_72750 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72741)[flat_tid_65810];
            }
            // red body
            {
                float defunc_1_op_res_72751 = x_72749 + x_72750;
                
                defunc_2_reduce_res_72281 = defunc_1_op_res_72751;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72739);
    free(reduce_stage_1_tid_res_arr_mem_72741);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74187_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74187_end -
                 futhark_mc_segred_task_74187_start;
        
        ctx->futhark_mc_segred_task_74187_runs[tid]++;
        ctx->futhark_mc_segred_task_74187_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74187_iter[tid] += iterations;
    }
    *futhark_mc_task_74186->retval_defunc_2_reduce_res_72280 =
        defunc_2_reduce_res_72280;
    *futhark_mc_task_74186->retval_defunc_2_reduce_res_72281 =
        defunc_2_reduce_res_72281;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74176(void *args, int64_t start,
                                           int64_t end, int flat_tid_65806,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74175
    *futhark_mc_segmap_parloop_struct_74175 =
    (struct futhark_mc_segmap_parloop_struct_74175 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74175->ctx;
    uint64_t futhark_mc_segmap_parloop_74176_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74176_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74175->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74175->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74175->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74175->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74175->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74175->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74175->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74175->free_loop_cond_62389;
    int64_t last_res_65971 =
            futhark_mc_segmap_parloop_struct_74175->free_last_res_65971;
    int64_t min_arg_65983 =
            futhark_mc_segmap_parloop_struct_74175->free_min_arg_65983;
    int64_t min_arg_65984 =
            futhark_mc_segmap_parloop_struct_74175->free_min_arg_65984;
    float max_res_65988 =
          futhark_mc_segmap_parloop_struct_74175->free_max_res_65988;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68075,
                                 .size =0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68078,
                                 .size =0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68081,
                                 .size =0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68084,
                                 .size =0, .references =NULL};
    int64_t bytes_68085 =
            futhark_mc_segmap_parloop_struct_74175->free_bytes_68085;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68087,
                                 .size =0, .references =NULL};
    struct memblock mem_68126 = {.desc ="mem_68126", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68126,
                                 .size =0, .references =NULL};
    struct memblock mem_68129 = {.desc ="mem_68129", .mem =
                                 futhark_mc_segmap_parloop_struct_74175->free_mem_68129,
                                 .size =0, .references =NULL};
    size_t mem_72239_cached_sizze_74177 = 0;
    char *mem_72239 = NULL;
    size_t mem_72240_cached_sizze_74178 = 0;
    char *mem_72240 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72606 = start;
    
    if (mem_72239_cached_sizze_74177 < (size_t) bytes_68085) {
        mem_72239 = realloc(mem_72239, bytes_68085);
        mem_72239_cached_sizze_74177 = bytes_68085;
    }
    if (mem_72240_cached_sizze_74178 < (size_t) bytes_68085) {
        mem_72240 = realloc(mem_72240, bytes_68085);
        mem_72240_cached_sizze_74178 = bytes_68085;
    }
    for (; iter_72606 < end; iter_72606++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72708 = n_m_62372;
        int64_t gtid_65807 = iter_72606;
        int64_t remnant_72709 = iter_72606 - gtid_65807;
        int64_t min_arg_72153 = mul64(jump_62368, gtid_65807);
        int64_t min_res_72154 = smin64(i_62378, min_arg_72153);
        int64_t defunc_0_g_res_72155 = add64((int64_t) 1, min_res_72154);
        bool init_idx_72156;
        int64_t init_idx_72157;
        int64_t init_idx_72158;
        bool loop_while_72607;
        int64_t low_72608;
        int64_t high_72609;
        
        loop_while_72607 = x_62379;
        low_72608 = (int64_t) 0;
        high_72609 = i_62378;
        while (loop_while_72607) {
            int64_t x_72610 = add64(low_72608, high_72609);
            int64_t mid_72611 = sdiv64(x_72610, (int64_t) 2);
            bool x_72612 = sle64((int64_t) 0, mid_72611);
            bool y_72613 = slt64(mid_72611, n_62364);
            bool bounds_check_72614 = x_72612 && y_72613;
            bool index_certs_72615;
            
            if (!bounds_check_72614) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72611,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_72616 = ((int64_t *) mem_68084.mem)[mid_72611];
            bool cond_72617 = slt64(mid_id_72616, (int64_t) 0);
            int64_t mid_idx_72618;
            
            if (cond_72617) {
                mid_idx_72618 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_72618 = mid_id_72616;
            }
            
            bool cond_72619 = sle64(defunc_0_g_res_72155, mid_idx_72618);
            int64_t loopres_72620;
            int64_t loopres_72621;
            
            if (cond_72619) {
                int64_t loopres_t_res_72622 = sub64(mid_72611, (int64_t) 1);
                
                loopres_72620 = low_72608;
                loopres_72621 = loopres_t_res_72622;
            } else {
                int64_t loopres_f_res_72623 = add64((int64_t) 1, mid_72611);
                
                loopres_72620 = loopres_f_res_72623;
                loopres_72621 = high_72609;
            }
            
            bool loop_cond_72624 = sle64(loopres_72620, loopres_72621);
            bool loop_while_tmp_72710 = loop_cond_72624;
            int64_t low_tmp_72711 = loopres_72620;
            int64_t high_tmp_72712 = loopres_72621;
            
            loop_while_72607 = loop_while_tmp_72710;
            low_72608 = low_tmp_72711;
            high_72609 = high_tmp_72712;
        }
        init_idx_72156 = loop_while_72607;
        init_idx_72157 = low_72608;
        init_idx_72158 = high_72609;
        
        bool idx_72177;
        int64_t idx_72178;
        int64_t idx_72179;
        int64_t idx_72180;
        bool loop_while_72625;
        int64_t l_idx_72626;
        int64_t r_idx_72627;
        int64_t span_72628;
        
        loop_while_72625 = loop_cond_62389;
        l_idx_72626 = init_idx_72157;
        r_idx_72627 = init_idx_72157;
        span_72628 = (int64_t) 1;
        while (loop_while_72625) {
            int64_t max_arg_72629 = sub64(l_idx_72626, (int64_t) 1);
            int64_t max_res_72630 = smax64((int64_t) 0, max_arg_72629);
            int64_t min_arg_72631 = add64((int64_t) 1, r_idx_72627);
            int64_t min_res_72632 = smin64(min_arg_65983, min_arg_72631);
            bool x_72633 = sle64((int64_t) 0, max_res_72630);
            bool y_72634 = slt64(max_res_72630, n_62364);
            bool bounds_check_72635 = x_72633 && y_72634;
            bool index_certs_72636;
            
            if (!bounds_check_72635) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72630,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72637 = ((int64_t *) mem_68084.mem)[max_res_72630];
            int64_t abs_arg_72638 = sub64(x_72637, defunc_0_g_res_72155);
            int64_t abs_res_72639 = abs64(abs_arg_72638);
            bool x_72640 = sle64((int64_t) 0, min_res_72632);
            bool y_72641 = slt64(min_res_72632, n_62364);
            bool bounds_check_72642 = x_72640 && y_72641;
            bool index_certs_72643;
            
            if (!bounds_check_72642) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72632,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72644 = ((int64_t *) mem_68084.mem)[min_res_72632];
            int64_t abs_arg_72645 = sub64(x_72644, defunc_0_g_res_72155);
            int64_t abs_res_72646 = abs64(abs_arg_72645);
            bool cond_72647 = max_res_72630 == l_idx_72626;
            int64_t loopres_72648;
            int64_t loopres_72649;
            int64_t loopres_72650;
            
            if (cond_72647) {
                loopres_72648 = l_idx_72626;
                loopres_72649 = r_idx_72627;
                loopres_72650 = min_res_62384;
            } else {
                bool cond_72651 = slt64(abs_res_72639, abs_res_72646);
                bool cond_f_res_72652 = min_res_72632 == r_idx_72627;
                bool x_72653 = !cond_72651;
                bool y_72654 = cond_f_res_72652 && x_72653;
                bool cond_72655 = cond_72651 || y_72654;
                int64_t loopres_f_res_72656;
                
                if (cond_72655) {
                    loopres_f_res_72656 = max_res_72630;
                } else {
                    loopres_f_res_72656 = l_idx_72626;
                }
                
                int64_t loopres_f_res_72657;
                
                if (cond_72655) {
                    loopres_f_res_72657 = r_idx_72627;
                } else {
                    loopres_f_res_72657 = min_res_72632;
                }
                
                int64_t loopres_f_res_72658;
                
                if (cond_72655) {
                    int64_t loopres_f_res_t_res_72659 = add64((int64_t) 1,
                                                              span_72628);
                    
                    loopres_f_res_72658 = loopres_f_res_t_res_72659;
                } else {
                    int64_t loopres_f_res_f_res_72660 = add64((int64_t) 1,
                                                              span_72628);
                    
                    loopres_f_res_72658 = loopres_f_res_f_res_72660;
                }
                loopres_72648 = loopres_f_res_72656;
                loopres_72649 = loopres_f_res_72657;
                loopres_72650 = loopres_f_res_72658;
            }
            
            bool loop_cond_72661 = slt64(loopres_72650, min_res_62384);
            bool loop_while_tmp_72713 = loop_cond_72661;
            int64_t l_idx_tmp_72714 = loopres_72648;
            int64_t r_idx_tmp_72715 = loopres_72649;
            int64_t span_tmp_72716 = loopres_72650;
            
            loop_while_72625 = loop_while_tmp_72713;
            l_idx_72626 = l_idx_tmp_72714;
            r_idx_72627 = r_idx_tmp_72715;
            span_72628 = span_tmp_72716;
        }
        idx_72177 = loop_while_72625;
        idx_72178 = l_idx_72626;
        idx_72179 = r_idx_72627;
        idx_72180 = span_72628;
        
        int64_t min_res_72218 = smin64(min_arg_65984, idx_72178);
        int64_t x_72219 = add64(min_res_62384, min_res_72218);
        int64_t r_72220 = sub64(x_72219, (int64_t) 1);
        bool x_72221 = sle64((int64_t) 0, r_72220);
        bool y_72222 = slt64(r_72220, n_62364);
        bool bounds_check_72223 = x_72221 && y_72222;
        bool index_certs_72224;
        
        if (!bounds_check_72223) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72220,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_72225 = ((int64_t *) mem_68078.mem)[r_72220];
        int64_t abs_arg_72226 = sub64(x_72225, min_res_72154);
        int64_t abs_res_72227 = abs64(abs_arg_72226);
        bool x_72228 = sle64((int64_t) 0, min_res_72218);
        bool y_72229 = slt64(min_res_72218, n_62364);
        bool bounds_check_72230 = x_72228 && y_72229;
        bool index_certs_72231;
        
        if (!bounds_check_72230) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72218,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_72232 = ((int64_t *) mem_68078.mem)[min_res_72218];
        int64_t abs_arg_72233 = sub64(x_72232, min_res_72154);
        int64_t abs_res_72234 = abs64(abs_arg_72233);
        int64_t max_res_72235 = smax64(abs_res_72227, abs_res_72234);
        float defunc_0_f_res_72236 = sitofp_i64_f32(max_res_72235);
        float defunc_1_f_res_72237 = max_res_65988 + defunc_0_f_res_72236;
        float defunc_0_f_res_72238 = sitofp_i64_f32(min_res_72154);
        float defunc_2_reduce_res_72241;
        float defunc_2_reduce_res_72242;
        float defunc_2_reduce_res_72243;
        int64_t flat_tid_65808 = (int64_t) 0;
        int32_t num_tasks_72717;
        struct futhark_mc_task_74179 futhark_mc_task_74179;
        
        futhark_mc_task_74179.ctx = ctx;
        futhark_mc_task_74179.free_last_res_65971 = last_res_65971;
        futhark_mc_task_74179.free_mem_68081 = mem_68081.mem;
        futhark_mc_task_74179.free_mem_68087 = mem_68087.mem;
        futhark_mc_task_74179.free_min_res_72218 = min_res_72218;
        futhark_mc_task_74179.free_defunc_1_f_res_72237 = defunc_1_f_res_72237;
        futhark_mc_task_74179.free_defunc_0_f_res_72238 = defunc_0_f_res_72238;
        futhark_mc_task_74179.retval_defunc_2_reduce_res_72241 =
            &defunc_2_reduce_res_72241;
        futhark_mc_task_74179.retval_defunc_2_reduce_res_72242 =
            &defunc_2_reduce_res_72242;
        futhark_mc_task_74179.retval_defunc_2_reduce_res_72243 =
            &defunc_2_reduce_res_72243;
        futhark_mc_task_74179.retval_mem_72239 = mem_72239;
        futhark_mc_task_74179.retval_mem_72240 = mem_72240;
        
        struct scheduler_segop futhark_mc_task_74179_task;
        
        futhark_mc_task_74179_task.args = &futhark_mc_task_74179;
        futhark_mc_task_74179_task.top_level_fn = futhark_mc_segred_task_74180;
        futhark_mc_task_74179_task.name = "futhark_mc_segred_task_74180";
        futhark_mc_task_74179_task.iterations = q_62366;
        futhark_mc_task_74179_task.task_time =
            &ctx->futhark_mc_segred_task_74180_total_time;
        futhark_mc_task_74179_task.task_iter =
            &ctx->futhark_mc_segred_task_74180_total_iter;
        futhark_mc_task_74179_task.sched = STATIC;
        futhark_mc_task_74179_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74180_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74179_task);
        
        if (futhark_mc_segred_task_74180_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_72272 = defunc_2_reduce_res_72241 * defunc_2_reduce_res_72243;
        float y_72273 = defunc_2_reduce_res_72242 * defunc_2_reduce_res_72242;
        float y_72274 = x_72272 - y_72273;
        float det1_72275 = 1.0F / y_72274;
        float a11_72276 = defunc_2_reduce_res_72243 * det1_72275;
        float negate_arg_72277 = defunc_2_reduce_res_72242 * det1_72275;
        float b11_72278 = 0.0F - negate_arg_72277;
        float c11_72279 = defunc_2_reduce_res_72241 * det1_72275;
        float defunc_2_reduce_res_72280;
        float defunc_2_reduce_res_72281;
        int64_t flat_tid_65810 = (int64_t) 0;
        int32_t num_tasks_72738;
        struct futhark_mc_task_74186 futhark_mc_task_74186;
        
        futhark_mc_task_74186.ctx = ctx;
        futhark_mc_task_74186.free_last_res_65971 = last_res_65971;
        futhark_mc_task_74186.free_mem_68075 = mem_68075.mem;
        futhark_mc_task_74186.free_min_res_72218 = min_res_72218;
        futhark_mc_task_74186.free_mem_72239 = mem_72239;
        futhark_mc_task_74186.free_mem_72240 = mem_72240;
        futhark_mc_task_74186.free_a11_72276 = a11_72276;
        futhark_mc_task_74186.free_b11_72278 = b11_72278;
        futhark_mc_task_74186.free_c11_72279 = c11_72279;
        futhark_mc_task_74186.retval_defunc_2_reduce_res_72280 =
            &defunc_2_reduce_res_72280;
        futhark_mc_task_74186.retval_defunc_2_reduce_res_72281 =
            &defunc_2_reduce_res_72281;
        
        struct scheduler_segop futhark_mc_task_74186_task;
        
        futhark_mc_task_74186_task.args = &futhark_mc_task_74186;
        futhark_mc_task_74186_task.top_level_fn = futhark_mc_segred_task_74187;
        futhark_mc_task_74186_task.name = "futhark_mc_segred_task_74187";
        futhark_mc_task_74186_task.iterations = q_62366;
        futhark_mc_task_74186_task.task_time =
            &ctx->futhark_mc_segred_task_74187_total_time;
        futhark_mc_task_74186_task.task_iter =
            &ctx->futhark_mc_segred_task_74187_total_iter;
        futhark_mc_task_74186_task.sched = STATIC;
        futhark_mc_task_74186_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74187_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74186_task);
        
        if (futhark_mc_segred_task_74187_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_68126.mem)[gtid_65807] = defunc_2_reduce_res_72280;
        ((float *) mem_68129.mem)[gtid_65807] = defunc_2_reduce_res_72281;
    }
    
  cleanup:
    { }
    free(mem_72239);
    free(mem_72240);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74176_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74176_end -
                 futhark_mc_segmap_parloop_74176_start;
        
        ctx->futhark_mc_segmap_parloop_74176_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74176_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74176_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74174(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65806 = tid;
    int num_tasks_72486 = info.nsubtasks;
    struct futhark_mc_task_74168 *futhark_mc_task_74168 =
                                 (struct futhark_mc_task_74168 *) args;
    struct futhark_context *ctx = futhark_mc_task_74168->ctx;
    uint64_t futhark_mc_segmap_nested_task_74174_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74174_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74168->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74168->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74168->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74168->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74168->free_i_62378;
    bool x_62379 = futhark_mc_task_74168->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74168->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74168->free_loop_cond_62389;
    int64_t last_res_65971 = futhark_mc_task_74168->free_last_res_65971;
    int64_t min_arg_65983 = futhark_mc_task_74168->free_min_arg_65983;
    int64_t min_arg_65984 = futhark_mc_task_74168->free_min_arg_65984;
    float max_res_65988 = futhark_mc_task_74168->free_max_res_65988;
    struct memblock mem_68075 = {.desc ="mem_68075", .mem =
                                 futhark_mc_task_74168->free_mem_68075, .size =
                                 0, .references =NULL};
    struct memblock mem_68078 = {.desc ="mem_68078", .mem =
                                 futhark_mc_task_74168->free_mem_68078, .size =
                                 0, .references =NULL};
    struct memblock mem_68081 = {.desc ="mem_68081", .mem =
                                 futhark_mc_task_74168->free_mem_68081, .size =
                                 0, .references =NULL};
    struct memblock mem_68084 = {.desc ="mem_68084", .mem =
                                 futhark_mc_task_74168->free_mem_68084, .size =
                                 0, .references =NULL};
    int64_t bytes_68085 = futhark_mc_task_74168->free_bytes_68085;
    struct memblock mem_68087 = {.desc ="mem_68087", .mem =
                                 futhark_mc_task_74168->free_mem_68087, .size =
                                 0, .references =NULL};
    struct memblock mem_68126 = {.desc ="mem_68126", .mem =
                                 futhark_mc_task_74168->free_mem_68126, .size =
                                 0, .references =NULL};
    struct memblock mem_68129 = {.desc ="mem_68129", .mem =
                                 futhark_mc_task_74168->free_mem_68129, .size =
                                 0, .references =NULL};
    int64_t iter_72606;
    struct futhark_mc_segmap_parloop_struct_74175
    futhark_mc_segmap_parloop_struct_74175;
    
    futhark_mc_segmap_parloop_struct_74175.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74175.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74175.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74175.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74175.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74175.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74175.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74175.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74175.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74175.free_last_res_65971 = last_res_65971;
    futhark_mc_segmap_parloop_struct_74175.free_min_arg_65983 = min_arg_65983;
    futhark_mc_segmap_parloop_struct_74175.free_min_arg_65984 = min_arg_65984;
    futhark_mc_segmap_parloop_struct_74175.free_max_res_65988 = max_res_65988;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68075 = mem_68075.mem;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68078 = mem_68078.mem;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68081 = mem_68081.mem;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68084 = mem_68084.mem;
    futhark_mc_segmap_parloop_struct_74175.free_bytes_68085 = bytes_68085;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68087 = mem_68087.mem;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68126 = mem_68126.mem;
    futhark_mc_segmap_parloop_struct_74175.free_mem_68129 = mem_68129.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74176_task;
    
    futhark_mc_segmap_parloop_74176_task.name =
        "futhark_mc_segmap_parloop_74176";
    futhark_mc_segmap_parloop_74176_task.fn = futhark_mc_segmap_parloop_74176;
    futhark_mc_segmap_parloop_74176_task.args =
        &futhark_mc_segmap_parloop_struct_74175;
    futhark_mc_segmap_parloop_74176_task.iterations = iterations;
    futhark_mc_segmap_parloop_74176_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74176_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74176_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74176_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74176_task);
    
    if (futhark_mc_segmap_parloop_74176_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74176_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74176_total_end -
                 futhark_mc_segmap_parloop_74176_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74176_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74176_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74176_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74174_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74174_end -
                 futhark_mc_segmap_nested_task_74174_start;
        
        ctx->futhark_mc_segmap_nested_task_74174_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74174_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74174_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74140(void *args, int64_t start,
                                           int64_t end, int flat_tid_65794,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74139
    *futhark_mc_segmap_parloop_struct_74139 =
    (struct futhark_mc_segmap_parloop_struct_74139 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74139->ctx;
    uint64_t futhark_mc_segmap_parloop_74140_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74140_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74139->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74139->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74139->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74139->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74139->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74139->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74139->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74139->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74139->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74139->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74139->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68070 =
            futhark_mc_segmap_parloop_struct_74139->free_bytes_68070;
    int64_t bytes_68073 =
            futhark_mc_segmap_parloop_struct_74139->free_bytes_68073;
    int64_t bytes_68085 =
            futhark_mc_segmap_parloop_struct_74139->free_bytes_68085;
    int64_t bytes_68124 =
            futhark_mc_segmap_parloop_struct_74139->free_bytes_68124;
    struct memblock mem_68283 = {.desc ="mem_68283", .mem =
                                 futhark_mc_segmap_parloop_struct_74139->free_mem_68283,
                                 .size =0, .references =NULL};
    struct memblock mem_68287 = {.desc ="mem_68287", .mem =
                                 futhark_mc_segmap_parloop_struct_74139->free_mem_68287,
                                 .size =0, .references =NULL};
    size_t mem_68072_cached_sizze_74141 = 0;
    char *mem_68072 = NULL;
    size_t mem_68075_cached_sizze_74142 = 0;
    char *mem_68075 = NULL;
    size_t mem_68078_cached_sizze_74143 = 0;
    char *mem_68078 = NULL;
    size_t mem_68081_cached_sizze_74144 = 0;
    char *mem_68081 = NULL;
    size_t mem_68084_cached_sizze_74145 = 0;
    char *mem_68084 = NULL;
    size_t mem_68087_cached_sizze_74146 = 0;
    char *mem_68087 = NULL;
    size_t mem_68126_cached_sizze_74147 = 0;
    char *mem_68126 = NULL;
    size_t mem_68129_cached_sizze_74148 = 0;
    char *mem_68129 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72134 = start;
    
    if (mem_68072_cached_sizze_74141 < (size_t) bytes_68070) {
        mem_68072 = realloc(mem_68072, bytes_68070);
        mem_68072_cached_sizze_74141 = bytes_68070;
    }
    if (mem_68075_cached_sizze_74142 < (size_t) bytes_68073) {
        mem_68075 = realloc(mem_68075, bytes_68073);
        mem_68075_cached_sizze_74142 = bytes_68073;
    }
    if (mem_68078_cached_sizze_74143 < (size_t) bytes_68070) {
        mem_68078 = realloc(mem_68078, bytes_68070);
        mem_68078_cached_sizze_74143 = bytes_68070;
    }
    if (mem_68081_cached_sizze_74144 < (size_t) bytes_68073) {
        mem_68081 = realloc(mem_68081, bytes_68073);
        mem_68081_cached_sizze_74144 = bytes_68073;
    }
    if (mem_68084_cached_sizze_74145 < (size_t) bytes_68070) {
        mem_68084 = realloc(mem_68084, bytes_68070);
        mem_68084_cached_sizze_74145 = bytes_68070;
    }
    if (mem_68087_cached_sizze_74146 < (size_t) bytes_68085) {
        mem_68087 = realloc(mem_68087, bytes_68085);
        mem_68087_cached_sizze_74146 = bytes_68085;
    }
    if (mem_68126_cached_sizze_74147 < (size_t) bytes_68124) {
        mem_68126 = realloc(mem_68126, bytes_68124);
        mem_68126_cached_sizze_74147 = bytes_68124;
    }
    if (mem_68129_cached_sizze_74148 < (size_t) bytes_68124) {
        mem_68129 = realloc(mem_68129, bytes_68124);
        mem_68129_cached_sizze_74148 = bytes_68124;
    }
    for (; iter_72134 < end; iter_72134++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72454 = m_62363;
        int64_t gtid_65795 = iter_72134;
        int64_t remnant_72455 = iter_72134 - gtid_65795;
        int64_t flat_tid_65796 = (int64_t) 0;
        int32_t num_tasks_72456;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74149 futhark_mc_task_74149;
        
        futhark_mc_task_74149.ctx = ctx;
        futhark_mc_task_74149.free_n_62364 = n_62364;
        futhark_mc_task_74149.free_gtid_65795 = gtid_65795;
        futhark_mc_task_74149.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74149.free_mem_68072 = mem_68072;
        
        struct scheduler_segop futhark_mc_task_74149_task;
        
        futhark_mc_task_74149_task.args = &futhark_mc_task_74149;
        futhark_mc_task_74149_task.top_level_fn = futhark_mc_segscan_task_74150;
        futhark_mc_task_74149_task.name = "futhark_mc_segscan_task_74150";
        futhark_mc_task_74149_task.iterations = n_62364;
        futhark_mc_task_74149_task.task_time =
            &ctx->futhark_mc_segscan_task_74150_total_time;
        futhark_mc_task_74149_task.task_iter =
            &ctx->futhark_mc_segscan_task_74150_total_iter;
        futhark_mc_task_74149_task.sched = STATIC;
        futhark_mc_task_74149_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74150_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74149_task);
        
        if (futhark_mc_segscan_task_74150_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65971 = ((int64_t *) mem_68072)[i_62378];
        
        for (int64_t i_72470 = 0; i_72470 < n_62364; i_72470++) {
            ((float *) mem_68075)[i_72470] = 0.0F;
        }
        for (int64_t i_72471 = 0; i_72471 < n_62364; i_72471++) {
            ((int64_t *) mem_68078)[i_72471] = (int64_t) -1;
        }
        
        int64_t flat_tid_65798 = (int64_t) 0;
        int32_t num_tasks_72472;
        struct futhark_mc_task_74156 futhark_mc_task_74156;
        
        futhark_mc_task_74156.ctx = ctx;
        futhark_mc_task_74156.free_n_62364 = n_62364;
        futhark_mc_task_74156.free_gtid_65795 = gtid_65795;
        futhark_mc_task_74156.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74156.free_mem_68072 = mem_68072;
        futhark_mc_task_74156.free_mem_68075 = mem_68075;
        futhark_mc_task_74156.free_mem_68078 = mem_68078;
        
        struct scheduler_segop futhark_mc_task_74156_task;
        
        futhark_mc_task_74156_task.args = &futhark_mc_task_74156;
        futhark_mc_task_74156_task.top_level_fn = futhark_mc_segmap_task_74157;
        futhark_mc_task_74156_task.name = "futhark_mc_segmap_task_74157";
        futhark_mc_task_74156_task.iterations = n_62364;
        futhark_mc_task_74156_task.task_time =
            &ctx->futhark_mc_segmap_task_74157_total_time;
        futhark_mc_task_74156_task.task_iter =
            &ctx->futhark_mc_segmap_task_74157_total_iter;
        futhark_mc_task_74156_task.sched = STATIC;
        futhark_mc_task_74156_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74157_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74156_task);
        
        if (futhark_mc_segmap_task_74157_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65983 = sub64(last_res_65971, (int64_t) 1);
        int64_t min_arg_65984 = sub64(last_res_65971, min_res_62384);
        float i64_res_65985 = sitofp_i64_f32(last_res_65971);
        float x_65986 = i64_res_62390 - i64_res_65985;
        float max_arg_65987 = x_65986 / 2.0F;
        float max_res_65988 = fmax32(0.0F, max_arg_65987);
        int64_t flat_tid_65800 = (int64_t) 0;
        int32_t num_tasks_72478;
        struct futhark_mc_task_74160 futhark_mc_task_74160;
        
        futhark_mc_task_74160.ctx = ctx;
        futhark_mc_task_74160.free_n_62364 = n_62364;
        futhark_mc_task_74160.free_mem_68078 = mem_68078;
        futhark_mc_task_74160.free_mem_68081 = mem_68081;
        futhark_mc_task_74160.free_mem_68084 = mem_68084;
        
        struct scheduler_segop futhark_mc_task_74160_task;
        
        futhark_mc_task_74160_task.args = &futhark_mc_task_74160;
        futhark_mc_task_74160_task.top_level_fn = futhark_mc_segmap_task_74161;
        futhark_mc_task_74160_task.name = "futhark_mc_segmap_task_74161";
        futhark_mc_task_74160_task.iterations = n_62364;
        futhark_mc_task_74160_task.task_time =
            &ctx->futhark_mc_segmap_task_74161_total_time;
        futhark_mc_task_74160_task.task_iter =
            &ctx->futhark_mc_segmap_task_74161_total_iter;
        futhark_mc_task_74160_task.sched = STATIC;
        futhark_mc_task_74160_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74161_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74160_task);
        
        if (futhark_mc_segmap_task_74161_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65802 = (int64_t) 0;
        int32_t num_tasks_72482;
        struct futhark_mc_task_74164 futhark_mc_task_74164;
        
        futhark_mc_task_74164.ctx = ctx;
        futhark_mc_task_74164.free_q_62366 = q_62366;
        futhark_mc_task_74164.free_last_res_65971 = last_res_65971;
        futhark_mc_task_74164.free_mem_68087 = mem_68087;
        
        struct scheduler_segop futhark_mc_task_74164_task;
        
        futhark_mc_task_74164_task.args = &futhark_mc_task_74164;
        futhark_mc_task_74164_task.top_level_fn = futhark_mc_segmap_task_74165;
        futhark_mc_task_74164_task.name = "futhark_mc_segmap_task_74165";
        futhark_mc_task_74164_task.iterations = q_62366;
        futhark_mc_task_74164_task.task_time =
            &ctx->futhark_mc_segmap_task_74165_total_time;
        futhark_mc_task_74164_task.task_iter =
            &ctx->futhark_mc_segmap_task_74165_total_iter;
        futhark_mc_task_74164_task.sched = STATIC;
        futhark_mc_task_74164_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74165_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74164_task);
        
        if (futhark_mc_segmap_task_74165_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65804 = (int64_t) 0;
        int32_t num_tasks_72486;
        int64_t flat_tid_65806 = (int64_t) 0;
        struct futhark_mc_task_74168 futhark_mc_task_74168;
        
        futhark_mc_task_74168.ctx = ctx;
        futhark_mc_task_74168.free_n_62364 = n_62364;
        futhark_mc_task_74168.free_q_62366 = q_62366;
        futhark_mc_task_74168.free_jump_62368 = jump_62368;
        futhark_mc_task_74168.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74168.free_i_62378 = i_62378;
        futhark_mc_task_74168.free_x_62379 = x_62379;
        futhark_mc_task_74168.free_min_res_62384 = min_res_62384;
        futhark_mc_task_74168.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_74168.free_last_res_65971 = last_res_65971;
        futhark_mc_task_74168.free_min_arg_65983 = min_arg_65983;
        futhark_mc_task_74168.free_min_arg_65984 = min_arg_65984;
        futhark_mc_task_74168.free_max_res_65988 = max_res_65988;
        futhark_mc_task_74168.free_mem_68075 = mem_68075;
        futhark_mc_task_74168.free_mem_68078 = mem_68078;
        futhark_mc_task_74168.free_mem_68081 = mem_68081;
        futhark_mc_task_74168.free_mem_68084 = mem_68084;
        futhark_mc_task_74168.free_bytes_68085 = bytes_68085;
        futhark_mc_task_74168.free_mem_68087 = mem_68087;
        futhark_mc_task_74168.free_mem_68126 = mem_68126;
        futhark_mc_task_74168.free_mem_68129 = mem_68129;
        
        struct scheduler_segop futhark_mc_task_74168_task;
        
        futhark_mc_task_74168_task.args = &futhark_mc_task_74168;
        futhark_mc_task_74168_task.top_level_fn = futhark_mc_segmap_task_74169;
        futhark_mc_task_74168_task.name = "futhark_mc_segmap_task_74169";
        futhark_mc_task_74168_task.iterations = n_m_62372;
        futhark_mc_task_74168_task.task_time =
            &ctx->futhark_mc_segmap_task_74169_total_time;
        futhark_mc_task_74168_task.task_iter =
            &ctx->futhark_mc_segmap_task_74169_total_iter;
        futhark_mc_task_74168_task.sched = DYNAMIC;
        futhark_mc_task_74168_task.nested_fn =
            futhark_mc_segmap_nested_task_74174;
        
        int futhark_mc_segmap_task_74169_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74168_task);
        
        if (futhark_mc_segmap_task_74169_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68283.mem + gtid_65795 * n_m_62372 * (int64_t) 4,
                mem_68126 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_68287.mem + gtid_65795 * n_m_62372 * (int64_t) 4,
                mem_68129 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68072);
    free(mem_68075);
    free(mem_68078);
    free(mem_68081);
    free(mem_68084);
    free(mem_68087);
    free(mem_68126);
    free(mem_68129);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74140_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74140_end -
                 futhark_mc_segmap_parloop_74140_start;
        
        ctx->futhark_mc_segmap_parloop_74140_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74140_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74140_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74138(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65794 = tid;
    int num_tasks_71916 = info.nsubtasks;
    struct futhark_mc_task_74124 *futhark_mc_task_74124 =
                                 (struct futhark_mc_task_74124 *) args;
    struct futhark_context *ctx = futhark_mc_task_74124->ctx;
    uint64_t futhark_mc_segmap_nested_task_74138_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74138_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74124->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74124->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74124->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74124->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74124->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74124->free_i_62378;
    bool x_62379 = futhark_mc_task_74124->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74124->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74124->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74124->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74124->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68070 = futhark_mc_task_74124->free_bytes_68070;
    int64_t bytes_68073 = futhark_mc_task_74124->free_bytes_68073;
    int64_t bytes_68085 = futhark_mc_task_74124->free_bytes_68085;
    int64_t bytes_68124 = futhark_mc_task_74124->free_bytes_68124;
    struct memblock mem_68283 = {.desc ="mem_68283", .mem =
                                 futhark_mc_task_74124->free_mem_68283, .size =
                                 0, .references =NULL};
    struct memblock mem_68287 = {.desc ="mem_68287", .mem =
                                 futhark_mc_task_74124->free_mem_68287, .size =
                                 0, .references =NULL};
    int64_t iter_72134;
    struct futhark_mc_segmap_parloop_struct_74139
    futhark_mc_segmap_parloop_struct_74139;
    
    futhark_mc_segmap_parloop_struct_74139.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74139.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74139.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74139.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74139.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74139.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74139.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74139.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74139.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74139.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74139.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74139.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74139.free_bytes_68070 = bytes_68070;
    futhark_mc_segmap_parloop_struct_74139.free_bytes_68073 = bytes_68073;
    futhark_mc_segmap_parloop_struct_74139.free_bytes_68085 = bytes_68085;
    futhark_mc_segmap_parloop_struct_74139.free_bytes_68124 = bytes_68124;
    futhark_mc_segmap_parloop_struct_74139.free_mem_68283 = mem_68283.mem;
    futhark_mc_segmap_parloop_struct_74139.free_mem_68287 = mem_68287.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74140_task;
    
    futhark_mc_segmap_parloop_74140_task.name =
        "futhark_mc_segmap_parloop_74140";
    futhark_mc_segmap_parloop_74140_task.fn = futhark_mc_segmap_parloop_74140;
    futhark_mc_segmap_parloop_74140_task.args =
        &futhark_mc_segmap_parloop_struct_74139;
    futhark_mc_segmap_parloop_74140_task.iterations = iterations;
    futhark_mc_segmap_parloop_74140_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74140_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74140_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74140_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74140_task);
    
    if (futhark_mc_segmap_parloop_74140_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74140_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74140_total_end -
                 futhark_mc_segmap_parloop_74140_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74140_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74140_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74140_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74138_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74138_end -
                 futhark_mc_segmap_nested_task_74138_start;
        
        ctx->futhark_mc_segmap_nested_task_74138_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74138_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74138_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74192 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68288;
    int64_t free_bytes_68291;
    int64_t free_bytes_68303;
    int64_t free_bytes_68378;
    char *free_mem_68567;
    char *free_mem_68571;
};
struct futhark_mc_segmap_parloop_struct_74194 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68288;
    int64_t free_bytes_68291;
    int64_t free_bytes_68303;
    int64_t free_bytes_68378;
    char *free_mem_68567;
    char *free_mem_68571;
};
static int futhark_mc_segmap_parloop_74195(void *args, int64_t start,
                                           int64_t end, int flat_tid_66300,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74194
    *futhark_mc_segmap_parloop_struct_74194 =
    (struct futhark_mc_segmap_parloop_struct_74194 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74194->ctx;
    uint64_t futhark_mc_segmap_parloop_74195_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74195_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74194->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74194->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74194->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74194->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74194->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74194->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74194->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74194->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74194->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74194->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74194->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68288 =
            futhark_mc_segmap_parloop_struct_74194->free_bytes_68288;
    int64_t bytes_68291 =
            futhark_mc_segmap_parloop_struct_74194->free_bytes_68291;
    int64_t bytes_68303 =
            futhark_mc_segmap_parloop_struct_74194->free_bytes_68303;
    int64_t bytes_68378 =
            futhark_mc_segmap_parloop_struct_74194->free_bytes_68378;
    struct memblock mem_68567 = {.desc ="mem_68567", .mem =
                                 futhark_mc_segmap_parloop_struct_74194->free_mem_68567,
                                 .size =0, .references =NULL};
    struct memblock mem_68571 = {.desc ="mem_68571", .mem =
                                 futhark_mc_segmap_parloop_struct_74194->free_mem_68571,
                                 .size =0, .references =NULL};
    size_t mem_68386_cached_sizze_74196 = 0;
    char *mem_68386 = NULL;
    size_t mem_68401_cached_sizze_74197 = 0;
    char *mem_68401 = NULL;
    size_t mem_68404_cached_sizze_74198 = 0;
    char *mem_68404 = NULL;
    size_t mem_68431_cached_sizze_74199 = 0;
    char *mem_68431 = NULL;
    size_t mem_68434_cached_sizze_74200 = 0;
    char *mem_68434 = NULL;
    size_t mem_68461_cached_sizze_74201 = 0;
    char *mem_68461 = NULL;
    size_t mem_68476_cached_sizze_74202 = 0;
    char *mem_68476 = NULL;
    size_t mem_68479_cached_sizze_74203 = 0;
    char *mem_68479 = NULL;
    size_t mem_68496_cached_sizze_74204 = 0;
    char *mem_68496 = NULL;
    size_t mem_68499_cached_sizze_74205 = 0;
    char *mem_68499 = NULL;
    size_t mem_68526_cached_sizze_74206 = 0;
    char *mem_68526 = NULL;
    size_t mem_68529_cached_sizze_74207 = 0;
    char *mem_68529 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72754 = start;
    
    if (mem_68386_cached_sizze_74196 < (size_t) bytes_68288) {
        mem_68386 = realloc(mem_68386, bytes_68288);
        mem_68386_cached_sizze_74196 = bytes_68288;
    }
    if (mem_68401_cached_sizze_74197 < (size_t) bytes_68291) {
        mem_68401 = realloc(mem_68401, bytes_68291);
        mem_68401_cached_sizze_74197 = bytes_68291;
    }
    if (mem_68404_cached_sizze_74198 < (size_t) bytes_68288) {
        mem_68404 = realloc(mem_68404, bytes_68288);
        mem_68404_cached_sizze_74198 = bytes_68288;
    }
    if (mem_68431_cached_sizze_74199 < (size_t) bytes_68291) {
        mem_68431 = realloc(mem_68431, bytes_68291);
        mem_68431_cached_sizze_74199 = bytes_68291;
    }
    if (mem_68434_cached_sizze_74200 < (size_t) bytes_68288) {
        mem_68434 = realloc(mem_68434, bytes_68288);
        mem_68434_cached_sizze_74200 = bytes_68288;
    }
    if (mem_68461_cached_sizze_74201 < (size_t) bytes_68303) {
        mem_68461 = realloc(mem_68461, bytes_68303);
        mem_68461_cached_sizze_74201 = bytes_68303;
    }
    if (mem_68476_cached_sizze_74202 < (size_t) bytes_68378) {
        mem_68476 = realloc(mem_68476, bytes_68378);
        mem_68476_cached_sizze_74202 = bytes_68378;
    }
    if (mem_68479_cached_sizze_74203 < (size_t) bytes_68378) {
        mem_68479 = realloc(mem_68479, bytes_68378);
        mem_68479_cached_sizze_74203 = bytes_68378;
    }
    if (mem_68496_cached_sizze_74204 < (size_t) bytes_68303) {
        mem_68496 = realloc(mem_68496, bytes_68303);
        mem_68496_cached_sizze_74204 = bytes_68303;
    }
    if (mem_68499_cached_sizze_74205 < (size_t) bytes_68303) {
        mem_68499 = realloc(mem_68499, bytes_68303);
        mem_68499_cached_sizze_74205 = bytes_68303;
    }
    if (mem_68526_cached_sizze_74206 < (size_t) bytes_68303) {
        mem_68526 = realloc(mem_68526, bytes_68303);
        mem_68526_cached_sizze_74206 = bytes_68303;
    }
    if (mem_68529_cached_sizze_74207 < (size_t) bytes_68303) {
        mem_68529 = realloc(mem_68529, bytes_68303);
        mem_68529_cached_sizze_74207 = bytes_68303;
    }
    for (; iter_72754 < end; iter_72754++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72985 = m_62363;
        int64_t gtid_66301 = iter_72754;
        int64_t remnant_72986 = iter_72754 - gtid_66301;
        int64_t discard_67309;
        int64_t scanacc_72756 = (int64_t) 0;
        
        for (int64_t i_72755 = 0; i_72755 < n_62364; i_72755++) {
            float x_72758 = ((float *) Y_mem_67460.mem)[gtid_66301 * n_62364 +
                                                        i_72755];
            bool isnan_res_72759;
            
            isnan_res_72759 = futrts_isnan32(x_72758);
            
            bool defunc_0_p_res_72760 = !isnan_res_72759;
            int64_t defunc_0_f_res_72761 = btoi_bool_i64(defunc_0_p_res_72760);
            int64_t defunc_1_op_res_72762 = add64(defunc_0_f_res_72761,
                                                  scanacc_72756);
            
            ((int64_t *) mem_68386)[i_72755] = defunc_1_op_res_72762;
            
            int64_t scanacc_tmp_72987 = defunc_1_op_res_72762;
            
            scanacc_72756 = scanacc_tmp_72987;
        }
        discard_67309 = scanacc_72756;
        
        int64_t last_res_63443 = ((int64_t *) mem_68386)[i_62378];
        
        for (int64_t i_72989 = 0; i_72989 < n_62364; i_72989++) {
            ((float *) mem_68401)[i_72989] = 0.0F;
        }
        for (int64_t i_72990 = 0; i_72990 < n_62364; i_72990++) {
            ((int64_t *) mem_68404)[i_72990] = (int64_t) -1;
        }
        for (int64_t write_iter_72764 = 0; write_iter_72764 < n_62364;
             write_iter_72764++) {
            float write_iv_72767 = ((float *) Y_mem_67460.mem)[gtid_66301 *
                                                               n_62364 +
                                                               write_iter_72764];
            bool isnan_res_72768;
            
            isnan_res_72768 = futrts_isnan32(write_iv_72767);
            
            bool defunc_0_p_res_72769 = !isnan_res_72768;
            int64_t defunc_1_f_res_72770;
            
            if (defunc_0_p_res_72769) {
                int64_t write_iv_72771 =
                        ((int64_t *) mem_68386)[write_iter_72764];
                int64_t defunc_1_f_res_t_res_72772 = sub64(write_iv_72771,
                                                           (int64_t) 1);
                
                defunc_1_f_res_72770 = defunc_1_f_res_t_res_72772;
            } else {
                defunc_1_f_res_72770 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72770) &&
                slt64(defunc_1_f_res_72770, n_62364)) {
                ((int64_t *) mem_68404)[defunc_1_f_res_72770] =
                    write_iter_72764;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72770) &&
                slt64(defunc_1_f_res_72770, n_62364)) {
                memmove(mem_68401 + defunc_1_f_res_72770 * (int64_t) 4,
                        Y_mem_67460.mem + (gtid_66301 * n_62364 +
                                           write_iter_72764) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_63458 = sub64(last_res_63443, (int64_t) 1);
        int64_t min_arg_63459 = sub64(last_res_63443, min_res_62384);
        float i64_res_63460 = sitofp_i64_f32(last_res_63443);
        float x_63461 = i64_res_62390 - i64_res_63460;
        float max_arg_63462 = x_63461 / 2.0F;
        float max_res_63463 = fmax32(0.0F, max_arg_63462);
        
        for (int64_t i_72776 = 0; i_72776 < n_62364; i_72776++) {
            int64_t x_72779 = ((int64_t *) mem_68404)[i_72776];
            int64_t defunc_0_f_res_72780 = add64((int64_t) 1, x_72779);
            float defunc_0_f_res_72781 = sitofp_i64_f32(x_72779);
            
            ((float *) mem_68431)[i_72776] = defunc_0_f_res_72781;
            ((int64_t *) mem_68434)[i_72776] = defunc_0_f_res_72780;
        }
        for (int64_t i_72784 = 0; i_72784 < q_62366; i_72784++) {
            bool cond_72786 = sle64(last_res_63443, i_72784);
            float defunc_0_f_res_72787;
            
            if (cond_72786) {
                defunc_0_f_res_72787 = 0.0F;
            } else {
                defunc_0_f_res_72787 = 1.0F;
            }
            ((float *) mem_68461)[i_72784] = defunc_0_f_res_72787;
        }
        for (int64_t i_72789 = 0; i_72789 < n_m_62372; i_72789++) {
            int64_t min_arg_72792 = mul64(jump_62368, i_72789);
            int64_t min_res_72793 = smin64(i_62378, min_arg_72792);
            int64_t defunc_0_g_res_72794 = add64((int64_t) 1, min_res_72793);
            bool init_idx_72795;
            int64_t init_idx_72796;
            int64_t init_idx_72797;
            bool loop_while_72798;
            int64_t low_72799;
            int64_t high_72800;
            
            loop_while_72798 = x_62379;
            low_72799 = (int64_t) 0;
            high_72800 = i_62378;
            while (loop_while_72798) {
                int64_t x_72801 = add64(low_72799, high_72800);
                int64_t mid_72802 = sdiv64(x_72801, (int64_t) 2);
                bool x_72803 = sle64((int64_t) 0, mid_72802);
                bool y_72804 = slt64(mid_72802, n_62364);
                bool bounds_check_72805 = x_72803 && y_72804;
                bool index_certs_72806;
                
                if (!bounds_check_72805) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_72802,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t mid_id_72807 = ((int64_t *) mem_68434)[mid_72802];
                bool cond_72808 = slt64(mid_id_72807, (int64_t) 0);
                int64_t mid_idx_72809;
                
                if (cond_72808) {
                    mid_idx_72809 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_72809 = mid_id_72807;
                }
                
                bool cond_72810 = sle64(defunc_0_g_res_72794, mid_idx_72809);
                int64_t loopres_72811;
                int64_t loopres_72812;
                
                if (cond_72810) {
                    int64_t loopres_t_res_72813 = sub64(mid_72802, (int64_t) 1);
                    
                    loopres_72811 = low_72799;
                    loopres_72812 = loopres_t_res_72813;
                } else {
                    int64_t loopres_f_res_72814 = add64((int64_t) 1, mid_72802);
                    
                    loopres_72811 = loopres_f_res_72814;
                    loopres_72812 = high_72800;
                }
                
                bool loop_cond_72815 = sle64(loopres_72811, loopres_72812);
                bool loop_while_tmp_72998 = loop_cond_72815;
                int64_t low_tmp_72999 = loopres_72811;
                int64_t high_tmp_73000 = loopres_72812;
                
                loop_while_72798 = loop_while_tmp_72998;
                low_72799 = low_tmp_72999;
                high_72800 = high_tmp_73000;
            }
            init_idx_72795 = loop_while_72798;
            init_idx_72796 = low_72799;
            init_idx_72797 = high_72800;
            
            bool idx_72816;
            int64_t idx_72817;
            int64_t idx_72818;
            int64_t idx_72819;
            bool loop_while_72820;
            int64_t l_idx_72821;
            int64_t r_idx_72822;
            int64_t span_72823;
            
            loop_while_72820 = loop_cond_62389;
            l_idx_72821 = init_idx_72796;
            r_idx_72822 = init_idx_72796;
            span_72823 = (int64_t) 1;
            while (loop_while_72820) {
                int64_t max_arg_72824 = sub64(l_idx_72821, (int64_t) 1);
                int64_t max_res_72825 = smax64((int64_t) 0, max_arg_72824);
                int64_t min_arg_72826 = add64((int64_t) 1, r_idx_72822);
                int64_t min_res_72827 = smin64(min_arg_63458, min_arg_72826);
                bool x_72828 = sle64((int64_t) 0, max_res_72825);
                bool y_72829 = slt64(max_res_72825, n_62364);
                bool bounds_check_72830 = x_72828 && y_72829;
                bool index_certs_72831;
                
                if (!bounds_check_72830) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_72825,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_72832 = ((int64_t *) mem_68434)[max_res_72825];
                int64_t abs_arg_72833 = sub64(x_72832, defunc_0_g_res_72794);
                int64_t abs_res_72834 = abs64(abs_arg_72833);
                bool x_72835 = sle64((int64_t) 0, min_res_72827);
                bool y_72836 = slt64(min_res_72827, n_62364);
                bool bounds_check_72837 = x_72835 && y_72836;
                bool index_certs_72838;
                
                if (!bounds_check_72837) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72827,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62364, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                    return 1;
                }
                
                int64_t x_72839 = ((int64_t *) mem_68434)[min_res_72827];
                int64_t abs_arg_72840 = sub64(x_72839, defunc_0_g_res_72794);
                int64_t abs_res_72841 = abs64(abs_arg_72840);
                bool cond_72842 = max_res_72825 == l_idx_72821;
                int64_t loopres_72843;
                int64_t loopres_72844;
                int64_t loopres_72845;
                
                if (cond_72842) {
                    loopres_72843 = l_idx_72821;
                    loopres_72844 = r_idx_72822;
                    loopres_72845 = min_res_62384;
                } else {
                    bool cond_72846 = slt64(abs_res_72834, abs_res_72841);
                    bool cond_f_res_72847 = min_res_72827 == r_idx_72822;
                    bool x_72848 = !cond_72846;
                    bool y_72849 = cond_f_res_72847 && x_72848;
                    bool cond_72850 = cond_72846 || y_72849;
                    int64_t loopres_f_res_72851;
                    
                    if (cond_72850) {
                        loopres_f_res_72851 = max_res_72825;
                    } else {
                        loopres_f_res_72851 = l_idx_72821;
                    }
                    
                    int64_t loopres_f_res_72852;
                    
                    if (cond_72850) {
                        loopres_f_res_72852 = r_idx_72822;
                    } else {
                        loopres_f_res_72852 = min_res_72827;
                    }
                    
                    int64_t loopres_f_res_72853;
                    
                    if (cond_72850) {
                        int64_t loopres_f_res_t_res_72854 = add64((int64_t) 1,
                                                                  span_72823);
                        
                        loopres_f_res_72853 = loopres_f_res_t_res_72854;
                    } else {
                        int64_t loopres_f_res_f_res_72855 = add64((int64_t) 1,
                                                                  span_72823);
                        
                        loopres_f_res_72853 = loopres_f_res_f_res_72855;
                    }
                    loopres_72843 = loopres_f_res_72851;
                    loopres_72844 = loopres_f_res_72852;
                    loopres_72845 = loopres_f_res_72853;
                }
                
                bool loop_cond_72856 = slt64(loopres_72845, min_res_62384);
                bool loop_while_tmp_73001 = loop_cond_72856;
                int64_t l_idx_tmp_73002 = loopres_72843;
                int64_t r_idx_tmp_73003 = loopres_72844;
                int64_t span_tmp_73004 = loopres_72845;
                
                loop_while_72820 = loop_while_tmp_73001;
                l_idx_72821 = l_idx_tmp_73002;
                r_idx_72822 = r_idx_tmp_73003;
                span_72823 = span_tmp_73004;
            }
            idx_72816 = loop_while_72820;
            idx_72817 = l_idx_72821;
            idx_72818 = r_idx_72822;
            idx_72819 = span_72823;
            
            int64_t min_res_72857 = smin64(min_arg_63459, idx_72817);
            int64_t x_72858 = add64(min_res_62384, min_res_72857);
            int64_t r_72859 = sub64(x_72858, (int64_t) 1);
            bool x_72860 = sle64((int64_t) 0, r_72859);
            bool y_72861 = slt64(r_72859, n_62364);
            bool bounds_check_72862 = x_72860 && y_72861;
            bool index_certs_72863;
            
            if (!bounds_check_72862) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_72859,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72864 = ((int64_t *) mem_68404)[r_72859];
            int64_t abs_arg_72865 = sub64(x_72864, min_res_72793);
            int64_t abs_res_72866 = abs64(abs_arg_72865);
            bool x_72867 = sle64((int64_t) 0, min_res_72857);
            bool y_72868 = slt64(min_res_72857, n_62364);
            bool bounds_check_72869 = x_72867 && y_72868;
            bool index_certs_72870;
            
            if (!bounds_check_72869) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72857,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_72871 = ((int64_t *) mem_68404)[min_res_72857];
            int64_t abs_arg_72872 = sub64(x_72871, min_res_72793);
            int64_t abs_res_72873 = abs64(abs_arg_72872);
            int64_t max_res_72874 = smax64(abs_res_72866, abs_res_72873);
            float defunc_0_f_res_72875 = sitofp_i64_f32(max_res_72874);
            float defunc_1_f_res_72876 = max_res_63463 + defunc_0_f_res_72875;
            float defunc_0_f_res_72877 = sitofp_i64_f32(min_res_72793);
            
            for (int64_t i_72882 = 0; i_72882 < q_62366; i_72882++) {
                float x_72885 = ((float *) mem_68461)[i_72882];
                bool cond_72886 = sle64(last_res_63443, i_72882);
                float defunc_0_f_res_72887;
                
                if (cond_72886) {
                    defunc_0_f_res_72887 = 0.0F;
                } else {
                    int64_t i_72888 = add64(min_res_72857, i_72882);
                    float x_72889 = ((float *) mem_68431)[i_72888];
                    float defunc_0_f_res_f_res_72890 = 1.0F + x_72889;
                    
                    defunc_0_f_res_72887 = defunc_0_f_res_f_res_72890;
                }
                
                float x_j_72891 = defunc_0_f_res_72887 - defunc_0_f_res_72877;
                float abs_res_72892 = (float) fabs(x_j_72891);
                float tmp1_72893 = abs_res_72892 / defunc_1_f_res_72876;
                float x_72894 = tmp1_72893 * tmp1_72893;
                float y_72895 = tmp1_72893 * x_72894;
                float tmp2_72896 = 1.0F - y_72895;
                float x_72897 = tmp2_72896 * tmp2_72896;
                float tmp3_72898 = tmp2_72896 * x_72897;
                float tmp4_72899 = x_72885 * tmp3_72898;
                
                ((float *) mem_68496)[i_72882] = x_j_72891;
                ((float *) mem_68499)[i_72882] = tmp4_72899;
            }
            
            float defunc_2_reduce_res_72904;
            float defunc_2_reduce_res_72905;
            float defunc_2_reduce_res_72906;
            float defunc_2_reduce_res_72907;
            float defunc_2_reduce_res_72908;
            float redout_72912;
            float redout_72913;
            float redout_72914;
            float redout_72915;
            float redout_72916;
            
            redout_72912 = 0.0F;
            redout_72913 = 0.0F;
            redout_72914 = 0.0F;
            redout_72915 = 0.0F;
            redout_72916 = 0.0F;
            for (int64_t i_72911 = 0; i_72911 < q_62366; i_72911++) {
                float x_72919 = ((float *) mem_68496)[i_72911];
                float x_72920 = ((float *) mem_68499)[i_72911];
                float defunc_1_f_res_72921 = x_72919 * x_72920;
                float defunc_1_f_res_72922 = x_72919 * defunc_1_f_res_72921;
                float defunc_1_f_res_72923 = x_72919 * defunc_1_f_res_72922;
                float defunc_1_f_res_72924 = x_72919 * defunc_1_f_res_72923;
                float defunc_1_op_res_72925 = x_72920 + redout_72912;
                float defunc_1_op_res_72926 = defunc_1_f_res_72921 +
                      redout_72913;
                float defunc_1_op_res_72927 = defunc_1_f_res_72922 +
                      redout_72914;
                float defunc_1_op_res_72928 = defunc_1_f_res_72923 +
                      redout_72915;
                float defunc_1_op_res_72929 = defunc_1_f_res_72924 +
                      redout_72916;
                
                ((float *) mem_68526)[i_72911] = defunc_1_f_res_72922;
                ((float *) mem_68529)[i_72911] = defunc_1_f_res_72921;
                
                float redout_tmp_73007 = defunc_1_op_res_72925;
                float redout_tmp_73008 = defunc_1_op_res_72926;
                float redout_tmp_73009 = defunc_1_op_res_72927;
                float redout_tmp_73010 = defunc_1_op_res_72928;
                float redout_tmp_73011 = defunc_1_op_res_72929;
                
                redout_72912 = redout_tmp_73007;
                redout_72913 = redout_tmp_73008;
                redout_72914 = redout_tmp_73009;
                redout_72915 = redout_tmp_73010;
                redout_72916 = redout_tmp_73011;
            }
            defunc_2_reduce_res_72904 = redout_72912;
            defunc_2_reduce_res_72905 = redout_72913;
            defunc_2_reduce_res_72906 = redout_72914;
            defunc_2_reduce_res_72907 = redout_72915;
            defunc_2_reduce_res_72908 = redout_72916;
            
            float x_72932 = defunc_2_reduce_res_72906 *
                  defunc_2_reduce_res_72908;
            float y_72933 = defunc_2_reduce_res_72907 *
                  defunc_2_reduce_res_72907;
            float a12_72934 = x_72932 - y_72933;
            float x_72935 = defunc_2_reduce_res_72906 *
                  defunc_2_reduce_res_72907;
            float y_72936 = defunc_2_reduce_res_72905 *
                  defunc_2_reduce_res_72908;
            float b12_72937 = x_72935 - y_72936;
            float x_72938 = defunc_2_reduce_res_72905 *
                  defunc_2_reduce_res_72907;
            float y_72939 = defunc_2_reduce_res_72906 *
                  defunc_2_reduce_res_72906;
            float c12_72940 = x_72938 - y_72939;
            float x_72941 = defunc_2_reduce_res_72904 *
                  defunc_2_reduce_res_72908;
            float b2_72942 = x_72941 - y_72939;
            float x_72943 = defunc_2_reduce_res_72905 *
                  defunc_2_reduce_res_72906;
            float y_72944 = defunc_2_reduce_res_72904 *
                  defunc_2_reduce_res_72907;
            float c2_72945 = x_72943 - y_72944;
            float x_72946 = defunc_2_reduce_res_72904 * a12_72934;
            float y_72947 = defunc_2_reduce_res_72905 * b12_72937;
            float x_72948 = x_72946 + y_72947;
            float y_72949 = defunc_2_reduce_res_72906 * c12_72940;
            float y_72950 = x_72948 + y_72949;
            float det_72951 = 1.0F / y_72950;
            float a12_72952 = a12_72934 * det_72951;
            float b12_72953 = b12_72937 * det_72951;
            float c12_72954 = c12_72940 * det_72951;
            float b2_72955 = b2_72942 * det_72951;
            float c2_72956 = c2_72945 * det_72951;
            float defunc_2_reduce_res_72957;
            float defunc_2_reduce_res_72958;
            float redout_72960;
            float redout_72961;
            
            redout_72960 = 0.0F;
            redout_72961 = 0.0F;
            for (int64_t i_72959 = 0; i_72959 < q_62366; i_72959++) {
                float x_72962 = ((float *) mem_68499)[i_72959];
                float x_72963 = ((float *) mem_68529)[i_72959];
                float x_72964 = ((float *) mem_68526)[i_72959];
                bool cond_72965 = sle64(last_res_63443, i_72959);
                float defunc_0_f_res_72966;
                
                if (cond_72965) {
                    defunc_0_f_res_72966 = 0.0F;
                } else {
                    int64_t i_72967 = add64(min_res_72857, i_72959);
                    float x_72968 = ((float *) mem_68401)[i_72967];
                    
                    defunc_0_f_res_72966 = x_72968;
                }
                
                float x_72969 = a12_72952 * x_72962;
                float y_72970 = b12_72953 * x_72963;
                float x_72971 = x_72969 + y_72970;
                float y_72972 = c12_72954 * x_72964;
                float x_72973 = x_72971 + y_72972;
                float defunc_9_fit_fun_res_72974 = defunc_0_f_res_72966 *
                      x_72973;
                float x_72975 = b12_72953 * x_72962;
                float y_72976 = b2_72955 * x_72963;
                float x_72977 = x_72975 + y_72976;
                float y_72978 = c2_72956 * x_72964;
                float x_72979 = x_72977 + y_72978;
                float defunc_9_slope_fun_res_72980 = defunc_0_f_res_72966 *
                      x_72979;
                float defunc_1_op_res_72981 = defunc_9_fit_fun_res_72974 +
                      redout_72960;
                float defunc_1_op_res_72982 = defunc_9_slope_fun_res_72980 +
                      redout_72961;
                float redout_tmp_73014 = defunc_1_op_res_72981;
                float redout_tmp_73015 = defunc_1_op_res_72982;
                
                redout_72960 = redout_tmp_73014;
                redout_72961 = redout_tmp_73015;
            }
            defunc_2_reduce_res_72957 = redout_72960;
            defunc_2_reduce_res_72958 = redout_72961;
            ((float *) mem_68476)[i_72789] = defunc_2_reduce_res_72957;
            ((float *) mem_68479)[i_72789] = defunc_2_reduce_res_72958;
        }
        memmove(mem_68567.mem + gtid_66301 * n_m_62372 * (int64_t) 4,
                mem_68476 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_68571.mem + gtid_66301 * n_m_62372 * (int64_t) 4,
                mem_68479 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68386);
    free(mem_68401);
    free(mem_68404);
    free(mem_68431);
    free(mem_68434);
    free(mem_68461);
    free(mem_68476);
    free(mem_68479);
    free(mem_68496);
    free(mem_68499);
    free(mem_68526);
    free(mem_68529);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74195_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74195_end -
                 futhark_mc_segmap_parloop_74195_start;
        
        ctx->futhark_mc_segmap_parloop_74195_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74195_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74195_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74193(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66300 = tid;
    int num_tasks_72753 = info.nsubtasks;
    struct futhark_mc_task_74192 *futhark_mc_task_74192 =
                                 (struct futhark_mc_task_74192 *) args;
    struct futhark_context *ctx = futhark_mc_task_74192->ctx;
    uint64_t futhark_mc_segmap_task_74193_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74193_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74192->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74192->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74192->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74192->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74192->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74192->free_i_62378;
    bool x_62379 = futhark_mc_task_74192->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74192->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74192->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74192->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74192->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68288 = futhark_mc_task_74192->free_bytes_68288;
    int64_t bytes_68291 = futhark_mc_task_74192->free_bytes_68291;
    int64_t bytes_68303 = futhark_mc_task_74192->free_bytes_68303;
    int64_t bytes_68378 = futhark_mc_task_74192->free_bytes_68378;
    struct memblock mem_68567 = {.desc ="mem_68567", .mem =
                                 futhark_mc_task_74192->free_mem_68567, .size =
                                 0, .references =NULL};
    struct memblock mem_68571 = {.desc ="mem_68571", .mem =
                                 futhark_mc_task_74192->free_mem_68571, .size =
                                 0, .references =NULL};
    int64_t iter_72754;
    struct futhark_mc_segmap_parloop_struct_74194
    futhark_mc_segmap_parloop_struct_74194;
    
    futhark_mc_segmap_parloop_struct_74194.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74194.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74194.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74194.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74194.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74194.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74194.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74194.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74194.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74194.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74194.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74194.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74194.free_bytes_68288 = bytes_68288;
    futhark_mc_segmap_parloop_struct_74194.free_bytes_68291 = bytes_68291;
    futhark_mc_segmap_parloop_struct_74194.free_bytes_68303 = bytes_68303;
    futhark_mc_segmap_parloop_struct_74194.free_bytes_68378 = bytes_68378;
    futhark_mc_segmap_parloop_struct_74194.free_mem_68567 = mem_68567.mem;
    futhark_mc_segmap_parloop_struct_74194.free_mem_68571 = mem_68571.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74195_task;
    
    futhark_mc_segmap_parloop_74195_task.name =
        "futhark_mc_segmap_parloop_74195";
    futhark_mc_segmap_parloop_74195_task.fn = futhark_mc_segmap_parloop_74195;
    futhark_mc_segmap_parloop_74195_task.args =
        &futhark_mc_segmap_parloop_struct_74194;
    futhark_mc_segmap_parloop_74195_task.iterations = iterations;
    futhark_mc_segmap_parloop_74195_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74195_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74195_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74195_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74195_task);
    
    if (futhark_mc_segmap_parloop_74195_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74195_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74195_total_end -
                 futhark_mc_segmap_parloop_74195_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74195_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74195_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74195_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74193_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74193_end -
                 futhark_mc_segmap_task_74193_start;
        
        ctx->futhark_mc_segmap_task_74193_runs[tid]++;
        ctx->futhark_mc_segmap_task_74193_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74193_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74209 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    float free_i64_res_62390;
    char *free_Y_mem_67460;
    int64_t free_bytes_68288;
    int64_t free_bytes_68291;
    int64_t free_bytes_68303;
    int64_t free_bytes_68378;
    char *free_mem_68567;
    char *free_mem_68571;
};
struct futhark_mc_task_74219 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_66303;
    char *free_Y_mem_67460;
    char *free_mem_68290;
};
struct futhark_mc_scan_stage_1_parloop_struct_74222 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_66303;
    char *free_Y_mem_67460;
    char *free_mem_68290;
};
static int futhark_mc_scan_stage_1_parloop_74223(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66304, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74222
    *futhark_mc_scan_stage_1_parloop_struct_74222 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74222 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74222->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74223_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74223_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_1_parloop_struct_74222->free_n_62364;
    int64_t gtid_66303 =
            futhark_mc_scan_stage_1_parloop_struct_74222->free_gtid_66303;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74222->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68290 = {.desc ="mem_68290", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74222->free_mem_68290,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73420 = start;
    int64_t x_73017;
    int64_t x_73018;
    
    x_73017 = (int64_t) 0;
    for (; iter_73420 < end; iter_73420++) {
        int64_t gtid_66305 = iter_73420;
        
        // stage 1 scan body
        {
            float x_73020 = ((float *) Y_mem_67460.mem)[gtid_66303 * n_62364 +
                                                        gtid_66305];
            bool isnan_res_73021;
            
            isnan_res_73021 = futrts_isnan32(x_73020);
            
            bool defunc_0_p_res_73022 = !isnan_res_73021;
            int64_t defunc_0_f_res_73023 = btoi_bool_i64(defunc_0_p_res_73022);
            
            // write mapped values results to memory
            { }
            x_73017 = x_73017;
            // Read next values
            {
                x_73018 = defunc_0_f_res_73023;
            }
            
            int64_t defunc_1_op_res_73019 = add64(x_73017, x_73018);
            
            ((int64_t *) mem_68290.mem)[gtid_66305] = defunc_1_op_res_73019;
            x_73017 = defunc_1_op_res_73019;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74223_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74223_end -
                 futhark_mc_scan_stage_1_parloop_74223_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74223_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74223_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74223_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74224 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_66303;
    char *free_Y_mem_67460;
    char *free_mem_68290;
};
static int futhark_mc_scan_stage_3_parloop_74225(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66304, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74224
    *futhark_mc_scan_stage_3_parloop_struct_74224 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74224 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74224->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74225_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74225_start = get_wall_time();
    
    int64_t n_62364 =
            futhark_mc_scan_stage_3_parloop_struct_74224->free_n_62364;
    int64_t gtid_66303 =
            futhark_mc_scan_stage_3_parloop_struct_74224->free_gtid_66303;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74224->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68290 = {.desc ="mem_68290", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74224->free_mem_68290,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73432 = start;
    int64_t x_73429;
    int64_t x_73430;
    
    if (iter_73432 == (int64_t) 0) {
        x_73429 = (int64_t) 0;
    } else {
        x_73429 = ((int64_t *) mem_68290.mem)[iter_73432 - (int64_t) 1];
    }
    for (; iter_73432 < end; iter_73432++) {
        int64_t gtid_66305 = iter_73432;
        
        // stage 3 scan body
        {
            float x_73020 = ((float *) Y_mem_67460.mem)[gtid_66303 * n_62364 +
                                                        gtid_66305];
            bool isnan_res_73021;
            
            isnan_res_73021 = futrts_isnan32(x_73020);
            
            bool defunc_0_p_res_73022 = !isnan_res_73021;
            int64_t defunc_0_f_res_73023 = btoi_bool_i64(defunc_0_p_res_73022);
            
            x_73429 = x_73429;
            x_73430 = defunc_0_f_res_73023;
            
            int64_t defunc_1_op_res_73431 = add64(x_73429, x_73430);
            
            ((int64_t *) mem_68290.mem)[gtid_66305] = defunc_1_op_res_73431;
            x_73429 = defunc_1_op_res_73431;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74225_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74225_end -
                 futhark_mc_scan_stage_3_parloop_74225_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74225_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74225_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74225_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74220(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66304 = tid;
    int num_tasks_73419 = info.nsubtasks;
    struct futhark_mc_task_74219 *futhark_mc_task_74219 =
                                 (struct futhark_mc_task_74219 *) args;
    struct futhark_context *ctx = futhark_mc_task_74219->ctx;
    uint64_t futhark_mc_segscan_task_74220_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74220_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74219->free_n_62364;
    int64_t gtid_66303 = futhark_mc_task_74219->free_gtid_66303;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74219->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68290 = {.desc ="mem_68290", .mem =
                                 futhark_mc_task_74219->free_mem_68290, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_73426_cached_sizze_74221 = 0;
    char *scan_stage_2_accum_mem_73426 = NULL;
    int64_t iter_73420;
    struct futhark_mc_scan_stage_1_parloop_struct_74222
    futhark_mc_scan_stage_1_parloop_struct_74222;
    
    futhark_mc_scan_stage_1_parloop_struct_74222.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74222.free_n_62364 = n_62364;
    futhark_mc_scan_stage_1_parloop_struct_74222.free_gtid_66303 = gtid_66303;
    futhark_mc_scan_stage_1_parloop_struct_74222.free_Y_mem_67460 =
        Y_mem_67460.mem;
    futhark_mc_scan_stage_1_parloop_struct_74222.free_mem_68290 = mem_68290.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74223_task;
    
    futhark_mc_scan_stage_1_parloop_74223_task.name =
        "futhark_mc_scan_stage_1_parloop_74223";
    futhark_mc_scan_stage_1_parloop_74223_task.fn =
        futhark_mc_scan_stage_1_parloop_74223;
    futhark_mc_scan_stage_1_parloop_74223_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74222;
    futhark_mc_scan_stage_1_parloop_74223_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74223_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74223_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74223_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74223_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74223_task);
    
    if (futhark_mc_scan_stage_1_parloop_74223_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74223_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74223_total_end -
                 futhark_mc_scan_stage_1_parloop_74223_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74223_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74223_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74223_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_73419)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_73421;
        int64_t x_73422;
        int64_t offset_73424 = (int64_t) 0;
        int64_t offset_index_73425 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_73426_cached_sizze_74221 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_73426 = realloc(scan_stage_2_accum_mem_73426,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_73426_cached_sizze_74221 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_73426)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_73428 = 0; i_73428 < num_tasks_73419 - 1; i_73428++) {
            offset_73424 = squot64(n_62364, sext_i32_i64(num_tasks_73419));
            if (slt64(sext_i32_i64(i_73428), srem64(n_62364,
                                                    sext_i32_i64(num_tasks_73419)))) {
                offset_73424 += (int64_t) 1;
            }
            offset_index_73425 += offset_73424;
            
            int64_t gtid_66305 = offset_index_73425;
            float x_73020 = ((float *) Y_mem_67460.mem)[gtid_66303 * n_62364 +
                                                        gtid_66305];
            bool isnan_res_73021;
            
            isnan_res_73021 = futrts_isnan32(x_73020);
            
            bool defunc_0_p_res_73022 = !isnan_res_73021;
            int64_t defunc_0_f_res_73023 = btoi_bool_i64(defunc_0_p_res_73022);
            
            // Read carry in
            {
                x_73421 =
                    ((int64_t *) scan_stage_2_accum_mem_73426)[(int64_t) 0];
            }
            // Read next values
            {
                x_73422 = ((int64_t *) mem_68290.mem)[offset_index_73425 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_73423 = add64(x_73421, x_73422);
            
            ((int64_t *) mem_68290.mem)[offset_index_73425 - (int64_t) 1] =
                defunc_1_op_res_73423;
            ((int64_t *) scan_stage_2_accum_mem_73426)[(int64_t) 0] =
                defunc_1_op_res_73423;
        }
        
        int64_t iter_73432 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74224
        futhark_mc_scan_stage_3_parloop_struct_74224;
        
        futhark_mc_scan_stage_3_parloop_struct_74224.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74224.free_n_62364 = n_62364;
        futhark_mc_scan_stage_3_parloop_struct_74224.free_gtid_66303 =
            gtid_66303;
        futhark_mc_scan_stage_3_parloop_struct_74224.free_Y_mem_67460 =
            Y_mem_67460.mem;
        futhark_mc_scan_stage_3_parloop_struct_74224.free_mem_68290 =
            mem_68290.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74225_task;
        
        futhark_mc_scan_stage_3_parloop_74225_task.name =
            "futhark_mc_scan_stage_3_parloop_74225";
        futhark_mc_scan_stage_3_parloop_74225_task.fn =
            futhark_mc_scan_stage_3_parloop_74225;
        futhark_mc_scan_stage_3_parloop_74225_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74224;
        futhark_mc_scan_stage_3_parloop_74225_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74225_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74225_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74225_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74225_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74225_task);
        
        if (futhark_mc_scan_stage_3_parloop_74225_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74225_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74225_total_end -
                     futhark_mc_scan_stage_3_parloop_74225_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74225_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74225_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74225_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_73426);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74220_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74220_end -
                 futhark_mc_segscan_task_74220_start;
        
        ctx->futhark_mc_segscan_task_74220_runs[tid]++;
        ctx->futhark_mc_segscan_task_74220_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74220_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74226 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_66303;
    char *free_Y_mem_67460;
    char *free_mem_68290;
    char *free_mem_68293;
    char *free_mem_68296;
};
struct futhark_mc_segmap_parloop_struct_74228 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_gtid_66303;
    char *free_Y_mem_67460;
    char *free_mem_68290;
    char *free_mem_68293;
    char *free_mem_68296;
};
static int futhark_mc_segmap_parloop_74229(void *args, int64_t start,
                                           int64_t end, int flat_tid_66306,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74228
    *futhark_mc_segmap_parloop_struct_74228 =
    (struct futhark_mc_segmap_parloop_struct_74228 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74228->ctx;
    uint64_t futhark_mc_segmap_parloop_74229_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74229_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74228->free_n_62364;
    int64_t gtid_66303 =
            futhark_mc_segmap_parloop_struct_74228->free_gtid_66303;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74228->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68290 = {.desc ="mem_68290", .mem =
                                 futhark_mc_segmap_parloop_struct_74228->free_mem_68290,
                                 .size =0, .references =NULL};
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_segmap_parloop_struct_74228->free_mem_68293,
                                 .size =0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_segmap_parloop_struct_74228->free_mem_68296,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73436 = start;
    
    for (; iter_73436 < end; iter_73436++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73439 = n_62364;
        int64_t gtid_66307 = iter_73436;
        int64_t remnant_73440 = iter_73436 - gtid_66307;
        float x_73024 = ((float *) Y_mem_67460.mem)[gtid_66303 * n_62364 +
                                                    gtid_66307];
        bool isnan_res_73025;
        
        isnan_res_73025 = futrts_isnan32(x_73024);
        
        bool defunc_0_p_res_73026 = !isnan_res_73025;
        int64_t defunc_1_f_res_73027;
        
        if (defunc_0_p_res_73026) {
            int64_t x_73437 = ((int64_t *) mem_68290.mem)[gtid_66307];
            int64_t defunc_1_f_res_t_res_73438 = sub64(x_73437, (int64_t) 1);
            
            defunc_1_f_res_73027 = defunc_1_f_res_t_res_73438;
        } else {
            defunc_1_f_res_73027 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73027) &&
            slt64(defunc_1_f_res_73027, n_62364)) {
            ((int64_t *) mem_68296.mem)[defunc_1_f_res_73027] = gtid_66307;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73027) &&
            slt64(defunc_1_f_res_73027, n_62364)) {
            ((float *) mem_68293.mem)[defunc_1_f_res_73027] = x_73024;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74229_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74229_end -
                 futhark_mc_segmap_parloop_74229_start;
        
        ctx->futhark_mc_segmap_parloop_74229_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74229_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74229_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74227(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66306 = tid;
    int num_tasks_73435 = info.nsubtasks;
    struct futhark_mc_task_74226 *futhark_mc_task_74226 =
                                 (struct futhark_mc_task_74226 *) args;
    struct futhark_context *ctx = futhark_mc_task_74226->ctx;
    uint64_t futhark_mc_segmap_task_74227_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74227_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74226->free_n_62364;
    int64_t gtid_66303 = futhark_mc_task_74226->free_gtid_66303;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74226->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    struct memblock mem_68290 = {.desc ="mem_68290", .mem =
                                 futhark_mc_task_74226->free_mem_68290, .size =
                                 0, .references =NULL};
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_task_74226->free_mem_68293, .size =
                                 0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_task_74226->free_mem_68296, .size =
                                 0, .references =NULL};
    int64_t iter_73436;
    struct futhark_mc_segmap_parloop_struct_74228
    futhark_mc_segmap_parloop_struct_74228;
    
    futhark_mc_segmap_parloop_struct_74228.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74228.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74228.free_gtid_66303 = gtid_66303;
    futhark_mc_segmap_parloop_struct_74228.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74228.free_mem_68290 = mem_68290.mem;
    futhark_mc_segmap_parloop_struct_74228.free_mem_68293 = mem_68293.mem;
    futhark_mc_segmap_parloop_struct_74228.free_mem_68296 = mem_68296.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74229_task;
    
    futhark_mc_segmap_parloop_74229_task.name =
        "futhark_mc_segmap_parloop_74229";
    futhark_mc_segmap_parloop_74229_task.fn = futhark_mc_segmap_parloop_74229;
    futhark_mc_segmap_parloop_74229_task.args =
        &futhark_mc_segmap_parloop_struct_74228;
    futhark_mc_segmap_parloop_74229_task.iterations = iterations;
    futhark_mc_segmap_parloop_74229_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74229_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74229_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74229_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74229_task);
    
    if (futhark_mc_segmap_parloop_74229_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74229_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74229_total_end -
                 futhark_mc_segmap_parloop_74229_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74229_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74229_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74229_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74227_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74227_end -
                 futhark_mc_segmap_task_74227_start;
        
        ctx->futhark_mc_segmap_task_74227_runs[tid]++;
        ctx->futhark_mc_segmap_task_74227_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74227_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74230 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_68296;
    char *free_mem_68299;
    char *free_mem_68302;
};
struct futhark_mc_segmap_parloop_struct_74232 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    char *free_mem_68296;
    char *free_mem_68299;
    char *free_mem_68302;
};
static int futhark_mc_segmap_parloop_74233(void *args, int64_t start,
                                           int64_t end, int flat_tid_66308,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74232
    *futhark_mc_segmap_parloop_struct_74232 =
    (struct futhark_mc_segmap_parloop_struct_74232 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74232->ctx;
    uint64_t futhark_mc_segmap_parloop_74233_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74233_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74232->free_n_62364;
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_segmap_parloop_struct_74232->free_mem_68296,
                                 .size =0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_segmap_parloop_struct_74232->free_mem_68299,
                                 .size =0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_segmap_parloop_struct_74232->free_mem_68302,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73442 = start;
    
    for (; iter_73442 < end; iter_73442++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73443 = n_62364;
        int64_t gtid_66309 = iter_73442;
        int64_t remnant_73444 = iter_73442 - gtid_66309;
        int64_t x_73030 = ((int64_t *) mem_68296.mem)[gtid_66309];
        int64_t defunc_0_f_res_73031 = add64((int64_t) 1, x_73030);
        float defunc_0_f_res_73032 = sitofp_i64_f32(x_73030);
        
        ((float *) mem_68299.mem)[gtid_66309] = defunc_0_f_res_73032;
        ((int64_t *) mem_68302.mem)[gtid_66309] = defunc_0_f_res_73031;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74233_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74233_end -
                 futhark_mc_segmap_parloop_74233_start;
        
        ctx->futhark_mc_segmap_parloop_74233_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74233_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74233_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74231(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66308 = tid;
    int num_tasks_73441 = info.nsubtasks;
    struct futhark_mc_task_74230 *futhark_mc_task_74230 =
                                 (struct futhark_mc_task_74230 *) args;
    struct futhark_context *ctx = futhark_mc_task_74230->ctx;
    uint64_t futhark_mc_segmap_task_74231_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74231_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74230->free_n_62364;
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_task_74230->free_mem_68296, .size =
                                 0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_task_74230->free_mem_68299, .size =
                                 0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_task_74230->free_mem_68302, .size =
                                 0, .references =NULL};
    int64_t iter_73442;
    struct futhark_mc_segmap_parloop_struct_74232
    futhark_mc_segmap_parloop_struct_74232;
    
    futhark_mc_segmap_parloop_struct_74232.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74232.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74232.free_mem_68296 = mem_68296.mem;
    futhark_mc_segmap_parloop_struct_74232.free_mem_68299 = mem_68299.mem;
    futhark_mc_segmap_parloop_struct_74232.free_mem_68302 = mem_68302.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74233_task;
    
    futhark_mc_segmap_parloop_74233_task.name =
        "futhark_mc_segmap_parloop_74233";
    futhark_mc_segmap_parloop_74233_task.fn = futhark_mc_segmap_parloop_74233;
    futhark_mc_segmap_parloop_74233_task.args =
        &futhark_mc_segmap_parloop_struct_74232;
    futhark_mc_segmap_parloop_74233_task.iterations = iterations;
    futhark_mc_segmap_parloop_74233_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74233_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74233_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74233_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74233_task);
    
    if (futhark_mc_segmap_parloop_74233_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74233_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74233_total_end -
                 futhark_mc_segmap_parloop_74233_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74233_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74233_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74233_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74231_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74231_end -
                 futhark_mc_segmap_task_74231_start;
        
        ctx->futhark_mc_segmap_task_74231_runs[tid]++;
        ctx->futhark_mc_segmap_task_74231_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74231_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74234 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_66517;
    char *free_mem_68305;
};
struct futhark_mc_segmap_parloop_struct_74236 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_66517;
    char *free_mem_68305;
};
static int futhark_mc_segmap_parloop_74237(void *args, int64_t start,
                                           int64_t end, int flat_tid_66310,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74236
    *futhark_mc_segmap_parloop_struct_74236 =
    (struct futhark_mc_segmap_parloop_struct_74236 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74236->ctx;
    uint64_t futhark_mc_segmap_parloop_74237_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74237_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74236->free_q_62366;
    int64_t last_res_66517 =
            futhark_mc_segmap_parloop_struct_74236->free_last_res_66517;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_segmap_parloop_struct_74236->free_mem_68305,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73446 = start;
    
    for (; iter_73446 < end; iter_73446++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73447 = q_62366;
        int64_t gtid_66311 = iter_73446;
        int64_t remnant_73448 = iter_73446 - gtid_66311;
        bool cond_73033 = sle64(last_res_66517, gtid_66311);
        float defunc_0_f_res_73034;
        
        if (cond_73033) {
            defunc_0_f_res_73034 = 0.0F;
        } else {
            defunc_0_f_res_73034 = 1.0F;
        }
        ((float *) mem_68305.mem)[gtid_66311] = defunc_0_f_res_73034;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74237_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74237_end -
                 futhark_mc_segmap_parloop_74237_start;
        
        ctx->futhark_mc_segmap_parloop_74237_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74237_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74237_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74235(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66310 = tid;
    int num_tasks_73445 = info.nsubtasks;
    struct futhark_mc_task_74234 *futhark_mc_task_74234 =
                                 (struct futhark_mc_task_74234 *) args;
    struct futhark_context *ctx = futhark_mc_task_74234->ctx;
    uint64_t futhark_mc_segmap_task_74235_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74235_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_74234->free_q_62366;
    int64_t last_res_66517 = futhark_mc_task_74234->free_last_res_66517;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_task_74234->free_mem_68305, .size =
                                 0, .references =NULL};
    int64_t iter_73446;
    struct futhark_mc_segmap_parloop_struct_74236
    futhark_mc_segmap_parloop_struct_74236;
    
    futhark_mc_segmap_parloop_struct_74236.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74236.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74236.free_last_res_66517 = last_res_66517;
    futhark_mc_segmap_parloop_struct_74236.free_mem_68305 = mem_68305.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74237_task;
    
    futhark_mc_segmap_parloop_74237_task.name =
        "futhark_mc_segmap_parloop_74237";
    futhark_mc_segmap_parloop_74237_task.fn = futhark_mc_segmap_parloop_74237;
    futhark_mc_segmap_parloop_74237_task.args =
        &futhark_mc_segmap_parloop_struct_74236;
    futhark_mc_segmap_parloop_74237_task.iterations = iterations;
    futhark_mc_segmap_parloop_74237_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74237_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74237_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74237_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74237_task);
    
    if (futhark_mc_segmap_parloop_74237_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74237_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74237_total_end -
                 futhark_mc_segmap_parloop_74237_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74237_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74237_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74237_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74235_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74235_end -
                 futhark_mc_segmap_task_74235_start;
        
        ctx->futhark_mc_segmap_task_74235_runs[tid]++;
        ctx->futhark_mc_segmap_task_74235_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74235_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74238 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_66517;
    int64_t free_min_arg_66529;
    int64_t free_min_arg_66530;
    float free_max_res_66534;
    char *free_mem_68293;
    char *free_mem_68296;
    char *free_mem_68299;
    char *free_mem_68302;
    int64_t free_bytes_68303;
    char *free_mem_68305;
    char *free_mem_68380;
    char *free_mem_68383;
};
struct futhark_mc_segmap_parloop_struct_74240 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_66517;
    int64_t free_min_arg_66529;
    int64_t free_min_arg_66530;
    float free_max_res_66534;
    char *free_mem_68293;
    char *free_mem_68296;
    char *free_mem_68299;
    char *free_mem_68302;
    int64_t free_bytes_68303;
    char *free_mem_68305;
    char *free_mem_68380;
    char *free_mem_68383;
};
static int futhark_mc_segmap_parloop_74241(void *args, int64_t start,
                                           int64_t end, int flat_tid_66312,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74240
    *futhark_mc_segmap_parloop_struct_74240 =
    (struct futhark_mc_segmap_parloop_struct_74240 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74240->ctx;
    uint64_t futhark_mc_segmap_parloop_74241_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74241_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74240->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74240->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74240->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74240->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74240->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74240->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74240->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74240->free_loop_cond_62389;
    int64_t last_res_66517 =
            futhark_mc_segmap_parloop_struct_74240->free_last_res_66517;
    int64_t min_arg_66529 =
            futhark_mc_segmap_parloop_struct_74240->free_min_arg_66529;
    int64_t min_arg_66530 =
            futhark_mc_segmap_parloop_struct_74240->free_min_arg_66530;
    float max_res_66534 =
          futhark_mc_segmap_parloop_struct_74240->free_max_res_66534;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68293,
                                 .size =0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68296,
                                 .size =0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68299,
                                 .size =0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68302,
                                 .size =0, .references =NULL};
    int64_t bytes_68303 =
            futhark_mc_segmap_parloop_struct_74240->free_bytes_68303;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68305,
                                 .size =0, .references =NULL};
    struct memblock mem_68380 = {.desc ="mem_68380", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68380,
                                 .size =0, .references =NULL};
    struct memblock mem_68383 = {.desc ="mem_68383", .mem =
                                 futhark_mc_segmap_parloop_struct_74240->free_mem_68383,
                                 .size =0, .references =NULL};
    size_t mem_73308_cached_sizze_74242 = 0;
    char *mem_73308 = NULL;
    size_t mem_73310_cached_sizze_74243 = 0;
    char *mem_73310 = NULL;
    size_t mem_73334_cached_sizze_74244 = 0;
    char *mem_73334 = NULL;
    size_t mem_73336_cached_sizze_74245 = 0;
    char *mem_73336 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73450 = start;
    
    if (mem_73308_cached_sizze_74242 < (size_t) bytes_68303) {
        mem_73308 = realloc(mem_73308, bytes_68303);
        mem_73308_cached_sizze_74242 = bytes_68303;
    }
    if (mem_73310_cached_sizze_74243 < (size_t) bytes_68303) {
        mem_73310 = realloc(mem_73310, bytes_68303);
        mem_73310_cached_sizze_74243 = bytes_68303;
    }
    if (mem_73334_cached_sizze_74244 < (size_t) bytes_68303) {
        mem_73334 = realloc(mem_73334, bytes_68303);
        mem_73334_cached_sizze_74244 = bytes_68303;
    }
    if (mem_73336_cached_sizze_74245 < (size_t) bytes_68303) {
        mem_73336 = realloc(mem_73336, bytes_68303);
        mem_73336_cached_sizze_74245 = bytes_68303;
    }
    for (; iter_73450 < end; iter_73450++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73571 = n_m_62372;
        int64_t gtid_66313 = iter_73450;
        int64_t remnant_73572 = iter_73450 - gtid_66313;
        int64_t min_arg_73222 = mul64(jump_62368, gtid_66313);
        int64_t min_res_73223 = smin64(i_62378, min_arg_73222);
        int64_t defunc_0_g_res_73224 = add64((int64_t) 1, min_res_73223);
        bool init_idx_73225;
        int64_t init_idx_73226;
        int64_t init_idx_73227;
        bool loop_while_73451;
        int64_t low_73452;
        int64_t high_73453;
        
        loop_while_73451 = x_62379;
        low_73452 = (int64_t) 0;
        high_73453 = i_62378;
        while (loop_while_73451) {
            int64_t x_73454 = add64(low_73452, high_73453);
            int64_t mid_73455 = sdiv64(x_73454, (int64_t) 2);
            bool x_73456 = sle64((int64_t) 0, mid_73455);
            bool y_73457 = slt64(mid_73455, n_62364);
            bool bounds_check_73458 = x_73456 && y_73457;
            bool index_certs_73459;
            
            if (!bounds_check_73458) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73455,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_73460 = ((int64_t *) mem_68302.mem)[mid_73455];
            bool cond_73461 = slt64(mid_id_73460, (int64_t) 0);
            int64_t mid_idx_73462;
            
            if (cond_73461) {
                mid_idx_73462 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_73462 = mid_id_73460;
            }
            
            bool cond_73463 = sle64(defunc_0_g_res_73224, mid_idx_73462);
            int64_t loopres_73464;
            int64_t loopres_73465;
            
            if (cond_73463) {
                int64_t loopres_t_res_73466 = sub64(mid_73455, (int64_t) 1);
                
                loopres_73464 = low_73452;
                loopres_73465 = loopres_t_res_73466;
            } else {
                int64_t loopres_f_res_73467 = add64((int64_t) 1, mid_73455);
                
                loopres_73464 = loopres_f_res_73467;
                loopres_73465 = high_73453;
            }
            
            bool loop_cond_73468 = sle64(loopres_73464, loopres_73465);
            bool loop_while_tmp_73573 = loop_cond_73468;
            int64_t low_tmp_73574 = loopres_73464;
            int64_t high_tmp_73575 = loopres_73465;
            
            loop_while_73451 = loop_while_tmp_73573;
            low_73452 = low_tmp_73574;
            high_73453 = high_tmp_73575;
        }
        init_idx_73225 = loop_while_73451;
        init_idx_73226 = low_73452;
        init_idx_73227 = high_73453;
        
        bool idx_73246;
        int64_t idx_73247;
        int64_t idx_73248;
        int64_t idx_73249;
        bool loop_while_73469;
        int64_t l_idx_73470;
        int64_t r_idx_73471;
        int64_t span_73472;
        
        loop_while_73469 = loop_cond_62389;
        l_idx_73470 = init_idx_73226;
        r_idx_73471 = init_idx_73226;
        span_73472 = (int64_t) 1;
        while (loop_while_73469) {
            int64_t max_arg_73473 = sub64(l_idx_73470, (int64_t) 1);
            int64_t max_res_73474 = smax64((int64_t) 0, max_arg_73473);
            int64_t min_arg_73475 = add64((int64_t) 1, r_idx_73471);
            int64_t min_res_73476 = smin64(min_arg_66529, min_arg_73475);
            bool x_73477 = sle64((int64_t) 0, max_res_73474);
            bool y_73478 = slt64(max_res_73474, n_62364);
            bool bounds_check_73479 = x_73477 && y_73478;
            bool index_certs_73480;
            
            if (!bounds_check_73479) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73474,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_73481 = ((int64_t *) mem_68302.mem)[max_res_73474];
            int64_t abs_arg_73482 = sub64(x_73481, defunc_0_g_res_73224);
            int64_t abs_res_73483 = abs64(abs_arg_73482);
            bool x_73484 = sle64((int64_t) 0, min_res_73476);
            bool y_73485 = slt64(min_res_73476, n_62364);
            bool bounds_check_73486 = x_73484 && y_73485;
            bool index_certs_73487;
            
            if (!bounds_check_73486) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73476,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_73488 = ((int64_t *) mem_68302.mem)[min_res_73476];
            int64_t abs_arg_73489 = sub64(x_73488, defunc_0_g_res_73224);
            int64_t abs_res_73490 = abs64(abs_arg_73489);
            bool cond_73491 = max_res_73474 == l_idx_73470;
            int64_t loopres_73492;
            int64_t loopres_73493;
            int64_t loopres_73494;
            
            if (cond_73491) {
                loopres_73492 = l_idx_73470;
                loopres_73493 = r_idx_73471;
                loopres_73494 = min_res_62384;
            } else {
                bool cond_73495 = slt64(abs_res_73483, abs_res_73490);
                bool cond_f_res_73496 = min_res_73476 == r_idx_73471;
                bool x_73497 = !cond_73495;
                bool y_73498 = cond_f_res_73496 && x_73497;
                bool cond_73499 = cond_73495 || y_73498;
                int64_t loopres_f_res_73500;
                
                if (cond_73499) {
                    loopres_f_res_73500 = max_res_73474;
                } else {
                    loopres_f_res_73500 = l_idx_73470;
                }
                
                int64_t loopres_f_res_73501;
                
                if (cond_73499) {
                    loopres_f_res_73501 = r_idx_73471;
                } else {
                    loopres_f_res_73501 = min_res_73476;
                }
                
                int64_t loopres_f_res_73502;
                
                if (cond_73499) {
                    int64_t loopres_f_res_t_res_73503 = add64((int64_t) 1,
                                                              span_73472);
                    
                    loopres_f_res_73502 = loopres_f_res_t_res_73503;
                } else {
                    int64_t loopres_f_res_f_res_73504 = add64((int64_t) 1,
                                                              span_73472);
                    
                    loopres_f_res_73502 = loopres_f_res_f_res_73504;
                }
                loopres_73492 = loopres_f_res_73500;
                loopres_73493 = loopres_f_res_73501;
                loopres_73494 = loopres_f_res_73502;
            }
            
            bool loop_cond_73505 = slt64(loopres_73494, min_res_62384);
            bool loop_while_tmp_73576 = loop_cond_73505;
            int64_t l_idx_tmp_73577 = loopres_73492;
            int64_t r_idx_tmp_73578 = loopres_73493;
            int64_t span_tmp_73579 = loopres_73494;
            
            loop_while_73469 = loop_while_tmp_73576;
            l_idx_73470 = l_idx_tmp_73577;
            r_idx_73471 = r_idx_tmp_73578;
            span_73472 = span_tmp_73579;
        }
        idx_73246 = loop_while_73469;
        idx_73247 = l_idx_73470;
        idx_73248 = r_idx_73471;
        idx_73249 = span_73472;
        
        int64_t min_res_73287 = smin64(min_arg_66530, idx_73247);
        int64_t x_73288 = add64(min_res_62384, min_res_73287);
        int64_t r_73289 = sub64(x_73288, (int64_t) 1);
        bool x_73290 = sle64((int64_t) 0, r_73289);
        bool y_73291 = slt64(r_73289, n_62364);
        bool bounds_check_73292 = x_73290 && y_73291;
        bool index_certs_73293;
        
        if (!bounds_check_73292) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73289,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_73294 = ((int64_t *) mem_68296.mem)[r_73289];
        int64_t abs_arg_73295 = sub64(x_73294, min_res_73223);
        int64_t abs_res_73296 = abs64(abs_arg_73295);
        bool x_73297 = sle64((int64_t) 0, min_res_73287);
        bool y_73298 = slt64(min_res_73287, n_62364);
        bool bounds_check_73299 = x_73297 && y_73298;
        bool index_certs_73300;
        
        if (!bounds_check_73299) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73287,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_73301 = ((int64_t *) mem_68296.mem)[min_res_73287];
        int64_t abs_arg_73302 = sub64(x_73301, min_res_73223);
        int64_t abs_res_73303 = abs64(abs_arg_73302);
        int64_t max_res_73304 = smax64(abs_res_73296, abs_res_73303);
        float defunc_0_f_res_73305 = sitofp_i64_f32(max_res_73304);
        float defunc_1_f_res_73306 = max_res_66534 + defunc_0_f_res_73305;
        float defunc_0_f_res_73307 = sitofp_i64_f32(min_res_73223);
        
        for (int64_t i_73506 = 0; i_73506 < q_62366; i_73506++) {
            float x_73509 = ((float *) mem_68305.mem)[i_73506];
            bool cond_73510 = sle64(last_res_66517, i_73506);
            float defunc_0_f_res_73511;
            
            if (cond_73510) {
                defunc_0_f_res_73511 = 0.0F;
            } else {
                int64_t i_73512 = add64(min_res_73287, i_73506);
                float x_73513 = ((float *) mem_68299.mem)[i_73512];
                float defunc_0_f_res_f_res_73514 = 1.0F + x_73513;
                
                defunc_0_f_res_73511 = defunc_0_f_res_f_res_73514;
            }
            
            float x_j_73515 = defunc_0_f_res_73511 - defunc_0_f_res_73307;
            float abs_res_73516 = (float) fabs(x_j_73515);
            float tmp1_73517 = abs_res_73516 / defunc_1_f_res_73306;
            float x_73518 = tmp1_73517 * tmp1_73517;
            float y_73519 = tmp1_73517 * x_73518;
            float tmp2_73520 = 1.0F - y_73519;
            float x_73521 = tmp2_73520 * tmp2_73520;
            float tmp3_73522 = tmp2_73520 * x_73521;
            float tmp4_73523 = x_73509 * tmp3_73522;
            
            ((float *) mem_73308)[i_73506] = x_j_73515;
            ((float *) mem_73310)[i_73506] = tmp4_73523;
        }
        
        float defunc_2_reduce_res_73338;
        float defunc_2_reduce_res_73339;
        float defunc_2_reduce_res_73340;
        float defunc_2_reduce_res_73341;
        float defunc_2_reduce_res_73342;
        float redout_73527;
        float redout_73528;
        float redout_73529;
        float redout_73530;
        float redout_73531;
        
        redout_73527 = 0.0F;
        redout_73528 = 0.0F;
        redout_73529 = 0.0F;
        redout_73530 = 0.0F;
        redout_73531 = 0.0F;
        for (int64_t i_73526 = 0; i_73526 < q_62366; i_73526++) {
            float x_73534 = ((float *) mem_73308)[i_73526];
            float x_73535 = ((float *) mem_73310)[i_73526];
            float defunc_1_f_res_73536 = x_73534 * x_73535;
            float defunc_1_f_res_73537 = x_73534 * defunc_1_f_res_73536;
            float defunc_1_f_res_73538 = x_73534 * defunc_1_f_res_73537;
            float defunc_1_f_res_73539 = x_73534 * defunc_1_f_res_73538;
            float defunc_1_op_res_73540 = x_73535 + redout_73527;
            float defunc_1_op_res_73541 = defunc_1_f_res_73536 + redout_73528;
            float defunc_1_op_res_73542 = defunc_1_f_res_73537 + redout_73529;
            float defunc_1_op_res_73543 = defunc_1_f_res_73538 + redout_73530;
            float defunc_1_op_res_73544 = defunc_1_f_res_73539 + redout_73531;
            
            ((float *) mem_73334)[i_73526] = defunc_1_f_res_73537;
            ((float *) mem_73336)[i_73526] = defunc_1_f_res_73536;
            
            float redout_tmp_73582 = defunc_1_op_res_73540;
            float redout_tmp_73583 = defunc_1_op_res_73541;
            float redout_tmp_73584 = defunc_1_op_res_73542;
            float redout_tmp_73585 = defunc_1_op_res_73543;
            float redout_tmp_73586 = defunc_1_op_res_73544;
            
            redout_73527 = redout_tmp_73582;
            redout_73528 = redout_tmp_73583;
            redout_73529 = redout_tmp_73584;
            redout_73530 = redout_tmp_73585;
            redout_73531 = redout_tmp_73586;
        }
        defunc_2_reduce_res_73338 = redout_73527;
        defunc_2_reduce_res_73339 = redout_73528;
        defunc_2_reduce_res_73340 = redout_73529;
        defunc_2_reduce_res_73341 = redout_73530;
        defunc_2_reduce_res_73342 = redout_73531;
        
        float x_73366 = defunc_2_reduce_res_73340 * defunc_2_reduce_res_73342;
        float y_73367 = defunc_2_reduce_res_73341 * defunc_2_reduce_res_73341;
        float a12_73368 = x_73366 - y_73367;
        float x_73369 = defunc_2_reduce_res_73340 * defunc_2_reduce_res_73341;
        float y_73370 = defunc_2_reduce_res_73339 * defunc_2_reduce_res_73342;
        float b12_73371 = x_73369 - y_73370;
        float x_73372 = defunc_2_reduce_res_73339 * defunc_2_reduce_res_73341;
        float y_73373 = defunc_2_reduce_res_73340 * defunc_2_reduce_res_73340;
        float c12_73374 = x_73372 - y_73373;
        float x_73375 = defunc_2_reduce_res_73338 * defunc_2_reduce_res_73342;
        float b2_73376 = x_73375 - y_73373;
        float x_73377 = defunc_2_reduce_res_73339 * defunc_2_reduce_res_73340;
        float y_73378 = defunc_2_reduce_res_73338 * defunc_2_reduce_res_73341;
        float c2_73379 = x_73377 - y_73378;
        float x_73380 = defunc_2_reduce_res_73338 * a12_73368;
        float y_73381 = defunc_2_reduce_res_73339 * b12_73371;
        float x_73382 = x_73380 + y_73381;
        float y_73383 = defunc_2_reduce_res_73340 * c12_73374;
        float y_73384 = x_73382 + y_73383;
        float det_73385 = 1.0F / y_73384;
        float a12_73386 = a12_73368 * det_73385;
        float b12_73387 = b12_73371 * det_73385;
        float c12_73388 = c12_73374 * det_73385;
        float b2_73389 = b2_73376 * det_73385;
        float c2_73390 = c2_73379 * det_73385;
        float defunc_2_reduce_res_73391;
        float defunc_2_reduce_res_73392;
        float redout_73548;
        float redout_73549;
        
        redout_73548 = 0.0F;
        redout_73549 = 0.0F;
        for (int64_t i_73547 = 0; i_73547 < q_62366; i_73547++) {
            float x_73550 = ((float *) mem_73310)[i_73547];
            float x_73551 = ((float *) mem_73336)[i_73547];
            float x_73552 = ((float *) mem_73334)[i_73547];
            bool cond_73553 = sle64(last_res_66517, i_73547);
            float defunc_0_f_res_73554;
            
            if (cond_73553) {
                defunc_0_f_res_73554 = 0.0F;
            } else {
                int64_t i_73555 = add64(min_res_73287, i_73547);
                float x_73556 = ((float *) mem_68293.mem)[i_73555];
                
                defunc_0_f_res_73554 = x_73556;
            }
            
            float x_73557 = a12_73386 * x_73550;
            float y_73558 = b12_73387 * x_73551;
            float x_73559 = x_73557 + y_73558;
            float y_73560 = c12_73388 * x_73552;
            float x_73561 = x_73559 + y_73560;
            float defunc_9_fit_fun_res_73562 = defunc_0_f_res_73554 * x_73561;
            float x_73563 = b12_73387 * x_73550;
            float y_73564 = b2_73389 * x_73551;
            float x_73565 = x_73563 + y_73564;
            float y_73566 = c2_73390 * x_73552;
            float x_73567 = x_73565 + y_73566;
            float defunc_9_slope_fun_res_73568 = defunc_0_f_res_73554 * x_73567;
            float defunc_1_op_res_73569 = defunc_9_fit_fun_res_73562 +
                  redout_73548;
            float defunc_1_op_res_73570 = defunc_9_slope_fun_res_73568 +
                  redout_73549;
            float redout_tmp_73589 = defunc_1_op_res_73569;
            float redout_tmp_73590 = defunc_1_op_res_73570;
            
            redout_73548 = redout_tmp_73589;
            redout_73549 = redout_tmp_73590;
        }
        defunc_2_reduce_res_73391 = redout_73548;
        defunc_2_reduce_res_73392 = redout_73549;
        ((float *) mem_68380.mem)[gtid_66313] = defunc_2_reduce_res_73391;
        ((float *) mem_68383.mem)[gtid_66313] = defunc_2_reduce_res_73392;
    }
    
  cleanup:
    { }
    free(mem_73308);
    free(mem_73310);
    free(mem_73334);
    free(mem_73336);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74241_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74241_end -
                 futhark_mc_segmap_parloop_74241_start;
        
        ctx->futhark_mc_segmap_parloop_74241_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74241_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74241_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74239(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66312 = tid;
    int num_tasks_73449 = info.nsubtasks;
    struct futhark_mc_task_74238 *futhark_mc_task_74238 =
                                 (struct futhark_mc_task_74238 *) args;
    struct futhark_context *ctx = futhark_mc_task_74238->ctx;
    uint64_t futhark_mc_segmap_task_74239_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74239_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74238->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74238->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74238->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74238->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74238->free_i_62378;
    bool x_62379 = futhark_mc_task_74238->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74238->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74238->free_loop_cond_62389;
    int64_t last_res_66517 = futhark_mc_task_74238->free_last_res_66517;
    int64_t min_arg_66529 = futhark_mc_task_74238->free_min_arg_66529;
    int64_t min_arg_66530 = futhark_mc_task_74238->free_min_arg_66530;
    float max_res_66534 = futhark_mc_task_74238->free_max_res_66534;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_task_74238->free_mem_68293, .size =
                                 0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_task_74238->free_mem_68296, .size =
                                 0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_task_74238->free_mem_68299, .size =
                                 0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_task_74238->free_mem_68302, .size =
                                 0, .references =NULL};
    int64_t bytes_68303 = futhark_mc_task_74238->free_bytes_68303;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_task_74238->free_mem_68305, .size =
                                 0, .references =NULL};
    struct memblock mem_68380 = {.desc ="mem_68380", .mem =
                                 futhark_mc_task_74238->free_mem_68380, .size =
                                 0, .references =NULL};
    struct memblock mem_68383 = {.desc ="mem_68383", .mem =
                                 futhark_mc_task_74238->free_mem_68383, .size =
                                 0, .references =NULL};
    int64_t iter_73450;
    struct futhark_mc_segmap_parloop_struct_74240
    futhark_mc_segmap_parloop_struct_74240;
    
    futhark_mc_segmap_parloop_struct_74240.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74240.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74240.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74240.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74240.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74240.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74240.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74240.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74240.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74240.free_last_res_66517 = last_res_66517;
    futhark_mc_segmap_parloop_struct_74240.free_min_arg_66529 = min_arg_66529;
    futhark_mc_segmap_parloop_struct_74240.free_min_arg_66530 = min_arg_66530;
    futhark_mc_segmap_parloop_struct_74240.free_max_res_66534 = max_res_66534;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68293 = mem_68293.mem;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68296 = mem_68296.mem;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68299 = mem_68299.mem;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68302 = mem_68302.mem;
    futhark_mc_segmap_parloop_struct_74240.free_bytes_68303 = bytes_68303;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68305 = mem_68305.mem;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68380 = mem_68380.mem;
    futhark_mc_segmap_parloop_struct_74240.free_mem_68383 = mem_68383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74241_task;
    
    futhark_mc_segmap_parloop_74241_task.name =
        "futhark_mc_segmap_parloop_74241";
    futhark_mc_segmap_parloop_74241_task.fn = futhark_mc_segmap_parloop_74241;
    futhark_mc_segmap_parloop_74241_task.args =
        &futhark_mc_segmap_parloop_struct_74240;
    futhark_mc_segmap_parloop_74241_task.iterations = iterations;
    futhark_mc_segmap_parloop_74241_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74241_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74241_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74241_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74241_task);
    
    if (futhark_mc_segmap_parloop_74241_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74241_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74241_total_end -
                 futhark_mc_segmap_parloop_74241_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74241_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74241_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74241_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74239_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74239_end -
                 futhark_mc_segmap_task_74239_start;
        
        ctx->futhark_mc_segmap_task_74239_runs[tid]++;
        ctx->futhark_mc_segmap_task_74239_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74239_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74247 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_q_62366;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    bool free_x_62379;
    int64_t free_min_res_62384;
    bool free_loop_cond_62389;
    int64_t free_last_res_66517;
    int64_t free_min_arg_66529;
    int64_t free_min_arg_66530;
    float free_max_res_66534;
    char *free_mem_68293;
    char *free_mem_68296;
    char *free_mem_68299;
    char *free_mem_68302;
    int64_t free_bytes_68303;
    char *free_mem_68305;
    char *free_mem_68380;
    char *free_mem_68383;
};
struct futhark_mc_task_74253 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_66517;
    char *free_mem_68299;
    char *free_mem_68305;
    int64_t free_min_res_73100;
    float free_defunc_1_f_res_73119;
    float free_defunc_0_f_res_73120;
    char *free_mem_73121;
    char *free_mem_73122;
};
struct futhark_mc_segmap_parloop_struct_74255 {
    struct futhark_context *ctx;
    int64_t free_q_62366;
    int64_t free_last_res_66517;
    char *free_mem_68299;
    char *free_mem_68305;
    int64_t free_min_res_73100;
    float free_defunc_1_f_res_73119;
    float free_defunc_0_f_res_73120;
    char *free_mem_73121;
    char *free_mem_73122;
};
static int futhark_mc_segmap_parloop_74256(void *args, int64_t start,
                                           int64_t end, int flat_tid_66316,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74255
    *futhark_mc_segmap_parloop_struct_74255 =
    (struct futhark_mc_segmap_parloop_struct_74255 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74255->ctx;
    uint64_t futhark_mc_segmap_parloop_74256_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74256_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74255->free_q_62366;
    int64_t last_res_66517 =
            futhark_mc_segmap_parloop_struct_74255->free_last_res_66517;
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_segmap_parloop_struct_74255->free_mem_68299,
                                 .size =0, .references =NULL};
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_segmap_parloop_struct_74255->free_mem_68305,
                                 .size =0, .references =NULL};
    int64_t min_res_73100 =
            futhark_mc_segmap_parloop_struct_74255->free_min_res_73100;
    float defunc_1_f_res_73119 =
          futhark_mc_segmap_parloop_struct_74255->free_defunc_1_f_res_73119;
    float defunc_0_f_res_73120 =
          futhark_mc_segmap_parloop_struct_74255->free_defunc_0_f_res_73120;
    struct memblock mem_73121 = {.desc ="mem_73121", .mem =
                                 futhark_mc_segmap_parloop_struct_74255->free_mem_73121,
                                 .size =0, .references =NULL};
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_segmap_parloop_struct_74255->free_mem_73122,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73718 = start;
    
    for (; iter_73718 < end; iter_73718++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73722 = q_62366;
        int64_t gtid_66317 = iter_73718;
        int64_t remnant_73723 = iter_73718 - gtid_66317;
        float x_73647 = ((float *) mem_68305.mem)[gtid_66317];
        bool cond_73648 = sle64(last_res_66517, gtid_66317);
        float defunc_0_f_res_73649;
        
        if (cond_73648) {
            defunc_0_f_res_73649 = 0.0F;
        } else {
            int64_t i_73719 = add64(gtid_66317, min_res_73100);
            float x_73720 = ((float *) mem_68299.mem)[i_73719];
            float defunc_0_f_res_f_res_73721 = 1.0F + x_73720;
            
            defunc_0_f_res_73649 = defunc_0_f_res_f_res_73721;
        }
        
        float x_j_73653 = defunc_0_f_res_73649 - defunc_0_f_res_73120;
        float abs_res_73654 = (float) fabs(x_j_73653);
        float tmp1_73655 = abs_res_73654 / defunc_1_f_res_73119;
        float x_73656 = tmp1_73655 * tmp1_73655;
        float y_73657 = tmp1_73655 * x_73656;
        float tmp2_73658 = 1.0F - y_73657;
        float x_73659 = tmp2_73658 * tmp2_73658;
        float tmp3_73660 = tmp2_73658 * x_73659;
        float tmp4_73661 = x_73647 * tmp3_73660;
        
        ((float *) mem_73121.mem)[gtid_66317] = x_j_73653;
        ((float *) mem_73122.mem)[gtid_66317] = tmp4_73661;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74256_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74256_end -
                 futhark_mc_segmap_parloop_74256_start;
        
        ctx->futhark_mc_segmap_parloop_74256_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74256_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74256_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74254(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66316 = tid;
    int num_tasks_73717 = info.nsubtasks;
    struct futhark_mc_task_74253 *futhark_mc_task_74253 =
                                 (struct futhark_mc_task_74253 *) args;
    struct futhark_context *ctx = futhark_mc_task_74253->ctx;
    uint64_t futhark_mc_segmap_task_74254_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74254_start = get_wall_time();
    
    int64_t q_62366 = futhark_mc_task_74253->free_q_62366;
    int64_t last_res_66517 = futhark_mc_task_74253->free_last_res_66517;
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_task_74253->free_mem_68299, .size =
                                 0, .references =NULL};
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_task_74253->free_mem_68305, .size =
                                 0, .references =NULL};
    int64_t min_res_73100 = futhark_mc_task_74253->free_min_res_73100;
    float defunc_1_f_res_73119 =
          futhark_mc_task_74253->free_defunc_1_f_res_73119;
    float defunc_0_f_res_73120 =
          futhark_mc_task_74253->free_defunc_0_f_res_73120;
    struct memblock mem_73121 = {.desc ="mem_73121", .mem =
                                 futhark_mc_task_74253->free_mem_73121, .size =
                                 0, .references =NULL};
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_task_74253->free_mem_73122, .size =
                                 0, .references =NULL};
    int64_t iter_73718;
    struct futhark_mc_segmap_parloop_struct_74255
    futhark_mc_segmap_parloop_struct_74255;
    
    futhark_mc_segmap_parloop_struct_74255.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74255.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74255.free_last_res_66517 = last_res_66517;
    futhark_mc_segmap_parloop_struct_74255.free_mem_68299 = mem_68299.mem;
    futhark_mc_segmap_parloop_struct_74255.free_mem_68305 = mem_68305.mem;
    futhark_mc_segmap_parloop_struct_74255.free_min_res_73100 = min_res_73100;
    futhark_mc_segmap_parloop_struct_74255.free_defunc_1_f_res_73119 =
        defunc_1_f_res_73119;
    futhark_mc_segmap_parloop_struct_74255.free_defunc_0_f_res_73120 =
        defunc_0_f_res_73120;
    futhark_mc_segmap_parloop_struct_74255.free_mem_73121 = mem_73121.mem;
    futhark_mc_segmap_parloop_struct_74255.free_mem_73122 = mem_73122.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74256_task;
    
    futhark_mc_segmap_parloop_74256_task.name =
        "futhark_mc_segmap_parloop_74256";
    futhark_mc_segmap_parloop_74256_task.fn = futhark_mc_segmap_parloop_74256;
    futhark_mc_segmap_parloop_74256_task.args =
        &futhark_mc_segmap_parloop_struct_74255;
    futhark_mc_segmap_parloop_74256_task.iterations = iterations;
    futhark_mc_segmap_parloop_74256_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74256_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74256_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74256_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74256_task);
    
    if (futhark_mc_segmap_parloop_74256_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74256_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74256_total_end -
                 futhark_mc_segmap_parloop_74256_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74256_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74256_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74256_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74254_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74254_end -
                 futhark_mc_segmap_task_74254_start;
        
        ctx->futhark_mc_segmap_task_74254_runs[tid]++;
        ctx->futhark_mc_segmap_task_74254_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74254_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74257 {
    struct futhark_context *ctx;
    char *free_mem_73121;
    char *free_mem_73122;
    float *retval_defunc_2_reduce_res_73142;
    float *retval_defunc_2_reduce_res_73143;
    float *retval_defunc_2_reduce_res_73144;
    float *retval_defunc_2_reduce_res_73145;
    float *retval_defunc_2_reduce_res_73146;
    char *retval_mem_73140;
    char *retval_mem_73141;
};
struct futhark_mc_segred_stage_1_parloop_struct_74264 {
    struct futhark_context *ctx;
    char *free_mem_73121;
    char *free_mem_73122;
    char *free_mem_73140;
    char *free_mem_73141;
    char *free_reduce_stage_1_tid_res_arr_mem_73725;
    char *free_reduce_stage_1_tid_res_arr_mem_73727;
    char *free_reduce_stage_1_tid_res_arr_mem_73729;
    char *free_reduce_stage_1_tid_res_arr_mem_73731;
    char *free_reduce_stage_1_tid_res_arr_mem_73733;
};
static int futhark_mc_segred_stage_1_parloop_74265(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66318, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74264
    *futhark_mc_segred_stage_1_parloop_struct_74264 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74264 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74264->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74265_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74265_start = get_wall_time();
    
    struct memblock mem_73121 = {.desc ="mem_73121", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74264->free_mem_73121,
                                 .size =0, .references =NULL};
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74264->free_mem_73122,
                                 .size =0, .references =NULL};
    struct memblock mem_73140 = {.desc ="mem_73140", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74264->free_mem_73140,
                                 .size =0, .references =NULL};
    struct memblock mem_73141 = {.desc ="mem_73141", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74264->free_mem_73141,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73725 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73725",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74264->free_reduce_stage_1_tid_res_arr_mem_73725,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73727 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73727",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74264->free_reduce_stage_1_tid_res_arr_mem_73727,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73729 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73729",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74264->free_reduce_stage_1_tid_res_arr_mem_73729,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73731 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73731",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74264->free_reduce_stage_1_tid_res_arr_mem_73731,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73733 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73733",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74264->free_reduce_stage_1_tid_res_arr_mem_73733,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73735 = start;
    float x_73662;
    float x_73663;
    float x_73665;
    float x_73666;
    float x_73668;
    float x_73669;
    float x_73671;
    float x_73672;
    float x_73674;
    float x_73675;
    float local_acc_73736 = 0.0F;
    float local_acc_73737 = 0.0F;
    float local_acc_73738 = 0.0F;
    float local_acc_73739 = 0.0F;
    float local_acc_73740 = 0.0F;
    
    for (; iter_73735 < end; iter_73735++) {
        int64_t gtid_66319 = iter_73735;
        float x_73677 = ((float *) mem_73121.mem)[gtid_66319];
        float x_73678 = ((float *) mem_73122.mem)[gtid_66319];
        float defunc_1_f_res_73679 = x_73677 * x_73678;
        float defunc_1_f_res_73680 = x_73677 * defunc_1_f_res_73679;
        float defunc_1_f_res_73681 = x_73677 * defunc_1_f_res_73680;
        float defunc_1_f_res_73682 = x_73677 * defunc_1_f_res_73681;
        
        // save map-out results
        {
            ((float *) mem_73140.mem)[gtid_66319] = defunc_1_f_res_73680;
            ((float *) mem_73141.mem)[gtid_66319] = defunc_1_f_res_73679;
        }
        // Load accum params
        {
            x_73662 = local_acc_73736;
        }
        // Load next params
        {
            x_73663 = x_73678;
        }
        // Red body
        {
            float defunc_1_op_res_73664 = x_73662 + x_73663;
            
            local_acc_73736 = defunc_1_op_res_73664;
        }
        // Load accum params
        {
            x_73665 = local_acc_73737;
        }
        // Load next params
        {
            x_73666 = defunc_1_f_res_73679;
        }
        // Red body
        {
            float defunc_1_op_res_73667 = x_73665 + x_73666;
            
            local_acc_73737 = defunc_1_op_res_73667;
        }
        // Load accum params
        {
            x_73668 = local_acc_73738;
        }
        // Load next params
        {
            x_73669 = defunc_1_f_res_73680;
        }
        // Red body
        {
            float defunc_1_op_res_73670 = x_73668 + x_73669;
            
            local_acc_73738 = defunc_1_op_res_73670;
        }
        // Load accum params
        {
            x_73671 = local_acc_73739;
        }
        // Load next params
        {
            x_73672 = defunc_1_f_res_73681;
        }
        // Red body
        {
            float defunc_1_op_res_73673 = x_73671 + x_73672;
            
            local_acc_73739 = defunc_1_op_res_73673;
        }
        // Load accum params
        {
            x_73674 = local_acc_73740;
        }
        // Load next params
        {
            x_73675 = defunc_1_f_res_73682;
        }
        // Red body
        {
            float defunc_1_op_res_73676 = x_73674 + x_73675;
            
            local_acc_73740 = defunc_1_op_res_73676;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73725.mem)[flat_tid_66318] =
        local_acc_73736;
    ((float *) reduce_stage_1_tid_res_arr_mem_73727.mem)[flat_tid_66318] =
        local_acc_73737;
    ((float *) reduce_stage_1_tid_res_arr_mem_73729.mem)[flat_tid_66318] =
        local_acc_73738;
    ((float *) reduce_stage_1_tid_res_arr_mem_73731.mem)[flat_tid_66318] =
        local_acc_73739;
    ((float *) reduce_stage_1_tid_res_arr_mem_73733.mem)[flat_tid_66318] =
        local_acc_73740;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74265_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74265_end -
                 futhark_mc_segred_stage_1_parloop_74265_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74265_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74265_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74265_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74258(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66318 = tid;
    int num_tasks_73724 = info.nsubtasks;
    struct futhark_mc_task_74257 *futhark_mc_task_74257 =
                                 (struct futhark_mc_task_74257 *) args;
    struct futhark_context *ctx = futhark_mc_task_74257->ctx;
    uint64_t futhark_mc_segred_task_74258_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74258_start = get_wall_time();
    
    struct memblock mem_73121 = {.desc ="mem_73121", .mem =
                                 futhark_mc_task_74257->free_mem_73121, .size =
                                 0, .references =NULL};
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_task_74257->free_mem_73122, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_73142 =
          *futhark_mc_task_74257->retval_defunc_2_reduce_res_73142;
    float defunc_2_reduce_res_73143 =
          *futhark_mc_task_74257->retval_defunc_2_reduce_res_73143;
    float defunc_2_reduce_res_73144 =
          *futhark_mc_task_74257->retval_defunc_2_reduce_res_73144;
    float defunc_2_reduce_res_73145 =
          *futhark_mc_task_74257->retval_defunc_2_reduce_res_73145;
    float defunc_2_reduce_res_73146 =
          *futhark_mc_task_74257->retval_defunc_2_reduce_res_73146;
    struct memblock mem_73140 = {.desc ="mem_73140", .mem =
                                 futhark_mc_task_74257->retval_mem_73140,
                                 .size =0, .references =NULL};
    struct memblock mem_73141 = {.desc ="mem_73141", .mem =
                                 futhark_mc_task_74257->retval_mem_73141,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_73725_cached_sizze_74259 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73725 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73727_cached_sizze_74260 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73727 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73729_cached_sizze_74261 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73729 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73731_cached_sizze_74262 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73731 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73733_cached_sizze_74263 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73733 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73725_cached_sizze_74259 <
        (size_t) ((int64_t) 4 * num_tasks_73724)) {
        reduce_stage_1_tid_res_arr_mem_73725 =
            realloc(reduce_stage_1_tid_res_arr_mem_73725, (int64_t) 4 *
                    num_tasks_73724);
        reduce_stage_1_tid_res_arr_mem_73725_cached_sizze_74259 = (int64_t) 4 *
            num_tasks_73724;
    }
    if (reduce_stage_1_tid_res_arr_mem_73727_cached_sizze_74260 <
        (size_t) ((int64_t) 4 * num_tasks_73724)) {
        reduce_stage_1_tid_res_arr_mem_73727 =
            realloc(reduce_stage_1_tid_res_arr_mem_73727, (int64_t) 4 *
                    num_tasks_73724);
        reduce_stage_1_tid_res_arr_mem_73727_cached_sizze_74260 = (int64_t) 4 *
            num_tasks_73724;
    }
    if (reduce_stage_1_tid_res_arr_mem_73729_cached_sizze_74261 <
        (size_t) ((int64_t) 4 * num_tasks_73724)) {
        reduce_stage_1_tid_res_arr_mem_73729 =
            realloc(reduce_stage_1_tid_res_arr_mem_73729, (int64_t) 4 *
                    num_tasks_73724);
        reduce_stage_1_tid_res_arr_mem_73729_cached_sizze_74261 = (int64_t) 4 *
            num_tasks_73724;
    }
    if (reduce_stage_1_tid_res_arr_mem_73731_cached_sizze_74262 <
        (size_t) ((int64_t) 4 * num_tasks_73724)) {
        reduce_stage_1_tid_res_arr_mem_73731 =
            realloc(reduce_stage_1_tid_res_arr_mem_73731, (int64_t) 4 *
                    num_tasks_73724);
        reduce_stage_1_tid_res_arr_mem_73731_cached_sizze_74262 = (int64_t) 4 *
            num_tasks_73724;
    }
    if (reduce_stage_1_tid_res_arr_mem_73733_cached_sizze_74263 <
        (size_t) ((int64_t) 4 * num_tasks_73724)) {
        reduce_stage_1_tid_res_arr_mem_73733 =
            realloc(reduce_stage_1_tid_res_arr_mem_73733, (int64_t) 4 *
                    num_tasks_73724);
        reduce_stage_1_tid_res_arr_mem_73733_cached_sizze_74263 = (int64_t) 4 *
            num_tasks_73724;
    }
    
    int64_t iter_73735;
    struct futhark_mc_segred_stage_1_parloop_struct_74264
    futhark_mc_segred_stage_1_parloop_struct_74264;
    
    futhark_mc_segred_stage_1_parloop_struct_74264.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_mem_73121 =
        mem_73121.mem;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_mem_73122 =
        mem_73122.mem;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_mem_73140 =
        mem_73140.mem;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_mem_73141 =
        mem_73141.mem;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_reduce_stage_1_tid_res_arr_mem_73725 =
        reduce_stage_1_tid_res_arr_mem_73725;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_reduce_stage_1_tid_res_arr_mem_73727 =
        reduce_stage_1_tid_res_arr_mem_73727;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_reduce_stage_1_tid_res_arr_mem_73729 =
        reduce_stage_1_tid_res_arr_mem_73729;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_reduce_stage_1_tid_res_arr_mem_73731 =
        reduce_stage_1_tid_res_arr_mem_73731;
    futhark_mc_segred_stage_1_parloop_struct_74264.free_reduce_stage_1_tid_res_arr_mem_73733 =
        reduce_stage_1_tid_res_arr_mem_73733;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74265_task;
    
    futhark_mc_segred_stage_1_parloop_74265_task.name =
        "futhark_mc_segred_stage_1_parloop_74265";
    futhark_mc_segred_stage_1_parloop_74265_task.fn =
        futhark_mc_segred_stage_1_parloop_74265;
    futhark_mc_segred_stage_1_parloop_74265_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74264;
    futhark_mc_segred_stage_1_parloop_74265_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74265_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74265_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74265_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74265_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74265_task);
    
    if (futhark_mc_segred_stage_1_parloop_74265_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74265_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74265_total_end -
                 futhark_mc_segred_stage_1_parloop_74265_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74265_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74265_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74265_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73142 = 0.0F;
        defunc_2_reduce_res_73143 = 0.0F;
        defunc_2_reduce_res_73144 = 0.0F;
        defunc_2_reduce_res_73145 = 0.0F;
        defunc_2_reduce_res_73146 = 0.0F;
    }
    
    float x_73741;
    float x_73742;
    float x_73744;
    float x_73745;
    float x_73747;
    float x_73748;
    float x_73750;
    float x_73751;
    float x_73753;
    float x_73754;
    
    for (int32_t i_73756 = 0; i_73756 < num_tasks_73724; i_73756++) {
        flat_tid_66318 = i_73756;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73741 = defunc_2_reduce_res_73142;
            }
            // load next params
            {
                x_73742 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73725)[flat_tid_66318];
            }
            // red body
            {
                float defunc_1_op_res_73743 = x_73741 + x_73742;
                
                defunc_2_reduce_res_73142 = defunc_1_op_res_73743;
            }
            // load acc params
            {
                x_73744 = defunc_2_reduce_res_73143;
            }
            // load next params
            {
                x_73745 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73727)[flat_tid_66318];
            }
            // red body
            {
                float defunc_1_op_res_73746 = x_73744 + x_73745;
                
                defunc_2_reduce_res_73143 = defunc_1_op_res_73746;
            }
            // load acc params
            {
                x_73747 = defunc_2_reduce_res_73144;
            }
            // load next params
            {
                x_73748 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73729)[flat_tid_66318];
            }
            // red body
            {
                float defunc_1_op_res_73749 = x_73747 + x_73748;
                
                defunc_2_reduce_res_73144 = defunc_1_op_res_73749;
            }
            // load acc params
            {
                x_73750 = defunc_2_reduce_res_73145;
            }
            // load next params
            {
                x_73751 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73731)[flat_tid_66318];
            }
            // red body
            {
                float defunc_1_op_res_73752 = x_73750 + x_73751;
                
                defunc_2_reduce_res_73145 = defunc_1_op_res_73752;
            }
            // load acc params
            {
                x_73753 = defunc_2_reduce_res_73146;
            }
            // load next params
            {
                x_73754 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73733)[flat_tid_66318];
            }
            // red body
            {
                float defunc_1_op_res_73755 = x_73753 + x_73754;
                
                defunc_2_reduce_res_73146 = defunc_1_op_res_73755;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73725);
    free(reduce_stage_1_tid_res_arr_mem_73727);
    free(reduce_stage_1_tid_res_arr_mem_73729);
    free(reduce_stage_1_tid_res_arr_mem_73731);
    free(reduce_stage_1_tid_res_arr_mem_73733);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74258_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74258_end -
                 futhark_mc_segred_task_74258_start;
        
        ctx->futhark_mc_segred_task_74258_runs[tid]++;
        ctx->futhark_mc_segred_task_74258_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74258_iter[tid] += iterations;
    }
    *futhark_mc_task_74257->retval_defunc_2_reduce_res_73142 =
        defunc_2_reduce_res_73142;
    *futhark_mc_task_74257->retval_defunc_2_reduce_res_73143 =
        defunc_2_reduce_res_73143;
    *futhark_mc_task_74257->retval_defunc_2_reduce_res_73144 =
        defunc_2_reduce_res_73144;
    *futhark_mc_task_74257->retval_defunc_2_reduce_res_73145 =
        defunc_2_reduce_res_73145;
    *futhark_mc_task_74257->retval_defunc_2_reduce_res_73146 =
        defunc_2_reduce_res_73146;
    futhark_mc_task_74257->retval_mem_73140 = mem_73140.mem;
    futhark_mc_task_74257->retval_mem_73141 = mem_73141.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74266 {
    struct futhark_context *ctx;
    int64_t free_last_res_66517;
    char *free_mem_68293;
    int64_t free_min_res_73100;
    char *free_mem_73122;
    char *free_mem_73140;
    char *free_mem_73141;
    float free_a12_73190;
    float free_b12_73191;
    float free_c12_73192;
    float free_b2_73193;
    float free_c2_73194;
    float *retval_defunc_2_reduce_res_73195;
    float *retval_defunc_2_reduce_res_73196;
};
struct futhark_mc_segred_stage_1_parloop_struct_74270 {
    struct futhark_context *ctx;
    int64_t free_last_res_66517;
    char *free_mem_68293;
    int64_t free_min_res_73100;
    char *free_mem_73122;
    char *free_mem_73140;
    char *free_mem_73141;
    float free_a12_73190;
    float free_b12_73191;
    float free_c12_73192;
    float free_b2_73193;
    float free_c2_73194;
    char *free_reduce_stage_1_tid_res_arr_mem_73758;
    char *free_reduce_stage_1_tid_res_arr_mem_73760;
};
static int futhark_mc_segred_stage_1_parloop_74271(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66320, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74270
    *futhark_mc_segred_stage_1_parloop_struct_74270 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74270 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74270->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74271_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74271_start = get_wall_time();
    
    int64_t last_res_66517 =
            futhark_mc_segred_stage_1_parloop_struct_74270->free_last_res_66517;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74270->free_mem_68293,
                                 .size =0, .references =NULL};
    int64_t min_res_73100 =
            futhark_mc_segred_stage_1_parloop_struct_74270->free_min_res_73100;
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74270->free_mem_73122,
                                 .size =0, .references =NULL};
    struct memblock mem_73140 = {.desc ="mem_73140", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74270->free_mem_73140,
                                 .size =0, .references =NULL};
    struct memblock mem_73141 = {.desc ="mem_73141", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74270->free_mem_73141,
                                 .size =0, .references =NULL};
    float a12_73190 =
          futhark_mc_segred_stage_1_parloop_struct_74270->free_a12_73190;
    float b12_73191 =
          futhark_mc_segred_stage_1_parloop_struct_74270->free_b12_73191;
    float c12_73192 =
          futhark_mc_segred_stage_1_parloop_struct_74270->free_c12_73192;
    float b2_73193 =
          futhark_mc_segred_stage_1_parloop_struct_74270->free_b2_73193;
    float c2_73194 =
          futhark_mc_segred_stage_1_parloop_struct_74270->free_c2_73194;
    struct memblock reduce_stage_1_tid_res_arr_mem_73758 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73758",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74270->free_reduce_stage_1_tid_res_arr_mem_73758,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73760 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73760",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74270->free_reduce_stage_1_tid_res_arr_mem_73760,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73762 = start;
    float x_73683;
    float x_73684;
    float x_73686;
    float x_73687;
    float local_acc_73763 = 0.0F;
    float local_acc_73764 = 0.0F;
    
    for (; iter_73762 < end; iter_73762++) {
        int64_t gtid_66321 = iter_73762;
        float x_73689 = ((float *) mem_73122.mem)[gtid_66321];
        float x_73690 = ((float *) mem_73141.mem)[gtid_66321];
        float x_73691 = ((float *) mem_73140.mem)[gtid_66321];
        bool cond_73692 = sle64(last_res_66517, gtid_66321);
        float defunc_0_f_res_73693;
        
        if (cond_73692) {
            defunc_0_f_res_73693 = 0.0F;
        } else {
            int64_t i_73694 = add64(gtid_66321, min_res_73100);
            float x_73695 = ((float *) mem_68293.mem)[i_73694];
            
            defunc_0_f_res_73693 = x_73695;
        }
        
        float x_73696 = a12_73190 * x_73689;
        float y_73697 = b12_73191 * x_73690;
        float x_73698 = x_73696 + y_73697;
        float y_73699 = c12_73192 * x_73691;
        float x_73700 = x_73698 + y_73699;
        float defunc_9_fit_fun_res_73701 = defunc_0_f_res_73693 * x_73700;
        float x_73702 = b12_73191 * x_73689;
        float y_73703 = b2_73193 * x_73690;
        float x_73704 = x_73702 + y_73703;
        float y_73705 = c2_73194 * x_73691;
        float x_73706 = x_73704 + y_73705;
        float defunc_9_slope_fun_res_73707 = defunc_0_f_res_73693 * x_73706;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73683 = local_acc_73763;
        }
        // Load next params
        {
            x_73684 = defunc_9_fit_fun_res_73701;
        }
        // Red body
        {
            float defunc_1_op_res_73685 = x_73683 + x_73684;
            
            local_acc_73763 = defunc_1_op_res_73685;
        }
        // Load accum params
        {
            x_73686 = local_acc_73764;
        }
        // Load next params
        {
            x_73687 = defunc_9_slope_fun_res_73707;
        }
        // Red body
        {
            float defunc_1_op_res_73688 = x_73686 + x_73687;
            
            local_acc_73764 = defunc_1_op_res_73688;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73758.mem)[flat_tid_66320] =
        local_acc_73763;
    ((float *) reduce_stage_1_tid_res_arr_mem_73760.mem)[flat_tid_66320] =
        local_acc_73764;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74271_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74271_end -
                 futhark_mc_segred_stage_1_parloop_74271_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74271_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74271_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74271_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74267(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66320 = tid;
    int num_tasks_73757 = info.nsubtasks;
    struct futhark_mc_task_74266 *futhark_mc_task_74266 =
                                 (struct futhark_mc_task_74266 *) args;
    struct futhark_context *ctx = futhark_mc_task_74266->ctx;
    uint64_t futhark_mc_segred_task_74267_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74267_start = get_wall_time();
    
    int64_t last_res_66517 = futhark_mc_task_74266->free_last_res_66517;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_task_74266->free_mem_68293, .size =
                                 0, .references =NULL};
    int64_t min_res_73100 = futhark_mc_task_74266->free_min_res_73100;
    struct memblock mem_73122 = {.desc ="mem_73122", .mem =
                                 futhark_mc_task_74266->free_mem_73122, .size =
                                 0, .references =NULL};
    struct memblock mem_73140 = {.desc ="mem_73140", .mem =
                                 futhark_mc_task_74266->free_mem_73140, .size =
                                 0, .references =NULL};
    struct memblock mem_73141 = {.desc ="mem_73141", .mem =
                                 futhark_mc_task_74266->free_mem_73141, .size =
                                 0, .references =NULL};
    float a12_73190 = futhark_mc_task_74266->free_a12_73190;
    float b12_73191 = futhark_mc_task_74266->free_b12_73191;
    float c12_73192 = futhark_mc_task_74266->free_c12_73192;
    float b2_73193 = futhark_mc_task_74266->free_b2_73193;
    float c2_73194 = futhark_mc_task_74266->free_c2_73194;
    float defunc_2_reduce_res_73195 =
          *futhark_mc_task_74266->retval_defunc_2_reduce_res_73195;
    float defunc_2_reduce_res_73196 =
          *futhark_mc_task_74266->retval_defunc_2_reduce_res_73196;
    size_t reduce_stage_1_tid_res_arr_mem_73758_cached_sizze_74268 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73758 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73760_cached_sizze_74269 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73760 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73758_cached_sizze_74268 <
        (size_t) ((int64_t) 4 * num_tasks_73757)) {
        reduce_stage_1_tid_res_arr_mem_73758 =
            realloc(reduce_stage_1_tid_res_arr_mem_73758, (int64_t) 4 *
                    num_tasks_73757);
        reduce_stage_1_tid_res_arr_mem_73758_cached_sizze_74268 = (int64_t) 4 *
            num_tasks_73757;
    }
    if (reduce_stage_1_tid_res_arr_mem_73760_cached_sizze_74269 <
        (size_t) ((int64_t) 4 * num_tasks_73757)) {
        reduce_stage_1_tid_res_arr_mem_73760 =
            realloc(reduce_stage_1_tid_res_arr_mem_73760, (int64_t) 4 *
                    num_tasks_73757);
        reduce_stage_1_tid_res_arr_mem_73760_cached_sizze_74269 = (int64_t) 4 *
            num_tasks_73757;
    }
    
    int64_t iter_73762;
    struct futhark_mc_segred_stage_1_parloop_struct_74270
    futhark_mc_segred_stage_1_parloop_struct_74270;
    
    futhark_mc_segred_stage_1_parloop_struct_74270.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_last_res_66517 =
        last_res_66517;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_mem_68293 =
        mem_68293.mem;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_min_res_73100 =
        min_res_73100;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_mem_73122 =
        mem_73122.mem;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_mem_73140 =
        mem_73140.mem;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_mem_73141 =
        mem_73141.mem;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_a12_73190 = a12_73190;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_b12_73191 = b12_73191;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_c12_73192 = c12_73192;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_b2_73193 = b2_73193;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_c2_73194 = c2_73194;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_reduce_stage_1_tid_res_arr_mem_73758 =
        reduce_stage_1_tid_res_arr_mem_73758;
    futhark_mc_segred_stage_1_parloop_struct_74270.free_reduce_stage_1_tid_res_arr_mem_73760 =
        reduce_stage_1_tid_res_arr_mem_73760;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74271_task;
    
    futhark_mc_segred_stage_1_parloop_74271_task.name =
        "futhark_mc_segred_stage_1_parloop_74271";
    futhark_mc_segred_stage_1_parloop_74271_task.fn =
        futhark_mc_segred_stage_1_parloop_74271;
    futhark_mc_segred_stage_1_parloop_74271_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74270;
    futhark_mc_segred_stage_1_parloop_74271_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74271_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74271_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74271_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74271_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74271_task);
    
    if (futhark_mc_segred_stage_1_parloop_74271_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74271_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74271_total_end -
                 futhark_mc_segred_stage_1_parloop_74271_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74271_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74271_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74271_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73195 = 0.0F;
        defunc_2_reduce_res_73196 = 0.0F;
    }
    
    float x_73765;
    float x_73766;
    float x_73768;
    float x_73769;
    
    for (int32_t i_73771 = 0; i_73771 < num_tasks_73757; i_73771++) {
        flat_tid_66320 = i_73771;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73765 = defunc_2_reduce_res_73195;
            }
            // load next params
            {
                x_73766 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73758)[flat_tid_66320];
            }
            // red body
            {
                float defunc_1_op_res_73767 = x_73765 + x_73766;
                
                defunc_2_reduce_res_73195 = defunc_1_op_res_73767;
            }
            // load acc params
            {
                x_73768 = defunc_2_reduce_res_73196;
            }
            // load next params
            {
                x_73769 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73760)[flat_tid_66320];
            }
            // red body
            {
                float defunc_1_op_res_73770 = x_73768 + x_73769;
                
                defunc_2_reduce_res_73196 = defunc_1_op_res_73770;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73758);
    free(reduce_stage_1_tid_res_arr_mem_73760);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74267_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74267_end -
                 futhark_mc_segred_task_74267_start;
        
        ctx->futhark_mc_segred_task_74267_runs[tid]++;
        ctx->futhark_mc_segred_task_74267_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74267_iter[tid] += iterations;
    }
    *futhark_mc_task_74266->retval_defunc_2_reduce_res_73195 =
        defunc_2_reduce_res_73195;
    *futhark_mc_task_74266->retval_defunc_2_reduce_res_73196 =
        defunc_2_reduce_res_73196;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74248(void *args, int64_t start,
                                           int64_t end, int flat_tid_66314,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74247
    *futhark_mc_segmap_parloop_struct_74247 =
    (struct futhark_mc_segmap_parloop_struct_74247 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74247->ctx;
    uint64_t futhark_mc_segmap_parloop_74248_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74248_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74247->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74247->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74247->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74247->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74247->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74247->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74247->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74247->free_loop_cond_62389;
    int64_t last_res_66517 =
            futhark_mc_segmap_parloop_struct_74247->free_last_res_66517;
    int64_t min_arg_66529 =
            futhark_mc_segmap_parloop_struct_74247->free_min_arg_66529;
    int64_t min_arg_66530 =
            futhark_mc_segmap_parloop_struct_74247->free_min_arg_66530;
    float max_res_66534 =
          futhark_mc_segmap_parloop_struct_74247->free_max_res_66534;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68293,
                                 .size =0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68296,
                                 .size =0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68299,
                                 .size =0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68302,
                                 .size =0, .references =NULL};
    int64_t bytes_68303 =
            futhark_mc_segmap_parloop_struct_74247->free_bytes_68303;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68305,
                                 .size =0, .references =NULL};
    struct memblock mem_68380 = {.desc ="mem_68380", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68380,
                                 .size =0, .references =NULL};
    struct memblock mem_68383 = {.desc ="mem_68383", .mem =
                                 futhark_mc_segmap_parloop_struct_74247->free_mem_68383,
                                 .size =0, .references =NULL};
    size_t mem_73121_cached_sizze_74249 = 0;
    char *mem_73121 = NULL;
    size_t mem_73122_cached_sizze_74250 = 0;
    char *mem_73122 = NULL;
    size_t mem_73140_cached_sizze_74251 = 0;
    char *mem_73140 = NULL;
    size_t mem_73141_cached_sizze_74252 = 0;
    char *mem_73141 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73591 = start;
    
    if (mem_73121_cached_sizze_74249 < (size_t) bytes_68303) {
        mem_73121 = realloc(mem_73121, bytes_68303);
        mem_73121_cached_sizze_74249 = bytes_68303;
    }
    if (mem_73122_cached_sizze_74250 < (size_t) bytes_68303) {
        mem_73122 = realloc(mem_73122, bytes_68303);
        mem_73122_cached_sizze_74250 = bytes_68303;
    }
    if (mem_73140_cached_sizze_74251 < (size_t) bytes_68303) {
        mem_73140 = realloc(mem_73140, bytes_68303);
        mem_73140_cached_sizze_74251 = bytes_68303;
    }
    if (mem_73141_cached_sizze_74252 < (size_t) bytes_68303) {
        mem_73141 = realloc(mem_73141, bytes_68303);
        mem_73141_cached_sizze_74252 = bytes_68303;
    }
    for (; iter_73591 < end; iter_73591++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73708 = n_m_62372;
        int64_t gtid_66315 = iter_73591;
        int64_t remnant_73709 = iter_73591 - gtid_66315;
        int64_t min_arg_73035 = mul64(jump_62368, gtid_66315);
        int64_t min_res_73036 = smin64(i_62378, min_arg_73035);
        int64_t defunc_0_g_res_73037 = add64((int64_t) 1, min_res_73036);
        bool init_idx_73038;
        int64_t init_idx_73039;
        int64_t init_idx_73040;
        bool loop_while_73592;
        int64_t low_73593;
        int64_t high_73594;
        
        loop_while_73592 = x_62379;
        low_73593 = (int64_t) 0;
        high_73594 = i_62378;
        while (loop_while_73592) {
            int64_t x_73595 = add64(low_73593, high_73594);
            int64_t mid_73596 = sdiv64(x_73595, (int64_t) 2);
            bool x_73597 = sle64((int64_t) 0, mid_73596);
            bool y_73598 = slt64(mid_73596, n_62364);
            bool bounds_check_73599 = x_73597 && y_73598;
            bool index_certs_73600;
            
            if (!bounds_check_73599) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73596,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t mid_id_73601 = ((int64_t *) mem_68302.mem)[mid_73596];
            bool cond_73602 = slt64(mid_id_73601, (int64_t) 0);
            int64_t mid_idx_73603;
            
            if (cond_73602) {
                mid_idx_73603 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_73603 = mid_id_73601;
            }
            
            bool cond_73604 = sle64(defunc_0_g_res_73037, mid_idx_73603);
            int64_t loopres_73605;
            int64_t loopres_73606;
            
            if (cond_73604) {
                int64_t loopres_t_res_73607 = sub64(mid_73596, (int64_t) 1);
                
                loopres_73605 = low_73593;
                loopres_73606 = loopres_t_res_73607;
            } else {
                int64_t loopres_f_res_73608 = add64((int64_t) 1, mid_73596);
                
                loopres_73605 = loopres_f_res_73608;
                loopres_73606 = high_73594;
            }
            
            bool loop_cond_73609 = sle64(loopres_73605, loopres_73606);
            bool loop_while_tmp_73710 = loop_cond_73609;
            int64_t low_tmp_73711 = loopres_73605;
            int64_t high_tmp_73712 = loopres_73606;
            
            loop_while_73592 = loop_while_tmp_73710;
            low_73593 = low_tmp_73711;
            high_73594 = high_tmp_73712;
        }
        init_idx_73038 = loop_while_73592;
        init_idx_73039 = low_73593;
        init_idx_73040 = high_73594;
        
        bool idx_73059;
        int64_t idx_73060;
        int64_t idx_73061;
        int64_t idx_73062;
        bool loop_while_73610;
        int64_t l_idx_73611;
        int64_t r_idx_73612;
        int64_t span_73613;
        
        loop_while_73610 = loop_cond_62389;
        l_idx_73611 = init_idx_73039;
        r_idx_73612 = init_idx_73039;
        span_73613 = (int64_t) 1;
        while (loop_while_73610) {
            int64_t max_arg_73614 = sub64(l_idx_73611, (int64_t) 1);
            int64_t max_res_73615 = smax64((int64_t) 0, max_arg_73614);
            int64_t min_arg_73616 = add64((int64_t) 1, r_idx_73612);
            int64_t min_res_73617 = smin64(min_arg_66529, min_arg_73616);
            bool x_73618 = sle64((int64_t) 0, max_res_73615);
            bool y_73619 = slt64(max_res_73615, n_62364);
            bool bounds_check_73620 = x_73618 && y_73619;
            bool index_certs_73621;
            
            if (!bounds_check_73620) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73615,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_73622 = ((int64_t *) mem_68302.mem)[max_res_73615];
            int64_t abs_arg_73623 = sub64(x_73622, defunc_0_g_res_73037);
            int64_t abs_res_73624 = abs64(abs_arg_73623);
            bool x_73625 = sle64((int64_t) 0, min_res_73617);
            bool y_73626 = slt64(min_res_73617, n_62364);
            bool bounds_check_73627 = x_73625 && y_73626;
            bool index_certs_73628;
            
            if (!bounds_check_73627) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73617,
                              "] out of bounds for array of shape [",
                              (long long) n_62364, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            int64_t x_73629 = ((int64_t *) mem_68302.mem)[min_res_73617];
            int64_t abs_arg_73630 = sub64(x_73629, defunc_0_g_res_73037);
            int64_t abs_res_73631 = abs64(abs_arg_73630);
            bool cond_73632 = max_res_73615 == l_idx_73611;
            int64_t loopres_73633;
            int64_t loopres_73634;
            int64_t loopres_73635;
            
            if (cond_73632) {
                loopres_73633 = l_idx_73611;
                loopres_73634 = r_idx_73612;
                loopres_73635 = min_res_62384;
            } else {
                bool cond_73636 = slt64(abs_res_73624, abs_res_73631);
                bool cond_f_res_73637 = min_res_73617 == r_idx_73612;
                bool x_73638 = !cond_73636;
                bool y_73639 = cond_f_res_73637 && x_73638;
                bool cond_73640 = cond_73636 || y_73639;
                int64_t loopres_f_res_73641;
                
                if (cond_73640) {
                    loopres_f_res_73641 = max_res_73615;
                } else {
                    loopres_f_res_73641 = l_idx_73611;
                }
                
                int64_t loopres_f_res_73642;
                
                if (cond_73640) {
                    loopres_f_res_73642 = r_idx_73612;
                } else {
                    loopres_f_res_73642 = min_res_73617;
                }
                
                int64_t loopres_f_res_73643;
                
                if (cond_73640) {
                    int64_t loopres_f_res_t_res_73644 = add64((int64_t) 1,
                                                              span_73613);
                    
                    loopres_f_res_73643 = loopres_f_res_t_res_73644;
                } else {
                    int64_t loopres_f_res_f_res_73645 = add64((int64_t) 1,
                                                              span_73613);
                    
                    loopres_f_res_73643 = loopres_f_res_f_res_73645;
                }
                loopres_73633 = loopres_f_res_73641;
                loopres_73634 = loopres_f_res_73642;
                loopres_73635 = loopres_f_res_73643;
            }
            
            bool loop_cond_73646 = slt64(loopres_73635, min_res_62384);
            bool loop_while_tmp_73713 = loop_cond_73646;
            int64_t l_idx_tmp_73714 = loopres_73633;
            int64_t r_idx_tmp_73715 = loopres_73634;
            int64_t span_tmp_73716 = loopres_73635;
            
            loop_while_73610 = loop_while_tmp_73713;
            l_idx_73611 = l_idx_tmp_73714;
            r_idx_73612 = r_idx_tmp_73715;
            span_73613 = span_tmp_73716;
        }
        idx_73059 = loop_while_73610;
        idx_73060 = l_idx_73611;
        idx_73061 = r_idx_73612;
        idx_73062 = span_73613;
        
        int64_t min_res_73100 = smin64(min_arg_66530, idx_73060);
        int64_t x_73101 = add64(min_res_62384, min_res_73100);
        int64_t r_73102 = sub64(x_73101, (int64_t) 1);
        bool x_73103 = sle64((int64_t) 0, r_73102);
        bool y_73104 = slt64(r_73102, n_62364);
        bool bounds_check_73105 = x_73103 && y_73104;
        bool index_certs_73106;
        
        if (!bounds_check_73105) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73102,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_73107 = ((int64_t *) mem_68296.mem)[r_73102];
        int64_t abs_arg_73108 = sub64(x_73107, min_res_73036);
        int64_t abs_res_73109 = abs64(abs_arg_73108);
        bool x_73110 = sle64((int64_t) 0, min_res_73100);
        bool y_73111 = slt64(min_res_73100, n_62364);
        bool bounds_check_73112 = x_73110 && y_73111;
        bool index_certs_73113;
        
        if (!bounds_check_73112) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73100,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62364, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  loess.fut:507:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:506:5-508:26\n   #9  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        int64_t x_73114 = ((int64_t *) mem_68296.mem)[min_res_73100];
        int64_t abs_arg_73115 = sub64(x_73114, min_res_73036);
        int64_t abs_res_73116 = abs64(abs_arg_73115);
        int64_t max_res_73117 = smax64(abs_res_73109, abs_res_73116);
        float defunc_0_f_res_73118 = sitofp_i64_f32(max_res_73117);
        float defunc_1_f_res_73119 = max_res_66534 + defunc_0_f_res_73118;
        float defunc_0_f_res_73120 = sitofp_i64_f32(min_res_73036);
        int64_t flat_tid_66316 = (int64_t) 0;
        int32_t num_tasks_73717;
        struct futhark_mc_task_74253 futhark_mc_task_74253;
        
        futhark_mc_task_74253.ctx = ctx;
        futhark_mc_task_74253.free_q_62366 = q_62366;
        futhark_mc_task_74253.free_last_res_66517 = last_res_66517;
        futhark_mc_task_74253.free_mem_68299 = mem_68299.mem;
        futhark_mc_task_74253.free_mem_68305 = mem_68305.mem;
        futhark_mc_task_74253.free_min_res_73100 = min_res_73100;
        futhark_mc_task_74253.free_defunc_1_f_res_73119 = defunc_1_f_res_73119;
        futhark_mc_task_74253.free_defunc_0_f_res_73120 = defunc_0_f_res_73120;
        futhark_mc_task_74253.free_mem_73121 = mem_73121;
        futhark_mc_task_74253.free_mem_73122 = mem_73122;
        
        struct scheduler_segop futhark_mc_task_74253_task;
        
        futhark_mc_task_74253_task.args = &futhark_mc_task_74253;
        futhark_mc_task_74253_task.top_level_fn = futhark_mc_segmap_task_74254;
        futhark_mc_task_74253_task.name = "futhark_mc_segmap_task_74254";
        futhark_mc_task_74253_task.iterations = q_62366;
        futhark_mc_task_74253_task.task_time =
            &ctx->futhark_mc_segmap_task_74254_total_time;
        futhark_mc_task_74253_task.task_iter =
            &ctx->futhark_mc_segmap_task_74254_total_iter;
        futhark_mc_task_74253_task.sched = STATIC;
        futhark_mc_task_74253_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74254_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74253_task);
        
        if (futhark_mc_segmap_task_74254_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_73142;
        float defunc_2_reduce_res_73143;
        float defunc_2_reduce_res_73144;
        float defunc_2_reduce_res_73145;
        float defunc_2_reduce_res_73146;
        int64_t flat_tid_66318 = (int64_t) 0;
        int32_t num_tasks_73724;
        struct futhark_mc_task_74257 futhark_mc_task_74257;
        
        futhark_mc_task_74257.ctx = ctx;
        futhark_mc_task_74257.free_mem_73121 = mem_73121;
        futhark_mc_task_74257.free_mem_73122 = mem_73122;
        futhark_mc_task_74257.retval_defunc_2_reduce_res_73142 =
            &defunc_2_reduce_res_73142;
        futhark_mc_task_74257.retval_defunc_2_reduce_res_73143 =
            &defunc_2_reduce_res_73143;
        futhark_mc_task_74257.retval_defunc_2_reduce_res_73144 =
            &defunc_2_reduce_res_73144;
        futhark_mc_task_74257.retval_defunc_2_reduce_res_73145 =
            &defunc_2_reduce_res_73145;
        futhark_mc_task_74257.retval_defunc_2_reduce_res_73146 =
            &defunc_2_reduce_res_73146;
        futhark_mc_task_74257.retval_mem_73140 = mem_73140;
        futhark_mc_task_74257.retval_mem_73141 = mem_73141;
        
        struct scheduler_segop futhark_mc_task_74257_task;
        
        futhark_mc_task_74257_task.args = &futhark_mc_task_74257;
        futhark_mc_task_74257_task.top_level_fn = futhark_mc_segred_task_74258;
        futhark_mc_task_74257_task.name = "futhark_mc_segred_task_74258";
        futhark_mc_task_74257_task.iterations = q_62366;
        futhark_mc_task_74257_task.task_time =
            &ctx->futhark_mc_segred_task_74258_total_time;
        futhark_mc_task_74257_task.task_iter =
            &ctx->futhark_mc_segred_task_74258_total_iter;
        futhark_mc_task_74257_task.sched = STATIC;
        futhark_mc_task_74257_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74258_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74257_task);
        
        if (futhark_mc_segred_task_74258_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_73170 = defunc_2_reduce_res_73144 * defunc_2_reduce_res_73146;
        float y_73171 = defunc_2_reduce_res_73145 * defunc_2_reduce_res_73145;
        float a12_73172 = x_73170 - y_73171;
        float x_73173 = defunc_2_reduce_res_73144 * defunc_2_reduce_res_73145;
        float y_73174 = defunc_2_reduce_res_73143 * defunc_2_reduce_res_73146;
        float b12_73175 = x_73173 - y_73174;
        float x_73176 = defunc_2_reduce_res_73143 * defunc_2_reduce_res_73145;
        float y_73177 = defunc_2_reduce_res_73144 * defunc_2_reduce_res_73144;
        float c12_73178 = x_73176 - y_73177;
        float x_73179 = defunc_2_reduce_res_73142 * defunc_2_reduce_res_73146;
        float b2_73180 = x_73179 - y_73177;
        float x_73181 = defunc_2_reduce_res_73143 * defunc_2_reduce_res_73144;
        float y_73182 = defunc_2_reduce_res_73142 * defunc_2_reduce_res_73145;
        float c2_73183 = x_73181 - y_73182;
        float x_73184 = defunc_2_reduce_res_73142 * a12_73172;
        float y_73185 = defunc_2_reduce_res_73143 * b12_73175;
        float x_73186 = x_73184 + y_73185;
        float y_73187 = defunc_2_reduce_res_73144 * c12_73178;
        float y_73188 = x_73186 + y_73187;
        float det_73189 = 1.0F / y_73188;
        float a12_73190 = a12_73172 * det_73189;
        float b12_73191 = b12_73175 * det_73189;
        float c12_73192 = c12_73178 * det_73189;
        float b2_73193 = b2_73180 * det_73189;
        float c2_73194 = c2_73183 * det_73189;
        float defunc_2_reduce_res_73195;
        float defunc_2_reduce_res_73196;
        int64_t flat_tid_66320 = (int64_t) 0;
        int32_t num_tasks_73757;
        struct futhark_mc_task_74266 futhark_mc_task_74266;
        
        futhark_mc_task_74266.ctx = ctx;
        futhark_mc_task_74266.free_last_res_66517 = last_res_66517;
        futhark_mc_task_74266.free_mem_68293 = mem_68293.mem;
        futhark_mc_task_74266.free_min_res_73100 = min_res_73100;
        futhark_mc_task_74266.free_mem_73122 = mem_73122;
        futhark_mc_task_74266.free_mem_73140 = mem_73140;
        futhark_mc_task_74266.free_mem_73141 = mem_73141;
        futhark_mc_task_74266.free_a12_73190 = a12_73190;
        futhark_mc_task_74266.free_b12_73191 = b12_73191;
        futhark_mc_task_74266.free_c12_73192 = c12_73192;
        futhark_mc_task_74266.free_b2_73193 = b2_73193;
        futhark_mc_task_74266.free_c2_73194 = c2_73194;
        futhark_mc_task_74266.retval_defunc_2_reduce_res_73195 =
            &defunc_2_reduce_res_73195;
        futhark_mc_task_74266.retval_defunc_2_reduce_res_73196 =
            &defunc_2_reduce_res_73196;
        
        struct scheduler_segop futhark_mc_task_74266_task;
        
        futhark_mc_task_74266_task.args = &futhark_mc_task_74266;
        futhark_mc_task_74266_task.top_level_fn = futhark_mc_segred_task_74267;
        futhark_mc_task_74266_task.name = "futhark_mc_segred_task_74267";
        futhark_mc_task_74266_task.iterations = q_62366;
        futhark_mc_task_74266_task.task_time =
            &ctx->futhark_mc_segred_task_74267_total_time;
        futhark_mc_task_74266_task.task_iter =
            &ctx->futhark_mc_segred_task_74267_total_iter;
        futhark_mc_task_74266_task.sched = STATIC;
        futhark_mc_task_74266_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74267_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74266_task);
        
        if (futhark_mc_segred_task_74267_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_68380.mem)[gtid_66315] = defunc_2_reduce_res_73195;
        ((float *) mem_68383.mem)[gtid_66315] = defunc_2_reduce_res_73196;
    }
    
  cleanup:
    { }
    free(mem_73121);
    free(mem_73122);
    free(mem_73140);
    free(mem_73141);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74248_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74248_end -
                 futhark_mc_segmap_parloop_74248_start;
        
        ctx->futhark_mc_segmap_parloop_74248_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74248_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74248_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74246(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66314 = tid;
    int num_tasks_73449 = info.nsubtasks;
    struct futhark_mc_task_74238 *futhark_mc_task_74238 =
                                 (struct futhark_mc_task_74238 *) args;
    struct futhark_context *ctx = futhark_mc_task_74238->ctx;
    uint64_t futhark_mc_segmap_nested_task_74246_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74246_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74238->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74238->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74238->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74238->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74238->free_i_62378;
    bool x_62379 = futhark_mc_task_74238->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74238->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74238->free_loop_cond_62389;
    int64_t last_res_66517 = futhark_mc_task_74238->free_last_res_66517;
    int64_t min_arg_66529 = futhark_mc_task_74238->free_min_arg_66529;
    int64_t min_arg_66530 = futhark_mc_task_74238->free_min_arg_66530;
    float max_res_66534 = futhark_mc_task_74238->free_max_res_66534;
    struct memblock mem_68293 = {.desc ="mem_68293", .mem =
                                 futhark_mc_task_74238->free_mem_68293, .size =
                                 0, .references =NULL};
    struct memblock mem_68296 = {.desc ="mem_68296", .mem =
                                 futhark_mc_task_74238->free_mem_68296, .size =
                                 0, .references =NULL};
    struct memblock mem_68299 = {.desc ="mem_68299", .mem =
                                 futhark_mc_task_74238->free_mem_68299, .size =
                                 0, .references =NULL};
    struct memblock mem_68302 = {.desc ="mem_68302", .mem =
                                 futhark_mc_task_74238->free_mem_68302, .size =
                                 0, .references =NULL};
    int64_t bytes_68303 = futhark_mc_task_74238->free_bytes_68303;
    struct memblock mem_68305 = {.desc ="mem_68305", .mem =
                                 futhark_mc_task_74238->free_mem_68305, .size =
                                 0, .references =NULL};
    struct memblock mem_68380 = {.desc ="mem_68380", .mem =
                                 futhark_mc_task_74238->free_mem_68380, .size =
                                 0, .references =NULL};
    struct memblock mem_68383 = {.desc ="mem_68383", .mem =
                                 futhark_mc_task_74238->free_mem_68383, .size =
                                 0, .references =NULL};
    int64_t iter_73591;
    struct futhark_mc_segmap_parloop_struct_74247
    futhark_mc_segmap_parloop_struct_74247;
    
    futhark_mc_segmap_parloop_struct_74247.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74247.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74247.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74247.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74247.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74247.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74247.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74247.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74247.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74247.free_last_res_66517 = last_res_66517;
    futhark_mc_segmap_parloop_struct_74247.free_min_arg_66529 = min_arg_66529;
    futhark_mc_segmap_parloop_struct_74247.free_min_arg_66530 = min_arg_66530;
    futhark_mc_segmap_parloop_struct_74247.free_max_res_66534 = max_res_66534;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68293 = mem_68293.mem;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68296 = mem_68296.mem;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68299 = mem_68299.mem;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68302 = mem_68302.mem;
    futhark_mc_segmap_parloop_struct_74247.free_bytes_68303 = bytes_68303;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68305 = mem_68305.mem;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68380 = mem_68380.mem;
    futhark_mc_segmap_parloop_struct_74247.free_mem_68383 = mem_68383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74248_task;
    
    futhark_mc_segmap_parloop_74248_task.name =
        "futhark_mc_segmap_parloop_74248";
    futhark_mc_segmap_parloop_74248_task.fn = futhark_mc_segmap_parloop_74248;
    futhark_mc_segmap_parloop_74248_task.args =
        &futhark_mc_segmap_parloop_struct_74247;
    futhark_mc_segmap_parloop_74248_task.iterations = iterations;
    futhark_mc_segmap_parloop_74248_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74248_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74248_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74248_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74248_task);
    
    if (futhark_mc_segmap_parloop_74248_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74248_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74248_total_end -
                 futhark_mc_segmap_parloop_74248_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74248_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74248_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74248_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74246_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74246_end -
                 futhark_mc_segmap_nested_task_74246_start;
        
        ctx->futhark_mc_segmap_nested_task_74246_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74246_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74246_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74210(void *args, int64_t start,
                                           int64_t end, int flat_tid_66302,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74209
    *futhark_mc_segmap_parloop_struct_74209 =
    (struct futhark_mc_segmap_parloop_struct_74209 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74209->ctx;
    uint64_t futhark_mc_segmap_parloop_74210_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74210_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74209->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74209->free_n_62364;
    int64_t q_62366 = futhark_mc_segmap_parloop_struct_74209->free_q_62366;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74209->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74209->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74209->free_i_62378;
    bool x_62379 = futhark_mc_segmap_parloop_struct_74209->free_x_62379;
    int64_t min_res_62384 =
            futhark_mc_segmap_parloop_struct_74209->free_min_res_62384;
    bool loop_cond_62389 =
         futhark_mc_segmap_parloop_struct_74209->free_loop_cond_62389;
    float i64_res_62390 =
          futhark_mc_segmap_parloop_struct_74209->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_segmap_parloop_struct_74209->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68288 =
            futhark_mc_segmap_parloop_struct_74209->free_bytes_68288;
    int64_t bytes_68291 =
            futhark_mc_segmap_parloop_struct_74209->free_bytes_68291;
    int64_t bytes_68303 =
            futhark_mc_segmap_parloop_struct_74209->free_bytes_68303;
    int64_t bytes_68378 =
            futhark_mc_segmap_parloop_struct_74209->free_bytes_68378;
    struct memblock mem_68567 = {.desc ="mem_68567", .mem =
                                 futhark_mc_segmap_parloop_struct_74209->free_mem_68567,
                                 .size =0, .references =NULL};
    struct memblock mem_68571 = {.desc ="mem_68571", .mem =
                                 futhark_mc_segmap_parloop_struct_74209->free_mem_68571,
                                 .size =0, .references =NULL};
    size_t mem_68290_cached_sizze_74211 = 0;
    char *mem_68290 = NULL;
    size_t mem_68293_cached_sizze_74212 = 0;
    char *mem_68293 = NULL;
    size_t mem_68296_cached_sizze_74213 = 0;
    char *mem_68296 = NULL;
    size_t mem_68299_cached_sizze_74214 = 0;
    char *mem_68299 = NULL;
    size_t mem_68302_cached_sizze_74215 = 0;
    char *mem_68302 = NULL;
    size_t mem_68305_cached_sizze_74216 = 0;
    char *mem_68305 = NULL;
    size_t mem_68380_cached_sizze_74217 = 0;
    char *mem_68380 = NULL;
    size_t mem_68383_cached_sizze_74218 = 0;
    char *mem_68383 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73016 = start;
    
    if (mem_68290_cached_sizze_74211 < (size_t) bytes_68288) {
        mem_68290 = realloc(mem_68290, bytes_68288);
        mem_68290_cached_sizze_74211 = bytes_68288;
    }
    if (mem_68293_cached_sizze_74212 < (size_t) bytes_68291) {
        mem_68293 = realloc(mem_68293, bytes_68291);
        mem_68293_cached_sizze_74212 = bytes_68291;
    }
    if (mem_68296_cached_sizze_74213 < (size_t) bytes_68288) {
        mem_68296 = realloc(mem_68296, bytes_68288);
        mem_68296_cached_sizze_74213 = bytes_68288;
    }
    if (mem_68299_cached_sizze_74214 < (size_t) bytes_68291) {
        mem_68299 = realloc(mem_68299, bytes_68291);
        mem_68299_cached_sizze_74214 = bytes_68291;
    }
    if (mem_68302_cached_sizze_74215 < (size_t) bytes_68288) {
        mem_68302 = realloc(mem_68302, bytes_68288);
        mem_68302_cached_sizze_74215 = bytes_68288;
    }
    if (mem_68305_cached_sizze_74216 < (size_t) bytes_68303) {
        mem_68305 = realloc(mem_68305, bytes_68303);
        mem_68305_cached_sizze_74216 = bytes_68303;
    }
    if (mem_68380_cached_sizze_74217 < (size_t) bytes_68378) {
        mem_68380 = realloc(mem_68380, bytes_68378);
        mem_68380_cached_sizze_74217 = bytes_68378;
    }
    if (mem_68383_cached_sizze_74218 < (size_t) bytes_68378) {
        mem_68383 = realloc(mem_68383, bytes_68378);
        mem_68383_cached_sizze_74218 = bytes_68378;
    }
    for (; iter_73016 < end; iter_73016++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73417 = m_62363;
        int64_t gtid_66303 = iter_73016;
        int64_t remnant_73418 = iter_73016 - gtid_66303;
        int64_t flat_tid_66304 = (int64_t) 0;
        int32_t num_tasks_73419;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74219 futhark_mc_task_74219;
        
        futhark_mc_task_74219.ctx = ctx;
        futhark_mc_task_74219.free_n_62364 = n_62364;
        futhark_mc_task_74219.free_gtid_66303 = gtid_66303;
        futhark_mc_task_74219.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74219.free_mem_68290 = mem_68290;
        
        struct scheduler_segop futhark_mc_task_74219_task;
        
        futhark_mc_task_74219_task.args = &futhark_mc_task_74219;
        futhark_mc_task_74219_task.top_level_fn = futhark_mc_segscan_task_74220;
        futhark_mc_task_74219_task.name = "futhark_mc_segscan_task_74220";
        futhark_mc_task_74219_task.iterations = n_62364;
        futhark_mc_task_74219_task.task_time =
            &ctx->futhark_mc_segscan_task_74220_total_time;
        futhark_mc_task_74219_task.task_iter =
            &ctx->futhark_mc_segscan_task_74220_total_iter;
        futhark_mc_task_74219_task.sched = STATIC;
        futhark_mc_task_74219_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74220_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74219_task);
        
        if (futhark_mc_segscan_task_74220_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66517 = ((int64_t *) mem_68290)[i_62378];
        
        for (int64_t i_73433 = 0; i_73433 < n_62364; i_73433++) {
            ((float *) mem_68293)[i_73433] = 0.0F;
        }
        for (int64_t i_73434 = 0; i_73434 < n_62364; i_73434++) {
            ((int64_t *) mem_68296)[i_73434] = (int64_t) -1;
        }
        
        int64_t flat_tid_66306 = (int64_t) 0;
        int32_t num_tasks_73435;
        struct futhark_mc_task_74226 futhark_mc_task_74226;
        
        futhark_mc_task_74226.ctx = ctx;
        futhark_mc_task_74226.free_n_62364 = n_62364;
        futhark_mc_task_74226.free_gtid_66303 = gtid_66303;
        futhark_mc_task_74226.free_Y_mem_67460 = Y_mem_67460.mem;
        futhark_mc_task_74226.free_mem_68290 = mem_68290;
        futhark_mc_task_74226.free_mem_68293 = mem_68293;
        futhark_mc_task_74226.free_mem_68296 = mem_68296;
        
        struct scheduler_segop futhark_mc_task_74226_task;
        
        futhark_mc_task_74226_task.args = &futhark_mc_task_74226;
        futhark_mc_task_74226_task.top_level_fn = futhark_mc_segmap_task_74227;
        futhark_mc_task_74226_task.name = "futhark_mc_segmap_task_74227";
        futhark_mc_task_74226_task.iterations = n_62364;
        futhark_mc_task_74226_task.task_time =
            &ctx->futhark_mc_segmap_task_74227_total_time;
        futhark_mc_task_74226_task.task_iter =
            &ctx->futhark_mc_segmap_task_74227_total_iter;
        futhark_mc_task_74226_task.sched = STATIC;
        futhark_mc_task_74226_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74227_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74226_task);
        
        if (futhark_mc_segmap_task_74227_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66529 = sub64(last_res_66517, (int64_t) 1);
        int64_t min_arg_66530 = sub64(last_res_66517, min_res_62384);
        float i64_res_66531 = sitofp_i64_f32(last_res_66517);
        float x_66532 = i64_res_62390 - i64_res_66531;
        float max_arg_66533 = x_66532 / 2.0F;
        float max_res_66534 = fmax32(0.0F, max_arg_66533);
        int64_t flat_tid_66308 = (int64_t) 0;
        int32_t num_tasks_73441;
        struct futhark_mc_task_74230 futhark_mc_task_74230;
        
        futhark_mc_task_74230.ctx = ctx;
        futhark_mc_task_74230.free_n_62364 = n_62364;
        futhark_mc_task_74230.free_mem_68296 = mem_68296;
        futhark_mc_task_74230.free_mem_68299 = mem_68299;
        futhark_mc_task_74230.free_mem_68302 = mem_68302;
        
        struct scheduler_segop futhark_mc_task_74230_task;
        
        futhark_mc_task_74230_task.args = &futhark_mc_task_74230;
        futhark_mc_task_74230_task.top_level_fn = futhark_mc_segmap_task_74231;
        futhark_mc_task_74230_task.name = "futhark_mc_segmap_task_74231";
        futhark_mc_task_74230_task.iterations = n_62364;
        futhark_mc_task_74230_task.task_time =
            &ctx->futhark_mc_segmap_task_74231_total_time;
        futhark_mc_task_74230_task.task_iter =
            &ctx->futhark_mc_segmap_task_74231_total_iter;
        futhark_mc_task_74230_task.sched = STATIC;
        futhark_mc_task_74230_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74231_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74230_task);
        
        if (futhark_mc_segmap_task_74231_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66310 = (int64_t) 0;
        int32_t num_tasks_73445;
        struct futhark_mc_task_74234 futhark_mc_task_74234;
        
        futhark_mc_task_74234.ctx = ctx;
        futhark_mc_task_74234.free_q_62366 = q_62366;
        futhark_mc_task_74234.free_last_res_66517 = last_res_66517;
        futhark_mc_task_74234.free_mem_68305 = mem_68305;
        
        struct scheduler_segop futhark_mc_task_74234_task;
        
        futhark_mc_task_74234_task.args = &futhark_mc_task_74234;
        futhark_mc_task_74234_task.top_level_fn = futhark_mc_segmap_task_74235;
        futhark_mc_task_74234_task.name = "futhark_mc_segmap_task_74235";
        futhark_mc_task_74234_task.iterations = q_62366;
        futhark_mc_task_74234_task.task_time =
            &ctx->futhark_mc_segmap_task_74235_total_time;
        futhark_mc_task_74234_task.task_iter =
            &ctx->futhark_mc_segmap_task_74235_total_iter;
        futhark_mc_task_74234_task.sched = STATIC;
        futhark_mc_task_74234_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74235_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74234_task);
        
        if (futhark_mc_segmap_task_74235_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66312 = (int64_t) 0;
        int32_t num_tasks_73449;
        int64_t flat_tid_66314 = (int64_t) 0;
        struct futhark_mc_task_74238 futhark_mc_task_74238;
        
        futhark_mc_task_74238.ctx = ctx;
        futhark_mc_task_74238.free_n_62364 = n_62364;
        futhark_mc_task_74238.free_q_62366 = q_62366;
        futhark_mc_task_74238.free_jump_62368 = jump_62368;
        futhark_mc_task_74238.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74238.free_i_62378 = i_62378;
        futhark_mc_task_74238.free_x_62379 = x_62379;
        futhark_mc_task_74238.free_min_res_62384 = min_res_62384;
        futhark_mc_task_74238.free_loop_cond_62389 = loop_cond_62389;
        futhark_mc_task_74238.free_last_res_66517 = last_res_66517;
        futhark_mc_task_74238.free_min_arg_66529 = min_arg_66529;
        futhark_mc_task_74238.free_min_arg_66530 = min_arg_66530;
        futhark_mc_task_74238.free_max_res_66534 = max_res_66534;
        futhark_mc_task_74238.free_mem_68293 = mem_68293;
        futhark_mc_task_74238.free_mem_68296 = mem_68296;
        futhark_mc_task_74238.free_mem_68299 = mem_68299;
        futhark_mc_task_74238.free_mem_68302 = mem_68302;
        futhark_mc_task_74238.free_bytes_68303 = bytes_68303;
        futhark_mc_task_74238.free_mem_68305 = mem_68305;
        futhark_mc_task_74238.free_mem_68380 = mem_68380;
        futhark_mc_task_74238.free_mem_68383 = mem_68383;
        
        struct scheduler_segop futhark_mc_task_74238_task;
        
        futhark_mc_task_74238_task.args = &futhark_mc_task_74238;
        futhark_mc_task_74238_task.top_level_fn = futhark_mc_segmap_task_74239;
        futhark_mc_task_74238_task.name = "futhark_mc_segmap_task_74239";
        futhark_mc_task_74238_task.iterations = n_m_62372;
        futhark_mc_task_74238_task.task_time =
            &ctx->futhark_mc_segmap_task_74239_total_time;
        futhark_mc_task_74238_task.task_iter =
            &ctx->futhark_mc_segmap_task_74239_total_iter;
        futhark_mc_task_74238_task.sched = DYNAMIC;
        futhark_mc_task_74238_task.nested_fn =
            futhark_mc_segmap_nested_task_74246;
        
        int futhark_mc_segmap_task_74239_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74238_task);
        
        if (futhark_mc_segmap_task_74239_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68567.mem + gtid_66303 * n_m_62372 * (int64_t) 4,
                mem_68380 + (int64_t) 0, n_m_62372 * (int64_t) 4);
        memmove(mem_68571.mem + gtid_66303 * n_m_62372 * (int64_t) 4,
                mem_68383 + (int64_t) 0, n_m_62372 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68290);
    free(mem_68293);
    free(mem_68296);
    free(mem_68299);
    free(mem_68302);
    free(mem_68305);
    free(mem_68380);
    free(mem_68383);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74210_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74210_end -
                 futhark_mc_segmap_parloop_74210_start;
        
        ctx->futhark_mc_segmap_parloop_74210_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74210_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74210_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74208(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66302 = tid;
    int num_tasks_72753 = info.nsubtasks;
    struct futhark_mc_task_74192 *futhark_mc_task_74192 =
                                 (struct futhark_mc_task_74192 *) args;
    struct futhark_context *ctx = futhark_mc_task_74192->ctx;
    uint64_t futhark_mc_segmap_nested_task_74208_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74208_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74192->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74192->free_n_62364;
    int64_t q_62366 = futhark_mc_task_74192->free_q_62366;
    int64_t jump_62368 = futhark_mc_task_74192->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74192->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74192->free_i_62378;
    bool x_62379 = futhark_mc_task_74192->free_x_62379;
    int64_t min_res_62384 = futhark_mc_task_74192->free_min_res_62384;
    bool loop_cond_62389 = futhark_mc_task_74192->free_loop_cond_62389;
    float i64_res_62390 = futhark_mc_task_74192->free_i64_res_62390;
    struct memblock Y_mem_67460 = {.desc ="Y_mem_67460", .mem =
                                   futhark_mc_task_74192->free_Y_mem_67460,
                                   .size =0, .references =NULL};
    int64_t bytes_68288 = futhark_mc_task_74192->free_bytes_68288;
    int64_t bytes_68291 = futhark_mc_task_74192->free_bytes_68291;
    int64_t bytes_68303 = futhark_mc_task_74192->free_bytes_68303;
    int64_t bytes_68378 = futhark_mc_task_74192->free_bytes_68378;
    struct memblock mem_68567 = {.desc ="mem_68567", .mem =
                                 futhark_mc_task_74192->free_mem_68567, .size =
                                 0, .references =NULL};
    struct memblock mem_68571 = {.desc ="mem_68571", .mem =
                                 futhark_mc_task_74192->free_mem_68571, .size =
                                 0, .references =NULL};
    int64_t iter_73016;
    struct futhark_mc_segmap_parloop_struct_74209
    futhark_mc_segmap_parloop_struct_74209;
    
    futhark_mc_segmap_parloop_struct_74209.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74209.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74209.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74209.free_q_62366 = q_62366;
    futhark_mc_segmap_parloop_struct_74209.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74209.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74209.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74209.free_x_62379 = x_62379;
    futhark_mc_segmap_parloop_struct_74209.free_min_res_62384 = min_res_62384;
    futhark_mc_segmap_parloop_struct_74209.free_loop_cond_62389 =
        loop_cond_62389;
    futhark_mc_segmap_parloop_struct_74209.free_i64_res_62390 = i64_res_62390;
    futhark_mc_segmap_parloop_struct_74209.free_Y_mem_67460 = Y_mem_67460.mem;
    futhark_mc_segmap_parloop_struct_74209.free_bytes_68288 = bytes_68288;
    futhark_mc_segmap_parloop_struct_74209.free_bytes_68291 = bytes_68291;
    futhark_mc_segmap_parloop_struct_74209.free_bytes_68303 = bytes_68303;
    futhark_mc_segmap_parloop_struct_74209.free_bytes_68378 = bytes_68378;
    futhark_mc_segmap_parloop_struct_74209.free_mem_68567 = mem_68567.mem;
    futhark_mc_segmap_parloop_struct_74209.free_mem_68571 = mem_68571.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74210_task;
    
    futhark_mc_segmap_parloop_74210_task.name =
        "futhark_mc_segmap_parloop_74210";
    futhark_mc_segmap_parloop_74210_task.fn = futhark_mc_segmap_parloop_74210;
    futhark_mc_segmap_parloop_74210_task.args =
        &futhark_mc_segmap_parloop_struct_74209;
    futhark_mc_segmap_parloop_74210_task.iterations = iterations;
    futhark_mc_segmap_parloop_74210_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74210_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74210_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74210_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74210_task);
    
    if (futhark_mc_segmap_parloop_74210_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74210_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74210_total_end -
                 futhark_mc_segmap_parloop_74210_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74210_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74210_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74210_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74208_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74208_end -
                 futhark_mc_segmap_nested_task_74208_start;
        
        ctx->futhark_mc_segmap_nested_task_74208_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74208_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74208_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74272 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    int64_t free_y_63683;
    char *free_ext_mem_68576;
    char *free_ext_mem_68577;
    int64_t free_bytes_68578;
    char *free_mem_68599;
};
struct futhark_mc_segmap_parloop_struct_74274 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    int64_t free_y_63683;
    char *free_ext_mem_68576;
    char *free_ext_mem_68577;
    int64_t free_bytes_68578;
    char *free_mem_68599;
};
static int futhark_mc_segmap_parloop_74275(void *args, int64_t start,
                                           int64_t end, int flat_tid_66918,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74274
    *futhark_mc_segmap_parloop_struct_74274 =
    (struct futhark_mc_segmap_parloop_struct_74274 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74274->ctx;
    uint64_t futhark_mc_segmap_parloop_74275_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74275_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74274->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74274->free_n_62364;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74274->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74274->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74274->free_i_62378;
    int64_t y_63683 = futhark_mc_segmap_parloop_struct_74274->free_y_63683;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_segmap_parloop_struct_74274->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_segmap_parloop_struct_74274->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    int64_t bytes_68578 =
            futhark_mc_segmap_parloop_struct_74274->free_bytes_68578;
    struct memblock mem_68599 = {.desc ="mem_68599", .mem =
                                 futhark_mc_segmap_parloop_struct_74274->free_mem_68599,
                                 .size =0, .references =NULL};
    size_t mem_68583_cached_sizze_74276 = 0;
    char *mem_68583 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73773 = start;
    
    if (mem_68583_cached_sizze_74276 < (size_t) bytes_68578) {
        mem_68583 = realloc(mem_68583, bytes_68578);
        mem_68583_cached_sizze_74276 = bytes_68578;
    }
    for (; iter_73773 < end; iter_73773++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73823 = m_62363;
        int64_t gtid_66919 = iter_73773;
        int64_t remnant_73824 = iter_73773 - gtid_66919;
        
        for (int64_t i_73774 = 0; i_73774 < n_62364; i_73774++) {
            int64_t m_v_73776 = sdiv64(i_73774, jump_62368);
            bool cond_73777 = m_v_73776 == y_63683;
            int64_t j_73778;
            
            if (cond_73777) {
                int64_t j_t_res_73779 = sub64(m_v_73776, (int64_t) 1);
                
                j_73778 = j_t_res_73779;
            } else {
                j_73778 = m_v_73776;
            }
            
            int64_t min_arg_73780 = mul64(jump_62368, j_73778);
            int64_t min_res_73781 = smin64(i_62378, min_arg_73780);
            int64_t defunc_0_m_fun_arg_73782 = add64((int64_t) 1, j_73778);
            int64_t min_arg_73783 = mul64(jump_62368, defunc_0_m_fun_arg_73782);
            int64_t min_res_73784 = smin64(i_62378, min_arg_73783);
            int64_t i64_arg_73785 = sub64(min_res_73784, min_res_73781);
            float i64_res_73786 = sitofp_i64_f32(i64_arg_73785);
            int64_t i64_arg_73787 = sub64(i_73774, min_res_73781);
            float i64_res_73788 = sitofp_i64_f32(i64_arg_73787);
            float u_73789 = i64_res_73788 / i64_res_73786;
            float u2_73790 = u_73789 * u_73789;
            float u3_73791 = u_73789 * u2_73790;
            float x_73792 = 2.0F * u3_73791;
            float y_73793 = 3.0F * u2_73790;
            float x_73794 = x_73792 - y_73793;
            float x_73795 = 1.0F + x_73794;
            bool x_73796 = sle64((int64_t) 0, j_73778);
            bool y_73797 = slt64(j_73778, n_m_62372);
            bool bounds_check_73798 = x_73796 && y_73797;
            bool index_certs_73799;
            
            if (!bounds_check_73798) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_73778,
                              "] out of bounds for array of shape [",
                              (long long) n_m_62372, "].",
                              "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  loess.fut:527:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:526:5-528:29\n   #8  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            float y_73800 = ((float *) ext_mem_68577.mem)[gtid_66919 *
                                                          n_m_62372 + j_73778];
            float x_73801 = x_73795 * y_73800;
            float x_73802 = y_73793 - x_73792;
            bool x_73803 = sle64((int64_t) 0, defunc_0_m_fun_arg_73782);
            bool y_73804 = slt64(defunc_0_m_fun_arg_73782, n_m_62372);
            bool bounds_check_73805 = x_73803 && y_73804;
            bool index_certs_73806;
            
            if (!bounds_check_73805) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_73782,
                              "] out of bounds for array of shape [",
                              (long long) n_m_62372, "].",
                              "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  loess.fut:527:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:526:5-528:29\n   #8  loess.fut:490:1-530:26\n");
                return 1;
            }
            
            float y_73807 = ((float *) ext_mem_68577.mem)[gtid_66919 *
                                                          n_m_62372 +
                                                          defunc_0_m_fun_arg_73782];
            float y_73808 = x_73802 * y_73807;
            float x_73809 = x_73801 + y_73808;
            float y_73810 = 2.0F * u2_73790;
            float x_73811 = u3_73791 - y_73810;
            float x_73812 = u_73789 + x_73811;
            float y_73813 = ((float *) ext_mem_68576.mem)[gtid_66919 *
                                                          n_m_62372 + j_73778];
            float x_73814 = x_73812 * y_73813;
            float y_73815 = i64_res_73786 * x_73814;
            float x_73816 = x_73809 + y_73815;
            float x_73817 = u3_73791 - u2_73790;
            float y_73818 = ((float *) ext_mem_68576.mem)[gtid_66919 *
                                                          n_m_62372 +
                                                          defunc_0_m_fun_arg_73782];
            float x_73819 = x_73817 * y_73818;
            float y_73820 = i64_res_73786 * x_73819;
            float defunc_0_f_res_73821 = x_73816 + y_73820;
            
            ((float *) mem_68583)[i_73774] = defunc_0_f_res_73821;
        }
        memmove(mem_68599.mem + gtid_66919 * n_62364 * (int64_t) 4, mem_68583 +
                (int64_t) 0, n_62364 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68583);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74275_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74275_end -
                 futhark_mc_segmap_parloop_74275_start;
        
        ctx->futhark_mc_segmap_parloop_74275_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74275_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74275_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74273(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66918 = tid;
    int num_tasks_73772 = info.nsubtasks;
    struct futhark_mc_task_74272 *futhark_mc_task_74272 =
                                 (struct futhark_mc_task_74272 *) args;
    struct futhark_context *ctx = futhark_mc_task_74272->ctx;
    uint64_t futhark_mc_segmap_task_74273_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74273_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74272->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74272->free_n_62364;
    int64_t jump_62368 = futhark_mc_task_74272->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74272->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74272->free_i_62378;
    int64_t y_63683 = futhark_mc_task_74272->free_y_63683;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_task_74272->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_task_74272->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    int64_t bytes_68578 = futhark_mc_task_74272->free_bytes_68578;
    struct memblock mem_68599 = {.desc ="mem_68599", .mem =
                                 futhark_mc_task_74272->free_mem_68599, .size =
                                 0, .references =NULL};
    int64_t iter_73773;
    struct futhark_mc_segmap_parloop_struct_74274
    futhark_mc_segmap_parloop_struct_74274;
    
    futhark_mc_segmap_parloop_struct_74274.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74274.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74274.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74274.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74274.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74274.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74274.free_y_63683 = y_63683;
    futhark_mc_segmap_parloop_struct_74274.free_ext_mem_68576 =
        ext_mem_68576.mem;
    futhark_mc_segmap_parloop_struct_74274.free_ext_mem_68577 =
        ext_mem_68577.mem;
    futhark_mc_segmap_parloop_struct_74274.free_bytes_68578 = bytes_68578;
    futhark_mc_segmap_parloop_struct_74274.free_mem_68599 = mem_68599.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74275_task;
    
    futhark_mc_segmap_parloop_74275_task.name =
        "futhark_mc_segmap_parloop_74275";
    futhark_mc_segmap_parloop_74275_task.fn = futhark_mc_segmap_parloop_74275;
    futhark_mc_segmap_parloop_74275_task.args =
        &futhark_mc_segmap_parloop_struct_74274;
    futhark_mc_segmap_parloop_74275_task.iterations = iterations;
    futhark_mc_segmap_parloop_74275_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74275_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74275_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74275_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74275_task);
    
    if (futhark_mc_segmap_parloop_74275_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74275_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74275_total_end -
                 futhark_mc_segmap_parloop_74275_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74275_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74275_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74275_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74273_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74273_end -
                 futhark_mc_segmap_task_74273_start;
        
        ctx->futhark_mc_segmap_task_74273_runs[tid]++;
        ctx->futhark_mc_segmap_task_74273_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74273_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74278 {
    struct futhark_context *ctx;
    int64_t free_m_62363;
    int64_t free_n_62364;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    int64_t free_y_63683;
    char *free_ext_mem_68576;
    char *free_ext_mem_68577;
    int64_t free_bytes_68578;
    char *free_mem_68599;
};
struct futhark_mc_task_74281 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    int64_t free_y_63683;
    int64_t free_gtid_66921;
    char *free_ext_mem_68576;
    char *free_ext_mem_68577;
    char *free_mem_68580;
};
struct futhark_mc_segmap_parloop_struct_74283 {
    struct futhark_context *ctx;
    int64_t free_n_62364;
    int64_t free_jump_62368;
    int64_t free_n_m_62372;
    int64_t free_i_62378;
    int64_t free_y_63683;
    int64_t free_gtid_66921;
    char *free_ext_mem_68576;
    char *free_ext_mem_68577;
    char *free_mem_68580;
};
static int futhark_mc_segmap_parloop_74284(void *args, int64_t start,
                                           int64_t end, int flat_tid_66922,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74283
    *futhark_mc_segmap_parloop_struct_74283 =
    (struct futhark_mc_segmap_parloop_struct_74283 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74283->ctx;
    uint64_t futhark_mc_segmap_parloop_74284_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74284_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74283->free_n_62364;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74283->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74283->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74283->free_i_62378;
    int64_t y_63683 = futhark_mc_segmap_parloop_struct_74283->free_y_63683;
    int64_t gtid_66921 =
            futhark_mc_segmap_parloop_struct_74283->free_gtid_66921;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_segmap_parloop_struct_74283->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_segmap_parloop_struct_74283->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    struct memblock mem_68580 = {.desc ="mem_68580", .mem =
                                 futhark_mc_segmap_parloop_struct_74283->free_mem_68580,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73876 = start;
    
    for (; iter_73876 < end; iter_73876++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73878 = n_62364;
        int64_t gtid_66923 = iter_73876;
        int64_t remnant_73879 = iter_73876 - gtid_66923;
        int64_t m_v_73827 = sdiv64(gtid_66923, jump_62368);
        bool cond_73828 = m_v_73827 == y_63683;
        int64_t j_73829;
        
        if (cond_73828) {
            int64_t j_t_res_73877 = sub64(m_v_73827, (int64_t) 1);
            
            j_73829 = j_t_res_73877;
        } else {
            j_73829 = m_v_73827;
        }
        
        int64_t min_arg_73831 = mul64(jump_62368, j_73829);
        int64_t min_res_73832 = smin64(i_62378, min_arg_73831);
        int64_t defunc_0_m_fun_arg_73833 = add64((int64_t) 1, j_73829);
        int64_t min_arg_73834 = mul64(jump_62368, defunc_0_m_fun_arg_73833);
        int64_t min_res_73835 = smin64(i_62378, min_arg_73834);
        int64_t i64_arg_73836 = sub64(min_res_73835, min_res_73832);
        float i64_res_73837 = sitofp_i64_f32(i64_arg_73836);
        int64_t i64_arg_73838 = sub64(gtid_66923, min_res_73832);
        float i64_res_73839 = sitofp_i64_f32(i64_arg_73838);
        float u_73840 = i64_res_73839 / i64_res_73837;
        float u2_73841 = u_73840 * u_73840;
        float u3_73842 = u_73840 * u2_73841;
        float x_73843 = 2.0F * u3_73842;
        float y_73844 = 3.0F * u2_73841;
        float x_73845 = x_73843 - y_73844;
        float x_73846 = 1.0F + x_73845;
        bool x_73847 = sle64((int64_t) 0, j_73829);
        bool y_73848 = slt64(j_73829, n_m_62372);
        bool bounds_check_73849 = x_73847 && y_73848;
        bool index_certs_73850;
        
        if (!bounds_check_73849) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_73829,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_62372, "].",
                                   "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  loess.fut:527:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:526:5-528:29\n   #8  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        float y_73851 = ((float *) ext_mem_68577.mem)[gtid_66921 * n_m_62372 +
                                                      j_73829];
        float x_73852 = x_73846 * y_73851;
        float x_73853 = y_73844 - x_73843;
        bool x_73854 = sle64((int64_t) 0, defunc_0_m_fun_arg_73833);
        bool y_73855 = slt64(defunc_0_m_fun_arg_73833, n_m_62372);
        bool bounds_check_73856 = x_73854 && y_73855;
        bool index_certs_73857;
        
        if (!bounds_check_73856) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_73833,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_62372, "].",
                                   "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  loess.fut:527:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:526:5-528:29\n   #8  loess.fut:490:1-530:26\n");
            return 1;
        }
        
        float y_73858 = ((float *) ext_mem_68577.mem)[gtid_66921 * n_m_62372 +
                                                      defunc_0_m_fun_arg_73833];
        float y_73859 = x_73853 * y_73858;
        float x_73860 = x_73852 + y_73859;
        float y_73861 = 2.0F * u2_73841;
        float x_73862 = u3_73842 - y_73861;
        float x_73863 = u_73840 + x_73862;
        float y_73864 = ((float *) ext_mem_68576.mem)[gtid_66921 * n_m_62372 +
                                                      j_73829];
        float x_73865 = x_73863 * y_73864;
        float y_73866 = i64_res_73837 * x_73865;
        float x_73867 = x_73860 + y_73866;
        float x_73868 = u3_73842 - u2_73841;
        float y_73869 = ((float *) ext_mem_68576.mem)[gtid_66921 * n_m_62372 +
                                                      defunc_0_m_fun_arg_73833];
        float x_73870 = x_73868 * y_73869;
        float y_73871 = i64_res_73837 * x_73870;
        float defunc_0_f_res_73872 = x_73867 + y_73871;
        
        ((float *) mem_68580.mem)[gtid_66923] = defunc_0_f_res_73872;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74284_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74284_end -
                 futhark_mc_segmap_parloop_74284_start;
        
        ctx->futhark_mc_segmap_parloop_74284_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74284_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74284_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74282(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66922 = tid;
    int num_tasks_73875 = info.nsubtasks;
    struct futhark_mc_task_74281 *futhark_mc_task_74281 =
                                 (struct futhark_mc_task_74281 *) args;
    struct futhark_context *ctx = futhark_mc_task_74281->ctx;
    uint64_t futhark_mc_segmap_task_74282_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74282_start = get_wall_time();
    
    int64_t n_62364 = futhark_mc_task_74281->free_n_62364;
    int64_t jump_62368 = futhark_mc_task_74281->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74281->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74281->free_i_62378;
    int64_t y_63683 = futhark_mc_task_74281->free_y_63683;
    int64_t gtid_66921 = futhark_mc_task_74281->free_gtid_66921;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_task_74281->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_task_74281->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    struct memblock mem_68580 = {.desc ="mem_68580", .mem =
                                 futhark_mc_task_74281->free_mem_68580, .size =
                                 0, .references =NULL};
    int64_t iter_73876;
    struct futhark_mc_segmap_parloop_struct_74283
    futhark_mc_segmap_parloop_struct_74283;
    
    futhark_mc_segmap_parloop_struct_74283.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74283.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74283.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74283.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74283.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74283.free_y_63683 = y_63683;
    futhark_mc_segmap_parloop_struct_74283.free_gtid_66921 = gtid_66921;
    futhark_mc_segmap_parloop_struct_74283.free_ext_mem_68576 =
        ext_mem_68576.mem;
    futhark_mc_segmap_parloop_struct_74283.free_ext_mem_68577 =
        ext_mem_68577.mem;
    futhark_mc_segmap_parloop_struct_74283.free_mem_68580 = mem_68580.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74284_task;
    
    futhark_mc_segmap_parloop_74284_task.name =
        "futhark_mc_segmap_parloop_74284";
    futhark_mc_segmap_parloop_74284_task.fn = futhark_mc_segmap_parloop_74284;
    futhark_mc_segmap_parloop_74284_task.args =
        &futhark_mc_segmap_parloop_struct_74283;
    futhark_mc_segmap_parloop_74284_task.iterations = iterations;
    futhark_mc_segmap_parloop_74284_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74284_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74284_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74284_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74284_task);
    
    if (futhark_mc_segmap_parloop_74284_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74284_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74284_total_end -
                 futhark_mc_segmap_parloop_74284_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74284_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74284_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74284_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74282_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74282_end -
                 futhark_mc_segmap_task_74282_start;
        
        ctx->futhark_mc_segmap_task_74282_runs[tid]++;
        ctx->futhark_mc_segmap_task_74282_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74282_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74279(void *args, int64_t start,
                                           int64_t end, int flat_tid_66920,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74278
    *futhark_mc_segmap_parloop_struct_74278 =
    (struct futhark_mc_segmap_parloop_struct_74278 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74278->ctx;
    uint64_t futhark_mc_segmap_parloop_74279_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74279_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_segmap_parloop_struct_74278->free_m_62363;
    int64_t n_62364 = futhark_mc_segmap_parloop_struct_74278->free_n_62364;
    int64_t jump_62368 =
            futhark_mc_segmap_parloop_struct_74278->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_segmap_parloop_struct_74278->free_n_m_62372;
    int64_t i_62378 = futhark_mc_segmap_parloop_struct_74278->free_i_62378;
    int64_t y_63683 = futhark_mc_segmap_parloop_struct_74278->free_y_63683;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_segmap_parloop_struct_74278->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_segmap_parloop_struct_74278->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    int64_t bytes_68578 =
            futhark_mc_segmap_parloop_struct_74278->free_bytes_68578;
    struct memblock mem_68599 = {.desc ="mem_68599", .mem =
                                 futhark_mc_segmap_parloop_struct_74278->free_mem_68599,
                                 .size =0, .references =NULL};
    size_t mem_68580_cached_sizze_74280 = 0;
    char *mem_68580 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73826 = start;
    
    if (mem_68580_cached_sizze_74280 < (size_t) bytes_68578) {
        mem_68580 = realloc(mem_68580, bytes_68578);
        mem_68580_cached_sizze_74280 = bytes_68578;
    }
    for (; iter_73826 < end; iter_73826++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73873 = m_62363;
        int64_t gtid_66921 = iter_73826;
        int64_t remnant_73874 = iter_73826 - gtid_66921;
        int64_t flat_tid_66922 = (int64_t) 0;
        int32_t num_tasks_73875;
        struct futhark_mc_task_74281 futhark_mc_task_74281;
        
        futhark_mc_task_74281.ctx = ctx;
        futhark_mc_task_74281.free_n_62364 = n_62364;
        futhark_mc_task_74281.free_jump_62368 = jump_62368;
        futhark_mc_task_74281.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74281.free_i_62378 = i_62378;
        futhark_mc_task_74281.free_y_63683 = y_63683;
        futhark_mc_task_74281.free_gtid_66921 = gtid_66921;
        futhark_mc_task_74281.free_ext_mem_68576 = ext_mem_68576.mem;
        futhark_mc_task_74281.free_ext_mem_68577 = ext_mem_68577.mem;
        futhark_mc_task_74281.free_mem_68580 = mem_68580;
        
        struct scheduler_segop futhark_mc_task_74281_task;
        
        futhark_mc_task_74281_task.args = &futhark_mc_task_74281;
        futhark_mc_task_74281_task.top_level_fn = futhark_mc_segmap_task_74282;
        futhark_mc_task_74281_task.name = "futhark_mc_segmap_task_74282";
        futhark_mc_task_74281_task.iterations = n_62364;
        futhark_mc_task_74281_task.task_time =
            &ctx->futhark_mc_segmap_task_74282_total_time;
        futhark_mc_task_74281_task.task_iter =
            &ctx->futhark_mc_segmap_task_74282_total_iter;
        futhark_mc_task_74281_task.sched = STATIC;
        futhark_mc_task_74281_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74282_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74281_task);
        
        if (futhark_mc_segmap_task_74282_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68599.mem + gtid_66921 * n_62364 * (int64_t) 4, mem_68580 +
                (int64_t) 0, n_62364 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68580);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74279_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74279_end -
                 futhark_mc_segmap_parloop_74279_start;
        
        ctx->futhark_mc_segmap_parloop_74279_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74279_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74279_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74277(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66920 = tid;
    int num_tasks_73772 = info.nsubtasks;
    struct futhark_mc_task_74272 *futhark_mc_task_74272 =
                                 (struct futhark_mc_task_74272 *) args;
    struct futhark_context *ctx = futhark_mc_task_74272->ctx;
    uint64_t futhark_mc_segmap_nested_task_74277_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74277_start = get_wall_time();
    
    int64_t m_62363 = futhark_mc_task_74272->free_m_62363;
    int64_t n_62364 = futhark_mc_task_74272->free_n_62364;
    int64_t jump_62368 = futhark_mc_task_74272->free_jump_62368;
    int64_t n_m_62372 = futhark_mc_task_74272->free_n_m_62372;
    int64_t i_62378 = futhark_mc_task_74272->free_i_62378;
    int64_t y_63683 = futhark_mc_task_74272->free_y_63683;
    struct memblock ext_mem_68576 = {.desc ="ext_mem_68576", .mem =
                                     futhark_mc_task_74272->free_ext_mem_68576,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68577 = {.desc ="ext_mem_68577", .mem =
                                     futhark_mc_task_74272->free_ext_mem_68577,
                                     .size =0, .references =NULL};
    int64_t bytes_68578 = futhark_mc_task_74272->free_bytes_68578;
    struct memblock mem_68599 = {.desc ="mem_68599", .mem =
                                 futhark_mc_task_74272->free_mem_68599, .size =
                                 0, .references =NULL};
    int64_t iter_73826;
    struct futhark_mc_segmap_parloop_struct_74278
    futhark_mc_segmap_parloop_struct_74278;
    
    futhark_mc_segmap_parloop_struct_74278.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74278.free_m_62363 = m_62363;
    futhark_mc_segmap_parloop_struct_74278.free_n_62364 = n_62364;
    futhark_mc_segmap_parloop_struct_74278.free_jump_62368 = jump_62368;
    futhark_mc_segmap_parloop_struct_74278.free_n_m_62372 = n_m_62372;
    futhark_mc_segmap_parloop_struct_74278.free_i_62378 = i_62378;
    futhark_mc_segmap_parloop_struct_74278.free_y_63683 = y_63683;
    futhark_mc_segmap_parloop_struct_74278.free_ext_mem_68576 =
        ext_mem_68576.mem;
    futhark_mc_segmap_parloop_struct_74278.free_ext_mem_68577 =
        ext_mem_68577.mem;
    futhark_mc_segmap_parloop_struct_74278.free_bytes_68578 = bytes_68578;
    futhark_mc_segmap_parloop_struct_74278.free_mem_68599 = mem_68599.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74279_task;
    
    futhark_mc_segmap_parloop_74279_task.name =
        "futhark_mc_segmap_parloop_74279";
    futhark_mc_segmap_parloop_74279_task.fn = futhark_mc_segmap_parloop_74279;
    futhark_mc_segmap_parloop_74279_task.args =
        &futhark_mc_segmap_parloop_struct_74278;
    futhark_mc_segmap_parloop_74279_task.iterations = iterations;
    futhark_mc_segmap_parloop_74279_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74279_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74279_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74279_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74279_task);
    
    if (futhark_mc_segmap_parloop_74279_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74279_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74279_total_end -
                 futhark_mc_segmap_parloop_74279_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74279_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74279_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74279_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74277_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74277_end -
                 futhark_mc_segmap_nested_task_74277_start;
        
        ctx->futhark_mc_segmap_nested_task_74277_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74277_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74277_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_73880,
                             struct memblock Y_mem_67460, int64_t m_62363,
                             int64_t n_62364, int64_t q_62366,
                             int64_t degree_62367, int64_t jump_62368,
                             int64_t jump_threshold_62369,
                             int64_t q_threshold_62370)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_68617;
    
    mem_out_68617.references = NULL;
    
    bool cond_62371 = jump_62368 == (int64_t) 1;
    int64_t n_m_62372;
    
    if (cond_62371) {
        n_m_62372 = n_62364;
    } else {
        bool zzero_62373 = jump_62368 == (int64_t) 0;
        bool nonzzero_62374 = !zzero_62373;
        bool nonzzero_cert_62375;
        
        if (!nonzzero_62374) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:497:38-45\n   #1  loess.fut:490:1-530:26\n");
            if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_62376 = sdiv64(n_62364, jump_62368);
        int64_t n_m_f_res_62377 = add64((int64_t) 1, x_62376);
        
        n_m_62372 = n_m_f_res_62377;
    }
    
    int64_t i_62378 = sub64(n_62364, (int64_t) 1);
    bool x_62379 = sle64((int64_t) 0, i_62378);
    bool y_62380 = slt64(i_62378, n_62364);
    bool bounds_check_62381 = x_62379 && y_62380;
    bool index_certs_62382;
    
    if (!bounds_check_62381) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_62378,
                               "] out of bounds for array of shape [",
                               (long long) n_62364, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:502:5-54\n   #3  loess.fut:490:1-530:26\n");
        if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_62384 = smin64(n_62364, q_62366);
    bool bounds_invalid_upwards_62385 = slt64(n_m_62372, (int64_t) 0);
    bool valid_62386 = !bounds_invalid_upwards_62385;
    bool range_valid_c_62387;
    
    if (!valid_62386) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_62372, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-373:7\n   #3  loess.fut:460:15-58\n   #4  loess.fut:507:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:506:5-508:26\n   #8  loess.fut:490:1-530:26\n");
        if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_62389 = slt64((int64_t) 1, min_res_62384);
    float i64_res_62390 = sitofp_i64_f32(q_62366);
    bool cond_62391 = slt64(jump_62368, jump_threshold_62369);
    bool cond_f_res_62392 = slt64(q_threshold_62370, q_62366);
    bool x_62393 = !cond_62391;
    bool y_62394 = cond_f_res_62392 && x_62393;
    bool cond_62395 = cond_62391 || y_62394;
    struct memblock ext_mem_68577;
    
    ext_mem_68577.references = NULL;
    
    struct memblock ext_mem_68576;
    
    ext_mem_68576.references = NULL;
    if (cond_62395) {
        bool match_lit_62398 = (int64_t) 0 == degree_62367;
        int64_t binop_x_67462 = m_62363 * n_m_62372;
        int64_t binop_y_67463 = (int64_t) 4 * binop_x_67462;
        int64_t bytes_67461 = smax64((int64_t) 0, binop_y_67463);
        struct memblock ext_mem_67902;
        
        ext_mem_67902.references = NULL;
        
        struct memblock ext_mem_67901;
        
        ext_mem_67901.references = NULL;
        if (match_lit_62398) {
            struct memblock mem_67464;
            
            mem_67464.references = NULL;
            if (memblock_alloc(ctx, &mem_67464, bytes_67461, "mem_67464")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_68618 = 0; i_68618 < m_62363; i_68618++) {
                for (int64_t i_68619 = 0; i_68619 < n_m_62372; i_68619++) {
                    ((float *) mem_67464.mem)[i_68618 * n_m_62372 + i_68619] =
                        0.0F;
                }
            }
            
            struct memblock mem_67594;
            
            mem_67594.references = NULL;
            if (memblock_alloc(ctx, &mem_67594, bytes_67461, "mem_67594")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_67466 = (int64_t) 8 * n_62364;
            int64_t bytes_67465 = smax64((int64_t) 0, binop_y_67466);
            int64_t binop_y_67469 = (int64_t) 4 * n_62364;
            int64_t bytes_67468 = smax64((int64_t) 0, binop_y_67469);
            int64_t binop_y_67481 = (int64_t) 4 * q_62366;
            int64_t bytes_67480 = smax64((int64_t) 0, binop_y_67481);
            int64_t binop_y_67484 = (int64_t) 4 * n_m_62372;
            int64_t bytes_67483 = smax64((int64_t) 0, binop_y_67484);
            int64_t flat_tid_63738 = (int64_t) 0;
            int32_t num_tasks_68620;
            int64_t flat_tid_63740 = (int64_t) 0;
            struct futhark_mc_task_73881 futhark_mc_task_73881;
            
            futhark_mc_task_73881.ctx = ctx;
            futhark_mc_task_73881.free_m_62363 = m_62363;
            futhark_mc_task_73881.free_n_62364 = n_62364;
            futhark_mc_task_73881.free_q_62366 = q_62366;
            futhark_mc_task_73881.free_jump_62368 = jump_62368;
            futhark_mc_task_73881.free_n_m_62372 = n_m_62372;
            futhark_mc_task_73881.free_i_62378 = i_62378;
            futhark_mc_task_73881.free_x_62379 = x_62379;
            futhark_mc_task_73881.free_min_res_62384 = min_res_62384;
            futhark_mc_task_73881.free_loop_cond_62389 = loop_cond_62389;
            futhark_mc_task_73881.free_i64_res_62390 = i64_res_62390;
            futhark_mc_task_73881.free_Y_mem_67460 = Y_mem_67460.mem;
            futhark_mc_task_73881.free_bytes_67465 = bytes_67465;
            futhark_mc_task_73881.free_bytes_67468 = bytes_67468;
            futhark_mc_task_73881.free_bytes_67480 = bytes_67480;
            futhark_mc_task_73881.free_bytes_67483 = bytes_67483;
            futhark_mc_task_73881.free_mem_67594 = mem_67594.mem;
            
            struct scheduler_segop futhark_mc_task_73881_task;
            
            futhark_mc_task_73881_task.args = &futhark_mc_task_73881;
            futhark_mc_task_73881_task.top_level_fn =
                futhark_mc_segmap_task_73882;
            futhark_mc_task_73881_task.name = "futhark_mc_segmap_task_73882";
            futhark_mc_task_73881_task.iterations = m_62363;
            futhark_mc_task_73881_task.task_time =
                &ctx->futhark_mc_segmap_task_73882_total_time;
            futhark_mc_task_73881_task.task_iter =
                &ctx->futhark_mc_segmap_task_73882_total_iter;
            futhark_mc_task_73881_task.sched = DYNAMIC;
            futhark_mc_task_73881_task.nested_fn =
                futhark_mc_segmap_nested_task_73892;
            
            int futhark_mc_segmap_task_73882_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_73881_task);
            
            if (futhark_mc_segmap_task_73882_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_67902, &mem_67594, "mem_67594") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67901, &mem_67464, "mem_67464") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67594, "mem_67594") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67464, "mem_67464") != 0)
                return 1;
        } else {
            bool match_lit_62581 = (int64_t) 1 == degree_62367;
            struct memblock ext_mem_67900;
            
            ext_mem_67900.references = NULL;
            
            struct memblock ext_mem_67899;
            
            ext_mem_67899.references = NULL;
            if (match_lit_62581) {
                struct memblock mem_67742;
                
                mem_67742.references = NULL;
                if (memblock_alloc(ctx, &mem_67742, bytes_67461, "mem_67742")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_67746;
                
                mem_67746.references = NULL;
                if (memblock_alloc(ctx, &mem_67746, bytes_67461, "mem_67746")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_67596 = (int64_t) 8 * n_62364;
                int64_t bytes_67595 = smax64((int64_t) 0, binop_y_67596);
                int64_t binop_y_67599 = (int64_t) 4 * n_62364;
                int64_t bytes_67598 = smax64((int64_t) 0, binop_y_67599);
                int64_t binop_y_67611 = (int64_t) 4 * q_62366;
                int64_t bytes_67610 = smax64((int64_t) 0, binop_y_67611);
                int64_t binop_y_67614 = (int64_t) 4 * n_m_62372;
                int64_t bytes_67613 = smax64((int64_t) 0, binop_y_67614);
                int64_t flat_tid_64194 = (int64_t) 0;
                int32_t num_tasks_69354;
                int64_t flat_tid_64196 = (int64_t) 0;
                struct futhark_mc_task_73938 futhark_mc_task_73938;
                
                futhark_mc_task_73938.ctx = ctx;
                futhark_mc_task_73938.free_m_62363 = m_62363;
                futhark_mc_task_73938.free_n_62364 = n_62364;
                futhark_mc_task_73938.free_q_62366 = q_62366;
                futhark_mc_task_73938.free_jump_62368 = jump_62368;
                futhark_mc_task_73938.free_n_m_62372 = n_m_62372;
                futhark_mc_task_73938.free_i_62378 = i_62378;
                futhark_mc_task_73938.free_x_62379 = x_62379;
                futhark_mc_task_73938.free_min_res_62384 = min_res_62384;
                futhark_mc_task_73938.free_loop_cond_62389 = loop_cond_62389;
                futhark_mc_task_73938.free_i64_res_62390 = i64_res_62390;
                futhark_mc_task_73938.free_Y_mem_67460 = Y_mem_67460.mem;
                futhark_mc_task_73938.free_bytes_67595 = bytes_67595;
                futhark_mc_task_73938.free_bytes_67598 = bytes_67598;
                futhark_mc_task_73938.free_bytes_67610 = bytes_67610;
                futhark_mc_task_73938.free_bytes_67613 = bytes_67613;
                futhark_mc_task_73938.free_mem_67742 = mem_67742.mem;
                futhark_mc_task_73938.free_mem_67746 = mem_67746.mem;
                
                struct scheduler_segop futhark_mc_task_73938_task;
                
                futhark_mc_task_73938_task.args = &futhark_mc_task_73938;
                futhark_mc_task_73938_task.top_level_fn =
                    futhark_mc_segmap_task_73939;
                futhark_mc_task_73938_task.name =
                    "futhark_mc_segmap_task_73939";
                futhark_mc_task_73938_task.iterations = m_62363;
                futhark_mc_task_73938_task.task_time =
                    &ctx->futhark_mc_segmap_task_73939_total_time;
                futhark_mc_task_73938_task.task_iter =
                    &ctx->futhark_mc_segmap_task_73939_total_iter;
                futhark_mc_task_73938_task.sched = DYNAMIC;
                futhark_mc_task_73938_task.nested_fn =
                    futhark_mc_segmap_nested_task_73950;
                
                int futhark_mc_segmap_task_73939_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_73938_task);
                
                if (futhark_mc_segmap_task_73939_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_67900, &mem_67742,
                                 "mem_67742") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67899, &mem_67746,
                                 "mem_67746") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67746, "mem_67746") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67742, "mem_67742") != 0)
                    return 1;
            } else {
                struct memblock mem_67894;
                
                mem_67894.references = NULL;
                if (memblock_alloc(ctx, &mem_67894, bytes_67461, "mem_67894")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_67898;
                
                mem_67898.references = NULL;
                if (memblock_alloc(ctx, &mem_67898, bytes_67461, "mem_67898")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_67748 = (int64_t) 8 * n_62364;
                int64_t bytes_67747 = smax64((int64_t) 0, binop_y_67748);
                int64_t binop_y_67751 = (int64_t) 4 * n_62364;
                int64_t bytes_67750 = smax64((int64_t) 0, binop_y_67751);
                int64_t binop_y_67763 = (int64_t) 4 * q_62366;
                int64_t bytes_67762 = smax64((int64_t) 0, binop_y_67763);
                int64_t binop_y_67766 = (int64_t) 4 * n_m_62372;
                int64_t bytes_67765 = smax64((int64_t) 0, binop_y_67766);
                int64_t flat_tid_64735 = (int64_t) 0;
                int32_t num_tasks_70226;
                int64_t flat_tid_64737 = (int64_t) 0;
                struct futhark_mc_task_74000 futhark_mc_task_74000;
                
                futhark_mc_task_74000.ctx = ctx;
                futhark_mc_task_74000.free_m_62363 = m_62363;
                futhark_mc_task_74000.free_n_62364 = n_62364;
                futhark_mc_task_74000.free_q_62366 = q_62366;
                futhark_mc_task_74000.free_jump_62368 = jump_62368;
                futhark_mc_task_74000.free_n_m_62372 = n_m_62372;
                futhark_mc_task_74000.free_i_62378 = i_62378;
                futhark_mc_task_74000.free_x_62379 = x_62379;
                futhark_mc_task_74000.free_min_res_62384 = min_res_62384;
                futhark_mc_task_74000.free_loop_cond_62389 = loop_cond_62389;
                futhark_mc_task_74000.free_i64_res_62390 = i64_res_62390;
                futhark_mc_task_74000.free_Y_mem_67460 = Y_mem_67460.mem;
                futhark_mc_task_74000.free_bytes_67747 = bytes_67747;
                futhark_mc_task_74000.free_bytes_67750 = bytes_67750;
                futhark_mc_task_74000.free_bytes_67762 = bytes_67762;
                futhark_mc_task_74000.free_bytes_67765 = bytes_67765;
                futhark_mc_task_74000.free_mem_67894 = mem_67894.mem;
                futhark_mc_task_74000.free_mem_67898 = mem_67898.mem;
                
                struct scheduler_segop futhark_mc_task_74000_task;
                
                futhark_mc_task_74000_task.args = &futhark_mc_task_74000;
                futhark_mc_task_74000_task.top_level_fn =
                    futhark_mc_segmap_task_74001;
                futhark_mc_task_74000_task.name =
                    "futhark_mc_segmap_task_74001";
                futhark_mc_task_74000_task.iterations = m_62363;
                futhark_mc_task_74000_task.task_time =
                    &ctx->futhark_mc_segmap_task_74001_total_time;
                futhark_mc_task_74000_task.task_iter =
                    &ctx->futhark_mc_segmap_task_74001_total_iter;
                futhark_mc_task_74000_task.sched = DYNAMIC;
                futhark_mc_task_74000_task.nested_fn =
                    futhark_mc_segmap_nested_task_74012;
                
                int futhark_mc_segmap_task_74001_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_74000_task);
                
                if (futhark_mc_segmap_task_74001_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_67900, &mem_67894,
                                 "mem_67894") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67899, &mem_67898,
                                 "mem_67898") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67898, "mem_67898") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67894, "mem_67894") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_67902, &ext_mem_67900,
                             "ext_mem_67900") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67901, &ext_mem_67899,
                             "ext_mem_67899") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67899, "ext_mem_67899") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67900, "ext_mem_67900") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_68577, &ext_mem_67902,
                         "ext_mem_67902") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_68576, &ext_mem_67901,
                         "ext_mem_67901") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67901, "ext_mem_67901") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67902, "ext_mem_67902") != 0)
            return 1;
    } else {
        bool match_lit_63034 = (int64_t) 0 == degree_62367;
        int64_t binop_x_67904 = m_62363 * n_m_62372;
        int64_t binop_y_67905 = (int64_t) 4 * binop_x_67904;
        int64_t bytes_67903 = smax64((int64_t) 0, binop_y_67905);
        struct memblock ext_mem_68575;
        
        ext_mem_68575.references = NULL;
        
        struct memblock ext_mem_68574;
        
        ext_mem_68574.references = NULL;
        if (match_lit_63034) {
            struct memblock mem_67906;
            
            mem_67906.references = NULL;
            if (memblock_alloc(ctx, &mem_67906, bytes_67903, "mem_67906")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_71230 = 0; i_71230 < m_62363; i_71230++) {
                for (int64_t i_71231 = 0; i_71231 < n_m_62372; i_71231++) {
                    ((float *) mem_67906.mem)[i_71230 * n_m_62372 + i_71231] =
                        0.0F;
                }
            }
            
            struct memblock mem_68069;
            
            mem_68069.references = NULL;
            if (memblock_alloc(ctx, &mem_68069, bytes_67903, "mem_68069")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_67908 = (int64_t) 8 * n_62364;
            int64_t bytes_67907 = smax64((int64_t) 0, binop_y_67908);
            int64_t binop_y_67911 = (int64_t) 4 * n_62364;
            int64_t bytes_67910 = smax64((int64_t) 0, binop_y_67911);
            int64_t binop_y_67923 = (int64_t) 4 * q_62366;
            int64_t bytes_67922 = smax64((int64_t) 0, binop_y_67923);
            int64_t binop_y_67944 = (int64_t) 4 * n_m_62372;
            int64_t bytes_67943 = smax64((int64_t) 0, binop_y_67944);
            int64_t flat_tid_65372 = (int64_t) 0;
            int32_t num_tasks_71232;
            int64_t flat_tid_65374 = (int64_t) 0;
            struct futhark_mc_task_74064 futhark_mc_task_74064;
            
            futhark_mc_task_74064.ctx = ctx;
            futhark_mc_task_74064.free_m_62363 = m_62363;
            futhark_mc_task_74064.free_n_62364 = n_62364;
            futhark_mc_task_74064.free_q_62366 = q_62366;
            futhark_mc_task_74064.free_jump_62368 = jump_62368;
            futhark_mc_task_74064.free_n_m_62372 = n_m_62372;
            futhark_mc_task_74064.free_i_62378 = i_62378;
            futhark_mc_task_74064.free_x_62379 = x_62379;
            futhark_mc_task_74064.free_min_res_62384 = min_res_62384;
            futhark_mc_task_74064.free_loop_cond_62389 = loop_cond_62389;
            futhark_mc_task_74064.free_i64_res_62390 = i64_res_62390;
            futhark_mc_task_74064.free_Y_mem_67460 = Y_mem_67460.mem;
            futhark_mc_task_74064.free_bytes_67907 = bytes_67907;
            futhark_mc_task_74064.free_bytes_67910 = bytes_67910;
            futhark_mc_task_74064.free_bytes_67922 = bytes_67922;
            futhark_mc_task_74064.free_bytes_67943 = bytes_67943;
            futhark_mc_task_74064.free_mem_68069 = mem_68069.mem;
            
            struct scheduler_segop futhark_mc_task_74064_task;
            
            futhark_mc_task_74064_task.args = &futhark_mc_task_74064;
            futhark_mc_task_74064_task.top_level_fn =
                futhark_mc_segmap_task_74065;
            futhark_mc_task_74064_task.name = "futhark_mc_segmap_task_74065";
            futhark_mc_task_74064_task.iterations = m_62363;
            futhark_mc_task_74064_task.task_time =
                &ctx->futhark_mc_segmap_task_74065_total_time;
            futhark_mc_task_74064_task.task_iter =
                &ctx->futhark_mc_segmap_task_74065_total_iter;
            futhark_mc_task_74064_task.sched = DYNAMIC;
            futhark_mc_task_74064_task.nested_fn =
                futhark_mc_segmap_nested_task_74076;
            
            int futhark_mc_segmap_task_74065_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_74064_task);
            
            if (futhark_mc_segmap_task_74065_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_68575, &mem_68069, "mem_68069") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_68574, &mem_67906, "mem_67906") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_68069, "mem_68069") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67906, "mem_67906") != 0)
                return 1;
        } else {
            bool match_lit_63205 = (int64_t) 1 == degree_62367;
            struct memblock ext_mem_68573;
            
            ext_mem_68573.references = NULL;
            
            struct memblock ext_mem_68572;
            
            ext_mem_68572.references = NULL;
            if (match_lit_63205) {
                struct memblock mem_68283;
                
                mem_68283.references = NULL;
                if (memblock_alloc(ctx, &mem_68283, bytes_67903, "mem_68283")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_68287;
                
                mem_68287.references = NULL;
                if (memblock_alloc(ctx, &mem_68287, bytes_67903, "mem_68287")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_68071 = (int64_t) 8 * n_62364;
                int64_t bytes_68070 = smax64((int64_t) 0, binop_y_68071);
                int64_t binop_y_68074 = (int64_t) 4 * n_62364;
                int64_t bytes_68073 = smax64((int64_t) 0, binop_y_68074);
                int64_t binop_y_68086 = (int64_t) 4 * q_62366;
                int64_t bytes_68085 = smax64((int64_t) 0, binop_y_68086);
                int64_t binop_y_68125 = (int64_t) 4 * n_m_62372;
                int64_t bytes_68124 = smax64((int64_t) 0, binop_y_68125);
                int64_t flat_tid_65792 = (int64_t) 0;
                int32_t num_tasks_71916;
                int64_t flat_tid_65794 = (int64_t) 0;
                struct futhark_mc_task_74124 futhark_mc_task_74124;
                
                futhark_mc_task_74124.ctx = ctx;
                futhark_mc_task_74124.free_m_62363 = m_62363;
                futhark_mc_task_74124.free_n_62364 = n_62364;
                futhark_mc_task_74124.free_q_62366 = q_62366;
                futhark_mc_task_74124.free_jump_62368 = jump_62368;
                futhark_mc_task_74124.free_n_m_62372 = n_m_62372;
                futhark_mc_task_74124.free_i_62378 = i_62378;
                futhark_mc_task_74124.free_x_62379 = x_62379;
                futhark_mc_task_74124.free_min_res_62384 = min_res_62384;
                futhark_mc_task_74124.free_loop_cond_62389 = loop_cond_62389;
                futhark_mc_task_74124.free_i64_res_62390 = i64_res_62390;
                futhark_mc_task_74124.free_Y_mem_67460 = Y_mem_67460.mem;
                futhark_mc_task_74124.free_bytes_68070 = bytes_68070;
                futhark_mc_task_74124.free_bytes_68073 = bytes_68073;
                futhark_mc_task_74124.free_bytes_68085 = bytes_68085;
                futhark_mc_task_74124.free_bytes_68124 = bytes_68124;
                futhark_mc_task_74124.free_mem_68283 = mem_68283.mem;
                futhark_mc_task_74124.free_mem_68287 = mem_68287.mem;
                
                struct scheduler_segop futhark_mc_task_74124_task;
                
                futhark_mc_task_74124_task.args = &futhark_mc_task_74124;
                futhark_mc_task_74124_task.top_level_fn =
                    futhark_mc_segmap_task_74125;
                futhark_mc_task_74124_task.name =
                    "futhark_mc_segmap_task_74125";
                futhark_mc_task_74124_task.iterations = m_62363;
                futhark_mc_task_74124_task.task_time =
                    &ctx->futhark_mc_segmap_task_74125_total_time;
                futhark_mc_task_74124_task.task_iter =
                    &ctx->futhark_mc_segmap_task_74125_total_iter;
                futhark_mc_task_74124_task.sched = DYNAMIC;
                futhark_mc_task_74124_task.nested_fn =
                    futhark_mc_segmap_nested_task_74138;
                
                int futhark_mc_segmap_task_74125_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_74124_task);
                
                if (futhark_mc_segmap_task_74125_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_68573, &mem_68283,
                                 "mem_68283") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_68572, &mem_68287,
                                 "mem_68287") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68287, "mem_68287") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68283, "mem_68283") != 0)
                    return 1;
            } else {
                struct memblock mem_68567;
                
                mem_68567.references = NULL;
                if (memblock_alloc(ctx, &mem_68567, bytes_67903, "mem_68567")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_68571;
                
                mem_68571.references = NULL;
                if (memblock_alloc(ctx, &mem_68571, bytes_67903, "mem_68571")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_68289 = (int64_t) 8 * n_62364;
                int64_t bytes_68288 = smax64((int64_t) 0, binop_y_68289);
                int64_t binop_y_68292 = (int64_t) 4 * n_62364;
                int64_t bytes_68291 = smax64((int64_t) 0, binop_y_68292);
                int64_t binop_y_68304 = (int64_t) 4 * q_62366;
                int64_t bytes_68303 = smax64((int64_t) 0, binop_y_68304);
                int64_t binop_y_68379 = (int64_t) 4 * n_m_62372;
                int64_t bytes_68378 = smax64((int64_t) 0, binop_y_68379);
                int64_t flat_tid_66300 = (int64_t) 0;
                int32_t num_tasks_72753;
                int64_t flat_tid_66302 = (int64_t) 0;
                struct futhark_mc_task_74192 futhark_mc_task_74192;
                
                futhark_mc_task_74192.ctx = ctx;
                futhark_mc_task_74192.free_m_62363 = m_62363;
                futhark_mc_task_74192.free_n_62364 = n_62364;
                futhark_mc_task_74192.free_q_62366 = q_62366;
                futhark_mc_task_74192.free_jump_62368 = jump_62368;
                futhark_mc_task_74192.free_n_m_62372 = n_m_62372;
                futhark_mc_task_74192.free_i_62378 = i_62378;
                futhark_mc_task_74192.free_x_62379 = x_62379;
                futhark_mc_task_74192.free_min_res_62384 = min_res_62384;
                futhark_mc_task_74192.free_loop_cond_62389 = loop_cond_62389;
                futhark_mc_task_74192.free_i64_res_62390 = i64_res_62390;
                futhark_mc_task_74192.free_Y_mem_67460 = Y_mem_67460.mem;
                futhark_mc_task_74192.free_bytes_68288 = bytes_68288;
                futhark_mc_task_74192.free_bytes_68291 = bytes_68291;
                futhark_mc_task_74192.free_bytes_68303 = bytes_68303;
                futhark_mc_task_74192.free_bytes_68378 = bytes_68378;
                futhark_mc_task_74192.free_mem_68567 = mem_68567.mem;
                futhark_mc_task_74192.free_mem_68571 = mem_68571.mem;
                
                struct scheduler_segop futhark_mc_task_74192_task;
                
                futhark_mc_task_74192_task.args = &futhark_mc_task_74192;
                futhark_mc_task_74192_task.top_level_fn =
                    futhark_mc_segmap_task_74193;
                futhark_mc_task_74192_task.name =
                    "futhark_mc_segmap_task_74193";
                futhark_mc_task_74192_task.iterations = m_62363;
                futhark_mc_task_74192_task.task_time =
                    &ctx->futhark_mc_segmap_task_74193_total_time;
                futhark_mc_task_74192_task.task_iter =
                    &ctx->futhark_mc_segmap_task_74193_total_iter;
                futhark_mc_task_74192_task.sched = DYNAMIC;
                futhark_mc_task_74192_task.nested_fn =
                    futhark_mc_segmap_nested_task_74208;
                
                int futhark_mc_segmap_task_74193_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_74192_task);
                
                if (futhark_mc_segmap_task_74193_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_68573, &mem_68567,
                                 "mem_68567") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_68572, &mem_68571,
                                 "mem_68571") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68571, "mem_68571") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68567, "mem_68567") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_68575, &ext_mem_68573,
                             "ext_mem_68573") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_68574, &ext_mem_68572,
                             "ext_mem_68572") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68572, "ext_mem_68572") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68573, "ext_mem_68573") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_68577, &ext_mem_68575,
                         "ext_mem_68575") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_68576, &ext_mem_68574,
                         "ext_mem_68574") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_68574, "ext_mem_68574") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_68575, "ext_mem_68575") != 0)
            return 1;
    }
    
    bool cond_63678 = slt64((int64_t) 1, jump_62368);
    int64_t binop_x_68597 = m_62363 * n_62364;
    int64_t binop_y_68598 = (int64_t) 4 * binop_x_68597;
    int64_t bytes_68596 = smax64((int64_t) 0, binop_y_68598);
    int64_t ext_68601;
    
    if (cond_63678) {
        ext_68601 = n_62364;
    } else {
        ext_68601 = n_m_62372;
    }
    
    struct memblock ext_mem_68600;
    
    ext_mem_68600.references = NULL;
    if (cond_63678) {
        bool zzero_63680 = jump_62368 == (int64_t) 0;
        bool nonzzero_63681 = !zzero_63680;
        bool nonzzero_cert_63682;
        
        if (!nonzzero_63681) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:474:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  loess.fut:527:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:526:5-528:29\n   #8  loess.fut:490:1-530:26\n");
            if (memblock_unref(ctx, &ext_mem_68600, "ext_mem_68600") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68576, "ext_mem_68576") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68577, "ext_mem_68577") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_63683 = sub64(n_m_62372, (int64_t) 1);
        struct memblock mem_68599;
        
        mem_68599.references = NULL;
        if (memblock_alloc(ctx, &mem_68599, bytes_68596, "mem_68599")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_68579 = (int64_t) 4 * n_62364;
        int64_t bytes_68578 = smax64((int64_t) 0, binop_y_68579);
        int64_t flat_tid_66918 = (int64_t) 0;
        int32_t num_tasks_73772;
        int64_t flat_tid_66920 = (int64_t) 0;
        struct futhark_mc_task_74272 futhark_mc_task_74272;
        
        futhark_mc_task_74272.ctx = ctx;
        futhark_mc_task_74272.free_m_62363 = m_62363;
        futhark_mc_task_74272.free_n_62364 = n_62364;
        futhark_mc_task_74272.free_jump_62368 = jump_62368;
        futhark_mc_task_74272.free_n_m_62372 = n_m_62372;
        futhark_mc_task_74272.free_i_62378 = i_62378;
        futhark_mc_task_74272.free_y_63683 = y_63683;
        futhark_mc_task_74272.free_ext_mem_68576 = ext_mem_68576.mem;
        futhark_mc_task_74272.free_ext_mem_68577 = ext_mem_68577.mem;
        futhark_mc_task_74272.free_bytes_68578 = bytes_68578;
        futhark_mc_task_74272.free_mem_68599 = mem_68599.mem;
        
        struct scheduler_segop futhark_mc_task_74272_task;
        
        futhark_mc_task_74272_task.args = &futhark_mc_task_74272;
        futhark_mc_task_74272_task.top_level_fn = futhark_mc_segmap_task_74273;
        futhark_mc_task_74272_task.name = "futhark_mc_segmap_task_74273";
        futhark_mc_task_74272_task.iterations = m_62363;
        futhark_mc_task_74272_task.task_time =
            &ctx->futhark_mc_segmap_task_74273_total_time;
        futhark_mc_task_74272_task.task_iter =
            &ctx->futhark_mc_segmap_task_74273_total_iter;
        futhark_mc_task_74272_task.sched = STATIC;
        futhark_mc_task_74272_task.nested_fn =
            futhark_mc_segmap_nested_task_74277;
        
        int futhark_mc_segmap_task_74273_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74272_task);
        
        if (futhark_mc_segmap_task_74273_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_68600, &mem_68599, "mem_68599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_68599, "mem_68599") != 0)
            return 1;
    } else {
        bool dim_match_63735 = n_62364 == n_m_62372;
        bool empty_or_match_cert_63736;
        
        if (!dim_match_63735) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_62363, ", ", (long long) n_m_62372,
                          ") cannot match shape of type `[",
                          (long long) m_62363, "][", (long long) n_62364,
                          "]f32`.",
                          "-> #0  loess.fut:530:5-26\n   #1  loess.fut:490:1-530:26\n");
            if (memblock_unref(ctx, &ext_mem_68600, "ext_mem_68600") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68576, "ext_mem_68576") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68577, "ext_mem_68577") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_68600, &ext_mem_68577,
                         "ext_mem_68577") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_68576, "ext_mem_68576") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68577, "ext_mem_68577") != 0)
        return 1;
    
    struct memblock mem_68605;
    
    mem_68605.references = NULL;
    if (memblock_alloc(ctx, &mem_68605, bytes_68596, "mem_68605")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_68605.mem + (int64_t) 0, ext_mem_68600.mem + (int64_t) 0,
            m_62363 * n_62364 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_68600, "ext_mem_68600") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_68617, &mem_68605, "mem_68605") != 0)
        return 1;
    (*mem_out_p_73880).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_73880, &mem_out_68617, "mem_out_68617") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_68605, "mem_68605") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68600, "ext_mem_68600") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68576, "ext_mem_68576") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68577, "ext_mem_68577") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_68617, "mem_out_68617") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_67460;
    
    Y_mem_67460.references = NULL;
    
    int64_t m_62363;
    int64_t n_62364;
    int64_t q_62366;
    int64_t degree_62367;
    int64_t jump_62368;
    int64_t jump_threshold_62369;
    int64_t q_threshold_62370;
    struct memblock mem_out_68617;
    
    mem_out_68617.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_67460 = in0->mem;
    m_62363 = in0->shape[0];
    n_62364 = in0->shape[1];
    q_62366 = in1;
    degree_62367 = in2;
    jump_62368 = in3;
    jump_threshold_62369 = in4;
    q_threshold_62370 = in5;
    if (!(m_62363 == in0->shape[0] && n_62364 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_68617, Y_mem_67460, m_62363,
                                n_62364, q_62366, degree_62367, jump_62368,
                                jump_threshold_62369, q_threshold_62370);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_68617;
            (*out0)->shape[0] = m_62363;
            (*out0)->shape[1] = n_62364;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
