// Generated by Futhark 0.21.0
// git: 0d9594f (Wed Sep 8 23:21:55 2021 +0200)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_81637_total_runtime;
    int *futhark_mc_segmap_parloop_81637_runs;
    int64_t *futhark_mc_segmap_parloop_81637_iter;
    int64_t futhark_mc_segmap_parloop_81637_total_total_runtime;
    int futhark_mc_segmap_parloop_81637_total_runs;
    int64_t futhark_mc_segmap_parloop_81637_total_iter;
    int64_t *futhark_mc_segmap_task_81635_total_runtime;
    int *futhark_mc_segmap_task_81635_runs;
    int64_t *futhark_mc_segmap_task_81635_iter;
    int64_t futhark_mc_segmap_task_81635_total_time;
    int64_t futhark_mc_segmap_task_81635_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81657_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81657_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81657_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81657_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81657_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81657_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81659_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81659_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81659_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81659_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81659_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81659_total_iter;
    int64_t *futhark_mc_segscan_task_81654_total_runtime;
    int *futhark_mc_segscan_task_81654_runs;
    int64_t *futhark_mc_segscan_task_81654_iter;
    int64_t futhark_mc_segscan_task_81654_total_time;
    int64_t futhark_mc_segscan_task_81654_total_iter;
    int64_t *futhark_mc_segmap_parloop_81663_total_runtime;
    int *futhark_mc_segmap_parloop_81663_runs;
    int64_t *futhark_mc_segmap_parloop_81663_iter;
    int64_t futhark_mc_segmap_parloop_81663_total_total_runtime;
    int futhark_mc_segmap_parloop_81663_total_runs;
    int64_t futhark_mc_segmap_parloop_81663_total_iter;
    int64_t *futhark_mc_segmap_task_81661_total_runtime;
    int *futhark_mc_segmap_task_81661_runs;
    int64_t *futhark_mc_segmap_task_81661_iter;
    int64_t futhark_mc_segmap_task_81661_total_time;
    int64_t futhark_mc_segmap_task_81661_total_iter;
    int64_t *futhark_mc_segmap_parloop_81667_total_runtime;
    int *futhark_mc_segmap_parloop_81667_runs;
    int64_t *futhark_mc_segmap_parloop_81667_iter;
    int64_t futhark_mc_segmap_parloop_81667_total_total_runtime;
    int futhark_mc_segmap_parloop_81667_total_runs;
    int64_t futhark_mc_segmap_parloop_81667_total_iter;
    int64_t *futhark_mc_segmap_task_81665_total_runtime;
    int *futhark_mc_segmap_task_81665_runs;
    int64_t *futhark_mc_segmap_task_81665_iter;
    int64_t futhark_mc_segmap_task_81665_total_time;
    int64_t futhark_mc_segmap_task_81665_total_iter;
    int64_t *futhark_mc_segmap_parloop_81671_total_runtime;
    int *futhark_mc_segmap_parloop_81671_runs;
    int64_t *futhark_mc_segmap_parloop_81671_iter;
    int64_t futhark_mc_segmap_parloop_81671_total_total_runtime;
    int futhark_mc_segmap_parloop_81671_total_runs;
    int64_t futhark_mc_segmap_parloop_81671_total_iter;
    int64_t *futhark_mc_segmap_task_81669_total_runtime;
    int *futhark_mc_segmap_task_81669_runs;
    int64_t *futhark_mc_segmap_task_81669_iter;
    int64_t futhark_mc_segmap_task_81669_total_time;
    int64_t futhark_mc_segmap_task_81669_total_iter;
    int64_t *futhark_mc_segmap_parloop_81675_total_runtime;
    int *futhark_mc_segmap_parloop_81675_runs;
    int64_t *futhark_mc_segmap_parloop_81675_iter;
    int64_t futhark_mc_segmap_parloop_81675_total_total_runtime;
    int futhark_mc_segmap_parloop_81675_total_runs;
    int64_t futhark_mc_segmap_parloop_81675_total_iter;
    int64_t *futhark_mc_segmap_task_81673_total_runtime;
    int *futhark_mc_segmap_task_81673_runs;
    int64_t *futhark_mc_segmap_task_81673_iter;
    int64_t futhark_mc_segmap_task_81673_total_time;
    int64_t futhark_mc_segmap_task_81673_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81683_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81683_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81683_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81683_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81683_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81683_total_iter;
    int64_t *futhark_mc_segred_task_81680_total_runtime;
    int *futhark_mc_segred_task_81680_runs;
    int64_t *futhark_mc_segred_task_81680_iter;
    int64_t futhark_mc_segred_task_81680_total_time;
    int64_t futhark_mc_segred_task_81680_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81688_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81688_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81688_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81688_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81688_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81688_total_iter;
    int64_t *futhark_mc_segred_task_81685_total_runtime;
    int *futhark_mc_segred_task_81685_runs;
    int64_t *futhark_mc_segred_task_81685_iter;
    int64_t futhark_mc_segred_task_81685_total_time;
    int64_t futhark_mc_segred_task_81685_total_iter;
    int64_t *futhark_mc_segmap_parloop_81678_total_runtime;
    int *futhark_mc_segmap_parloop_81678_runs;
    int64_t *futhark_mc_segmap_parloop_81678_iter;
    int64_t futhark_mc_segmap_parloop_81678_total_total_runtime;
    int futhark_mc_segmap_parloop_81678_total_runs;
    int64_t futhark_mc_segmap_parloop_81678_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81676_total_runtime;
    int *futhark_mc_segmap_nested_task_81676_runs;
    int64_t *futhark_mc_segmap_nested_task_81676_iter;
    int64_t *futhark_mc_segmap_parloop_81646_total_runtime;
    int *futhark_mc_segmap_parloop_81646_runs;
    int64_t *futhark_mc_segmap_parloop_81646_iter;
    int64_t futhark_mc_segmap_parloop_81646_total_total_runtime;
    int futhark_mc_segmap_parloop_81646_total_runs;
    int64_t futhark_mc_segmap_parloop_81646_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81644_total_runtime;
    int *futhark_mc_segmap_nested_task_81644_runs;
    int64_t *futhark_mc_segmap_nested_task_81644_iter;
    int64_t *futhark_mc_segmap_parloop_81692_total_runtime;
    int *futhark_mc_segmap_parloop_81692_runs;
    int64_t *futhark_mc_segmap_parloop_81692_iter;
    int64_t futhark_mc_segmap_parloop_81692_total_total_runtime;
    int futhark_mc_segmap_parloop_81692_total_runs;
    int64_t futhark_mc_segmap_parloop_81692_total_iter;
    int64_t *futhark_mc_segmap_task_81690_total_runtime;
    int *futhark_mc_segmap_task_81690_runs;
    int64_t *futhark_mc_segmap_task_81690_iter;
    int64_t futhark_mc_segmap_task_81690_total_time;
    int64_t futhark_mc_segmap_task_81690_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81714_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81714_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81714_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81714_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81714_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81714_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81716_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81716_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81716_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81716_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81716_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81716_total_iter;
    int64_t *futhark_mc_segscan_task_81711_total_runtime;
    int *futhark_mc_segscan_task_81711_runs;
    int64_t *futhark_mc_segscan_task_81711_iter;
    int64_t futhark_mc_segscan_task_81711_total_time;
    int64_t futhark_mc_segscan_task_81711_total_iter;
    int64_t *futhark_mc_segmap_parloop_81720_total_runtime;
    int *futhark_mc_segmap_parloop_81720_runs;
    int64_t *futhark_mc_segmap_parloop_81720_iter;
    int64_t futhark_mc_segmap_parloop_81720_total_total_runtime;
    int futhark_mc_segmap_parloop_81720_total_runs;
    int64_t futhark_mc_segmap_parloop_81720_total_iter;
    int64_t *futhark_mc_segmap_task_81718_total_runtime;
    int *futhark_mc_segmap_task_81718_runs;
    int64_t *futhark_mc_segmap_task_81718_iter;
    int64_t futhark_mc_segmap_task_81718_total_time;
    int64_t futhark_mc_segmap_task_81718_total_iter;
    int64_t *futhark_mc_segmap_parloop_81724_total_runtime;
    int *futhark_mc_segmap_parloop_81724_runs;
    int64_t *futhark_mc_segmap_parloop_81724_iter;
    int64_t futhark_mc_segmap_parloop_81724_total_total_runtime;
    int futhark_mc_segmap_parloop_81724_total_runs;
    int64_t futhark_mc_segmap_parloop_81724_total_iter;
    int64_t *futhark_mc_segmap_task_81722_total_runtime;
    int *futhark_mc_segmap_task_81722_runs;
    int64_t *futhark_mc_segmap_task_81722_iter;
    int64_t futhark_mc_segmap_task_81722_total_time;
    int64_t futhark_mc_segmap_task_81722_total_iter;
    int64_t *futhark_mc_segmap_parloop_81728_total_runtime;
    int *futhark_mc_segmap_parloop_81728_runs;
    int64_t *futhark_mc_segmap_parloop_81728_iter;
    int64_t futhark_mc_segmap_parloop_81728_total_total_runtime;
    int futhark_mc_segmap_parloop_81728_total_runs;
    int64_t futhark_mc_segmap_parloop_81728_total_iter;
    int64_t *futhark_mc_segmap_task_81726_total_runtime;
    int *futhark_mc_segmap_task_81726_runs;
    int64_t *futhark_mc_segmap_task_81726_iter;
    int64_t futhark_mc_segmap_task_81726_total_time;
    int64_t futhark_mc_segmap_task_81726_total_iter;
    int64_t *futhark_mc_segmap_parloop_81732_total_runtime;
    int *futhark_mc_segmap_parloop_81732_runs;
    int64_t *futhark_mc_segmap_parloop_81732_iter;
    int64_t futhark_mc_segmap_parloop_81732_total_total_runtime;
    int futhark_mc_segmap_parloop_81732_total_runs;
    int64_t futhark_mc_segmap_parloop_81732_total_iter;
    int64_t *futhark_mc_segmap_task_81730_total_runtime;
    int *futhark_mc_segmap_task_81730_runs;
    int64_t *futhark_mc_segmap_task_81730_iter;
    int64_t futhark_mc_segmap_task_81730_total_time;
    int64_t futhark_mc_segmap_task_81730_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81742_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81742_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81742_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81742_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81742_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81742_total_iter;
    int64_t *futhark_mc_segred_task_81737_total_runtime;
    int *futhark_mc_segred_task_81737_runs;
    int64_t *futhark_mc_segred_task_81737_iter;
    int64_t futhark_mc_segred_task_81737_total_time;
    int64_t futhark_mc_segred_task_81737_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81748_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81748_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81748_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81748_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81748_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81748_total_iter;
    int64_t *futhark_mc_segred_task_81744_total_runtime;
    int *futhark_mc_segred_task_81744_runs;
    int64_t *futhark_mc_segred_task_81744_iter;
    int64_t futhark_mc_segred_task_81744_total_time;
    int64_t futhark_mc_segred_task_81744_total_iter;
    int64_t *futhark_mc_segmap_parloop_81735_total_runtime;
    int *futhark_mc_segmap_parloop_81735_runs;
    int64_t *futhark_mc_segmap_parloop_81735_iter;
    int64_t futhark_mc_segmap_parloop_81735_total_total_runtime;
    int futhark_mc_segmap_parloop_81735_total_runs;
    int64_t futhark_mc_segmap_parloop_81735_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81733_total_runtime;
    int *futhark_mc_segmap_nested_task_81733_runs;
    int64_t *futhark_mc_segmap_nested_task_81733_iter;
    int64_t *futhark_mc_segmap_parloop_81702_total_runtime;
    int *futhark_mc_segmap_parloop_81702_runs;
    int64_t *futhark_mc_segmap_parloop_81702_iter;
    int64_t futhark_mc_segmap_parloop_81702_total_total_runtime;
    int futhark_mc_segmap_parloop_81702_total_runs;
    int64_t futhark_mc_segmap_parloop_81702_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81700_total_runtime;
    int *futhark_mc_segmap_nested_task_81700_runs;
    int64_t *futhark_mc_segmap_nested_task_81700_iter;
    int64_t *futhark_mc_segmap_parloop_81752_total_runtime;
    int *futhark_mc_segmap_parloop_81752_runs;
    int64_t *futhark_mc_segmap_parloop_81752_iter;
    int64_t futhark_mc_segmap_parloop_81752_total_total_runtime;
    int futhark_mc_segmap_parloop_81752_total_runs;
    int64_t futhark_mc_segmap_parloop_81752_total_iter;
    int64_t *futhark_mc_segmap_task_81750_total_runtime;
    int *futhark_mc_segmap_task_81750_runs;
    int64_t *futhark_mc_segmap_task_81750_iter;
    int64_t futhark_mc_segmap_task_81750_total_time;
    int64_t futhark_mc_segmap_task_81750_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81774_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81774_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81774_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81774_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81774_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81774_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81776_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81776_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81776_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81776_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81776_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81776_total_iter;
    int64_t *futhark_mc_segscan_task_81771_total_runtime;
    int *futhark_mc_segscan_task_81771_runs;
    int64_t *futhark_mc_segscan_task_81771_iter;
    int64_t futhark_mc_segscan_task_81771_total_time;
    int64_t futhark_mc_segscan_task_81771_total_iter;
    int64_t *futhark_mc_segmap_parloop_81780_total_runtime;
    int *futhark_mc_segmap_parloop_81780_runs;
    int64_t *futhark_mc_segmap_parloop_81780_iter;
    int64_t futhark_mc_segmap_parloop_81780_total_total_runtime;
    int futhark_mc_segmap_parloop_81780_total_runs;
    int64_t futhark_mc_segmap_parloop_81780_total_iter;
    int64_t *futhark_mc_segmap_task_81778_total_runtime;
    int *futhark_mc_segmap_task_81778_runs;
    int64_t *futhark_mc_segmap_task_81778_iter;
    int64_t futhark_mc_segmap_task_81778_total_time;
    int64_t futhark_mc_segmap_task_81778_total_iter;
    int64_t *futhark_mc_segmap_parloop_81784_total_runtime;
    int *futhark_mc_segmap_parloop_81784_runs;
    int64_t *futhark_mc_segmap_parloop_81784_iter;
    int64_t futhark_mc_segmap_parloop_81784_total_total_runtime;
    int futhark_mc_segmap_parloop_81784_total_runs;
    int64_t futhark_mc_segmap_parloop_81784_total_iter;
    int64_t *futhark_mc_segmap_task_81782_total_runtime;
    int *futhark_mc_segmap_task_81782_runs;
    int64_t *futhark_mc_segmap_task_81782_iter;
    int64_t futhark_mc_segmap_task_81782_total_time;
    int64_t futhark_mc_segmap_task_81782_total_iter;
    int64_t *futhark_mc_segmap_parloop_81788_total_runtime;
    int *futhark_mc_segmap_parloop_81788_runs;
    int64_t *futhark_mc_segmap_parloop_81788_iter;
    int64_t futhark_mc_segmap_parloop_81788_total_total_runtime;
    int futhark_mc_segmap_parloop_81788_total_runs;
    int64_t futhark_mc_segmap_parloop_81788_total_iter;
    int64_t *futhark_mc_segmap_task_81786_total_runtime;
    int *futhark_mc_segmap_task_81786_runs;
    int64_t *futhark_mc_segmap_task_81786_iter;
    int64_t futhark_mc_segmap_task_81786_total_time;
    int64_t futhark_mc_segmap_task_81786_total_iter;
    int64_t *futhark_mc_segmap_parloop_81792_total_runtime;
    int *futhark_mc_segmap_parloop_81792_runs;
    int64_t *futhark_mc_segmap_parloop_81792_iter;
    int64_t futhark_mc_segmap_parloop_81792_total_total_runtime;
    int futhark_mc_segmap_parloop_81792_total_runs;
    int64_t futhark_mc_segmap_parloop_81792_total_iter;
    int64_t *futhark_mc_segmap_task_81790_total_runtime;
    int *futhark_mc_segmap_task_81790_runs;
    int64_t *futhark_mc_segmap_task_81790_iter;
    int64_t futhark_mc_segmap_task_81790_total_time;
    int64_t futhark_mc_segmap_task_81790_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81804_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81804_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81804_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81804_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81804_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81804_total_iter;
    int64_t *futhark_mc_segred_task_81797_total_runtime;
    int *futhark_mc_segred_task_81797_runs;
    int64_t *futhark_mc_segred_task_81797_iter;
    int64_t futhark_mc_segred_task_81797_total_time;
    int64_t futhark_mc_segred_task_81797_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81810_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81810_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81810_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81810_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81810_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81810_total_iter;
    int64_t *futhark_mc_segred_task_81806_total_runtime;
    int *futhark_mc_segred_task_81806_runs;
    int64_t *futhark_mc_segred_task_81806_iter;
    int64_t futhark_mc_segred_task_81806_total_time;
    int64_t futhark_mc_segred_task_81806_total_iter;
    int64_t *futhark_mc_segmap_parloop_81795_total_runtime;
    int *futhark_mc_segmap_parloop_81795_runs;
    int64_t *futhark_mc_segmap_parloop_81795_iter;
    int64_t futhark_mc_segmap_parloop_81795_total_total_runtime;
    int futhark_mc_segmap_parloop_81795_total_runs;
    int64_t futhark_mc_segmap_parloop_81795_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81793_total_runtime;
    int *futhark_mc_segmap_nested_task_81793_runs;
    int64_t *futhark_mc_segmap_nested_task_81793_iter;
    int64_t *futhark_mc_segmap_parloop_81762_total_runtime;
    int *futhark_mc_segmap_parloop_81762_runs;
    int64_t *futhark_mc_segmap_parloop_81762_iter;
    int64_t futhark_mc_segmap_parloop_81762_total_total_runtime;
    int futhark_mc_segmap_parloop_81762_total_runs;
    int64_t futhark_mc_segmap_parloop_81762_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81760_total_runtime;
    int *futhark_mc_segmap_nested_task_81760_runs;
    int64_t *futhark_mc_segmap_nested_task_81760_iter;
    int64_t *futhark_mc_segmap_parloop_81814_total_runtime;
    int *futhark_mc_segmap_parloop_81814_runs;
    int64_t *futhark_mc_segmap_parloop_81814_iter;
    int64_t futhark_mc_segmap_parloop_81814_total_total_runtime;
    int futhark_mc_segmap_parloop_81814_total_runs;
    int64_t futhark_mc_segmap_parloop_81814_total_iter;
    int64_t *futhark_mc_segmap_task_81812_total_runtime;
    int *futhark_mc_segmap_task_81812_runs;
    int64_t *futhark_mc_segmap_task_81812_iter;
    int64_t futhark_mc_segmap_task_81812_total_time;
    int64_t futhark_mc_segmap_task_81812_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81835_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81835_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81835_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81835_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81835_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81835_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81837_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81837_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81837_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81837_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81837_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81837_total_iter;
    int64_t *futhark_mc_segscan_task_81832_total_runtime;
    int *futhark_mc_segscan_task_81832_runs;
    int64_t *futhark_mc_segscan_task_81832_iter;
    int64_t futhark_mc_segscan_task_81832_total_time;
    int64_t futhark_mc_segscan_task_81832_total_iter;
    int64_t *futhark_mc_segmap_parloop_81841_total_runtime;
    int *futhark_mc_segmap_parloop_81841_runs;
    int64_t *futhark_mc_segmap_parloop_81841_iter;
    int64_t futhark_mc_segmap_parloop_81841_total_total_runtime;
    int futhark_mc_segmap_parloop_81841_total_runs;
    int64_t futhark_mc_segmap_parloop_81841_total_iter;
    int64_t *futhark_mc_segmap_task_81839_total_runtime;
    int *futhark_mc_segmap_task_81839_runs;
    int64_t *futhark_mc_segmap_task_81839_iter;
    int64_t futhark_mc_segmap_task_81839_total_time;
    int64_t futhark_mc_segmap_task_81839_total_iter;
    int64_t *futhark_mc_segmap_parloop_81845_total_runtime;
    int *futhark_mc_segmap_parloop_81845_runs;
    int64_t *futhark_mc_segmap_parloop_81845_iter;
    int64_t futhark_mc_segmap_parloop_81845_total_total_runtime;
    int futhark_mc_segmap_parloop_81845_total_runs;
    int64_t futhark_mc_segmap_parloop_81845_total_iter;
    int64_t *futhark_mc_segmap_task_81843_total_runtime;
    int *futhark_mc_segmap_task_81843_runs;
    int64_t *futhark_mc_segmap_task_81843_iter;
    int64_t futhark_mc_segmap_task_81843_total_time;
    int64_t futhark_mc_segmap_task_81843_total_iter;
    int64_t *futhark_mc_segmap_parloop_81849_total_runtime;
    int *futhark_mc_segmap_parloop_81849_runs;
    int64_t *futhark_mc_segmap_parloop_81849_iter;
    int64_t futhark_mc_segmap_parloop_81849_total_total_runtime;
    int futhark_mc_segmap_parloop_81849_total_runs;
    int64_t futhark_mc_segmap_parloop_81849_total_iter;
    int64_t *futhark_mc_segmap_task_81847_total_runtime;
    int *futhark_mc_segmap_task_81847_runs;
    int64_t *futhark_mc_segmap_task_81847_iter;
    int64_t futhark_mc_segmap_task_81847_total_time;
    int64_t futhark_mc_segmap_task_81847_total_iter;
    int64_t *futhark_mc_segmap_parloop_81853_total_runtime;
    int *futhark_mc_segmap_parloop_81853_runs;
    int64_t *futhark_mc_segmap_parloop_81853_iter;
    int64_t futhark_mc_segmap_parloop_81853_total_total_runtime;
    int futhark_mc_segmap_parloop_81853_total_runs;
    int64_t futhark_mc_segmap_parloop_81853_total_iter;
    int64_t *futhark_mc_segmap_task_81851_total_runtime;
    int *futhark_mc_segmap_task_81851_runs;
    int64_t *futhark_mc_segmap_task_81851_iter;
    int64_t futhark_mc_segmap_task_81851_total_time;
    int64_t futhark_mc_segmap_task_81851_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81863_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81863_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81863_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81863_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81863_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81863_total_iter;
    int64_t *futhark_mc_segred_task_81860_total_runtime;
    int *futhark_mc_segred_task_81860_runs;
    int64_t *futhark_mc_segred_task_81860_iter;
    int64_t futhark_mc_segred_task_81860_total_time;
    int64_t futhark_mc_segred_task_81860_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81868_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81868_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81868_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81868_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81868_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81868_total_iter;
    int64_t *futhark_mc_segred_task_81865_total_runtime;
    int *futhark_mc_segred_task_81865_runs;
    int64_t *futhark_mc_segred_task_81865_iter;
    int64_t futhark_mc_segred_task_81865_total_time;
    int64_t futhark_mc_segred_task_81865_total_iter;
    int64_t *futhark_mc_segmap_parloop_81857_total_runtime;
    int *futhark_mc_segmap_parloop_81857_runs;
    int64_t *futhark_mc_segmap_parloop_81857_iter;
    int64_t futhark_mc_segmap_parloop_81857_total_total_runtime;
    int futhark_mc_segmap_parloop_81857_total_runs;
    int64_t futhark_mc_segmap_parloop_81857_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81855_total_runtime;
    int *futhark_mc_segmap_nested_task_81855_runs;
    int64_t *futhark_mc_segmap_nested_task_81855_iter;
    int64_t *futhark_mc_segmap_parloop_81824_total_runtime;
    int *futhark_mc_segmap_parloop_81824_runs;
    int64_t *futhark_mc_segmap_parloop_81824_iter;
    int64_t futhark_mc_segmap_parloop_81824_total_total_runtime;
    int futhark_mc_segmap_parloop_81824_total_runs;
    int64_t futhark_mc_segmap_parloop_81824_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81822_total_runtime;
    int *futhark_mc_segmap_nested_task_81822_runs;
    int64_t *futhark_mc_segmap_nested_task_81822_iter;
    int64_t *futhark_mc_segmap_parloop_81872_total_runtime;
    int *futhark_mc_segmap_parloop_81872_runs;
    int64_t *futhark_mc_segmap_parloop_81872_iter;
    int64_t futhark_mc_segmap_parloop_81872_total_total_runtime;
    int futhark_mc_segmap_parloop_81872_total_runs;
    int64_t futhark_mc_segmap_parloop_81872_total_iter;
    int64_t *futhark_mc_segmap_task_81870_total_runtime;
    int *futhark_mc_segmap_task_81870_runs;
    int64_t *futhark_mc_segmap_task_81870_iter;
    int64_t futhark_mc_segmap_task_81870_total_time;
    int64_t futhark_mc_segmap_task_81870_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81896_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81896_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81896_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81896_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81896_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81896_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81898_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81898_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81898_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81898_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81898_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81898_total_iter;
    int64_t *futhark_mc_segscan_task_81893_total_runtime;
    int *futhark_mc_segscan_task_81893_runs;
    int64_t *futhark_mc_segscan_task_81893_iter;
    int64_t futhark_mc_segscan_task_81893_total_time;
    int64_t futhark_mc_segscan_task_81893_total_iter;
    int64_t *futhark_mc_segmap_parloop_81902_total_runtime;
    int *futhark_mc_segmap_parloop_81902_runs;
    int64_t *futhark_mc_segmap_parloop_81902_iter;
    int64_t futhark_mc_segmap_parloop_81902_total_total_runtime;
    int futhark_mc_segmap_parloop_81902_total_runs;
    int64_t futhark_mc_segmap_parloop_81902_total_iter;
    int64_t *futhark_mc_segmap_task_81900_total_runtime;
    int *futhark_mc_segmap_task_81900_runs;
    int64_t *futhark_mc_segmap_task_81900_iter;
    int64_t futhark_mc_segmap_task_81900_total_time;
    int64_t futhark_mc_segmap_task_81900_total_iter;
    int64_t *futhark_mc_segmap_parloop_81906_total_runtime;
    int *futhark_mc_segmap_parloop_81906_runs;
    int64_t *futhark_mc_segmap_parloop_81906_iter;
    int64_t futhark_mc_segmap_parloop_81906_total_total_runtime;
    int futhark_mc_segmap_parloop_81906_total_runs;
    int64_t futhark_mc_segmap_parloop_81906_total_iter;
    int64_t *futhark_mc_segmap_task_81904_total_runtime;
    int *futhark_mc_segmap_task_81904_runs;
    int64_t *futhark_mc_segmap_task_81904_iter;
    int64_t futhark_mc_segmap_task_81904_total_time;
    int64_t futhark_mc_segmap_task_81904_total_iter;
    int64_t *futhark_mc_segmap_parloop_81910_total_runtime;
    int *futhark_mc_segmap_parloop_81910_runs;
    int64_t *futhark_mc_segmap_parloop_81910_iter;
    int64_t futhark_mc_segmap_parloop_81910_total_total_runtime;
    int futhark_mc_segmap_parloop_81910_total_runs;
    int64_t futhark_mc_segmap_parloop_81910_total_iter;
    int64_t *futhark_mc_segmap_task_81908_total_runtime;
    int *futhark_mc_segmap_task_81908_runs;
    int64_t *futhark_mc_segmap_task_81908_iter;
    int64_t futhark_mc_segmap_task_81908_total_time;
    int64_t futhark_mc_segmap_task_81908_total_iter;
    int64_t *futhark_mc_segmap_parloop_81914_total_runtime;
    int *futhark_mc_segmap_parloop_81914_runs;
    int64_t *futhark_mc_segmap_parloop_81914_iter;
    int64_t futhark_mc_segmap_parloop_81914_total_total_runtime;
    int futhark_mc_segmap_parloop_81914_total_runs;
    int64_t futhark_mc_segmap_parloop_81914_total_iter;
    int64_t *futhark_mc_segmap_task_81912_total_runtime;
    int *futhark_mc_segmap_task_81912_runs;
    int64_t *futhark_mc_segmap_task_81912_iter;
    int64_t futhark_mc_segmap_task_81912_total_time;
    int64_t futhark_mc_segmap_task_81912_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81928_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81928_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81928_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81928_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81928_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81928_total_iter;
    int64_t *futhark_mc_segred_task_81923_total_runtime;
    int *futhark_mc_segred_task_81923_runs;
    int64_t *futhark_mc_segred_task_81923_iter;
    int64_t futhark_mc_segred_task_81923_total_time;
    int64_t futhark_mc_segred_task_81923_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81934_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81934_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81934_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81934_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81934_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81934_total_iter;
    int64_t *futhark_mc_segred_task_81930_total_runtime;
    int *futhark_mc_segred_task_81930_runs;
    int64_t *futhark_mc_segred_task_81930_iter;
    int64_t futhark_mc_segred_task_81930_total_time;
    int64_t futhark_mc_segred_task_81930_total_iter;
    int64_t *futhark_mc_segmap_parloop_81919_total_runtime;
    int *futhark_mc_segmap_parloop_81919_runs;
    int64_t *futhark_mc_segmap_parloop_81919_iter;
    int64_t futhark_mc_segmap_parloop_81919_total_total_runtime;
    int futhark_mc_segmap_parloop_81919_total_runs;
    int64_t futhark_mc_segmap_parloop_81919_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81917_total_runtime;
    int *futhark_mc_segmap_nested_task_81917_runs;
    int64_t *futhark_mc_segmap_nested_task_81917_iter;
    int64_t *futhark_mc_segmap_parloop_81884_total_runtime;
    int *futhark_mc_segmap_parloop_81884_runs;
    int64_t *futhark_mc_segmap_parloop_81884_iter;
    int64_t futhark_mc_segmap_parloop_81884_total_total_runtime;
    int futhark_mc_segmap_parloop_81884_total_runs;
    int64_t futhark_mc_segmap_parloop_81884_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81882_total_runtime;
    int *futhark_mc_segmap_nested_task_81882_runs;
    int64_t *futhark_mc_segmap_nested_task_81882_iter;
    int64_t *futhark_mc_segmap_parloop_81938_total_runtime;
    int *futhark_mc_segmap_parloop_81938_runs;
    int64_t *futhark_mc_segmap_parloop_81938_iter;
    int64_t futhark_mc_segmap_parloop_81938_total_total_runtime;
    int futhark_mc_segmap_parloop_81938_total_runs;
    int64_t futhark_mc_segmap_parloop_81938_total_iter;
    int64_t *futhark_mc_segmap_task_81936_total_runtime;
    int *futhark_mc_segmap_task_81936_runs;
    int64_t *futhark_mc_segmap_task_81936_iter;
    int64_t futhark_mc_segmap_task_81936_total_time;
    int64_t futhark_mc_segmap_task_81936_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81964_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81964_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81964_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81964_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81964_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81964_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81966_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81966_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81966_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81966_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81966_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81966_total_iter;
    int64_t *futhark_mc_segscan_task_81961_total_runtime;
    int *futhark_mc_segscan_task_81961_runs;
    int64_t *futhark_mc_segscan_task_81961_iter;
    int64_t futhark_mc_segscan_task_81961_total_time;
    int64_t futhark_mc_segscan_task_81961_total_iter;
    int64_t *futhark_mc_segmap_parloop_81970_total_runtime;
    int *futhark_mc_segmap_parloop_81970_runs;
    int64_t *futhark_mc_segmap_parloop_81970_iter;
    int64_t futhark_mc_segmap_parloop_81970_total_total_runtime;
    int futhark_mc_segmap_parloop_81970_total_runs;
    int64_t futhark_mc_segmap_parloop_81970_total_iter;
    int64_t *futhark_mc_segmap_task_81968_total_runtime;
    int *futhark_mc_segmap_task_81968_runs;
    int64_t *futhark_mc_segmap_task_81968_iter;
    int64_t futhark_mc_segmap_task_81968_total_time;
    int64_t futhark_mc_segmap_task_81968_total_iter;
    int64_t *futhark_mc_segmap_parloop_81974_total_runtime;
    int *futhark_mc_segmap_parloop_81974_runs;
    int64_t *futhark_mc_segmap_parloop_81974_iter;
    int64_t futhark_mc_segmap_parloop_81974_total_total_runtime;
    int futhark_mc_segmap_parloop_81974_total_runs;
    int64_t futhark_mc_segmap_parloop_81974_total_iter;
    int64_t *futhark_mc_segmap_task_81972_total_runtime;
    int *futhark_mc_segmap_task_81972_runs;
    int64_t *futhark_mc_segmap_task_81972_iter;
    int64_t futhark_mc_segmap_task_81972_total_time;
    int64_t futhark_mc_segmap_task_81972_total_iter;
    int64_t *futhark_mc_segmap_parloop_81978_total_runtime;
    int *futhark_mc_segmap_parloop_81978_runs;
    int64_t *futhark_mc_segmap_parloop_81978_iter;
    int64_t futhark_mc_segmap_parloop_81978_total_total_runtime;
    int futhark_mc_segmap_parloop_81978_total_runs;
    int64_t futhark_mc_segmap_parloop_81978_total_iter;
    int64_t *futhark_mc_segmap_task_81976_total_runtime;
    int *futhark_mc_segmap_task_81976_runs;
    int64_t *futhark_mc_segmap_task_81976_iter;
    int64_t futhark_mc_segmap_task_81976_total_time;
    int64_t futhark_mc_segmap_task_81976_total_iter;
    int64_t *futhark_mc_segmap_parloop_81982_total_runtime;
    int *futhark_mc_segmap_parloop_81982_runs;
    int64_t *futhark_mc_segmap_parloop_81982_iter;
    int64_t futhark_mc_segmap_parloop_81982_total_total_runtime;
    int futhark_mc_segmap_parloop_81982_total_runs;
    int64_t futhark_mc_segmap_parloop_81982_total_iter;
    int64_t *futhark_mc_segmap_task_81980_total_runtime;
    int *futhark_mc_segmap_task_81980_runs;
    int64_t *futhark_mc_segmap_task_81980_iter;
    int64_t futhark_mc_segmap_task_81980_total_time;
    int64_t futhark_mc_segmap_task_81980_total_iter;
    int64_t *futhark_mc_segmap_parloop_81997_total_runtime;
    int *futhark_mc_segmap_parloop_81997_runs;
    int64_t *futhark_mc_segmap_parloop_81997_iter;
    int64_t futhark_mc_segmap_parloop_81997_total_total_runtime;
    int futhark_mc_segmap_parloop_81997_total_runs;
    int64_t futhark_mc_segmap_parloop_81997_total_iter;
    int64_t *futhark_mc_segmap_task_81995_total_runtime;
    int *futhark_mc_segmap_task_81995_runs;
    int64_t *futhark_mc_segmap_task_81995_iter;
    int64_t futhark_mc_segmap_task_81995_total_time;
    int64_t futhark_mc_segmap_task_81995_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_82006_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_82006_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_82006_iter;
    int64_t futhark_mc_segred_stage_1_parloop_82006_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_82006_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_82006_total_iter;
    int64_t *futhark_mc_segred_task_81999_total_runtime;
    int *futhark_mc_segred_task_81999_runs;
    int64_t *futhark_mc_segred_task_81999_iter;
    int64_t futhark_mc_segred_task_81999_total_time;
    int64_t futhark_mc_segred_task_81999_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_82012_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_82012_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_82012_iter;
    int64_t futhark_mc_segred_stage_1_parloop_82012_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_82012_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_82012_total_iter;
    int64_t *futhark_mc_segred_task_82008_total_runtime;
    int *futhark_mc_segred_task_82008_runs;
    int64_t *futhark_mc_segred_task_82008_iter;
    int64_t futhark_mc_segred_task_82008_total_time;
    int64_t futhark_mc_segred_task_82008_total_iter;
    int64_t *futhark_mc_segmap_parloop_81989_total_runtime;
    int *futhark_mc_segmap_parloop_81989_runs;
    int64_t *futhark_mc_segmap_parloop_81989_iter;
    int64_t futhark_mc_segmap_parloop_81989_total_total_runtime;
    int futhark_mc_segmap_parloop_81989_total_runs;
    int64_t futhark_mc_segmap_parloop_81989_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81987_total_runtime;
    int *futhark_mc_segmap_nested_task_81987_runs;
    int64_t *futhark_mc_segmap_nested_task_81987_iter;
    int64_t *futhark_mc_segmap_parloop_81952_total_runtime;
    int *futhark_mc_segmap_parloop_81952_runs;
    int64_t *futhark_mc_segmap_parloop_81952_iter;
    int64_t futhark_mc_segmap_parloop_81952_total_total_runtime;
    int futhark_mc_segmap_parloop_81952_total_runs;
    int64_t futhark_mc_segmap_parloop_81952_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81950_total_runtime;
    int *futhark_mc_segmap_nested_task_81950_runs;
    int64_t *futhark_mc_segmap_nested_task_81950_iter;
    int64_t *futhark_mc_segmap_parloop_82016_total_runtime;
    int *futhark_mc_segmap_parloop_82016_runs;
    int64_t *futhark_mc_segmap_parloop_82016_iter;
    int64_t futhark_mc_segmap_parloop_82016_total_total_runtime;
    int futhark_mc_segmap_parloop_82016_total_runs;
    int64_t futhark_mc_segmap_parloop_82016_total_iter;
    int64_t *futhark_mc_segmap_task_82014_total_runtime;
    int *futhark_mc_segmap_task_82014_runs;
    int64_t *futhark_mc_segmap_task_82014_iter;
    int64_t futhark_mc_segmap_task_82014_total_time;
    int64_t futhark_mc_segmap_task_82014_total_iter;
    int64_t *futhark_mc_segmap_parloop_82025_total_runtime;
    int *futhark_mc_segmap_parloop_82025_runs;
    int64_t *futhark_mc_segmap_parloop_82025_iter;
    int64_t futhark_mc_segmap_parloop_82025_total_total_runtime;
    int futhark_mc_segmap_parloop_82025_total_runs;
    int64_t futhark_mc_segmap_parloop_82025_total_iter;
    int64_t *futhark_mc_segmap_task_82023_total_runtime;
    int *futhark_mc_segmap_task_82023_runs;
    int64_t *futhark_mc_segmap_task_82023_iter;
    int64_t futhark_mc_segmap_task_82023_total_time;
    int64_t futhark_mc_segmap_task_82023_total_iter;
    int64_t *futhark_mc_segmap_parloop_82020_total_runtime;
    int *futhark_mc_segmap_parloop_82020_runs;
    int64_t *futhark_mc_segmap_parloop_82020_iter;
    int64_t futhark_mc_segmap_parloop_82020_total_total_runtime;
    int futhark_mc_segmap_parloop_82020_total_runs;
    int64_t futhark_mc_segmap_parloop_82020_total_iter;
    int64_t *futhark_mc_segmap_nested_task_82018_total_runtime;
    int *futhark_mc_segmap_nested_task_82018_runs;
    int64_t *futhark_mc_segmap_nested_task_82018_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_81637_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81637_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81637_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81637_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81637_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81637_total_iter = 0;
    ctx->futhark_mc_segmap_task_81635_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81635_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81635_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81635_total_time = 0;
    ctx->futhark_mc_segmap_task_81635_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81657_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81657_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81657_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81659_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81659_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81659_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter = 0;
    ctx->futhark_mc_segscan_task_81654_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81654_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81654_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81654_total_time = 0;
    ctx->futhark_mc_segscan_task_81654_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81663_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81663_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81663_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81663_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81663_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81663_total_iter = 0;
    ctx->futhark_mc_segmap_task_81661_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81661_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81661_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81661_total_time = 0;
    ctx->futhark_mc_segmap_task_81661_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81667_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81667_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81667_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81667_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81667_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81667_total_iter = 0;
    ctx->futhark_mc_segmap_task_81665_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81665_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81665_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81665_total_time = 0;
    ctx->futhark_mc_segmap_task_81665_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81671_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81671_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81671_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81671_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81671_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81671_total_iter = 0;
    ctx->futhark_mc_segmap_task_81669_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81669_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81669_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81669_total_time = 0;
    ctx->futhark_mc_segmap_task_81669_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81675_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81675_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81675_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81675_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81675_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81675_total_iter = 0;
    ctx->futhark_mc_segmap_task_81673_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81673_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81673_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81673_total_time = 0;
    ctx->futhark_mc_segmap_task_81673_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81683_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81683_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81683_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter = 0;
    ctx->futhark_mc_segred_task_81680_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81680_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81680_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81680_total_time = 0;
    ctx->futhark_mc_segred_task_81680_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81688_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81688_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81688_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter = 0;
    ctx->futhark_mc_segred_task_81685_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81685_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81685_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81685_total_time = 0;
    ctx->futhark_mc_segred_task_81685_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81678_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81678_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81678_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81678_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81678_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81678_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81676_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81676_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81676_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81646_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81646_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81646_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81646_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81646_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81646_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81644_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81644_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81644_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81692_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81692_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81692_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81692_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81692_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81692_total_iter = 0;
    ctx->futhark_mc_segmap_task_81690_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81690_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81690_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81690_total_time = 0;
    ctx->futhark_mc_segmap_task_81690_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81714_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81714_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81714_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81716_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81716_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81716_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter = 0;
    ctx->futhark_mc_segscan_task_81711_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81711_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81711_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81711_total_time = 0;
    ctx->futhark_mc_segscan_task_81711_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81720_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81720_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81720_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81720_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81720_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81720_total_iter = 0;
    ctx->futhark_mc_segmap_task_81718_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81718_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81718_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81718_total_time = 0;
    ctx->futhark_mc_segmap_task_81718_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81724_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81724_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81724_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81724_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81724_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81724_total_iter = 0;
    ctx->futhark_mc_segmap_task_81722_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81722_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81722_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81722_total_time = 0;
    ctx->futhark_mc_segmap_task_81722_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81728_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81728_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81728_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81728_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81728_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81728_total_iter = 0;
    ctx->futhark_mc_segmap_task_81726_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81726_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81726_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81726_total_time = 0;
    ctx->futhark_mc_segmap_task_81726_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81732_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81732_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81732_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81732_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81732_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81732_total_iter = 0;
    ctx->futhark_mc_segmap_task_81730_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81730_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81730_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81730_total_time = 0;
    ctx->futhark_mc_segmap_task_81730_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81742_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81742_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81742_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter = 0;
    ctx->futhark_mc_segred_task_81737_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81737_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81737_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81737_total_time = 0;
    ctx->futhark_mc_segred_task_81737_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81748_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81748_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81748_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter = 0;
    ctx->futhark_mc_segred_task_81744_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81744_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81744_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81744_total_time = 0;
    ctx->futhark_mc_segred_task_81744_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81735_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81735_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81735_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81735_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81735_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81735_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81733_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81733_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81733_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81702_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81702_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81702_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81702_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81702_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81702_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81700_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81700_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81700_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81752_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81752_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81752_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81752_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81752_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81752_total_iter = 0;
    ctx->futhark_mc_segmap_task_81750_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81750_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81750_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81750_total_time = 0;
    ctx->futhark_mc_segmap_task_81750_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81774_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81774_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81774_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81776_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81776_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81776_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter = 0;
    ctx->futhark_mc_segscan_task_81771_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81771_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81771_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81771_total_time = 0;
    ctx->futhark_mc_segscan_task_81771_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81780_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81780_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81780_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81780_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81780_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81780_total_iter = 0;
    ctx->futhark_mc_segmap_task_81778_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81778_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81778_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81778_total_time = 0;
    ctx->futhark_mc_segmap_task_81778_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81784_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81784_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81784_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81784_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81784_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81784_total_iter = 0;
    ctx->futhark_mc_segmap_task_81782_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81782_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81782_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81782_total_time = 0;
    ctx->futhark_mc_segmap_task_81782_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81788_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81788_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81788_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81788_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81788_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81788_total_iter = 0;
    ctx->futhark_mc_segmap_task_81786_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81786_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81786_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81786_total_time = 0;
    ctx->futhark_mc_segmap_task_81786_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81792_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81792_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81792_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81792_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81792_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81792_total_iter = 0;
    ctx->futhark_mc_segmap_task_81790_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81790_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81790_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81790_total_time = 0;
    ctx->futhark_mc_segmap_task_81790_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81804_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81804_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81804_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter = 0;
    ctx->futhark_mc_segred_task_81797_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81797_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81797_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81797_total_time = 0;
    ctx->futhark_mc_segred_task_81797_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81810_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81810_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81810_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter = 0;
    ctx->futhark_mc_segred_task_81806_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81806_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81806_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81806_total_time = 0;
    ctx->futhark_mc_segred_task_81806_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81795_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81795_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81795_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81795_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81795_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81795_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81793_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81793_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81793_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81762_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81762_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81762_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81762_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81762_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81762_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81760_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81760_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81760_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81814_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81814_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81814_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81814_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81814_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81814_total_iter = 0;
    ctx->futhark_mc_segmap_task_81812_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81812_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81812_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81812_total_time = 0;
    ctx->futhark_mc_segmap_task_81812_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81835_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81835_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81835_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81837_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81837_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81837_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter = 0;
    ctx->futhark_mc_segscan_task_81832_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81832_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81832_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81832_total_time = 0;
    ctx->futhark_mc_segscan_task_81832_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81841_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81841_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81841_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81841_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81841_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81841_total_iter = 0;
    ctx->futhark_mc_segmap_task_81839_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81839_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81839_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81839_total_time = 0;
    ctx->futhark_mc_segmap_task_81839_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81845_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81845_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81845_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81845_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81845_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81845_total_iter = 0;
    ctx->futhark_mc_segmap_task_81843_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81843_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81843_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81843_total_time = 0;
    ctx->futhark_mc_segmap_task_81843_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81849_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81849_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81849_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81849_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81849_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81849_total_iter = 0;
    ctx->futhark_mc_segmap_task_81847_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81847_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81847_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81847_total_time = 0;
    ctx->futhark_mc_segmap_task_81847_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81853_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81853_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81853_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81853_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81853_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81853_total_iter = 0;
    ctx->futhark_mc_segmap_task_81851_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81851_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81851_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81851_total_time = 0;
    ctx->futhark_mc_segmap_task_81851_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81863_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81863_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81863_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter = 0;
    ctx->futhark_mc_segred_task_81860_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81860_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81860_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81860_total_time = 0;
    ctx->futhark_mc_segred_task_81860_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81868_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81868_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81868_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter = 0;
    ctx->futhark_mc_segred_task_81865_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81865_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81865_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81865_total_time = 0;
    ctx->futhark_mc_segred_task_81865_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81857_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81857_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81857_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81857_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81857_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81857_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81855_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81855_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81855_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81824_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81824_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81824_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81824_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81824_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81824_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81822_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81822_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81822_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81872_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81872_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81872_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81872_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81872_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81872_total_iter = 0;
    ctx->futhark_mc_segmap_task_81870_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81870_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81870_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81870_total_time = 0;
    ctx->futhark_mc_segmap_task_81870_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81896_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81896_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81896_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81898_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81898_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81898_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter = 0;
    ctx->futhark_mc_segscan_task_81893_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81893_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81893_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81893_total_time = 0;
    ctx->futhark_mc_segscan_task_81893_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81902_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81902_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81902_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81902_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81902_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81902_total_iter = 0;
    ctx->futhark_mc_segmap_task_81900_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81900_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81900_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81900_total_time = 0;
    ctx->futhark_mc_segmap_task_81900_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81906_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81906_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81906_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81906_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81906_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81906_total_iter = 0;
    ctx->futhark_mc_segmap_task_81904_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81904_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81904_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81904_total_time = 0;
    ctx->futhark_mc_segmap_task_81904_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81910_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81910_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81910_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81910_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81910_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81910_total_iter = 0;
    ctx->futhark_mc_segmap_task_81908_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81908_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81908_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81908_total_time = 0;
    ctx->futhark_mc_segmap_task_81908_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81914_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81914_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81914_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81914_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81914_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81914_total_iter = 0;
    ctx->futhark_mc_segmap_task_81912_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81912_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81912_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81912_total_time = 0;
    ctx->futhark_mc_segmap_task_81912_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81928_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81928_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81928_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter = 0;
    ctx->futhark_mc_segred_task_81923_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81923_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81923_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81923_total_time = 0;
    ctx->futhark_mc_segred_task_81923_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81934_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81934_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81934_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter = 0;
    ctx->futhark_mc_segred_task_81930_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81930_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81930_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81930_total_time = 0;
    ctx->futhark_mc_segred_task_81930_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81919_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81919_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81919_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81917_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81917_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81917_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81884_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81884_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81884_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81884_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81884_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81884_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81882_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81882_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81882_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81938_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81938_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81938_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81938_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81938_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81938_total_iter = 0;
    ctx->futhark_mc_segmap_task_81936_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81936_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81936_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81936_total_time = 0;
    ctx->futhark_mc_segmap_task_81936_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81964_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81964_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81964_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81966_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81966_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81966_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter = 0;
    ctx->futhark_mc_segscan_task_81961_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81961_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81961_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81961_total_time = 0;
    ctx->futhark_mc_segscan_task_81961_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81970_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81970_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81970_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81970_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81970_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81970_total_iter = 0;
    ctx->futhark_mc_segmap_task_81968_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81968_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81968_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81968_total_time = 0;
    ctx->futhark_mc_segmap_task_81968_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81974_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81974_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81974_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81974_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81974_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81974_total_iter = 0;
    ctx->futhark_mc_segmap_task_81972_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81972_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81972_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81972_total_time = 0;
    ctx->futhark_mc_segmap_task_81972_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81978_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81978_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81978_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81978_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81978_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81978_total_iter = 0;
    ctx->futhark_mc_segmap_task_81976_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81976_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81976_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81976_total_time = 0;
    ctx->futhark_mc_segmap_task_81976_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81982_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81982_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81982_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81982_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81982_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81982_total_iter = 0;
    ctx->futhark_mc_segmap_task_81980_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81980_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81980_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81980_total_time = 0;
    ctx->futhark_mc_segmap_task_81980_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81997_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81997_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81997_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81997_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81997_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81997_total_iter = 0;
    ctx->futhark_mc_segmap_task_81995_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81995_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81995_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81995_total_time = 0;
    ctx->futhark_mc_segmap_task_81995_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82006_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82006_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82006_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter = 0;
    ctx->futhark_mc_segred_task_81999_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81999_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81999_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81999_total_time = 0;
    ctx->futhark_mc_segred_task_81999_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82012_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82012_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82012_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter = 0;
    ctx->futhark_mc_segred_task_82008_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82008_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82008_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82008_total_time = 0;
    ctx->futhark_mc_segred_task_82008_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81989_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81989_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81989_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81989_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81989_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81989_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81987_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81987_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81987_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81952_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81952_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81952_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81952_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81952_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81952_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81950_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81950_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81950_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82016_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82016_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82016_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82016_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82016_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82016_total_iter = 0;
    ctx->futhark_mc_segmap_task_82014_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82014_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82014_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82014_total_time = 0;
    ctx->futhark_mc_segmap_task_82014_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_iter = 0;
    ctx->futhark_mc_segmap_task_82023_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_total_time = 0;
    ctx->futhark_mc_segmap_task_82023_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82020_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82020_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82020_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82020_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82020_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82020_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_82018_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82018_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82018_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81637          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81637_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81637_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81637_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81637_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81637_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81637_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81637_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81637_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81637_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81637_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81637_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81637_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81637_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81637_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81637_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81637_total_iter /
                (ctx->futhark_mc_segmap_parloop_81637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81637_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81637_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81637_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81657    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81657_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81657_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81657_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81657_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81657_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81657_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81657_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81657_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81657_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81657_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81657_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81659    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81659_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81659_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81659_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81659_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81659_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81659_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81659_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81659_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81659_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81659_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81659_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81654            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81654_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81654_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81654_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81654_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81654_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81654_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81654_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81654_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81654_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81654_iter[i] /
                    (ctx->futhark_mc_segscan_task_81654_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81654_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81663          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81663_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81663_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81663_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81663_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81663_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81663_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81663_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81663_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81663_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81663_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81663_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81663_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81663_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81663_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81663_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81663_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81663_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81663_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81663_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81663_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81663_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81663_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81663_total_iter /
                (ctx->futhark_mc_segmap_parloop_81663_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81663_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81663_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81663_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81661             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81661_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81661_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81661_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81661_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81661_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81661_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81661_iter[i] /
                    (ctx->futhark_mc_segmap_task_81661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81661_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81667          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81667_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81667_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81667_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81667_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81667_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81667_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81667_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81667_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81667_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81667_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81667_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81667_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81667_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81667_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81667_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81667_total_iter /
                (ctx->futhark_mc_segmap_parloop_81667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81667_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81667_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81667_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81665             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81665_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81665_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81665_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81665_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81665_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81665_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81665_iter[i] /
                    (ctx->futhark_mc_segmap_task_81665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81665_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81671          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81671_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81671_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81671_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81671_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81671_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81671_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81671_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81671_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81671_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81671_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81671_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81671_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81671_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81671_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81671_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81671_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81671_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81671_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81671_total_iter /
                (ctx->futhark_mc_segmap_parloop_81671_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81671_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81671_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81671_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81669             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81669_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81669_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81669_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81669_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81669_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81669_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81669_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81669_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81669_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81669_iter[i] /
                    (ctx->futhark_mc_segmap_task_81669_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81669_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81675          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81675_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81675_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81675_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81675_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81675_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81675_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81675_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81675_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81675_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81675_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81675_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81675_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81675_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81675_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81675_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81675_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81675_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81675_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81675_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81675_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81675_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81675_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81675_total_iter /
                (ctx->futhark_mc_segmap_parloop_81675_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81675_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81675_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81675_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81683  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81683_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81683_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81683_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81683_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81683_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81683_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81683_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81683_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81683_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81683_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81683_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81680             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81680_runs[i],
                    (long) ctx->futhark_mc_segred_task_81680_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81680_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81680_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81680_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81680_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81680_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81680_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81680_iter[i],
                    (long) ctx->futhark_mc_segred_task_81680_iter[i] /
                    (ctx->futhark_mc_segred_task_81680_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81680_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81688  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81688_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81688_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81688_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81688_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81688_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81688_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81688_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81688_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81688_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81688_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81688_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81685             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81685_runs[i],
                    (long) ctx->futhark_mc_segred_task_81685_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81685_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81685_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81685_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81685_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81685_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81685_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81685_iter[i],
                    (long) ctx->futhark_mc_segred_task_81685_iter[i] /
                    (ctx->futhark_mc_segred_task_81685_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81685_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81678          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81678_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81678_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81678_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81678_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81678_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81678_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81678_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81678_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81678_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81678_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81678_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81678_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81678_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81678_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81678_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81678_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81678_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81678_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81678_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81678_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81678_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81678_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81678_total_iter /
                (ctx->futhark_mc_segmap_parloop_81678_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81678_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81678_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81678_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81673             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81673_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81673_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81673_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81673_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81673_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81673_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81673_iter[i] /
                    (ctx->futhark_mc_segmap_task_81673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81673_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81676      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81676_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81676_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81676_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81676_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81676_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81676_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81676_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81676_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81646          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81646_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81646_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81646_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81646_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81646_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81646_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81646_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81646_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81646_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81646_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81646_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81646_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81646_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81646_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81646_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81646_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81646_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81646_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81646_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81646_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81646_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81646_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81646_total_iter /
                (ctx->futhark_mc_segmap_parloop_81646_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81646_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81646_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81646_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81635             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81635_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81635_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81635_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81635_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81635_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81635_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81635_iter[i] /
                    (ctx->futhark_mc_segmap_task_81635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81635_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81644      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81644_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81644_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81644_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81644_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81644_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81644_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81644_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81644_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81644_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81644_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81644_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81644_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81692          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81692_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81692_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81692_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81692_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81692_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81692_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81692_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81692_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81692_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81692_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81692_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81692_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81692_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81692_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81692_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81692_total_iter /
                (ctx->futhark_mc_segmap_parloop_81692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81692_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81692_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81692_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81714    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81714_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81714_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81714_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81714_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81714_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81714_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81714_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81714_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81714_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81714_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81714_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81716    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81716_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81716_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81716_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81716_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81716_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81716_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81716_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81716_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81716_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81716_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81716_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81711            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81711_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81711_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81711_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81711_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81711_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81711_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81711_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81711_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81711_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81711_iter[i] /
                    (ctx->futhark_mc_segscan_task_81711_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81711_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81720          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81720_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81720_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81720_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81720_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81720_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81720_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81720_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81720_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81720_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81720_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81720_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81720_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81720_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81720_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81720_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81720_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81720_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81720_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81720_total_iter /
                (ctx->futhark_mc_segmap_parloop_81720_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81720_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81720_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81720_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81718             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81718_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81718_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81718_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81718_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81718_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81718_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81718_iter[i] /
                    (ctx->futhark_mc_segmap_task_81718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81718_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81724          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81724_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81724_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81724_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81724_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81724_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81724_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81724_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81724_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81724_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81724_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81724_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81724_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81724_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81724_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81724_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81724_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81724_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81724_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81724_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81724_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81724_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81724_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81724_total_iter /
                (ctx->futhark_mc_segmap_parloop_81724_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81724_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81724_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81724_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81722             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81722_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81722_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81722_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81722_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81722_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81722_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81722_iter[i] /
                    (ctx->futhark_mc_segmap_task_81722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81722_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81728          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81728_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81728_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81728_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81728_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81728_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81728_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81728_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81728_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81728_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81728_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81728_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81728_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81728_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81728_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81728_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81728_total_iter /
                (ctx->futhark_mc_segmap_parloop_81728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81728_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81728_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81728_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81726             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81726_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81726_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81726_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81726_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81726_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81726_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81726_iter[i] /
                    (ctx->futhark_mc_segmap_task_81726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81726_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81732          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81732_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81732_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81732_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81732_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81732_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81732_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81732_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81732_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81732_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81732_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81732_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81732_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81732_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81732_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81732_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81732_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81732_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81732_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81732_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81732_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81732_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81732_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81732_total_iter /
                (ctx->futhark_mc_segmap_parloop_81732_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81732_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81732_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81732_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81742  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81742_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81742_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81742_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81742_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81742_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81742_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81742_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81742_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81742_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81742_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81742_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81737             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81737_runs[i],
                    (long) ctx->futhark_mc_segred_task_81737_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81737_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81737_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81737_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81737_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81737_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81737_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81737_iter[i],
                    (long) ctx->futhark_mc_segred_task_81737_iter[i] /
                    (ctx->futhark_mc_segred_task_81737_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81737_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81748  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81748_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81748_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81748_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81748_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81748_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81748_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81748_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81748_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81748_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81748_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81744             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81744_runs[i],
                    (long) ctx->futhark_mc_segred_task_81744_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81744_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81744_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81744_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81744_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81744_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81744_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81744_iter[i],
                    (long) ctx->futhark_mc_segred_task_81744_iter[i] /
                    (ctx->futhark_mc_segred_task_81744_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81744_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81735          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81735_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81735_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81735_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81735_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81735_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81735_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81735_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81735_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81735_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81735_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81735_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81735_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81735_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81735_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81735_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81735_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81735_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81735_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81735_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81735_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81735_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81735_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81735_total_iter /
                (ctx->futhark_mc_segmap_parloop_81735_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81735_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81735_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81735_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81730             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81730_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81730_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81730_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81730_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81730_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81730_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81730_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81730_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81730_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81730_iter[i] /
                    (ctx->futhark_mc_segmap_task_81730_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81730_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81733      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81733_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81733_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81733_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81733_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81733_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81733_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81733_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81733_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81733_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81733_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81733_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81733_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81702          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81702_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81702_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81702_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81702_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81702_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81702_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81702_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81702_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81702_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81702_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81702_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81702_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81702_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81702_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81702_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81702_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81702_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81702_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81702_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81702_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81702_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81702_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81702_total_iter /
                (ctx->futhark_mc_segmap_parloop_81702_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81702_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81702_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81702_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81690             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81690_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81690_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81690_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81690_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81690_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81690_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81690_iter[i] /
                    (ctx->futhark_mc_segmap_task_81690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81690_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81700      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81700_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81700_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81700_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81700_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81700_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81700_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81700_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81700_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81700_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81700_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81700_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81700_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81752          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81752_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81752_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81752_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81752_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81752_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81752_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81752_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81752_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81752_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81752_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81752_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81752_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81752_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81752_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81752_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81752_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81752_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81752_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81752_total_iter /
                (ctx->futhark_mc_segmap_parloop_81752_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81752_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81752_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81752_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81774    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81774_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81774_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81774_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81774_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81774_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81774_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81774_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81774_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81774_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81774_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81774_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81776    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81776_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81776_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81776_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81776_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81776_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81776_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81776_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81776_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81776_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81776_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81776_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81771            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81771_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81771_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81771_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81771_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81771_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81771_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81771_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81771_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81771_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81771_iter[i] /
                    (ctx->futhark_mc_segscan_task_81771_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81771_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81780          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81780_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81780_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81780_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81780_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81780_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81780_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81780_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81780_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81780_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81780_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81780_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81780_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81780_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81780_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81780_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81780_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81780_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81780_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81780_total_iter /
                (ctx->futhark_mc_segmap_parloop_81780_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81780_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81780_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81780_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81778             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81778_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81778_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81778_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81778_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81778_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81778_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81778_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81778_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81778_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81778_iter[i] /
                    (ctx->futhark_mc_segmap_task_81778_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81778_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81784          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81784_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81784_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81784_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81784_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81784_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81784_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81784_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81784_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81784_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81784_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81784_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81784_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81784_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81784_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81784_total_iter /
                (ctx->futhark_mc_segmap_parloop_81784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81784_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81784_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81784_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81782             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81782_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81782_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81782_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81782_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81782_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81782_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81782_iter[i] /
                    (ctx->futhark_mc_segmap_task_81782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81782_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81788          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81788_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81788_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81788_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81788_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81788_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81788_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81788_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81788_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81788_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81788_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81788_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81788_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81788_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81788_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81788_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81788_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81788_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81788_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81788_total_iter /
                (ctx->futhark_mc_segmap_parloop_81788_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81788_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81788_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81788_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81786             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81786_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81786_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81786_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81786_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81786_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81786_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81786_iter[i] /
                    (ctx->futhark_mc_segmap_task_81786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81786_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81792          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81792_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81792_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81792_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81792_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81792_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81792_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81792_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81792_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81792_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81792_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81792_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81792_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81792_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81792_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81792_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81792_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81792_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81792_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81792_total_iter /
                (ctx->futhark_mc_segmap_parloop_81792_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81792_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81792_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81792_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81804  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81804_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81804_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81804_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81804_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81804_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81804_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81804_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81804_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81804_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81804_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81804_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81797             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81797_runs[i],
                    (long) ctx->futhark_mc_segred_task_81797_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81797_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81797_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81797_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81797_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81797_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81797_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81797_iter[i],
                    (long) ctx->futhark_mc_segred_task_81797_iter[i] /
                    (ctx->futhark_mc_segred_task_81797_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81797_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81810  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81810_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81810_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81810_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81810_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81810_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81810_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81810_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81810_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81810_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81810_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81810_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81806             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81806_runs[i],
                    (long) ctx->futhark_mc_segred_task_81806_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81806_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81806_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81806_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81806_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81806_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81806_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81806_iter[i],
                    (long) ctx->futhark_mc_segred_task_81806_iter[i] /
                    (ctx->futhark_mc_segred_task_81806_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81806_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81795          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81795_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81795_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81795_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81795_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81795_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81795_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81795_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81795_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81795_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81795_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81795_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81795_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81795_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81795_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81795_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81795_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81795_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81795_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81795_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81795_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81795_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81795_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81795_total_iter /
                (ctx->futhark_mc_segmap_parloop_81795_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81795_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81795_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81795_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81790             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81790_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81790_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81790_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81790_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81790_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81790_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81790_iter[i] /
                    (ctx->futhark_mc_segmap_task_81790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81790_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81793      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81793_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81793_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81793_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81793_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81793_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81793_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81793_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81793_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81793_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81793_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81793_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81793_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81762          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81762_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81762_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81762_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81762_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81762_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81762_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81762_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81762_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81762_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81762_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81762_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81762_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81762_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81762_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81762_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81762_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81762_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81762_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81762_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81762_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81762_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81762_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81762_total_iter /
                (ctx->futhark_mc_segmap_parloop_81762_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81762_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81762_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81762_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81750             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81750_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81750_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81750_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81750_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81750_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81750_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81750_iter[i] /
                    (ctx->futhark_mc_segmap_task_81750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81750_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81760      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81760_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81760_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81760_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81760_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81760_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81760_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81760_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81760_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81760_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81760_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81760_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81760_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81814          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81814_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81814_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81814_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81814_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81814_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81814_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81814_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81814_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81814_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81814_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81814_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81814_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81814_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81814_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81814_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81814_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81814_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81814_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81814_total_iter /
                (ctx->futhark_mc_segmap_parloop_81814_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81814_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81814_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81814_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81835    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81835_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81835_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81835_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81835_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81835_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81835_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81835_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81835_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81835_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81835_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81837    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81837_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81837_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81837_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81837_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81837_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81837_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81837_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81837_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81837_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81837_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81837_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81832            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81832_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81832_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81832_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81832_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81832_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81832_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81832_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81832_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81832_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81832_iter[i] /
                    (ctx->futhark_mc_segscan_task_81832_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81832_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81841          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81841_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81841_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81841_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81841_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81841_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81841_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81841_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81841_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81841_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81841_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81841_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81841_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81841_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81841_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81841_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81841_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81841_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81841_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81841_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81841_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81841_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81841_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81841_total_iter /
                (ctx->futhark_mc_segmap_parloop_81841_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81841_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81841_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81841_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81839             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81839_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81839_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81839_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81839_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81839_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81839_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81839_iter[i] /
                    (ctx->futhark_mc_segmap_task_81839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81839_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81845          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81845_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81845_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81845_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81845_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81845_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81845_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81845_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81845_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81845_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81845_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81845_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81845_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81845_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81845_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81845_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81845_total_iter /
                (ctx->futhark_mc_segmap_parloop_81845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81845_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81845_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81845_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81843             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81843_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81843_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81843_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81843_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81843_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81843_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81843_iter[i] /
                    (ctx->futhark_mc_segmap_task_81843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81843_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81849          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81849_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81849_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81849_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81849_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81849_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81849_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81849_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81849_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81849_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81849_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81849_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81849_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81849_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81849_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81849_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81849_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81849_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81849_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81849_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81849_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81849_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81849_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81849_total_iter /
                (ctx->futhark_mc_segmap_parloop_81849_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81849_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81849_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81849_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81847             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81847_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81847_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81847_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81847_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81847_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81847_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81847_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81847_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81847_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81847_iter[i] /
                    (ctx->futhark_mc_segmap_task_81847_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81847_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81853          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81853_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81853_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81853_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81853_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81853_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81853_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81853_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81853_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81853_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81853_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81853_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81853_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81853_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81853_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81853_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81853_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81853_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81853_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81853_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81853_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81853_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81853_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81853_total_iter /
                (ctx->futhark_mc_segmap_parloop_81853_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81853_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81853_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81853_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81863  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81863_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81863_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81863_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81863_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81863_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81863_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81863_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81863_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81863_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81863_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81863_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81860             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81860_runs[i],
                    (long) ctx->futhark_mc_segred_task_81860_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81860_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81860_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81860_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81860_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81860_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81860_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81860_iter[i],
                    (long) ctx->futhark_mc_segred_task_81860_iter[i] /
                    (ctx->futhark_mc_segred_task_81860_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81860_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81868  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81868_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81868_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81868_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81868_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81868_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81868_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81868_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81868_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81868_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81868_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81868_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81865             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81865_runs[i],
                    (long) ctx->futhark_mc_segred_task_81865_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81865_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81865_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81865_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81865_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81865_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81865_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81865_iter[i],
                    (long) ctx->futhark_mc_segred_task_81865_iter[i] /
                    (ctx->futhark_mc_segred_task_81865_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81865_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81857          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81857_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81857_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81857_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81857_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81857_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81857_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81857_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81857_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81857_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81857_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81857_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81857_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81857_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81857_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81857_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81857_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81857_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81857_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81857_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81857_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81857_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81857_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81857_total_iter /
                (ctx->futhark_mc_segmap_parloop_81857_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81857_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81857_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81857_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81851             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81851_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81851_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81851_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81851_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81851_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81851_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81851_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81851_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81851_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81851_iter[i] /
                    (ctx->futhark_mc_segmap_task_81851_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81851_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81855      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81855_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81855_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81855_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81855_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81855_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81855_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81855_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81855_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81855_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81855_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81855_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81855_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81824          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81824_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81824_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81824_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81824_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81824_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81824_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81824_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81824_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81824_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81824_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81824_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81824_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81824_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81824_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81824_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81824_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81824_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81824_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81824_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81824_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81824_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81824_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81824_total_iter /
                (ctx->futhark_mc_segmap_parloop_81824_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81824_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81824_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81824_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81812             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81812_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81812_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81812_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81812_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81812_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81812_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81812_iter[i] /
                    (ctx->futhark_mc_segmap_task_81812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81812_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81822      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81822_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81822_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81822_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81822_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81822_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81822_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81822_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81822_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81822_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81822_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81822_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81822_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81872          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81872_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81872_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81872_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81872_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81872_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81872_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81872_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81872_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81872_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81872_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81872_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81872_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81872_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81872_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81872_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81872_total_iter /
                (ctx->futhark_mc_segmap_parloop_81872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81872_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81872_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81872_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81896    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81896_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81896_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81896_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81896_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81896_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81896_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81896_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81896_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81896_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81896_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81896_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81898    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81898_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81898_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81898_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81898_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81898_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81898_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81898_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81898_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81898_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81898_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81898_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81893            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81893_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81893_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81893_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81893_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81893_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81893_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81893_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81893_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81893_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81893_iter[i] /
                    (ctx->futhark_mc_segscan_task_81893_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81893_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81902          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81902_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81902_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81902_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81902_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81902_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81902_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81902_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81902_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81902_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81902_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81902_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81902_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81902_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81902_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81902_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81902_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81902_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81902_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81902_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81902_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81902_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81902_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81902_total_iter /
                (ctx->futhark_mc_segmap_parloop_81902_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81902_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81902_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81902_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81900             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81900_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81900_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81900_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81900_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81900_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81900_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81900_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81900_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81900_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81900_iter[i] /
                    (ctx->futhark_mc_segmap_task_81900_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81900_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81906          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81906_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81906_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81906_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81906_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81906_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81906_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81906_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81906_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81906_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81906_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81906_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81906_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81906_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81906_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81906_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81906_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81906_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81906_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81906_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81906_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81906_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81906_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81906_total_iter /
                (ctx->futhark_mc_segmap_parloop_81906_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81906_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81906_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81906_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81904             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81904_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81904_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81904_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81904_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81904_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81904_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81904_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81904_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81904_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81904_iter[i] /
                    (ctx->futhark_mc_segmap_task_81904_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81904_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81910          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81910_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81910_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81910_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81910_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81910_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81910_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81910_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81910_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81910_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81910_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81910_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81910_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81910_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81910_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81910_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81910_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81910_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81910_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81910_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81910_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81910_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81910_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81910_total_iter /
                (ctx->futhark_mc_segmap_parloop_81910_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81910_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81910_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81910_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81908             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81908_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81908_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81908_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81908_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81908_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81908_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81908_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81908_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81908_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81908_iter[i] /
                    (ctx->futhark_mc_segmap_task_81908_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81908_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81914          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81914_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81914_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81914_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81914_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81914_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81914_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81914_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81914_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81914_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81914_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81914_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81914_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81914_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81914_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81914_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81914_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81914_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81914_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81914_total_iter /
                (ctx->futhark_mc_segmap_parloop_81914_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81914_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81914_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81914_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81928  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81928_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81928_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81928_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81928_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81928_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81928_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81928_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81928_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81928_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81928_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81928_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81923             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81923_runs[i],
                    (long) ctx->futhark_mc_segred_task_81923_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81923_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81923_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81923_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81923_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81923_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81923_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81923_iter[i],
                    (long) ctx->futhark_mc_segred_task_81923_iter[i] /
                    (ctx->futhark_mc_segred_task_81923_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81923_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81934  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81934_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81934_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81934_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81934_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81934_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81934_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81934_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81934_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81934_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81930             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81930_runs[i],
                    (long) ctx->futhark_mc_segred_task_81930_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81930_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81930_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81930_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81930_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81930_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81930_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81930_iter[i],
                    (long) ctx->futhark_mc_segred_task_81930_iter[i] /
                    (ctx->futhark_mc_segred_task_81930_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81930_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81919          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81919_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81919_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81919_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81919_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81919_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81919_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81919_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81919_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81919_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81919_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81919_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81919_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81919_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81919_total_iter /
                (ctx->futhark_mc_segmap_parloop_81919_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81919_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81919_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81919_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81912             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81912_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81912_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81912_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81912_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81912_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81912_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81912_iter[i] /
                    (ctx->futhark_mc_segmap_task_81912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81912_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81917      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81917_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81917_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81917_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81917_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81917_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81917_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81917_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81917_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81884          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81884_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81884_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81884_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81884_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81884_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81884_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81884_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81884_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81884_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81884_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81884_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81884_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81884_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81884_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81884_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81884_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81884_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81884_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81884_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81884_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81884_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81884_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81884_total_iter /
                (ctx->futhark_mc_segmap_parloop_81884_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81884_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81884_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81884_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81870             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81870_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81870_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81870_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81870_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81870_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81870_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81870_iter[i] /
                    (ctx->futhark_mc_segmap_task_81870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81870_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81882      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81882_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81882_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81882_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81882_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81882_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81882_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81882_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81882_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81882_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81882_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81882_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81882_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81938          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81938_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81938_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81938_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81938_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81938_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81938_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81938_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81938_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81938_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81938_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81938_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81938_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81938_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81938_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81938_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81938_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81938_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81938_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81938_total_iter /
                (ctx->futhark_mc_segmap_parloop_81938_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81938_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81938_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81938_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81964    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81964_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81964_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81964_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81964_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81964_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81964_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81964_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81964_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81964_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81964_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81964_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81966    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81966_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81966_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81966_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81966_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81966_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81966_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81966_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81966_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81966_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81966_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81966_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81961            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81961_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81961_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81961_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81961_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81961_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81961_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81961_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81961_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81961_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81961_iter[i] /
                    (ctx->futhark_mc_segscan_task_81961_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81961_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81970          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81970_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81970_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81970_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81970_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81970_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81970_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81970_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81970_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81970_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81970_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81970_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81970_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81970_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81970_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81970_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81970_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81970_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81970_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81970_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81970_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81970_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81970_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81970_total_iter /
                (ctx->futhark_mc_segmap_parloop_81970_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81970_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81970_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81970_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81968             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81968_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81968_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81968_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81968_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81968_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81968_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81968_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81968_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81968_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81968_iter[i] /
                    (ctx->futhark_mc_segmap_task_81968_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81968_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81974          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81974_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81974_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81974_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81974_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81974_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81974_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81974_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81974_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81974_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81974_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81974_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81974_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81974_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81974_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81974_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81974_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81974_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81974_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81974_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81974_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81974_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81974_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81974_total_iter /
                (ctx->futhark_mc_segmap_parloop_81974_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81974_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81974_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81974_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81972             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81972_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81972_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81972_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81972_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81972_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81972_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81972_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81972_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81972_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81972_iter[i] /
                    (ctx->futhark_mc_segmap_task_81972_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81972_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81978          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81978_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81978_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81978_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81978_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81978_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81978_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81978_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81978_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81978_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81978_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81978_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81978_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81978_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81978_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81978_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81978_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81978_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81978_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81978_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81978_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81978_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81978_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81978_total_iter /
                (ctx->futhark_mc_segmap_parloop_81978_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81978_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81978_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81978_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81976             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81976_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81976_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81976_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81976_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81976_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81976_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81976_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81976_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81976_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81976_iter[i] /
                    (ctx->futhark_mc_segmap_task_81976_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81976_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81982          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81982_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81982_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81982_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81982_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81982_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81982_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81982_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81982_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81982_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81982_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81982_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81982_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81982_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81982_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81982_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81982_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81982_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81982_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81982_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81982_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81982_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81982_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81982_total_iter /
                (ctx->futhark_mc_segmap_parloop_81982_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81982_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81982_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81982_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81997          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81997_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81997_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81997_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81997_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81997_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81997_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81997_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81997_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81997_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81997_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81997_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81997_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81997_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81997_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81997_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81997_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81997_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81997_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81997_total_iter /
                (ctx->futhark_mc_segmap_parloop_81997_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81997_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81997_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81997_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81995             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81995_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81995_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81995_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81995_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81995_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81995_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81995_iter[i] /
                    (ctx->futhark_mc_segmap_task_81995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81995_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_82006  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_82006_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82006_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82006_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_82006_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82006_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82006_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82006_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82006_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82006_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82006_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_82006_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81999             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81999_runs[i],
                    (long) ctx->futhark_mc_segred_task_81999_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81999_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81999_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81999_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81999_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81999_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81999_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81999_iter[i],
                    (long) ctx->futhark_mc_segred_task_81999_iter[i] /
                    (ctx->futhark_mc_segred_task_81999_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81999_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_82012  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_82012_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82012_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82012_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_82012_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82012_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82012_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82012_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82012_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82012_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82012_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_82012_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_82008             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_82008_runs[i],
                    (long) ctx->futhark_mc_segred_task_82008_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82008_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82008_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_82008_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_82008_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82008_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_82008_iter[i]),
                    (long) ctx->futhark_mc_segred_task_82008_iter[i],
                    (long) ctx->futhark_mc_segred_task_82008_iter[i] /
                    (ctx->futhark_mc_segred_task_82008_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82008_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81989          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81989_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81989_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81989_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81989_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81989_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81989_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81989_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81989_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81989_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81989_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81989_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81989_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81989_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81989_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81989_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81989_total_iter /
                (ctx->futhark_mc_segmap_parloop_81989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81989_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81989_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81989_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81980             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81980_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81980_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81980_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81980_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81980_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81980_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81980_iter[i] /
                    (ctx->futhark_mc_segmap_task_81980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81980_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81987      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81987_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81987_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81987_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81987_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81987_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81987_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81987_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81987_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81952          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81952_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81952_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81952_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81952_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81952_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81952_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81952_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81952_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81952_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81952_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81952_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81952_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81952_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81952_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81952_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81952_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81952_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81952_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81952_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81952_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81952_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81952_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81952_total_iter /
                (ctx->futhark_mc_segmap_parloop_81952_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81952_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81952_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81952_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81936             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81936_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81936_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81936_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81936_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81936_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81936_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81936_iter[i] /
                    (ctx->futhark_mc_segmap_task_81936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81936_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81950      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81950_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81950_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81950_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81950_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81950_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81950_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81950_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81950_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81950_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81950_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81950_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81950_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82016          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82016_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82016_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82016_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82016_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82016_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82016_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82016_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82016_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82016_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82016_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82016_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82016_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82016_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82016_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82016_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82016_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82016_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82016_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82016_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82016_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82016_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82016_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82016_total_iter /
                (ctx->futhark_mc_segmap_parloop_82016_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82016_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82016_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82016_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82025          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82025_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82025_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82025_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82025_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82025_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82025_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82025_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82025_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82025_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82025_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82025_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82025_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82025_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82025_total_iter /
                (ctx->futhark_mc_segmap_parloop_82025_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82025_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82025_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82025_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82023             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82023_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82023_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82023_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82023_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82023_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82023_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82023_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82023_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82023_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82023_iter[i] /
                    (ctx->futhark_mc_segmap_task_82023_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82023_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82020          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82020_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82020_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82020_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82020_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82020_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82020_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82020_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82020_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82020_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82020_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82020_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82020_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82020_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82020_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82020_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82020_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82020_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82020_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82020_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82020_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82020_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82020_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82020_total_iter /
                (ctx->futhark_mc_segmap_parloop_82020_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82020_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82020_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82020_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82014             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82014_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82014_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82014_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82014_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82014_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82014_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82014_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82014_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82014_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82014_iter[i] /
                    (ctx->futhark_mc_segmap_task_82014_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82014_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_82018      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_82018_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82018_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82018_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82018_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_82018_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_82018_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82018_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_82018_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_82018_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82018_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_82018_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82018_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_81633,
                             struct memblock Y_mem_75306, int64_t m_70232,
                             int64_t n_70233, int64_t q_70235,
                             int64_t degree_70236, int64_t jump_70237,
                             int64_t jump_threshold_70238,
                             int64_t q_threshold_70239);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_81634 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75312;
    int64_t free_bytes_75315;
    int64_t free_bytes_75324;
    int64_t free_bytes_75327;
    unsigned char *free_mem_75422;
};
struct futhark_mc_segmap_parloop_struct_81636 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75312;
    int64_t free_bytes_75315;
    int64_t free_bytes_75324;
    int64_t free_bytes_75327;
    unsigned char *free_mem_75422;
};
static int futhark_mc_segmap_parloop_81637(void *args, int64_t start,
                                           int64_t end, int flat_tid_71581,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81636
    *futhark_mc_segmap_parloop_struct_81636 =
    (struct futhark_mc_segmap_parloop_struct_81636 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81636->ctx;
    uint64_t futhark_mc_segmap_parloop_81637_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81637_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81636->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81636->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81636->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81636->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81636->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81636->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81636->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81636->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81636->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81636->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81636->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75312 =
            futhark_mc_segmap_parloop_struct_81636->free_bytes_75312;
    int64_t bytes_75315 =
            futhark_mc_segmap_parloop_struct_81636->free_bytes_75315;
    int64_t bytes_75324 =
            futhark_mc_segmap_parloop_struct_81636->free_bytes_75324;
    int64_t bytes_75327 =
            futhark_mc_segmap_parloop_struct_81636->free_bytes_75327;
    struct memblock mem_75422 = {.desc ="mem_75422", .mem =
                                 futhark_mc_segmap_parloop_struct_81636->free_mem_75422,
                                 .size =0, .references =NULL};
    size_t mem_75331_cached_sizze_81638 = 0;
    unsigned char *mem_75331 = NULL;
    size_t mem_75346_cached_sizze_81639 = 0;
    unsigned char *mem_75346 = NULL;
    size_t mem_75349_cached_sizze_81640 = 0;
    unsigned char *mem_75349 = NULL;
    size_t mem_75376_cached_sizze_81641 = 0;
    unsigned char *mem_75376 = NULL;
    size_t mem_75391_cached_sizze_81642 = 0;
    unsigned char *mem_75391 = NULL;
    size_t mem_75406_cached_sizze_81643 = 0;
    unsigned char *mem_75406 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76359 = start;
    
    if (mem_75331_cached_sizze_81638 < (size_t) bytes_75312) {
        mem_75331 = realloc(mem_75331, bytes_75312);
        mem_75331_cached_sizze_81638 = bytes_75312;
    }
    if (mem_75346_cached_sizze_81639 < (size_t) bytes_75315) {
        mem_75346 = realloc(mem_75346, bytes_75315);
        mem_75346_cached_sizze_81639 = bytes_75315;
    }
    if (mem_75349_cached_sizze_81640 < (size_t) bytes_75312) {
        mem_75349 = realloc(mem_75349, bytes_75312);
        mem_75349_cached_sizze_81640 = bytes_75312;
    }
    if (mem_75376_cached_sizze_81641 < (size_t) bytes_75312) {
        mem_75376 = realloc(mem_75376, bytes_75312);
        mem_75376_cached_sizze_81641 = bytes_75312;
    }
    if (mem_75391_cached_sizze_81642 < (size_t) bytes_75324) {
        mem_75391 = realloc(mem_75391, bytes_75324);
        mem_75391_cached_sizze_81642 = bytes_75324;
    }
    if (mem_75406_cached_sizze_81643 < (size_t) bytes_75327) {
        mem_75406 = realloc(mem_75406, bytes_75327);
        mem_75406_cached_sizze_81643 = bytes_75327;
    }
    for (; iter_76359 < end; iter_76359++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76526 = m_70232;
        int64_t gtid_71582 = iter_76359;
        int64_t remnant_76527 = iter_76359 - gtid_71582;
        int64_t discard_74921;
        int64_t scanacc_76361 = (int64_t) 0;
        
        for (int64_t i_76360 = 0; i_76360 < n_70233; i_76360++) {
            float x_76363 = ((float *) Y_mem_75306.mem)[gtid_71582 * n_70233 +
                                                        i_76360];
            bool isnan_res_76364;
            
            isnan_res_76364 = futrts_isnan32(x_76363);
            
            bool defunc_0_p_res_76365 = !isnan_res_76364;
            int64_t defunc_0_f_res_76366 = btoi_bool_i64(defunc_0_p_res_76365);
            int64_t defunc_1_op_res_76367 = add64(defunc_0_f_res_76366,
                                                  scanacc_76361);
            
            ((int64_t *) mem_75331)[i_76360] = defunc_1_op_res_76367;
            
            int64_t scanacc_tmp_76528 = defunc_1_op_res_76367;
            
            scanacc_76361 = scanacc_tmp_76528;
        }
        discard_74921 = scanacc_76361;
        
        int64_t last_res_70282 = ((int64_t *) mem_75331)[i_70247];
        
        for (int64_t i_76530 = 0; i_76530 < n_70233; i_76530++) {
            ((float *) mem_75346)[i_76530] = 0.0F;
        }
        for (int64_t i_76531 = 0; i_76531 < n_70233; i_76531++) {
            ((int64_t *) mem_75349)[i_76531] = (int64_t) -1;
        }
        for (int64_t write_iter_76369 = 0; write_iter_76369 < n_70233;
             write_iter_76369++) {
            float write_iv_76372 = ((float *) Y_mem_75306.mem)[gtid_71582 *
                                                               n_70233 +
                                                               write_iter_76369];
            bool isnan_res_76373;
            
            isnan_res_76373 = futrts_isnan32(write_iv_76372);
            
            bool defunc_0_p_res_76374 = !isnan_res_76373;
            int64_t defunc_1_f_res_76375;
            
            if (defunc_0_p_res_76374) {
                int64_t write_iv_76376 =
                        ((int64_t *) mem_75331)[write_iter_76369];
                int64_t defunc_1_f_res_t_res_76377 = sub64(write_iv_76376,
                                                           (int64_t) 1);
                
                defunc_1_f_res_76375 = defunc_1_f_res_t_res_76377;
            } else {
                defunc_1_f_res_76375 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_76375) &&
                slt64(defunc_1_f_res_76375, n_70233)) {
                ((int64_t *) mem_75349)[defunc_1_f_res_76375] =
                    write_iter_76369;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_76375) &&
                slt64(defunc_1_f_res_76375, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75346 + defunc_1_f_res_76375 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_71582 * n_70233 +
                                               write_iter_76369) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_76381 = 0; i_76381 < n_70233; i_76381++) {
            int64_t x_76383 = ((int64_t *) mem_75349)[i_76381];
            int64_t defunc_0_f_res_76384 = add64((int64_t) 1, x_76383);
            
            ((int64_t *) mem_75376)[i_76381] = defunc_0_f_res_76384;
        }
        
        int64_t min_arg_70297 = sub64(last_res_70282, (int64_t) 1);
        int64_t min_arg_70298 = sub64(last_res_70282, min_res_70253);
        int64_t min_res_70299 = smin64(q_70235, last_res_70282);
        float i64_res_70300 = sitofp_i64_f32(last_res_70282);
        float x_70301 = i64_res_70259 - i64_res_70300;
        float max_arg_70302 = x_70301 / 2.0F;
        float max_res_70303 = fmax32(0.0F, max_arg_70302);
        
        for (int64_t i_76386 = 0; i_76386 < q_70235; i_76386++) {
            bool cond_76388 = sle64(last_res_70282, i_76386);
            float defunc_0_f_res_76389;
            
            if (cond_76388) {
                defunc_0_f_res_76389 = 0.0F;
            } else {
                defunc_0_f_res_76389 = 1.0F;
            }
            ((float *) mem_75391)[i_76386] = defunc_0_f_res_76389;
        }
        for (int64_t i_76391 = 0; i_76391 < n_m_70241; i_76391++) {
            int64_t min_arg_76393 = mul64(jump_70237, i_76391);
            int64_t min_res_76394 = smin64(i_70247, min_arg_76393);
            int64_t defunc_0_g_res_76395 = add64((int64_t) 1, min_res_76394);
            bool init_idx_76396;
            int64_t init_idx_76397;
            int64_t init_idx_76398;
            bool loop_while_76399;
            int64_t low_76400;
            int64_t high_76401;
            
            loop_while_76399 = x_70248;
            low_76400 = (int64_t) 0;
            high_76401 = i_70247;
            while (loop_while_76399) {
                int64_t x_76402 = add64(low_76400, high_76401);
                int64_t mid_76403 = sdiv64(x_76402, (int64_t) 2);
                bool x_76404 = sle64((int64_t) 0, mid_76403);
                bool y_76405 = slt64(mid_76403, n_70233);
                bool bounds_check_76406 = x_76404 && y_76405;
                bool index_certs_76407;
                
                if (!bounds_check_76406) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_76403,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_76408 = ((int64_t *) mem_75376)[mid_76403];
                bool cond_76409 = slt64(mid_id_76408, (int64_t) 0);
                int64_t mid_idx_76410;
                
                if (cond_76409) {
                    mid_idx_76410 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_76410 = mid_id_76408;
                }
                
                bool cond_76411 = sle64(defunc_0_g_res_76395, mid_idx_76410);
                int64_t loopres_76412;
                int64_t loopres_76413;
                
                if (cond_76411) {
                    int64_t loopres_t_res_76414 = sub64(mid_76403, (int64_t) 1);
                    
                    loopres_76412 = low_76400;
                    loopres_76413 = loopres_t_res_76414;
                } else {
                    int64_t loopres_f_res_76415 = add64((int64_t) 1, mid_76403);
                    
                    loopres_76412 = loopres_f_res_76415;
                    loopres_76413 = high_76401;
                }
                
                bool loop_cond_76416 = sle64(loopres_76412, loopres_76413);
                bool loop_while_tmp_76537 = loop_cond_76416;
                int64_t low_tmp_76538 = loopres_76412;
                int64_t high_tmp_76539 = loopres_76413;
                
                loop_while_76399 = loop_while_tmp_76537;
                low_76400 = low_tmp_76538;
                high_76401 = high_tmp_76539;
            }
            init_idx_76396 = loop_while_76399;
            init_idx_76397 = low_76400;
            init_idx_76398 = high_76401;
            
            bool idx_76417;
            int64_t idx_76418;
            int64_t idx_76419;
            int64_t idx_76420;
            bool loop_while_76421;
            int64_t l_idx_76422;
            int64_t r_idx_76423;
            int64_t span_76424;
            
            loop_while_76421 = loop_cond_70258;
            l_idx_76422 = init_idx_76397;
            r_idx_76423 = init_idx_76397;
            span_76424 = (int64_t) 1;
            while (loop_while_76421) {
                int64_t max_arg_76425 = sub64(l_idx_76422, (int64_t) 1);
                int64_t max_res_76426 = smax64((int64_t) 0, max_arg_76425);
                int64_t min_arg_76427 = add64((int64_t) 1, r_idx_76423);
                int64_t min_res_76428 = smin64(min_arg_70297, min_arg_76427);
                bool x_76429 = sle64((int64_t) 0, max_res_76426);
                bool y_76430 = slt64(max_res_76426, n_70233);
                bool bounds_check_76431 = x_76429 && y_76430;
                bool index_certs_76432;
                
                if (!bounds_check_76431) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_76426,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_76433 = ((int64_t *) mem_75376)[max_res_76426];
                int64_t abs_arg_76434 = sub64(x_76433, defunc_0_g_res_76395);
                int64_t abs_res_76435 = abs64(abs_arg_76434);
                bool x_76436 = sle64((int64_t) 0, min_res_76428);
                bool y_76437 = slt64(min_res_76428, n_70233);
                bool bounds_check_76438 = x_76436 && y_76437;
                bool index_certs_76439;
                
                if (!bounds_check_76438) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76428,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_76440 = ((int64_t *) mem_75376)[min_res_76428];
                int64_t abs_arg_76441 = sub64(x_76440, defunc_0_g_res_76395);
                int64_t abs_res_76442 = abs64(abs_arg_76441);
                bool cond_76443 = max_res_76426 == l_idx_76422;
                int64_t loopres_76444;
                int64_t loopres_76445;
                int64_t loopres_76446;
                
                if (cond_76443) {
                    loopres_76444 = l_idx_76422;
                    loopres_76445 = r_idx_76423;
                    loopres_76446 = min_res_70253;
                } else {
                    bool cond_76447 = slt64(abs_res_76435, abs_res_76442);
                    bool cond_f_res_76448 = min_res_76428 == r_idx_76423;
                    bool x_76449 = !cond_76447;
                    bool y_76450 = cond_f_res_76448 && x_76449;
                    bool cond_76451 = cond_76447 || y_76450;
                    int64_t loopres_f_res_76452;
                    
                    if (cond_76451) {
                        loopres_f_res_76452 = max_res_76426;
                    } else {
                        loopres_f_res_76452 = l_idx_76422;
                    }
                    
                    int64_t loopres_f_res_76453;
                    
                    if (cond_76451) {
                        loopres_f_res_76453 = r_idx_76423;
                    } else {
                        loopres_f_res_76453 = min_res_76428;
                    }
                    
                    int64_t loopres_f_res_76454;
                    
                    if (cond_76451) {
                        int64_t loopres_f_res_t_res_76455 = add64((int64_t) 1,
                                                                  span_76424);
                        
                        loopres_f_res_76454 = loopres_f_res_t_res_76455;
                    } else {
                        int64_t loopres_f_res_f_res_76456 = add64((int64_t) 1,
                                                                  span_76424);
                        
                        loopres_f_res_76454 = loopres_f_res_f_res_76456;
                    }
                    loopres_76444 = loopres_f_res_76452;
                    loopres_76445 = loopres_f_res_76453;
                    loopres_76446 = loopres_f_res_76454;
                }
                
                bool loop_cond_76457 = slt64(loopres_76446, min_res_70253);
                bool loop_while_tmp_76540 = loop_cond_76457;
                int64_t l_idx_tmp_76541 = loopres_76444;
                int64_t r_idx_tmp_76542 = loopres_76445;
                int64_t span_tmp_76543 = loopres_76446;
                
                loop_while_76421 = loop_while_tmp_76540;
                l_idx_76422 = l_idx_tmp_76541;
                r_idx_76423 = r_idx_tmp_76542;
                span_76424 = span_tmp_76543;
            }
            idx_76417 = loop_while_76421;
            idx_76418 = l_idx_76422;
            idx_76419 = r_idx_76423;
            idx_76420 = span_76424;
            
            int64_t min_res_76458 = smin64(min_arg_70298, idx_76418);
            int64_t max_res_76459 = smax64((int64_t) 0, min_res_76458);
            int64_t x_76460 = add64(min_res_70299, max_res_76459);
            int64_t r_76461 = sub64(x_76460, (int64_t) 1);
            bool x_76462 = sle64((int64_t) 0, r_76461);
            bool y_76463 = slt64(r_76461, n_70233);
            bool bounds_check_76464 = x_76462 && y_76463;
            bool index_certs_76465;
            
            if (!bounds_check_76464) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_76461,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_76466 = ((int64_t *) mem_75349)[r_76461];
            int64_t abs_arg_76467 = sub64(x_76466, min_res_76394);
            int64_t abs_res_76468 = abs64(abs_arg_76467);
            bool x_76469 = sle64((int64_t) 0, max_res_76459);
            bool y_76470 = slt64(max_res_76459, n_70233);
            bool bounds_check_76471 = x_76469 && y_76470;
            bool index_certs_76472;
            
            if (!bounds_check_76471) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_76459,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_76473 = ((int64_t *) mem_75349)[max_res_76459];
            int64_t abs_arg_76474 = sub64(x_76473, min_res_76394);
            int64_t abs_res_76475 = abs64(abs_arg_76474);
            int64_t max_res_76476 = smax64(abs_res_76468, abs_res_76475);
            float defunc_0_f_res_76477 = sitofp_i64_f32(max_res_76476);
            float defunc_1_f_res_76478 = max_res_70303 + defunc_0_f_res_76477;
            float defunc_2_reduce_res_76479;
            float redout_76481 = 0.0F;
            
            for (int64_t i_76480 = 0; i_76480 < q_70235; i_76480++) {
                float x_76482 = ((float *) mem_75391)[i_76480];
                bool cond_76483 = sle64(last_res_70282, i_76480);
                int64_t defunc_0_f_res_76484;
                
                if (cond_76483) {
                    defunc_0_f_res_76484 = (int64_t) 0;
                } else {
                    int64_t i_76485 = add64(max_res_76459, i_76480);
                    int64_t defunc_0_add_arg_76486 =
                            ((int64_t *) mem_75349)[i_76485];
                    int64_t defunc_1_add_res_76487 = add64((int64_t) 1,
                                                           defunc_0_add_arg_76486);
                    
                    defunc_0_f_res_76484 = defunc_1_add_res_76487;
                }
                
                int64_t binop_p_76488 = sub64(defunc_0_f_res_76484,
                                              min_res_76394);
                float defunc_0_f_res_76489 = sitofp_i64_f32(binop_p_76488);
                float abs_res_76490 = (float) fabs(defunc_0_f_res_76489);
                float tmp1_76491 = abs_res_76490 / defunc_1_f_res_76478;
                float x_76492 = tmp1_76491 * tmp1_76491;
                float y_76493 = tmp1_76491 * x_76492;
                float tmp2_76494 = 1.0F - y_76493;
                float x_76495 = tmp2_76494 * tmp2_76494;
                float tmp3_76496 = tmp2_76494 * x_76495;
                float w_j_76497 = x_76482 * tmp3_76496;
                float defunc_1_op_res_76498 = w_j_76497 + redout_76481;
                float redout_tmp_76544 = defunc_1_op_res_76498;
                
                redout_76481 = redout_tmp_76544;
            }
            defunc_2_reduce_res_76479 = redout_76481;
            
            float a0_76499 = 1.0F / defunc_2_reduce_res_76479;
            float defunc_2_reduce_res_76500;
            float redout_76502 = 0.0F;
            
            for (int64_t i_76501 = 0; i_76501 < q_70235; i_76501++) {
                float x_76503 = ((float *) mem_75391)[i_76501];
                bool cond_76504 = sle64(last_res_70282, i_76501);
                int64_t defunc_0_f_res_76505;
                
                if (cond_76504) {
                    defunc_0_f_res_76505 = (int64_t) 0;
                } else {
                    int64_t i_76506 = add64(max_res_76459, i_76501);
                    int64_t defunc_0_add_arg_76507 =
                            ((int64_t *) mem_75349)[i_76506];
                    int64_t defunc_1_add_res_76508 = add64((int64_t) 1,
                                                           defunc_0_add_arg_76507);
                    
                    defunc_0_f_res_76505 = defunc_1_add_res_76508;
                }
                
                int64_t binop_p_76509 = sub64(defunc_0_f_res_76505,
                                              min_res_76394);
                float defunc_0_f_res_76510 = sitofp_i64_f32(binop_p_76509);
                float abs_res_76511 = (float) fabs(defunc_0_f_res_76510);
                float tmp1_76512 = abs_res_76511 / defunc_1_f_res_76478;
                float x_76513 = tmp1_76512 * tmp1_76512;
                float y_76514 = tmp1_76512 * x_76513;
                float tmp2_76515 = 1.0F - y_76514;
                float x_76516 = tmp2_76515 * tmp2_76515;
                float tmp3_76517 = tmp2_76515 * x_76516;
                float tmp4_76518 = x_76503 * tmp3_76517;
                float defunc_0_f_res_76519;
                
                if (cond_76504) {
                    defunc_0_f_res_76519 = 0.0F;
                } else {
                    int64_t i_76520 = add64(max_res_76459, i_76501);
                    float defunc_0_add_arg_76521 =
                          ((float *) mem_75346)[i_76520];
                    
                    defunc_0_f_res_76519 = defunc_0_add_arg_76521;
                }
                
                float x_76522 = a0_76499 * tmp4_76518;
                float defunc_9_fit_fun_res_76523 = defunc_0_f_res_76519 *
                      x_76522;
                float defunc_1_op_res_76524 = defunc_9_fit_fun_res_76523 +
                      redout_76502;
                float redout_tmp_76545 = defunc_1_op_res_76524;
                
                redout_76502 = redout_tmp_76545;
            }
            defunc_2_reduce_res_76500 = redout_76502;
            ((float *) mem_75406)[i_76391] = defunc_2_reduce_res_76500;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75422.mem + gtid_71582 * n_m_70241 * (int64_t) 4,
                    mem_75406 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75331);
    free(mem_75346);
    free(mem_75349);
    free(mem_75376);
    free(mem_75391);
    free(mem_75406);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81637_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81637_end -
                 futhark_mc_segmap_parloop_81637_start;
        
        ctx->futhark_mc_segmap_parloop_81637_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81637_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81637_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81635(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71581 = tid;
    int num_tasks_76358 = info.nsubtasks;
    struct futhark_mc_task_81634 *futhark_mc_task_81634 =
                                 (struct futhark_mc_task_81634 *) args;
    struct futhark_context *ctx = futhark_mc_task_81634->ctx;
    uint64_t futhark_mc_segmap_task_81635_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81635_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81634->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81634->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81634->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81634->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81634->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81634->free_i_70247;
    bool x_70248 = futhark_mc_task_81634->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81634->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81634->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81634->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81634->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75312 = futhark_mc_task_81634->free_bytes_75312;
    int64_t bytes_75315 = futhark_mc_task_81634->free_bytes_75315;
    int64_t bytes_75324 = futhark_mc_task_81634->free_bytes_75324;
    int64_t bytes_75327 = futhark_mc_task_81634->free_bytes_75327;
    struct memblock mem_75422 = {.desc ="mem_75422", .mem =
                                 futhark_mc_task_81634->free_mem_75422, .size =
                                 0, .references =NULL};
    int64_t iter_76359;
    struct futhark_mc_segmap_parloop_struct_81636
    futhark_mc_segmap_parloop_struct_81636;
    
    futhark_mc_segmap_parloop_struct_81636.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81636.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81636.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81636.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81636.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81636.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81636.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81636.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81636.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81636.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81636.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81636.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81636.free_bytes_75312 = bytes_75312;
    futhark_mc_segmap_parloop_struct_81636.free_bytes_75315 = bytes_75315;
    futhark_mc_segmap_parloop_struct_81636.free_bytes_75324 = bytes_75324;
    futhark_mc_segmap_parloop_struct_81636.free_bytes_75327 = bytes_75327;
    futhark_mc_segmap_parloop_struct_81636.free_mem_75422 = mem_75422.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81637_task;
    
    futhark_mc_segmap_parloop_81637_task.name =
        "futhark_mc_segmap_parloop_81637";
    futhark_mc_segmap_parloop_81637_task.fn = futhark_mc_segmap_parloop_81637;
    futhark_mc_segmap_parloop_81637_task.args =
        &futhark_mc_segmap_parloop_struct_81636;
    futhark_mc_segmap_parloop_81637_task.iterations = iterations;
    futhark_mc_segmap_parloop_81637_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81637_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81637_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81637_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81637_task);
    
    if (futhark_mc_segmap_parloop_81637_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81637_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81637_total_end -
                 futhark_mc_segmap_parloop_81637_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81637_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81637_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81637_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81635_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81635_end -
                 futhark_mc_segmap_task_81635_start;
        
        ctx->futhark_mc_segmap_task_81635_runs[tid]++;
        ctx->futhark_mc_segmap_task_81635_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81635_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81645 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75312;
    int64_t free_bytes_75315;
    int64_t free_bytes_75324;
    int64_t free_bytes_75327;
    unsigned char *free_mem_75422;
};
struct futhark_mc_task_81653 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_71584;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75313;
};
struct futhark_mc_scan_stage_1_parloop_struct_81656 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_71584;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75313;
};
static int futhark_mc_scan_stage_1_parloop_81657(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_71585, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81656
    *futhark_mc_scan_stage_1_parloop_struct_81656 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81656 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81656->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81657_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81657_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81656->free_n_70233;
    int64_t gtid_71584 =
            futhark_mc_scan_stage_1_parloop_struct_81656->free_gtid_71584;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81656->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75313 = {.desc ="mem_75313", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81656->free_mem_75313,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76831 = start;
    int64_t x_76547;
    int64_t x_76548;
    
    x_76547 = (int64_t) 0;
    for (; iter_76831 < end; iter_76831++) {
        int64_t gtid_71586 = iter_76831;
        
        // stage 1 scan body
        {
            float x_76550 = ((float *) Y_mem_75306.mem)[gtid_71584 * n_70233 +
                                                        gtid_71586];
            bool isnan_res_76551;
            
            isnan_res_76551 = futrts_isnan32(x_76550);
            
            bool defunc_0_p_res_76552 = !isnan_res_76551;
            int64_t defunc_0_f_res_76553 = btoi_bool_i64(defunc_0_p_res_76552);
            
            // write mapped values results to memory
            { }
            x_76547 = x_76547;
            // Read next values
            {
                x_76548 = defunc_0_f_res_76553;
            }
            
            int64_t defunc_1_op_res_76549 = add64(x_76547, x_76548);
            
            ((int64_t *) mem_75313.mem)[gtid_71586] = defunc_1_op_res_76549;
            x_76547 = defunc_1_op_res_76549;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81657_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81657_end -
                 futhark_mc_scan_stage_1_parloop_81657_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81657_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81657_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81657_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81658 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_71584;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75313;
};
static int futhark_mc_scan_stage_3_parloop_81659(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_71585, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81658
    *futhark_mc_scan_stage_3_parloop_struct_81658 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81658 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81658->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81659_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81659_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81658->free_n_70233;
    int64_t gtid_71584 =
            futhark_mc_scan_stage_3_parloop_struct_81658->free_gtid_71584;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81658->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75313 = {.desc ="mem_75313", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81658->free_mem_75313,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76843 = start;
    int64_t x_76840;
    int64_t x_76841;
    
    if (iter_76843 == (int64_t) 0) {
        x_76840 = (int64_t) 0;
    } else {
        x_76840 = ((int64_t *) mem_75313.mem)[iter_76843 - (int64_t) 1];
    }
    for (; iter_76843 < end; iter_76843++) {
        int64_t gtid_71586 = iter_76843;
        
        // stage 3 scan body
        {
            float x_76550 = ((float *) Y_mem_75306.mem)[gtid_71584 * n_70233 +
                                                        gtid_71586];
            bool isnan_res_76551;
            
            isnan_res_76551 = futrts_isnan32(x_76550);
            
            bool defunc_0_p_res_76552 = !isnan_res_76551;
            int64_t defunc_0_f_res_76553 = btoi_bool_i64(defunc_0_p_res_76552);
            
            x_76840 = x_76840;
            x_76841 = defunc_0_f_res_76553;
            
            int64_t defunc_1_op_res_76842 = add64(x_76840, x_76841);
            
            ((int64_t *) mem_75313.mem)[gtid_71586] = defunc_1_op_res_76842;
            x_76840 = defunc_1_op_res_76842;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81659_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81659_end -
                 futhark_mc_scan_stage_3_parloop_81659_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81659_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81659_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81659_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81654(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71585 = tid;
    int num_tasks_76830 = info.nsubtasks;
    struct futhark_mc_task_81653 *futhark_mc_task_81653 =
                                 (struct futhark_mc_task_81653 *) args;
    struct futhark_context *ctx = futhark_mc_task_81653->ctx;
    uint64_t futhark_mc_segscan_task_81654_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81654_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81653->free_n_70233;
    int64_t gtid_71584 = futhark_mc_task_81653->free_gtid_71584;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81653->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75313 = {.desc ="mem_75313", .mem =
                                 futhark_mc_task_81653->free_mem_75313, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_76837_cached_sizze_81655 = 0;
    unsigned char *scan_stage_2_accum_mem_76837 = NULL;
    int64_t iter_76831;
    struct futhark_mc_scan_stage_1_parloop_struct_81656
    futhark_mc_scan_stage_1_parloop_struct_81656;
    
    futhark_mc_scan_stage_1_parloop_struct_81656.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81656.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81656.free_gtid_71584 = gtid_71584;
    futhark_mc_scan_stage_1_parloop_struct_81656.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81656.free_mem_75313 = mem_75313.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81657_task;
    
    futhark_mc_scan_stage_1_parloop_81657_task.name =
        "futhark_mc_scan_stage_1_parloop_81657";
    futhark_mc_scan_stage_1_parloop_81657_task.fn =
        futhark_mc_scan_stage_1_parloop_81657;
    futhark_mc_scan_stage_1_parloop_81657_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81656;
    futhark_mc_scan_stage_1_parloop_81657_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81657_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81657_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81657_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81657_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81657_task);
    
    if (futhark_mc_scan_stage_1_parloop_81657_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81657_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81657_total_end -
                 futhark_mc_scan_stage_1_parloop_81657_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81657_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81657_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81657_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_76830)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_76832;
        int64_t x_76833;
        int64_t offset_76835 = (int64_t) 0;
        int64_t offset_index_76836 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_76837_cached_sizze_81655 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_76837 = realloc(scan_stage_2_accum_mem_76837,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_76837_cached_sizze_81655 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_76837)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_76839 = 0; i_76839 < num_tasks_76830 - 1; i_76839++) {
            offset_76835 = squot64(n_70233, sext_i32_i64(num_tasks_76830));
            if (slt64(sext_i32_i64(i_76839), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_76830)))) {
                offset_76835 += (int64_t) 1;
            }
            offset_index_76836 += offset_76835;
            
            int64_t gtid_71586 = offset_index_76836;
            float x_76550 = ((float *) Y_mem_75306.mem)[gtid_71584 * n_70233 +
                                                        gtid_71586];
            bool isnan_res_76551;
            
            isnan_res_76551 = futrts_isnan32(x_76550);
            
            bool defunc_0_p_res_76552 = !isnan_res_76551;
            int64_t defunc_0_f_res_76553 = btoi_bool_i64(defunc_0_p_res_76552);
            
            // Read carry in
            {
                x_76832 =
                    ((int64_t *) scan_stage_2_accum_mem_76837)[(int64_t) 0];
            }
            // Read next values
            {
                x_76833 = ((int64_t *) mem_75313.mem)[offset_index_76836 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_76834 = add64(x_76832, x_76833);
            
            ((int64_t *) mem_75313.mem)[offset_index_76836 - (int64_t) 1] =
                defunc_1_op_res_76834;
            ((int64_t *) scan_stage_2_accum_mem_76837)[(int64_t) 0] =
                defunc_1_op_res_76834;
        }
        
        int64_t iter_76843 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81658
        futhark_mc_scan_stage_3_parloop_struct_81658;
        
        futhark_mc_scan_stage_3_parloop_struct_81658.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81658.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81658.free_gtid_71584 =
            gtid_71584;
        futhark_mc_scan_stage_3_parloop_struct_81658.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81658.free_mem_75313 =
            mem_75313.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81659_task;
        
        futhark_mc_scan_stage_3_parloop_81659_task.name =
            "futhark_mc_scan_stage_3_parloop_81659";
        futhark_mc_scan_stage_3_parloop_81659_task.fn =
            futhark_mc_scan_stage_3_parloop_81659;
        futhark_mc_scan_stage_3_parloop_81659_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81658;
        futhark_mc_scan_stage_3_parloop_81659_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81659_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81659_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81659_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81659_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81659_task);
        
        if (futhark_mc_scan_stage_3_parloop_81659_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81659_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81659_total_end -
                     futhark_mc_scan_stage_3_parloop_81659_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81659_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81659_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81659_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_76837);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81654_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81654_end -
                 futhark_mc_segscan_task_81654_start;
        
        ctx->futhark_mc_segscan_task_81654_runs[tid]++;
        ctx->futhark_mc_segscan_task_81654_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81654_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81660 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_71584;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75313;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
};
struct futhark_mc_segmap_parloop_struct_81662 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_71584;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75313;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
};
static int futhark_mc_segmap_parloop_81663(void *args, int64_t start,
                                           int64_t end, int flat_tid_71587,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81662
    *futhark_mc_segmap_parloop_struct_81662 =
    (struct futhark_mc_segmap_parloop_struct_81662 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81662->ctx;
    uint64_t futhark_mc_segmap_parloop_81663_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81663_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81662->free_n_70233;
    int64_t gtid_71584 =
            futhark_mc_segmap_parloop_struct_81662->free_gtid_71584;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81662->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75313 = {.desc ="mem_75313", .mem =
                                 futhark_mc_segmap_parloop_struct_81662->free_mem_75313,
                                 .size =0, .references =NULL};
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_segmap_parloop_struct_81662->free_mem_75316,
                                 .size =0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segmap_parloop_struct_81662->free_mem_75319,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76847 = start;
    
    for (; iter_76847 < end; iter_76847++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76850 = n_70233;
        int64_t gtid_71588 = iter_76847;
        int64_t remnant_76851 = iter_76847 - gtid_71588;
        float x_76554 = ((float *) Y_mem_75306.mem)[gtid_71584 * n_70233 +
                                                    gtid_71588];
        bool isnan_res_76555;
        
        isnan_res_76555 = futrts_isnan32(x_76554);
        
        bool defunc_0_p_res_76556 = !isnan_res_76555;
        int64_t defunc_1_f_res_76557;
        
        if (defunc_0_p_res_76556) {
            int64_t x_76848 = ((int64_t *) mem_75313.mem)[gtid_71588];
            int64_t defunc_1_f_res_t_res_76849 = sub64(x_76848, (int64_t) 1);
            
            defunc_1_f_res_76557 = defunc_1_f_res_t_res_76849;
        } else {
            defunc_1_f_res_76557 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_76557) &&
            slt64(defunc_1_f_res_76557, n_70233)) {
            ((int64_t *) mem_75319.mem)[defunc_1_f_res_76557] = gtid_71588;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_76557) &&
            slt64(defunc_1_f_res_76557, n_70233)) {
            ((float *) mem_75316.mem)[defunc_1_f_res_76557] = x_76554;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81663_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81663_end -
                 futhark_mc_segmap_parloop_81663_start;
        
        ctx->futhark_mc_segmap_parloop_81663_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81663_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81663_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81661(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71587 = tid;
    int num_tasks_76846 = info.nsubtasks;
    struct futhark_mc_task_81660 *futhark_mc_task_81660 =
                                 (struct futhark_mc_task_81660 *) args;
    struct futhark_context *ctx = futhark_mc_task_81660->ctx;
    uint64_t futhark_mc_segmap_task_81661_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81661_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81660->free_n_70233;
    int64_t gtid_71584 = futhark_mc_task_81660->free_gtid_71584;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81660->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75313 = {.desc ="mem_75313", .mem =
                                 futhark_mc_task_81660->free_mem_75313, .size =
                                 0, .references =NULL};
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_task_81660->free_mem_75316, .size =
                                 0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81660->free_mem_75319, .size =
                                 0, .references =NULL};
    int64_t iter_76847;
    struct futhark_mc_segmap_parloop_struct_81662
    futhark_mc_segmap_parloop_struct_81662;
    
    futhark_mc_segmap_parloop_struct_81662.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81662.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81662.free_gtid_71584 = gtid_71584;
    futhark_mc_segmap_parloop_struct_81662.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81662.free_mem_75313 = mem_75313.mem;
    futhark_mc_segmap_parloop_struct_81662.free_mem_75316 = mem_75316.mem;
    futhark_mc_segmap_parloop_struct_81662.free_mem_75319 = mem_75319.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81663_task;
    
    futhark_mc_segmap_parloop_81663_task.name =
        "futhark_mc_segmap_parloop_81663";
    futhark_mc_segmap_parloop_81663_task.fn = futhark_mc_segmap_parloop_81663;
    futhark_mc_segmap_parloop_81663_task.args =
        &futhark_mc_segmap_parloop_struct_81662;
    futhark_mc_segmap_parloop_81663_task.iterations = iterations;
    futhark_mc_segmap_parloop_81663_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81663_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81663_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81663_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81663_task);
    
    if (futhark_mc_segmap_parloop_81663_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81663_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81663_total_end -
                 futhark_mc_segmap_parloop_81663_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81663_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81663_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81663_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81661_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81661_end -
                 futhark_mc_segmap_task_81661_start;
        
        ctx->futhark_mc_segmap_task_81661_runs[tid]++;
        ctx->futhark_mc_segmap_task_81661_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81661_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81664 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75322;
};
struct futhark_mc_segmap_parloop_struct_81666 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75322;
};
static int futhark_mc_segmap_parloop_81667(void *args, int64_t start,
                                           int64_t end, int flat_tid_71589,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81666
    *futhark_mc_segmap_parloop_struct_81666 =
    (struct futhark_mc_segmap_parloop_struct_81666 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81666->ctx;
    uint64_t futhark_mc_segmap_parloop_81667_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81667_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81666->free_n_70233;
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segmap_parloop_struct_81666->free_mem_75319,
                                 .size =0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_segmap_parloop_struct_81666->free_mem_75322,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76853 = start;
    
    for (; iter_76853 < end; iter_76853++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76854 = n_70233;
        int64_t gtid_71590 = iter_76853;
        int64_t remnant_76855 = iter_76853 - gtid_71590;
        int64_t x_76560 = ((int64_t *) mem_75319.mem)[gtid_71590];
        int64_t defunc_0_f_res_76561 = add64((int64_t) 1, x_76560);
        
        ((int64_t *) mem_75322.mem)[gtid_71590] = defunc_0_f_res_76561;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81667_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81667_end -
                 futhark_mc_segmap_parloop_81667_start;
        
        ctx->futhark_mc_segmap_parloop_81667_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81667_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81667_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81665(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71589 = tid;
    int num_tasks_76852 = info.nsubtasks;
    struct futhark_mc_task_81664 *futhark_mc_task_81664 =
                                 (struct futhark_mc_task_81664 *) args;
    struct futhark_context *ctx = futhark_mc_task_81664->ctx;
    uint64_t futhark_mc_segmap_task_81665_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81665_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81664->free_n_70233;
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81664->free_mem_75319, .size =
                                 0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_task_81664->free_mem_75322, .size =
                                 0, .references =NULL};
    int64_t iter_76853;
    struct futhark_mc_segmap_parloop_struct_81666
    futhark_mc_segmap_parloop_struct_81666;
    
    futhark_mc_segmap_parloop_struct_81666.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81666.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81666.free_mem_75319 = mem_75319.mem;
    futhark_mc_segmap_parloop_struct_81666.free_mem_75322 = mem_75322.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81667_task;
    
    futhark_mc_segmap_parloop_81667_task.name =
        "futhark_mc_segmap_parloop_81667";
    futhark_mc_segmap_parloop_81667_task.fn = futhark_mc_segmap_parloop_81667;
    futhark_mc_segmap_parloop_81667_task.args =
        &futhark_mc_segmap_parloop_struct_81666;
    futhark_mc_segmap_parloop_81667_task.iterations = iterations;
    futhark_mc_segmap_parloop_81667_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81667_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81667_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81667_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81667_task);
    
    if (futhark_mc_segmap_parloop_81667_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81667_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81667_total_end -
                 futhark_mc_segmap_parloop_81667_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81667_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81667_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81667_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81665_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81665_end -
                 futhark_mc_segmap_task_81665_start;
        
        ctx->futhark_mc_segmap_task_81665_runs[tid]++;
        ctx->futhark_mc_segmap_task_81665_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81665_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81668 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75325;
};
struct futhark_mc_segmap_parloop_struct_81670 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75325;
};
static int futhark_mc_segmap_parloop_81671(void *args, int64_t start,
                                           int64_t end, int flat_tid_71591,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81670
    *futhark_mc_segmap_parloop_struct_81670 =
    (struct futhark_mc_segmap_parloop_struct_81670 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81670->ctx;
    uint64_t futhark_mc_segmap_parloop_81671_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81671_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81670->free_q_70235;
    int64_t last_res_71745 =
            futhark_mc_segmap_parloop_struct_81670->free_last_res_71745;
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_segmap_parloop_struct_81670->free_mem_75325,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76857 = start;
    
    for (; iter_76857 < end; iter_76857++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76858 = q_70235;
        int64_t gtid_71592 = iter_76857;
        int64_t remnant_76859 = iter_76857 - gtid_71592;
        bool cond_76562 = sle64(last_res_71745, gtid_71592);
        float defunc_0_f_res_76563;
        
        if (cond_76562) {
            defunc_0_f_res_76563 = 0.0F;
        } else {
            defunc_0_f_res_76563 = 1.0F;
        }
        ((float *) mem_75325.mem)[gtid_71592] = defunc_0_f_res_76563;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81671_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81671_end -
                 futhark_mc_segmap_parloop_81671_start;
        
        ctx->futhark_mc_segmap_parloop_81671_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81671_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81671_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81669(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71591 = tid;
    int num_tasks_76856 = info.nsubtasks;
    struct futhark_mc_task_81668 *futhark_mc_task_81668 =
                                 (struct futhark_mc_task_81668 *) args;
    struct futhark_context *ctx = futhark_mc_task_81668->ctx;
    uint64_t futhark_mc_segmap_task_81669_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81669_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81668->free_q_70235;
    int64_t last_res_71745 = futhark_mc_task_81668->free_last_res_71745;
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_task_81668->free_mem_75325, .size =
                                 0, .references =NULL};
    int64_t iter_76857;
    struct futhark_mc_segmap_parloop_struct_81670
    futhark_mc_segmap_parloop_struct_81670;
    
    futhark_mc_segmap_parloop_struct_81670.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81670.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81670.free_last_res_71745 = last_res_71745;
    futhark_mc_segmap_parloop_struct_81670.free_mem_75325 = mem_75325.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81671_task;
    
    futhark_mc_segmap_parloop_81671_task.name =
        "futhark_mc_segmap_parloop_81671";
    futhark_mc_segmap_parloop_81671_task.fn = futhark_mc_segmap_parloop_81671;
    futhark_mc_segmap_parloop_81671_task.args =
        &futhark_mc_segmap_parloop_struct_81670;
    futhark_mc_segmap_parloop_81671_task.iterations = iterations;
    futhark_mc_segmap_parloop_81671_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81671_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81671_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81671_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81671_task);
    
    if (futhark_mc_segmap_parloop_81671_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81671_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81671_total_end -
                 futhark_mc_segmap_parloop_81671_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81671_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81671_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81671_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81669_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81669_end -
                 futhark_mc_segmap_task_81669_start;
        
        ctx->futhark_mc_segmap_task_81669_runs[tid]++;
        ctx->futhark_mc_segmap_task_81669_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81669_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81672 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_71745;
    int64_t free_min_arg_71760;
    int64_t free_min_arg_71761;
    int64_t free_min_res_71762;
    float free_max_res_71766;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75322;
    unsigned char *free_mem_75325;
    unsigned char *free_mem_75328;
};
struct futhark_mc_segmap_parloop_struct_81674 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_71745;
    int64_t free_min_arg_71760;
    int64_t free_min_arg_71761;
    int64_t free_min_res_71762;
    float free_max_res_71766;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75322;
    unsigned char *free_mem_75325;
    unsigned char *free_mem_75328;
};
static int futhark_mc_segmap_parloop_81675(void *args, int64_t start,
                                           int64_t end, int flat_tid_71593,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81674
    *futhark_mc_segmap_parloop_struct_81674 =
    (struct futhark_mc_segmap_parloop_struct_81674 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81674->ctx;
    uint64_t futhark_mc_segmap_parloop_81675_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81675_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81674->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81674->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81674->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81674->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81674->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81674->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81674->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81674->free_loop_cond_70258;
    int64_t last_res_71745 =
            futhark_mc_segmap_parloop_struct_81674->free_last_res_71745;
    int64_t min_arg_71760 =
            futhark_mc_segmap_parloop_struct_81674->free_min_arg_71760;
    int64_t min_arg_71761 =
            futhark_mc_segmap_parloop_struct_81674->free_min_arg_71761;
    int64_t min_res_71762 =
            futhark_mc_segmap_parloop_struct_81674->free_min_res_71762;
    float max_res_71766 =
          futhark_mc_segmap_parloop_struct_81674->free_max_res_71766;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_segmap_parloop_struct_81674->free_mem_75316,
                                 .size =0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segmap_parloop_struct_81674->free_mem_75319,
                                 .size =0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_segmap_parloop_struct_81674->free_mem_75322,
                                 .size =0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_segmap_parloop_struct_81674->free_mem_75325,
                                 .size =0, .references =NULL};
    struct memblock mem_75328 = {.desc ="mem_75328", .mem =
                                 futhark_mc_segmap_parloop_struct_81674->free_mem_75328,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76861 = start;
    
    for (; iter_76861 < end; iter_76861++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76960 = n_m_70241;
        int64_t gtid_71594 = iter_76861;
        int64_t remnant_76961 = iter_76861 - gtid_71594;
        int64_t min_arg_76696 = mul64(jump_70237, gtid_71594);
        int64_t min_res_76697 = smin64(i_70247, min_arg_76696);
        int64_t defunc_0_g_res_76698 = add64((int64_t) 1, min_res_76697);
        bool init_idx_76699;
        int64_t init_idx_76700;
        int64_t init_idx_76701;
        bool loop_while_76862;
        int64_t low_76863;
        int64_t high_76864;
        
        loop_while_76862 = x_70248;
        low_76863 = (int64_t) 0;
        high_76864 = i_70247;
        while (loop_while_76862) {
            int64_t x_76865 = add64(low_76863, high_76864);
            int64_t mid_76866 = sdiv64(x_76865, (int64_t) 2);
            bool x_76867 = sle64((int64_t) 0, mid_76866);
            bool y_76868 = slt64(mid_76866, n_70233);
            bool bounds_check_76869 = x_76867 && y_76868;
            bool index_certs_76870;
            
            if (!bounds_check_76869) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76866,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_76871 = ((int64_t *) mem_75322.mem)[mid_76866];
            bool cond_76872 = slt64(mid_id_76871, (int64_t) 0);
            int64_t mid_idx_76873;
            
            if (cond_76872) {
                mid_idx_76873 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_76873 = mid_id_76871;
            }
            
            bool cond_76874 = sle64(defunc_0_g_res_76698, mid_idx_76873);
            int64_t loopres_76875;
            int64_t loopres_76876;
            
            if (cond_76874) {
                int64_t loopres_t_res_76877 = sub64(mid_76866, (int64_t) 1);
                
                loopres_76875 = low_76863;
                loopres_76876 = loopres_t_res_76877;
            } else {
                int64_t loopres_f_res_76878 = add64((int64_t) 1, mid_76866);
                
                loopres_76875 = loopres_f_res_76878;
                loopres_76876 = high_76864;
            }
            
            bool loop_cond_76879 = sle64(loopres_76875, loopres_76876);
            bool loop_while_tmp_76962 = loop_cond_76879;
            int64_t low_tmp_76963 = loopres_76875;
            int64_t high_tmp_76964 = loopres_76876;
            
            loop_while_76862 = loop_while_tmp_76962;
            low_76863 = low_tmp_76963;
            high_76864 = high_tmp_76964;
        }
        init_idx_76699 = loop_while_76862;
        init_idx_76700 = low_76863;
        init_idx_76701 = high_76864;
        
        bool idx_76720;
        int64_t idx_76721;
        int64_t idx_76722;
        int64_t idx_76723;
        bool loop_while_76880;
        int64_t l_idx_76881;
        int64_t r_idx_76882;
        int64_t span_76883;
        
        loop_while_76880 = loop_cond_70258;
        l_idx_76881 = init_idx_76700;
        r_idx_76882 = init_idx_76700;
        span_76883 = (int64_t) 1;
        while (loop_while_76880) {
            int64_t max_arg_76884 = sub64(l_idx_76881, (int64_t) 1);
            int64_t max_res_76885 = smax64((int64_t) 0, max_arg_76884);
            int64_t min_arg_76886 = add64((int64_t) 1, r_idx_76882);
            int64_t min_res_76887 = smin64(min_arg_71760, min_arg_76886);
            bool x_76888 = sle64((int64_t) 0, max_res_76885);
            bool y_76889 = slt64(max_res_76885, n_70233);
            bool bounds_check_76890 = x_76888 && y_76889;
            bool index_certs_76891;
            
            if (!bounds_check_76890) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_76885,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_76892 = ((int64_t *) mem_75322.mem)[max_res_76885];
            int64_t abs_arg_76893 = sub64(x_76892, defunc_0_g_res_76698);
            int64_t abs_res_76894 = abs64(abs_arg_76893);
            bool x_76895 = sle64((int64_t) 0, min_res_76887);
            bool y_76896 = slt64(min_res_76887, n_70233);
            bool bounds_check_76897 = x_76895 && y_76896;
            bool index_certs_76898;
            
            if (!bounds_check_76897) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_76887,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_76899 = ((int64_t *) mem_75322.mem)[min_res_76887];
            int64_t abs_arg_76900 = sub64(x_76899, defunc_0_g_res_76698);
            int64_t abs_res_76901 = abs64(abs_arg_76900);
            bool cond_76902 = max_res_76885 == l_idx_76881;
            int64_t loopres_76903;
            int64_t loopres_76904;
            int64_t loopres_76905;
            
            if (cond_76902) {
                loopres_76903 = l_idx_76881;
                loopres_76904 = r_idx_76882;
                loopres_76905 = min_res_70253;
            } else {
                bool cond_76906 = slt64(abs_res_76894, abs_res_76901);
                bool cond_f_res_76907 = min_res_76887 == r_idx_76882;
                bool x_76908 = !cond_76906;
                bool y_76909 = cond_f_res_76907 && x_76908;
                bool cond_76910 = cond_76906 || y_76909;
                int64_t loopres_f_res_76911;
                
                if (cond_76910) {
                    loopres_f_res_76911 = max_res_76885;
                } else {
                    loopres_f_res_76911 = l_idx_76881;
                }
                
                int64_t loopres_f_res_76912;
                
                if (cond_76910) {
                    loopres_f_res_76912 = r_idx_76882;
                } else {
                    loopres_f_res_76912 = min_res_76887;
                }
                
                int64_t loopres_f_res_76913;
                
                if (cond_76910) {
                    int64_t loopres_f_res_t_res_76914 = add64((int64_t) 1,
                                                              span_76883);
                    
                    loopres_f_res_76913 = loopres_f_res_t_res_76914;
                } else {
                    int64_t loopres_f_res_f_res_76915 = add64((int64_t) 1,
                                                              span_76883);
                    
                    loopres_f_res_76913 = loopres_f_res_f_res_76915;
                }
                loopres_76903 = loopres_f_res_76911;
                loopres_76904 = loopres_f_res_76912;
                loopres_76905 = loopres_f_res_76913;
            }
            
            bool loop_cond_76916 = slt64(loopres_76905, min_res_70253);
            bool loop_while_tmp_76965 = loop_cond_76916;
            int64_t l_idx_tmp_76966 = loopres_76903;
            int64_t r_idx_tmp_76967 = loopres_76904;
            int64_t span_tmp_76968 = loopres_76905;
            
            loop_while_76880 = loop_while_tmp_76965;
            l_idx_76881 = l_idx_tmp_76966;
            r_idx_76882 = r_idx_tmp_76967;
            span_76883 = span_tmp_76968;
        }
        idx_76720 = loop_while_76880;
        idx_76721 = l_idx_76881;
        idx_76722 = r_idx_76882;
        idx_76723 = span_76883;
        
        int64_t min_res_76761 = smin64(min_arg_71761, idx_76721);
        int64_t max_res_76762 = smax64((int64_t) 0, min_res_76761);
        int64_t x_76763 = add64(min_res_71762, max_res_76762);
        int64_t r_76764 = sub64(x_76763, (int64_t) 1);
        bool x_76765 = sle64((int64_t) 0, r_76764);
        bool y_76766 = slt64(r_76764, n_70233);
        bool bounds_check_76767 = x_76765 && y_76766;
        bool index_certs_76768;
        
        if (!bounds_check_76767) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_76764,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_76769 = ((int64_t *) mem_75319.mem)[r_76764];
        int64_t abs_arg_76770 = sub64(x_76769, min_res_76697);
        int64_t abs_res_76771 = abs64(abs_arg_76770);
        bool x_76772 = sle64((int64_t) 0, max_res_76762);
        bool y_76773 = slt64(max_res_76762, n_70233);
        bool bounds_check_76774 = x_76772 && y_76773;
        bool index_certs_76775;
        
        if (!bounds_check_76774) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_76762,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_76776 = ((int64_t *) mem_75319.mem)[max_res_76762];
        int64_t abs_arg_76777 = sub64(x_76776, min_res_76697);
        int64_t abs_res_76778 = abs64(abs_arg_76777);
        int64_t max_res_76779 = smax64(abs_res_76771, abs_res_76778);
        float defunc_0_f_res_76780 = sitofp_i64_f32(max_res_76779);
        float defunc_1_f_res_76781 = max_res_71766 + defunc_0_f_res_76780;
        float defunc_2_reduce_res_76782;
        float redout_76918 = 0.0F;
        
        for (int64_t i_76917 = 0; i_76917 < q_70235; i_76917++) {
            float x_76919 = ((float *) mem_75325.mem)[i_76917];
            bool cond_76920 = sle64(last_res_71745, i_76917);
            int64_t defunc_0_f_res_76921;
            
            if (cond_76920) {
                defunc_0_f_res_76921 = (int64_t) 0;
            } else {
                int64_t i_76922 = add64(max_res_76762, i_76917);
                int64_t defunc_0_add_arg_76923 =
                        ((int64_t *) mem_75319.mem)[i_76922];
                int64_t defunc_1_add_res_76924 = add64((int64_t) 1,
                                                       defunc_0_add_arg_76923);
                
                defunc_0_f_res_76921 = defunc_1_add_res_76924;
            }
            
            int64_t binop_p_76925 = sub64(defunc_0_f_res_76921, min_res_76697);
            float defunc_0_f_res_76926 = sitofp_i64_f32(binop_p_76925);
            float abs_res_76927 = (float) fabs(defunc_0_f_res_76926);
            float tmp1_76928 = abs_res_76927 / defunc_1_f_res_76781;
            float x_76929 = tmp1_76928 * tmp1_76928;
            float y_76930 = tmp1_76928 * x_76929;
            float tmp2_76931 = 1.0F - y_76930;
            float x_76932 = tmp2_76931 * tmp2_76931;
            float tmp3_76933 = tmp2_76931 * x_76932;
            float w_j_76934 = x_76919 * tmp3_76933;
            float defunc_1_op_res_76935 = w_j_76934 + redout_76918;
            float redout_tmp_76969 = defunc_1_op_res_76935;
            
            redout_76918 = redout_tmp_76969;
        }
        defunc_2_reduce_res_76782 = redout_76918;
        
        float a0_76802 = 1.0F / defunc_2_reduce_res_76782;
        float defunc_2_reduce_res_76803;
        float redout_76937 = 0.0F;
        
        for (int64_t i_76936 = 0; i_76936 < q_70235; i_76936++) {
            float x_76938 = ((float *) mem_75325.mem)[i_76936];
            bool cond_76939 = sle64(last_res_71745, i_76936);
            int64_t defunc_0_f_res_76940;
            
            if (cond_76939) {
                defunc_0_f_res_76940 = (int64_t) 0;
            } else {
                int64_t i_76941 = add64(max_res_76762, i_76936);
                int64_t defunc_0_add_arg_76942 =
                        ((int64_t *) mem_75319.mem)[i_76941];
                int64_t defunc_1_add_res_76943 = add64((int64_t) 1,
                                                       defunc_0_add_arg_76942);
                
                defunc_0_f_res_76940 = defunc_1_add_res_76943;
            }
            
            int64_t binop_p_76944 = sub64(defunc_0_f_res_76940, min_res_76697);
            float defunc_0_f_res_76945 = sitofp_i64_f32(binop_p_76944);
            float abs_res_76946 = (float) fabs(defunc_0_f_res_76945);
            float tmp1_76947 = abs_res_76946 / defunc_1_f_res_76781;
            float x_76948 = tmp1_76947 * tmp1_76947;
            float y_76949 = tmp1_76947 * x_76948;
            float tmp2_76950 = 1.0F - y_76949;
            float x_76951 = tmp2_76950 * tmp2_76950;
            float tmp3_76952 = tmp2_76950 * x_76951;
            float tmp4_76953 = x_76938 * tmp3_76952;
            float defunc_0_f_res_76954;
            
            if (cond_76939) {
                defunc_0_f_res_76954 = 0.0F;
            } else {
                int64_t i_76955 = add64(max_res_76762, i_76936);
                float defunc_0_add_arg_76956 =
                      ((float *) mem_75316.mem)[i_76955];
                
                defunc_0_f_res_76954 = defunc_0_add_arg_76956;
            }
            
            float x_76957 = a0_76802 * tmp4_76953;
            float defunc_9_fit_fun_res_76958 = defunc_0_f_res_76954 * x_76957;
            float defunc_1_op_res_76959 = defunc_9_fit_fun_res_76958 +
                  redout_76937;
            float redout_tmp_76970 = defunc_1_op_res_76959;
            
            redout_76937 = redout_tmp_76970;
        }
        defunc_2_reduce_res_76803 = redout_76937;
        ((float *) mem_75328.mem)[gtid_71594] = defunc_2_reduce_res_76803;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81675_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81675_end -
                 futhark_mc_segmap_parloop_81675_start;
        
        ctx->futhark_mc_segmap_parloop_81675_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81675_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81675_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81673(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71593 = tid;
    int num_tasks_76860 = info.nsubtasks;
    struct futhark_mc_task_81672 *futhark_mc_task_81672 =
                                 (struct futhark_mc_task_81672 *) args;
    struct futhark_context *ctx = futhark_mc_task_81672->ctx;
    uint64_t futhark_mc_segmap_task_81673_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81673_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81672->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81672->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81672->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81672->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81672->free_i_70247;
    bool x_70248 = futhark_mc_task_81672->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81672->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81672->free_loop_cond_70258;
    int64_t last_res_71745 = futhark_mc_task_81672->free_last_res_71745;
    int64_t min_arg_71760 = futhark_mc_task_81672->free_min_arg_71760;
    int64_t min_arg_71761 = futhark_mc_task_81672->free_min_arg_71761;
    int64_t min_res_71762 = futhark_mc_task_81672->free_min_res_71762;
    float max_res_71766 = futhark_mc_task_81672->free_max_res_71766;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_task_81672->free_mem_75316, .size =
                                 0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81672->free_mem_75319, .size =
                                 0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_task_81672->free_mem_75322, .size =
                                 0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_task_81672->free_mem_75325, .size =
                                 0, .references =NULL};
    struct memblock mem_75328 = {.desc ="mem_75328", .mem =
                                 futhark_mc_task_81672->free_mem_75328, .size =
                                 0, .references =NULL};
    int64_t iter_76861;
    struct futhark_mc_segmap_parloop_struct_81674
    futhark_mc_segmap_parloop_struct_81674;
    
    futhark_mc_segmap_parloop_struct_81674.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81674.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81674.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81674.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81674.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81674.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81674.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81674.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81674.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81674.free_last_res_71745 = last_res_71745;
    futhark_mc_segmap_parloop_struct_81674.free_min_arg_71760 = min_arg_71760;
    futhark_mc_segmap_parloop_struct_81674.free_min_arg_71761 = min_arg_71761;
    futhark_mc_segmap_parloop_struct_81674.free_min_res_71762 = min_res_71762;
    futhark_mc_segmap_parloop_struct_81674.free_max_res_71766 = max_res_71766;
    futhark_mc_segmap_parloop_struct_81674.free_mem_75316 = mem_75316.mem;
    futhark_mc_segmap_parloop_struct_81674.free_mem_75319 = mem_75319.mem;
    futhark_mc_segmap_parloop_struct_81674.free_mem_75322 = mem_75322.mem;
    futhark_mc_segmap_parloop_struct_81674.free_mem_75325 = mem_75325.mem;
    futhark_mc_segmap_parloop_struct_81674.free_mem_75328 = mem_75328.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81675_task;
    
    futhark_mc_segmap_parloop_81675_task.name =
        "futhark_mc_segmap_parloop_81675";
    futhark_mc_segmap_parloop_81675_task.fn = futhark_mc_segmap_parloop_81675;
    futhark_mc_segmap_parloop_81675_task.args =
        &futhark_mc_segmap_parloop_struct_81674;
    futhark_mc_segmap_parloop_81675_task.iterations = iterations;
    futhark_mc_segmap_parloop_81675_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81675_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81675_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81675_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81675_task);
    
    if (futhark_mc_segmap_parloop_81675_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81675_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81675_total_end -
                 futhark_mc_segmap_parloop_81675_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81675_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81675_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81675_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81673_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81673_end -
                 futhark_mc_segmap_task_81673_start;
        
        ctx->futhark_mc_segmap_task_81673_runs[tid]++;
        ctx->futhark_mc_segmap_task_81673_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81673_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81677 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_71745;
    int64_t free_min_arg_71760;
    int64_t free_min_arg_71761;
    int64_t free_min_res_71762;
    float free_max_res_71766;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75322;
    unsigned char *free_mem_75325;
    unsigned char *free_mem_75328;
};
struct futhark_mc_task_81679 {
    struct futhark_context *ctx;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75325;
    int64_t free_min_res_76565;
    int64_t free_max_res_76630;
    float free_defunc_1_f_res_76649;
    float *retval_defunc_2_reduce_res_76650;
};
struct futhark_mc_segred_stage_1_parloop_struct_81682 {
    struct futhark_context *ctx;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75325;
    int64_t free_min_res_76565;
    int64_t free_max_res_76630;
    float free_defunc_1_f_res_76649;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77080;
};
static int futhark_mc_segred_stage_1_parloop_81683(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_71597, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81682
    *futhark_mc_segred_stage_1_parloop_struct_81682 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81682 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81682->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81683_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81683_start = get_wall_time();
    
    int64_t last_res_71745 =
            futhark_mc_segred_stage_1_parloop_struct_81682->free_last_res_71745;
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81682->free_mem_75319,
                                 .size =0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81682->free_mem_75325,
                                 .size =0, .references =NULL};
    int64_t min_res_76565 =
            futhark_mc_segred_stage_1_parloop_struct_81682->free_min_res_76565;
    int64_t max_res_76630 =
            futhark_mc_segred_stage_1_parloop_struct_81682->free_max_res_76630;
    float defunc_1_f_res_76649 =
          futhark_mc_segred_stage_1_parloop_struct_81682->free_defunc_1_f_res_76649;
    struct memblock reduce_stage_1_tid_res_arr_mem_77080 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77080",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81682->free_reduce_stage_1_tid_res_arr_mem_77080,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77082 = start;
    float x_77027;
    float x_77028;
    float local_acc_77083 = 0.0F;
    
    for (; iter_77082 < end; iter_77082++) {
        int64_t gtid_71598 = iter_77082;
        float x_77030 = ((float *) mem_75325.mem)[gtid_71598];
        bool cond_77031 = sle64(last_res_71745, gtid_71598);
        int64_t defunc_0_f_res_77032;
        
        if (cond_77031) {
            defunc_0_f_res_77032 = (int64_t) 0;
        } else {
            int64_t i_77033 = add64(gtid_71598, max_res_76630);
            int64_t defunc_0_add_arg_77034 =
                    ((int64_t *) mem_75319.mem)[i_77033];
            int64_t defunc_1_add_res_77035 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77034);
            
            defunc_0_f_res_77032 = defunc_1_add_res_77035;
        }
        
        int64_t binop_p_77036 = sub64(defunc_0_f_res_77032, min_res_76565);
        float defunc_0_f_res_77037 = sitofp_i64_f32(binop_p_77036);
        float abs_res_77038 = (float) fabs(defunc_0_f_res_77037);
        float tmp1_77039 = abs_res_77038 / defunc_1_f_res_76649;
        float x_77040 = tmp1_77039 * tmp1_77039;
        float y_77041 = tmp1_77039 * x_77040;
        float tmp2_77042 = 1.0F - y_77041;
        float x_77043 = tmp2_77042 * tmp2_77042;
        float tmp3_77044 = tmp2_77042 * x_77043;
        float w_j_77045 = x_77030 * tmp3_77044;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77027 = local_acc_77083;
        }
        // Load next params
        {
            x_77028 = w_j_77045;
        }
        // Red body
        {
            float defunc_1_op_res_77029 = x_77027 + x_77028;
            
            local_acc_77083 = defunc_1_op_res_77029;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77080.mem)[flat_tid_71597] =
        local_acc_77083;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81683_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81683_end -
                 futhark_mc_segred_stage_1_parloop_81683_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81683_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81683_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81683_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81680(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71597 = tid;
    int num_tasks_77079 = info.nsubtasks;
    struct futhark_mc_task_81679 *futhark_mc_task_81679 =
                                 (struct futhark_mc_task_81679 *) args;
    struct futhark_context *ctx = futhark_mc_task_81679->ctx;
    uint64_t futhark_mc_segred_task_81680_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81680_start = get_wall_time();
    
    int64_t last_res_71745 = futhark_mc_task_81679->free_last_res_71745;
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81679->free_mem_75319, .size =
                                 0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_task_81679->free_mem_75325, .size =
                                 0, .references =NULL};
    int64_t min_res_76565 = futhark_mc_task_81679->free_min_res_76565;
    int64_t max_res_76630 = futhark_mc_task_81679->free_max_res_76630;
    float defunc_1_f_res_76649 =
          futhark_mc_task_81679->free_defunc_1_f_res_76649;
    float defunc_2_reduce_res_76650 =
          *futhark_mc_task_81679->retval_defunc_2_reduce_res_76650;
    size_t reduce_stage_1_tid_res_arr_mem_77080_cached_sizze_81681 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77080 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77080_cached_sizze_81681 <
        (size_t) ((int64_t) 4 * num_tasks_77079)) {
        reduce_stage_1_tid_res_arr_mem_77080 =
            realloc(reduce_stage_1_tid_res_arr_mem_77080, (int64_t) 4 *
                    num_tasks_77079);
        reduce_stage_1_tid_res_arr_mem_77080_cached_sizze_81681 = (int64_t) 4 *
            num_tasks_77079;
    }
    
    int64_t iter_77082;
    struct futhark_mc_segred_stage_1_parloop_struct_81682
    futhark_mc_segred_stage_1_parloop_struct_81682;
    
    futhark_mc_segred_stage_1_parloop_struct_81682.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_last_res_71745 =
        last_res_71745;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_mem_75319 =
        mem_75319.mem;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_mem_75325 =
        mem_75325.mem;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_min_res_76565 =
        min_res_76565;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_max_res_76630 =
        max_res_76630;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_defunc_1_f_res_76649 =
        defunc_1_f_res_76649;
    futhark_mc_segred_stage_1_parloop_struct_81682.free_reduce_stage_1_tid_res_arr_mem_77080 =
        reduce_stage_1_tid_res_arr_mem_77080;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81683_task;
    
    futhark_mc_segred_stage_1_parloop_81683_task.name =
        "futhark_mc_segred_stage_1_parloop_81683";
    futhark_mc_segred_stage_1_parloop_81683_task.fn =
        futhark_mc_segred_stage_1_parloop_81683;
    futhark_mc_segred_stage_1_parloop_81683_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81682;
    futhark_mc_segred_stage_1_parloop_81683_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81683_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81683_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81683_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81683_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81683_task);
    
    if (futhark_mc_segred_stage_1_parloop_81683_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81683_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81683_total_end -
                 futhark_mc_segred_stage_1_parloop_81683_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81683_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81683_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81683_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_76650 = 0.0F;
    }
    
    float x_77084;
    float x_77085;
    
    for (int32_t i_77087 = 0; i_77087 < num_tasks_77079; i_77087++) {
        flat_tid_71597 = i_77087;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77084 = defunc_2_reduce_res_76650;
            }
            // load next params
            {
                x_77085 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77080)[flat_tid_71597];
            }
            // red body
            {
                float defunc_1_op_res_77086 = x_77084 + x_77085;
                
                defunc_2_reduce_res_76650 = defunc_1_op_res_77086;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77080);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81680_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81680_end -
                 futhark_mc_segred_task_81680_start;
        
        ctx->futhark_mc_segred_task_81680_runs[tid]++;
        ctx->futhark_mc_segred_task_81680_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81680_iter[tid] += iterations;
    }
    *futhark_mc_task_81679->retval_defunc_2_reduce_res_76650 =
        defunc_2_reduce_res_76650;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81684 {
    struct futhark_context *ctx;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75325;
    int64_t free_min_res_76565;
    int64_t free_max_res_76630;
    float free_defunc_1_f_res_76649;
    float free_a0_76670;
    float *retval_defunc_2_reduce_res_76671;
};
struct futhark_mc_segred_stage_1_parloop_struct_81687 {
    struct futhark_context *ctx;
    int64_t free_last_res_71745;
    unsigned char *free_mem_75316;
    unsigned char *free_mem_75319;
    unsigned char *free_mem_75325;
    int64_t free_min_res_76565;
    int64_t free_max_res_76630;
    float free_defunc_1_f_res_76649;
    float free_a0_76670;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77089;
};
static int futhark_mc_segred_stage_1_parloop_81688(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_71599, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81687
    *futhark_mc_segred_stage_1_parloop_struct_81687 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81687 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81687->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81688_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81688_start = get_wall_time();
    
    int64_t last_res_71745 =
            futhark_mc_segred_stage_1_parloop_struct_81687->free_last_res_71745;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81687->free_mem_75316,
                                 .size =0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81687->free_mem_75319,
                                 .size =0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81687->free_mem_75325,
                                 .size =0, .references =NULL};
    int64_t min_res_76565 =
            futhark_mc_segred_stage_1_parloop_struct_81687->free_min_res_76565;
    int64_t max_res_76630 =
            futhark_mc_segred_stage_1_parloop_struct_81687->free_max_res_76630;
    float defunc_1_f_res_76649 =
          futhark_mc_segred_stage_1_parloop_struct_81687->free_defunc_1_f_res_76649;
    float a0_76670 =
          futhark_mc_segred_stage_1_parloop_struct_81687->free_a0_76670;
    struct memblock reduce_stage_1_tid_res_arr_mem_77089 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77089",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81687->free_reduce_stage_1_tid_res_arr_mem_77089,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77091 = start;
    float x_77046;
    float x_77047;
    float local_acc_77092 = 0.0F;
    
    for (; iter_77091 < end; iter_77091++) {
        int64_t gtid_71600 = iter_77091;
        float x_77049 = ((float *) mem_75325.mem)[gtid_71600];
        bool cond_77050 = sle64(last_res_71745, gtid_71600);
        int64_t defunc_0_f_res_77051;
        
        if (cond_77050) {
            defunc_0_f_res_77051 = (int64_t) 0;
        } else {
            int64_t i_77052 = add64(gtid_71600, max_res_76630);
            int64_t defunc_0_add_arg_77053 =
                    ((int64_t *) mem_75319.mem)[i_77052];
            int64_t defunc_1_add_res_77054 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77053);
            
            defunc_0_f_res_77051 = defunc_1_add_res_77054;
        }
        
        int64_t binop_p_77055 = sub64(defunc_0_f_res_77051, min_res_76565);
        float defunc_0_f_res_77056 = sitofp_i64_f32(binop_p_77055);
        float abs_res_77057 = (float) fabs(defunc_0_f_res_77056);
        float tmp1_77058 = abs_res_77057 / defunc_1_f_res_76649;
        float x_77059 = tmp1_77058 * tmp1_77058;
        float y_77060 = tmp1_77058 * x_77059;
        float tmp2_77061 = 1.0F - y_77060;
        float x_77062 = tmp2_77061 * tmp2_77061;
        float tmp3_77063 = tmp2_77061 * x_77062;
        float tmp4_77064 = x_77049 * tmp3_77063;
        float defunc_0_f_res_77065;
        
        if (cond_77050) {
            defunc_0_f_res_77065 = 0.0F;
        } else {
            int64_t i_77066 = add64(gtid_71600, max_res_76630);
            float defunc_0_add_arg_77067 = ((float *) mem_75316.mem)[i_77066];
            
            defunc_0_f_res_77065 = defunc_0_add_arg_77067;
        }
        
        float x_77068 = a0_76670 * tmp4_77064;
        float defunc_9_fit_fun_res_77069 = defunc_0_f_res_77065 * x_77068;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77046 = local_acc_77092;
        }
        // Load next params
        {
            x_77047 = defunc_9_fit_fun_res_77069;
        }
        // Red body
        {
            float defunc_1_op_res_77048 = x_77046 + x_77047;
            
            local_acc_77092 = defunc_1_op_res_77048;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77089.mem)[flat_tid_71599] =
        local_acc_77092;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81688_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81688_end -
                 futhark_mc_segred_stage_1_parloop_81688_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81688_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81688_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81688_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81685(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71599 = tid;
    int num_tasks_77088 = info.nsubtasks;
    struct futhark_mc_task_81684 *futhark_mc_task_81684 =
                                 (struct futhark_mc_task_81684 *) args;
    struct futhark_context *ctx = futhark_mc_task_81684->ctx;
    uint64_t futhark_mc_segred_task_81685_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81685_start = get_wall_time();
    
    int64_t last_res_71745 = futhark_mc_task_81684->free_last_res_71745;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_task_81684->free_mem_75316, .size =
                                 0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81684->free_mem_75319, .size =
                                 0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_task_81684->free_mem_75325, .size =
                                 0, .references =NULL};
    int64_t min_res_76565 = futhark_mc_task_81684->free_min_res_76565;
    int64_t max_res_76630 = futhark_mc_task_81684->free_max_res_76630;
    float defunc_1_f_res_76649 =
          futhark_mc_task_81684->free_defunc_1_f_res_76649;
    float a0_76670 = futhark_mc_task_81684->free_a0_76670;
    float defunc_2_reduce_res_76671 =
          *futhark_mc_task_81684->retval_defunc_2_reduce_res_76671;
    size_t reduce_stage_1_tid_res_arr_mem_77089_cached_sizze_81686 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77089 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77089_cached_sizze_81686 <
        (size_t) ((int64_t) 4 * num_tasks_77088)) {
        reduce_stage_1_tid_res_arr_mem_77089 =
            realloc(reduce_stage_1_tid_res_arr_mem_77089, (int64_t) 4 *
                    num_tasks_77088);
        reduce_stage_1_tid_res_arr_mem_77089_cached_sizze_81686 = (int64_t) 4 *
            num_tasks_77088;
    }
    
    int64_t iter_77091;
    struct futhark_mc_segred_stage_1_parloop_struct_81687
    futhark_mc_segred_stage_1_parloop_struct_81687;
    
    futhark_mc_segred_stage_1_parloop_struct_81687.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_last_res_71745 =
        last_res_71745;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_mem_75316 =
        mem_75316.mem;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_mem_75319 =
        mem_75319.mem;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_mem_75325 =
        mem_75325.mem;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_min_res_76565 =
        min_res_76565;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_max_res_76630 =
        max_res_76630;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_defunc_1_f_res_76649 =
        defunc_1_f_res_76649;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_a0_76670 = a0_76670;
    futhark_mc_segred_stage_1_parloop_struct_81687.free_reduce_stage_1_tid_res_arr_mem_77089 =
        reduce_stage_1_tid_res_arr_mem_77089;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81688_task;
    
    futhark_mc_segred_stage_1_parloop_81688_task.name =
        "futhark_mc_segred_stage_1_parloop_81688";
    futhark_mc_segred_stage_1_parloop_81688_task.fn =
        futhark_mc_segred_stage_1_parloop_81688;
    futhark_mc_segred_stage_1_parloop_81688_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81687;
    futhark_mc_segred_stage_1_parloop_81688_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81688_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81688_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81688_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81688_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81688_task);
    
    if (futhark_mc_segred_stage_1_parloop_81688_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81688_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81688_total_end -
                 futhark_mc_segred_stage_1_parloop_81688_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81688_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81688_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81688_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_76671 = 0.0F;
    }
    
    float x_77093;
    float x_77094;
    
    for (int32_t i_77096 = 0; i_77096 < num_tasks_77088; i_77096++) {
        flat_tid_71599 = i_77096;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77093 = defunc_2_reduce_res_76671;
            }
            // load next params
            {
                x_77094 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77089)[flat_tid_71599];
            }
            // red body
            {
                float defunc_1_op_res_77095 = x_77093 + x_77094;
                
                defunc_2_reduce_res_76671 = defunc_1_op_res_77095;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77089);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81685_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81685_end -
                 futhark_mc_segred_task_81685_start;
        
        ctx->futhark_mc_segred_task_81685_runs[tid]++;
        ctx->futhark_mc_segred_task_81685_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81685_iter[tid] += iterations;
    }
    *futhark_mc_task_81684->retval_defunc_2_reduce_res_76671 =
        defunc_2_reduce_res_76671;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81678(void *args, int64_t start,
                                           int64_t end, int flat_tid_71595,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81677
    *futhark_mc_segmap_parloop_struct_81677 =
    (struct futhark_mc_segmap_parloop_struct_81677 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81677->ctx;
    uint64_t futhark_mc_segmap_parloop_81678_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81678_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81677->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81677->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81677->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81677->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81677->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81677->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81677->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81677->free_loop_cond_70258;
    int64_t last_res_71745 =
            futhark_mc_segmap_parloop_struct_81677->free_last_res_71745;
    int64_t min_arg_71760 =
            futhark_mc_segmap_parloop_struct_81677->free_min_arg_71760;
    int64_t min_arg_71761 =
            futhark_mc_segmap_parloop_struct_81677->free_min_arg_71761;
    int64_t min_res_71762 =
            futhark_mc_segmap_parloop_struct_81677->free_min_res_71762;
    float max_res_71766 =
          futhark_mc_segmap_parloop_struct_81677->free_max_res_71766;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_segmap_parloop_struct_81677->free_mem_75316,
                                 .size =0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_segmap_parloop_struct_81677->free_mem_75319,
                                 .size =0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_segmap_parloop_struct_81677->free_mem_75322,
                                 .size =0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_segmap_parloop_struct_81677->free_mem_75325,
                                 .size =0, .references =NULL};
    struct memblock mem_75328 = {.desc ="mem_75328", .mem =
                                 futhark_mc_segmap_parloop_struct_81677->free_mem_75328,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76971 = start;
    
    for (; iter_76971 < end; iter_76971++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77070 = n_m_70241;
        int64_t gtid_71596 = iter_76971;
        int64_t remnant_77071 = iter_76971 - gtid_71596;
        int64_t min_arg_76564 = mul64(jump_70237, gtid_71596);
        int64_t min_res_76565 = smin64(i_70247, min_arg_76564);
        int64_t defunc_0_g_res_76566 = add64((int64_t) 1, min_res_76565);
        bool init_idx_76567;
        int64_t init_idx_76568;
        int64_t init_idx_76569;
        bool loop_while_76972;
        int64_t low_76973;
        int64_t high_76974;
        
        loop_while_76972 = x_70248;
        low_76973 = (int64_t) 0;
        high_76974 = i_70247;
        while (loop_while_76972) {
            int64_t x_76975 = add64(low_76973, high_76974);
            int64_t mid_76976 = sdiv64(x_76975, (int64_t) 2);
            bool x_76977 = sle64((int64_t) 0, mid_76976);
            bool y_76978 = slt64(mid_76976, n_70233);
            bool bounds_check_76979 = x_76977 && y_76978;
            bool index_certs_76980;
            
            if (!bounds_check_76979) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76976,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_76981 = ((int64_t *) mem_75322.mem)[mid_76976];
            bool cond_76982 = slt64(mid_id_76981, (int64_t) 0);
            int64_t mid_idx_76983;
            
            if (cond_76982) {
                mid_idx_76983 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_76983 = mid_id_76981;
            }
            
            bool cond_76984 = sle64(defunc_0_g_res_76566, mid_idx_76983);
            int64_t loopres_76985;
            int64_t loopres_76986;
            
            if (cond_76984) {
                int64_t loopres_t_res_76987 = sub64(mid_76976, (int64_t) 1);
                
                loopres_76985 = low_76973;
                loopres_76986 = loopres_t_res_76987;
            } else {
                int64_t loopres_f_res_76988 = add64((int64_t) 1, mid_76976);
                
                loopres_76985 = loopres_f_res_76988;
                loopres_76986 = high_76974;
            }
            
            bool loop_cond_76989 = sle64(loopres_76985, loopres_76986);
            bool loop_while_tmp_77072 = loop_cond_76989;
            int64_t low_tmp_77073 = loopres_76985;
            int64_t high_tmp_77074 = loopres_76986;
            
            loop_while_76972 = loop_while_tmp_77072;
            low_76973 = low_tmp_77073;
            high_76974 = high_tmp_77074;
        }
        init_idx_76567 = loop_while_76972;
        init_idx_76568 = low_76973;
        init_idx_76569 = high_76974;
        
        bool idx_76588;
        int64_t idx_76589;
        int64_t idx_76590;
        int64_t idx_76591;
        bool loop_while_76990;
        int64_t l_idx_76991;
        int64_t r_idx_76992;
        int64_t span_76993;
        
        loop_while_76990 = loop_cond_70258;
        l_idx_76991 = init_idx_76568;
        r_idx_76992 = init_idx_76568;
        span_76993 = (int64_t) 1;
        while (loop_while_76990) {
            int64_t max_arg_76994 = sub64(l_idx_76991, (int64_t) 1);
            int64_t max_res_76995 = smax64((int64_t) 0, max_arg_76994);
            int64_t min_arg_76996 = add64((int64_t) 1, r_idx_76992);
            int64_t min_res_76997 = smin64(min_arg_71760, min_arg_76996);
            bool x_76998 = sle64((int64_t) 0, max_res_76995);
            bool y_76999 = slt64(max_res_76995, n_70233);
            bool bounds_check_77000 = x_76998 && y_76999;
            bool index_certs_77001;
            
            if (!bounds_check_77000) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_76995,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77002 = ((int64_t *) mem_75322.mem)[max_res_76995];
            int64_t abs_arg_77003 = sub64(x_77002, defunc_0_g_res_76566);
            int64_t abs_res_77004 = abs64(abs_arg_77003);
            bool x_77005 = sle64((int64_t) 0, min_res_76997);
            bool y_77006 = slt64(min_res_76997, n_70233);
            bool bounds_check_77007 = x_77005 && y_77006;
            bool index_certs_77008;
            
            if (!bounds_check_77007) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_76997,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77009 = ((int64_t *) mem_75322.mem)[min_res_76997];
            int64_t abs_arg_77010 = sub64(x_77009, defunc_0_g_res_76566);
            int64_t abs_res_77011 = abs64(abs_arg_77010);
            bool cond_77012 = max_res_76995 == l_idx_76991;
            int64_t loopres_77013;
            int64_t loopres_77014;
            int64_t loopres_77015;
            
            if (cond_77012) {
                loopres_77013 = l_idx_76991;
                loopres_77014 = r_idx_76992;
                loopres_77015 = min_res_70253;
            } else {
                bool cond_77016 = slt64(abs_res_77004, abs_res_77011);
                bool cond_f_res_77017 = min_res_76997 == r_idx_76992;
                bool x_77018 = !cond_77016;
                bool y_77019 = cond_f_res_77017 && x_77018;
                bool cond_77020 = cond_77016 || y_77019;
                int64_t loopres_f_res_77021;
                
                if (cond_77020) {
                    loopres_f_res_77021 = max_res_76995;
                } else {
                    loopres_f_res_77021 = l_idx_76991;
                }
                
                int64_t loopres_f_res_77022;
                
                if (cond_77020) {
                    loopres_f_res_77022 = r_idx_76992;
                } else {
                    loopres_f_res_77022 = min_res_76997;
                }
                
                int64_t loopres_f_res_77023;
                
                if (cond_77020) {
                    int64_t loopres_f_res_t_res_77024 = add64((int64_t) 1,
                                                              span_76993);
                    
                    loopres_f_res_77023 = loopres_f_res_t_res_77024;
                } else {
                    int64_t loopres_f_res_f_res_77025 = add64((int64_t) 1,
                                                              span_76993);
                    
                    loopres_f_res_77023 = loopres_f_res_f_res_77025;
                }
                loopres_77013 = loopres_f_res_77021;
                loopres_77014 = loopres_f_res_77022;
                loopres_77015 = loopres_f_res_77023;
            }
            
            bool loop_cond_77026 = slt64(loopres_77015, min_res_70253);
            bool loop_while_tmp_77075 = loop_cond_77026;
            int64_t l_idx_tmp_77076 = loopres_77013;
            int64_t r_idx_tmp_77077 = loopres_77014;
            int64_t span_tmp_77078 = loopres_77015;
            
            loop_while_76990 = loop_while_tmp_77075;
            l_idx_76991 = l_idx_tmp_77076;
            r_idx_76992 = r_idx_tmp_77077;
            span_76993 = span_tmp_77078;
        }
        idx_76588 = loop_while_76990;
        idx_76589 = l_idx_76991;
        idx_76590 = r_idx_76992;
        idx_76591 = span_76993;
        
        int64_t min_res_76629 = smin64(min_arg_71761, idx_76589);
        int64_t max_res_76630 = smax64((int64_t) 0, min_res_76629);
        int64_t x_76631 = add64(min_res_71762, max_res_76630);
        int64_t r_76632 = sub64(x_76631, (int64_t) 1);
        bool x_76633 = sle64((int64_t) 0, r_76632);
        bool y_76634 = slt64(r_76632, n_70233);
        bool bounds_check_76635 = x_76633 && y_76634;
        bool index_certs_76636;
        
        if (!bounds_check_76635) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_76632,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_76637 = ((int64_t *) mem_75319.mem)[r_76632];
        int64_t abs_arg_76638 = sub64(x_76637, min_res_76565);
        int64_t abs_res_76639 = abs64(abs_arg_76638);
        bool x_76640 = sle64((int64_t) 0, max_res_76630);
        bool y_76641 = slt64(max_res_76630, n_70233);
        bool bounds_check_76642 = x_76640 && y_76641;
        bool index_certs_76643;
        
        if (!bounds_check_76642) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_76630,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_76644 = ((int64_t *) mem_75319.mem)[max_res_76630];
        int64_t abs_arg_76645 = sub64(x_76644, min_res_76565);
        int64_t abs_res_76646 = abs64(abs_arg_76645);
        int64_t max_res_76647 = smax64(abs_res_76639, abs_res_76646);
        float defunc_0_f_res_76648 = sitofp_i64_f32(max_res_76647);
        float defunc_1_f_res_76649 = max_res_71766 + defunc_0_f_res_76648;
        float defunc_2_reduce_res_76650;
        int64_t flat_tid_71597 = (int64_t) 0;
        int32_t num_tasks_77079;
        struct futhark_mc_task_81679 futhark_mc_task_81679;
        
        futhark_mc_task_81679.ctx = ctx;
        futhark_mc_task_81679.free_last_res_71745 = last_res_71745;
        futhark_mc_task_81679.free_mem_75319 = mem_75319.mem;
        futhark_mc_task_81679.free_mem_75325 = mem_75325.mem;
        futhark_mc_task_81679.free_min_res_76565 = min_res_76565;
        futhark_mc_task_81679.free_max_res_76630 = max_res_76630;
        futhark_mc_task_81679.free_defunc_1_f_res_76649 = defunc_1_f_res_76649;
        futhark_mc_task_81679.retval_defunc_2_reduce_res_76650 =
            &defunc_2_reduce_res_76650;
        
        struct scheduler_segop futhark_mc_task_81679_task;
        
        futhark_mc_task_81679_task.args = &futhark_mc_task_81679;
        futhark_mc_task_81679_task.top_level_fn = futhark_mc_segred_task_81680;
        futhark_mc_task_81679_task.name = "futhark_mc_segred_task_81680";
        futhark_mc_task_81679_task.iterations = q_70235;
        futhark_mc_task_81679_task.task_time =
            &ctx->futhark_mc_segred_task_81680_total_time;
        futhark_mc_task_81679_task.task_iter =
            &ctx->futhark_mc_segred_task_81680_total_iter;
        futhark_mc_task_81679_task.sched = STATIC;
        futhark_mc_task_81679_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81680_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81679_task);
        
        if (futhark_mc_segred_task_81680_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_76670 = 1.0F / defunc_2_reduce_res_76650;
        float defunc_2_reduce_res_76671;
        int64_t flat_tid_71599 = (int64_t) 0;
        int32_t num_tasks_77088;
        struct futhark_mc_task_81684 futhark_mc_task_81684;
        
        futhark_mc_task_81684.ctx = ctx;
        futhark_mc_task_81684.free_last_res_71745 = last_res_71745;
        futhark_mc_task_81684.free_mem_75316 = mem_75316.mem;
        futhark_mc_task_81684.free_mem_75319 = mem_75319.mem;
        futhark_mc_task_81684.free_mem_75325 = mem_75325.mem;
        futhark_mc_task_81684.free_min_res_76565 = min_res_76565;
        futhark_mc_task_81684.free_max_res_76630 = max_res_76630;
        futhark_mc_task_81684.free_defunc_1_f_res_76649 = defunc_1_f_res_76649;
        futhark_mc_task_81684.free_a0_76670 = a0_76670;
        futhark_mc_task_81684.retval_defunc_2_reduce_res_76671 =
            &defunc_2_reduce_res_76671;
        
        struct scheduler_segop futhark_mc_task_81684_task;
        
        futhark_mc_task_81684_task.args = &futhark_mc_task_81684;
        futhark_mc_task_81684_task.top_level_fn = futhark_mc_segred_task_81685;
        futhark_mc_task_81684_task.name = "futhark_mc_segred_task_81685";
        futhark_mc_task_81684_task.iterations = q_70235;
        futhark_mc_task_81684_task.task_time =
            &ctx->futhark_mc_segred_task_81685_total_time;
        futhark_mc_task_81684_task.task_iter =
            &ctx->futhark_mc_segred_task_81685_total_iter;
        futhark_mc_task_81684_task.sched = STATIC;
        futhark_mc_task_81684_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81685_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81684_task);
        
        if (futhark_mc_segred_task_81685_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75328.mem)[gtid_71596] = defunc_2_reduce_res_76671;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81678_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81678_end -
                 futhark_mc_segmap_parloop_81678_start;
        
        ctx->futhark_mc_segmap_parloop_81678_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81678_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81678_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81676(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71595 = tid;
    int num_tasks_76860 = info.nsubtasks;
    struct futhark_mc_task_81672 *futhark_mc_task_81672 =
                                 (struct futhark_mc_task_81672 *) args;
    struct futhark_context *ctx = futhark_mc_task_81672->ctx;
    uint64_t futhark_mc_segmap_nested_task_81676_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81676_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81672->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81672->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81672->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81672->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81672->free_i_70247;
    bool x_70248 = futhark_mc_task_81672->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81672->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81672->free_loop_cond_70258;
    int64_t last_res_71745 = futhark_mc_task_81672->free_last_res_71745;
    int64_t min_arg_71760 = futhark_mc_task_81672->free_min_arg_71760;
    int64_t min_arg_71761 = futhark_mc_task_81672->free_min_arg_71761;
    int64_t min_res_71762 = futhark_mc_task_81672->free_min_res_71762;
    float max_res_71766 = futhark_mc_task_81672->free_max_res_71766;
    struct memblock mem_75316 = {.desc ="mem_75316", .mem =
                                 futhark_mc_task_81672->free_mem_75316, .size =
                                 0, .references =NULL};
    struct memblock mem_75319 = {.desc ="mem_75319", .mem =
                                 futhark_mc_task_81672->free_mem_75319, .size =
                                 0, .references =NULL};
    struct memblock mem_75322 = {.desc ="mem_75322", .mem =
                                 futhark_mc_task_81672->free_mem_75322, .size =
                                 0, .references =NULL};
    struct memblock mem_75325 = {.desc ="mem_75325", .mem =
                                 futhark_mc_task_81672->free_mem_75325, .size =
                                 0, .references =NULL};
    struct memblock mem_75328 = {.desc ="mem_75328", .mem =
                                 futhark_mc_task_81672->free_mem_75328, .size =
                                 0, .references =NULL};
    int64_t iter_76971;
    struct futhark_mc_segmap_parloop_struct_81677
    futhark_mc_segmap_parloop_struct_81677;
    
    futhark_mc_segmap_parloop_struct_81677.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81677.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81677.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81677.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81677.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81677.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81677.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81677.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81677.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81677.free_last_res_71745 = last_res_71745;
    futhark_mc_segmap_parloop_struct_81677.free_min_arg_71760 = min_arg_71760;
    futhark_mc_segmap_parloop_struct_81677.free_min_arg_71761 = min_arg_71761;
    futhark_mc_segmap_parloop_struct_81677.free_min_res_71762 = min_res_71762;
    futhark_mc_segmap_parloop_struct_81677.free_max_res_71766 = max_res_71766;
    futhark_mc_segmap_parloop_struct_81677.free_mem_75316 = mem_75316.mem;
    futhark_mc_segmap_parloop_struct_81677.free_mem_75319 = mem_75319.mem;
    futhark_mc_segmap_parloop_struct_81677.free_mem_75322 = mem_75322.mem;
    futhark_mc_segmap_parloop_struct_81677.free_mem_75325 = mem_75325.mem;
    futhark_mc_segmap_parloop_struct_81677.free_mem_75328 = mem_75328.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81678_task;
    
    futhark_mc_segmap_parloop_81678_task.name =
        "futhark_mc_segmap_parloop_81678";
    futhark_mc_segmap_parloop_81678_task.fn = futhark_mc_segmap_parloop_81678;
    futhark_mc_segmap_parloop_81678_task.args =
        &futhark_mc_segmap_parloop_struct_81677;
    futhark_mc_segmap_parloop_81678_task.iterations = iterations;
    futhark_mc_segmap_parloop_81678_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81678_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81678_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81678_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81678_task);
    
    if (futhark_mc_segmap_parloop_81678_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81678_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81678_total_end -
                 futhark_mc_segmap_parloop_81678_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81678_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81678_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81678_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81676_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81676_end -
                 futhark_mc_segmap_nested_task_81676_start;
        
        ctx->futhark_mc_segmap_nested_task_81676_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81676_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81676_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81646(void *args, int64_t start,
                                           int64_t end, int flat_tid_71583,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81645
    *futhark_mc_segmap_parloop_struct_81645 =
    (struct futhark_mc_segmap_parloop_struct_81645 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81645->ctx;
    uint64_t futhark_mc_segmap_parloop_81646_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81646_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81645->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81645->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81645->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81645->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81645->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81645->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81645->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81645->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81645->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81645->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81645->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75312 =
            futhark_mc_segmap_parloop_struct_81645->free_bytes_75312;
    int64_t bytes_75315 =
            futhark_mc_segmap_parloop_struct_81645->free_bytes_75315;
    int64_t bytes_75324 =
            futhark_mc_segmap_parloop_struct_81645->free_bytes_75324;
    int64_t bytes_75327 =
            futhark_mc_segmap_parloop_struct_81645->free_bytes_75327;
    struct memblock mem_75422 = {.desc ="mem_75422", .mem =
                                 futhark_mc_segmap_parloop_struct_81645->free_mem_75422,
                                 .size =0, .references =NULL};
    size_t mem_75313_cached_sizze_81647 = 0;
    unsigned char *mem_75313 = NULL;
    size_t mem_75316_cached_sizze_81648 = 0;
    unsigned char *mem_75316 = NULL;
    size_t mem_75319_cached_sizze_81649 = 0;
    unsigned char *mem_75319 = NULL;
    size_t mem_75322_cached_sizze_81650 = 0;
    unsigned char *mem_75322 = NULL;
    size_t mem_75325_cached_sizze_81651 = 0;
    unsigned char *mem_75325 = NULL;
    size_t mem_75328_cached_sizze_81652 = 0;
    unsigned char *mem_75328 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76546 = start;
    
    if (mem_75313_cached_sizze_81647 < (size_t) bytes_75312) {
        mem_75313 = realloc(mem_75313, bytes_75312);
        mem_75313_cached_sizze_81647 = bytes_75312;
    }
    if (mem_75316_cached_sizze_81648 < (size_t) bytes_75315) {
        mem_75316 = realloc(mem_75316, bytes_75315);
        mem_75316_cached_sizze_81648 = bytes_75315;
    }
    if (mem_75319_cached_sizze_81649 < (size_t) bytes_75312) {
        mem_75319 = realloc(mem_75319, bytes_75312);
        mem_75319_cached_sizze_81649 = bytes_75312;
    }
    if (mem_75322_cached_sizze_81650 < (size_t) bytes_75312) {
        mem_75322 = realloc(mem_75322, bytes_75312);
        mem_75322_cached_sizze_81650 = bytes_75312;
    }
    if (mem_75325_cached_sizze_81651 < (size_t) bytes_75324) {
        mem_75325 = realloc(mem_75325, bytes_75324);
        mem_75325_cached_sizze_81651 = bytes_75324;
    }
    if (mem_75328_cached_sizze_81652 < (size_t) bytes_75327) {
        mem_75328 = realloc(mem_75328, bytes_75327);
        mem_75328_cached_sizze_81652 = bytes_75327;
    }
    for (; iter_76546 < end; iter_76546++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76828 = m_70232;
        int64_t gtid_71584 = iter_76546;
        int64_t remnant_76829 = iter_76546 - gtid_71584;
        int64_t flat_tid_71585 = (int64_t) 0;
        int32_t num_tasks_76830;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81653 futhark_mc_task_81653;
        
        futhark_mc_task_81653.ctx = ctx;
        futhark_mc_task_81653.free_n_70233 = n_70233;
        futhark_mc_task_81653.free_gtid_71584 = gtid_71584;
        futhark_mc_task_81653.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81653.free_mem_75313 = mem_75313;
        
        struct scheduler_segop futhark_mc_task_81653_task;
        
        futhark_mc_task_81653_task.args = &futhark_mc_task_81653;
        futhark_mc_task_81653_task.top_level_fn = futhark_mc_segscan_task_81654;
        futhark_mc_task_81653_task.name = "futhark_mc_segscan_task_81654";
        futhark_mc_task_81653_task.iterations = n_70233;
        futhark_mc_task_81653_task.task_time =
            &ctx->futhark_mc_segscan_task_81654_total_time;
        futhark_mc_task_81653_task.task_iter =
            &ctx->futhark_mc_segscan_task_81654_total_iter;
        futhark_mc_task_81653_task.sched = STATIC;
        futhark_mc_task_81653_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81654_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81653_task);
        
        if (futhark_mc_segscan_task_81654_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_71745 = ((int64_t *) mem_75313)[i_70247];
        
        for (int64_t i_76844 = 0; i_76844 < n_70233; i_76844++) {
            ((float *) mem_75316)[i_76844] = 0.0F;
        }
        for (int64_t i_76845 = 0; i_76845 < n_70233; i_76845++) {
            ((int64_t *) mem_75319)[i_76845] = (int64_t) -1;
        }
        
        int64_t flat_tid_71587 = (int64_t) 0;
        int32_t num_tasks_76846;
        struct futhark_mc_task_81660 futhark_mc_task_81660;
        
        futhark_mc_task_81660.ctx = ctx;
        futhark_mc_task_81660.free_n_70233 = n_70233;
        futhark_mc_task_81660.free_gtid_71584 = gtid_71584;
        futhark_mc_task_81660.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81660.free_mem_75313 = mem_75313;
        futhark_mc_task_81660.free_mem_75316 = mem_75316;
        futhark_mc_task_81660.free_mem_75319 = mem_75319;
        
        struct scheduler_segop futhark_mc_task_81660_task;
        
        futhark_mc_task_81660_task.args = &futhark_mc_task_81660;
        futhark_mc_task_81660_task.top_level_fn = futhark_mc_segmap_task_81661;
        futhark_mc_task_81660_task.name = "futhark_mc_segmap_task_81661";
        futhark_mc_task_81660_task.iterations = n_70233;
        futhark_mc_task_81660_task.task_time =
            &ctx->futhark_mc_segmap_task_81661_total_time;
        futhark_mc_task_81660_task.task_iter =
            &ctx->futhark_mc_segmap_task_81661_total_iter;
        futhark_mc_task_81660_task.sched = STATIC;
        futhark_mc_task_81660_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81661_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81660_task);
        
        if (futhark_mc_segmap_task_81661_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_71589 = (int64_t) 0;
        int32_t num_tasks_76852;
        struct futhark_mc_task_81664 futhark_mc_task_81664;
        
        futhark_mc_task_81664.ctx = ctx;
        futhark_mc_task_81664.free_n_70233 = n_70233;
        futhark_mc_task_81664.free_mem_75319 = mem_75319;
        futhark_mc_task_81664.free_mem_75322 = mem_75322;
        
        struct scheduler_segop futhark_mc_task_81664_task;
        
        futhark_mc_task_81664_task.args = &futhark_mc_task_81664;
        futhark_mc_task_81664_task.top_level_fn = futhark_mc_segmap_task_81665;
        futhark_mc_task_81664_task.name = "futhark_mc_segmap_task_81665";
        futhark_mc_task_81664_task.iterations = n_70233;
        futhark_mc_task_81664_task.task_time =
            &ctx->futhark_mc_segmap_task_81665_total_time;
        futhark_mc_task_81664_task.task_iter =
            &ctx->futhark_mc_segmap_task_81665_total_iter;
        futhark_mc_task_81664_task.sched = STATIC;
        futhark_mc_task_81664_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81665_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81664_task);
        
        if (futhark_mc_segmap_task_81665_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_71760 = sub64(last_res_71745, (int64_t) 1);
        int64_t min_arg_71761 = sub64(last_res_71745, min_res_70253);
        int64_t min_res_71762 = smin64(q_70235, last_res_71745);
        float i64_res_71763 = sitofp_i64_f32(last_res_71745);
        float x_71764 = i64_res_70259 - i64_res_71763;
        float max_arg_71765 = x_71764 / 2.0F;
        float max_res_71766 = fmax32(0.0F, max_arg_71765);
        int64_t flat_tid_71591 = (int64_t) 0;
        int32_t num_tasks_76856;
        struct futhark_mc_task_81668 futhark_mc_task_81668;
        
        futhark_mc_task_81668.ctx = ctx;
        futhark_mc_task_81668.free_q_70235 = q_70235;
        futhark_mc_task_81668.free_last_res_71745 = last_res_71745;
        futhark_mc_task_81668.free_mem_75325 = mem_75325;
        
        struct scheduler_segop futhark_mc_task_81668_task;
        
        futhark_mc_task_81668_task.args = &futhark_mc_task_81668;
        futhark_mc_task_81668_task.top_level_fn = futhark_mc_segmap_task_81669;
        futhark_mc_task_81668_task.name = "futhark_mc_segmap_task_81669";
        futhark_mc_task_81668_task.iterations = q_70235;
        futhark_mc_task_81668_task.task_time =
            &ctx->futhark_mc_segmap_task_81669_total_time;
        futhark_mc_task_81668_task.task_iter =
            &ctx->futhark_mc_segmap_task_81669_total_iter;
        futhark_mc_task_81668_task.sched = STATIC;
        futhark_mc_task_81668_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81669_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81668_task);
        
        if (futhark_mc_segmap_task_81669_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_71593 = (int64_t) 0;
        int32_t num_tasks_76860;
        int64_t flat_tid_71595 = (int64_t) 0;
        struct futhark_mc_task_81672 futhark_mc_task_81672;
        
        futhark_mc_task_81672.ctx = ctx;
        futhark_mc_task_81672.free_n_70233 = n_70233;
        futhark_mc_task_81672.free_q_70235 = q_70235;
        futhark_mc_task_81672.free_jump_70237 = jump_70237;
        futhark_mc_task_81672.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81672.free_i_70247 = i_70247;
        futhark_mc_task_81672.free_x_70248 = x_70248;
        futhark_mc_task_81672.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81672.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81672.free_last_res_71745 = last_res_71745;
        futhark_mc_task_81672.free_min_arg_71760 = min_arg_71760;
        futhark_mc_task_81672.free_min_arg_71761 = min_arg_71761;
        futhark_mc_task_81672.free_min_res_71762 = min_res_71762;
        futhark_mc_task_81672.free_max_res_71766 = max_res_71766;
        futhark_mc_task_81672.free_mem_75316 = mem_75316;
        futhark_mc_task_81672.free_mem_75319 = mem_75319;
        futhark_mc_task_81672.free_mem_75322 = mem_75322;
        futhark_mc_task_81672.free_mem_75325 = mem_75325;
        futhark_mc_task_81672.free_mem_75328 = mem_75328;
        
        struct scheduler_segop futhark_mc_task_81672_task;
        
        futhark_mc_task_81672_task.args = &futhark_mc_task_81672;
        futhark_mc_task_81672_task.top_level_fn = futhark_mc_segmap_task_81673;
        futhark_mc_task_81672_task.name = "futhark_mc_segmap_task_81673";
        futhark_mc_task_81672_task.iterations = n_m_70241;
        futhark_mc_task_81672_task.task_time =
            &ctx->futhark_mc_segmap_task_81673_total_time;
        futhark_mc_task_81672_task.task_iter =
            &ctx->futhark_mc_segmap_task_81673_total_iter;
        futhark_mc_task_81672_task.sched = DYNAMIC;
        futhark_mc_task_81672_task.nested_fn =
            futhark_mc_segmap_nested_task_81676;
        
        int futhark_mc_segmap_task_81673_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81672_task);
        
        if (futhark_mc_segmap_task_81673_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75422.mem + gtid_71584 * n_m_70241 * (int64_t) 4,
                    mem_75328 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75313);
    free(mem_75316);
    free(mem_75319);
    free(mem_75322);
    free(mem_75325);
    free(mem_75328);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81646_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81646_end -
                 futhark_mc_segmap_parloop_81646_start;
        
        ctx->futhark_mc_segmap_parloop_81646_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81646_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81646_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81644(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71583 = tid;
    int num_tasks_76358 = info.nsubtasks;
    struct futhark_mc_task_81634 *futhark_mc_task_81634 =
                                 (struct futhark_mc_task_81634 *) args;
    struct futhark_context *ctx = futhark_mc_task_81634->ctx;
    uint64_t futhark_mc_segmap_nested_task_81644_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81644_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81634->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81634->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81634->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81634->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81634->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81634->free_i_70247;
    bool x_70248 = futhark_mc_task_81634->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81634->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81634->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81634->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81634->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75312 = futhark_mc_task_81634->free_bytes_75312;
    int64_t bytes_75315 = futhark_mc_task_81634->free_bytes_75315;
    int64_t bytes_75324 = futhark_mc_task_81634->free_bytes_75324;
    int64_t bytes_75327 = futhark_mc_task_81634->free_bytes_75327;
    struct memblock mem_75422 = {.desc ="mem_75422", .mem =
                                 futhark_mc_task_81634->free_mem_75422, .size =
                                 0, .references =NULL};
    int64_t iter_76546;
    struct futhark_mc_segmap_parloop_struct_81645
    futhark_mc_segmap_parloop_struct_81645;
    
    futhark_mc_segmap_parloop_struct_81645.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81645.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81645.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81645.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81645.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81645.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81645.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81645.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81645.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81645.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81645.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81645.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81645.free_bytes_75312 = bytes_75312;
    futhark_mc_segmap_parloop_struct_81645.free_bytes_75315 = bytes_75315;
    futhark_mc_segmap_parloop_struct_81645.free_bytes_75324 = bytes_75324;
    futhark_mc_segmap_parloop_struct_81645.free_bytes_75327 = bytes_75327;
    futhark_mc_segmap_parloop_struct_81645.free_mem_75422 = mem_75422.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81646_task;
    
    futhark_mc_segmap_parloop_81646_task.name =
        "futhark_mc_segmap_parloop_81646";
    futhark_mc_segmap_parloop_81646_task.fn = futhark_mc_segmap_parloop_81646;
    futhark_mc_segmap_parloop_81646_task.args =
        &futhark_mc_segmap_parloop_struct_81645;
    futhark_mc_segmap_parloop_81646_task.iterations = iterations;
    futhark_mc_segmap_parloop_81646_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81646_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81646_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81646_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81646_task);
    
    if (futhark_mc_segmap_parloop_81646_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81646_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81646_total_end -
                 futhark_mc_segmap_parloop_81646_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81646_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81646_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81646_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81644_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81644_end -
                 futhark_mc_segmap_nested_task_81644_start;
        
        ctx->futhark_mc_segmap_nested_task_81644_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81644_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81644_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81689 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75424;
    int64_t free_bytes_75427;
    int64_t free_bytes_75436;
    int64_t free_bytes_75439;
    unsigned char *free_mem_75552;
    unsigned char *free_mem_75556;
};
struct futhark_mc_segmap_parloop_struct_81691 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75424;
    int64_t free_bytes_75427;
    int64_t free_bytes_75436;
    int64_t free_bytes_75439;
    unsigned char *free_mem_75552;
    unsigned char *free_mem_75556;
};
static int futhark_mc_segmap_parloop_81692(void *args, int64_t start,
                                           int64_t end, int flat_tid_72042,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81691
    *futhark_mc_segmap_parloop_struct_81691 =
    (struct futhark_mc_segmap_parloop_struct_81691 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81691->ctx;
    uint64_t futhark_mc_segmap_parloop_81692_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81692_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81691->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81691->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81691->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81691->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81691->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81691->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81691->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81691->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81691->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81691->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81691->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75424 =
            futhark_mc_segmap_parloop_struct_81691->free_bytes_75424;
    int64_t bytes_75427 =
            futhark_mc_segmap_parloop_struct_81691->free_bytes_75427;
    int64_t bytes_75436 =
            futhark_mc_segmap_parloop_struct_81691->free_bytes_75436;
    int64_t bytes_75439 =
            futhark_mc_segmap_parloop_struct_81691->free_bytes_75439;
    struct memblock mem_75552 = {.desc ="mem_75552", .mem =
                                 futhark_mc_segmap_parloop_struct_81691->free_mem_75552,
                                 .size =0, .references =NULL};
    struct memblock mem_75556 = {.desc ="mem_75556", .mem =
                                 futhark_mc_segmap_parloop_struct_81691->free_mem_75556,
                                 .size =0, .references =NULL};
    size_t mem_75446_cached_sizze_81693 = 0;
    unsigned char *mem_75446 = NULL;
    size_t mem_75461_cached_sizze_81694 = 0;
    unsigned char *mem_75461 = NULL;
    size_t mem_75464_cached_sizze_81695 = 0;
    unsigned char *mem_75464 = NULL;
    size_t mem_75491_cached_sizze_81696 = 0;
    unsigned char *mem_75491 = NULL;
    size_t mem_75506_cached_sizze_81697 = 0;
    unsigned char *mem_75506 = NULL;
    size_t mem_75521_cached_sizze_81698 = 0;
    unsigned char *mem_75521 = NULL;
    size_t mem_75524_cached_sizze_81699 = 0;
    unsigned char *mem_75524 = NULL;
    int64_t iterations = end - start;
    int64_t iter_77098 = start;
    
    if (mem_75446_cached_sizze_81693 < (size_t) bytes_75424) {
        mem_75446 = realloc(mem_75446, bytes_75424);
        mem_75446_cached_sizze_81693 = bytes_75424;
    }
    if (mem_75461_cached_sizze_81694 < (size_t) bytes_75427) {
        mem_75461 = realloc(mem_75461, bytes_75427);
        mem_75461_cached_sizze_81694 = bytes_75427;
    }
    if (mem_75464_cached_sizze_81695 < (size_t) bytes_75424) {
        mem_75464 = realloc(mem_75464, bytes_75424);
        mem_75464_cached_sizze_81695 = bytes_75424;
    }
    if (mem_75491_cached_sizze_81696 < (size_t) bytes_75424) {
        mem_75491 = realloc(mem_75491, bytes_75424);
        mem_75491_cached_sizze_81696 = bytes_75424;
    }
    if (mem_75506_cached_sizze_81697 < (size_t) bytes_75436) {
        mem_75506 = realloc(mem_75506, bytes_75436);
        mem_75506_cached_sizze_81697 = bytes_75436;
    }
    if (mem_75521_cached_sizze_81698 < (size_t) bytes_75439) {
        mem_75521 = realloc(mem_75521, bytes_75439);
        mem_75521_cached_sizze_81698 = bytes_75439;
    }
    if (mem_75524_cached_sizze_81699 < (size_t) bytes_75439) {
        mem_75524 = realloc(mem_75524, bytes_75439);
        mem_75524_cached_sizze_81699 = bytes_75439;
    }
    for (; iter_77098 < end; iter_77098++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77292 = m_70232;
        int64_t gtid_72043 = iter_77098;
        int64_t remnant_77293 = iter_77098 - gtid_72043;
        int64_t discard_74958;
        int64_t scanacc_77100 = (int64_t) 0;
        
        for (int64_t i_77099 = 0; i_77099 < n_70233; i_77099++) {
            float x_77102 = ((float *) Y_mem_75306.mem)[gtid_72043 * n_70233 +
                                                        i_77099];
            bool isnan_res_77103;
            
            isnan_res_77103 = futrts_isnan32(x_77102);
            
            bool defunc_0_p_res_77104 = !isnan_res_77103;
            int64_t defunc_0_f_res_77105 = btoi_bool_i64(defunc_0_p_res_77104);
            int64_t defunc_1_op_res_77106 = add64(defunc_0_f_res_77105,
                                                  scanacc_77100);
            
            ((int64_t *) mem_75446)[i_77099] = defunc_1_op_res_77106;
            
            int64_t scanacc_tmp_77294 = defunc_1_op_res_77106;
            
            scanacc_77100 = scanacc_tmp_77294;
        }
        discard_74958 = scanacc_77100;
        
        int64_t last_res_70461 = ((int64_t *) mem_75446)[i_70247];
        
        for (int64_t i_77296 = 0; i_77296 < n_70233; i_77296++) {
            ((float *) mem_75461)[i_77296] = 0.0F;
        }
        for (int64_t i_77297 = 0; i_77297 < n_70233; i_77297++) {
            ((int64_t *) mem_75464)[i_77297] = (int64_t) -1;
        }
        for (int64_t write_iter_77108 = 0; write_iter_77108 < n_70233;
             write_iter_77108++) {
            float write_iv_77111 = ((float *) Y_mem_75306.mem)[gtid_72043 *
                                                               n_70233 +
                                                               write_iter_77108];
            bool isnan_res_77112;
            
            isnan_res_77112 = futrts_isnan32(write_iv_77111);
            
            bool defunc_0_p_res_77113 = !isnan_res_77112;
            int64_t defunc_1_f_res_77114;
            
            if (defunc_0_p_res_77113) {
                int64_t write_iv_77115 =
                        ((int64_t *) mem_75446)[write_iter_77108];
                int64_t defunc_1_f_res_t_res_77116 = sub64(write_iv_77115,
                                                           (int64_t) 1);
                
                defunc_1_f_res_77114 = defunc_1_f_res_t_res_77116;
            } else {
                defunc_1_f_res_77114 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77114) &&
                slt64(defunc_1_f_res_77114, n_70233)) {
                ((int64_t *) mem_75464)[defunc_1_f_res_77114] =
                    write_iter_77108;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77114) &&
                slt64(defunc_1_f_res_77114, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75461 + defunc_1_f_res_77114 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_72043 * n_70233 +
                                               write_iter_77108) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_77120 = 0; i_77120 < n_70233; i_77120++) {
            int64_t x_77122 = ((int64_t *) mem_75464)[i_77120];
            int64_t defunc_0_f_res_77123 = add64((int64_t) 1, x_77122);
            
            ((int64_t *) mem_75491)[i_77120] = defunc_0_f_res_77123;
        }
        
        int64_t min_arg_70476 = sub64(last_res_70461, (int64_t) 1);
        int64_t min_arg_70477 = sub64(last_res_70461, min_res_70253);
        int64_t min_res_70478 = smin64(q_70235, last_res_70461);
        float i64_res_70479 = sitofp_i64_f32(last_res_70461);
        float x_70480 = i64_res_70259 - i64_res_70479;
        float max_arg_70481 = x_70480 / 2.0F;
        float max_res_70482 = fmax32(0.0F, max_arg_70481);
        
        for (int64_t i_77125 = 0; i_77125 < q_70235; i_77125++) {
            bool cond_77127 = sle64(last_res_70461, i_77125);
            float defunc_0_f_res_77128;
            
            if (cond_77127) {
                defunc_0_f_res_77128 = 0.0F;
            } else {
                defunc_0_f_res_77128 = 1.0F;
            }
            ((float *) mem_75506)[i_77125] = defunc_0_f_res_77128;
        }
        for (int64_t i_77130 = 0; i_77130 < n_m_70241; i_77130++) {
            int64_t min_arg_77133 = mul64(jump_70237, i_77130);
            int64_t min_res_77134 = smin64(i_70247, min_arg_77133);
            int64_t defunc_0_g_res_77135 = add64((int64_t) 1, min_res_77134);
            bool init_idx_77136;
            int64_t init_idx_77137;
            int64_t init_idx_77138;
            bool loop_while_77139;
            int64_t low_77140;
            int64_t high_77141;
            
            loop_while_77139 = x_70248;
            low_77140 = (int64_t) 0;
            high_77141 = i_70247;
            while (loop_while_77139) {
                int64_t x_77142 = add64(low_77140, high_77141);
                int64_t mid_77143 = sdiv64(x_77142, (int64_t) 2);
                bool x_77144 = sle64((int64_t) 0, mid_77143);
                bool y_77145 = slt64(mid_77143, n_70233);
                bool bounds_check_77146 = x_77144 && y_77145;
                bool index_certs_77147;
                
                if (!bounds_check_77146) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_77143,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_77148 = ((int64_t *) mem_75491)[mid_77143];
                bool cond_77149 = slt64(mid_id_77148, (int64_t) 0);
                int64_t mid_idx_77150;
                
                if (cond_77149) {
                    mid_idx_77150 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_77150 = mid_id_77148;
                }
                
                bool cond_77151 = sle64(defunc_0_g_res_77135, mid_idx_77150);
                int64_t loopres_77152;
                int64_t loopres_77153;
                
                if (cond_77151) {
                    int64_t loopres_t_res_77154 = sub64(mid_77143, (int64_t) 1);
                    
                    loopres_77152 = low_77140;
                    loopres_77153 = loopres_t_res_77154;
                } else {
                    int64_t loopres_f_res_77155 = add64((int64_t) 1, mid_77143);
                    
                    loopres_77152 = loopres_f_res_77155;
                    loopres_77153 = high_77141;
                }
                
                bool loop_cond_77156 = sle64(loopres_77152, loopres_77153);
                bool loop_while_tmp_77304 = loop_cond_77156;
                int64_t low_tmp_77305 = loopres_77152;
                int64_t high_tmp_77306 = loopres_77153;
                
                loop_while_77139 = loop_while_tmp_77304;
                low_77140 = low_tmp_77305;
                high_77141 = high_tmp_77306;
            }
            init_idx_77136 = loop_while_77139;
            init_idx_77137 = low_77140;
            init_idx_77138 = high_77141;
            
            bool idx_77157;
            int64_t idx_77158;
            int64_t idx_77159;
            int64_t idx_77160;
            bool loop_while_77161;
            int64_t l_idx_77162;
            int64_t r_idx_77163;
            int64_t span_77164;
            
            loop_while_77161 = loop_cond_70258;
            l_idx_77162 = init_idx_77137;
            r_idx_77163 = init_idx_77137;
            span_77164 = (int64_t) 1;
            while (loop_while_77161) {
                int64_t max_arg_77165 = sub64(l_idx_77162, (int64_t) 1);
                int64_t max_res_77166 = smax64((int64_t) 0, max_arg_77165);
                int64_t min_arg_77167 = add64((int64_t) 1, r_idx_77163);
                int64_t min_res_77168 = smin64(min_arg_70476, min_arg_77167);
                bool x_77169 = sle64((int64_t) 0, max_res_77166);
                bool y_77170 = slt64(max_res_77166, n_70233);
                bool bounds_check_77171 = x_77169 && y_77170;
                bool index_certs_77172;
                
                if (!bounds_check_77171) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_77166,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_77173 = ((int64_t *) mem_75491)[max_res_77166];
                int64_t abs_arg_77174 = sub64(x_77173, defunc_0_g_res_77135);
                int64_t abs_res_77175 = abs64(abs_arg_77174);
                bool x_77176 = sle64((int64_t) 0, min_res_77168);
                bool y_77177 = slt64(min_res_77168, n_70233);
                bool bounds_check_77178 = x_77176 && y_77177;
                bool index_certs_77179;
                
                if (!bounds_check_77178) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_77168,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_77180 = ((int64_t *) mem_75491)[min_res_77168];
                int64_t abs_arg_77181 = sub64(x_77180, defunc_0_g_res_77135);
                int64_t abs_res_77182 = abs64(abs_arg_77181);
                bool cond_77183 = max_res_77166 == l_idx_77162;
                int64_t loopres_77184;
                int64_t loopres_77185;
                int64_t loopres_77186;
                
                if (cond_77183) {
                    loopres_77184 = l_idx_77162;
                    loopres_77185 = r_idx_77163;
                    loopres_77186 = min_res_70253;
                } else {
                    bool cond_77187 = slt64(abs_res_77175, abs_res_77182);
                    bool cond_f_res_77188 = min_res_77168 == r_idx_77163;
                    bool x_77189 = !cond_77187;
                    bool y_77190 = cond_f_res_77188 && x_77189;
                    bool cond_77191 = cond_77187 || y_77190;
                    int64_t loopres_f_res_77192;
                    
                    if (cond_77191) {
                        loopres_f_res_77192 = max_res_77166;
                    } else {
                        loopres_f_res_77192 = l_idx_77162;
                    }
                    
                    int64_t loopres_f_res_77193;
                    
                    if (cond_77191) {
                        loopres_f_res_77193 = r_idx_77163;
                    } else {
                        loopres_f_res_77193 = min_res_77168;
                    }
                    
                    int64_t loopres_f_res_77194;
                    
                    if (cond_77191) {
                        int64_t loopres_f_res_t_res_77195 = add64((int64_t) 1,
                                                                  span_77164);
                        
                        loopres_f_res_77194 = loopres_f_res_t_res_77195;
                    } else {
                        int64_t loopres_f_res_f_res_77196 = add64((int64_t) 1,
                                                                  span_77164);
                        
                        loopres_f_res_77194 = loopres_f_res_f_res_77196;
                    }
                    loopres_77184 = loopres_f_res_77192;
                    loopres_77185 = loopres_f_res_77193;
                    loopres_77186 = loopres_f_res_77194;
                }
                
                bool loop_cond_77197 = slt64(loopres_77186, min_res_70253);
                bool loop_while_tmp_77307 = loop_cond_77197;
                int64_t l_idx_tmp_77308 = loopres_77184;
                int64_t r_idx_tmp_77309 = loopres_77185;
                int64_t span_tmp_77310 = loopres_77186;
                
                loop_while_77161 = loop_while_tmp_77307;
                l_idx_77162 = l_idx_tmp_77308;
                r_idx_77163 = r_idx_tmp_77309;
                span_77164 = span_tmp_77310;
            }
            idx_77157 = loop_while_77161;
            idx_77158 = l_idx_77162;
            idx_77159 = r_idx_77163;
            idx_77160 = span_77164;
            
            int64_t min_res_77198 = smin64(min_arg_70477, idx_77158);
            int64_t max_res_77199 = smax64((int64_t) 0, min_res_77198);
            int64_t x_77200 = add64(min_res_70478, max_res_77199);
            int64_t r_77201 = sub64(x_77200, (int64_t) 1);
            bool x_77202 = sle64((int64_t) 0, r_77201);
            bool y_77203 = slt64(r_77201, n_70233);
            bool bounds_check_77204 = x_77202 && y_77203;
            bool index_certs_77205;
            
            if (!bounds_check_77204) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_77201,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77206 = ((int64_t *) mem_75464)[r_77201];
            int64_t abs_arg_77207 = sub64(x_77206, min_res_77134);
            int64_t abs_res_77208 = abs64(abs_arg_77207);
            bool x_77209 = sle64((int64_t) 0, max_res_77199);
            bool y_77210 = slt64(max_res_77199, n_70233);
            bool bounds_check_77211 = x_77209 && y_77210;
            bool index_certs_77212;
            
            if (!bounds_check_77211) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77199,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77213 = ((int64_t *) mem_75464)[max_res_77199];
            int64_t abs_arg_77214 = sub64(x_77213, min_res_77134);
            int64_t abs_res_77215 = abs64(abs_arg_77214);
            int64_t max_res_77216 = smax64(abs_res_77208, abs_res_77215);
            float defunc_0_f_res_77217 = sitofp_i64_f32(max_res_77216);
            float defunc_1_f_res_77218 = max_res_70482 + defunc_0_f_res_77217;
            float defunc_2_reduce_res_77219;
            float defunc_2_reduce_res_77220;
            float defunc_2_reduce_res_77221;
            float redout_77223;
            float redout_77224;
            float redout_77225;
            
            redout_77223 = 0.0F;
            redout_77224 = 0.0F;
            redout_77225 = 0.0F;
            for (int64_t i_77222 = 0; i_77222 < q_70235; i_77222++) {
                float x_77226 = ((float *) mem_75506)[i_77222];
                bool cond_77227 = sle64(last_res_70461, i_77222);
                int64_t defunc_0_f_res_77228;
                
                if (cond_77227) {
                    defunc_0_f_res_77228 = (int64_t) 0;
                } else {
                    int64_t i_77229 = add64(max_res_77199, i_77222);
                    int64_t defunc_0_add_arg_77230 =
                            ((int64_t *) mem_75464)[i_77229];
                    int64_t defunc_1_add_res_77231 = add64((int64_t) 1,
                                                           defunc_0_add_arg_77230);
                    
                    defunc_0_f_res_77228 = defunc_1_add_res_77231;
                }
                
                int64_t binop_p_77232 = sub64(defunc_0_f_res_77228,
                                              min_res_77134);
                float defunc_0_f_res_77233 = sitofp_i64_f32(binop_p_77232);
                float abs_res_77234 = (float) fabs(defunc_0_f_res_77233);
                float tmp1_77235 = abs_res_77234 / defunc_1_f_res_77218;
                float x_77236 = tmp1_77235 * tmp1_77235;
                float y_77237 = tmp1_77235 * x_77236;
                float tmp2_77238 = 1.0F - y_77237;
                float x_77239 = tmp2_77238 * tmp2_77238;
                float tmp3_77240 = tmp2_77238 * x_77239;
                float w_j_77241 = x_77226 * tmp3_77240;
                float xw_j_77242 = defunc_0_f_res_77233 * w_j_77241;
                float x2w_j_77243 = defunc_0_f_res_77233 * xw_j_77242;
                float defunc_1_op_res_77244 = w_j_77241 + redout_77223;
                float defunc_1_op_res_77245 = xw_j_77242 + redout_77224;
                float defunc_1_op_res_77246 = x2w_j_77243 + redout_77225;
                float redout_tmp_77311 = defunc_1_op_res_77244;
                float redout_tmp_77312 = defunc_1_op_res_77245;
                float redout_tmp_77313 = defunc_1_op_res_77246;
                
                redout_77223 = redout_tmp_77311;
                redout_77224 = redout_tmp_77312;
                redout_77225 = redout_tmp_77313;
            }
            defunc_2_reduce_res_77219 = redout_77223;
            defunc_2_reduce_res_77220 = redout_77224;
            defunc_2_reduce_res_77221 = redout_77225;
            
            float x_77247 = defunc_2_reduce_res_77219 *
                  defunc_2_reduce_res_77221;
            float y_77248 = defunc_2_reduce_res_77220 *
                  defunc_2_reduce_res_77220;
            float y_77249 = x_77247 - y_77248;
            float det1_77250 = 1.0F / y_77249;
            float a11_77251 = defunc_2_reduce_res_77221 * det1_77250;
            float x_77252 = 0.0F - defunc_2_reduce_res_77220;
            float b11_77253 = det1_77250 * x_77252;
            float c11_77254 = defunc_2_reduce_res_77219 * det1_77250;
            float defunc_2_reduce_res_77255;
            float defunc_2_reduce_res_77256;
            float redout_77258;
            float redout_77259;
            
            redout_77258 = 0.0F;
            redout_77259 = 0.0F;
            for (int64_t i_77257 = 0; i_77257 < q_70235; i_77257++) {
                float x_77260 = ((float *) mem_75506)[i_77257];
                bool cond_77261 = sle64(last_res_70461, i_77257);
                int64_t defunc_0_f_res_77262;
                
                if (cond_77261) {
                    defunc_0_f_res_77262 = (int64_t) 0;
                } else {
                    int64_t i_77263 = add64(max_res_77199, i_77257);
                    int64_t defunc_0_add_arg_77264 =
                            ((int64_t *) mem_75464)[i_77263];
                    int64_t defunc_1_add_res_77265 = add64((int64_t) 1,
                                                           defunc_0_add_arg_77264);
                    
                    defunc_0_f_res_77262 = defunc_1_add_res_77265;
                }
                
                int64_t binop_p_77266 = sub64(defunc_0_f_res_77262,
                                              min_res_77134);
                float defunc_0_f_res_77267 = sitofp_i64_f32(binop_p_77266);
                float abs_res_77268 = (float) fabs(defunc_0_f_res_77267);
                float tmp1_77269 = abs_res_77268 / defunc_1_f_res_77218;
                float x_77270 = tmp1_77269 * tmp1_77269;
                float y_77271 = tmp1_77269 * x_77270;
                float tmp2_77272 = 1.0F - y_77271;
                float x_77273 = tmp2_77272 * tmp2_77272;
                float tmp3_77274 = tmp2_77272 * x_77273;
                float tmp4_77275 = x_77260 * tmp3_77274;
                float defunc_1_f_res_77276 = defunc_0_f_res_77267 * tmp4_77275;
                float defunc_0_f_res_77277;
                
                if (cond_77261) {
                    defunc_0_f_res_77277 = 0.0F;
                } else {
                    int64_t i_77278 = add64(max_res_77199, i_77257);
                    float defunc_0_add_arg_77279 =
                          ((float *) mem_75461)[i_77278];
                    
                    defunc_0_f_res_77277 = defunc_0_add_arg_77279;
                }
                
                float x_77280 = a11_77251 * tmp4_77275;
                float y_77281 = b11_77253 * defunc_1_f_res_77276;
                float x_77282 = x_77280 + y_77281;
                float defunc_9_fit_fun_res_77283 = defunc_0_f_res_77277 *
                      x_77282;
                float x_77284 = b11_77253 * tmp4_77275;
                float y_77285 = c11_77254 * defunc_1_f_res_77276;
                float x_77286 = x_77284 + y_77285;
                float defunc_9_slope_fun_res_77287 = defunc_0_f_res_77277 *
                      x_77286;
                float defunc_1_op_res_77288 = defunc_9_fit_fun_res_77283 +
                      redout_77258;
                float defunc_1_op_res_77289 = defunc_9_slope_fun_res_77287 +
                      redout_77259;
                float redout_tmp_77314 = defunc_1_op_res_77288;
                float redout_tmp_77315 = defunc_1_op_res_77289;
                
                redout_77258 = redout_tmp_77314;
                redout_77259 = redout_tmp_77315;
            }
            defunc_2_reduce_res_77255 = redout_77258;
            defunc_2_reduce_res_77256 = redout_77259;
            ((float *) mem_75521)[i_77130] = defunc_2_reduce_res_77255;
            ((float *) mem_75524)[i_77130] = defunc_2_reduce_res_77256;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75552.mem + gtid_72043 * n_m_70241 * (int64_t) 4,
                    mem_75521 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75556.mem + gtid_72043 * n_m_70241 * (int64_t) 4,
                    mem_75524 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75446);
    free(mem_75461);
    free(mem_75464);
    free(mem_75491);
    free(mem_75506);
    free(mem_75521);
    free(mem_75524);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81692_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81692_end -
                 futhark_mc_segmap_parloop_81692_start;
        
        ctx->futhark_mc_segmap_parloop_81692_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81692_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81692_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81690(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72042 = tid;
    int num_tasks_77097 = info.nsubtasks;
    struct futhark_mc_task_81689 *futhark_mc_task_81689 =
                                 (struct futhark_mc_task_81689 *) args;
    struct futhark_context *ctx = futhark_mc_task_81689->ctx;
    uint64_t futhark_mc_segmap_task_81690_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81690_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81689->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81689->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81689->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81689->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81689->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81689->free_i_70247;
    bool x_70248 = futhark_mc_task_81689->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81689->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81689->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81689->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81689->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75424 = futhark_mc_task_81689->free_bytes_75424;
    int64_t bytes_75427 = futhark_mc_task_81689->free_bytes_75427;
    int64_t bytes_75436 = futhark_mc_task_81689->free_bytes_75436;
    int64_t bytes_75439 = futhark_mc_task_81689->free_bytes_75439;
    struct memblock mem_75552 = {.desc ="mem_75552", .mem =
                                 futhark_mc_task_81689->free_mem_75552, .size =
                                 0, .references =NULL};
    struct memblock mem_75556 = {.desc ="mem_75556", .mem =
                                 futhark_mc_task_81689->free_mem_75556, .size =
                                 0, .references =NULL};
    int64_t iter_77098;
    struct futhark_mc_segmap_parloop_struct_81691
    futhark_mc_segmap_parloop_struct_81691;
    
    futhark_mc_segmap_parloop_struct_81691.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81691.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81691.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81691.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81691.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81691.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81691.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81691.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81691.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81691.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81691.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81691.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81691.free_bytes_75424 = bytes_75424;
    futhark_mc_segmap_parloop_struct_81691.free_bytes_75427 = bytes_75427;
    futhark_mc_segmap_parloop_struct_81691.free_bytes_75436 = bytes_75436;
    futhark_mc_segmap_parloop_struct_81691.free_bytes_75439 = bytes_75439;
    futhark_mc_segmap_parloop_struct_81691.free_mem_75552 = mem_75552.mem;
    futhark_mc_segmap_parloop_struct_81691.free_mem_75556 = mem_75556.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81692_task;
    
    futhark_mc_segmap_parloop_81692_task.name =
        "futhark_mc_segmap_parloop_81692";
    futhark_mc_segmap_parloop_81692_task.fn = futhark_mc_segmap_parloop_81692;
    futhark_mc_segmap_parloop_81692_task.args =
        &futhark_mc_segmap_parloop_struct_81691;
    futhark_mc_segmap_parloop_81692_task.iterations = iterations;
    futhark_mc_segmap_parloop_81692_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81692_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81692_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81692_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81692_task);
    
    if (futhark_mc_segmap_parloop_81692_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81692_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81692_total_end -
                 futhark_mc_segmap_parloop_81692_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81692_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81692_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81692_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81690_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81690_end -
                 futhark_mc_segmap_task_81690_start;
        
        ctx->futhark_mc_segmap_task_81690_runs[tid]++;
        ctx->futhark_mc_segmap_task_81690_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81690_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81701 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75424;
    int64_t free_bytes_75427;
    int64_t free_bytes_75436;
    int64_t free_bytes_75439;
    unsigned char *free_mem_75552;
    unsigned char *free_mem_75556;
};
struct futhark_mc_task_81710 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72045;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75425;
};
struct futhark_mc_scan_stage_1_parloop_struct_81713 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72045;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75425;
};
static int futhark_mc_scan_stage_1_parloop_81714(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72046, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81713
    *futhark_mc_scan_stage_1_parloop_struct_81713 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81713 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81713->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81714_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81714_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81713->free_n_70233;
    int64_t gtid_72045 =
            futhark_mc_scan_stage_1_parloop_struct_81713->free_gtid_72045;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81713->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75425 = {.desc ="mem_75425", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81713->free_mem_75425,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77654 = start;
    int64_t x_77317;
    int64_t x_77318;
    
    x_77317 = (int64_t) 0;
    for (; iter_77654 < end; iter_77654++) {
        int64_t gtid_72047 = iter_77654;
        
        // stage 1 scan body
        {
            float x_77320 = ((float *) Y_mem_75306.mem)[gtid_72045 * n_70233 +
                                                        gtid_72047];
            bool isnan_res_77321;
            
            isnan_res_77321 = futrts_isnan32(x_77320);
            
            bool defunc_0_p_res_77322 = !isnan_res_77321;
            int64_t defunc_0_f_res_77323 = btoi_bool_i64(defunc_0_p_res_77322);
            
            // write mapped values results to memory
            { }
            x_77317 = x_77317;
            // Read next values
            {
                x_77318 = defunc_0_f_res_77323;
            }
            
            int64_t defunc_1_op_res_77319 = add64(x_77317, x_77318);
            
            ((int64_t *) mem_75425.mem)[gtid_72047] = defunc_1_op_res_77319;
            x_77317 = defunc_1_op_res_77319;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81714_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81714_end -
                 futhark_mc_scan_stage_1_parloop_81714_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81714_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81714_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81714_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81715 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72045;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75425;
};
static int futhark_mc_scan_stage_3_parloop_81716(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72046, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81715
    *futhark_mc_scan_stage_3_parloop_struct_81715 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81715 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81715->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81716_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81716_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81715->free_n_70233;
    int64_t gtid_72045 =
            futhark_mc_scan_stage_3_parloop_struct_81715->free_gtid_72045;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81715->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75425 = {.desc ="mem_75425", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81715->free_mem_75425,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77666 = start;
    int64_t x_77663;
    int64_t x_77664;
    
    if (iter_77666 == (int64_t) 0) {
        x_77663 = (int64_t) 0;
    } else {
        x_77663 = ((int64_t *) mem_75425.mem)[iter_77666 - (int64_t) 1];
    }
    for (; iter_77666 < end; iter_77666++) {
        int64_t gtid_72047 = iter_77666;
        
        // stage 3 scan body
        {
            float x_77320 = ((float *) Y_mem_75306.mem)[gtid_72045 * n_70233 +
                                                        gtid_72047];
            bool isnan_res_77321;
            
            isnan_res_77321 = futrts_isnan32(x_77320);
            
            bool defunc_0_p_res_77322 = !isnan_res_77321;
            int64_t defunc_0_f_res_77323 = btoi_bool_i64(defunc_0_p_res_77322);
            
            x_77663 = x_77663;
            x_77664 = defunc_0_f_res_77323;
            
            int64_t defunc_1_op_res_77665 = add64(x_77663, x_77664);
            
            ((int64_t *) mem_75425.mem)[gtid_72047] = defunc_1_op_res_77665;
            x_77663 = defunc_1_op_res_77665;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81716_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81716_end -
                 futhark_mc_scan_stage_3_parloop_81716_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81716_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81716_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81716_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81711(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72046 = tid;
    int num_tasks_77653 = info.nsubtasks;
    struct futhark_mc_task_81710 *futhark_mc_task_81710 =
                                 (struct futhark_mc_task_81710 *) args;
    struct futhark_context *ctx = futhark_mc_task_81710->ctx;
    uint64_t futhark_mc_segscan_task_81711_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81711_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81710->free_n_70233;
    int64_t gtid_72045 = futhark_mc_task_81710->free_gtid_72045;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81710->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75425 = {.desc ="mem_75425", .mem =
                                 futhark_mc_task_81710->free_mem_75425, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_77660_cached_sizze_81712 = 0;
    unsigned char *scan_stage_2_accum_mem_77660 = NULL;
    int64_t iter_77654;
    struct futhark_mc_scan_stage_1_parloop_struct_81713
    futhark_mc_scan_stage_1_parloop_struct_81713;
    
    futhark_mc_scan_stage_1_parloop_struct_81713.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81713.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81713.free_gtid_72045 = gtid_72045;
    futhark_mc_scan_stage_1_parloop_struct_81713.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81713.free_mem_75425 = mem_75425.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81714_task;
    
    futhark_mc_scan_stage_1_parloop_81714_task.name =
        "futhark_mc_scan_stage_1_parloop_81714";
    futhark_mc_scan_stage_1_parloop_81714_task.fn =
        futhark_mc_scan_stage_1_parloop_81714;
    futhark_mc_scan_stage_1_parloop_81714_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81713;
    futhark_mc_scan_stage_1_parloop_81714_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81714_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81714_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81714_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81714_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81714_task);
    
    if (futhark_mc_scan_stage_1_parloop_81714_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81714_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81714_total_end -
                 futhark_mc_scan_stage_1_parloop_81714_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81714_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81714_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81714_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_77653)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_77655;
        int64_t x_77656;
        int64_t offset_77658 = (int64_t) 0;
        int64_t offset_index_77659 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_77660_cached_sizze_81712 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_77660 = realloc(scan_stage_2_accum_mem_77660,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_77660_cached_sizze_81712 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_77660)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_77662 = 0; i_77662 < num_tasks_77653 - 1; i_77662++) {
            offset_77658 = squot64(n_70233, sext_i32_i64(num_tasks_77653));
            if (slt64(sext_i32_i64(i_77662), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_77653)))) {
                offset_77658 += (int64_t) 1;
            }
            offset_index_77659 += offset_77658;
            
            int64_t gtid_72047 = offset_index_77659;
            float x_77320 = ((float *) Y_mem_75306.mem)[gtid_72045 * n_70233 +
                                                        gtid_72047];
            bool isnan_res_77321;
            
            isnan_res_77321 = futrts_isnan32(x_77320);
            
            bool defunc_0_p_res_77322 = !isnan_res_77321;
            int64_t defunc_0_f_res_77323 = btoi_bool_i64(defunc_0_p_res_77322);
            
            // Read carry in
            {
                x_77655 =
                    ((int64_t *) scan_stage_2_accum_mem_77660)[(int64_t) 0];
            }
            // Read next values
            {
                x_77656 = ((int64_t *) mem_75425.mem)[offset_index_77659 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_77657 = add64(x_77655, x_77656);
            
            ((int64_t *) mem_75425.mem)[offset_index_77659 - (int64_t) 1] =
                defunc_1_op_res_77657;
            ((int64_t *) scan_stage_2_accum_mem_77660)[(int64_t) 0] =
                defunc_1_op_res_77657;
        }
        
        int64_t iter_77666 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81715
        futhark_mc_scan_stage_3_parloop_struct_81715;
        
        futhark_mc_scan_stage_3_parloop_struct_81715.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81715.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81715.free_gtid_72045 =
            gtid_72045;
        futhark_mc_scan_stage_3_parloop_struct_81715.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81715.free_mem_75425 =
            mem_75425.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81716_task;
        
        futhark_mc_scan_stage_3_parloop_81716_task.name =
            "futhark_mc_scan_stage_3_parloop_81716";
        futhark_mc_scan_stage_3_parloop_81716_task.fn =
            futhark_mc_scan_stage_3_parloop_81716;
        futhark_mc_scan_stage_3_parloop_81716_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81715;
        futhark_mc_scan_stage_3_parloop_81716_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81716_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81716_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81716_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81716_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81716_task);
        
        if (futhark_mc_scan_stage_3_parloop_81716_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81716_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81716_total_end -
                     futhark_mc_scan_stage_3_parloop_81716_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81716_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81716_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81716_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_77660);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81711_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81711_end -
                 futhark_mc_segscan_task_81711_start;
        
        ctx->futhark_mc_segscan_task_81711_runs[tid]++;
        ctx->futhark_mc_segscan_task_81711_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81711_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81717 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72045;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75425;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
};
struct futhark_mc_segmap_parloop_struct_81719 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72045;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75425;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
};
static int futhark_mc_segmap_parloop_81720(void *args, int64_t start,
                                           int64_t end, int flat_tid_72048,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81719
    *futhark_mc_segmap_parloop_struct_81719 =
    (struct futhark_mc_segmap_parloop_struct_81719 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81719->ctx;
    uint64_t futhark_mc_segmap_parloop_81720_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81720_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81719->free_n_70233;
    int64_t gtid_72045 =
            futhark_mc_segmap_parloop_struct_81719->free_gtid_72045;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81719->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75425 = {.desc ="mem_75425", .mem =
                                 futhark_mc_segmap_parloop_struct_81719->free_mem_75425,
                                 .size =0, .references =NULL};
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_segmap_parloop_struct_81719->free_mem_75428,
                                 .size =0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segmap_parloop_struct_81719->free_mem_75431,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77670 = start;
    
    for (; iter_77670 < end; iter_77670++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77673 = n_70233;
        int64_t gtid_72049 = iter_77670;
        int64_t remnant_77674 = iter_77670 - gtid_72049;
        float x_77324 = ((float *) Y_mem_75306.mem)[gtid_72045 * n_70233 +
                                                    gtid_72049];
        bool isnan_res_77325;
        
        isnan_res_77325 = futrts_isnan32(x_77324);
        
        bool defunc_0_p_res_77326 = !isnan_res_77325;
        int64_t defunc_1_f_res_77327;
        
        if (defunc_0_p_res_77326) {
            int64_t x_77671 = ((int64_t *) mem_75425.mem)[gtid_72049];
            int64_t defunc_1_f_res_t_res_77672 = sub64(x_77671, (int64_t) 1);
            
            defunc_1_f_res_77327 = defunc_1_f_res_t_res_77672;
        } else {
            defunc_1_f_res_77327 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_77327) &&
            slt64(defunc_1_f_res_77327, n_70233)) {
            ((int64_t *) mem_75431.mem)[defunc_1_f_res_77327] = gtid_72049;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_77327) &&
            slt64(defunc_1_f_res_77327, n_70233)) {
            ((float *) mem_75428.mem)[defunc_1_f_res_77327] = x_77324;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81720_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81720_end -
                 futhark_mc_segmap_parloop_81720_start;
        
        ctx->futhark_mc_segmap_parloop_81720_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81720_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81720_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81718(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72048 = tid;
    int num_tasks_77669 = info.nsubtasks;
    struct futhark_mc_task_81717 *futhark_mc_task_81717 =
                                 (struct futhark_mc_task_81717 *) args;
    struct futhark_context *ctx = futhark_mc_task_81717->ctx;
    uint64_t futhark_mc_segmap_task_81718_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81718_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81717->free_n_70233;
    int64_t gtid_72045 = futhark_mc_task_81717->free_gtid_72045;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81717->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75425 = {.desc ="mem_75425", .mem =
                                 futhark_mc_task_81717->free_mem_75425, .size =
                                 0, .references =NULL};
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_task_81717->free_mem_75428, .size =
                                 0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81717->free_mem_75431, .size =
                                 0, .references =NULL};
    int64_t iter_77670;
    struct futhark_mc_segmap_parloop_struct_81719
    futhark_mc_segmap_parloop_struct_81719;
    
    futhark_mc_segmap_parloop_struct_81719.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81719.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81719.free_gtid_72045 = gtid_72045;
    futhark_mc_segmap_parloop_struct_81719.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81719.free_mem_75425 = mem_75425.mem;
    futhark_mc_segmap_parloop_struct_81719.free_mem_75428 = mem_75428.mem;
    futhark_mc_segmap_parloop_struct_81719.free_mem_75431 = mem_75431.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81720_task;
    
    futhark_mc_segmap_parloop_81720_task.name =
        "futhark_mc_segmap_parloop_81720";
    futhark_mc_segmap_parloop_81720_task.fn = futhark_mc_segmap_parloop_81720;
    futhark_mc_segmap_parloop_81720_task.args =
        &futhark_mc_segmap_parloop_struct_81719;
    futhark_mc_segmap_parloop_81720_task.iterations = iterations;
    futhark_mc_segmap_parloop_81720_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81720_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81720_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81720_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81720_task);
    
    if (futhark_mc_segmap_parloop_81720_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81720_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81720_total_end -
                 futhark_mc_segmap_parloop_81720_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81720_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81720_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81720_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81718_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81718_end -
                 futhark_mc_segmap_task_81718_start;
        
        ctx->futhark_mc_segmap_task_81718_runs[tid]++;
        ctx->futhark_mc_segmap_task_81718_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81718_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81721 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75434;
};
struct futhark_mc_segmap_parloop_struct_81723 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75434;
};
static int futhark_mc_segmap_parloop_81724(void *args, int64_t start,
                                           int64_t end, int flat_tid_72050,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81723
    *futhark_mc_segmap_parloop_struct_81723 =
    (struct futhark_mc_segmap_parloop_struct_81723 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81723->ctx;
    uint64_t futhark_mc_segmap_parloop_81724_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81724_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81723->free_n_70233;
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segmap_parloop_struct_81723->free_mem_75431,
                                 .size =0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_segmap_parloop_struct_81723->free_mem_75434,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77676 = start;
    
    for (; iter_77676 < end; iter_77676++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77677 = n_70233;
        int64_t gtid_72051 = iter_77676;
        int64_t remnant_77678 = iter_77676 - gtid_72051;
        int64_t x_77330 = ((int64_t *) mem_75431.mem)[gtid_72051];
        int64_t defunc_0_f_res_77331 = add64((int64_t) 1, x_77330);
        
        ((int64_t *) mem_75434.mem)[gtid_72051] = defunc_0_f_res_77331;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81724_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81724_end -
                 futhark_mc_segmap_parloop_81724_start;
        
        ctx->futhark_mc_segmap_parloop_81724_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81724_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81724_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81722(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72050 = tid;
    int num_tasks_77675 = info.nsubtasks;
    struct futhark_mc_task_81721 *futhark_mc_task_81721 =
                                 (struct futhark_mc_task_81721 *) args;
    struct futhark_context *ctx = futhark_mc_task_81721->ctx;
    uint64_t futhark_mc_segmap_task_81722_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81722_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81721->free_n_70233;
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81721->free_mem_75431, .size =
                                 0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_task_81721->free_mem_75434, .size =
                                 0, .references =NULL};
    int64_t iter_77676;
    struct futhark_mc_segmap_parloop_struct_81723
    futhark_mc_segmap_parloop_struct_81723;
    
    futhark_mc_segmap_parloop_struct_81723.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81723.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81723.free_mem_75431 = mem_75431.mem;
    futhark_mc_segmap_parloop_struct_81723.free_mem_75434 = mem_75434.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81724_task;
    
    futhark_mc_segmap_parloop_81724_task.name =
        "futhark_mc_segmap_parloop_81724";
    futhark_mc_segmap_parloop_81724_task.fn = futhark_mc_segmap_parloop_81724;
    futhark_mc_segmap_parloop_81724_task.args =
        &futhark_mc_segmap_parloop_struct_81723;
    futhark_mc_segmap_parloop_81724_task.iterations = iterations;
    futhark_mc_segmap_parloop_81724_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81724_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81724_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81724_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81724_task);
    
    if (futhark_mc_segmap_parloop_81724_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81724_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81724_total_end -
                 futhark_mc_segmap_parloop_81724_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81724_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81724_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81724_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81722_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81722_end -
                 futhark_mc_segmap_task_81722_start;
        
        ctx->futhark_mc_segmap_task_81722_runs[tid]++;
        ctx->futhark_mc_segmap_task_81722_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81722_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81725 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75437;
};
struct futhark_mc_segmap_parloop_struct_81727 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75437;
};
static int futhark_mc_segmap_parloop_81728(void *args, int64_t start,
                                           int64_t end, int flat_tid_72052,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81727
    *futhark_mc_segmap_parloop_struct_81727 =
    (struct futhark_mc_segmap_parloop_struct_81727 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81727->ctx;
    uint64_t futhark_mc_segmap_parloop_81728_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81728_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81727->free_q_70235;
    int64_t last_res_72234 =
            futhark_mc_segmap_parloop_struct_81727->free_last_res_72234;
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_segmap_parloop_struct_81727->free_mem_75437,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77680 = start;
    
    for (; iter_77680 < end; iter_77680++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77681 = q_70235;
        int64_t gtid_72053 = iter_77680;
        int64_t remnant_77682 = iter_77680 - gtid_72053;
        bool cond_77332 = sle64(last_res_72234, gtid_72053);
        float defunc_0_f_res_77333;
        
        if (cond_77332) {
            defunc_0_f_res_77333 = 0.0F;
        } else {
            defunc_0_f_res_77333 = 1.0F;
        }
        ((float *) mem_75437.mem)[gtid_72053] = defunc_0_f_res_77333;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81728_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81728_end -
                 futhark_mc_segmap_parloop_81728_start;
        
        ctx->futhark_mc_segmap_parloop_81728_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81728_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81728_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81726(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72052 = tid;
    int num_tasks_77679 = info.nsubtasks;
    struct futhark_mc_task_81725 *futhark_mc_task_81725 =
                                 (struct futhark_mc_task_81725 *) args;
    struct futhark_context *ctx = futhark_mc_task_81725->ctx;
    uint64_t futhark_mc_segmap_task_81726_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81726_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81725->free_q_70235;
    int64_t last_res_72234 = futhark_mc_task_81725->free_last_res_72234;
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_task_81725->free_mem_75437, .size =
                                 0, .references =NULL};
    int64_t iter_77680;
    struct futhark_mc_segmap_parloop_struct_81727
    futhark_mc_segmap_parloop_struct_81727;
    
    futhark_mc_segmap_parloop_struct_81727.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81727.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81727.free_last_res_72234 = last_res_72234;
    futhark_mc_segmap_parloop_struct_81727.free_mem_75437 = mem_75437.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81728_task;
    
    futhark_mc_segmap_parloop_81728_task.name =
        "futhark_mc_segmap_parloop_81728";
    futhark_mc_segmap_parloop_81728_task.fn = futhark_mc_segmap_parloop_81728;
    futhark_mc_segmap_parloop_81728_task.args =
        &futhark_mc_segmap_parloop_struct_81727;
    futhark_mc_segmap_parloop_81728_task.iterations = iterations;
    futhark_mc_segmap_parloop_81728_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81728_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81728_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81728_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81728_task);
    
    if (futhark_mc_segmap_parloop_81728_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81728_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81728_total_end -
                 futhark_mc_segmap_parloop_81728_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81728_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81728_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81728_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81726_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81726_end -
                 futhark_mc_segmap_task_81726_start;
        
        ctx->futhark_mc_segmap_task_81726_runs[tid]++;
        ctx->futhark_mc_segmap_task_81726_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81726_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81729 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72234;
    int64_t free_min_arg_72249;
    int64_t free_min_arg_72250;
    int64_t free_min_res_72251;
    float free_max_res_72255;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75434;
    unsigned char *free_mem_75437;
    unsigned char *free_mem_75440;
    unsigned char *free_mem_75443;
};
struct futhark_mc_segmap_parloop_struct_81731 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72234;
    int64_t free_min_arg_72249;
    int64_t free_min_arg_72250;
    int64_t free_min_res_72251;
    float free_max_res_72255;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75434;
    unsigned char *free_mem_75437;
    unsigned char *free_mem_75440;
    unsigned char *free_mem_75443;
};
static int futhark_mc_segmap_parloop_81732(void *args, int64_t start,
                                           int64_t end, int flat_tid_72054,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81731
    *futhark_mc_segmap_parloop_struct_81731 =
    (struct futhark_mc_segmap_parloop_struct_81731 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81731->ctx;
    uint64_t futhark_mc_segmap_parloop_81732_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81732_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81731->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81731->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81731->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81731->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81731->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81731->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81731->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81731->free_loop_cond_70258;
    int64_t last_res_72234 =
            futhark_mc_segmap_parloop_struct_81731->free_last_res_72234;
    int64_t min_arg_72249 =
            futhark_mc_segmap_parloop_struct_81731->free_min_arg_72249;
    int64_t min_arg_72250 =
            futhark_mc_segmap_parloop_struct_81731->free_min_arg_72250;
    int64_t min_res_72251 =
            futhark_mc_segmap_parloop_struct_81731->free_min_res_72251;
    float max_res_72255 =
          futhark_mc_segmap_parloop_struct_81731->free_max_res_72255;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75428,
                                 .size =0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75431,
                                 .size =0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75434,
                                 .size =0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75437,
                                 .size =0, .references =NULL};
    struct memblock mem_75440 = {.desc ="mem_75440", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75440,
                                 .size =0, .references =NULL};
    struct memblock mem_75443 = {.desc ="mem_75443", .mem =
                                 futhark_mc_segmap_parloop_struct_81731->free_mem_75443,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77684 = start;
    
    for (; iter_77684 < end; iter_77684++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77798 = n_m_70241;
        int64_t gtid_72055 = iter_77684;
        int64_t remnant_77799 = iter_77684 - gtid_72055;
        int64_t min_arg_77494 = mul64(jump_70237, gtid_72055);
        int64_t min_res_77495 = smin64(i_70247, min_arg_77494);
        int64_t defunc_0_g_res_77496 = add64((int64_t) 1, min_res_77495);
        bool init_idx_77497;
        int64_t init_idx_77498;
        int64_t init_idx_77499;
        bool loop_while_77685;
        int64_t low_77686;
        int64_t high_77687;
        
        loop_while_77685 = x_70248;
        low_77686 = (int64_t) 0;
        high_77687 = i_70247;
        while (loop_while_77685) {
            int64_t x_77688 = add64(low_77686, high_77687);
            int64_t mid_77689 = sdiv64(x_77688, (int64_t) 2);
            bool x_77690 = sle64((int64_t) 0, mid_77689);
            bool y_77691 = slt64(mid_77689, n_70233);
            bool bounds_check_77692 = x_77690 && y_77691;
            bool index_certs_77693;
            
            if (!bounds_check_77692) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_77689,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_77694 = ((int64_t *) mem_75434.mem)[mid_77689];
            bool cond_77695 = slt64(mid_id_77694, (int64_t) 0);
            int64_t mid_idx_77696;
            
            if (cond_77695) {
                mid_idx_77696 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_77696 = mid_id_77694;
            }
            
            bool cond_77697 = sle64(defunc_0_g_res_77496, mid_idx_77696);
            int64_t loopres_77698;
            int64_t loopres_77699;
            
            if (cond_77697) {
                int64_t loopres_t_res_77700 = sub64(mid_77689, (int64_t) 1);
                
                loopres_77698 = low_77686;
                loopres_77699 = loopres_t_res_77700;
            } else {
                int64_t loopres_f_res_77701 = add64((int64_t) 1, mid_77689);
                
                loopres_77698 = loopres_f_res_77701;
                loopres_77699 = high_77687;
            }
            
            bool loop_cond_77702 = sle64(loopres_77698, loopres_77699);
            bool loop_while_tmp_77800 = loop_cond_77702;
            int64_t low_tmp_77801 = loopres_77698;
            int64_t high_tmp_77802 = loopres_77699;
            
            loop_while_77685 = loop_while_tmp_77800;
            low_77686 = low_tmp_77801;
            high_77687 = high_tmp_77802;
        }
        init_idx_77497 = loop_while_77685;
        init_idx_77498 = low_77686;
        init_idx_77499 = high_77687;
        
        bool idx_77518;
        int64_t idx_77519;
        int64_t idx_77520;
        int64_t idx_77521;
        bool loop_while_77703;
        int64_t l_idx_77704;
        int64_t r_idx_77705;
        int64_t span_77706;
        
        loop_while_77703 = loop_cond_70258;
        l_idx_77704 = init_idx_77498;
        r_idx_77705 = init_idx_77498;
        span_77706 = (int64_t) 1;
        while (loop_while_77703) {
            int64_t max_arg_77707 = sub64(l_idx_77704, (int64_t) 1);
            int64_t max_res_77708 = smax64((int64_t) 0, max_arg_77707);
            int64_t min_arg_77709 = add64((int64_t) 1, r_idx_77705);
            int64_t min_res_77710 = smin64(min_arg_72249, min_arg_77709);
            bool x_77711 = sle64((int64_t) 0, max_res_77708);
            bool y_77712 = slt64(max_res_77708, n_70233);
            bool bounds_check_77713 = x_77711 && y_77712;
            bool index_certs_77714;
            
            if (!bounds_check_77713) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77708,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77715 = ((int64_t *) mem_75434.mem)[max_res_77708];
            int64_t abs_arg_77716 = sub64(x_77715, defunc_0_g_res_77496);
            int64_t abs_res_77717 = abs64(abs_arg_77716);
            bool x_77718 = sle64((int64_t) 0, min_res_77710);
            bool y_77719 = slt64(min_res_77710, n_70233);
            bool bounds_check_77720 = x_77718 && y_77719;
            bool index_certs_77721;
            
            if (!bounds_check_77720) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_77710,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77722 = ((int64_t *) mem_75434.mem)[min_res_77710];
            int64_t abs_arg_77723 = sub64(x_77722, defunc_0_g_res_77496);
            int64_t abs_res_77724 = abs64(abs_arg_77723);
            bool cond_77725 = max_res_77708 == l_idx_77704;
            int64_t loopres_77726;
            int64_t loopres_77727;
            int64_t loopres_77728;
            
            if (cond_77725) {
                loopres_77726 = l_idx_77704;
                loopres_77727 = r_idx_77705;
                loopres_77728 = min_res_70253;
            } else {
                bool cond_77729 = slt64(abs_res_77717, abs_res_77724);
                bool cond_f_res_77730 = min_res_77710 == r_idx_77705;
                bool x_77731 = !cond_77729;
                bool y_77732 = cond_f_res_77730 && x_77731;
                bool cond_77733 = cond_77729 || y_77732;
                int64_t loopres_f_res_77734;
                
                if (cond_77733) {
                    loopres_f_res_77734 = max_res_77708;
                } else {
                    loopres_f_res_77734 = l_idx_77704;
                }
                
                int64_t loopres_f_res_77735;
                
                if (cond_77733) {
                    loopres_f_res_77735 = r_idx_77705;
                } else {
                    loopres_f_res_77735 = min_res_77710;
                }
                
                int64_t loopres_f_res_77736;
                
                if (cond_77733) {
                    int64_t loopres_f_res_t_res_77737 = add64((int64_t) 1,
                                                              span_77706);
                    
                    loopres_f_res_77736 = loopres_f_res_t_res_77737;
                } else {
                    int64_t loopres_f_res_f_res_77738 = add64((int64_t) 1,
                                                              span_77706);
                    
                    loopres_f_res_77736 = loopres_f_res_f_res_77738;
                }
                loopres_77726 = loopres_f_res_77734;
                loopres_77727 = loopres_f_res_77735;
                loopres_77728 = loopres_f_res_77736;
            }
            
            bool loop_cond_77739 = slt64(loopres_77728, min_res_70253);
            bool loop_while_tmp_77803 = loop_cond_77739;
            int64_t l_idx_tmp_77804 = loopres_77726;
            int64_t r_idx_tmp_77805 = loopres_77727;
            int64_t span_tmp_77806 = loopres_77728;
            
            loop_while_77703 = loop_while_tmp_77803;
            l_idx_77704 = l_idx_tmp_77804;
            r_idx_77705 = r_idx_tmp_77805;
            span_77706 = span_tmp_77806;
        }
        idx_77518 = loop_while_77703;
        idx_77519 = l_idx_77704;
        idx_77520 = r_idx_77705;
        idx_77521 = span_77706;
        
        int64_t min_res_77559 = smin64(min_arg_72250, idx_77519);
        int64_t max_res_77560 = smax64((int64_t) 0, min_res_77559);
        int64_t x_77561 = add64(min_res_72251, max_res_77560);
        int64_t r_77562 = sub64(x_77561, (int64_t) 1);
        bool x_77563 = sle64((int64_t) 0, r_77562);
        bool y_77564 = slt64(r_77562, n_70233);
        bool bounds_check_77565 = x_77563 && y_77564;
        bool index_certs_77566;
        
        if (!bounds_check_77565) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_77562,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_77567 = ((int64_t *) mem_75431.mem)[r_77562];
        int64_t abs_arg_77568 = sub64(x_77567, min_res_77495);
        int64_t abs_res_77569 = abs64(abs_arg_77568);
        bool x_77570 = sle64((int64_t) 0, max_res_77560);
        bool y_77571 = slt64(max_res_77560, n_70233);
        bool bounds_check_77572 = x_77570 && y_77571;
        bool index_certs_77573;
        
        if (!bounds_check_77572) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_77560,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_77574 = ((int64_t *) mem_75431.mem)[max_res_77560];
        int64_t abs_arg_77575 = sub64(x_77574, min_res_77495);
        int64_t abs_res_77576 = abs64(abs_arg_77575);
        int64_t max_res_77577 = smax64(abs_res_77569, abs_res_77576);
        float defunc_0_f_res_77578 = sitofp_i64_f32(max_res_77577);
        float defunc_1_f_res_77579 = max_res_72255 + defunc_0_f_res_77578;
        float defunc_2_reduce_res_77580;
        float defunc_2_reduce_res_77581;
        float defunc_2_reduce_res_77582;
        float redout_77741;
        float redout_77742;
        float redout_77743;
        
        redout_77741 = 0.0F;
        redout_77742 = 0.0F;
        redout_77743 = 0.0F;
        for (int64_t i_77740 = 0; i_77740 < q_70235; i_77740++) {
            float x_77744 = ((float *) mem_75437.mem)[i_77740];
            bool cond_77745 = sle64(last_res_72234, i_77740);
            int64_t defunc_0_f_res_77746;
            
            if (cond_77745) {
                defunc_0_f_res_77746 = (int64_t) 0;
            } else {
                int64_t i_77747 = add64(max_res_77560, i_77740);
                int64_t defunc_0_add_arg_77748 =
                        ((int64_t *) mem_75431.mem)[i_77747];
                int64_t defunc_1_add_res_77749 = add64((int64_t) 1,
                                                       defunc_0_add_arg_77748);
                
                defunc_0_f_res_77746 = defunc_1_add_res_77749;
            }
            
            int64_t binop_p_77750 = sub64(defunc_0_f_res_77746, min_res_77495);
            float defunc_0_f_res_77751 = sitofp_i64_f32(binop_p_77750);
            float abs_res_77752 = (float) fabs(defunc_0_f_res_77751);
            float tmp1_77753 = abs_res_77752 / defunc_1_f_res_77579;
            float x_77754 = tmp1_77753 * tmp1_77753;
            float y_77755 = tmp1_77753 * x_77754;
            float tmp2_77756 = 1.0F - y_77755;
            float x_77757 = tmp2_77756 * tmp2_77756;
            float tmp3_77758 = tmp2_77756 * x_77757;
            float w_j_77759 = x_77744 * tmp3_77758;
            float xw_j_77760 = defunc_0_f_res_77751 * w_j_77759;
            float x2w_j_77761 = defunc_0_f_res_77751 * xw_j_77760;
            float defunc_1_op_res_77762 = w_j_77759 + redout_77741;
            float defunc_1_op_res_77763 = xw_j_77760 + redout_77742;
            float defunc_1_op_res_77764 = x2w_j_77761 + redout_77743;
            float redout_tmp_77807 = defunc_1_op_res_77762;
            float redout_tmp_77808 = defunc_1_op_res_77763;
            float redout_tmp_77809 = defunc_1_op_res_77764;
            
            redout_77741 = redout_tmp_77807;
            redout_77742 = redout_tmp_77808;
            redout_77743 = redout_tmp_77809;
        }
        defunc_2_reduce_res_77580 = redout_77741;
        defunc_2_reduce_res_77581 = redout_77742;
        defunc_2_reduce_res_77582 = redout_77743;
        
        float x_77608 = defunc_2_reduce_res_77580 * defunc_2_reduce_res_77582;
        float y_77609 = defunc_2_reduce_res_77581 * defunc_2_reduce_res_77581;
        float y_77610 = x_77608 - y_77609;
        float det1_77611 = 1.0F / y_77610;
        float a11_77612 = defunc_2_reduce_res_77582 * det1_77611;
        float x_77613 = 0.0F - defunc_2_reduce_res_77581;
        float b11_77614 = det1_77611 * x_77613;
        float c11_77615 = defunc_2_reduce_res_77580 * det1_77611;
        float defunc_2_reduce_res_77616;
        float defunc_2_reduce_res_77617;
        float redout_77766;
        float redout_77767;
        
        redout_77766 = 0.0F;
        redout_77767 = 0.0F;
        for (int64_t i_77765 = 0; i_77765 < q_70235; i_77765++) {
            float x_77768 = ((float *) mem_75437.mem)[i_77765];
            bool cond_77769 = sle64(last_res_72234, i_77765);
            int64_t defunc_0_f_res_77770;
            
            if (cond_77769) {
                defunc_0_f_res_77770 = (int64_t) 0;
            } else {
                int64_t i_77771 = add64(max_res_77560, i_77765);
                int64_t defunc_0_add_arg_77772 =
                        ((int64_t *) mem_75431.mem)[i_77771];
                int64_t defunc_1_add_res_77773 = add64((int64_t) 1,
                                                       defunc_0_add_arg_77772);
                
                defunc_0_f_res_77770 = defunc_1_add_res_77773;
            }
            
            int64_t binop_p_77774 = sub64(defunc_0_f_res_77770, min_res_77495);
            float defunc_0_f_res_77775 = sitofp_i64_f32(binop_p_77774);
            float abs_res_77776 = (float) fabs(defunc_0_f_res_77775);
            float tmp1_77777 = abs_res_77776 / defunc_1_f_res_77579;
            float x_77778 = tmp1_77777 * tmp1_77777;
            float y_77779 = tmp1_77777 * x_77778;
            float tmp2_77780 = 1.0F - y_77779;
            float x_77781 = tmp2_77780 * tmp2_77780;
            float tmp3_77782 = tmp2_77780 * x_77781;
            float tmp4_77783 = x_77768 * tmp3_77782;
            float defunc_1_f_res_77784 = defunc_0_f_res_77775 * tmp4_77783;
            float defunc_0_f_res_77785;
            
            if (cond_77769) {
                defunc_0_f_res_77785 = 0.0F;
            } else {
                int64_t i_77786 = add64(max_res_77560, i_77765);
                float defunc_0_add_arg_77787 =
                      ((float *) mem_75428.mem)[i_77786];
                
                defunc_0_f_res_77785 = defunc_0_add_arg_77787;
            }
            
            float x_77788 = a11_77612 * tmp4_77783;
            float y_77789 = b11_77614 * defunc_1_f_res_77784;
            float x_77790 = x_77788 + y_77789;
            float defunc_9_fit_fun_res_77791 = defunc_0_f_res_77785 * x_77790;
            float x_77792 = b11_77614 * tmp4_77783;
            float y_77793 = c11_77615 * defunc_1_f_res_77784;
            float x_77794 = x_77792 + y_77793;
            float defunc_9_slope_fun_res_77795 = defunc_0_f_res_77785 * x_77794;
            float defunc_1_op_res_77796 = defunc_9_fit_fun_res_77791 +
                  redout_77766;
            float defunc_1_op_res_77797 = defunc_9_slope_fun_res_77795 +
                  redout_77767;
            float redout_tmp_77810 = defunc_1_op_res_77796;
            float redout_tmp_77811 = defunc_1_op_res_77797;
            
            redout_77766 = redout_tmp_77810;
            redout_77767 = redout_tmp_77811;
        }
        defunc_2_reduce_res_77616 = redout_77766;
        defunc_2_reduce_res_77617 = redout_77767;
        ((float *) mem_75440.mem)[gtid_72055] = defunc_2_reduce_res_77616;
        ((float *) mem_75443.mem)[gtid_72055] = defunc_2_reduce_res_77617;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81732_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81732_end -
                 futhark_mc_segmap_parloop_81732_start;
        
        ctx->futhark_mc_segmap_parloop_81732_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81732_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81732_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81730(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72054 = tid;
    int num_tasks_77683 = info.nsubtasks;
    struct futhark_mc_task_81729 *futhark_mc_task_81729 =
                                 (struct futhark_mc_task_81729 *) args;
    struct futhark_context *ctx = futhark_mc_task_81729->ctx;
    uint64_t futhark_mc_segmap_task_81730_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81730_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81729->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81729->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81729->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81729->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81729->free_i_70247;
    bool x_70248 = futhark_mc_task_81729->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81729->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81729->free_loop_cond_70258;
    int64_t last_res_72234 = futhark_mc_task_81729->free_last_res_72234;
    int64_t min_arg_72249 = futhark_mc_task_81729->free_min_arg_72249;
    int64_t min_arg_72250 = futhark_mc_task_81729->free_min_arg_72250;
    int64_t min_res_72251 = futhark_mc_task_81729->free_min_res_72251;
    float max_res_72255 = futhark_mc_task_81729->free_max_res_72255;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_task_81729->free_mem_75428, .size =
                                 0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81729->free_mem_75431, .size =
                                 0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_task_81729->free_mem_75434, .size =
                                 0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_task_81729->free_mem_75437, .size =
                                 0, .references =NULL};
    struct memblock mem_75440 = {.desc ="mem_75440", .mem =
                                 futhark_mc_task_81729->free_mem_75440, .size =
                                 0, .references =NULL};
    struct memblock mem_75443 = {.desc ="mem_75443", .mem =
                                 futhark_mc_task_81729->free_mem_75443, .size =
                                 0, .references =NULL};
    int64_t iter_77684;
    struct futhark_mc_segmap_parloop_struct_81731
    futhark_mc_segmap_parloop_struct_81731;
    
    futhark_mc_segmap_parloop_struct_81731.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81731.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81731.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81731.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81731.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81731.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81731.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81731.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81731.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81731.free_last_res_72234 = last_res_72234;
    futhark_mc_segmap_parloop_struct_81731.free_min_arg_72249 = min_arg_72249;
    futhark_mc_segmap_parloop_struct_81731.free_min_arg_72250 = min_arg_72250;
    futhark_mc_segmap_parloop_struct_81731.free_min_res_72251 = min_res_72251;
    futhark_mc_segmap_parloop_struct_81731.free_max_res_72255 = max_res_72255;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75428 = mem_75428.mem;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75431 = mem_75431.mem;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75434 = mem_75434.mem;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75437 = mem_75437.mem;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75440 = mem_75440.mem;
    futhark_mc_segmap_parloop_struct_81731.free_mem_75443 = mem_75443.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81732_task;
    
    futhark_mc_segmap_parloop_81732_task.name =
        "futhark_mc_segmap_parloop_81732";
    futhark_mc_segmap_parloop_81732_task.fn = futhark_mc_segmap_parloop_81732;
    futhark_mc_segmap_parloop_81732_task.args =
        &futhark_mc_segmap_parloop_struct_81731;
    futhark_mc_segmap_parloop_81732_task.iterations = iterations;
    futhark_mc_segmap_parloop_81732_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81732_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81732_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81732_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81732_task);
    
    if (futhark_mc_segmap_parloop_81732_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81732_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81732_total_end -
                 futhark_mc_segmap_parloop_81732_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81732_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81732_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81732_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81730_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81730_end -
                 futhark_mc_segmap_task_81730_start;
        
        ctx->futhark_mc_segmap_task_81730_runs[tid]++;
        ctx->futhark_mc_segmap_task_81730_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81730_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81734 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72234;
    int64_t free_min_arg_72249;
    int64_t free_min_arg_72250;
    int64_t free_min_res_72251;
    float free_max_res_72255;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75434;
    unsigned char *free_mem_75437;
    unsigned char *free_mem_75440;
    unsigned char *free_mem_75443;
};
struct futhark_mc_task_81736 {
    struct futhark_context *ctx;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75437;
    int64_t free_min_res_77335;
    int64_t free_max_res_77400;
    float free_defunc_1_f_res_77419;
    float *retval_defunc_2_reduce_res_77420;
    float *retval_defunc_2_reduce_res_77421;
    float *retval_defunc_2_reduce_res_77422;
};
struct futhark_mc_segred_stage_1_parloop_struct_81741 {
    struct futhark_context *ctx;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75437;
    int64_t free_min_res_77335;
    int64_t free_max_res_77400;
    float free_defunc_1_f_res_77419;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77939;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77941;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77943;
};
static int futhark_mc_segred_stage_1_parloop_81742(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72058, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81741
    *futhark_mc_segred_stage_1_parloop_struct_81741 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81741 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81741->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81742_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81742_start = get_wall_time();
    
    int64_t last_res_72234 =
            futhark_mc_segred_stage_1_parloop_struct_81741->free_last_res_72234;
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81741->free_mem_75431,
                                 .size =0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81741->free_mem_75437,
                                 .size =0, .references =NULL};
    int64_t min_res_77335 =
            futhark_mc_segred_stage_1_parloop_struct_81741->free_min_res_77335;
    int64_t max_res_77400 =
            futhark_mc_segred_stage_1_parloop_struct_81741->free_max_res_77400;
    float defunc_1_f_res_77419 =
          futhark_mc_segred_stage_1_parloop_struct_81741->free_defunc_1_f_res_77419;
    struct memblock reduce_stage_1_tid_res_arr_mem_77939 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77939",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81741->free_reduce_stage_1_tid_res_arr_mem_77939,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_77941 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77941",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81741->free_reduce_stage_1_tid_res_arr_mem_77941,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_77943 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77943",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81741->free_reduce_stage_1_tid_res_arr_mem_77943,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77945 = start;
    float x_77868;
    float x_77869;
    float x_77871;
    float x_77872;
    float x_77874;
    float x_77875;
    float local_acc_77946 = 0.0F;
    float local_acc_77947 = 0.0F;
    float local_acc_77948 = 0.0F;
    
    for (; iter_77945 < end; iter_77945++) {
        int64_t gtid_72059 = iter_77945;
        float x_77877 = ((float *) mem_75437.mem)[gtid_72059];
        bool cond_77878 = sle64(last_res_72234, gtid_72059);
        int64_t defunc_0_f_res_77879;
        
        if (cond_77878) {
            defunc_0_f_res_77879 = (int64_t) 0;
        } else {
            int64_t i_77880 = add64(gtid_72059, max_res_77400);
            int64_t defunc_0_add_arg_77881 =
                    ((int64_t *) mem_75431.mem)[i_77880];
            int64_t defunc_1_add_res_77882 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77881);
            
            defunc_0_f_res_77879 = defunc_1_add_res_77882;
        }
        
        int64_t binop_p_77883 = sub64(defunc_0_f_res_77879, min_res_77335);
        float defunc_0_f_res_77884 = sitofp_i64_f32(binop_p_77883);
        float abs_res_77885 = (float) fabs(defunc_0_f_res_77884);
        float tmp1_77886 = abs_res_77885 / defunc_1_f_res_77419;
        float x_77887 = tmp1_77886 * tmp1_77886;
        float y_77888 = tmp1_77886 * x_77887;
        float tmp2_77889 = 1.0F - y_77888;
        float x_77890 = tmp2_77889 * tmp2_77889;
        float tmp3_77891 = tmp2_77889 * x_77890;
        float w_j_77892 = x_77877 * tmp3_77891;
        float xw_j_77893 = defunc_0_f_res_77884 * w_j_77892;
        float x2w_j_77894 = defunc_0_f_res_77884 * xw_j_77893;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77868 = local_acc_77946;
        }
        // Load next params
        {
            x_77869 = w_j_77892;
        }
        // Red body
        {
            float defunc_1_op_res_77870 = x_77868 + x_77869;
            
            local_acc_77946 = defunc_1_op_res_77870;
        }
        // Load accum params
        {
            x_77871 = local_acc_77947;
        }
        // Load next params
        {
            x_77872 = xw_j_77893;
        }
        // Red body
        {
            float defunc_1_op_res_77873 = x_77871 + x_77872;
            
            local_acc_77947 = defunc_1_op_res_77873;
        }
        // Load accum params
        {
            x_77874 = local_acc_77948;
        }
        // Load next params
        {
            x_77875 = x2w_j_77894;
        }
        // Red body
        {
            float defunc_1_op_res_77876 = x_77874 + x_77875;
            
            local_acc_77948 = defunc_1_op_res_77876;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77939.mem)[flat_tid_72058] =
        local_acc_77946;
    ((float *) reduce_stage_1_tid_res_arr_mem_77941.mem)[flat_tid_72058] =
        local_acc_77947;
    ((float *) reduce_stage_1_tid_res_arr_mem_77943.mem)[flat_tid_72058] =
        local_acc_77948;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81742_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81742_end -
                 futhark_mc_segred_stage_1_parloop_81742_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81742_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81742_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81742_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81737(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72058 = tid;
    int num_tasks_77938 = info.nsubtasks;
    struct futhark_mc_task_81736 *futhark_mc_task_81736 =
                                 (struct futhark_mc_task_81736 *) args;
    struct futhark_context *ctx = futhark_mc_task_81736->ctx;
    uint64_t futhark_mc_segred_task_81737_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81737_start = get_wall_time();
    
    int64_t last_res_72234 = futhark_mc_task_81736->free_last_res_72234;
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81736->free_mem_75431, .size =
                                 0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_task_81736->free_mem_75437, .size =
                                 0, .references =NULL};
    int64_t min_res_77335 = futhark_mc_task_81736->free_min_res_77335;
    int64_t max_res_77400 = futhark_mc_task_81736->free_max_res_77400;
    float defunc_1_f_res_77419 =
          futhark_mc_task_81736->free_defunc_1_f_res_77419;
    float defunc_2_reduce_res_77420 =
          *futhark_mc_task_81736->retval_defunc_2_reduce_res_77420;
    float defunc_2_reduce_res_77421 =
          *futhark_mc_task_81736->retval_defunc_2_reduce_res_77421;
    float defunc_2_reduce_res_77422 =
          *futhark_mc_task_81736->retval_defunc_2_reduce_res_77422;
    size_t reduce_stage_1_tid_res_arr_mem_77939_cached_sizze_81738 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77939 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_77941_cached_sizze_81739 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77941 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_77943_cached_sizze_81740 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77943 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77939_cached_sizze_81738 <
        (size_t) ((int64_t) 4 * num_tasks_77938)) {
        reduce_stage_1_tid_res_arr_mem_77939 =
            realloc(reduce_stage_1_tid_res_arr_mem_77939, (int64_t) 4 *
                    num_tasks_77938);
        reduce_stage_1_tid_res_arr_mem_77939_cached_sizze_81738 = (int64_t) 4 *
            num_tasks_77938;
    }
    if (reduce_stage_1_tid_res_arr_mem_77941_cached_sizze_81739 <
        (size_t) ((int64_t) 4 * num_tasks_77938)) {
        reduce_stage_1_tid_res_arr_mem_77941 =
            realloc(reduce_stage_1_tid_res_arr_mem_77941, (int64_t) 4 *
                    num_tasks_77938);
        reduce_stage_1_tid_res_arr_mem_77941_cached_sizze_81739 = (int64_t) 4 *
            num_tasks_77938;
    }
    if (reduce_stage_1_tid_res_arr_mem_77943_cached_sizze_81740 <
        (size_t) ((int64_t) 4 * num_tasks_77938)) {
        reduce_stage_1_tid_res_arr_mem_77943 =
            realloc(reduce_stage_1_tid_res_arr_mem_77943, (int64_t) 4 *
                    num_tasks_77938);
        reduce_stage_1_tid_res_arr_mem_77943_cached_sizze_81740 = (int64_t) 4 *
            num_tasks_77938;
    }
    
    int64_t iter_77945;
    struct futhark_mc_segred_stage_1_parloop_struct_81741
    futhark_mc_segred_stage_1_parloop_struct_81741;
    
    futhark_mc_segred_stage_1_parloop_struct_81741.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_last_res_72234 =
        last_res_72234;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_mem_75431 =
        mem_75431.mem;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_mem_75437 =
        mem_75437.mem;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_min_res_77335 =
        min_res_77335;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_max_res_77400 =
        max_res_77400;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_defunc_1_f_res_77419 =
        defunc_1_f_res_77419;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_reduce_stage_1_tid_res_arr_mem_77939 =
        reduce_stage_1_tid_res_arr_mem_77939;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_reduce_stage_1_tid_res_arr_mem_77941 =
        reduce_stage_1_tid_res_arr_mem_77941;
    futhark_mc_segred_stage_1_parloop_struct_81741.free_reduce_stage_1_tid_res_arr_mem_77943 =
        reduce_stage_1_tid_res_arr_mem_77943;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81742_task;
    
    futhark_mc_segred_stage_1_parloop_81742_task.name =
        "futhark_mc_segred_stage_1_parloop_81742";
    futhark_mc_segred_stage_1_parloop_81742_task.fn =
        futhark_mc_segred_stage_1_parloop_81742;
    futhark_mc_segred_stage_1_parloop_81742_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81741;
    futhark_mc_segred_stage_1_parloop_81742_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81742_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81742_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81742_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81742_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81742_task);
    
    if (futhark_mc_segred_stage_1_parloop_81742_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81742_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81742_total_end -
                 futhark_mc_segred_stage_1_parloop_81742_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81742_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81742_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81742_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_77420 = 0.0F;
        defunc_2_reduce_res_77421 = 0.0F;
        defunc_2_reduce_res_77422 = 0.0F;
    }
    
    float x_77949;
    float x_77950;
    float x_77952;
    float x_77953;
    float x_77955;
    float x_77956;
    
    for (int32_t i_77958 = 0; i_77958 < num_tasks_77938; i_77958++) {
        flat_tid_72058 = i_77958;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77949 = defunc_2_reduce_res_77420;
            }
            // load next params
            {
                x_77950 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77939)[flat_tid_72058];
            }
            // red body
            {
                float defunc_1_op_res_77951 = x_77949 + x_77950;
                
                defunc_2_reduce_res_77420 = defunc_1_op_res_77951;
            }
            // load acc params
            {
                x_77952 = defunc_2_reduce_res_77421;
            }
            // load next params
            {
                x_77953 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77941)[flat_tid_72058];
            }
            // red body
            {
                float defunc_1_op_res_77954 = x_77952 + x_77953;
                
                defunc_2_reduce_res_77421 = defunc_1_op_res_77954;
            }
            // load acc params
            {
                x_77955 = defunc_2_reduce_res_77422;
            }
            // load next params
            {
                x_77956 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77943)[flat_tid_72058];
            }
            // red body
            {
                float defunc_1_op_res_77957 = x_77955 + x_77956;
                
                defunc_2_reduce_res_77422 = defunc_1_op_res_77957;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77939);
    free(reduce_stage_1_tid_res_arr_mem_77941);
    free(reduce_stage_1_tid_res_arr_mem_77943);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81737_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81737_end -
                 futhark_mc_segred_task_81737_start;
        
        ctx->futhark_mc_segred_task_81737_runs[tid]++;
        ctx->futhark_mc_segred_task_81737_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81737_iter[tid] += iterations;
    }
    *futhark_mc_task_81736->retval_defunc_2_reduce_res_77420 =
        defunc_2_reduce_res_77420;
    *futhark_mc_task_81736->retval_defunc_2_reduce_res_77421 =
        defunc_2_reduce_res_77421;
    *futhark_mc_task_81736->retval_defunc_2_reduce_res_77422 =
        defunc_2_reduce_res_77422;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81743 {
    struct futhark_context *ctx;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75437;
    int64_t free_min_res_77335;
    int64_t free_max_res_77400;
    float free_defunc_1_f_res_77419;
    float free_a11_77454;
    float free_b11_77456;
    float free_c11_77457;
    float *retval_defunc_2_reduce_res_77458;
    float *retval_defunc_2_reduce_res_77459;
};
struct futhark_mc_segred_stage_1_parloop_struct_81747 {
    struct futhark_context *ctx;
    int64_t free_last_res_72234;
    unsigned char *free_mem_75428;
    unsigned char *free_mem_75431;
    unsigned char *free_mem_75437;
    int64_t free_min_res_77335;
    int64_t free_max_res_77400;
    float free_defunc_1_f_res_77419;
    float free_a11_77454;
    float free_b11_77456;
    float free_c11_77457;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77960;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77962;
};
static int futhark_mc_segred_stage_1_parloop_81748(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72060, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81747
    *futhark_mc_segred_stage_1_parloop_struct_81747 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81747 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81747->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81748_start = get_wall_time();
    
    int64_t last_res_72234 =
            futhark_mc_segred_stage_1_parloop_struct_81747->free_last_res_72234;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81747->free_mem_75428,
                                 .size =0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81747->free_mem_75431,
                                 .size =0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81747->free_mem_75437,
                                 .size =0, .references =NULL};
    int64_t min_res_77335 =
            futhark_mc_segred_stage_1_parloop_struct_81747->free_min_res_77335;
    int64_t max_res_77400 =
            futhark_mc_segred_stage_1_parloop_struct_81747->free_max_res_77400;
    float defunc_1_f_res_77419 =
          futhark_mc_segred_stage_1_parloop_struct_81747->free_defunc_1_f_res_77419;
    float a11_77454 =
          futhark_mc_segred_stage_1_parloop_struct_81747->free_a11_77454;
    float b11_77456 =
          futhark_mc_segred_stage_1_parloop_struct_81747->free_b11_77456;
    float c11_77457 =
          futhark_mc_segred_stage_1_parloop_struct_81747->free_c11_77457;
    struct memblock reduce_stage_1_tid_res_arr_mem_77960 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77960",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81747->free_reduce_stage_1_tid_res_arr_mem_77960,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_77962 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77962",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81747->free_reduce_stage_1_tid_res_arr_mem_77962,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77964 = start;
    float x_77895;
    float x_77896;
    float x_77898;
    float x_77899;
    float local_acc_77965 = 0.0F;
    float local_acc_77966 = 0.0F;
    
    for (; iter_77964 < end; iter_77964++) {
        int64_t gtid_72061 = iter_77964;
        float x_77901 = ((float *) mem_75437.mem)[gtid_72061];
        bool cond_77902 = sle64(last_res_72234, gtid_72061);
        int64_t defunc_0_f_res_77903;
        
        if (cond_77902) {
            defunc_0_f_res_77903 = (int64_t) 0;
        } else {
            int64_t i_77904 = add64(gtid_72061, max_res_77400);
            int64_t defunc_0_add_arg_77905 =
                    ((int64_t *) mem_75431.mem)[i_77904];
            int64_t defunc_1_add_res_77906 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77905);
            
            defunc_0_f_res_77903 = defunc_1_add_res_77906;
        }
        
        int64_t binop_p_77907 = sub64(defunc_0_f_res_77903, min_res_77335);
        float defunc_0_f_res_77908 = sitofp_i64_f32(binop_p_77907);
        float abs_res_77909 = (float) fabs(defunc_0_f_res_77908);
        float tmp1_77910 = abs_res_77909 / defunc_1_f_res_77419;
        float x_77911 = tmp1_77910 * tmp1_77910;
        float y_77912 = tmp1_77910 * x_77911;
        float tmp2_77913 = 1.0F - y_77912;
        float x_77914 = tmp2_77913 * tmp2_77913;
        float tmp3_77915 = tmp2_77913 * x_77914;
        float tmp4_77916 = x_77901 * tmp3_77915;
        float defunc_1_f_res_77917 = defunc_0_f_res_77908 * tmp4_77916;
        float defunc_0_f_res_77918;
        
        if (cond_77902) {
            defunc_0_f_res_77918 = 0.0F;
        } else {
            int64_t i_77919 = add64(gtid_72061, max_res_77400);
            float defunc_0_add_arg_77920 = ((float *) mem_75428.mem)[i_77919];
            
            defunc_0_f_res_77918 = defunc_0_add_arg_77920;
        }
        
        float x_77921 = a11_77454 * tmp4_77916;
        float y_77922 = b11_77456 * defunc_1_f_res_77917;
        float x_77923 = x_77921 + y_77922;
        float defunc_9_fit_fun_res_77924 = defunc_0_f_res_77918 * x_77923;
        float x_77925 = b11_77456 * tmp4_77916;
        float y_77926 = c11_77457 * defunc_1_f_res_77917;
        float x_77927 = x_77925 + y_77926;
        float defunc_9_slope_fun_res_77928 = defunc_0_f_res_77918 * x_77927;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77895 = local_acc_77965;
        }
        // Load next params
        {
            x_77896 = defunc_9_fit_fun_res_77924;
        }
        // Red body
        {
            float defunc_1_op_res_77897 = x_77895 + x_77896;
            
            local_acc_77965 = defunc_1_op_res_77897;
        }
        // Load accum params
        {
            x_77898 = local_acc_77966;
        }
        // Load next params
        {
            x_77899 = defunc_9_slope_fun_res_77928;
        }
        // Red body
        {
            float defunc_1_op_res_77900 = x_77898 + x_77899;
            
            local_acc_77966 = defunc_1_op_res_77900;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77960.mem)[flat_tid_72060] =
        local_acc_77965;
    ((float *) reduce_stage_1_tid_res_arr_mem_77962.mem)[flat_tid_72060] =
        local_acc_77966;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81748_end -
                 futhark_mc_segred_stage_1_parloop_81748_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81748_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81748_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81748_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81744(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72060 = tid;
    int num_tasks_77959 = info.nsubtasks;
    struct futhark_mc_task_81743 *futhark_mc_task_81743 =
                                 (struct futhark_mc_task_81743 *) args;
    struct futhark_context *ctx = futhark_mc_task_81743->ctx;
    uint64_t futhark_mc_segred_task_81744_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81744_start = get_wall_time();
    
    int64_t last_res_72234 = futhark_mc_task_81743->free_last_res_72234;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_task_81743->free_mem_75428, .size =
                                 0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81743->free_mem_75431, .size =
                                 0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_task_81743->free_mem_75437, .size =
                                 0, .references =NULL};
    int64_t min_res_77335 = futhark_mc_task_81743->free_min_res_77335;
    int64_t max_res_77400 = futhark_mc_task_81743->free_max_res_77400;
    float defunc_1_f_res_77419 =
          futhark_mc_task_81743->free_defunc_1_f_res_77419;
    float a11_77454 = futhark_mc_task_81743->free_a11_77454;
    float b11_77456 = futhark_mc_task_81743->free_b11_77456;
    float c11_77457 = futhark_mc_task_81743->free_c11_77457;
    float defunc_2_reduce_res_77458 =
          *futhark_mc_task_81743->retval_defunc_2_reduce_res_77458;
    float defunc_2_reduce_res_77459 =
          *futhark_mc_task_81743->retval_defunc_2_reduce_res_77459;
    size_t reduce_stage_1_tid_res_arr_mem_77960_cached_sizze_81745 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77960 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_77962_cached_sizze_81746 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77962 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77960_cached_sizze_81745 <
        (size_t) ((int64_t) 4 * num_tasks_77959)) {
        reduce_stage_1_tid_res_arr_mem_77960 =
            realloc(reduce_stage_1_tid_res_arr_mem_77960, (int64_t) 4 *
                    num_tasks_77959);
        reduce_stage_1_tid_res_arr_mem_77960_cached_sizze_81745 = (int64_t) 4 *
            num_tasks_77959;
    }
    if (reduce_stage_1_tid_res_arr_mem_77962_cached_sizze_81746 <
        (size_t) ((int64_t) 4 * num_tasks_77959)) {
        reduce_stage_1_tid_res_arr_mem_77962 =
            realloc(reduce_stage_1_tid_res_arr_mem_77962, (int64_t) 4 *
                    num_tasks_77959);
        reduce_stage_1_tid_res_arr_mem_77962_cached_sizze_81746 = (int64_t) 4 *
            num_tasks_77959;
    }
    
    int64_t iter_77964;
    struct futhark_mc_segred_stage_1_parloop_struct_81747
    futhark_mc_segred_stage_1_parloop_struct_81747;
    
    futhark_mc_segred_stage_1_parloop_struct_81747.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_last_res_72234 =
        last_res_72234;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_mem_75428 =
        mem_75428.mem;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_mem_75431 =
        mem_75431.mem;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_mem_75437 =
        mem_75437.mem;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_min_res_77335 =
        min_res_77335;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_max_res_77400 =
        max_res_77400;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_defunc_1_f_res_77419 =
        defunc_1_f_res_77419;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_a11_77454 = a11_77454;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_b11_77456 = b11_77456;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_c11_77457 = c11_77457;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_reduce_stage_1_tid_res_arr_mem_77960 =
        reduce_stage_1_tid_res_arr_mem_77960;
    futhark_mc_segred_stage_1_parloop_struct_81747.free_reduce_stage_1_tid_res_arr_mem_77962 =
        reduce_stage_1_tid_res_arr_mem_77962;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81748_task;
    
    futhark_mc_segred_stage_1_parloop_81748_task.name =
        "futhark_mc_segred_stage_1_parloop_81748";
    futhark_mc_segred_stage_1_parloop_81748_task.fn =
        futhark_mc_segred_stage_1_parloop_81748;
    futhark_mc_segred_stage_1_parloop_81748_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81747;
    futhark_mc_segred_stage_1_parloop_81748_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81748_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81748_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81748_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81748_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81748_task);
    
    if (futhark_mc_segred_stage_1_parloop_81748_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81748_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81748_total_end -
                 futhark_mc_segred_stage_1_parloop_81748_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81748_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81748_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81748_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_77458 = 0.0F;
        defunc_2_reduce_res_77459 = 0.0F;
    }
    
    float x_77967;
    float x_77968;
    float x_77970;
    float x_77971;
    
    for (int32_t i_77973 = 0; i_77973 < num_tasks_77959; i_77973++) {
        flat_tid_72060 = i_77973;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77967 = defunc_2_reduce_res_77458;
            }
            // load next params
            {
                x_77968 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77960)[flat_tid_72060];
            }
            // red body
            {
                float defunc_1_op_res_77969 = x_77967 + x_77968;
                
                defunc_2_reduce_res_77458 = defunc_1_op_res_77969;
            }
            // load acc params
            {
                x_77970 = defunc_2_reduce_res_77459;
            }
            // load next params
            {
                x_77971 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77962)[flat_tid_72060];
            }
            // red body
            {
                float defunc_1_op_res_77972 = x_77970 + x_77971;
                
                defunc_2_reduce_res_77459 = defunc_1_op_res_77972;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77960);
    free(reduce_stage_1_tid_res_arr_mem_77962);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81744_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81744_end -
                 futhark_mc_segred_task_81744_start;
        
        ctx->futhark_mc_segred_task_81744_runs[tid]++;
        ctx->futhark_mc_segred_task_81744_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81744_iter[tid] += iterations;
    }
    *futhark_mc_task_81743->retval_defunc_2_reduce_res_77458 =
        defunc_2_reduce_res_77458;
    *futhark_mc_task_81743->retval_defunc_2_reduce_res_77459 =
        defunc_2_reduce_res_77459;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81735(void *args, int64_t start,
                                           int64_t end, int flat_tid_72056,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81734
    *futhark_mc_segmap_parloop_struct_81734 =
    (struct futhark_mc_segmap_parloop_struct_81734 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81734->ctx;
    uint64_t futhark_mc_segmap_parloop_81735_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81735_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81734->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81734->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81734->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81734->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81734->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81734->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81734->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81734->free_loop_cond_70258;
    int64_t last_res_72234 =
            futhark_mc_segmap_parloop_struct_81734->free_last_res_72234;
    int64_t min_arg_72249 =
            futhark_mc_segmap_parloop_struct_81734->free_min_arg_72249;
    int64_t min_arg_72250 =
            futhark_mc_segmap_parloop_struct_81734->free_min_arg_72250;
    int64_t min_res_72251 =
            futhark_mc_segmap_parloop_struct_81734->free_min_res_72251;
    float max_res_72255 =
          futhark_mc_segmap_parloop_struct_81734->free_max_res_72255;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75428,
                                 .size =0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75431,
                                 .size =0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75434,
                                 .size =0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75437,
                                 .size =0, .references =NULL};
    struct memblock mem_75440 = {.desc ="mem_75440", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75440,
                                 .size =0, .references =NULL};
    struct memblock mem_75443 = {.desc ="mem_75443", .mem =
                                 futhark_mc_segmap_parloop_struct_81734->free_mem_75443,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77812 = start;
    
    for (; iter_77812 < end; iter_77812++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77929 = n_m_70241;
        int64_t gtid_72057 = iter_77812;
        int64_t remnant_77930 = iter_77812 - gtid_72057;
        int64_t min_arg_77334 = mul64(jump_70237, gtid_72057);
        int64_t min_res_77335 = smin64(i_70247, min_arg_77334);
        int64_t defunc_0_g_res_77336 = add64((int64_t) 1, min_res_77335);
        bool init_idx_77337;
        int64_t init_idx_77338;
        int64_t init_idx_77339;
        bool loop_while_77813;
        int64_t low_77814;
        int64_t high_77815;
        
        loop_while_77813 = x_70248;
        low_77814 = (int64_t) 0;
        high_77815 = i_70247;
        while (loop_while_77813) {
            int64_t x_77816 = add64(low_77814, high_77815);
            int64_t mid_77817 = sdiv64(x_77816, (int64_t) 2);
            bool x_77818 = sle64((int64_t) 0, mid_77817);
            bool y_77819 = slt64(mid_77817, n_70233);
            bool bounds_check_77820 = x_77818 && y_77819;
            bool index_certs_77821;
            
            if (!bounds_check_77820) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_77817,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_77822 = ((int64_t *) mem_75434.mem)[mid_77817];
            bool cond_77823 = slt64(mid_id_77822, (int64_t) 0);
            int64_t mid_idx_77824;
            
            if (cond_77823) {
                mid_idx_77824 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_77824 = mid_id_77822;
            }
            
            bool cond_77825 = sle64(defunc_0_g_res_77336, mid_idx_77824);
            int64_t loopres_77826;
            int64_t loopres_77827;
            
            if (cond_77825) {
                int64_t loopres_t_res_77828 = sub64(mid_77817, (int64_t) 1);
                
                loopres_77826 = low_77814;
                loopres_77827 = loopres_t_res_77828;
            } else {
                int64_t loopres_f_res_77829 = add64((int64_t) 1, mid_77817);
                
                loopres_77826 = loopres_f_res_77829;
                loopres_77827 = high_77815;
            }
            
            bool loop_cond_77830 = sle64(loopres_77826, loopres_77827);
            bool loop_while_tmp_77931 = loop_cond_77830;
            int64_t low_tmp_77932 = loopres_77826;
            int64_t high_tmp_77933 = loopres_77827;
            
            loop_while_77813 = loop_while_tmp_77931;
            low_77814 = low_tmp_77932;
            high_77815 = high_tmp_77933;
        }
        init_idx_77337 = loop_while_77813;
        init_idx_77338 = low_77814;
        init_idx_77339 = high_77815;
        
        bool idx_77358;
        int64_t idx_77359;
        int64_t idx_77360;
        int64_t idx_77361;
        bool loop_while_77831;
        int64_t l_idx_77832;
        int64_t r_idx_77833;
        int64_t span_77834;
        
        loop_while_77831 = loop_cond_70258;
        l_idx_77832 = init_idx_77338;
        r_idx_77833 = init_idx_77338;
        span_77834 = (int64_t) 1;
        while (loop_while_77831) {
            int64_t max_arg_77835 = sub64(l_idx_77832, (int64_t) 1);
            int64_t max_res_77836 = smax64((int64_t) 0, max_arg_77835);
            int64_t min_arg_77837 = add64((int64_t) 1, r_idx_77833);
            int64_t min_res_77838 = smin64(min_arg_72249, min_arg_77837);
            bool x_77839 = sle64((int64_t) 0, max_res_77836);
            bool y_77840 = slt64(max_res_77836, n_70233);
            bool bounds_check_77841 = x_77839 && y_77840;
            bool index_certs_77842;
            
            if (!bounds_check_77841) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77836,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77843 = ((int64_t *) mem_75434.mem)[max_res_77836];
            int64_t abs_arg_77844 = sub64(x_77843, defunc_0_g_res_77336);
            int64_t abs_res_77845 = abs64(abs_arg_77844);
            bool x_77846 = sle64((int64_t) 0, min_res_77838);
            bool y_77847 = slt64(min_res_77838, n_70233);
            bool bounds_check_77848 = x_77846 && y_77847;
            bool index_certs_77849;
            
            if (!bounds_check_77848) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_77838,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_77850 = ((int64_t *) mem_75434.mem)[min_res_77838];
            int64_t abs_arg_77851 = sub64(x_77850, defunc_0_g_res_77336);
            int64_t abs_res_77852 = abs64(abs_arg_77851);
            bool cond_77853 = max_res_77836 == l_idx_77832;
            int64_t loopres_77854;
            int64_t loopres_77855;
            int64_t loopres_77856;
            
            if (cond_77853) {
                loopres_77854 = l_idx_77832;
                loopres_77855 = r_idx_77833;
                loopres_77856 = min_res_70253;
            } else {
                bool cond_77857 = slt64(abs_res_77845, abs_res_77852);
                bool cond_f_res_77858 = min_res_77838 == r_idx_77833;
                bool x_77859 = !cond_77857;
                bool y_77860 = cond_f_res_77858 && x_77859;
                bool cond_77861 = cond_77857 || y_77860;
                int64_t loopres_f_res_77862;
                
                if (cond_77861) {
                    loopres_f_res_77862 = max_res_77836;
                } else {
                    loopres_f_res_77862 = l_idx_77832;
                }
                
                int64_t loopres_f_res_77863;
                
                if (cond_77861) {
                    loopres_f_res_77863 = r_idx_77833;
                } else {
                    loopres_f_res_77863 = min_res_77838;
                }
                
                int64_t loopres_f_res_77864;
                
                if (cond_77861) {
                    int64_t loopres_f_res_t_res_77865 = add64((int64_t) 1,
                                                              span_77834);
                    
                    loopres_f_res_77864 = loopres_f_res_t_res_77865;
                } else {
                    int64_t loopres_f_res_f_res_77866 = add64((int64_t) 1,
                                                              span_77834);
                    
                    loopres_f_res_77864 = loopres_f_res_f_res_77866;
                }
                loopres_77854 = loopres_f_res_77862;
                loopres_77855 = loopres_f_res_77863;
                loopres_77856 = loopres_f_res_77864;
            }
            
            bool loop_cond_77867 = slt64(loopres_77856, min_res_70253);
            bool loop_while_tmp_77934 = loop_cond_77867;
            int64_t l_idx_tmp_77935 = loopres_77854;
            int64_t r_idx_tmp_77936 = loopres_77855;
            int64_t span_tmp_77937 = loopres_77856;
            
            loop_while_77831 = loop_while_tmp_77934;
            l_idx_77832 = l_idx_tmp_77935;
            r_idx_77833 = r_idx_tmp_77936;
            span_77834 = span_tmp_77937;
        }
        idx_77358 = loop_while_77831;
        idx_77359 = l_idx_77832;
        idx_77360 = r_idx_77833;
        idx_77361 = span_77834;
        
        int64_t min_res_77399 = smin64(min_arg_72250, idx_77359);
        int64_t max_res_77400 = smax64((int64_t) 0, min_res_77399);
        int64_t x_77401 = add64(min_res_72251, max_res_77400);
        int64_t r_77402 = sub64(x_77401, (int64_t) 1);
        bool x_77403 = sle64((int64_t) 0, r_77402);
        bool y_77404 = slt64(r_77402, n_70233);
        bool bounds_check_77405 = x_77403 && y_77404;
        bool index_certs_77406;
        
        if (!bounds_check_77405) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_77402,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_77407 = ((int64_t *) mem_75431.mem)[r_77402];
        int64_t abs_arg_77408 = sub64(x_77407, min_res_77335);
        int64_t abs_res_77409 = abs64(abs_arg_77408);
        bool x_77410 = sle64((int64_t) 0, max_res_77400);
        bool y_77411 = slt64(max_res_77400, n_70233);
        bool bounds_check_77412 = x_77410 && y_77411;
        bool index_certs_77413;
        
        if (!bounds_check_77412) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_77400,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_77414 = ((int64_t *) mem_75431.mem)[max_res_77400];
        int64_t abs_arg_77415 = sub64(x_77414, min_res_77335);
        int64_t abs_res_77416 = abs64(abs_arg_77415);
        int64_t max_res_77417 = smax64(abs_res_77409, abs_res_77416);
        float defunc_0_f_res_77418 = sitofp_i64_f32(max_res_77417);
        float defunc_1_f_res_77419 = max_res_72255 + defunc_0_f_res_77418;
        float defunc_2_reduce_res_77420;
        float defunc_2_reduce_res_77421;
        float defunc_2_reduce_res_77422;
        int64_t flat_tid_72058 = (int64_t) 0;
        int32_t num_tasks_77938;
        struct futhark_mc_task_81736 futhark_mc_task_81736;
        
        futhark_mc_task_81736.ctx = ctx;
        futhark_mc_task_81736.free_last_res_72234 = last_res_72234;
        futhark_mc_task_81736.free_mem_75431 = mem_75431.mem;
        futhark_mc_task_81736.free_mem_75437 = mem_75437.mem;
        futhark_mc_task_81736.free_min_res_77335 = min_res_77335;
        futhark_mc_task_81736.free_max_res_77400 = max_res_77400;
        futhark_mc_task_81736.free_defunc_1_f_res_77419 = defunc_1_f_res_77419;
        futhark_mc_task_81736.retval_defunc_2_reduce_res_77420 =
            &defunc_2_reduce_res_77420;
        futhark_mc_task_81736.retval_defunc_2_reduce_res_77421 =
            &defunc_2_reduce_res_77421;
        futhark_mc_task_81736.retval_defunc_2_reduce_res_77422 =
            &defunc_2_reduce_res_77422;
        
        struct scheduler_segop futhark_mc_task_81736_task;
        
        futhark_mc_task_81736_task.args = &futhark_mc_task_81736;
        futhark_mc_task_81736_task.top_level_fn = futhark_mc_segred_task_81737;
        futhark_mc_task_81736_task.name = "futhark_mc_segred_task_81737";
        futhark_mc_task_81736_task.iterations = q_70235;
        futhark_mc_task_81736_task.task_time =
            &ctx->futhark_mc_segred_task_81737_total_time;
        futhark_mc_task_81736_task.task_iter =
            &ctx->futhark_mc_segred_task_81737_total_iter;
        futhark_mc_task_81736_task.sched = STATIC;
        futhark_mc_task_81736_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81737_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81736_task);
        
        if (futhark_mc_segred_task_81737_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_77450 = defunc_2_reduce_res_77420 * defunc_2_reduce_res_77422;
        float y_77451 = defunc_2_reduce_res_77421 * defunc_2_reduce_res_77421;
        float y_77452 = x_77450 - y_77451;
        float det1_77453 = 1.0F / y_77452;
        float a11_77454 = defunc_2_reduce_res_77422 * det1_77453;
        float x_77455 = 0.0F - defunc_2_reduce_res_77421;
        float b11_77456 = det1_77453 * x_77455;
        float c11_77457 = defunc_2_reduce_res_77420 * det1_77453;
        float defunc_2_reduce_res_77458;
        float defunc_2_reduce_res_77459;
        int64_t flat_tid_72060 = (int64_t) 0;
        int32_t num_tasks_77959;
        struct futhark_mc_task_81743 futhark_mc_task_81743;
        
        futhark_mc_task_81743.ctx = ctx;
        futhark_mc_task_81743.free_last_res_72234 = last_res_72234;
        futhark_mc_task_81743.free_mem_75428 = mem_75428.mem;
        futhark_mc_task_81743.free_mem_75431 = mem_75431.mem;
        futhark_mc_task_81743.free_mem_75437 = mem_75437.mem;
        futhark_mc_task_81743.free_min_res_77335 = min_res_77335;
        futhark_mc_task_81743.free_max_res_77400 = max_res_77400;
        futhark_mc_task_81743.free_defunc_1_f_res_77419 = defunc_1_f_res_77419;
        futhark_mc_task_81743.free_a11_77454 = a11_77454;
        futhark_mc_task_81743.free_b11_77456 = b11_77456;
        futhark_mc_task_81743.free_c11_77457 = c11_77457;
        futhark_mc_task_81743.retval_defunc_2_reduce_res_77458 =
            &defunc_2_reduce_res_77458;
        futhark_mc_task_81743.retval_defunc_2_reduce_res_77459 =
            &defunc_2_reduce_res_77459;
        
        struct scheduler_segop futhark_mc_task_81743_task;
        
        futhark_mc_task_81743_task.args = &futhark_mc_task_81743;
        futhark_mc_task_81743_task.top_level_fn = futhark_mc_segred_task_81744;
        futhark_mc_task_81743_task.name = "futhark_mc_segred_task_81744";
        futhark_mc_task_81743_task.iterations = q_70235;
        futhark_mc_task_81743_task.task_time =
            &ctx->futhark_mc_segred_task_81744_total_time;
        futhark_mc_task_81743_task.task_iter =
            &ctx->futhark_mc_segred_task_81744_total_iter;
        futhark_mc_task_81743_task.sched = STATIC;
        futhark_mc_task_81743_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81744_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81743_task);
        
        if (futhark_mc_segred_task_81744_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75440.mem)[gtid_72057] = defunc_2_reduce_res_77458;
        ((float *) mem_75443.mem)[gtid_72057] = defunc_2_reduce_res_77459;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81735_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81735_end -
                 futhark_mc_segmap_parloop_81735_start;
        
        ctx->futhark_mc_segmap_parloop_81735_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81735_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81735_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81733(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72056 = tid;
    int num_tasks_77683 = info.nsubtasks;
    struct futhark_mc_task_81729 *futhark_mc_task_81729 =
                                 (struct futhark_mc_task_81729 *) args;
    struct futhark_context *ctx = futhark_mc_task_81729->ctx;
    uint64_t futhark_mc_segmap_nested_task_81733_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81733_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81729->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81729->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81729->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81729->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81729->free_i_70247;
    bool x_70248 = futhark_mc_task_81729->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81729->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81729->free_loop_cond_70258;
    int64_t last_res_72234 = futhark_mc_task_81729->free_last_res_72234;
    int64_t min_arg_72249 = futhark_mc_task_81729->free_min_arg_72249;
    int64_t min_arg_72250 = futhark_mc_task_81729->free_min_arg_72250;
    int64_t min_res_72251 = futhark_mc_task_81729->free_min_res_72251;
    float max_res_72255 = futhark_mc_task_81729->free_max_res_72255;
    struct memblock mem_75428 = {.desc ="mem_75428", .mem =
                                 futhark_mc_task_81729->free_mem_75428, .size =
                                 0, .references =NULL};
    struct memblock mem_75431 = {.desc ="mem_75431", .mem =
                                 futhark_mc_task_81729->free_mem_75431, .size =
                                 0, .references =NULL};
    struct memblock mem_75434 = {.desc ="mem_75434", .mem =
                                 futhark_mc_task_81729->free_mem_75434, .size =
                                 0, .references =NULL};
    struct memblock mem_75437 = {.desc ="mem_75437", .mem =
                                 futhark_mc_task_81729->free_mem_75437, .size =
                                 0, .references =NULL};
    struct memblock mem_75440 = {.desc ="mem_75440", .mem =
                                 futhark_mc_task_81729->free_mem_75440, .size =
                                 0, .references =NULL};
    struct memblock mem_75443 = {.desc ="mem_75443", .mem =
                                 futhark_mc_task_81729->free_mem_75443, .size =
                                 0, .references =NULL};
    int64_t iter_77812;
    struct futhark_mc_segmap_parloop_struct_81734
    futhark_mc_segmap_parloop_struct_81734;
    
    futhark_mc_segmap_parloop_struct_81734.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81734.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81734.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81734.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81734.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81734.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81734.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81734.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81734.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81734.free_last_res_72234 = last_res_72234;
    futhark_mc_segmap_parloop_struct_81734.free_min_arg_72249 = min_arg_72249;
    futhark_mc_segmap_parloop_struct_81734.free_min_arg_72250 = min_arg_72250;
    futhark_mc_segmap_parloop_struct_81734.free_min_res_72251 = min_res_72251;
    futhark_mc_segmap_parloop_struct_81734.free_max_res_72255 = max_res_72255;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75428 = mem_75428.mem;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75431 = mem_75431.mem;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75434 = mem_75434.mem;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75437 = mem_75437.mem;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75440 = mem_75440.mem;
    futhark_mc_segmap_parloop_struct_81734.free_mem_75443 = mem_75443.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81735_task;
    
    futhark_mc_segmap_parloop_81735_task.name =
        "futhark_mc_segmap_parloop_81735";
    futhark_mc_segmap_parloop_81735_task.fn = futhark_mc_segmap_parloop_81735;
    futhark_mc_segmap_parloop_81735_task.args =
        &futhark_mc_segmap_parloop_struct_81734;
    futhark_mc_segmap_parloop_81735_task.iterations = iterations;
    futhark_mc_segmap_parloop_81735_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81735_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81735_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81735_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81735_task);
    
    if (futhark_mc_segmap_parloop_81735_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81735_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81735_total_end -
                 futhark_mc_segmap_parloop_81735_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81735_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81735_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81735_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81733_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81733_end -
                 futhark_mc_segmap_nested_task_81733_start;
        
        ctx->futhark_mc_segmap_nested_task_81733_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81733_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81733_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81702(void *args, int64_t start,
                                           int64_t end, int flat_tid_72044,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81701
    *futhark_mc_segmap_parloop_struct_81701 =
    (struct futhark_mc_segmap_parloop_struct_81701 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81701->ctx;
    uint64_t futhark_mc_segmap_parloop_81702_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81702_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81701->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81701->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81701->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81701->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81701->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81701->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81701->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81701->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81701->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81701->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81701->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75424 =
            futhark_mc_segmap_parloop_struct_81701->free_bytes_75424;
    int64_t bytes_75427 =
            futhark_mc_segmap_parloop_struct_81701->free_bytes_75427;
    int64_t bytes_75436 =
            futhark_mc_segmap_parloop_struct_81701->free_bytes_75436;
    int64_t bytes_75439 =
            futhark_mc_segmap_parloop_struct_81701->free_bytes_75439;
    struct memblock mem_75552 = {.desc ="mem_75552", .mem =
                                 futhark_mc_segmap_parloop_struct_81701->free_mem_75552,
                                 .size =0, .references =NULL};
    struct memblock mem_75556 = {.desc ="mem_75556", .mem =
                                 futhark_mc_segmap_parloop_struct_81701->free_mem_75556,
                                 .size =0, .references =NULL};
    size_t mem_75425_cached_sizze_81703 = 0;
    unsigned char *mem_75425 = NULL;
    size_t mem_75428_cached_sizze_81704 = 0;
    unsigned char *mem_75428 = NULL;
    size_t mem_75431_cached_sizze_81705 = 0;
    unsigned char *mem_75431 = NULL;
    size_t mem_75434_cached_sizze_81706 = 0;
    unsigned char *mem_75434 = NULL;
    size_t mem_75437_cached_sizze_81707 = 0;
    unsigned char *mem_75437 = NULL;
    size_t mem_75440_cached_sizze_81708 = 0;
    unsigned char *mem_75440 = NULL;
    size_t mem_75443_cached_sizze_81709 = 0;
    unsigned char *mem_75443 = NULL;
    int64_t iterations = end - start;
    int64_t iter_77316 = start;
    
    if (mem_75425_cached_sizze_81703 < (size_t) bytes_75424) {
        mem_75425 = realloc(mem_75425, bytes_75424);
        mem_75425_cached_sizze_81703 = bytes_75424;
    }
    if (mem_75428_cached_sizze_81704 < (size_t) bytes_75427) {
        mem_75428 = realloc(mem_75428, bytes_75427);
        mem_75428_cached_sizze_81704 = bytes_75427;
    }
    if (mem_75431_cached_sizze_81705 < (size_t) bytes_75424) {
        mem_75431 = realloc(mem_75431, bytes_75424);
        mem_75431_cached_sizze_81705 = bytes_75424;
    }
    if (mem_75434_cached_sizze_81706 < (size_t) bytes_75424) {
        mem_75434 = realloc(mem_75434, bytes_75424);
        mem_75434_cached_sizze_81706 = bytes_75424;
    }
    if (mem_75437_cached_sizze_81707 < (size_t) bytes_75436) {
        mem_75437 = realloc(mem_75437, bytes_75436);
        mem_75437_cached_sizze_81707 = bytes_75436;
    }
    if (mem_75440_cached_sizze_81708 < (size_t) bytes_75439) {
        mem_75440 = realloc(mem_75440, bytes_75439);
        mem_75440_cached_sizze_81708 = bytes_75439;
    }
    if (mem_75443_cached_sizze_81709 < (size_t) bytes_75439) {
        mem_75443 = realloc(mem_75443, bytes_75439);
        mem_75443_cached_sizze_81709 = bytes_75439;
    }
    for (; iter_77316 < end; iter_77316++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77651 = m_70232;
        int64_t gtid_72045 = iter_77316;
        int64_t remnant_77652 = iter_77316 - gtid_72045;
        int64_t flat_tid_72046 = (int64_t) 0;
        int32_t num_tasks_77653;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81710 futhark_mc_task_81710;
        
        futhark_mc_task_81710.ctx = ctx;
        futhark_mc_task_81710.free_n_70233 = n_70233;
        futhark_mc_task_81710.free_gtid_72045 = gtid_72045;
        futhark_mc_task_81710.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81710.free_mem_75425 = mem_75425;
        
        struct scheduler_segop futhark_mc_task_81710_task;
        
        futhark_mc_task_81710_task.args = &futhark_mc_task_81710;
        futhark_mc_task_81710_task.top_level_fn = futhark_mc_segscan_task_81711;
        futhark_mc_task_81710_task.name = "futhark_mc_segscan_task_81711";
        futhark_mc_task_81710_task.iterations = n_70233;
        futhark_mc_task_81710_task.task_time =
            &ctx->futhark_mc_segscan_task_81711_total_time;
        futhark_mc_task_81710_task.task_iter =
            &ctx->futhark_mc_segscan_task_81711_total_iter;
        futhark_mc_task_81710_task.sched = STATIC;
        futhark_mc_task_81710_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81711_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81710_task);
        
        if (futhark_mc_segscan_task_81711_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_72234 = ((int64_t *) mem_75425)[i_70247];
        
        for (int64_t i_77667 = 0; i_77667 < n_70233; i_77667++) {
            ((float *) mem_75428)[i_77667] = 0.0F;
        }
        for (int64_t i_77668 = 0; i_77668 < n_70233; i_77668++) {
            ((int64_t *) mem_75431)[i_77668] = (int64_t) -1;
        }
        
        int64_t flat_tid_72048 = (int64_t) 0;
        int32_t num_tasks_77669;
        struct futhark_mc_task_81717 futhark_mc_task_81717;
        
        futhark_mc_task_81717.ctx = ctx;
        futhark_mc_task_81717.free_n_70233 = n_70233;
        futhark_mc_task_81717.free_gtid_72045 = gtid_72045;
        futhark_mc_task_81717.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81717.free_mem_75425 = mem_75425;
        futhark_mc_task_81717.free_mem_75428 = mem_75428;
        futhark_mc_task_81717.free_mem_75431 = mem_75431;
        
        struct scheduler_segop futhark_mc_task_81717_task;
        
        futhark_mc_task_81717_task.args = &futhark_mc_task_81717;
        futhark_mc_task_81717_task.top_level_fn = futhark_mc_segmap_task_81718;
        futhark_mc_task_81717_task.name = "futhark_mc_segmap_task_81718";
        futhark_mc_task_81717_task.iterations = n_70233;
        futhark_mc_task_81717_task.task_time =
            &ctx->futhark_mc_segmap_task_81718_total_time;
        futhark_mc_task_81717_task.task_iter =
            &ctx->futhark_mc_segmap_task_81718_total_iter;
        futhark_mc_task_81717_task.sched = STATIC;
        futhark_mc_task_81717_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81718_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81717_task);
        
        if (futhark_mc_segmap_task_81718_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72050 = (int64_t) 0;
        int32_t num_tasks_77675;
        struct futhark_mc_task_81721 futhark_mc_task_81721;
        
        futhark_mc_task_81721.ctx = ctx;
        futhark_mc_task_81721.free_n_70233 = n_70233;
        futhark_mc_task_81721.free_mem_75431 = mem_75431;
        futhark_mc_task_81721.free_mem_75434 = mem_75434;
        
        struct scheduler_segop futhark_mc_task_81721_task;
        
        futhark_mc_task_81721_task.args = &futhark_mc_task_81721;
        futhark_mc_task_81721_task.top_level_fn = futhark_mc_segmap_task_81722;
        futhark_mc_task_81721_task.name = "futhark_mc_segmap_task_81722";
        futhark_mc_task_81721_task.iterations = n_70233;
        futhark_mc_task_81721_task.task_time =
            &ctx->futhark_mc_segmap_task_81722_total_time;
        futhark_mc_task_81721_task.task_iter =
            &ctx->futhark_mc_segmap_task_81722_total_iter;
        futhark_mc_task_81721_task.sched = STATIC;
        futhark_mc_task_81721_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81722_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81721_task);
        
        if (futhark_mc_segmap_task_81722_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_72249 = sub64(last_res_72234, (int64_t) 1);
        int64_t min_arg_72250 = sub64(last_res_72234, min_res_70253);
        int64_t min_res_72251 = smin64(q_70235, last_res_72234);
        float i64_res_72252 = sitofp_i64_f32(last_res_72234);
        float x_72253 = i64_res_70259 - i64_res_72252;
        float max_arg_72254 = x_72253 / 2.0F;
        float max_res_72255 = fmax32(0.0F, max_arg_72254);
        int64_t flat_tid_72052 = (int64_t) 0;
        int32_t num_tasks_77679;
        struct futhark_mc_task_81725 futhark_mc_task_81725;
        
        futhark_mc_task_81725.ctx = ctx;
        futhark_mc_task_81725.free_q_70235 = q_70235;
        futhark_mc_task_81725.free_last_res_72234 = last_res_72234;
        futhark_mc_task_81725.free_mem_75437 = mem_75437;
        
        struct scheduler_segop futhark_mc_task_81725_task;
        
        futhark_mc_task_81725_task.args = &futhark_mc_task_81725;
        futhark_mc_task_81725_task.top_level_fn = futhark_mc_segmap_task_81726;
        futhark_mc_task_81725_task.name = "futhark_mc_segmap_task_81726";
        futhark_mc_task_81725_task.iterations = q_70235;
        futhark_mc_task_81725_task.task_time =
            &ctx->futhark_mc_segmap_task_81726_total_time;
        futhark_mc_task_81725_task.task_iter =
            &ctx->futhark_mc_segmap_task_81726_total_iter;
        futhark_mc_task_81725_task.sched = STATIC;
        futhark_mc_task_81725_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81726_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81725_task);
        
        if (futhark_mc_segmap_task_81726_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72054 = (int64_t) 0;
        int32_t num_tasks_77683;
        int64_t flat_tid_72056 = (int64_t) 0;
        struct futhark_mc_task_81729 futhark_mc_task_81729;
        
        futhark_mc_task_81729.ctx = ctx;
        futhark_mc_task_81729.free_n_70233 = n_70233;
        futhark_mc_task_81729.free_q_70235 = q_70235;
        futhark_mc_task_81729.free_jump_70237 = jump_70237;
        futhark_mc_task_81729.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81729.free_i_70247 = i_70247;
        futhark_mc_task_81729.free_x_70248 = x_70248;
        futhark_mc_task_81729.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81729.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81729.free_last_res_72234 = last_res_72234;
        futhark_mc_task_81729.free_min_arg_72249 = min_arg_72249;
        futhark_mc_task_81729.free_min_arg_72250 = min_arg_72250;
        futhark_mc_task_81729.free_min_res_72251 = min_res_72251;
        futhark_mc_task_81729.free_max_res_72255 = max_res_72255;
        futhark_mc_task_81729.free_mem_75428 = mem_75428;
        futhark_mc_task_81729.free_mem_75431 = mem_75431;
        futhark_mc_task_81729.free_mem_75434 = mem_75434;
        futhark_mc_task_81729.free_mem_75437 = mem_75437;
        futhark_mc_task_81729.free_mem_75440 = mem_75440;
        futhark_mc_task_81729.free_mem_75443 = mem_75443;
        
        struct scheduler_segop futhark_mc_task_81729_task;
        
        futhark_mc_task_81729_task.args = &futhark_mc_task_81729;
        futhark_mc_task_81729_task.top_level_fn = futhark_mc_segmap_task_81730;
        futhark_mc_task_81729_task.name = "futhark_mc_segmap_task_81730";
        futhark_mc_task_81729_task.iterations = n_m_70241;
        futhark_mc_task_81729_task.task_time =
            &ctx->futhark_mc_segmap_task_81730_total_time;
        futhark_mc_task_81729_task.task_iter =
            &ctx->futhark_mc_segmap_task_81730_total_iter;
        futhark_mc_task_81729_task.sched = DYNAMIC;
        futhark_mc_task_81729_task.nested_fn =
            futhark_mc_segmap_nested_task_81733;
        
        int futhark_mc_segmap_task_81730_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81729_task);
        
        if (futhark_mc_segmap_task_81730_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75552.mem + gtid_72045 * n_m_70241 * (int64_t) 4,
                    mem_75440 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75556.mem + gtid_72045 * n_m_70241 * (int64_t) 4,
                    mem_75443 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75425);
    free(mem_75428);
    free(mem_75431);
    free(mem_75434);
    free(mem_75437);
    free(mem_75440);
    free(mem_75443);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81702_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81702_end -
                 futhark_mc_segmap_parloop_81702_start;
        
        ctx->futhark_mc_segmap_parloop_81702_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81702_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81702_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81700(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72044 = tid;
    int num_tasks_77097 = info.nsubtasks;
    struct futhark_mc_task_81689 *futhark_mc_task_81689 =
                                 (struct futhark_mc_task_81689 *) args;
    struct futhark_context *ctx = futhark_mc_task_81689->ctx;
    uint64_t futhark_mc_segmap_nested_task_81700_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81700_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81689->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81689->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81689->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81689->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81689->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81689->free_i_70247;
    bool x_70248 = futhark_mc_task_81689->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81689->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81689->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81689->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81689->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75424 = futhark_mc_task_81689->free_bytes_75424;
    int64_t bytes_75427 = futhark_mc_task_81689->free_bytes_75427;
    int64_t bytes_75436 = futhark_mc_task_81689->free_bytes_75436;
    int64_t bytes_75439 = futhark_mc_task_81689->free_bytes_75439;
    struct memblock mem_75552 = {.desc ="mem_75552", .mem =
                                 futhark_mc_task_81689->free_mem_75552, .size =
                                 0, .references =NULL};
    struct memblock mem_75556 = {.desc ="mem_75556", .mem =
                                 futhark_mc_task_81689->free_mem_75556, .size =
                                 0, .references =NULL};
    int64_t iter_77316;
    struct futhark_mc_segmap_parloop_struct_81701
    futhark_mc_segmap_parloop_struct_81701;
    
    futhark_mc_segmap_parloop_struct_81701.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81701.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81701.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81701.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81701.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81701.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81701.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81701.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81701.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81701.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81701.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81701.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81701.free_bytes_75424 = bytes_75424;
    futhark_mc_segmap_parloop_struct_81701.free_bytes_75427 = bytes_75427;
    futhark_mc_segmap_parloop_struct_81701.free_bytes_75436 = bytes_75436;
    futhark_mc_segmap_parloop_struct_81701.free_bytes_75439 = bytes_75439;
    futhark_mc_segmap_parloop_struct_81701.free_mem_75552 = mem_75552.mem;
    futhark_mc_segmap_parloop_struct_81701.free_mem_75556 = mem_75556.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81702_task;
    
    futhark_mc_segmap_parloop_81702_task.name =
        "futhark_mc_segmap_parloop_81702";
    futhark_mc_segmap_parloop_81702_task.fn = futhark_mc_segmap_parloop_81702;
    futhark_mc_segmap_parloop_81702_task.args =
        &futhark_mc_segmap_parloop_struct_81701;
    futhark_mc_segmap_parloop_81702_task.iterations = iterations;
    futhark_mc_segmap_parloop_81702_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81702_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81702_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81702_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81702_task);
    
    if (futhark_mc_segmap_parloop_81702_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81702_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81702_total_end -
                 futhark_mc_segmap_parloop_81702_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81702_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81702_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81702_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81700_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81700_end -
                 futhark_mc_segmap_nested_task_81700_start;
        
        ctx->futhark_mc_segmap_nested_task_81700_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81700_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81700_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81749 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75558;
    int64_t free_bytes_75561;
    int64_t free_bytes_75570;
    int64_t free_bytes_75573;
    unsigned char *free_mem_75686;
    unsigned char *free_mem_75690;
};
struct futhark_mc_segmap_parloop_struct_81751 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75558;
    int64_t free_bytes_75561;
    int64_t free_bytes_75570;
    int64_t free_bytes_75573;
    unsigned char *free_mem_75686;
    unsigned char *free_mem_75690;
};
static int futhark_mc_segmap_parloop_81752(void *args, int64_t start,
                                           int64_t end, int flat_tid_72588,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81751
    *futhark_mc_segmap_parloop_struct_81751 =
    (struct futhark_mc_segmap_parloop_struct_81751 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81751->ctx;
    uint64_t futhark_mc_segmap_parloop_81752_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81752_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81751->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81751->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81751->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81751->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81751->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81751->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81751->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81751->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81751->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81751->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81751->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75558 =
            futhark_mc_segmap_parloop_struct_81751->free_bytes_75558;
    int64_t bytes_75561 =
            futhark_mc_segmap_parloop_struct_81751->free_bytes_75561;
    int64_t bytes_75570 =
            futhark_mc_segmap_parloop_struct_81751->free_bytes_75570;
    int64_t bytes_75573 =
            futhark_mc_segmap_parloop_struct_81751->free_bytes_75573;
    struct memblock mem_75686 = {.desc ="mem_75686", .mem =
                                 futhark_mc_segmap_parloop_struct_81751->free_mem_75686,
                                 .size =0, .references =NULL};
    struct memblock mem_75690 = {.desc ="mem_75690", .mem =
                                 futhark_mc_segmap_parloop_struct_81751->free_mem_75690,
                                 .size =0, .references =NULL};
    size_t mem_75580_cached_sizze_81753 = 0;
    unsigned char *mem_75580 = NULL;
    size_t mem_75595_cached_sizze_81754 = 0;
    unsigned char *mem_75595 = NULL;
    size_t mem_75598_cached_sizze_81755 = 0;
    unsigned char *mem_75598 = NULL;
    size_t mem_75625_cached_sizze_81756 = 0;
    unsigned char *mem_75625 = NULL;
    size_t mem_75640_cached_sizze_81757 = 0;
    unsigned char *mem_75640 = NULL;
    size_t mem_75655_cached_sizze_81758 = 0;
    unsigned char *mem_75655 = NULL;
    size_t mem_75658_cached_sizze_81759 = 0;
    unsigned char *mem_75658 = NULL;
    int64_t iterations = end - start;
    int64_t iter_77975 = start;
    
    if (mem_75580_cached_sizze_81753 < (size_t) bytes_75558) {
        mem_75580 = realloc(mem_75580, bytes_75558);
        mem_75580_cached_sizze_81753 = bytes_75558;
    }
    if (mem_75595_cached_sizze_81754 < (size_t) bytes_75561) {
        mem_75595 = realloc(mem_75595, bytes_75561);
        mem_75595_cached_sizze_81754 = bytes_75561;
    }
    if (mem_75598_cached_sizze_81755 < (size_t) bytes_75558) {
        mem_75598 = realloc(mem_75598, bytes_75558);
        mem_75598_cached_sizze_81755 = bytes_75558;
    }
    if (mem_75625_cached_sizze_81756 < (size_t) bytes_75558) {
        mem_75625 = realloc(mem_75625, bytes_75558);
        mem_75625_cached_sizze_81756 = bytes_75558;
    }
    if (mem_75640_cached_sizze_81757 < (size_t) bytes_75570) {
        mem_75640 = realloc(mem_75640, bytes_75570);
        mem_75640_cached_sizze_81757 = bytes_75570;
    }
    if (mem_75655_cached_sizze_81758 < (size_t) bytes_75573) {
        mem_75655 = realloc(mem_75655, bytes_75573);
        mem_75655_cached_sizze_81758 = bytes_75573;
    }
    if (mem_75658_cached_sizze_81759 < (size_t) bytes_75573) {
        mem_75658 = realloc(mem_75658, bytes_75573);
        mem_75658_cached_sizze_81759 = bytes_75573;
    }
    for (; iter_77975 < end; iter_77975++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78199 = m_70232;
        int64_t gtid_72589 = iter_77975;
        int64_t remnant_78200 = iter_77975 - gtid_72589;
        int64_t discard_75003;
        int64_t scanacc_77977 = (int64_t) 0;
        
        for (int64_t i_77976 = 0; i_77976 < n_70233; i_77976++) {
            float x_77979 = ((float *) Y_mem_75306.mem)[gtid_72589 * n_70233 +
                                                        i_77976];
            bool isnan_res_77980;
            
            isnan_res_77980 = futrts_isnan32(x_77979);
            
            bool defunc_0_p_res_77981 = !isnan_res_77980;
            int64_t defunc_0_f_res_77982 = btoi_bool_i64(defunc_0_p_res_77981);
            int64_t defunc_1_op_res_77983 = add64(defunc_0_f_res_77982,
                                                  scanacc_77977);
            
            ((int64_t *) mem_75580)[i_77976] = defunc_1_op_res_77983;
            
            int64_t scanacc_tmp_78201 = defunc_1_op_res_77983;
            
            scanacc_77977 = scanacc_tmp_78201;
        }
        discard_75003 = scanacc_77977;
        
        int64_t last_res_70666 = ((int64_t *) mem_75580)[i_70247];
        
        for (int64_t i_78203 = 0; i_78203 < n_70233; i_78203++) {
            ((float *) mem_75595)[i_78203] = 0.0F;
        }
        for (int64_t i_78204 = 0; i_78204 < n_70233; i_78204++) {
            ((int64_t *) mem_75598)[i_78204] = (int64_t) -1;
        }
        for (int64_t write_iter_77985 = 0; write_iter_77985 < n_70233;
             write_iter_77985++) {
            float write_iv_77988 = ((float *) Y_mem_75306.mem)[gtid_72589 *
                                                               n_70233 +
                                                               write_iter_77985];
            bool isnan_res_77989;
            
            isnan_res_77989 = futrts_isnan32(write_iv_77988);
            
            bool defunc_0_p_res_77990 = !isnan_res_77989;
            int64_t defunc_1_f_res_77991;
            
            if (defunc_0_p_res_77990) {
                int64_t write_iv_77992 =
                        ((int64_t *) mem_75580)[write_iter_77985];
                int64_t defunc_1_f_res_t_res_77993 = sub64(write_iv_77992,
                                                           (int64_t) 1);
                
                defunc_1_f_res_77991 = defunc_1_f_res_t_res_77993;
            } else {
                defunc_1_f_res_77991 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77991) &&
                slt64(defunc_1_f_res_77991, n_70233)) {
                ((int64_t *) mem_75598)[defunc_1_f_res_77991] =
                    write_iter_77985;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77991) &&
                slt64(defunc_1_f_res_77991, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75595 + defunc_1_f_res_77991 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_72589 * n_70233 +
                                               write_iter_77985) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_77997 = 0; i_77997 < n_70233; i_77997++) {
            int64_t x_77999 = ((int64_t *) mem_75598)[i_77997];
            int64_t defunc_0_f_res_78000 = add64((int64_t) 1, x_77999);
            
            ((int64_t *) mem_75625)[i_77997] = defunc_0_f_res_78000;
        }
        
        int64_t min_arg_70681 = sub64(last_res_70666, (int64_t) 1);
        int64_t min_arg_70682 = sub64(last_res_70666, min_res_70253);
        int64_t min_res_70683 = smin64(q_70235, last_res_70666);
        float i64_res_70684 = sitofp_i64_f32(last_res_70666);
        float x_70685 = i64_res_70259 - i64_res_70684;
        float max_arg_70686 = x_70685 / 2.0F;
        float max_res_70687 = fmax32(0.0F, max_arg_70686);
        
        for (int64_t i_78002 = 0; i_78002 < q_70235; i_78002++) {
            bool cond_78004 = sle64(last_res_70666, i_78002);
            float defunc_0_f_res_78005;
            
            if (cond_78004) {
                defunc_0_f_res_78005 = 0.0F;
            } else {
                defunc_0_f_res_78005 = 1.0F;
            }
            ((float *) mem_75640)[i_78002] = defunc_0_f_res_78005;
        }
        for (int64_t i_78007 = 0; i_78007 < n_m_70241; i_78007++) {
            int64_t min_arg_78010 = mul64(jump_70237, i_78007);
            int64_t min_res_78011 = smin64(i_70247, min_arg_78010);
            int64_t defunc_0_g_res_78012 = add64((int64_t) 1, min_res_78011);
            bool init_idx_78013;
            int64_t init_idx_78014;
            int64_t init_idx_78015;
            bool loop_while_78016;
            int64_t low_78017;
            int64_t high_78018;
            
            loop_while_78016 = x_70248;
            low_78017 = (int64_t) 0;
            high_78018 = i_70247;
            while (loop_while_78016) {
                int64_t x_78019 = add64(low_78017, high_78018);
                int64_t mid_78020 = sdiv64(x_78019, (int64_t) 2);
                bool x_78021 = sle64((int64_t) 0, mid_78020);
                bool y_78022 = slt64(mid_78020, n_70233);
                bool bounds_check_78023 = x_78021 && y_78022;
                bool index_certs_78024;
                
                if (!bounds_check_78023) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_78020,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_78025 = ((int64_t *) mem_75625)[mid_78020];
                bool cond_78026 = slt64(mid_id_78025, (int64_t) 0);
                int64_t mid_idx_78027;
                
                if (cond_78026) {
                    mid_idx_78027 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_78027 = mid_id_78025;
                }
                
                bool cond_78028 = sle64(defunc_0_g_res_78012, mid_idx_78027);
                int64_t loopres_78029;
                int64_t loopres_78030;
                
                if (cond_78028) {
                    int64_t loopres_t_res_78031 = sub64(mid_78020, (int64_t) 1);
                    
                    loopres_78029 = low_78017;
                    loopres_78030 = loopres_t_res_78031;
                } else {
                    int64_t loopres_f_res_78032 = add64((int64_t) 1, mid_78020);
                    
                    loopres_78029 = loopres_f_res_78032;
                    loopres_78030 = high_78018;
                }
                
                bool loop_cond_78033 = sle64(loopres_78029, loopres_78030);
                bool loop_while_tmp_78211 = loop_cond_78033;
                int64_t low_tmp_78212 = loopres_78029;
                int64_t high_tmp_78213 = loopres_78030;
                
                loop_while_78016 = loop_while_tmp_78211;
                low_78017 = low_tmp_78212;
                high_78018 = high_tmp_78213;
            }
            init_idx_78013 = loop_while_78016;
            init_idx_78014 = low_78017;
            init_idx_78015 = high_78018;
            
            bool idx_78034;
            int64_t idx_78035;
            int64_t idx_78036;
            int64_t idx_78037;
            bool loop_while_78038;
            int64_t l_idx_78039;
            int64_t r_idx_78040;
            int64_t span_78041;
            
            loop_while_78038 = loop_cond_70258;
            l_idx_78039 = init_idx_78014;
            r_idx_78040 = init_idx_78014;
            span_78041 = (int64_t) 1;
            while (loop_while_78038) {
                int64_t max_arg_78042 = sub64(l_idx_78039, (int64_t) 1);
                int64_t max_res_78043 = smax64((int64_t) 0, max_arg_78042);
                int64_t min_arg_78044 = add64((int64_t) 1, r_idx_78040);
                int64_t min_res_78045 = smin64(min_arg_70681, min_arg_78044);
                bool x_78046 = sle64((int64_t) 0, max_res_78043);
                bool y_78047 = slt64(max_res_78043, n_70233);
                bool bounds_check_78048 = x_78046 && y_78047;
                bool index_certs_78049;
                
                if (!bounds_check_78048) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_78043,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_78050 = ((int64_t *) mem_75625)[max_res_78043];
                int64_t abs_arg_78051 = sub64(x_78050, defunc_0_g_res_78012);
                int64_t abs_res_78052 = abs64(abs_arg_78051);
                bool x_78053 = sle64((int64_t) 0, min_res_78045);
                bool y_78054 = slt64(min_res_78045, n_70233);
                bool bounds_check_78055 = x_78053 && y_78054;
                bool index_certs_78056;
                
                if (!bounds_check_78055) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_78045,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_78057 = ((int64_t *) mem_75625)[min_res_78045];
                int64_t abs_arg_78058 = sub64(x_78057, defunc_0_g_res_78012);
                int64_t abs_res_78059 = abs64(abs_arg_78058);
                bool cond_78060 = max_res_78043 == l_idx_78039;
                int64_t loopres_78061;
                int64_t loopres_78062;
                int64_t loopres_78063;
                
                if (cond_78060) {
                    loopres_78061 = l_idx_78039;
                    loopres_78062 = r_idx_78040;
                    loopres_78063 = min_res_70253;
                } else {
                    bool cond_78064 = slt64(abs_res_78052, abs_res_78059);
                    bool cond_f_res_78065 = min_res_78045 == r_idx_78040;
                    bool x_78066 = !cond_78064;
                    bool y_78067 = cond_f_res_78065 && x_78066;
                    bool cond_78068 = cond_78064 || y_78067;
                    int64_t loopres_f_res_78069;
                    
                    if (cond_78068) {
                        loopres_f_res_78069 = max_res_78043;
                    } else {
                        loopres_f_res_78069 = l_idx_78039;
                    }
                    
                    int64_t loopres_f_res_78070;
                    
                    if (cond_78068) {
                        loopres_f_res_78070 = r_idx_78040;
                    } else {
                        loopres_f_res_78070 = min_res_78045;
                    }
                    
                    int64_t loopres_f_res_78071;
                    
                    if (cond_78068) {
                        int64_t loopres_f_res_t_res_78072 = add64((int64_t) 1,
                                                                  span_78041);
                        
                        loopres_f_res_78071 = loopres_f_res_t_res_78072;
                    } else {
                        int64_t loopres_f_res_f_res_78073 = add64((int64_t) 1,
                                                                  span_78041);
                        
                        loopres_f_res_78071 = loopres_f_res_f_res_78073;
                    }
                    loopres_78061 = loopres_f_res_78069;
                    loopres_78062 = loopres_f_res_78070;
                    loopres_78063 = loopres_f_res_78071;
                }
                
                bool loop_cond_78074 = slt64(loopres_78063, min_res_70253);
                bool loop_while_tmp_78214 = loop_cond_78074;
                int64_t l_idx_tmp_78215 = loopres_78061;
                int64_t r_idx_tmp_78216 = loopres_78062;
                int64_t span_tmp_78217 = loopres_78063;
                
                loop_while_78038 = loop_while_tmp_78214;
                l_idx_78039 = l_idx_tmp_78215;
                r_idx_78040 = r_idx_tmp_78216;
                span_78041 = span_tmp_78217;
            }
            idx_78034 = loop_while_78038;
            idx_78035 = l_idx_78039;
            idx_78036 = r_idx_78040;
            idx_78037 = span_78041;
            
            int64_t min_res_78075 = smin64(min_arg_70682, idx_78035);
            int64_t max_res_78076 = smax64((int64_t) 0, min_res_78075);
            int64_t x_78077 = add64(min_res_70683, max_res_78076);
            int64_t r_78078 = sub64(x_78077, (int64_t) 1);
            bool x_78079 = sle64((int64_t) 0, r_78078);
            bool y_78080 = slt64(r_78078, n_70233);
            bool bounds_check_78081 = x_78079 && y_78080;
            bool index_certs_78082;
            
            if (!bounds_check_78081) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_78078,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78083 = ((int64_t *) mem_75598)[r_78078];
            int64_t abs_arg_78084 = sub64(x_78083, min_res_78011);
            int64_t abs_res_78085 = abs64(abs_arg_78084);
            bool x_78086 = sle64((int64_t) 0, max_res_78076);
            bool y_78087 = slt64(max_res_78076, n_70233);
            bool bounds_check_78088 = x_78086 && y_78087;
            bool index_certs_78089;
            
            if (!bounds_check_78088) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78076,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78090 = ((int64_t *) mem_75598)[max_res_78076];
            int64_t abs_arg_78091 = sub64(x_78090, min_res_78011);
            int64_t abs_res_78092 = abs64(abs_arg_78091);
            int64_t max_res_78093 = smax64(abs_res_78085, abs_res_78092);
            float defunc_0_f_res_78094 = sitofp_i64_f32(max_res_78093);
            float defunc_1_f_res_78095 = max_res_70687 + defunc_0_f_res_78094;
            float defunc_2_reduce_res_78096;
            float defunc_2_reduce_res_78097;
            float defunc_2_reduce_res_78098;
            float defunc_2_reduce_res_78099;
            float defunc_2_reduce_res_78100;
            float redout_78102;
            float redout_78103;
            float redout_78104;
            float redout_78105;
            float redout_78106;
            
            redout_78102 = 0.0F;
            redout_78103 = 0.0F;
            redout_78104 = 0.0F;
            redout_78105 = 0.0F;
            redout_78106 = 0.0F;
            for (int64_t i_78101 = 0; i_78101 < q_70235; i_78101++) {
                float x_78107 = ((float *) mem_75640)[i_78101];
                bool cond_78108 = sle64(last_res_70666, i_78101);
                int64_t defunc_0_f_res_78109;
                
                if (cond_78108) {
                    defunc_0_f_res_78109 = (int64_t) 0;
                } else {
                    int64_t i_78110 = add64(max_res_78076, i_78101);
                    int64_t defunc_0_add_arg_78111 =
                            ((int64_t *) mem_75598)[i_78110];
                    int64_t defunc_1_add_res_78112 = add64((int64_t) 1,
                                                           defunc_0_add_arg_78111);
                    
                    defunc_0_f_res_78109 = defunc_1_add_res_78112;
                }
                
                int64_t binop_p_78113 = sub64(defunc_0_f_res_78109,
                                              min_res_78011);
                float defunc_0_f_res_78114 = sitofp_i64_f32(binop_p_78113);
                float abs_res_78115 = (float) fabs(defunc_0_f_res_78114);
                float tmp1_78116 = abs_res_78115 / defunc_1_f_res_78095;
                float x_78117 = tmp1_78116 * tmp1_78116;
                float y_78118 = tmp1_78116 * x_78117;
                float tmp2_78119 = 1.0F - y_78118;
                float x_78120 = tmp2_78119 * tmp2_78119;
                float tmp3_78121 = tmp2_78119 * x_78120;
                float w_j_78122 = x_78107 * tmp3_78121;
                float xw_j_78123 = defunc_0_f_res_78114 * w_j_78122;
                float x2w_j_78124 = defunc_0_f_res_78114 * xw_j_78123;
                float x3w_j_78125 = defunc_0_f_res_78114 * x2w_j_78124;
                float x4w_j_78126 = defunc_0_f_res_78114 * x3w_j_78125;
                float defunc_1_op_res_78127 = w_j_78122 + redout_78102;
                float defunc_1_op_res_78128 = xw_j_78123 + redout_78103;
                float defunc_1_op_res_78129 = x2w_j_78124 + redout_78104;
                float defunc_1_op_res_78130 = x3w_j_78125 + redout_78105;
                float defunc_1_op_res_78131 = x4w_j_78126 + redout_78106;
                float redout_tmp_78218 = defunc_1_op_res_78127;
                float redout_tmp_78219 = defunc_1_op_res_78128;
                float redout_tmp_78220 = defunc_1_op_res_78129;
                float redout_tmp_78221 = defunc_1_op_res_78130;
                float redout_tmp_78222 = defunc_1_op_res_78131;
                
                redout_78102 = redout_tmp_78218;
                redout_78103 = redout_tmp_78219;
                redout_78104 = redout_tmp_78220;
                redout_78105 = redout_tmp_78221;
                redout_78106 = redout_tmp_78222;
            }
            defunc_2_reduce_res_78096 = redout_78102;
            defunc_2_reduce_res_78097 = redout_78103;
            defunc_2_reduce_res_78098 = redout_78104;
            defunc_2_reduce_res_78099 = redout_78105;
            defunc_2_reduce_res_78100 = redout_78106;
            
            float x_78132 = defunc_2_reduce_res_78098 *
                  defunc_2_reduce_res_78100;
            float y_78133 = defunc_2_reduce_res_78099 *
                  defunc_2_reduce_res_78099;
            float a12_78134 = x_78132 - y_78133;
            float x_78135 = defunc_2_reduce_res_78098 *
                  defunc_2_reduce_res_78099;
            float y_78136 = defunc_2_reduce_res_78097 *
                  defunc_2_reduce_res_78100;
            float b12_78137 = x_78135 - y_78136;
            float x_78138 = defunc_2_reduce_res_78097 *
                  defunc_2_reduce_res_78099;
            float y_78139 = defunc_2_reduce_res_78098 *
                  defunc_2_reduce_res_78098;
            float c12_78140 = x_78138 - y_78139;
            float x_78141 = defunc_2_reduce_res_78096 *
                  defunc_2_reduce_res_78100;
            float b2_78142 = x_78141 - y_78139;
            float x_78143 = defunc_2_reduce_res_78097 *
                  defunc_2_reduce_res_78098;
            float y_78144 = defunc_2_reduce_res_78096 *
                  defunc_2_reduce_res_78099;
            float c2_78145 = x_78143 - y_78144;
            float x_78146 = defunc_2_reduce_res_78096 * a12_78134;
            float y_78147 = defunc_2_reduce_res_78097 * b12_78137;
            float x_78148 = x_78146 + y_78147;
            float y_78149 = defunc_2_reduce_res_78098 * c12_78140;
            float y_78150 = x_78148 + y_78149;
            float det_78151 = 1.0F / y_78150;
            float a12_78152 = a12_78134 * det_78151;
            float b12_78153 = b12_78137 * det_78151;
            float c12_78154 = c12_78140 * det_78151;
            float b2_78155 = b2_78142 * det_78151;
            float c2_78156 = c2_78145 * det_78151;
            float defunc_2_reduce_res_78157;
            float defunc_2_reduce_res_78158;
            float redout_78160;
            float redout_78161;
            
            redout_78160 = 0.0F;
            redout_78161 = 0.0F;
            for (int64_t i_78159 = 0; i_78159 < q_70235; i_78159++) {
                float x_78162 = ((float *) mem_75640)[i_78159];
                bool cond_78163 = sle64(last_res_70666, i_78159);
                int64_t defunc_0_f_res_78164;
                
                if (cond_78163) {
                    defunc_0_f_res_78164 = (int64_t) 0;
                } else {
                    int64_t i_78165 = add64(max_res_78076, i_78159);
                    int64_t defunc_0_add_arg_78166 =
                            ((int64_t *) mem_75598)[i_78165];
                    int64_t defunc_1_add_res_78167 = add64((int64_t) 1,
                                                           defunc_0_add_arg_78166);
                    
                    defunc_0_f_res_78164 = defunc_1_add_res_78167;
                }
                
                int64_t binop_p_78168 = sub64(defunc_0_f_res_78164,
                                              min_res_78011);
                float defunc_0_f_res_78169 = sitofp_i64_f32(binop_p_78168);
                float abs_res_78170 = (float) fabs(defunc_0_f_res_78169);
                float tmp1_78171 = abs_res_78170 / defunc_1_f_res_78095;
                float x_78172 = tmp1_78171 * tmp1_78171;
                float y_78173 = tmp1_78171 * x_78172;
                float tmp2_78174 = 1.0F - y_78173;
                float x_78175 = tmp2_78174 * tmp2_78174;
                float tmp3_78176 = tmp2_78174 * x_78175;
                float tmp4_78177 = x_78162 * tmp3_78176;
                float defunc_1_f_res_78178 = defunc_0_f_res_78169 * tmp4_78177;
                float defunc_1_f_res_78179 = defunc_0_f_res_78169 *
                      defunc_1_f_res_78178;
                float defunc_0_f_res_78180;
                
                if (cond_78163) {
                    defunc_0_f_res_78180 = 0.0F;
                } else {
                    int64_t i_78181 = add64(max_res_78076, i_78159);
                    float defunc_0_add_arg_78182 =
                          ((float *) mem_75595)[i_78181];
                    
                    defunc_0_f_res_78180 = defunc_0_add_arg_78182;
                }
                
                float x_78183 = a12_78152 * tmp4_78177;
                float y_78184 = b12_78153 * defunc_1_f_res_78178;
                float x_78185 = x_78183 + y_78184;
                float y_78186 = c12_78154 * defunc_1_f_res_78179;
                float x_78187 = x_78185 + y_78186;
                float defunc_9_fit_fun_res_78188 = defunc_0_f_res_78180 *
                      x_78187;
                float x_78189 = b12_78153 * tmp4_78177;
                float y_78190 = b2_78155 * defunc_1_f_res_78178;
                float x_78191 = x_78189 + y_78190;
                float y_78192 = c2_78156 * defunc_1_f_res_78179;
                float x_78193 = x_78191 + y_78192;
                float defunc_9_slope_fun_res_78194 = defunc_0_f_res_78180 *
                      x_78193;
                float defunc_1_op_res_78195 = defunc_9_fit_fun_res_78188 +
                      redout_78160;
                float defunc_1_op_res_78196 = defunc_9_slope_fun_res_78194 +
                      redout_78161;
                float redout_tmp_78223 = defunc_1_op_res_78195;
                float redout_tmp_78224 = defunc_1_op_res_78196;
                
                redout_78160 = redout_tmp_78223;
                redout_78161 = redout_tmp_78224;
            }
            defunc_2_reduce_res_78157 = redout_78160;
            defunc_2_reduce_res_78158 = redout_78161;
            ((float *) mem_75655)[i_78007] = defunc_2_reduce_res_78157;
            ((float *) mem_75658)[i_78007] = defunc_2_reduce_res_78158;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75686.mem + gtid_72589 * n_m_70241 * (int64_t) 4,
                    mem_75655 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75690.mem + gtid_72589 * n_m_70241 * (int64_t) 4,
                    mem_75658 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75580);
    free(mem_75595);
    free(mem_75598);
    free(mem_75625);
    free(mem_75640);
    free(mem_75655);
    free(mem_75658);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81752_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81752_end -
                 futhark_mc_segmap_parloop_81752_start;
        
        ctx->futhark_mc_segmap_parloop_81752_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81752_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81752_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81750(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72588 = tid;
    int num_tasks_77974 = info.nsubtasks;
    struct futhark_mc_task_81749 *futhark_mc_task_81749 =
                                 (struct futhark_mc_task_81749 *) args;
    struct futhark_context *ctx = futhark_mc_task_81749->ctx;
    uint64_t futhark_mc_segmap_task_81750_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81750_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81749->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81749->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81749->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81749->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81749->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81749->free_i_70247;
    bool x_70248 = futhark_mc_task_81749->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81749->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81749->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81749->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81749->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75558 = futhark_mc_task_81749->free_bytes_75558;
    int64_t bytes_75561 = futhark_mc_task_81749->free_bytes_75561;
    int64_t bytes_75570 = futhark_mc_task_81749->free_bytes_75570;
    int64_t bytes_75573 = futhark_mc_task_81749->free_bytes_75573;
    struct memblock mem_75686 = {.desc ="mem_75686", .mem =
                                 futhark_mc_task_81749->free_mem_75686, .size =
                                 0, .references =NULL};
    struct memblock mem_75690 = {.desc ="mem_75690", .mem =
                                 futhark_mc_task_81749->free_mem_75690, .size =
                                 0, .references =NULL};
    int64_t iter_77975;
    struct futhark_mc_segmap_parloop_struct_81751
    futhark_mc_segmap_parloop_struct_81751;
    
    futhark_mc_segmap_parloop_struct_81751.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81751.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81751.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81751.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81751.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81751.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81751.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81751.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81751.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81751.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81751.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81751.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81751.free_bytes_75558 = bytes_75558;
    futhark_mc_segmap_parloop_struct_81751.free_bytes_75561 = bytes_75561;
    futhark_mc_segmap_parloop_struct_81751.free_bytes_75570 = bytes_75570;
    futhark_mc_segmap_parloop_struct_81751.free_bytes_75573 = bytes_75573;
    futhark_mc_segmap_parloop_struct_81751.free_mem_75686 = mem_75686.mem;
    futhark_mc_segmap_parloop_struct_81751.free_mem_75690 = mem_75690.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81752_task;
    
    futhark_mc_segmap_parloop_81752_task.name =
        "futhark_mc_segmap_parloop_81752";
    futhark_mc_segmap_parloop_81752_task.fn = futhark_mc_segmap_parloop_81752;
    futhark_mc_segmap_parloop_81752_task.args =
        &futhark_mc_segmap_parloop_struct_81751;
    futhark_mc_segmap_parloop_81752_task.iterations = iterations;
    futhark_mc_segmap_parloop_81752_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81752_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81752_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81752_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81752_task);
    
    if (futhark_mc_segmap_parloop_81752_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81752_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81752_total_end -
                 futhark_mc_segmap_parloop_81752_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81752_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81752_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81752_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81750_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81750_end -
                 futhark_mc_segmap_task_81750_start;
        
        ctx->futhark_mc_segmap_task_81750_runs[tid]++;
        ctx->futhark_mc_segmap_task_81750_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81750_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81761 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75558;
    int64_t free_bytes_75561;
    int64_t free_bytes_75570;
    int64_t free_bytes_75573;
    unsigned char *free_mem_75686;
    unsigned char *free_mem_75690;
};
struct futhark_mc_task_81770 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72591;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75559;
};
struct futhark_mc_scan_stage_1_parloop_struct_81773 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72591;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75559;
};
static int futhark_mc_scan_stage_1_parloop_81774(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72592, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81773
    *futhark_mc_scan_stage_1_parloop_struct_81773 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81773 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81773->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81774_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81774_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81773->free_n_70233;
    int64_t gtid_72591 =
            futhark_mc_scan_stage_1_parloop_struct_81773->free_gtid_72591;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81773->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75559 = {.desc ="mem_75559", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81773->free_mem_75559,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78625 = start;
    int64_t x_78226;
    int64_t x_78227;
    
    x_78226 = (int64_t) 0;
    for (; iter_78625 < end; iter_78625++) {
        int64_t gtid_72593 = iter_78625;
        
        // stage 1 scan body
        {
            float x_78229 = ((float *) Y_mem_75306.mem)[gtid_72591 * n_70233 +
                                                        gtid_72593];
            bool isnan_res_78230;
            
            isnan_res_78230 = futrts_isnan32(x_78229);
            
            bool defunc_0_p_res_78231 = !isnan_res_78230;
            int64_t defunc_0_f_res_78232 = btoi_bool_i64(defunc_0_p_res_78231);
            
            // write mapped values results to memory
            { }
            x_78226 = x_78226;
            // Read next values
            {
                x_78227 = defunc_0_f_res_78232;
            }
            
            int64_t defunc_1_op_res_78228 = add64(x_78226, x_78227);
            
            ((int64_t *) mem_75559.mem)[gtid_72593] = defunc_1_op_res_78228;
            x_78226 = defunc_1_op_res_78228;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81774_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81774_end -
                 futhark_mc_scan_stage_1_parloop_81774_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81774_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81774_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81774_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81775 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72591;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75559;
};
static int futhark_mc_scan_stage_3_parloop_81776(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72592, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81775
    *futhark_mc_scan_stage_3_parloop_struct_81775 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81775 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81775->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81776_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81776_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81775->free_n_70233;
    int64_t gtid_72591 =
            futhark_mc_scan_stage_3_parloop_struct_81775->free_gtid_72591;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81775->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75559 = {.desc ="mem_75559", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81775->free_mem_75559,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78637 = start;
    int64_t x_78634;
    int64_t x_78635;
    
    if (iter_78637 == (int64_t) 0) {
        x_78634 = (int64_t) 0;
    } else {
        x_78634 = ((int64_t *) mem_75559.mem)[iter_78637 - (int64_t) 1];
    }
    for (; iter_78637 < end; iter_78637++) {
        int64_t gtid_72593 = iter_78637;
        
        // stage 3 scan body
        {
            float x_78229 = ((float *) Y_mem_75306.mem)[gtid_72591 * n_70233 +
                                                        gtid_72593];
            bool isnan_res_78230;
            
            isnan_res_78230 = futrts_isnan32(x_78229);
            
            bool defunc_0_p_res_78231 = !isnan_res_78230;
            int64_t defunc_0_f_res_78232 = btoi_bool_i64(defunc_0_p_res_78231);
            
            x_78634 = x_78634;
            x_78635 = defunc_0_f_res_78232;
            
            int64_t defunc_1_op_res_78636 = add64(x_78634, x_78635);
            
            ((int64_t *) mem_75559.mem)[gtid_72593] = defunc_1_op_res_78636;
            x_78634 = defunc_1_op_res_78636;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81776_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81776_end -
                 futhark_mc_scan_stage_3_parloop_81776_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81776_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81776_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81776_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81771(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72592 = tid;
    int num_tasks_78624 = info.nsubtasks;
    struct futhark_mc_task_81770 *futhark_mc_task_81770 =
                                 (struct futhark_mc_task_81770 *) args;
    struct futhark_context *ctx = futhark_mc_task_81770->ctx;
    uint64_t futhark_mc_segscan_task_81771_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81771_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81770->free_n_70233;
    int64_t gtid_72591 = futhark_mc_task_81770->free_gtid_72591;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81770->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75559 = {.desc ="mem_75559", .mem =
                                 futhark_mc_task_81770->free_mem_75559, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_78631_cached_sizze_81772 = 0;
    unsigned char *scan_stage_2_accum_mem_78631 = NULL;
    int64_t iter_78625;
    struct futhark_mc_scan_stage_1_parloop_struct_81773
    futhark_mc_scan_stage_1_parloop_struct_81773;
    
    futhark_mc_scan_stage_1_parloop_struct_81773.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81773.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81773.free_gtid_72591 = gtid_72591;
    futhark_mc_scan_stage_1_parloop_struct_81773.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81773.free_mem_75559 = mem_75559.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81774_task;
    
    futhark_mc_scan_stage_1_parloop_81774_task.name =
        "futhark_mc_scan_stage_1_parloop_81774";
    futhark_mc_scan_stage_1_parloop_81774_task.fn =
        futhark_mc_scan_stage_1_parloop_81774;
    futhark_mc_scan_stage_1_parloop_81774_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81773;
    futhark_mc_scan_stage_1_parloop_81774_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81774_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81774_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81774_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81774_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81774_task);
    
    if (futhark_mc_scan_stage_1_parloop_81774_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81774_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81774_total_end -
                 futhark_mc_scan_stage_1_parloop_81774_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81774_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81774_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81774_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_78624)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_78626;
        int64_t x_78627;
        int64_t offset_78629 = (int64_t) 0;
        int64_t offset_index_78630 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_78631_cached_sizze_81772 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_78631 = realloc(scan_stage_2_accum_mem_78631,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_78631_cached_sizze_81772 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_78631)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_78633 = 0; i_78633 < num_tasks_78624 - 1; i_78633++) {
            offset_78629 = squot64(n_70233, sext_i32_i64(num_tasks_78624));
            if (slt64(sext_i32_i64(i_78633), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_78624)))) {
                offset_78629 += (int64_t) 1;
            }
            offset_index_78630 += offset_78629;
            
            int64_t gtid_72593 = offset_index_78630;
            float x_78229 = ((float *) Y_mem_75306.mem)[gtid_72591 * n_70233 +
                                                        gtid_72593];
            bool isnan_res_78230;
            
            isnan_res_78230 = futrts_isnan32(x_78229);
            
            bool defunc_0_p_res_78231 = !isnan_res_78230;
            int64_t defunc_0_f_res_78232 = btoi_bool_i64(defunc_0_p_res_78231);
            
            // Read carry in
            {
                x_78626 =
                    ((int64_t *) scan_stage_2_accum_mem_78631)[(int64_t) 0];
            }
            // Read next values
            {
                x_78627 = ((int64_t *) mem_75559.mem)[offset_index_78630 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_78628 = add64(x_78626, x_78627);
            
            ((int64_t *) mem_75559.mem)[offset_index_78630 - (int64_t) 1] =
                defunc_1_op_res_78628;
            ((int64_t *) scan_stage_2_accum_mem_78631)[(int64_t) 0] =
                defunc_1_op_res_78628;
        }
        
        int64_t iter_78637 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81775
        futhark_mc_scan_stage_3_parloop_struct_81775;
        
        futhark_mc_scan_stage_3_parloop_struct_81775.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81775.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81775.free_gtid_72591 =
            gtid_72591;
        futhark_mc_scan_stage_3_parloop_struct_81775.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81775.free_mem_75559 =
            mem_75559.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81776_task;
        
        futhark_mc_scan_stage_3_parloop_81776_task.name =
            "futhark_mc_scan_stage_3_parloop_81776";
        futhark_mc_scan_stage_3_parloop_81776_task.fn =
            futhark_mc_scan_stage_3_parloop_81776;
        futhark_mc_scan_stage_3_parloop_81776_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81775;
        futhark_mc_scan_stage_3_parloop_81776_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81776_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81776_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81776_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81776_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81776_task);
        
        if (futhark_mc_scan_stage_3_parloop_81776_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81776_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81776_total_end -
                     futhark_mc_scan_stage_3_parloop_81776_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81776_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81776_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81776_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_78631);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81771_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81771_end -
                 futhark_mc_segscan_task_81771_start;
        
        ctx->futhark_mc_segscan_task_81771_runs[tid]++;
        ctx->futhark_mc_segscan_task_81771_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81771_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81777 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72591;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75559;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
};
struct futhark_mc_segmap_parloop_struct_81779 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_72591;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75559;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
};
static int futhark_mc_segmap_parloop_81780(void *args, int64_t start,
                                           int64_t end, int flat_tid_72594,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81779
    *futhark_mc_segmap_parloop_struct_81779 =
    (struct futhark_mc_segmap_parloop_struct_81779 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81779->ctx;
    uint64_t futhark_mc_segmap_parloop_81780_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81780_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81779->free_n_70233;
    int64_t gtid_72591 =
            futhark_mc_segmap_parloop_struct_81779->free_gtid_72591;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81779->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75559 = {.desc ="mem_75559", .mem =
                                 futhark_mc_segmap_parloop_struct_81779->free_mem_75559,
                                 .size =0, .references =NULL};
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_segmap_parloop_struct_81779->free_mem_75562,
                                 .size =0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segmap_parloop_struct_81779->free_mem_75565,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78641 = start;
    
    for (; iter_78641 < end; iter_78641++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78644 = n_70233;
        int64_t gtid_72595 = iter_78641;
        int64_t remnant_78645 = iter_78641 - gtid_72595;
        float x_78233 = ((float *) Y_mem_75306.mem)[gtid_72591 * n_70233 +
                                                    gtid_72595];
        bool isnan_res_78234;
        
        isnan_res_78234 = futrts_isnan32(x_78233);
        
        bool defunc_0_p_res_78235 = !isnan_res_78234;
        int64_t defunc_1_f_res_78236;
        
        if (defunc_0_p_res_78235) {
            int64_t x_78642 = ((int64_t *) mem_75559.mem)[gtid_72595];
            int64_t defunc_1_f_res_t_res_78643 = sub64(x_78642, (int64_t) 1);
            
            defunc_1_f_res_78236 = defunc_1_f_res_t_res_78643;
        } else {
            defunc_1_f_res_78236 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_78236) &&
            slt64(defunc_1_f_res_78236, n_70233)) {
            ((int64_t *) mem_75565.mem)[defunc_1_f_res_78236] = gtid_72595;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_78236) &&
            slt64(defunc_1_f_res_78236, n_70233)) {
            ((float *) mem_75562.mem)[defunc_1_f_res_78236] = x_78233;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81780_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81780_end -
                 futhark_mc_segmap_parloop_81780_start;
        
        ctx->futhark_mc_segmap_parloop_81780_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81780_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81780_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81778(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72594 = tid;
    int num_tasks_78640 = info.nsubtasks;
    struct futhark_mc_task_81777 *futhark_mc_task_81777 =
                                 (struct futhark_mc_task_81777 *) args;
    struct futhark_context *ctx = futhark_mc_task_81777->ctx;
    uint64_t futhark_mc_segmap_task_81778_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81778_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81777->free_n_70233;
    int64_t gtid_72591 = futhark_mc_task_81777->free_gtid_72591;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81777->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75559 = {.desc ="mem_75559", .mem =
                                 futhark_mc_task_81777->free_mem_75559, .size =
                                 0, .references =NULL};
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_task_81777->free_mem_75562, .size =
                                 0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81777->free_mem_75565, .size =
                                 0, .references =NULL};
    int64_t iter_78641;
    struct futhark_mc_segmap_parloop_struct_81779
    futhark_mc_segmap_parloop_struct_81779;
    
    futhark_mc_segmap_parloop_struct_81779.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81779.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81779.free_gtid_72591 = gtid_72591;
    futhark_mc_segmap_parloop_struct_81779.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81779.free_mem_75559 = mem_75559.mem;
    futhark_mc_segmap_parloop_struct_81779.free_mem_75562 = mem_75562.mem;
    futhark_mc_segmap_parloop_struct_81779.free_mem_75565 = mem_75565.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81780_task;
    
    futhark_mc_segmap_parloop_81780_task.name =
        "futhark_mc_segmap_parloop_81780";
    futhark_mc_segmap_parloop_81780_task.fn = futhark_mc_segmap_parloop_81780;
    futhark_mc_segmap_parloop_81780_task.args =
        &futhark_mc_segmap_parloop_struct_81779;
    futhark_mc_segmap_parloop_81780_task.iterations = iterations;
    futhark_mc_segmap_parloop_81780_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81780_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81780_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81780_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81780_task);
    
    if (futhark_mc_segmap_parloop_81780_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81780_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81780_total_end -
                 futhark_mc_segmap_parloop_81780_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81780_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81780_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81780_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81778_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81778_end -
                 futhark_mc_segmap_task_81778_start;
        
        ctx->futhark_mc_segmap_task_81778_runs[tid]++;
        ctx->futhark_mc_segmap_task_81778_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81778_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81781 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75568;
};
struct futhark_mc_segmap_parloop_struct_81783 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75568;
};
static int futhark_mc_segmap_parloop_81784(void *args, int64_t start,
                                           int64_t end, int flat_tid_72596,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81783
    *futhark_mc_segmap_parloop_struct_81783 =
    (struct futhark_mc_segmap_parloop_struct_81783 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81783->ctx;
    uint64_t futhark_mc_segmap_parloop_81784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81784_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81783->free_n_70233;
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segmap_parloop_struct_81783->free_mem_75565,
                                 .size =0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_segmap_parloop_struct_81783->free_mem_75568,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78647 = start;
    
    for (; iter_78647 < end; iter_78647++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78648 = n_70233;
        int64_t gtid_72597 = iter_78647;
        int64_t remnant_78649 = iter_78647 - gtid_72597;
        int64_t x_78239 = ((int64_t *) mem_75565.mem)[gtid_72597];
        int64_t defunc_0_f_res_78240 = add64((int64_t) 1, x_78239);
        
        ((int64_t *) mem_75568.mem)[gtid_72597] = defunc_0_f_res_78240;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81784_end -
                 futhark_mc_segmap_parloop_81784_start;
        
        ctx->futhark_mc_segmap_parloop_81784_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81784_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81782(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72596 = tid;
    int num_tasks_78646 = info.nsubtasks;
    struct futhark_mc_task_81781 *futhark_mc_task_81781 =
                                 (struct futhark_mc_task_81781 *) args;
    struct futhark_context *ctx = futhark_mc_task_81781->ctx;
    uint64_t futhark_mc_segmap_task_81782_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81782_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81781->free_n_70233;
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81781->free_mem_75565, .size =
                                 0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_task_81781->free_mem_75568, .size =
                                 0, .references =NULL};
    int64_t iter_78647;
    struct futhark_mc_segmap_parloop_struct_81783
    futhark_mc_segmap_parloop_struct_81783;
    
    futhark_mc_segmap_parloop_struct_81783.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81783.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81783.free_mem_75565 = mem_75565.mem;
    futhark_mc_segmap_parloop_struct_81783.free_mem_75568 = mem_75568.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81784_task;
    
    futhark_mc_segmap_parloop_81784_task.name =
        "futhark_mc_segmap_parloop_81784";
    futhark_mc_segmap_parloop_81784_task.fn = futhark_mc_segmap_parloop_81784;
    futhark_mc_segmap_parloop_81784_task.args =
        &futhark_mc_segmap_parloop_struct_81783;
    futhark_mc_segmap_parloop_81784_task.iterations = iterations;
    futhark_mc_segmap_parloop_81784_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81784_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81784_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81784_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81784_task);
    
    if (futhark_mc_segmap_parloop_81784_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81784_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81784_total_end -
                 futhark_mc_segmap_parloop_81784_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81784_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81784_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81784_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81782_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81782_end -
                 futhark_mc_segmap_task_81782_start;
        
        ctx->futhark_mc_segmap_task_81782_runs[tid]++;
        ctx->futhark_mc_segmap_task_81782_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81782_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81785 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75571;
};
struct futhark_mc_segmap_parloop_struct_81787 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75571;
};
static int futhark_mc_segmap_parloop_81788(void *args, int64_t start,
                                           int64_t end, int flat_tid_72598,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81787
    *futhark_mc_segmap_parloop_struct_81787 =
    (struct futhark_mc_segmap_parloop_struct_81787 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81787->ctx;
    uint64_t futhark_mc_segmap_parloop_81788_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81788_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81787->free_q_70235;
    int64_t last_res_72812 =
            futhark_mc_segmap_parloop_struct_81787->free_last_res_72812;
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_segmap_parloop_struct_81787->free_mem_75571,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78651 = start;
    
    for (; iter_78651 < end; iter_78651++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78652 = q_70235;
        int64_t gtid_72599 = iter_78651;
        int64_t remnant_78653 = iter_78651 - gtid_72599;
        bool cond_78241 = sle64(last_res_72812, gtid_72599);
        float defunc_0_f_res_78242;
        
        if (cond_78241) {
            defunc_0_f_res_78242 = 0.0F;
        } else {
            defunc_0_f_res_78242 = 1.0F;
        }
        ((float *) mem_75571.mem)[gtid_72599] = defunc_0_f_res_78242;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81788_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81788_end -
                 futhark_mc_segmap_parloop_81788_start;
        
        ctx->futhark_mc_segmap_parloop_81788_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81788_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81788_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81786(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72598 = tid;
    int num_tasks_78650 = info.nsubtasks;
    struct futhark_mc_task_81785 *futhark_mc_task_81785 =
                                 (struct futhark_mc_task_81785 *) args;
    struct futhark_context *ctx = futhark_mc_task_81785->ctx;
    uint64_t futhark_mc_segmap_task_81786_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81786_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81785->free_q_70235;
    int64_t last_res_72812 = futhark_mc_task_81785->free_last_res_72812;
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_task_81785->free_mem_75571, .size =
                                 0, .references =NULL};
    int64_t iter_78651;
    struct futhark_mc_segmap_parloop_struct_81787
    futhark_mc_segmap_parloop_struct_81787;
    
    futhark_mc_segmap_parloop_struct_81787.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81787.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81787.free_last_res_72812 = last_res_72812;
    futhark_mc_segmap_parloop_struct_81787.free_mem_75571 = mem_75571.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81788_task;
    
    futhark_mc_segmap_parloop_81788_task.name =
        "futhark_mc_segmap_parloop_81788";
    futhark_mc_segmap_parloop_81788_task.fn = futhark_mc_segmap_parloop_81788;
    futhark_mc_segmap_parloop_81788_task.args =
        &futhark_mc_segmap_parloop_struct_81787;
    futhark_mc_segmap_parloop_81788_task.iterations = iterations;
    futhark_mc_segmap_parloop_81788_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81788_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81788_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81788_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81788_task);
    
    if (futhark_mc_segmap_parloop_81788_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81788_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81788_total_end -
                 futhark_mc_segmap_parloop_81788_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81788_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81788_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81788_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81786_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81786_end -
                 futhark_mc_segmap_task_81786_start;
        
        ctx->futhark_mc_segmap_task_81786_runs[tid]++;
        ctx->futhark_mc_segmap_task_81786_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81786_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81789 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72812;
    int64_t free_min_arg_72827;
    int64_t free_min_arg_72828;
    int64_t free_min_res_72829;
    float free_max_res_72833;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75568;
    unsigned char *free_mem_75571;
    unsigned char *free_mem_75574;
    unsigned char *free_mem_75577;
};
struct futhark_mc_segmap_parloop_struct_81791 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72812;
    int64_t free_min_arg_72827;
    int64_t free_min_arg_72828;
    int64_t free_min_res_72829;
    float free_max_res_72833;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75568;
    unsigned char *free_mem_75571;
    unsigned char *free_mem_75574;
    unsigned char *free_mem_75577;
};
static int futhark_mc_segmap_parloop_81792(void *args, int64_t start,
                                           int64_t end, int flat_tid_72600,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81791
    *futhark_mc_segmap_parloop_struct_81791 =
    (struct futhark_mc_segmap_parloop_struct_81791 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81791->ctx;
    uint64_t futhark_mc_segmap_parloop_81792_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81792_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81791->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81791->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81791->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81791->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81791->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81791->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81791->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81791->free_loop_cond_70258;
    int64_t last_res_72812 =
            futhark_mc_segmap_parloop_struct_81791->free_last_res_72812;
    int64_t min_arg_72827 =
            futhark_mc_segmap_parloop_struct_81791->free_min_arg_72827;
    int64_t min_arg_72828 =
            futhark_mc_segmap_parloop_struct_81791->free_min_arg_72828;
    int64_t min_res_72829 =
            futhark_mc_segmap_parloop_struct_81791->free_min_res_72829;
    float max_res_72833 =
          futhark_mc_segmap_parloop_struct_81791->free_max_res_72833;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75562,
                                 .size =0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75565,
                                 .size =0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75568,
                                 .size =0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75571,
                                 .size =0, .references =NULL};
    struct memblock mem_75574 = {.desc ="mem_75574", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75574,
                                 .size =0, .references =NULL};
    struct memblock mem_75577 = {.desc ="mem_75577", .mem =
                                 futhark_mc_segmap_parloop_struct_81791->free_mem_75577,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78655 = start;
    
    for (; iter_78655 < end; iter_78655++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78780 = n_m_70241;
        int64_t gtid_72601 = iter_78655;
        int64_t remnant_78781 = iter_78655 - gtid_72601;
        int64_t min_arg_78435 = mul64(jump_70237, gtid_72601);
        int64_t min_res_78436 = smin64(i_70247, min_arg_78435);
        int64_t defunc_0_g_res_78437 = add64((int64_t) 1, min_res_78436);
        bool init_idx_78438;
        int64_t init_idx_78439;
        int64_t init_idx_78440;
        bool loop_while_78656;
        int64_t low_78657;
        int64_t high_78658;
        
        loop_while_78656 = x_70248;
        low_78657 = (int64_t) 0;
        high_78658 = i_70247;
        while (loop_while_78656) {
            int64_t x_78659 = add64(low_78657, high_78658);
            int64_t mid_78660 = sdiv64(x_78659, (int64_t) 2);
            bool x_78661 = sle64((int64_t) 0, mid_78660);
            bool y_78662 = slt64(mid_78660, n_70233);
            bool bounds_check_78663 = x_78661 && y_78662;
            bool index_certs_78664;
            
            if (!bounds_check_78663) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_78660,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_78665 = ((int64_t *) mem_75568.mem)[mid_78660];
            bool cond_78666 = slt64(mid_id_78665, (int64_t) 0);
            int64_t mid_idx_78667;
            
            if (cond_78666) {
                mid_idx_78667 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_78667 = mid_id_78665;
            }
            
            bool cond_78668 = sle64(defunc_0_g_res_78437, mid_idx_78667);
            int64_t loopres_78669;
            int64_t loopres_78670;
            
            if (cond_78668) {
                int64_t loopres_t_res_78671 = sub64(mid_78660, (int64_t) 1);
                
                loopres_78669 = low_78657;
                loopres_78670 = loopres_t_res_78671;
            } else {
                int64_t loopres_f_res_78672 = add64((int64_t) 1, mid_78660);
                
                loopres_78669 = loopres_f_res_78672;
                loopres_78670 = high_78658;
            }
            
            bool loop_cond_78673 = sle64(loopres_78669, loopres_78670);
            bool loop_while_tmp_78782 = loop_cond_78673;
            int64_t low_tmp_78783 = loopres_78669;
            int64_t high_tmp_78784 = loopres_78670;
            
            loop_while_78656 = loop_while_tmp_78782;
            low_78657 = low_tmp_78783;
            high_78658 = high_tmp_78784;
        }
        init_idx_78438 = loop_while_78656;
        init_idx_78439 = low_78657;
        init_idx_78440 = high_78658;
        
        bool idx_78459;
        int64_t idx_78460;
        int64_t idx_78461;
        int64_t idx_78462;
        bool loop_while_78674;
        int64_t l_idx_78675;
        int64_t r_idx_78676;
        int64_t span_78677;
        
        loop_while_78674 = loop_cond_70258;
        l_idx_78675 = init_idx_78439;
        r_idx_78676 = init_idx_78439;
        span_78677 = (int64_t) 1;
        while (loop_while_78674) {
            int64_t max_arg_78678 = sub64(l_idx_78675, (int64_t) 1);
            int64_t max_res_78679 = smax64((int64_t) 0, max_arg_78678);
            int64_t min_arg_78680 = add64((int64_t) 1, r_idx_78676);
            int64_t min_res_78681 = smin64(min_arg_72827, min_arg_78680);
            bool x_78682 = sle64((int64_t) 0, max_res_78679);
            bool y_78683 = slt64(max_res_78679, n_70233);
            bool bounds_check_78684 = x_78682 && y_78683;
            bool index_certs_78685;
            
            if (!bounds_check_78684) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78679,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78686 = ((int64_t *) mem_75568.mem)[max_res_78679];
            int64_t abs_arg_78687 = sub64(x_78686, defunc_0_g_res_78437);
            int64_t abs_res_78688 = abs64(abs_arg_78687);
            bool x_78689 = sle64((int64_t) 0, min_res_78681);
            bool y_78690 = slt64(min_res_78681, n_70233);
            bool bounds_check_78691 = x_78689 && y_78690;
            bool index_certs_78692;
            
            if (!bounds_check_78691) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_78681,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78693 = ((int64_t *) mem_75568.mem)[min_res_78681];
            int64_t abs_arg_78694 = sub64(x_78693, defunc_0_g_res_78437);
            int64_t abs_res_78695 = abs64(abs_arg_78694);
            bool cond_78696 = max_res_78679 == l_idx_78675;
            int64_t loopres_78697;
            int64_t loopres_78698;
            int64_t loopres_78699;
            
            if (cond_78696) {
                loopres_78697 = l_idx_78675;
                loopres_78698 = r_idx_78676;
                loopres_78699 = min_res_70253;
            } else {
                bool cond_78700 = slt64(abs_res_78688, abs_res_78695);
                bool cond_f_res_78701 = min_res_78681 == r_idx_78676;
                bool x_78702 = !cond_78700;
                bool y_78703 = cond_f_res_78701 && x_78702;
                bool cond_78704 = cond_78700 || y_78703;
                int64_t loopres_f_res_78705;
                
                if (cond_78704) {
                    loopres_f_res_78705 = max_res_78679;
                } else {
                    loopres_f_res_78705 = l_idx_78675;
                }
                
                int64_t loopres_f_res_78706;
                
                if (cond_78704) {
                    loopres_f_res_78706 = r_idx_78676;
                } else {
                    loopres_f_res_78706 = min_res_78681;
                }
                
                int64_t loopres_f_res_78707;
                
                if (cond_78704) {
                    int64_t loopres_f_res_t_res_78708 = add64((int64_t) 1,
                                                              span_78677);
                    
                    loopres_f_res_78707 = loopres_f_res_t_res_78708;
                } else {
                    int64_t loopres_f_res_f_res_78709 = add64((int64_t) 1,
                                                              span_78677);
                    
                    loopres_f_res_78707 = loopres_f_res_f_res_78709;
                }
                loopres_78697 = loopres_f_res_78705;
                loopres_78698 = loopres_f_res_78706;
                loopres_78699 = loopres_f_res_78707;
            }
            
            bool loop_cond_78710 = slt64(loopres_78699, min_res_70253);
            bool loop_while_tmp_78785 = loop_cond_78710;
            int64_t l_idx_tmp_78786 = loopres_78697;
            int64_t r_idx_tmp_78787 = loopres_78698;
            int64_t span_tmp_78788 = loopres_78699;
            
            loop_while_78674 = loop_while_tmp_78785;
            l_idx_78675 = l_idx_tmp_78786;
            r_idx_78676 = r_idx_tmp_78787;
            span_78677 = span_tmp_78788;
        }
        idx_78459 = loop_while_78674;
        idx_78460 = l_idx_78675;
        idx_78461 = r_idx_78676;
        idx_78462 = span_78677;
        
        int64_t min_res_78500 = smin64(min_arg_72828, idx_78460);
        int64_t max_res_78501 = smax64((int64_t) 0, min_res_78500);
        int64_t x_78502 = add64(min_res_72829, max_res_78501);
        int64_t r_78503 = sub64(x_78502, (int64_t) 1);
        bool x_78504 = sle64((int64_t) 0, r_78503);
        bool y_78505 = slt64(r_78503, n_70233);
        bool bounds_check_78506 = x_78504 && y_78505;
        bool index_certs_78507;
        
        if (!bounds_check_78506) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_78503,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_78508 = ((int64_t *) mem_75565.mem)[r_78503];
        int64_t abs_arg_78509 = sub64(x_78508, min_res_78436);
        int64_t abs_res_78510 = abs64(abs_arg_78509);
        bool x_78511 = sle64((int64_t) 0, max_res_78501);
        bool y_78512 = slt64(max_res_78501, n_70233);
        bool bounds_check_78513 = x_78511 && y_78512;
        bool index_certs_78514;
        
        if (!bounds_check_78513) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_78501,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_78515 = ((int64_t *) mem_75565.mem)[max_res_78501];
        int64_t abs_arg_78516 = sub64(x_78515, min_res_78436);
        int64_t abs_res_78517 = abs64(abs_arg_78516);
        int64_t max_res_78518 = smax64(abs_res_78510, abs_res_78517);
        float defunc_0_f_res_78519 = sitofp_i64_f32(max_res_78518);
        float defunc_1_f_res_78520 = max_res_72833 + defunc_0_f_res_78519;
        float defunc_2_reduce_res_78521;
        float defunc_2_reduce_res_78522;
        float defunc_2_reduce_res_78523;
        float defunc_2_reduce_res_78524;
        float defunc_2_reduce_res_78525;
        float redout_78712;
        float redout_78713;
        float redout_78714;
        float redout_78715;
        float redout_78716;
        
        redout_78712 = 0.0F;
        redout_78713 = 0.0F;
        redout_78714 = 0.0F;
        redout_78715 = 0.0F;
        redout_78716 = 0.0F;
        for (int64_t i_78711 = 0; i_78711 < q_70235; i_78711++) {
            float x_78717 = ((float *) mem_75571.mem)[i_78711];
            bool cond_78718 = sle64(last_res_72812, i_78711);
            int64_t defunc_0_f_res_78719;
            
            if (cond_78718) {
                defunc_0_f_res_78719 = (int64_t) 0;
            } else {
                int64_t i_78720 = add64(max_res_78501, i_78711);
                int64_t defunc_0_add_arg_78721 =
                        ((int64_t *) mem_75565.mem)[i_78720];
                int64_t defunc_1_add_res_78722 = add64((int64_t) 1,
                                                       defunc_0_add_arg_78721);
                
                defunc_0_f_res_78719 = defunc_1_add_res_78722;
            }
            
            int64_t binop_p_78723 = sub64(defunc_0_f_res_78719, min_res_78436);
            float defunc_0_f_res_78724 = sitofp_i64_f32(binop_p_78723);
            float abs_res_78725 = (float) fabs(defunc_0_f_res_78724);
            float tmp1_78726 = abs_res_78725 / defunc_1_f_res_78520;
            float x_78727 = tmp1_78726 * tmp1_78726;
            float y_78728 = tmp1_78726 * x_78727;
            float tmp2_78729 = 1.0F - y_78728;
            float x_78730 = tmp2_78729 * tmp2_78729;
            float tmp3_78731 = tmp2_78729 * x_78730;
            float w_j_78732 = x_78717 * tmp3_78731;
            float xw_j_78733 = defunc_0_f_res_78724 * w_j_78732;
            float x2w_j_78734 = defunc_0_f_res_78724 * xw_j_78733;
            float x3w_j_78735 = defunc_0_f_res_78724 * x2w_j_78734;
            float x4w_j_78736 = defunc_0_f_res_78724 * x3w_j_78735;
            float defunc_1_op_res_78737 = w_j_78732 + redout_78712;
            float defunc_1_op_res_78738 = xw_j_78733 + redout_78713;
            float defunc_1_op_res_78739 = x2w_j_78734 + redout_78714;
            float defunc_1_op_res_78740 = x3w_j_78735 + redout_78715;
            float defunc_1_op_res_78741 = x4w_j_78736 + redout_78716;
            float redout_tmp_78789 = defunc_1_op_res_78737;
            float redout_tmp_78790 = defunc_1_op_res_78738;
            float redout_tmp_78791 = defunc_1_op_res_78739;
            float redout_tmp_78792 = defunc_1_op_res_78740;
            float redout_tmp_78793 = defunc_1_op_res_78741;
            
            redout_78712 = redout_tmp_78789;
            redout_78713 = redout_tmp_78790;
            redout_78714 = redout_tmp_78791;
            redout_78715 = redout_tmp_78792;
            redout_78716 = redout_tmp_78793;
        }
        defunc_2_reduce_res_78521 = redout_78712;
        defunc_2_reduce_res_78522 = redout_78713;
        defunc_2_reduce_res_78523 = redout_78714;
        defunc_2_reduce_res_78524 = redout_78715;
        defunc_2_reduce_res_78525 = redout_78716;
        
        float x_78557 = defunc_2_reduce_res_78523 * defunc_2_reduce_res_78525;
        float y_78558 = defunc_2_reduce_res_78524 * defunc_2_reduce_res_78524;
        float a12_78559 = x_78557 - y_78558;
        float x_78560 = defunc_2_reduce_res_78523 * defunc_2_reduce_res_78524;
        float y_78561 = defunc_2_reduce_res_78522 * defunc_2_reduce_res_78525;
        float b12_78562 = x_78560 - y_78561;
        float x_78563 = defunc_2_reduce_res_78522 * defunc_2_reduce_res_78524;
        float y_78564 = defunc_2_reduce_res_78523 * defunc_2_reduce_res_78523;
        float c12_78565 = x_78563 - y_78564;
        float x_78566 = defunc_2_reduce_res_78521 * defunc_2_reduce_res_78525;
        float b2_78567 = x_78566 - y_78564;
        float x_78568 = defunc_2_reduce_res_78522 * defunc_2_reduce_res_78523;
        float y_78569 = defunc_2_reduce_res_78521 * defunc_2_reduce_res_78524;
        float c2_78570 = x_78568 - y_78569;
        float x_78571 = defunc_2_reduce_res_78521 * a12_78559;
        float y_78572 = defunc_2_reduce_res_78522 * b12_78562;
        float x_78573 = x_78571 + y_78572;
        float y_78574 = defunc_2_reduce_res_78523 * c12_78565;
        float y_78575 = x_78573 + y_78574;
        float det_78576 = 1.0F / y_78575;
        float a12_78577 = a12_78559 * det_78576;
        float b12_78578 = b12_78562 * det_78576;
        float c12_78579 = c12_78565 * det_78576;
        float b2_78580 = b2_78567 * det_78576;
        float c2_78581 = c2_78570 * det_78576;
        float defunc_2_reduce_res_78582;
        float defunc_2_reduce_res_78583;
        float redout_78743;
        float redout_78744;
        
        redout_78743 = 0.0F;
        redout_78744 = 0.0F;
        for (int64_t i_78742 = 0; i_78742 < q_70235; i_78742++) {
            float x_78745 = ((float *) mem_75571.mem)[i_78742];
            bool cond_78746 = sle64(last_res_72812, i_78742);
            int64_t defunc_0_f_res_78747;
            
            if (cond_78746) {
                defunc_0_f_res_78747 = (int64_t) 0;
            } else {
                int64_t i_78748 = add64(max_res_78501, i_78742);
                int64_t defunc_0_add_arg_78749 =
                        ((int64_t *) mem_75565.mem)[i_78748];
                int64_t defunc_1_add_res_78750 = add64((int64_t) 1,
                                                       defunc_0_add_arg_78749);
                
                defunc_0_f_res_78747 = defunc_1_add_res_78750;
            }
            
            int64_t binop_p_78751 = sub64(defunc_0_f_res_78747, min_res_78436);
            float defunc_0_f_res_78752 = sitofp_i64_f32(binop_p_78751);
            float abs_res_78753 = (float) fabs(defunc_0_f_res_78752);
            float tmp1_78754 = abs_res_78753 / defunc_1_f_res_78520;
            float x_78755 = tmp1_78754 * tmp1_78754;
            float y_78756 = tmp1_78754 * x_78755;
            float tmp2_78757 = 1.0F - y_78756;
            float x_78758 = tmp2_78757 * tmp2_78757;
            float tmp3_78759 = tmp2_78757 * x_78758;
            float tmp4_78760 = x_78745 * tmp3_78759;
            float defunc_1_f_res_78761 = defunc_0_f_res_78752 * tmp4_78760;
            float defunc_1_f_res_78762 = defunc_0_f_res_78752 *
                  defunc_1_f_res_78761;
            float defunc_0_f_res_78763;
            
            if (cond_78746) {
                defunc_0_f_res_78763 = 0.0F;
            } else {
                int64_t i_78764 = add64(max_res_78501, i_78742);
                float defunc_0_add_arg_78765 =
                      ((float *) mem_75562.mem)[i_78764];
                
                defunc_0_f_res_78763 = defunc_0_add_arg_78765;
            }
            
            float x_78766 = a12_78577 * tmp4_78760;
            float y_78767 = b12_78578 * defunc_1_f_res_78761;
            float x_78768 = x_78766 + y_78767;
            float y_78769 = c12_78579 * defunc_1_f_res_78762;
            float x_78770 = x_78768 + y_78769;
            float defunc_9_fit_fun_res_78771 = defunc_0_f_res_78763 * x_78770;
            float x_78772 = b12_78578 * tmp4_78760;
            float y_78773 = b2_78580 * defunc_1_f_res_78761;
            float x_78774 = x_78772 + y_78773;
            float y_78775 = c2_78581 * defunc_1_f_res_78762;
            float x_78776 = x_78774 + y_78775;
            float defunc_9_slope_fun_res_78777 = defunc_0_f_res_78763 * x_78776;
            float defunc_1_op_res_78778 = defunc_9_fit_fun_res_78771 +
                  redout_78743;
            float defunc_1_op_res_78779 = defunc_9_slope_fun_res_78777 +
                  redout_78744;
            float redout_tmp_78794 = defunc_1_op_res_78778;
            float redout_tmp_78795 = defunc_1_op_res_78779;
            
            redout_78743 = redout_tmp_78794;
            redout_78744 = redout_tmp_78795;
        }
        defunc_2_reduce_res_78582 = redout_78743;
        defunc_2_reduce_res_78583 = redout_78744;
        ((float *) mem_75574.mem)[gtid_72601] = defunc_2_reduce_res_78582;
        ((float *) mem_75577.mem)[gtid_72601] = defunc_2_reduce_res_78583;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81792_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81792_end -
                 futhark_mc_segmap_parloop_81792_start;
        
        ctx->futhark_mc_segmap_parloop_81792_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81792_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81792_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81790(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72600 = tid;
    int num_tasks_78654 = info.nsubtasks;
    struct futhark_mc_task_81789 *futhark_mc_task_81789 =
                                 (struct futhark_mc_task_81789 *) args;
    struct futhark_context *ctx = futhark_mc_task_81789->ctx;
    uint64_t futhark_mc_segmap_task_81790_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81790_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81789->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81789->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81789->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81789->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81789->free_i_70247;
    bool x_70248 = futhark_mc_task_81789->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81789->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81789->free_loop_cond_70258;
    int64_t last_res_72812 = futhark_mc_task_81789->free_last_res_72812;
    int64_t min_arg_72827 = futhark_mc_task_81789->free_min_arg_72827;
    int64_t min_arg_72828 = futhark_mc_task_81789->free_min_arg_72828;
    int64_t min_res_72829 = futhark_mc_task_81789->free_min_res_72829;
    float max_res_72833 = futhark_mc_task_81789->free_max_res_72833;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_task_81789->free_mem_75562, .size =
                                 0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81789->free_mem_75565, .size =
                                 0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_task_81789->free_mem_75568, .size =
                                 0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_task_81789->free_mem_75571, .size =
                                 0, .references =NULL};
    struct memblock mem_75574 = {.desc ="mem_75574", .mem =
                                 futhark_mc_task_81789->free_mem_75574, .size =
                                 0, .references =NULL};
    struct memblock mem_75577 = {.desc ="mem_75577", .mem =
                                 futhark_mc_task_81789->free_mem_75577, .size =
                                 0, .references =NULL};
    int64_t iter_78655;
    struct futhark_mc_segmap_parloop_struct_81791
    futhark_mc_segmap_parloop_struct_81791;
    
    futhark_mc_segmap_parloop_struct_81791.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81791.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81791.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81791.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81791.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81791.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81791.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81791.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81791.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81791.free_last_res_72812 = last_res_72812;
    futhark_mc_segmap_parloop_struct_81791.free_min_arg_72827 = min_arg_72827;
    futhark_mc_segmap_parloop_struct_81791.free_min_arg_72828 = min_arg_72828;
    futhark_mc_segmap_parloop_struct_81791.free_min_res_72829 = min_res_72829;
    futhark_mc_segmap_parloop_struct_81791.free_max_res_72833 = max_res_72833;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75562 = mem_75562.mem;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75565 = mem_75565.mem;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75568 = mem_75568.mem;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75571 = mem_75571.mem;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75574 = mem_75574.mem;
    futhark_mc_segmap_parloop_struct_81791.free_mem_75577 = mem_75577.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81792_task;
    
    futhark_mc_segmap_parloop_81792_task.name =
        "futhark_mc_segmap_parloop_81792";
    futhark_mc_segmap_parloop_81792_task.fn = futhark_mc_segmap_parloop_81792;
    futhark_mc_segmap_parloop_81792_task.args =
        &futhark_mc_segmap_parloop_struct_81791;
    futhark_mc_segmap_parloop_81792_task.iterations = iterations;
    futhark_mc_segmap_parloop_81792_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81792_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81792_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81792_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81792_task);
    
    if (futhark_mc_segmap_parloop_81792_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81792_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81792_total_end -
                 futhark_mc_segmap_parloop_81792_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81792_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81792_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81792_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81790_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81790_end -
                 futhark_mc_segmap_task_81790_start;
        
        ctx->futhark_mc_segmap_task_81790_runs[tid]++;
        ctx->futhark_mc_segmap_task_81790_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81790_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81794 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_72812;
    int64_t free_min_arg_72827;
    int64_t free_min_arg_72828;
    int64_t free_min_res_72829;
    float free_max_res_72833;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75568;
    unsigned char *free_mem_75571;
    unsigned char *free_mem_75574;
    unsigned char *free_mem_75577;
};
struct futhark_mc_task_81796 {
    struct futhark_context *ctx;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75571;
    int64_t free_min_res_78244;
    int64_t free_max_res_78309;
    float free_defunc_1_f_res_78328;
    float *retval_defunc_2_reduce_res_78329;
    float *retval_defunc_2_reduce_res_78330;
    float *retval_defunc_2_reduce_res_78331;
    float *retval_defunc_2_reduce_res_78332;
    float *retval_defunc_2_reduce_res_78333;
};
struct futhark_mc_segred_stage_1_parloop_struct_81803 {
    struct futhark_context *ctx;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75571;
    int64_t free_min_res_78244;
    int64_t free_max_res_78309;
    float free_defunc_1_f_res_78328;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78936;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78938;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78940;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78942;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78944;
};
static int futhark_mc_segred_stage_1_parloop_81804(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72604, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81803
    *futhark_mc_segred_stage_1_parloop_struct_81803 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81803 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81803->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81804_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81804_start = get_wall_time();
    
    int64_t last_res_72812 =
            futhark_mc_segred_stage_1_parloop_struct_81803->free_last_res_72812;
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81803->free_mem_75565,
                                 .size =0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81803->free_mem_75571,
                                 .size =0, .references =NULL};
    int64_t min_res_78244 =
            futhark_mc_segred_stage_1_parloop_struct_81803->free_min_res_78244;
    int64_t max_res_78309 =
            futhark_mc_segred_stage_1_parloop_struct_81803->free_max_res_78309;
    float defunc_1_f_res_78328 =
          futhark_mc_segred_stage_1_parloop_struct_81803->free_defunc_1_f_res_78328;
    struct memblock reduce_stage_1_tid_res_arr_mem_78936 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78936",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81803->free_reduce_stage_1_tid_res_arr_mem_78936,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78938 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78938",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81803->free_reduce_stage_1_tid_res_arr_mem_78938,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78940 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78940",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81803->free_reduce_stage_1_tid_res_arr_mem_78940,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78942 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78942",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81803->free_reduce_stage_1_tid_res_arr_mem_78942,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78944 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78944",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81803->free_reduce_stage_1_tid_res_arr_mem_78944,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78946 = start;
    float x_78852;
    float x_78853;
    float x_78855;
    float x_78856;
    float x_78858;
    float x_78859;
    float x_78861;
    float x_78862;
    float x_78864;
    float x_78865;
    float local_acc_78947 = 0.0F;
    float local_acc_78948 = 0.0F;
    float local_acc_78949 = 0.0F;
    float local_acc_78950 = 0.0F;
    float local_acc_78951 = 0.0F;
    
    for (; iter_78946 < end; iter_78946++) {
        int64_t gtid_72605 = iter_78946;
        float x_78867 = ((float *) mem_75571.mem)[gtid_72605];
        bool cond_78868 = sle64(last_res_72812, gtid_72605);
        int64_t defunc_0_f_res_78869;
        
        if (cond_78868) {
            defunc_0_f_res_78869 = (int64_t) 0;
        } else {
            int64_t i_78870 = add64(gtid_72605, max_res_78309);
            int64_t defunc_0_add_arg_78871 =
                    ((int64_t *) mem_75565.mem)[i_78870];
            int64_t defunc_1_add_res_78872 = add64((int64_t) 1,
                                                   defunc_0_add_arg_78871);
            
            defunc_0_f_res_78869 = defunc_1_add_res_78872;
        }
        
        int64_t binop_p_78873 = sub64(defunc_0_f_res_78869, min_res_78244);
        float defunc_0_f_res_78874 = sitofp_i64_f32(binop_p_78873);
        float abs_res_78875 = (float) fabs(defunc_0_f_res_78874);
        float tmp1_78876 = abs_res_78875 / defunc_1_f_res_78328;
        float x_78877 = tmp1_78876 * tmp1_78876;
        float y_78878 = tmp1_78876 * x_78877;
        float tmp2_78879 = 1.0F - y_78878;
        float x_78880 = tmp2_78879 * tmp2_78879;
        float tmp3_78881 = tmp2_78879 * x_78880;
        float w_j_78882 = x_78867 * tmp3_78881;
        float xw_j_78883 = defunc_0_f_res_78874 * w_j_78882;
        float x2w_j_78884 = defunc_0_f_res_78874 * xw_j_78883;
        float x3w_j_78885 = defunc_0_f_res_78874 * x2w_j_78884;
        float x4w_j_78886 = defunc_0_f_res_78874 * x3w_j_78885;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_78852 = local_acc_78947;
        }
        // Load next params
        {
            x_78853 = w_j_78882;
        }
        // Red body
        {
            float defunc_1_op_res_78854 = x_78852 + x_78853;
            
            local_acc_78947 = defunc_1_op_res_78854;
        }
        // Load accum params
        {
            x_78855 = local_acc_78948;
        }
        // Load next params
        {
            x_78856 = xw_j_78883;
        }
        // Red body
        {
            float defunc_1_op_res_78857 = x_78855 + x_78856;
            
            local_acc_78948 = defunc_1_op_res_78857;
        }
        // Load accum params
        {
            x_78858 = local_acc_78949;
        }
        // Load next params
        {
            x_78859 = x2w_j_78884;
        }
        // Red body
        {
            float defunc_1_op_res_78860 = x_78858 + x_78859;
            
            local_acc_78949 = defunc_1_op_res_78860;
        }
        // Load accum params
        {
            x_78861 = local_acc_78950;
        }
        // Load next params
        {
            x_78862 = x3w_j_78885;
        }
        // Red body
        {
            float defunc_1_op_res_78863 = x_78861 + x_78862;
            
            local_acc_78950 = defunc_1_op_res_78863;
        }
        // Load accum params
        {
            x_78864 = local_acc_78951;
        }
        // Load next params
        {
            x_78865 = x4w_j_78886;
        }
        // Red body
        {
            float defunc_1_op_res_78866 = x_78864 + x_78865;
            
            local_acc_78951 = defunc_1_op_res_78866;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_78936.mem)[flat_tid_72604] =
        local_acc_78947;
    ((float *) reduce_stage_1_tid_res_arr_mem_78938.mem)[flat_tid_72604] =
        local_acc_78948;
    ((float *) reduce_stage_1_tid_res_arr_mem_78940.mem)[flat_tid_72604] =
        local_acc_78949;
    ((float *) reduce_stage_1_tid_res_arr_mem_78942.mem)[flat_tid_72604] =
        local_acc_78950;
    ((float *) reduce_stage_1_tid_res_arr_mem_78944.mem)[flat_tid_72604] =
        local_acc_78951;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81804_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81804_end -
                 futhark_mc_segred_stage_1_parloop_81804_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81804_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81804_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81804_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81797(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72604 = tid;
    int num_tasks_78935 = info.nsubtasks;
    struct futhark_mc_task_81796 *futhark_mc_task_81796 =
                                 (struct futhark_mc_task_81796 *) args;
    struct futhark_context *ctx = futhark_mc_task_81796->ctx;
    uint64_t futhark_mc_segred_task_81797_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81797_start = get_wall_time();
    
    int64_t last_res_72812 = futhark_mc_task_81796->free_last_res_72812;
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81796->free_mem_75565, .size =
                                 0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_task_81796->free_mem_75571, .size =
                                 0, .references =NULL};
    int64_t min_res_78244 = futhark_mc_task_81796->free_min_res_78244;
    int64_t max_res_78309 = futhark_mc_task_81796->free_max_res_78309;
    float defunc_1_f_res_78328 =
          futhark_mc_task_81796->free_defunc_1_f_res_78328;
    float defunc_2_reduce_res_78329 =
          *futhark_mc_task_81796->retval_defunc_2_reduce_res_78329;
    float defunc_2_reduce_res_78330 =
          *futhark_mc_task_81796->retval_defunc_2_reduce_res_78330;
    float defunc_2_reduce_res_78331 =
          *futhark_mc_task_81796->retval_defunc_2_reduce_res_78331;
    float defunc_2_reduce_res_78332 =
          *futhark_mc_task_81796->retval_defunc_2_reduce_res_78332;
    float defunc_2_reduce_res_78333 =
          *futhark_mc_task_81796->retval_defunc_2_reduce_res_78333;
    size_t reduce_stage_1_tid_res_arr_mem_78936_cached_sizze_81798 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78936 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78938_cached_sizze_81799 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78938 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78940_cached_sizze_81800 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78940 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78942_cached_sizze_81801 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78942 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78944_cached_sizze_81802 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78944 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_78936_cached_sizze_81798 <
        (size_t) ((int64_t) 4 * num_tasks_78935)) {
        reduce_stage_1_tid_res_arr_mem_78936 =
            realloc(reduce_stage_1_tid_res_arr_mem_78936, (int64_t) 4 *
                    num_tasks_78935);
        reduce_stage_1_tid_res_arr_mem_78936_cached_sizze_81798 = (int64_t) 4 *
            num_tasks_78935;
    }
    if (reduce_stage_1_tid_res_arr_mem_78938_cached_sizze_81799 <
        (size_t) ((int64_t) 4 * num_tasks_78935)) {
        reduce_stage_1_tid_res_arr_mem_78938 =
            realloc(reduce_stage_1_tid_res_arr_mem_78938, (int64_t) 4 *
                    num_tasks_78935);
        reduce_stage_1_tid_res_arr_mem_78938_cached_sizze_81799 = (int64_t) 4 *
            num_tasks_78935;
    }
    if (reduce_stage_1_tid_res_arr_mem_78940_cached_sizze_81800 <
        (size_t) ((int64_t) 4 * num_tasks_78935)) {
        reduce_stage_1_tid_res_arr_mem_78940 =
            realloc(reduce_stage_1_tid_res_arr_mem_78940, (int64_t) 4 *
                    num_tasks_78935);
        reduce_stage_1_tid_res_arr_mem_78940_cached_sizze_81800 = (int64_t) 4 *
            num_tasks_78935;
    }
    if (reduce_stage_1_tid_res_arr_mem_78942_cached_sizze_81801 <
        (size_t) ((int64_t) 4 * num_tasks_78935)) {
        reduce_stage_1_tid_res_arr_mem_78942 =
            realloc(reduce_stage_1_tid_res_arr_mem_78942, (int64_t) 4 *
                    num_tasks_78935);
        reduce_stage_1_tid_res_arr_mem_78942_cached_sizze_81801 = (int64_t) 4 *
            num_tasks_78935;
    }
    if (reduce_stage_1_tid_res_arr_mem_78944_cached_sizze_81802 <
        (size_t) ((int64_t) 4 * num_tasks_78935)) {
        reduce_stage_1_tid_res_arr_mem_78944 =
            realloc(reduce_stage_1_tid_res_arr_mem_78944, (int64_t) 4 *
                    num_tasks_78935);
        reduce_stage_1_tid_res_arr_mem_78944_cached_sizze_81802 = (int64_t) 4 *
            num_tasks_78935;
    }
    
    int64_t iter_78946;
    struct futhark_mc_segred_stage_1_parloop_struct_81803
    futhark_mc_segred_stage_1_parloop_struct_81803;
    
    futhark_mc_segred_stage_1_parloop_struct_81803.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_last_res_72812 =
        last_res_72812;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_mem_75565 =
        mem_75565.mem;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_mem_75571 =
        mem_75571.mem;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_min_res_78244 =
        min_res_78244;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_max_res_78309 =
        max_res_78309;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_defunc_1_f_res_78328 =
        defunc_1_f_res_78328;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_reduce_stage_1_tid_res_arr_mem_78936 =
        reduce_stage_1_tid_res_arr_mem_78936;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_reduce_stage_1_tid_res_arr_mem_78938 =
        reduce_stage_1_tid_res_arr_mem_78938;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_reduce_stage_1_tid_res_arr_mem_78940 =
        reduce_stage_1_tid_res_arr_mem_78940;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_reduce_stage_1_tid_res_arr_mem_78942 =
        reduce_stage_1_tid_res_arr_mem_78942;
    futhark_mc_segred_stage_1_parloop_struct_81803.free_reduce_stage_1_tid_res_arr_mem_78944 =
        reduce_stage_1_tid_res_arr_mem_78944;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81804_task;
    
    futhark_mc_segred_stage_1_parloop_81804_task.name =
        "futhark_mc_segred_stage_1_parloop_81804";
    futhark_mc_segred_stage_1_parloop_81804_task.fn =
        futhark_mc_segred_stage_1_parloop_81804;
    futhark_mc_segred_stage_1_parloop_81804_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81803;
    futhark_mc_segred_stage_1_parloop_81804_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81804_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81804_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81804_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81804_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81804_task);
    
    if (futhark_mc_segred_stage_1_parloop_81804_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81804_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81804_total_end -
                 futhark_mc_segred_stage_1_parloop_81804_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81804_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81804_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81804_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_78329 = 0.0F;
        defunc_2_reduce_res_78330 = 0.0F;
        defunc_2_reduce_res_78331 = 0.0F;
        defunc_2_reduce_res_78332 = 0.0F;
        defunc_2_reduce_res_78333 = 0.0F;
    }
    
    float x_78952;
    float x_78953;
    float x_78955;
    float x_78956;
    float x_78958;
    float x_78959;
    float x_78961;
    float x_78962;
    float x_78964;
    float x_78965;
    
    for (int32_t i_78967 = 0; i_78967 < num_tasks_78935; i_78967++) {
        flat_tid_72604 = i_78967;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_78952 = defunc_2_reduce_res_78329;
            }
            // load next params
            {
                x_78953 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78936)[flat_tid_72604];
            }
            // red body
            {
                float defunc_1_op_res_78954 = x_78952 + x_78953;
                
                defunc_2_reduce_res_78329 = defunc_1_op_res_78954;
            }
            // load acc params
            {
                x_78955 = defunc_2_reduce_res_78330;
            }
            // load next params
            {
                x_78956 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78938)[flat_tid_72604];
            }
            // red body
            {
                float defunc_1_op_res_78957 = x_78955 + x_78956;
                
                defunc_2_reduce_res_78330 = defunc_1_op_res_78957;
            }
            // load acc params
            {
                x_78958 = defunc_2_reduce_res_78331;
            }
            // load next params
            {
                x_78959 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78940)[flat_tid_72604];
            }
            // red body
            {
                float defunc_1_op_res_78960 = x_78958 + x_78959;
                
                defunc_2_reduce_res_78331 = defunc_1_op_res_78960;
            }
            // load acc params
            {
                x_78961 = defunc_2_reduce_res_78332;
            }
            // load next params
            {
                x_78962 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78942)[flat_tid_72604];
            }
            // red body
            {
                float defunc_1_op_res_78963 = x_78961 + x_78962;
                
                defunc_2_reduce_res_78332 = defunc_1_op_res_78963;
            }
            // load acc params
            {
                x_78964 = defunc_2_reduce_res_78333;
            }
            // load next params
            {
                x_78965 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78944)[flat_tid_72604];
            }
            // red body
            {
                float defunc_1_op_res_78966 = x_78964 + x_78965;
                
                defunc_2_reduce_res_78333 = defunc_1_op_res_78966;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_78936);
    free(reduce_stage_1_tid_res_arr_mem_78938);
    free(reduce_stage_1_tid_res_arr_mem_78940);
    free(reduce_stage_1_tid_res_arr_mem_78942);
    free(reduce_stage_1_tid_res_arr_mem_78944);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81797_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81797_end -
                 futhark_mc_segred_task_81797_start;
        
        ctx->futhark_mc_segred_task_81797_runs[tid]++;
        ctx->futhark_mc_segred_task_81797_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81797_iter[tid] += iterations;
    }
    *futhark_mc_task_81796->retval_defunc_2_reduce_res_78329 =
        defunc_2_reduce_res_78329;
    *futhark_mc_task_81796->retval_defunc_2_reduce_res_78330 =
        defunc_2_reduce_res_78330;
    *futhark_mc_task_81796->retval_defunc_2_reduce_res_78331 =
        defunc_2_reduce_res_78331;
    *futhark_mc_task_81796->retval_defunc_2_reduce_res_78332 =
        defunc_2_reduce_res_78332;
    *futhark_mc_task_81796->retval_defunc_2_reduce_res_78333 =
        defunc_2_reduce_res_78333;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81805 {
    struct futhark_context *ctx;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75571;
    int64_t free_min_res_78244;
    int64_t free_max_res_78309;
    float free_defunc_1_f_res_78328;
    float free_a12_78389;
    float free_b12_78390;
    float free_c12_78391;
    float free_b2_78392;
    float free_c2_78393;
    float *retval_defunc_2_reduce_res_78394;
    float *retval_defunc_2_reduce_res_78395;
};
struct futhark_mc_segred_stage_1_parloop_struct_81809 {
    struct futhark_context *ctx;
    int64_t free_last_res_72812;
    unsigned char *free_mem_75562;
    unsigned char *free_mem_75565;
    unsigned char *free_mem_75571;
    int64_t free_min_res_78244;
    int64_t free_max_res_78309;
    float free_defunc_1_f_res_78328;
    float free_a12_78389;
    float free_b12_78390;
    float free_c12_78391;
    float free_b2_78392;
    float free_c2_78393;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78969;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78971;
};
static int futhark_mc_segred_stage_1_parloop_81810(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72606, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81809
    *futhark_mc_segred_stage_1_parloop_struct_81809 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81809 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81809->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81810_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81810_start = get_wall_time();
    
    int64_t last_res_72812 =
            futhark_mc_segred_stage_1_parloop_struct_81809->free_last_res_72812;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81809->free_mem_75562,
                                 .size =0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81809->free_mem_75565,
                                 .size =0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81809->free_mem_75571,
                                 .size =0, .references =NULL};
    int64_t min_res_78244 =
            futhark_mc_segred_stage_1_parloop_struct_81809->free_min_res_78244;
    int64_t max_res_78309 =
            futhark_mc_segred_stage_1_parloop_struct_81809->free_max_res_78309;
    float defunc_1_f_res_78328 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_defunc_1_f_res_78328;
    float a12_78389 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_a12_78389;
    float b12_78390 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_b12_78390;
    float c12_78391 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_c12_78391;
    float b2_78392 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_b2_78392;
    float c2_78393 =
          futhark_mc_segred_stage_1_parloop_struct_81809->free_c2_78393;
    struct memblock reduce_stage_1_tid_res_arr_mem_78969 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78969",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81809->free_reduce_stage_1_tid_res_arr_mem_78969,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78971 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78971",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81809->free_reduce_stage_1_tid_res_arr_mem_78971,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78973 = start;
    float x_78887;
    float x_78888;
    float x_78890;
    float x_78891;
    float local_acc_78974 = 0.0F;
    float local_acc_78975 = 0.0F;
    
    for (; iter_78973 < end; iter_78973++) {
        int64_t gtid_72607 = iter_78973;
        float x_78893 = ((float *) mem_75571.mem)[gtid_72607];
        bool cond_78894 = sle64(last_res_72812, gtid_72607);
        int64_t defunc_0_f_res_78895;
        
        if (cond_78894) {
            defunc_0_f_res_78895 = (int64_t) 0;
        } else {
            int64_t i_78896 = add64(gtid_72607, max_res_78309);
            int64_t defunc_0_add_arg_78897 =
                    ((int64_t *) mem_75565.mem)[i_78896];
            int64_t defunc_1_add_res_78898 = add64((int64_t) 1,
                                                   defunc_0_add_arg_78897);
            
            defunc_0_f_res_78895 = defunc_1_add_res_78898;
        }
        
        int64_t binop_p_78899 = sub64(defunc_0_f_res_78895, min_res_78244);
        float defunc_0_f_res_78900 = sitofp_i64_f32(binop_p_78899);
        float abs_res_78901 = (float) fabs(defunc_0_f_res_78900);
        float tmp1_78902 = abs_res_78901 / defunc_1_f_res_78328;
        float x_78903 = tmp1_78902 * tmp1_78902;
        float y_78904 = tmp1_78902 * x_78903;
        float tmp2_78905 = 1.0F - y_78904;
        float x_78906 = tmp2_78905 * tmp2_78905;
        float tmp3_78907 = tmp2_78905 * x_78906;
        float tmp4_78908 = x_78893 * tmp3_78907;
        float defunc_1_f_res_78909 = defunc_0_f_res_78900 * tmp4_78908;
        float defunc_1_f_res_78910 = defunc_0_f_res_78900 *
              defunc_1_f_res_78909;
        float defunc_0_f_res_78911;
        
        if (cond_78894) {
            defunc_0_f_res_78911 = 0.0F;
        } else {
            int64_t i_78912 = add64(gtid_72607, max_res_78309);
            float defunc_0_add_arg_78913 = ((float *) mem_75562.mem)[i_78912];
            
            defunc_0_f_res_78911 = defunc_0_add_arg_78913;
        }
        
        float x_78914 = a12_78389 * tmp4_78908;
        float y_78915 = b12_78390 * defunc_1_f_res_78909;
        float x_78916 = x_78914 + y_78915;
        float y_78917 = c12_78391 * defunc_1_f_res_78910;
        float x_78918 = x_78916 + y_78917;
        float defunc_9_fit_fun_res_78919 = defunc_0_f_res_78911 * x_78918;
        float x_78920 = b12_78390 * tmp4_78908;
        float y_78921 = b2_78392 * defunc_1_f_res_78909;
        float x_78922 = x_78920 + y_78921;
        float y_78923 = c2_78393 * defunc_1_f_res_78910;
        float x_78924 = x_78922 + y_78923;
        float defunc_9_slope_fun_res_78925 = defunc_0_f_res_78911 * x_78924;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_78887 = local_acc_78974;
        }
        // Load next params
        {
            x_78888 = defunc_9_fit_fun_res_78919;
        }
        // Red body
        {
            float defunc_1_op_res_78889 = x_78887 + x_78888;
            
            local_acc_78974 = defunc_1_op_res_78889;
        }
        // Load accum params
        {
            x_78890 = local_acc_78975;
        }
        // Load next params
        {
            x_78891 = defunc_9_slope_fun_res_78925;
        }
        // Red body
        {
            float defunc_1_op_res_78892 = x_78890 + x_78891;
            
            local_acc_78975 = defunc_1_op_res_78892;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_78969.mem)[flat_tid_72606] =
        local_acc_78974;
    ((float *) reduce_stage_1_tid_res_arr_mem_78971.mem)[flat_tid_72606] =
        local_acc_78975;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81810_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81810_end -
                 futhark_mc_segred_stage_1_parloop_81810_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81810_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81810_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81810_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81806(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72606 = tid;
    int num_tasks_78968 = info.nsubtasks;
    struct futhark_mc_task_81805 *futhark_mc_task_81805 =
                                 (struct futhark_mc_task_81805 *) args;
    struct futhark_context *ctx = futhark_mc_task_81805->ctx;
    uint64_t futhark_mc_segred_task_81806_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81806_start = get_wall_time();
    
    int64_t last_res_72812 = futhark_mc_task_81805->free_last_res_72812;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_task_81805->free_mem_75562, .size =
                                 0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81805->free_mem_75565, .size =
                                 0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_task_81805->free_mem_75571, .size =
                                 0, .references =NULL};
    int64_t min_res_78244 = futhark_mc_task_81805->free_min_res_78244;
    int64_t max_res_78309 = futhark_mc_task_81805->free_max_res_78309;
    float defunc_1_f_res_78328 =
          futhark_mc_task_81805->free_defunc_1_f_res_78328;
    float a12_78389 = futhark_mc_task_81805->free_a12_78389;
    float b12_78390 = futhark_mc_task_81805->free_b12_78390;
    float c12_78391 = futhark_mc_task_81805->free_c12_78391;
    float b2_78392 = futhark_mc_task_81805->free_b2_78392;
    float c2_78393 = futhark_mc_task_81805->free_c2_78393;
    float defunc_2_reduce_res_78394 =
          *futhark_mc_task_81805->retval_defunc_2_reduce_res_78394;
    float defunc_2_reduce_res_78395 =
          *futhark_mc_task_81805->retval_defunc_2_reduce_res_78395;
    size_t reduce_stage_1_tid_res_arr_mem_78969_cached_sizze_81807 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78969 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78971_cached_sizze_81808 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78971 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_78969_cached_sizze_81807 <
        (size_t) ((int64_t) 4 * num_tasks_78968)) {
        reduce_stage_1_tid_res_arr_mem_78969 =
            realloc(reduce_stage_1_tid_res_arr_mem_78969, (int64_t) 4 *
                    num_tasks_78968);
        reduce_stage_1_tid_res_arr_mem_78969_cached_sizze_81807 = (int64_t) 4 *
            num_tasks_78968;
    }
    if (reduce_stage_1_tid_res_arr_mem_78971_cached_sizze_81808 <
        (size_t) ((int64_t) 4 * num_tasks_78968)) {
        reduce_stage_1_tid_res_arr_mem_78971 =
            realloc(reduce_stage_1_tid_res_arr_mem_78971, (int64_t) 4 *
                    num_tasks_78968);
        reduce_stage_1_tid_res_arr_mem_78971_cached_sizze_81808 = (int64_t) 4 *
            num_tasks_78968;
    }
    
    int64_t iter_78973;
    struct futhark_mc_segred_stage_1_parloop_struct_81809
    futhark_mc_segred_stage_1_parloop_struct_81809;
    
    futhark_mc_segred_stage_1_parloop_struct_81809.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_last_res_72812 =
        last_res_72812;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_mem_75562 =
        mem_75562.mem;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_mem_75565 =
        mem_75565.mem;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_mem_75571 =
        mem_75571.mem;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_min_res_78244 =
        min_res_78244;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_max_res_78309 =
        max_res_78309;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_defunc_1_f_res_78328 =
        defunc_1_f_res_78328;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_a12_78389 = a12_78389;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_b12_78390 = b12_78390;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_c12_78391 = c12_78391;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_b2_78392 = b2_78392;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_c2_78393 = c2_78393;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_reduce_stage_1_tid_res_arr_mem_78969 =
        reduce_stage_1_tid_res_arr_mem_78969;
    futhark_mc_segred_stage_1_parloop_struct_81809.free_reduce_stage_1_tid_res_arr_mem_78971 =
        reduce_stage_1_tid_res_arr_mem_78971;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81810_task;
    
    futhark_mc_segred_stage_1_parloop_81810_task.name =
        "futhark_mc_segred_stage_1_parloop_81810";
    futhark_mc_segred_stage_1_parloop_81810_task.fn =
        futhark_mc_segred_stage_1_parloop_81810;
    futhark_mc_segred_stage_1_parloop_81810_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81809;
    futhark_mc_segred_stage_1_parloop_81810_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81810_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81810_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81810_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81810_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81810_task);
    
    if (futhark_mc_segred_stage_1_parloop_81810_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81810_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81810_total_end -
                 futhark_mc_segred_stage_1_parloop_81810_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81810_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81810_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81810_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_78394 = 0.0F;
        defunc_2_reduce_res_78395 = 0.0F;
    }
    
    float x_78976;
    float x_78977;
    float x_78979;
    float x_78980;
    
    for (int32_t i_78982 = 0; i_78982 < num_tasks_78968; i_78982++) {
        flat_tid_72606 = i_78982;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_78976 = defunc_2_reduce_res_78394;
            }
            // load next params
            {
                x_78977 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78969)[flat_tid_72606];
            }
            // red body
            {
                float defunc_1_op_res_78978 = x_78976 + x_78977;
                
                defunc_2_reduce_res_78394 = defunc_1_op_res_78978;
            }
            // load acc params
            {
                x_78979 = defunc_2_reduce_res_78395;
            }
            // load next params
            {
                x_78980 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78971)[flat_tid_72606];
            }
            // red body
            {
                float defunc_1_op_res_78981 = x_78979 + x_78980;
                
                defunc_2_reduce_res_78395 = defunc_1_op_res_78981;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_78969);
    free(reduce_stage_1_tid_res_arr_mem_78971);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81806_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81806_end -
                 futhark_mc_segred_task_81806_start;
        
        ctx->futhark_mc_segred_task_81806_runs[tid]++;
        ctx->futhark_mc_segred_task_81806_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81806_iter[tid] += iterations;
    }
    *futhark_mc_task_81805->retval_defunc_2_reduce_res_78394 =
        defunc_2_reduce_res_78394;
    *futhark_mc_task_81805->retval_defunc_2_reduce_res_78395 =
        defunc_2_reduce_res_78395;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81795(void *args, int64_t start,
                                           int64_t end, int flat_tid_72602,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81794
    *futhark_mc_segmap_parloop_struct_81794 =
    (struct futhark_mc_segmap_parloop_struct_81794 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81794->ctx;
    uint64_t futhark_mc_segmap_parloop_81795_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81795_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81794->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81794->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81794->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81794->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81794->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81794->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81794->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81794->free_loop_cond_70258;
    int64_t last_res_72812 =
            futhark_mc_segmap_parloop_struct_81794->free_last_res_72812;
    int64_t min_arg_72827 =
            futhark_mc_segmap_parloop_struct_81794->free_min_arg_72827;
    int64_t min_arg_72828 =
            futhark_mc_segmap_parloop_struct_81794->free_min_arg_72828;
    int64_t min_res_72829 =
            futhark_mc_segmap_parloop_struct_81794->free_min_res_72829;
    float max_res_72833 =
          futhark_mc_segmap_parloop_struct_81794->free_max_res_72833;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75562,
                                 .size =0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75565,
                                 .size =0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75568,
                                 .size =0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75571,
                                 .size =0, .references =NULL};
    struct memblock mem_75574 = {.desc ="mem_75574", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75574,
                                 .size =0, .references =NULL};
    struct memblock mem_75577 = {.desc ="mem_75577", .mem =
                                 futhark_mc_segmap_parloop_struct_81794->free_mem_75577,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78796 = start;
    
    for (; iter_78796 < end; iter_78796++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78926 = n_m_70241;
        int64_t gtid_72603 = iter_78796;
        int64_t remnant_78927 = iter_78796 - gtid_72603;
        int64_t min_arg_78243 = mul64(jump_70237, gtid_72603);
        int64_t min_res_78244 = smin64(i_70247, min_arg_78243);
        int64_t defunc_0_g_res_78245 = add64((int64_t) 1, min_res_78244);
        bool init_idx_78246;
        int64_t init_idx_78247;
        int64_t init_idx_78248;
        bool loop_while_78797;
        int64_t low_78798;
        int64_t high_78799;
        
        loop_while_78797 = x_70248;
        low_78798 = (int64_t) 0;
        high_78799 = i_70247;
        while (loop_while_78797) {
            int64_t x_78800 = add64(low_78798, high_78799);
            int64_t mid_78801 = sdiv64(x_78800, (int64_t) 2);
            bool x_78802 = sle64((int64_t) 0, mid_78801);
            bool y_78803 = slt64(mid_78801, n_70233);
            bool bounds_check_78804 = x_78802 && y_78803;
            bool index_certs_78805;
            
            if (!bounds_check_78804) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_78801,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_78806 = ((int64_t *) mem_75568.mem)[mid_78801];
            bool cond_78807 = slt64(mid_id_78806, (int64_t) 0);
            int64_t mid_idx_78808;
            
            if (cond_78807) {
                mid_idx_78808 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_78808 = mid_id_78806;
            }
            
            bool cond_78809 = sle64(defunc_0_g_res_78245, mid_idx_78808);
            int64_t loopres_78810;
            int64_t loopres_78811;
            
            if (cond_78809) {
                int64_t loopres_t_res_78812 = sub64(mid_78801, (int64_t) 1);
                
                loopres_78810 = low_78798;
                loopres_78811 = loopres_t_res_78812;
            } else {
                int64_t loopres_f_res_78813 = add64((int64_t) 1, mid_78801);
                
                loopres_78810 = loopres_f_res_78813;
                loopres_78811 = high_78799;
            }
            
            bool loop_cond_78814 = sle64(loopres_78810, loopres_78811);
            bool loop_while_tmp_78928 = loop_cond_78814;
            int64_t low_tmp_78929 = loopres_78810;
            int64_t high_tmp_78930 = loopres_78811;
            
            loop_while_78797 = loop_while_tmp_78928;
            low_78798 = low_tmp_78929;
            high_78799 = high_tmp_78930;
        }
        init_idx_78246 = loop_while_78797;
        init_idx_78247 = low_78798;
        init_idx_78248 = high_78799;
        
        bool idx_78267;
        int64_t idx_78268;
        int64_t idx_78269;
        int64_t idx_78270;
        bool loop_while_78815;
        int64_t l_idx_78816;
        int64_t r_idx_78817;
        int64_t span_78818;
        
        loop_while_78815 = loop_cond_70258;
        l_idx_78816 = init_idx_78247;
        r_idx_78817 = init_idx_78247;
        span_78818 = (int64_t) 1;
        while (loop_while_78815) {
            int64_t max_arg_78819 = sub64(l_idx_78816, (int64_t) 1);
            int64_t max_res_78820 = smax64((int64_t) 0, max_arg_78819);
            int64_t min_arg_78821 = add64((int64_t) 1, r_idx_78817);
            int64_t min_res_78822 = smin64(min_arg_72827, min_arg_78821);
            bool x_78823 = sle64((int64_t) 0, max_res_78820);
            bool y_78824 = slt64(max_res_78820, n_70233);
            bool bounds_check_78825 = x_78823 && y_78824;
            bool index_certs_78826;
            
            if (!bounds_check_78825) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78820,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78827 = ((int64_t *) mem_75568.mem)[max_res_78820];
            int64_t abs_arg_78828 = sub64(x_78827, defunc_0_g_res_78245);
            int64_t abs_res_78829 = abs64(abs_arg_78828);
            bool x_78830 = sle64((int64_t) 0, min_res_78822);
            bool y_78831 = slt64(min_res_78822, n_70233);
            bool bounds_check_78832 = x_78830 && y_78831;
            bool index_certs_78833;
            
            if (!bounds_check_78832) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_78822,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_78834 = ((int64_t *) mem_75568.mem)[min_res_78822];
            int64_t abs_arg_78835 = sub64(x_78834, defunc_0_g_res_78245);
            int64_t abs_res_78836 = abs64(abs_arg_78835);
            bool cond_78837 = max_res_78820 == l_idx_78816;
            int64_t loopres_78838;
            int64_t loopres_78839;
            int64_t loopres_78840;
            
            if (cond_78837) {
                loopres_78838 = l_idx_78816;
                loopres_78839 = r_idx_78817;
                loopres_78840 = min_res_70253;
            } else {
                bool cond_78841 = slt64(abs_res_78829, abs_res_78836);
                bool cond_f_res_78842 = min_res_78822 == r_idx_78817;
                bool x_78843 = !cond_78841;
                bool y_78844 = cond_f_res_78842 && x_78843;
                bool cond_78845 = cond_78841 || y_78844;
                int64_t loopres_f_res_78846;
                
                if (cond_78845) {
                    loopres_f_res_78846 = max_res_78820;
                } else {
                    loopres_f_res_78846 = l_idx_78816;
                }
                
                int64_t loopres_f_res_78847;
                
                if (cond_78845) {
                    loopres_f_res_78847 = r_idx_78817;
                } else {
                    loopres_f_res_78847 = min_res_78822;
                }
                
                int64_t loopres_f_res_78848;
                
                if (cond_78845) {
                    int64_t loopres_f_res_t_res_78849 = add64((int64_t) 1,
                                                              span_78818);
                    
                    loopres_f_res_78848 = loopres_f_res_t_res_78849;
                } else {
                    int64_t loopres_f_res_f_res_78850 = add64((int64_t) 1,
                                                              span_78818);
                    
                    loopres_f_res_78848 = loopres_f_res_f_res_78850;
                }
                loopres_78838 = loopres_f_res_78846;
                loopres_78839 = loopres_f_res_78847;
                loopres_78840 = loopres_f_res_78848;
            }
            
            bool loop_cond_78851 = slt64(loopres_78840, min_res_70253);
            bool loop_while_tmp_78931 = loop_cond_78851;
            int64_t l_idx_tmp_78932 = loopres_78838;
            int64_t r_idx_tmp_78933 = loopres_78839;
            int64_t span_tmp_78934 = loopres_78840;
            
            loop_while_78815 = loop_while_tmp_78931;
            l_idx_78816 = l_idx_tmp_78932;
            r_idx_78817 = r_idx_tmp_78933;
            span_78818 = span_tmp_78934;
        }
        idx_78267 = loop_while_78815;
        idx_78268 = l_idx_78816;
        idx_78269 = r_idx_78817;
        idx_78270 = span_78818;
        
        int64_t min_res_78308 = smin64(min_arg_72828, idx_78268);
        int64_t max_res_78309 = smax64((int64_t) 0, min_res_78308);
        int64_t x_78310 = add64(min_res_72829, max_res_78309);
        int64_t r_78311 = sub64(x_78310, (int64_t) 1);
        bool x_78312 = sle64((int64_t) 0, r_78311);
        bool y_78313 = slt64(r_78311, n_70233);
        bool bounds_check_78314 = x_78312 && y_78313;
        bool index_certs_78315;
        
        if (!bounds_check_78314) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_78311,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_78316 = ((int64_t *) mem_75565.mem)[r_78311];
        int64_t abs_arg_78317 = sub64(x_78316, min_res_78244);
        int64_t abs_res_78318 = abs64(abs_arg_78317);
        bool x_78319 = sle64((int64_t) 0, max_res_78309);
        bool y_78320 = slt64(max_res_78309, n_70233);
        bool bounds_check_78321 = x_78319 && y_78320;
        bool index_certs_78322;
        
        if (!bounds_check_78321) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_78309,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_78323 = ((int64_t *) mem_75565.mem)[max_res_78309];
        int64_t abs_arg_78324 = sub64(x_78323, min_res_78244);
        int64_t abs_res_78325 = abs64(abs_arg_78324);
        int64_t max_res_78326 = smax64(abs_res_78318, abs_res_78325);
        float defunc_0_f_res_78327 = sitofp_i64_f32(max_res_78326);
        float defunc_1_f_res_78328 = max_res_72833 + defunc_0_f_res_78327;
        float defunc_2_reduce_res_78329;
        float defunc_2_reduce_res_78330;
        float defunc_2_reduce_res_78331;
        float defunc_2_reduce_res_78332;
        float defunc_2_reduce_res_78333;
        int64_t flat_tid_72604 = (int64_t) 0;
        int32_t num_tasks_78935;
        struct futhark_mc_task_81796 futhark_mc_task_81796;
        
        futhark_mc_task_81796.ctx = ctx;
        futhark_mc_task_81796.free_last_res_72812 = last_res_72812;
        futhark_mc_task_81796.free_mem_75565 = mem_75565.mem;
        futhark_mc_task_81796.free_mem_75571 = mem_75571.mem;
        futhark_mc_task_81796.free_min_res_78244 = min_res_78244;
        futhark_mc_task_81796.free_max_res_78309 = max_res_78309;
        futhark_mc_task_81796.free_defunc_1_f_res_78328 = defunc_1_f_res_78328;
        futhark_mc_task_81796.retval_defunc_2_reduce_res_78329 =
            &defunc_2_reduce_res_78329;
        futhark_mc_task_81796.retval_defunc_2_reduce_res_78330 =
            &defunc_2_reduce_res_78330;
        futhark_mc_task_81796.retval_defunc_2_reduce_res_78331 =
            &defunc_2_reduce_res_78331;
        futhark_mc_task_81796.retval_defunc_2_reduce_res_78332 =
            &defunc_2_reduce_res_78332;
        futhark_mc_task_81796.retval_defunc_2_reduce_res_78333 =
            &defunc_2_reduce_res_78333;
        
        struct scheduler_segop futhark_mc_task_81796_task;
        
        futhark_mc_task_81796_task.args = &futhark_mc_task_81796;
        futhark_mc_task_81796_task.top_level_fn = futhark_mc_segred_task_81797;
        futhark_mc_task_81796_task.name = "futhark_mc_segred_task_81797";
        futhark_mc_task_81796_task.iterations = q_70235;
        futhark_mc_task_81796_task.task_time =
            &ctx->futhark_mc_segred_task_81797_total_time;
        futhark_mc_task_81796_task.task_iter =
            &ctx->futhark_mc_segred_task_81797_total_iter;
        futhark_mc_task_81796_task.sched = STATIC;
        futhark_mc_task_81796_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81797_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81796_task);
        
        if (futhark_mc_segred_task_81797_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_78369 = defunc_2_reduce_res_78331 * defunc_2_reduce_res_78333;
        float y_78370 = defunc_2_reduce_res_78332 * defunc_2_reduce_res_78332;
        float a12_78371 = x_78369 - y_78370;
        float x_78372 = defunc_2_reduce_res_78331 * defunc_2_reduce_res_78332;
        float y_78373 = defunc_2_reduce_res_78330 * defunc_2_reduce_res_78333;
        float b12_78374 = x_78372 - y_78373;
        float x_78375 = defunc_2_reduce_res_78330 * defunc_2_reduce_res_78332;
        float y_78376 = defunc_2_reduce_res_78331 * defunc_2_reduce_res_78331;
        float c12_78377 = x_78375 - y_78376;
        float x_78378 = defunc_2_reduce_res_78329 * defunc_2_reduce_res_78333;
        float b2_78379 = x_78378 - y_78376;
        float x_78380 = defunc_2_reduce_res_78330 * defunc_2_reduce_res_78331;
        float y_78381 = defunc_2_reduce_res_78329 * defunc_2_reduce_res_78332;
        float c2_78382 = x_78380 - y_78381;
        float x_78383 = defunc_2_reduce_res_78329 * a12_78371;
        float y_78384 = defunc_2_reduce_res_78330 * b12_78374;
        float x_78385 = x_78383 + y_78384;
        float y_78386 = defunc_2_reduce_res_78331 * c12_78377;
        float y_78387 = x_78385 + y_78386;
        float det_78388 = 1.0F / y_78387;
        float a12_78389 = a12_78371 * det_78388;
        float b12_78390 = b12_78374 * det_78388;
        float c12_78391 = c12_78377 * det_78388;
        float b2_78392 = b2_78379 * det_78388;
        float c2_78393 = c2_78382 * det_78388;
        float defunc_2_reduce_res_78394;
        float defunc_2_reduce_res_78395;
        int64_t flat_tid_72606 = (int64_t) 0;
        int32_t num_tasks_78968;
        struct futhark_mc_task_81805 futhark_mc_task_81805;
        
        futhark_mc_task_81805.ctx = ctx;
        futhark_mc_task_81805.free_last_res_72812 = last_res_72812;
        futhark_mc_task_81805.free_mem_75562 = mem_75562.mem;
        futhark_mc_task_81805.free_mem_75565 = mem_75565.mem;
        futhark_mc_task_81805.free_mem_75571 = mem_75571.mem;
        futhark_mc_task_81805.free_min_res_78244 = min_res_78244;
        futhark_mc_task_81805.free_max_res_78309 = max_res_78309;
        futhark_mc_task_81805.free_defunc_1_f_res_78328 = defunc_1_f_res_78328;
        futhark_mc_task_81805.free_a12_78389 = a12_78389;
        futhark_mc_task_81805.free_b12_78390 = b12_78390;
        futhark_mc_task_81805.free_c12_78391 = c12_78391;
        futhark_mc_task_81805.free_b2_78392 = b2_78392;
        futhark_mc_task_81805.free_c2_78393 = c2_78393;
        futhark_mc_task_81805.retval_defunc_2_reduce_res_78394 =
            &defunc_2_reduce_res_78394;
        futhark_mc_task_81805.retval_defunc_2_reduce_res_78395 =
            &defunc_2_reduce_res_78395;
        
        struct scheduler_segop futhark_mc_task_81805_task;
        
        futhark_mc_task_81805_task.args = &futhark_mc_task_81805;
        futhark_mc_task_81805_task.top_level_fn = futhark_mc_segred_task_81806;
        futhark_mc_task_81805_task.name = "futhark_mc_segred_task_81806";
        futhark_mc_task_81805_task.iterations = q_70235;
        futhark_mc_task_81805_task.task_time =
            &ctx->futhark_mc_segred_task_81806_total_time;
        futhark_mc_task_81805_task.task_iter =
            &ctx->futhark_mc_segred_task_81806_total_iter;
        futhark_mc_task_81805_task.sched = STATIC;
        futhark_mc_task_81805_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81806_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81805_task);
        
        if (futhark_mc_segred_task_81806_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75574.mem)[gtid_72603] = defunc_2_reduce_res_78394;
        ((float *) mem_75577.mem)[gtid_72603] = defunc_2_reduce_res_78395;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81795_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81795_end -
                 futhark_mc_segmap_parloop_81795_start;
        
        ctx->futhark_mc_segmap_parloop_81795_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81795_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81795_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81793(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72602 = tid;
    int num_tasks_78654 = info.nsubtasks;
    struct futhark_mc_task_81789 *futhark_mc_task_81789 =
                                 (struct futhark_mc_task_81789 *) args;
    struct futhark_context *ctx = futhark_mc_task_81789->ctx;
    uint64_t futhark_mc_segmap_nested_task_81793_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81793_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81789->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81789->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81789->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81789->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81789->free_i_70247;
    bool x_70248 = futhark_mc_task_81789->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81789->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81789->free_loop_cond_70258;
    int64_t last_res_72812 = futhark_mc_task_81789->free_last_res_72812;
    int64_t min_arg_72827 = futhark_mc_task_81789->free_min_arg_72827;
    int64_t min_arg_72828 = futhark_mc_task_81789->free_min_arg_72828;
    int64_t min_res_72829 = futhark_mc_task_81789->free_min_res_72829;
    float max_res_72833 = futhark_mc_task_81789->free_max_res_72833;
    struct memblock mem_75562 = {.desc ="mem_75562", .mem =
                                 futhark_mc_task_81789->free_mem_75562, .size =
                                 0, .references =NULL};
    struct memblock mem_75565 = {.desc ="mem_75565", .mem =
                                 futhark_mc_task_81789->free_mem_75565, .size =
                                 0, .references =NULL};
    struct memblock mem_75568 = {.desc ="mem_75568", .mem =
                                 futhark_mc_task_81789->free_mem_75568, .size =
                                 0, .references =NULL};
    struct memblock mem_75571 = {.desc ="mem_75571", .mem =
                                 futhark_mc_task_81789->free_mem_75571, .size =
                                 0, .references =NULL};
    struct memblock mem_75574 = {.desc ="mem_75574", .mem =
                                 futhark_mc_task_81789->free_mem_75574, .size =
                                 0, .references =NULL};
    struct memblock mem_75577 = {.desc ="mem_75577", .mem =
                                 futhark_mc_task_81789->free_mem_75577, .size =
                                 0, .references =NULL};
    int64_t iter_78796;
    struct futhark_mc_segmap_parloop_struct_81794
    futhark_mc_segmap_parloop_struct_81794;
    
    futhark_mc_segmap_parloop_struct_81794.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81794.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81794.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81794.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81794.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81794.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81794.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81794.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81794.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81794.free_last_res_72812 = last_res_72812;
    futhark_mc_segmap_parloop_struct_81794.free_min_arg_72827 = min_arg_72827;
    futhark_mc_segmap_parloop_struct_81794.free_min_arg_72828 = min_arg_72828;
    futhark_mc_segmap_parloop_struct_81794.free_min_res_72829 = min_res_72829;
    futhark_mc_segmap_parloop_struct_81794.free_max_res_72833 = max_res_72833;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75562 = mem_75562.mem;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75565 = mem_75565.mem;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75568 = mem_75568.mem;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75571 = mem_75571.mem;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75574 = mem_75574.mem;
    futhark_mc_segmap_parloop_struct_81794.free_mem_75577 = mem_75577.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81795_task;
    
    futhark_mc_segmap_parloop_81795_task.name =
        "futhark_mc_segmap_parloop_81795";
    futhark_mc_segmap_parloop_81795_task.fn = futhark_mc_segmap_parloop_81795;
    futhark_mc_segmap_parloop_81795_task.args =
        &futhark_mc_segmap_parloop_struct_81794;
    futhark_mc_segmap_parloop_81795_task.iterations = iterations;
    futhark_mc_segmap_parloop_81795_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81795_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81795_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81795_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81795_task);
    
    if (futhark_mc_segmap_parloop_81795_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81795_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81795_total_end -
                 futhark_mc_segmap_parloop_81795_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81795_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81795_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81795_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81793_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81793_end -
                 futhark_mc_segmap_nested_task_81793_start;
        
        ctx->futhark_mc_segmap_nested_task_81793_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81793_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81793_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81762(void *args, int64_t start,
                                           int64_t end, int flat_tid_72590,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81761
    *futhark_mc_segmap_parloop_struct_81761 =
    (struct futhark_mc_segmap_parloop_struct_81761 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81761->ctx;
    uint64_t futhark_mc_segmap_parloop_81762_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81762_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81761->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81761->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81761->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81761->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81761->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81761->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81761->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81761->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81761->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81761->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81761->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75558 =
            futhark_mc_segmap_parloop_struct_81761->free_bytes_75558;
    int64_t bytes_75561 =
            futhark_mc_segmap_parloop_struct_81761->free_bytes_75561;
    int64_t bytes_75570 =
            futhark_mc_segmap_parloop_struct_81761->free_bytes_75570;
    int64_t bytes_75573 =
            futhark_mc_segmap_parloop_struct_81761->free_bytes_75573;
    struct memblock mem_75686 = {.desc ="mem_75686", .mem =
                                 futhark_mc_segmap_parloop_struct_81761->free_mem_75686,
                                 .size =0, .references =NULL};
    struct memblock mem_75690 = {.desc ="mem_75690", .mem =
                                 futhark_mc_segmap_parloop_struct_81761->free_mem_75690,
                                 .size =0, .references =NULL};
    size_t mem_75559_cached_sizze_81763 = 0;
    unsigned char *mem_75559 = NULL;
    size_t mem_75562_cached_sizze_81764 = 0;
    unsigned char *mem_75562 = NULL;
    size_t mem_75565_cached_sizze_81765 = 0;
    unsigned char *mem_75565 = NULL;
    size_t mem_75568_cached_sizze_81766 = 0;
    unsigned char *mem_75568 = NULL;
    size_t mem_75571_cached_sizze_81767 = 0;
    unsigned char *mem_75571 = NULL;
    size_t mem_75574_cached_sizze_81768 = 0;
    unsigned char *mem_75574 = NULL;
    size_t mem_75577_cached_sizze_81769 = 0;
    unsigned char *mem_75577 = NULL;
    int64_t iterations = end - start;
    int64_t iter_78225 = start;
    
    if (mem_75559_cached_sizze_81763 < (size_t) bytes_75558) {
        mem_75559 = realloc(mem_75559, bytes_75558);
        mem_75559_cached_sizze_81763 = bytes_75558;
    }
    if (mem_75562_cached_sizze_81764 < (size_t) bytes_75561) {
        mem_75562 = realloc(mem_75562, bytes_75561);
        mem_75562_cached_sizze_81764 = bytes_75561;
    }
    if (mem_75565_cached_sizze_81765 < (size_t) bytes_75558) {
        mem_75565 = realloc(mem_75565, bytes_75558);
        mem_75565_cached_sizze_81765 = bytes_75558;
    }
    if (mem_75568_cached_sizze_81766 < (size_t) bytes_75558) {
        mem_75568 = realloc(mem_75568, bytes_75558);
        mem_75568_cached_sizze_81766 = bytes_75558;
    }
    if (mem_75571_cached_sizze_81767 < (size_t) bytes_75570) {
        mem_75571 = realloc(mem_75571, bytes_75570);
        mem_75571_cached_sizze_81767 = bytes_75570;
    }
    if (mem_75574_cached_sizze_81768 < (size_t) bytes_75573) {
        mem_75574 = realloc(mem_75574, bytes_75573);
        mem_75574_cached_sizze_81768 = bytes_75573;
    }
    if (mem_75577_cached_sizze_81769 < (size_t) bytes_75573) {
        mem_75577 = realloc(mem_75577, bytes_75573);
        mem_75577_cached_sizze_81769 = bytes_75573;
    }
    for (; iter_78225 < end; iter_78225++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78622 = m_70232;
        int64_t gtid_72591 = iter_78225;
        int64_t remnant_78623 = iter_78225 - gtid_72591;
        int64_t flat_tid_72592 = (int64_t) 0;
        int32_t num_tasks_78624;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81770 futhark_mc_task_81770;
        
        futhark_mc_task_81770.ctx = ctx;
        futhark_mc_task_81770.free_n_70233 = n_70233;
        futhark_mc_task_81770.free_gtid_72591 = gtid_72591;
        futhark_mc_task_81770.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81770.free_mem_75559 = mem_75559;
        
        struct scheduler_segop futhark_mc_task_81770_task;
        
        futhark_mc_task_81770_task.args = &futhark_mc_task_81770;
        futhark_mc_task_81770_task.top_level_fn = futhark_mc_segscan_task_81771;
        futhark_mc_task_81770_task.name = "futhark_mc_segscan_task_81771";
        futhark_mc_task_81770_task.iterations = n_70233;
        futhark_mc_task_81770_task.task_time =
            &ctx->futhark_mc_segscan_task_81771_total_time;
        futhark_mc_task_81770_task.task_iter =
            &ctx->futhark_mc_segscan_task_81771_total_iter;
        futhark_mc_task_81770_task.sched = STATIC;
        futhark_mc_task_81770_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81771_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81770_task);
        
        if (futhark_mc_segscan_task_81771_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_72812 = ((int64_t *) mem_75559)[i_70247];
        
        for (int64_t i_78638 = 0; i_78638 < n_70233; i_78638++) {
            ((float *) mem_75562)[i_78638] = 0.0F;
        }
        for (int64_t i_78639 = 0; i_78639 < n_70233; i_78639++) {
            ((int64_t *) mem_75565)[i_78639] = (int64_t) -1;
        }
        
        int64_t flat_tid_72594 = (int64_t) 0;
        int32_t num_tasks_78640;
        struct futhark_mc_task_81777 futhark_mc_task_81777;
        
        futhark_mc_task_81777.ctx = ctx;
        futhark_mc_task_81777.free_n_70233 = n_70233;
        futhark_mc_task_81777.free_gtid_72591 = gtid_72591;
        futhark_mc_task_81777.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81777.free_mem_75559 = mem_75559;
        futhark_mc_task_81777.free_mem_75562 = mem_75562;
        futhark_mc_task_81777.free_mem_75565 = mem_75565;
        
        struct scheduler_segop futhark_mc_task_81777_task;
        
        futhark_mc_task_81777_task.args = &futhark_mc_task_81777;
        futhark_mc_task_81777_task.top_level_fn = futhark_mc_segmap_task_81778;
        futhark_mc_task_81777_task.name = "futhark_mc_segmap_task_81778";
        futhark_mc_task_81777_task.iterations = n_70233;
        futhark_mc_task_81777_task.task_time =
            &ctx->futhark_mc_segmap_task_81778_total_time;
        futhark_mc_task_81777_task.task_iter =
            &ctx->futhark_mc_segmap_task_81778_total_iter;
        futhark_mc_task_81777_task.sched = STATIC;
        futhark_mc_task_81777_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81778_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81777_task);
        
        if (futhark_mc_segmap_task_81778_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72596 = (int64_t) 0;
        int32_t num_tasks_78646;
        struct futhark_mc_task_81781 futhark_mc_task_81781;
        
        futhark_mc_task_81781.ctx = ctx;
        futhark_mc_task_81781.free_n_70233 = n_70233;
        futhark_mc_task_81781.free_mem_75565 = mem_75565;
        futhark_mc_task_81781.free_mem_75568 = mem_75568;
        
        struct scheduler_segop futhark_mc_task_81781_task;
        
        futhark_mc_task_81781_task.args = &futhark_mc_task_81781;
        futhark_mc_task_81781_task.top_level_fn = futhark_mc_segmap_task_81782;
        futhark_mc_task_81781_task.name = "futhark_mc_segmap_task_81782";
        futhark_mc_task_81781_task.iterations = n_70233;
        futhark_mc_task_81781_task.task_time =
            &ctx->futhark_mc_segmap_task_81782_total_time;
        futhark_mc_task_81781_task.task_iter =
            &ctx->futhark_mc_segmap_task_81782_total_iter;
        futhark_mc_task_81781_task.sched = STATIC;
        futhark_mc_task_81781_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81782_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81781_task);
        
        if (futhark_mc_segmap_task_81782_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_72827 = sub64(last_res_72812, (int64_t) 1);
        int64_t min_arg_72828 = sub64(last_res_72812, min_res_70253);
        int64_t min_res_72829 = smin64(q_70235, last_res_72812);
        float i64_res_72830 = sitofp_i64_f32(last_res_72812);
        float x_72831 = i64_res_70259 - i64_res_72830;
        float max_arg_72832 = x_72831 / 2.0F;
        float max_res_72833 = fmax32(0.0F, max_arg_72832);
        int64_t flat_tid_72598 = (int64_t) 0;
        int32_t num_tasks_78650;
        struct futhark_mc_task_81785 futhark_mc_task_81785;
        
        futhark_mc_task_81785.ctx = ctx;
        futhark_mc_task_81785.free_q_70235 = q_70235;
        futhark_mc_task_81785.free_last_res_72812 = last_res_72812;
        futhark_mc_task_81785.free_mem_75571 = mem_75571;
        
        struct scheduler_segop futhark_mc_task_81785_task;
        
        futhark_mc_task_81785_task.args = &futhark_mc_task_81785;
        futhark_mc_task_81785_task.top_level_fn = futhark_mc_segmap_task_81786;
        futhark_mc_task_81785_task.name = "futhark_mc_segmap_task_81786";
        futhark_mc_task_81785_task.iterations = q_70235;
        futhark_mc_task_81785_task.task_time =
            &ctx->futhark_mc_segmap_task_81786_total_time;
        futhark_mc_task_81785_task.task_iter =
            &ctx->futhark_mc_segmap_task_81786_total_iter;
        futhark_mc_task_81785_task.sched = STATIC;
        futhark_mc_task_81785_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81786_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81785_task);
        
        if (futhark_mc_segmap_task_81786_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72600 = (int64_t) 0;
        int32_t num_tasks_78654;
        int64_t flat_tid_72602 = (int64_t) 0;
        struct futhark_mc_task_81789 futhark_mc_task_81789;
        
        futhark_mc_task_81789.ctx = ctx;
        futhark_mc_task_81789.free_n_70233 = n_70233;
        futhark_mc_task_81789.free_q_70235 = q_70235;
        futhark_mc_task_81789.free_jump_70237 = jump_70237;
        futhark_mc_task_81789.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81789.free_i_70247 = i_70247;
        futhark_mc_task_81789.free_x_70248 = x_70248;
        futhark_mc_task_81789.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81789.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81789.free_last_res_72812 = last_res_72812;
        futhark_mc_task_81789.free_min_arg_72827 = min_arg_72827;
        futhark_mc_task_81789.free_min_arg_72828 = min_arg_72828;
        futhark_mc_task_81789.free_min_res_72829 = min_res_72829;
        futhark_mc_task_81789.free_max_res_72833 = max_res_72833;
        futhark_mc_task_81789.free_mem_75562 = mem_75562;
        futhark_mc_task_81789.free_mem_75565 = mem_75565;
        futhark_mc_task_81789.free_mem_75568 = mem_75568;
        futhark_mc_task_81789.free_mem_75571 = mem_75571;
        futhark_mc_task_81789.free_mem_75574 = mem_75574;
        futhark_mc_task_81789.free_mem_75577 = mem_75577;
        
        struct scheduler_segop futhark_mc_task_81789_task;
        
        futhark_mc_task_81789_task.args = &futhark_mc_task_81789;
        futhark_mc_task_81789_task.top_level_fn = futhark_mc_segmap_task_81790;
        futhark_mc_task_81789_task.name = "futhark_mc_segmap_task_81790";
        futhark_mc_task_81789_task.iterations = n_m_70241;
        futhark_mc_task_81789_task.task_time =
            &ctx->futhark_mc_segmap_task_81790_total_time;
        futhark_mc_task_81789_task.task_iter =
            &ctx->futhark_mc_segmap_task_81790_total_iter;
        futhark_mc_task_81789_task.sched = DYNAMIC;
        futhark_mc_task_81789_task.nested_fn =
            futhark_mc_segmap_nested_task_81793;
        
        int futhark_mc_segmap_task_81790_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81789_task);
        
        if (futhark_mc_segmap_task_81790_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75686.mem + gtid_72591 * n_m_70241 * (int64_t) 4,
                    mem_75574 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75690.mem + gtid_72591 * n_m_70241 * (int64_t) 4,
                    mem_75577 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75559);
    free(mem_75562);
    free(mem_75565);
    free(mem_75568);
    free(mem_75571);
    free(mem_75574);
    free(mem_75577);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81762_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81762_end -
                 futhark_mc_segmap_parloop_81762_start;
        
        ctx->futhark_mc_segmap_parloop_81762_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81762_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81762_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81760(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72590 = tid;
    int num_tasks_77974 = info.nsubtasks;
    struct futhark_mc_task_81749 *futhark_mc_task_81749 =
                                 (struct futhark_mc_task_81749 *) args;
    struct futhark_context *ctx = futhark_mc_task_81749->ctx;
    uint64_t futhark_mc_segmap_nested_task_81760_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81760_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81749->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81749->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81749->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81749->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81749->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81749->free_i_70247;
    bool x_70248 = futhark_mc_task_81749->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81749->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81749->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81749->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81749->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75558 = futhark_mc_task_81749->free_bytes_75558;
    int64_t bytes_75561 = futhark_mc_task_81749->free_bytes_75561;
    int64_t bytes_75570 = futhark_mc_task_81749->free_bytes_75570;
    int64_t bytes_75573 = futhark_mc_task_81749->free_bytes_75573;
    struct memblock mem_75686 = {.desc ="mem_75686", .mem =
                                 futhark_mc_task_81749->free_mem_75686, .size =
                                 0, .references =NULL};
    struct memblock mem_75690 = {.desc ="mem_75690", .mem =
                                 futhark_mc_task_81749->free_mem_75690, .size =
                                 0, .references =NULL};
    int64_t iter_78225;
    struct futhark_mc_segmap_parloop_struct_81761
    futhark_mc_segmap_parloop_struct_81761;
    
    futhark_mc_segmap_parloop_struct_81761.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81761.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81761.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81761.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81761.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81761.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81761.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81761.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81761.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81761.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81761.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81761.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81761.free_bytes_75558 = bytes_75558;
    futhark_mc_segmap_parloop_struct_81761.free_bytes_75561 = bytes_75561;
    futhark_mc_segmap_parloop_struct_81761.free_bytes_75570 = bytes_75570;
    futhark_mc_segmap_parloop_struct_81761.free_bytes_75573 = bytes_75573;
    futhark_mc_segmap_parloop_struct_81761.free_mem_75686 = mem_75686.mem;
    futhark_mc_segmap_parloop_struct_81761.free_mem_75690 = mem_75690.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81762_task;
    
    futhark_mc_segmap_parloop_81762_task.name =
        "futhark_mc_segmap_parloop_81762";
    futhark_mc_segmap_parloop_81762_task.fn = futhark_mc_segmap_parloop_81762;
    futhark_mc_segmap_parloop_81762_task.args =
        &futhark_mc_segmap_parloop_struct_81761;
    futhark_mc_segmap_parloop_81762_task.iterations = iterations;
    futhark_mc_segmap_parloop_81762_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81762_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81762_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81762_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81762_task);
    
    if (futhark_mc_segmap_parloop_81762_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81762_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81762_total_end -
                 futhark_mc_segmap_parloop_81762_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81762_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81762_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81762_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81760_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81760_end -
                 futhark_mc_segmap_nested_task_81760_start;
        
        ctx->futhark_mc_segmap_nested_task_81760_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81760_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81760_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81811 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75700;
    int64_t free_bytes_75703;
    int64_t free_bytes_75712;
    int64_t free_bytes_75733;
    unsigned char *free_mem_75843;
};
struct futhark_mc_segmap_parloop_struct_81813 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75700;
    int64_t free_bytes_75703;
    int64_t free_bytes_75712;
    int64_t free_bytes_75733;
    unsigned char *free_mem_75843;
};
static int futhark_mc_segmap_parloop_81814(void *args, int64_t start,
                                           int64_t end, int flat_tid_73230,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81813
    *futhark_mc_segmap_parloop_struct_81813 =
    (struct futhark_mc_segmap_parloop_struct_81813 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81813->ctx;
    uint64_t futhark_mc_segmap_parloop_81814_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81814_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81813->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81813->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81813->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81813->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81813->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81813->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81813->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81813->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81813->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81813->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81813->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75700 =
            futhark_mc_segmap_parloop_struct_81813->free_bytes_75700;
    int64_t bytes_75703 =
            futhark_mc_segmap_parloop_struct_81813->free_bytes_75703;
    int64_t bytes_75712 =
            futhark_mc_segmap_parloop_struct_81813->free_bytes_75712;
    int64_t bytes_75733 =
            futhark_mc_segmap_parloop_struct_81813->free_bytes_75733;
    struct memblock mem_75843 = {.desc ="mem_75843", .mem =
                                 futhark_mc_segmap_parloop_struct_81813->free_mem_75843,
                                 .size =0, .references =NULL};
    size_t mem_75737_cached_sizze_81815 = 0;
    unsigned char *mem_75737 = NULL;
    size_t mem_75752_cached_sizze_81816 = 0;
    unsigned char *mem_75752 = NULL;
    size_t mem_75755_cached_sizze_81817 = 0;
    unsigned char *mem_75755 = NULL;
    size_t mem_75782_cached_sizze_81818 = 0;
    unsigned char *mem_75782 = NULL;
    size_t mem_75797_cached_sizze_81819 = 0;
    unsigned char *mem_75797 = NULL;
    size_t mem_75812_cached_sizze_81820 = 0;
    unsigned char *mem_75812 = NULL;
    size_t mem_75822_cached_sizze_81821 = 0;
    unsigned char *mem_75822 = NULL;
    int64_t iterations = end - start;
    int64_t iter_78986 = start;
    
    if (mem_75737_cached_sizze_81815 < (size_t) bytes_75700) {
        mem_75737 = realloc(mem_75737, bytes_75700);
        mem_75737_cached_sizze_81815 = bytes_75700;
    }
    if (mem_75752_cached_sizze_81816 < (size_t) bytes_75703) {
        mem_75752 = realloc(mem_75752, bytes_75703);
        mem_75752_cached_sizze_81816 = bytes_75703;
    }
    if (mem_75755_cached_sizze_81817 < (size_t) bytes_75700) {
        mem_75755 = realloc(mem_75755, bytes_75700);
        mem_75755_cached_sizze_81817 = bytes_75700;
    }
    if (mem_75782_cached_sizze_81818 < (size_t) bytes_75700) {
        mem_75782 = realloc(mem_75782, bytes_75700);
        mem_75782_cached_sizze_81818 = bytes_75700;
    }
    if (mem_75797_cached_sizze_81819 < (size_t) bytes_75712) {
        mem_75797 = realloc(mem_75797, bytes_75712);
        mem_75797_cached_sizze_81819 = bytes_75712;
    }
    if (mem_75812_cached_sizze_81820 < (size_t) bytes_75733) {
        mem_75812 = realloc(mem_75812, bytes_75733);
        mem_75812_cached_sizze_81820 = bytes_75733;
    }
    if (mem_75822_cached_sizze_81821 < (size_t) bytes_75712) {
        mem_75822 = realloc(mem_75822, bytes_75712);
        mem_75822_cached_sizze_81821 = bytes_75712;
    }
    for (; iter_78986 < end; iter_78986++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79143 = m_70232;
        int64_t gtid_73231 = iter_78986;
        int64_t remnant_79144 = iter_78986 - gtid_73231;
        int64_t discard_75048;
        int64_t scanacc_78988 = (int64_t) 0;
        
        for (int64_t i_78987 = 0; i_78987 < n_70233; i_78987++) {
            float x_78990 = ((float *) Y_mem_75306.mem)[gtid_73231 * n_70233 +
                                                        i_78987];
            bool isnan_res_78991;
            
            isnan_res_78991 = futrts_isnan32(x_78990);
            
            bool defunc_0_p_res_78992 = !isnan_res_78991;
            int64_t defunc_0_f_res_78993 = btoi_bool_i64(defunc_0_p_res_78992);
            int64_t defunc_1_op_res_78994 = add64(defunc_0_f_res_78993,
                                                  scanacc_78988);
            
            ((int64_t *) mem_75737)[i_78987] = defunc_1_op_res_78994;
            
            int64_t scanacc_tmp_79145 = defunc_1_op_res_78994;
            
            scanacc_78988 = scanacc_tmp_79145;
        }
        discard_75048 = scanacc_78988;
        
        int64_t last_res_70906 = ((int64_t *) mem_75737)[i_70247];
        
        for (int64_t i_79147 = 0; i_79147 < n_70233; i_79147++) {
            ((float *) mem_75752)[i_79147] = 0.0F;
        }
        for (int64_t i_79148 = 0; i_79148 < n_70233; i_79148++) {
            ((int64_t *) mem_75755)[i_79148] = (int64_t) -1;
        }
        for (int64_t write_iter_78996 = 0; write_iter_78996 < n_70233;
             write_iter_78996++) {
            float write_iv_78999 = ((float *) Y_mem_75306.mem)[gtid_73231 *
                                                               n_70233 +
                                                               write_iter_78996];
            bool isnan_res_79000;
            
            isnan_res_79000 = futrts_isnan32(write_iv_78999);
            
            bool defunc_0_p_res_79001 = !isnan_res_79000;
            int64_t defunc_1_f_res_79002;
            
            if (defunc_0_p_res_79001) {
                int64_t write_iv_79003 =
                        ((int64_t *) mem_75737)[write_iter_78996];
                int64_t defunc_1_f_res_t_res_79004 = sub64(write_iv_79003,
                                                           (int64_t) 1);
                
                defunc_1_f_res_79002 = defunc_1_f_res_t_res_79004;
            } else {
                defunc_1_f_res_79002 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79002) &&
                slt64(defunc_1_f_res_79002, n_70233)) {
                ((int64_t *) mem_75755)[defunc_1_f_res_79002] =
                    write_iter_78996;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79002) &&
                slt64(defunc_1_f_res_79002, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75752 + defunc_1_f_res_79002 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_73231 * n_70233 +
                                               write_iter_78996) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_79008 = 0; i_79008 < n_70233; i_79008++) {
            int64_t x_79010 = ((int64_t *) mem_75755)[i_79008];
            int64_t defunc_0_f_res_79011 = add64((int64_t) 1, x_79010);
            
            ((int64_t *) mem_75782)[i_79008] = defunc_0_f_res_79011;
        }
        
        int64_t min_arg_70921 = sub64(last_res_70906, (int64_t) 1);
        int64_t min_arg_70922 = sub64(last_res_70906, min_res_70253);
        int64_t min_res_70923 = smin64(q_70235, last_res_70906);
        float i64_res_70924 = sitofp_i64_f32(last_res_70906);
        float x_70925 = i64_res_70259 - i64_res_70924;
        float max_arg_70926 = x_70925 / 2.0F;
        float max_res_70927 = fmax32(0.0F, max_arg_70926);
        
        for (int64_t i_79013 = 0; i_79013 < q_70235; i_79013++) {
            bool cond_79015 = sle64(last_res_70906, i_79013);
            float defunc_0_f_res_79016;
            
            if (cond_79015) {
                defunc_0_f_res_79016 = 0.0F;
            } else {
                defunc_0_f_res_79016 = 1.0F;
            }
            ((float *) mem_75797)[i_79013] = defunc_0_f_res_79016;
        }
        for (int64_t i_79018 = 0; i_79018 < n_m_70241; i_79018++) {
            int64_t min_arg_79020 = mul64(jump_70237, i_79018);
            int64_t min_res_79021 = smin64(i_70247, min_arg_79020);
            int64_t defunc_0_g_res_79022 = add64((int64_t) 1, min_res_79021);
            bool init_idx_79023;
            int64_t init_idx_79024;
            int64_t init_idx_79025;
            bool loop_while_79026;
            int64_t low_79027;
            int64_t high_79028;
            
            loop_while_79026 = x_70248;
            low_79027 = (int64_t) 0;
            high_79028 = i_70247;
            while (loop_while_79026) {
                int64_t x_79029 = add64(low_79027, high_79028);
                int64_t mid_79030 = sdiv64(x_79029, (int64_t) 2);
                bool x_79031 = sle64((int64_t) 0, mid_79030);
                bool y_79032 = slt64(mid_79030, n_70233);
                bool bounds_check_79033 = x_79031 && y_79032;
                bool index_certs_79034;
                
                if (!bounds_check_79033) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_79030,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_79035 = ((int64_t *) mem_75782)[mid_79030];
                bool cond_79036 = slt64(mid_id_79035, (int64_t) 0);
                int64_t mid_idx_79037;
                
                if (cond_79036) {
                    mid_idx_79037 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_79037 = mid_id_79035;
                }
                
                bool cond_79038 = sle64(defunc_0_g_res_79022, mid_idx_79037);
                int64_t loopres_79039;
                int64_t loopres_79040;
                
                if (cond_79038) {
                    int64_t loopres_t_res_79041 = sub64(mid_79030, (int64_t) 1);
                    
                    loopres_79039 = low_79027;
                    loopres_79040 = loopres_t_res_79041;
                } else {
                    int64_t loopres_f_res_79042 = add64((int64_t) 1, mid_79030);
                    
                    loopres_79039 = loopres_f_res_79042;
                    loopres_79040 = high_79028;
                }
                
                bool loop_cond_79043 = sle64(loopres_79039, loopres_79040);
                bool loop_while_tmp_79154 = loop_cond_79043;
                int64_t low_tmp_79155 = loopres_79039;
                int64_t high_tmp_79156 = loopres_79040;
                
                loop_while_79026 = loop_while_tmp_79154;
                low_79027 = low_tmp_79155;
                high_79028 = high_tmp_79156;
            }
            init_idx_79023 = loop_while_79026;
            init_idx_79024 = low_79027;
            init_idx_79025 = high_79028;
            
            bool idx_79044;
            int64_t idx_79045;
            int64_t idx_79046;
            int64_t idx_79047;
            bool loop_while_79048;
            int64_t l_idx_79049;
            int64_t r_idx_79050;
            int64_t span_79051;
            
            loop_while_79048 = loop_cond_70258;
            l_idx_79049 = init_idx_79024;
            r_idx_79050 = init_idx_79024;
            span_79051 = (int64_t) 1;
            while (loop_while_79048) {
                int64_t max_arg_79052 = sub64(l_idx_79049, (int64_t) 1);
                int64_t max_res_79053 = smax64((int64_t) 0, max_arg_79052);
                int64_t min_arg_79054 = add64((int64_t) 1, r_idx_79050);
                int64_t min_res_79055 = smin64(min_arg_70921, min_arg_79054);
                bool x_79056 = sle64((int64_t) 0, max_res_79053);
                bool y_79057 = slt64(max_res_79053, n_70233);
                bool bounds_check_79058 = x_79056 && y_79057;
                bool index_certs_79059;
                
                if (!bounds_check_79058) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_79053,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_79060 = ((int64_t *) mem_75782)[max_res_79053];
                int64_t abs_arg_79061 = sub64(x_79060, defunc_0_g_res_79022);
                int64_t abs_res_79062 = abs64(abs_arg_79061);
                bool x_79063 = sle64((int64_t) 0, min_res_79055);
                bool y_79064 = slt64(min_res_79055, n_70233);
                bool bounds_check_79065 = x_79063 && y_79064;
                bool index_certs_79066;
                
                if (!bounds_check_79065) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_79055,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_79067 = ((int64_t *) mem_75782)[min_res_79055];
                int64_t abs_arg_79068 = sub64(x_79067, defunc_0_g_res_79022);
                int64_t abs_res_79069 = abs64(abs_arg_79068);
                bool cond_79070 = max_res_79053 == l_idx_79049;
                int64_t loopres_79071;
                int64_t loopres_79072;
                int64_t loopres_79073;
                
                if (cond_79070) {
                    loopres_79071 = l_idx_79049;
                    loopres_79072 = r_idx_79050;
                    loopres_79073 = min_res_70253;
                } else {
                    bool cond_79074 = slt64(abs_res_79062, abs_res_79069);
                    bool cond_f_res_79075 = min_res_79055 == r_idx_79050;
                    bool x_79076 = !cond_79074;
                    bool y_79077 = cond_f_res_79075 && x_79076;
                    bool cond_79078 = cond_79074 || y_79077;
                    int64_t loopres_f_res_79079;
                    
                    if (cond_79078) {
                        loopres_f_res_79079 = max_res_79053;
                    } else {
                        loopres_f_res_79079 = l_idx_79049;
                    }
                    
                    int64_t loopres_f_res_79080;
                    
                    if (cond_79078) {
                        loopres_f_res_79080 = r_idx_79050;
                    } else {
                        loopres_f_res_79080 = min_res_79055;
                    }
                    
                    int64_t loopres_f_res_79081;
                    
                    if (cond_79078) {
                        int64_t loopres_f_res_t_res_79082 = add64((int64_t) 1,
                                                                  span_79051);
                        
                        loopres_f_res_79081 = loopres_f_res_t_res_79082;
                    } else {
                        int64_t loopres_f_res_f_res_79083 = add64((int64_t) 1,
                                                                  span_79051);
                        
                        loopres_f_res_79081 = loopres_f_res_f_res_79083;
                    }
                    loopres_79071 = loopres_f_res_79079;
                    loopres_79072 = loopres_f_res_79080;
                    loopres_79073 = loopres_f_res_79081;
                }
                
                bool loop_cond_79084 = slt64(loopres_79073, min_res_70253);
                bool loop_while_tmp_79157 = loop_cond_79084;
                int64_t l_idx_tmp_79158 = loopres_79071;
                int64_t r_idx_tmp_79159 = loopres_79072;
                int64_t span_tmp_79160 = loopres_79073;
                
                loop_while_79048 = loop_while_tmp_79157;
                l_idx_79049 = l_idx_tmp_79158;
                r_idx_79050 = r_idx_tmp_79159;
                span_79051 = span_tmp_79160;
            }
            idx_79044 = loop_while_79048;
            idx_79045 = l_idx_79049;
            idx_79046 = r_idx_79050;
            idx_79047 = span_79051;
            
            int64_t min_res_79085 = smin64(min_arg_70922, idx_79045);
            int64_t max_res_79086 = smax64((int64_t) 0, min_res_79085);
            int64_t x_79087 = add64(min_res_70923, max_res_79086);
            int64_t r_79088 = sub64(x_79087, (int64_t) 1);
            bool x_79089 = sle64((int64_t) 0, r_79088);
            bool y_79090 = slt64(r_79088, n_70233);
            bool bounds_check_79091 = x_79089 && y_79090;
            bool index_certs_79092;
            
            if (!bounds_check_79091) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_79088,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79093 = ((int64_t *) mem_75755)[r_79088];
            int64_t abs_arg_79094 = sub64(x_79093, min_res_79021);
            int64_t abs_res_79095 = abs64(abs_arg_79094);
            bool x_79096 = sle64((int64_t) 0, max_res_79086);
            bool y_79097 = slt64(max_res_79086, n_70233);
            bool bounds_check_79098 = x_79096 && y_79097;
            bool index_certs_79099;
            
            if (!bounds_check_79098) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79086,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79100 = ((int64_t *) mem_75755)[max_res_79086];
            int64_t abs_arg_79101 = sub64(x_79100, min_res_79021);
            int64_t abs_res_79102 = abs64(abs_arg_79101);
            int64_t max_res_79103 = smax64(abs_res_79095, abs_res_79102);
            float defunc_0_f_res_79104 = sitofp_i64_f32(max_res_79103);
            float defunc_1_f_res_79105 = max_res_70927 + defunc_0_f_res_79104;
            float defunc_2_reduce_res_79107;
            float redout_79110 = 0.0F;
            
            for (int64_t i_79109 = 0; i_79109 < q_70235; i_79109++) {
                float x_79112 = ((float *) mem_75797)[i_79109];
                bool cond_79113 = sle64(last_res_70906, i_79109);
                int64_t defunc_0_f_res_79114;
                
                if (cond_79113) {
                    defunc_0_f_res_79114 = (int64_t) 0;
                } else {
                    int64_t i_79115 = add64(max_res_79086, i_79109);
                    int64_t defunc_0_add_arg_79116 =
                            ((int64_t *) mem_75755)[i_79115];
                    int64_t defunc_1_add_res_79117 = add64((int64_t) 1,
                                                           defunc_0_add_arg_79116);
                    
                    defunc_0_f_res_79114 = defunc_1_add_res_79117;
                }
                
                int64_t binop_p_79118 = sub64(defunc_0_f_res_79114,
                                              min_res_79021);
                float defunc_0_f_res_79119 = sitofp_i64_f32(binop_p_79118);
                float abs_res_79120 = (float) fabs(defunc_0_f_res_79119);
                float tmp1_79121 = abs_res_79120 / defunc_1_f_res_79105;
                float x_79122 = tmp1_79121 * tmp1_79121;
                float y_79123 = tmp1_79121 * x_79122;
                float tmp2_79124 = 1.0F - y_79123;
                float x_79125 = tmp2_79124 * tmp2_79124;
                float tmp3_79126 = tmp2_79124 * x_79125;
                float tmp4_79127 = x_79112 * tmp3_79126;
                float defunc_1_op_res_79128 = tmp4_79127 + redout_79110;
                
                ((float *) mem_75822)[i_79109] = tmp4_79127;
                
                float redout_tmp_79161 = defunc_1_op_res_79128;
                
                redout_79110 = redout_tmp_79161;
            }
            defunc_2_reduce_res_79107 = redout_79110;
            
            float a0_79130 = 1.0F / defunc_2_reduce_res_79107;
            float defunc_2_reduce_res_79131;
            float redout_79133 = 0.0F;
            
            for (int64_t i_79132 = 0; i_79132 < q_70235; i_79132++) {
                float x_79134 = ((float *) mem_75822)[i_79132];
                bool cond_79135 = sle64(last_res_70906, i_79132);
                float defunc_0_f_res_79136;
                
                if (cond_79135) {
                    defunc_0_f_res_79136 = 0.0F;
                } else {
                    int64_t i_79137 = add64(max_res_79086, i_79132);
                    float defunc_0_add_arg_79138 =
                          ((float *) mem_75752)[i_79137];
                    
                    defunc_0_f_res_79136 = defunc_0_add_arg_79138;
                }
                
                float x_79139 = a0_79130 * x_79134;
                float defunc_9_fit_fun_res_79140 = defunc_0_f_res_79136 *
                      x_79139;
                float defunc_1_op_res_79141 = defunc_9_fit_fun_res_79140 +
                      redout_79133;
                float redout_tmp_79163 = defunc_1_op_res_79141;
                
                redout_79133 = redout_tmp_79163;
            }
            defunc_2_reduce_res_79131 = redout_79133;
            ((float *) mem_75812)[i_79018] = defunc_2_reduce_res_79131;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75843.mem + gtid_73231 * n_m_70241 * (int64_t) 4,
                    mem_75812 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75737);
    free(mem_75752);
    free(mem_75755);
    free(mem_75782);
    free(mem_75797);
    free(mem_75812);
    free(mem_75822);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81814_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81814_end -
                 futhark_mc_segmap_parloop_81814_start;
        
        ctx->futhark_mc_segmap_parloop_81814_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81814_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81814_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81812(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73230 = tid;
    int num_tasks_78985 = info.nsubtasks;
    struct futhark_mc_task_81811 *futhark_mc_task_81811 =
                                 (struct futhark_mc_task_81811 *) args;
    struct futhark_context *ctx = futhark_mc_task_81811->ctx;
    uint64_t futhark_mc_segmap_task_81812_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81812_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81811->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81811->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81811->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81811->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81811->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81811->free_i_70247;
    bool x_70248 = futhark_mc_task_81811->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81811->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81811->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81811->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81811->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75700 = futhark_mc_task_81811->free_bytes_75700;
    int64_t bytes_75703 = futhark_mc_task_81811->free_bytes_75703;
    int64_t bytes_75712 = futhark_mc_task_81811->free_bytes_75712;
    int64_t bytes_75733 = futhark_mc_task_81811->free_bytes_75733;
    struct memblock mem_75843 = {.desc ="mem_75843", .mem =
                                 futhark_mc_task_81811->free_mem_75843, .size =
                                 0, .references =NULL};
    int64_t iter_78986;
    struct futhark_mc_segmap_parloop_struct_81813
    futhark_mc_segmap_parloop_struct_81813;
    
    futhark_mc_segmap_parloop_struct_81813.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81813.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81813.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81813.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81813.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81813.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81813.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81813.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81813.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81813.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81813.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81813.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81813.free_bytes_75700 = bytes_75700;
    futhark_mc_segmap_parloop_struct_81813.free_bytes_75703 = bytes_75703;
    futhark_mc_segmap_parloop_struct_81813.free_bytes_75712 = bytes_75712;
    futhark_mc_segmap_parloop_struct_81813.free_bytes_75733 = bytes_75733;
    futhark_mc_segmap_parloop_struct_81813.free_mem_75843 = mem_75843.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81814_task;
    
    futhark_mc_segmap_parloop_81814_task.name =
        "futhark_mc_segmap_parloop_81814";
    futhark_mc_segmap_parloop_81814_task.fn = futhark_mc_segmap_parloop_81814;
    futhark_mc_segmap_parloop_81814_task.args =
        &futhark_mc_segmap_parloop_struct_81813;
    futhark_mc_segmap_parloop_81814_task.iterations = iterations;
    futhark_mc_segmap_parloop_81814_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81814_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81814_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81814_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81814_task);
    
    if (futhark_mc_segmap_parloop_81814_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81814_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81814_total_end -
                 futhark_mc_segmap_parloop_81814_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81814_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81814_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81814_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81812_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81812_end -
                 futhark_mc_segmap_task_81812_start;
        
        ctx->futhark_mc_segmap_task_81812_runs[tid]++;
        ctx->futhark_mc_segmap_task_81812_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81812_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81823 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75700;
    int64_t free_bytes_75703;
    int64_t free_bytes_75712;
    int64_t free_bytes_75733;
    unsigned char *free_mem_75843;
};
struct futhark_mc_task_81831 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73233;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75701;
};
struct futhark_mc_scan_stage_1_parloop_struct_81834 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73233;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75701;
};
static int futhark_mc_scan_stage_1_parloop_81835(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73234, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81834
    *futhark_mc_scan_stage_1_parloop_struct_81834 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81834 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81834->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81835_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81834->free_n_70233;
    int64_t gtid_73233 =
            futhark_mc_scan_stage_1_parloop_struct_81834->free_gtid_73233;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81834->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75701 = {.desc ="mem_75701", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81834->free_mem_75701,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79428 = start;
    int64_t x_79165;
    int64_t x_79166;
    
    x_79165 = (int64_t) 0;
    for (; iter_79428 < end; iter_79428++) {
        int64_t gtid_73235 = iter_79428;
        
        // stage 1 scan body
        {
            float x_79168 = ((float *) Y_mem_75306.mem)[gtid_73233 * n_70233 +
                                                        gtid_73235];
            bool isnan_res_79169;
            
            isnan_res_79169 = futrts_isnan32(x_79168);
            
            bool defunc_0_p_res_79170 = !isnan_res_79169;
            int64_t defunc_0_f_res_79171 = btoi_bool_i64(defunc_0_p_res_79170);
            
            // write mapped values results to memory
            { }
            x_79165 = x_79165;
            // Read next values
            {
                x_79166 = defunc_0_f_res_79171;
            }
            
            int64_t defunc_1_op_res_79167 = add64(x_79165, x_79166);
            
            ((int64_t *) mem_75701.mem)[gtid_73235] = defunc_1_op_res_79167;
            x_79165 = defunc_1_op_res_79167;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81835_end -
                 futhark_mc_scan_stage_1_parloop_81835_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81835_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81835_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81835_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81836 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73233;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75701;
};
static int futhark_mc_scan_stage_3_parloop_81837(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73234, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81836
    *futhark_mc_scan_stage_3_parloop_struct_81836 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81836 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81836->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81837_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81837_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81836->free_n_70233;
    int64_t gtid_73233 =
            futhark_mc_scan_stage_3_parloop_struct_81836->free_gtid_73233;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81836->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75701 = {.desc ="mem_75701", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81836->free_mem_75701,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79440 = start;
    int64_t x_79437;
    int64_t x_79438;
    
    if (iter_79440 == (int64_t) 0) {
        x_79437 = (int64_t) 0;
    } else {
        x_79437 = ((int64_t *) mem_75701.mem)[iter_79440 - (int64_t) 1];
    }
    for (; iter_79440 < end; iter_79440++) {
        int64_t gtid_73235 = iter_79440;
        
        // stage 3 scan body
        {
            float x_79168 = ((float *) Y_mem_75306.mem)[gtid_73233 * n_70233 +
                                                        gtid_73235];
            bool isnan_res_79169;
            
            isnan_res_79169 = futrts_isnan32(x_79168);
            
            bool defunc_0_p_res_79170 = !isnan_res_79169;
            int64_t defunc_0_f_res_79171 = btoi_bool_i64(defunc_0_p_res_79170);
            
            x_79437 = x_79437;
            x_79438 = defunc_0_f_res_79171;
            
            int64_t defunc_1_op_res_79439 = add64(x_79437, x_79438);
            
            ((int64_t *) mem_75701.mem)[gtid_73235] = defunc_1_op_res_79439;
            x_79437 = defunc_1_op_res_79439;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81837_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81837_end -
                 futhark_mc_scan_stage_3_parloop_81837_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81837_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81837_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81837_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81832(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73234 = tid;
    int num_tasks_79427 = info.nsubtasks;
    struct futhark_mc_task_81831 *futhark_mc_task_81831 =
                                 (struct futhark_mc_task_81831 *) args;
    struct futhark_context *ctx = futhark_mc_task_81831->ctx;
    uint64_t futhark_mc_segscan_task_81832_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81832_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81831->free_n_70233;
    int64_t gtid_73233 = futhark_mc_task_81831->free_gtid_73233;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81831->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75701 = {.desc ="mem_75701", .mem =
                                 futhark_mc_task_81831->free_mem_75701, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_79434_cached_sizze_81833 = 0;
    unsigned char *scan_stage_2_accum_mem_79434 = NULL;
    int64_t iter_79428;
    struct futhark_mc_scan_stage_1_parloop_struct_81834
    futhark_mc_scan_stage_1_parloop_struct_81834;
    
    futhark_mc_scan_stage_1_parloop_struct_81834.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81834.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81834.free_gtid_73233 = gtid_73233;
    futhark_mc_scan_stage_1_parloop_struct_81834.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81834.free_mem_75701 = mem_75701.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81835_task;
    
    futhark_mc_scan_stage_1_parloop_81835_task.name =
        "futhark_mc_scan_stage_1_parloop_81835";
    futhark_mc_scan_stage_1_parloop_81835_task.fn =
        futhark_mc_scan_stage_1_parloop_81835;
    futhark_mc_scan_stage_1_parloop_81835_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81834;
    futhark_mc_scan_stage_1_parloop_81835_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81835_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81835_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81835_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81835_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81835_task);
    
    if (futhark_mc_scan_stage_1_parloop_81835_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81835_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81835_total_end -
                 futhark_mc_scan_stage_1_parloop_81835_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81835_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81835_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81835_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_79427)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_79429;
        int64_t x_79430;
        int64_t offset_79432 = (int64_t) 0;
        int64_t offset_index_79433 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_79434_cached_sizze_81833 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_79434 = realloc(scan_stage_2_accum_mem_79434,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_79434_cached_sizze_81833 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_79434)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_79436 = 0; i_79436 < num_tasks_79427 - 1; i_79436++) {
            offset_79432 = squot64(n_70233, sext_i32_i64(num_tasks_79427));
            if (slt64(sext_i32_i64(i_79436), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_79427)))) {
                offset_79432 += (int64_t) 1;
            }
            offset_index_79433 += offset_79432;
            
            int64_t gtid_73235 = offset_index_79433;
            float x_79168 = ((float *) Y_mem_75306.mem)[gtid_73233 * n_70233 +
                                                        gtid_73235];
            bool isnan_res_79169;
            
            isnan_res_79169 = futrts_isnan32(x_79168);
            
            bool defunc_0_p_res_79170 = !isnan_res_79169;
            int64_t defunc_0_f_res_79171 = btoi_bool_i64(defunc_0_p_res_79170);
            
            // Read carry in
            {
                x_79429 =
                    ((int64_t *) scan_stage_2_accum_mem_79434)[(int64_t) 0];
            }
            // Read next values
            {
                x_79430 = ((int64_t *) mem_75701.mem)[offset_index_79433 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_79431 = add64(x_79429, x_79430);
            
            ((int64_t *) mem_75701.mem)[offset_index_79433 - (int64_t) 1] =
                defunc_1_op_res_79431;
            ((int64_t *) scan_stage_2_accum_mem_79434)[(int64_t) 0] =
                defunc_1_op_res_79431;
        }
        
        int64_t iter_79440 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81836
        futhark_mc_scan_stage_3_parloop_struct_81836;
        
        futhark_mc_scan_stage_3_parloop_struct_81836.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81836.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81836.free_gtid_73233 =
            gtid_73233;
        futhark_mc_scan_stage_3_parloop_struct_81836.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81836.free_mem_75701 =
            mem_75701.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81837_task;
        
        futhark_mc_scan_stage_3_parloop_81837_task.name =
            "futhark_mc_scan_stage_3_parloop_81837";
        futhark_mc_scan_stage_3_parloop_81837_task.fn =
            futhark_mc_scan_stage_3_parloop_81837;
        futhark_mc_scan_stage_3_parloop_81837_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81836;
        futhark_mc_scan_stage_3_parloop_81837_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81837_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81837_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81837_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81837_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81837_task);
        
        if (futhark_mc_scan_stage_3_parloop_81837_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81837_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81837_total_end -
                     futhark_mc_scan_stage_3_parloop_81837_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81837_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81837_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81837_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_79434);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81832_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81832_end -
                 futhark_mc_segscan_task_81832_start;
        
        ctx->futhark_mc_segscan_task_81832_runs[tid]++;
        ctx->futhark_mc_segscan_task_81832_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81832_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81838 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73233;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75701;
    unsigned char *free_mem_75704;
    unsigned char *free_mem_75707;
};
struct futhark_mc_segmap_parloop_struct_81840 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73233;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75701;
    unsigned char *free_mem_75704;
    unsigned char *free_mem_75707;
};
static int futhark_mc_segmap_parloop_81841(void *args, int64_t start,
                                           int64_t end, int flat_tid_73236,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81840
    *futhark_mc_segmap_parloop_struct_81840 =
    (struct futhark_mc_segmap_parloop_struct_81840 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81840->ctx;
    uint64_t futhark_mc_segmap_parloop_81841_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81841_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81840->free_n_70233;
    int64_t gtid_73233 =
            futhark_mc_segmap_parloop_struct_81840->free_gtid_73233;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81840->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75701 = {.desc ="mem_75701", .mem =
                                 futhark_mc_segmap_parloop_struct_81840->free_mem_75701,
                                 .size =0, .references =NULL};
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_segmap_parloop_struct_81840->free_mem_75704,
                                 .size =0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_segmap_parloop_struct_81840->free_mem_75707,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79444 = start;
    
    for (; iter_79444 < end; iter_79444++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79447 = n_70233;
        int64_t gtid_73237 = iter_79444;
        int64_t remnant_79448 = iter_79444 - gtid_73237;
        float x_79172 = ((float *) Y_mem_75306.mem)[gtid_73233 * n_70233 +
                                                    gtid_73237];
        bool isnan_res_79173;
        
        isnan_res_79173 = futrts_isnan32(x_79172);
        
        bool defunc_0_p_res_79174 = !isnan_res_79173;
        int64_t defunc_1_f_res_79175;
        
        if (defunc_0_p_res_79174) {
            int64_t x_79445 = ((int64_t *) mem_75701.mem)[gtid_73237];
            int64_t defunc_1_f_res_t_res_79446 = sub64(x_79445, (int64_t) 1);
            
            defunc_1_f_res_79175 = defunc_1_f_res_t_res_79446;
        } else {
            defunc_1_f_res_79175 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79175) &&
            slt64(defunc_1_f_res_79175, n_70233)) {
            ((int64_t *) mem_75707.mem)[defunc_1_f_res_79175] = gtid_73237;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79175) &&
            slt64(defunc_1_f_res_79175, n_70233)) {
            ((float *) mem_75704.mem)[defunc_1_f_res_79175] = x_79172;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81841_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81841_end -
                 futhark_mc_segmap_parloop_81841_start;
        
        ctx->futhark_mc_segmap_parloop_81841_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81841_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81841_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81839(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73236 = tid;
    int num_tasks_79443 = info.nsubtasks;
    struct futhark_mc_task_81838 *futhark_mc_task_81838 =
                                 (struct futhark_mc_task_81838 *) args;
    struct futhark_context *ctx = futhark_mc_task_81838->ctx;
    uint64_t futhark_mc_segmap_task_81839_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81839_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81838->free_n_70233;
    int64_t gtid_73233 = futhark_mc_task_81838->free_gtid_73233;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81838->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75701 = {.desc ="mem_75701", .mem =
                                 futhark_mc_task_81838->free_mem_75701, .size =
                                 0, .references =NULL};
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_task_81838->free_mem_75704, .size =
                                 0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_task_81838->free_mem_75707, .size =
                                 0, .references =NULL};
    int64_t iter_79444;
    struct futhark_mc_segmap_parloop_struct_81840
    futhark_mc_segmap_parloop_struct_81840;
    
    futhark_mc_segmap_parloop_struct_81840.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81840.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81840.free_gtid_73233 = gtid_73233;
    futhark_mc_segmap_parloop_struct_81840.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81840.free_mem_75701 = mem_75701.mem;
    futhark_mc_segmap_parloop_struct_81840.free_mem_75704 = mem_75704.mem;
    futhark_mc_segmap_parloop_struct_81840.free_mem_75707 = mem_75707.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81841_task;
    
    futhark_mc_segmap_parloop_81841_task.name =
        "futhark_mc_segmap_parloop_81841";
    futhark_mc_segmap_parloop_81841_task.fn = futhark_mc_segmap_parloop_81841;
    futhark_mc_segmap_parloop_81841_task.args =
        &futhark_mc_segmap_parloop_struct_81840;
    futhark_mc_segmap_parloop_81841_task.iterations = iterations;
    futhark_mc_segmap_parloop_81841_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81841_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81841_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81841_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81841_task);
    
    if (futhark_mc_segmap_parloop_81841_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81841_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81841_total_end -
                 futhark_mc_segmap_parloop_81841_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81841_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81841_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81841_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81839_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81839_end -
                 futhark_mc_segmap_task_81839_start;
        
        ctx->futhark_mc_segmap_task_81839_runs[tid]++;
        ctx->futhark_mc_segmap_task_81839_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81839_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81842 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75710;
};
struct futhark_mc_segmap_parloop_struct_81844 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75710;
};
static int futhark_mc_segmap_parloop_81845(void *args, int64_t start,
                                           int64_t end, int flat_tid_73238,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81844
    *futhark_mc_segmap_parloop_struct_81844 =
    (struct futhark_mc_segmap_parloop_struct_81844 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81844->ctx;
    uint64_t futhark_mc_segmap_parloop_81845_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81845_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81844->free_n_70233;
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_segmap_parloop_struct_81844->free_mem_75707,
                                 .size =0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_segmap_parloop_struct_81844->free_mem_75710,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79450 = start;
    
    for (; iter_79450 < end; iter_79450++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79451 = n_70233;
        int64_t gtid_73239 = iter_79450;
        int64_t remnant_79452 = iter_79450 - gtid_73239;
        int64_t x_79178 = ((int64_t *) mem_75707.mem)[gtid_73239];
        int64_t defunc_0_f_res_79179 = add64((int64_t) 1, x_79178);
        
        ((int64_t *) mem_75710.mem)[gtid_73239] = defunc_0_f_res_79179;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81845_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81845_end -
                 futhark_mc_segmap_parloop_81845_start;
        
        ctx->futhark_mc_segmap_parloop_81845_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81845_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81845_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81843(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73238 = tid;
    int num_tasks_79449 = info.nsubtasks;
    struct futhark_mc_task_81842 *futhark_mc_task_81842 =
                                 (struct futhark_mc_task_81842 *) args;
    struct futhark_context *ctx = futhark_mc_task_81842->ctx;
    uint64_t futhark_mc_segmap_task_81843_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81843_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81842->free_n_70233;
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_task_81842->free_mem_75707, .size =
                                 0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_task_81842->free_mem_75710, .size =
                                 0, .references =NULL};
    int64_t iter_79450;
    struct futhark_mc_segmap_parloop_struct_81844
    futhark_mc_segmap_parloop_struct_81844;
    
    futhark_mc_segmap_parloop_struct_81844.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81844.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81844.free_mem_75707 = mem_75707.mem;
    futhark_mc_segmap_parloop_struct_81844.free_mem_75710 = mem_75710.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81845_task;
    
    futhark_mc_segmap_parloop_81845_task.name =
        "futhark_mc_segmap_parloop_81845";
    futhark_mc_segmap_parloop_81845_task.fn = futhark_mc_segmap_parloop_81845;
    futhark_mc_segmap_parloop_81845_task.args =
        &futhark_mc_segmap_parloop_struct_81844;
    futhark_mc_segmap_parloop_81845_task.iterations = iterations;
    futhark_mc_segmap_parloop_81845_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81845_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81845_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81845_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81845_task);
    
    if (futhark_mc_segmap_parloop_81845_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81845_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81845_total_end -
                 futhark_mc_segmap_parloop_81845_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81845_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81845_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81845_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81843_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81843_end -
                 futhark_mc_segmap_task_81843_start;
        
        ctx->futhark_mc_segmap_task_81843_runs[tid]++;
        ctx->futhark_mc_segmap_task_81843_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81843_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81846 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75713;
};
struct futhark_mc_segmap_parloop_struct_81848 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75713;
};
static int futhark_mc_segmap_parloop_81849(void *args, int64_t start,
                                           int64_t end, int flat_tid_73240,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81848
    *futhark_mc_segmap_parloop_struct_81848 =
    (struct futhark_mc_segmap_parloop_struct_81848 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81848->ctx;
    uint64_t futhark_mc_segmap_parloop_81849_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81849_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81848->free_q_70235;
    int64_t last_res_73381 =
            futhark_mc_segmap_parloop_struct_81848->free_last_res_73381;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_segmap_parloop_struct_81848->free_mem_75713,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79454 = start;
    
    for (; iter_79454 < end; iter_79454++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79455 = q_70235;
        int64_t gtid_73241 = iter_79454;
        int64_t remnant_79456 = iter_79454 - gtid_73241;
        bool cond_79180 = sle64(last_res_73381, gtid_73241);
        float defunc_0_f_res_79181;
        
        if (cond_79180) {
            defunc_0_f_res_79181 = 0.0F;
        } else {
            defunc_0_f_res_79181 = 1.0F;
        }
        ((float *) mem_75713.mem)[gtid_73241] = defunc_0_f_res_79181;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81849_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81849_end -
                 futhark_mc_segmap_parloop_81849_start;
        
        ctx->futhark_mc_segmap_parloop_81849_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81849_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81849_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81847(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73240 = tid;
    int num_tasks_79453 = info.nsubtasks;
    struct futhark_mc_task_81846 *futhark_mc_task_81846 =
                                 (struct futhark_mc_task_81846 *) args;
    struct futhark_context *ctx = futhark_mc_task_81846->ctx;
    uint64_t futhark_mc_segmap_task_81847_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81847_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81846->free_q_70235;
    int64_t last_res_73381 = futhark_mc_task_81846->free_last_res_73381;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_task_81846->free_mem_75713, .size =
                                 0, .references =NULL};
    int64_t iter_79454;
    struct futhark_mc_segmap_parloop_struct_81848
    futhark_mc_segmap_parloop_struct_81848;
    
    futhark_mc_segmap_parloop_struct_81848.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81848.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81848.free_last_res_73381 = last_res_73381;
    futhark_mc_segmap_parloop_struct_81848.free_mem_75713 = mem_75713.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81849_task;
    
    futhark_mc_segmap_parloop_81849_task.name =
        "futhark_mc_segmap_parloop_81849";
    futhark_mc_segmap_parloop_81849_task.fn = futhark_mc_segmap_parloop_81849;
    futhark_mc_segmap_parloop_81849_task.args =
        &futhark_mc_segmap_parloop_struct_81848;
    futhark_mc_segmap_parloop_81849_task.iterations = iterations;
    futhark_mc_segmap_parloop_81849_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81849_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81849_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81849_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81849_task);
    
    if (futhark_mc_segmap_parloop_81849_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81849_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81849_total_end -
                 futhark_mc_segmap_parloop_81849_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81849_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81849_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81849_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81847_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81847_end -
                 futhark_mc_segmap_task_81847_start;
        
        ctx->futhark_mc_segmap_task_81847_runs[tid]++;
        ctx->futhark_mc_segmap_task_81847_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81847_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81850 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73381;
    int64_t free_min_arg_73396;
    int64_t free_min_arg_73397;
    int64_t free_min_res_73398;
    float free_max_res_73402;
    unsigned char *free_mem_75704;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75710;
    int64_t free_bytes_75712;
    unsigned char *free_mem_75713;
    unsigned char *free_mem_75734;
};
struct futhark_mc_segmap_parloop_struct_81852 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73381;
    int64_t free_min_arg_73396;
    int64_t free_min_arg_73397;
    int64_t free_min_res_73398;
    float free_max_res_73402;
    unsigned char *free_mem_75704;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75710;
    int64_t free_bytes_75712;
    unsigned char *free_mem_75713;
    unsigned char *free_mem_75734;
};
static int futhark_mc_segmap_parloop_81853(void *args, int64_t start,
                                           int64_t end, int flat_tid_73242,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81852
    *futhark_mc_segmap_parloop_struct_81852 =
    (struct futhark_mc_segmap_parloop_struct_81852 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81852->ctx;
    uint64_t futhark_mc_segmap_parloop_81853_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81853_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81852->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81852->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81852->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81852->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81852->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81852->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81852->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81852->free_loop_cond_70258;
    int64_t last_res_73381 =
            futhark_mc_segmap_parloop_struct_81852->free_last_res_73381;
    int64_t min_arg_73396 =
            futhark_mc_segmap_parloop_struct_81852->free_min_arg_73396;
    int64_t min_arg_73397 =
            futhark_mc_segmap_parloop_struct_81852->free_min_arg_73397;
    int64_t min_res_73398 =
            futhark_mc_segmap_parloop_struct_81852->free_min_res_73398;
    float max_res_73402 =
          futhark_mc_segmap_parloop_struct_81852->free_max_res_73402;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_segmap_parloop_struct_81852->free_mem_75704,
                                 .size =0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_segmap_parloop_struct_81852->free_mem_75707,
                                 .size =0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_segmap_parloop_struct_81852->free_mem_75710,
                                 .size =0, .references =NULL};
    int64_t bytes_75712 =
            futhark_mc_segmap_parloop_struct_81852->free_bytes_75712;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_segmap_parloop_struct_81852->free_mem_75713,
                                 .size =0, .references =NULL};
    struct memblock mem_75734 = {.desc ="mem_75734", .mem =
                                 futhark_mc_segmap_parloop_struct_81852->free_mem_75734,
                                 .size =0, .references =NULL};
    size_t mem_79388_cached_sizze_81854 = 0;
    unsigned char *mem_79388 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79458 = start;
    
    if (mem_79388_cached_sizze_81854 < (size_t) bytes_75712) {
        mem_79388 = realloc(mem_79388, bytes_75712);
        mem_79388_cached_sizze_81854 = bytes_75712;
    }
    for (; iter_79458 < end; iter_79458++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79545 = n_m_70241;
        int64_t gtid_73243 = iter_79458;
        int64_t remnant_79546 = iter_79458 - gtid_73243;
        int64_t min_arg_79302 = mul64(jump_70237, gtid_73243);
        int64_t min_res_79303 = smin64(i_70247, min_arg_79302);
        int64_t defunc_0_g_res_79304 = add64((int64_t) 1, min_res_79303);
        bool init_idx_79305;
        int64_t init_idx_79306;
        int64_t init_idx_79307;
        bool loop_while_79459;
        int64_t low_79460;
        int64_t high_79461;
        
        loop_while_79459 = x_70248;
        low_79460 = (int64_t) 0;
        high_79461 = i_70247;
        while (loop_while_79459) {
            int64_t x_79462 = add64(low_79460, high_79461);
            int64_t mid_79463 = sdiv64(x_79462, (int64_t) 2);
            bool x_79464 = sle64((int64_t) 0, mid_79463);
            bool y_79465 = slt64(mid_79463, n_70233);
            bool bounds_check_79466 = x_79464 && y_79465;
            bool index_certs_79467;
            
            if (!bounds_check_79466) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_79463,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_79468 = ((int64_t *) mem_75710.mem)[mid_79463];
            bool cond_79469 = slt64(mid_id_79468, (int64_t) 0);
            int64_t mid_idx_79470;
            
            if (cond_79469) {
                mid_idx_79470 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_79470 = mid_id_79468;
            }
            
            bool cond_79471 = sle64(defunc_0_g_res_79304, mid_idx_79470);
            int64_t loopres_79472;
            int64_t loopres_79473;
            
            if (cond_79471) {
                int64_t loopres_t_res_79474 = sub64(mid_79463, (int64_t) 1);
                
                loopres_79472 = low_79460;
                loopres_79473 = loopres_t_res_79474;
            } else {
                int64_t loopres_f_res_79475 = add64((int64_t) 1, mid_79463);
                
                loopres_79472 = loopres_f_res_79475;
                loopres_79473 = high_79461;
            }
            
            bool loop_cond_79476 = sle64(loopres_79472, loopres_79473);
            bool loop_while_tmp_79547 = loop_cond_79476;
            int64_t low_tmp_79548 = loopres_79472;
            int64_t high_tmp_79549 = loopres_79473;
            
            loop_while_79459 = loop_while_tmp_79547;
            low_79460 = low_tmp_79548;
            high_79461 = high_tmp_79549;
        }
        init_idx_79305 = loop_while_79459;
        init_idx_79306 = low_79460;
        init_idx_79307 = high_79461;
        
        bool idx_79326;
        int64_t idx_79327;
        int64_t idx_79328;
        int64_t idx_79329;
        bool loop_while_79477;
        int64_t l_idx_79478;
        int64_t r_idx_79479;
        int64_t span_79480;
        
        loop_while_79477 = loop_cond_70258;
        l_idx_79478 = init_idx_79306;
        r_idx_79479 = init_idx_79306;
        span_79480 = (int64_t) 1;
        while (loop_while_79477) {
            int64_t max_arg_79481 = sub64(l_idx_79478, (int64_t) 1);
            int64_t max_res_79482 = smax64((int64_t) 0, max_arg_79481);
            int64_t min_arg_79483 = add64((int64_t) 1, r_idx_79479);
            int64_t min_res_79484 = smin64(min_arg_73396, min_arg_79483);
            bool x_79485 = sle64((int64_t) 0, max_res_79482);
            bool y_79486 = slt64(max_res_79482, n_70233);
            bool bounds_check_79487 = x_79485 && y_79486;
            bool index_certs_79488;
            
            if (!bounds_check_79487) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79482,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79489 = ((int64_t *) mem_75710.mem)[max_res_79482];
            int64_t abs_arg_79490 = sub64(x_79489, defunc_0_g_res_79304);
            int64_t abs_res_79491 = abs64(abs_arg_79490);
            bool x_79492 = sle64((int64_t) 0, min_res_79484);
            bool y_79493 = slt64(min_res_79484, n_70233);
            bool bounds_check_79494 = x_79492 && y_79493;
            bool index_certs_79495;
            
            if (!bounds_check_79494) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_79484,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79496 = ((int64_t *) mem_75710.mem)[min_res_79484];
            int64_t abs_arg_79497 = sub64(x_79496, defunc_0_g_res_79304);
            int64_t abs_res_79498 = abs64(abs_arg_79497);
            bool cond_79499 = max_res_79482 == l_idx_79478;
            int64_t loopres_79500;
            int64_t loopres_79501;
            int64_t loopres_79502;
            
            if (cond_79499) {
                loopres_79500 = l_idx_79478;
                loopres_79501 = r_idx_79479;
                loopres_79502 = min_res_70253;
            } else {
                bool cond_79503 = slt64(abs_res_79491, abs_res_79498);
                bool cond_f_res_79504 = min_res_79484 == r_idx_79479;
                bool x_79505 = !cond_79503;
                bool y_79506 = cond_f_res_79504 && x_79505;
                bool cond_79507 = cond_79503 || y_79506;
                int64_t loopres_f_res_79508;
                
                if (cond_79507) {
                    loopres_f_res_79508 = max_res_79482;
                } else {
                    loopres_f_res_79508 = l_idx_79478;
                }
                
                int64_t loopres_f_res_79509;
                
                if (cond_79507) {
                    loopres_f_res_79509 = r_idx_79479;
                } else {
                    loopres_f_res_79509 = min_res_79484;
                }
                
                int64_t loopres_f_res_79510;
                
                if (cond_79507) {
                    int64_t loopres_f_res_t_res_79511 = add64((int64_t) 1,
                                                              span_79480);
                    
                    loopres_f_res_79510 = loopres_f_res_t_res_79511;
                } else {
                    int64_t loopres_f_res_f_res_79512 = add64((int64_t) 1,
                                                              span_79480);
                    
                    loopres_f_res_79510 = loopres_f_res_f_res_79512;
                }
                loopres_79500 = loopres_f_res_79508;
                loopres_79501 = loopres_f_res_79509;
                loopres_79502 = loopres_f_res_79510;
            }
            
            bool loop_cond_79513 = slt64(loopres_79502, min_res_70253);
            bool loop_while_tmp_79550 = loop_cond_79513;
            int64_t l_idx_tmp_79551 = loopres_79500;
            int64_t r_idx_tmp_79552 = loopres_79501;
            int64_t span_tmp_79553 = loopres_79502;
            
            loop_while_79477 = loop_while_tmp_79550;
            l_idx_79478 = l_idx_tmp_79551;
            r_idx_79479 = r_idx_tmp_79552;
            span_79480 = span_tmp_79553;
        }
        idx_79326 = loop_while_79477;
        idx_79327 = l_idx_79478;
        idx_79328 = r_idx_79479;
        idx_79329 = span_79480;
        
        int64_t min_res_79367 = smin64(min_arg_73397, idx_79327);
        int64_t max_res_79368 = smax64((int64_t) 0, min_res_79367);
        int64_t x_79369 = add64(min_res_73398, max_res_79368);
        int64_t r_79370 = sub64(x_79369, (int64_t) 1);
        bool x_79371 = sle64((int64_t) 0, r_79370);
        bool y_79372 = slt64(r_79370, n_70233);
        bool bounds_check_79373 = x_79371 && y_79372;
        bool index_certs_79374;
        
        if (!bounds_check_79373) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_79370,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79375 = ((int64_t *) mem_75707.mem)[r_79370];
        int64_t abs_arg_79376 = sub64(x_79375, min_res_79303);
        int64_t abs_res_79377 = abs64(abs_arg_79376);
        bool x_79378 = sle64((int64_t) 0, max_res_79368);
        bool y_79379 = slt64(max_res_79368, n_70233);
        bool bounds_check_79380 = x_79378 && y_79379;
        bool index_certs_79381;
        
        if (!bounds_check_79380) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_79368,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79382 = ((int64_t *) mem_75707.mem)[max_res_79368];
        int64_t abs_arg_79383 = sub64(x_79382, min_res_79303);
        int64_t abs_res_79384 = abs64(abs_arg_79383);
        int64_t max_res_79385 = smax64(abs_res_79377, abs_res_79384);
        float defunc_0_f_res_79386 = sitofp_i64_f32(max_res_79385);
        float defunc_1_f_res_79387 = max_res_73402 + defunc_0_f_res_79386;
        float defunc_2_reduce_res_79390;
        float redout_79515 = 0.0F;
        
        for (int64_t i_79514 = 0; i_79514 < q_70235; i_79514++) {
            float x_79517 = ((float *) mem_75713.mem)[i_79514];
            bool cond_79518 = sle64(last_res_73381, i_79514);
            int64_t defunc_0_f_res_79519;
            
            if (cond_79518) {
                defunc_0_f_res_79519 = (int64_t) 0;
            } else {
                int64_t i_79520 = add64(max_res_79368, i_79514);
                int64_t defunc_0_add_arg_79521 =
                        ((int64_t *) mem_75707.mem)[i_79520];
                int64_t defunc_1_add_res_79522 = add64((int64_t) 1,
                                                       defunc_0_add_arg_79521);
                
                defunc_0_f_res_79519 = defunc_1_add_res_79522;
            }
            
            int64_t binop_p_79523 = sub64(defunc_0_f_res_79519, min_res_79303);
            float defunc_0_f_res_79524 = sitofp_i64_f32(binop_p_79523);
            float abs_res_79525 = (float) fabs(defunc_0_f_res_79524);
            float tmp1_79526 = abs_res_79525 / defunc_1_f_res_79387;
            float x_79527 = tmp1_79526 * tmp1_79526;
            float y_79528 = tmp1_79526 * x_79527;
            float tmp2_79529 = 1.0F - y_79528;
            float x_79530 = tmp2_79529 * tmp2_79529;
            float tmp3_79531 = tmp2_79529 * x_79530;
            float tmp4_79532 = x_79517 * tmp3_79531;
            float defunc_1_op_res_79533 = tmp4_79532 + redout_79515;
            
            ((float *) mem_79388)[i_79514] = tmp4_79532;
            
            float redout_tmp_79554 = defunc_1_op_res_79533;
            
            redout_79515 = redout_tmp_79554;
        }
        defunc_2_reduce_res_79390 = redout_79515;
        
        float a0_79413 = 1.0F / defunc_2_reduce_res_79390;
        float defunc_2_reduce_res_79414;
        float redout_79536 = 0.0F;
        
        for (int64_t i_79535 = 0; i_79535 < q_70235; i_79535++) {
            float x_79537 = ((float *) mem_79388)[i_79535];
            bool cond_79538 = sle64(last_res_73381, i_79535);
            float defunc_0_f_res_79539;
            
            if (cond_79538) {
                defunc_0_f_res_79539 = 0.0F;
            } else {
                int64_t i_79540 = add64(max_res_79368, i_79535);
                float defunc_0_add_arg_79541 =
                      ((float *) mem_75704.mem)[i_79540];
                
                defunc_0_f_res_79539 = defunc_0_add_arg_79541;
            }
            
            float x_79542 = a0_79413 * x_79537;
            float defunc_9_fit_fun_res_79543 = defunc_0_f_res_79539 * x_79542;
            float defunc_1_op_res_79544 = defunc_9_fit_fun_res_79543 +
                  redout_79536;
            float redout_tmp_79556 = defunc_1_op_res_79544;
            
            redout_79536 = redout_tmp_79556;
        }
        defunc_2_reduce_res_79414 = redout_79536;
        ((float *) mem_75734.mem)[gtid_73243] = defunc_2_reduce_res_79414;
    }
    
  cleanup:
    { }
    free(mem_79388);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81853_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81853_end -
                 futhark_mc_segmap_parloop_81853_start;
        
        ctx->futhark_mc_segmap_parloop_81853_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81853_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81853_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81851(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73242 = tid;
    int num_tasks_79457 = info.nsubtasks;
    struct futhark_mc_task_81850 *futhark_mc_task_81850 =
                                 (struct futhark_mc_task_81850 *) args;
    struct futhark_context *ctx = futhark_mc_task_81850->ctx;
    uint64_t futhark_mc_segmap_task_81851_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81851_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81850->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81850->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81850->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81850->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81850->free_i_70247;
    bool x_70248 = futhark_mc_task_81850->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81850->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81850->free_loop_cond_70258;
    int64_t last_res_73381 = futhark_mc_task_81850->free_last_res_73381;
    int64_t min_arg_73396 = futhark_mc_task_81850->free_min_arg_73396;
    int64_t min_arg_73397 = futhark_mc_task_81850->free_min_arg_73397;
    int64_t min_res_73398 = futhark_mc_task_81850->free_min_res_73398;
    float max_res_73402 = futhark_mc_task_81850->free_max_res_73402;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_task_81850->free_mem_75704, .size =
                                 0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_task_81850->free_mem_75707, .size =
                                 0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_task_81850->free_mem_75710, .size =
                                 0, .references =NULL};
    int64_t bytes_75712 = futhark_mc_task_81850->free_bytes_75712;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_task_81850->free_mem_75713, .size =
                                 0, .references =NULL};
    struct memblock mem_75734 = {.desc ="mem_75734", .mem =
                                 futhark_mc_task_81850->free_mem_75734, .size =
                                 0, .references =NULL};
    int64_t iter_79458;
    struct futhark_mc_segmap_parloop_struct_81852
    futhark_mc_segmap_parloop_struct_81852;
    
    futhark_mc_segmap_parloop_struct_81852.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81852.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81852.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81852.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81852.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81852.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81852.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81852.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81852.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81852.free_last_res_73381 = last_res_73381;
    futhark_mc_segmap_parloop_struct_81852.free_min_arg_73396 = min_arg_73396;
    futhark_mc_segmap_parloop_struct_81852.free_min_arg_73397 = min_arg_73397;
    futhark_mc_segmap_parloop_struct_81852.free_min_res_73398 = min_res_73398;
    futhark_mc_segmap_parloop_struct_81852.free_max_res_73402 = max_res_73402;
    futhark_mc_segmap_parloop_struct_81852.free_mem_75704 = mem_75704.mem;
    futhark_mc_segmap_parloop_struct_81852.free_mem_75707 = mem_75707.mem;
    futhark_mc_segmap_parloop_struct_81852.free_mem_75710 = mem_75710.mem;
    futhark_mc_segmap_parloop_struct_81852.free_bytes_75712 = bytes_75712;
    futhark_mc_segmap_parloop_struct_81852.free_mem_75713 = mem_75713.mem;
    futhark_mc_segmap_parloop_struct_81852.free_mem_75734 = mem_75734.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81853_task;
    
    futhark_mc_segmap_parloop_81853_task.name =
        "futhark_mc_segmap_parloop_81853";
    futhark_mc_segmap_parloop_81853_task.fn = futhark_mc_segmap_parloop_81853;
    futhark_mc_segmap_parloop_81853_task.args =
        &futhark_mc_segmap_parloop_struct_81852;
    futhark_mc_segmap_parloop_81853_task.iterations = iterations;
    futhark_mc_segmap_parloop_81853_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81853_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81853_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81853_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81853_task);
    
    if (futhark_mc_segmap_parloop_81853_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81853_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81853_total_end -
                 futhark_mc_segmap_parloop_81853_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81853_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81853_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81853_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81851_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81851_end -
                 futhark_mc_segmap_task_81851_start;
        
        ctx->futhark_mc_segmap_task_81851_runs[tid]++;
        ctx->futhark_mc_segmap_task_81851_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81851_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81856 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73381;
    int64_t free_min_arg_73396;
    int64_t free_min_arg_73397;
    int64_t free_min_res_73398;
    float free_max_res_73402;
    unsigned char *free_mem_75704;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75710;
    int64_t free_bytes_75712;
    unsigned char *free_mem_75713;
    unsigned char *free_mem_75734;
};
struct futhark_mc_task_81859 {
    struct futhark_context *ctx;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75713;
    int64_t free_min_res_79183;
    int64_t free_max_res_79248;
    float free_defunc_1_f_res_79267;
    float *retval_defunc_2_reduce_res_79269;
    unsigned char *retval_mem_79268;
};
struct futhark_mc_segred_stage_1_parloop_struct_81862 {
    struct futhark_context *ctx;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75707;
    unsigned char *free_mem_75713;
    int64_t free_min_res_79183;
    int64_t free_max_res_79248;
    float free_defunc_1_f_res_79267;
    unsigned char *free_mem_79268;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79652;
};
static int futhark_mc_segred_stage_1_parloop_81863(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73246, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81862
    *futhark_mc_segred_stage_1_parloop_struct_81862 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81862 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81862->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81863_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81863_start = get_wall_time();
    
    int64_t last_res_73381 =
            futhark_mc_segred_stage_1_parloop_struct_81862->free_last_res_73381;
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81862->free_mem_75707,
                                 .size =0, .references =NULL};
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81862->free_mem_75713,
                                 .size =0, .references =NULL};
    int64_t min_res_79183 =
            futhark_mc_segred_stage_1_parloop_struct_81862->free_min_res_79183;
    int64_t max_res_79248 =
            futhark_mc_segred_stage_1_parloop_struct_81862->free_max_res_79248;
    float defunc_1_f_res_79267 =
          futhark_mc_segred_stage_1_parloop_struct_81862->free_defunc_1_f_res_79267;
    struct memblock mem_79268 = {.desc ="mem_79268", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81862->free_mem_79268,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_79652 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79652",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81862->free_reduce_stage_1_tid_res_arr_mem_79652,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79654 = start;
    float x_79613;
    float x_79614;
    float local_acc_79655 = 0.0F;
    
    for (; iter_79654 < end; iter_79654++) {
        int64_t gtid_73247 = iter_79654;
        float x_79616 = ((float *) mem_75713.mem)[gtid_73247];
        bool cond_79617 = sle64(last_res_73381, gtid_73247);
        int64_t defunc_0_f_res_79618;
        
        if (cond_79617) {
            defunc_0_f_res_79618 = (int64_t) 0;
        } else {
            int64_t i_79619 = add64(gtid_73247, max_res_79248);
            int64_t defunc_0_add_arg_79620 =
                    ((int64_t *) mem_75707.mem)[i_79619];
            int64_t defunc_1_add_res_79621 = add64((int64_t) 1,
                                                   defunc_0_add_arg_79620);
            
            defunc_0_f_res_79618 = defunc_1_add_res_79621;
        }
        
        int64_t binop_p_79622 = sub64(defunc_0_f_res_79618, min_res_79183);
        float defunc_0_f_res_79623 = sitofp_i64_f32(binop_p_79622);
        float abs_res_79624 = (float) fabs(defunc_0_f_res_79623);
        float tmp1_79625 = abs_res_79624 / defunc_1_f_res_79267;
        float x_79626 = tmp1_79625 * tmp1_79625;
        float y_79627 = tmp1_79625 * x_79626;
        float tmp2_79628 = 1.0F - y_79627;
        float x_79629 = tmp2_79628 * tmp2_79628;
        float tmp3_79630 = tmp2_79628 * x_79629;
        float tmp4_79631 = x_79616 * tmp3_79630;
        
        // save map-out results
        {
            ((float *) mem_79268.mem)[gtid_73247] = tmp4_79631;
        }
        // Load accum params
        {
            x_79613 = local_acc_79655;
        }
        // Load next params
        {
            x_79614 = tmp4_79631;
        }
        // Red body
        {
            float defunc_1_op_res_79615 = x_79613 + x_79614;
            
            local_acc_79655 = defunc_1_op_res_79615;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_79652.mem)[flat_tid_73246] =
        local_acc_79655;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81863_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81863_end -
                 futhark_mc_segred_stage_1_parloop_81863_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81863_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81863_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81863_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81860(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73246 = tid;
    int num_tasks_79651 = info.nsubtasks;
    struct futhark_mc_task_81859 *futhark_mc_task_81859 =
                                 (struct futhark_mc_task_81859 *) args;
    struct futhark_context *ctx = futhark_mc_task_81859->ctx;
    uint64_t futhark_mc_segred_task_81860_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81860_start = get_wall_time();
    
    int64_t last_res_73381 = futhark_mc_task_81859->free_last_res_73381;
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_task_81859->free_mem_75707, .size =
                                 0, .references =NULL};
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_task_81859->free_mem_75713, .size =
                                 0, .references =NULL};
    int64_t min_res_79183 = futhark_mc_task_81859->free_min_res_79183;
    int64_t max_res_79248 = futhark_mc_task_81859->free_max_res_79248;
    float defunc_1_f_res_79267 =
          futhark_mc_task_81859->free_defunc_1_f_res_79267;
    float defunc_2_reduce_res_79269 =
          *futhark_mc_task_81859->retval_defunc_2_reduce_res_79269;
    struct memblock mem_79268 = {.desc ="mem_79268", .mem =
                                 futhark_mc_task_81859->retval_mem_79268,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_79652_cached_sizze_81861 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79652 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_79652_cached_sizze_81861 <
        (size_t) ((int64_t) 4 * num_tasks_79651)) {
        reduce_stage_1_tid_res_arr_mem_79652 =
            realloc(reduce_stage_1_tid_res_arr_mem_79652, (int64_t) 4 *
                    num_tasks_79651);
        reduce_stage_1_tid_res_arr_mem_79652_cached_sizze_81861 = (int64_t) 4 *
            num_tasks_79651;
    }
    
    int64_t iter_79654;
    struct futhark_mc_segred_stage_1_parloop_struct_81862
    futhark_mc_segred_stage_1_parloop_struct_81862;
    
    futhark_mc_segred_stage_1_parloop_struct_81862.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_last_res_73381 =
        last_res_73381;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_mem_75707 =
        mem_75707.mem;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_mem_75713 =
        mem_75713.mem;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_min_res_79183 =
        min_res_79183;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_max_res_79248 =
        max_res_79248;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_defunc_1_f_res_79267 =
        defunc_1_f_res_79267;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_mem_79268 =
        mem_79268.mem;
    futhark_mc_segred_stage_1_parloop_struct_81862.free_reduce_stage_1_tid_res_arr_mem_79652 =
        reduce_stage_1_tid_res_arr_mem_79652;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81863_task;
    
    futhark_mc_segred_stage_1_parloop_81863_task.name =
        "futhark_mc_segred_stage_1_parloop_81863";
    futhark_mc_segred_stage_1_parloop_81863_task.fn =
        futhark_mc_segred_stage_1_parloop_81863;
    futhark_mc_segred_stage_1_parloop_81863_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81862;
    futhark_mc_segred_stage_1_parloop_81863_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81863_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81863_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81863_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81863_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81863_task);
    
    if (futhark_mc_segred_stage_1_parloop_81863_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81863_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81863_total_end -
                 futhark_mc_segred_stage_1_parloop_81863_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81863_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81863_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81863_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_79269 = 0.0F;
    }
    
    float x_79656;
    float x_79657;
    
    for (int32_t i_79659 = 0; i_79659 < num_tasks_79651; i_79659++) {
        flat_tid_73246 = i_79659;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_79656 = defunc_2_reduce_res_79269;
            }
            // load next params
            {
                x_79657 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79652)[flat_tid_73246];
            }
            // red body
            {
                float defunc_1_op_res_79658 = x_79656 + x_79657;
                
                defunc_2_reduce_res_79269 = defunc_1_op_res_79658;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_79652);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81860_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81860_end -
                 futhark_mc_segred_task_81860_start;
        
        ctx->futhark_mc_segred_task_81860_runs[tid]++;
        ctx->futhark_mc_segred_task_81860_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81860_iter[tid] += iterations;
    }
    *futhark_mc_task_81859->retval_defunc_2_reduce_res_79269 =
        defunc_2_reduce_res_79269;
    futhark_mc_task_81859->retval_mem_79268 = mem_79268.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81864 {
    struct futhark_context *ctx;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75704;
    int64_t free_max_res_79248;
    unsigned char *free_mem_79268;
    float free_a0_79290;
    float *retval_defunc_2_reduce_res_79291;
};
struct futhark_mc_segred_stage_1_parloop_struct_81867 {
    struct futhark_context *ctx;
    int64_t free_last_res_73381;
    unsigned char *free_mem_75704;
    int64_t free_max_res_79248;
    unsigned char *free_mem_79268;
    float free_a0_79290;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79661;
};
static int futhark_mc_segred_stage_1_parloop_81868(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73248, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81867
    *futhark_mc_segred_stage_1_parloop_struct_81867 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81867 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81867->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81868_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81868_start = get_wall_time();
    
    int64_t last_res_73381 =
            futhark_mc_segred_stage_1_parloop_struct_81867->free_last_res_73381;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81867->free_mem_75704,
                                 .size =0, .references =NULL};
    int64_t max_res_79248 =
            futhark_mc_segred_stage_1_parloop_struct_81867->free_max_res_79248;
    struct memblock mem_79268 = {.desc ="mem_79268", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81867->free_mem_79268,
                                 .size =0, .references =NULL};
    float a0_79290 =
          futhark_mc_segred_stage_1_parloop_struct_81867->free_a0_79290;
    struct memblock reduce_stage_1_tid_res_arr_mem_79661 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79661",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81867->free_reduce_stage_1_tid_res_arr_mem_79661,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79663 = start;
    float x_79632;
    float x_79633;
    float local_acc_79664 = 0.0F;
    
    for (; iter_79663 < end; iter_79663++) {
        int64_t gtid_73249 = iter_79663;
        float x_79635 = ((float *) mem_79268.mem)[gtid_73249];
        bool cond_79636 = sle64(last_res_73381, gtid_73249);
        float defunc_0_f_res_79637;
        
        if (cond_79636) {
            defunc_0_f_res_79637 = 0.0F;
        } else {
            int64_t i_79638 = add64(gtid_73249, max_res_79248);
            float defunc_0_add_arg_79639 = ((float *) mem_75704.mem)[i_79638];
            
            defunc_0_f_res_79637 = defunc_0_add_arg_79639;
        }
        
        float x_79640 = a0_79290 * x_79635;
        float defunc_9_fit_fun_res_79641 = defunc_0_f_res_79637 * x_79640;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_79632 = local_acc_79664;
        }
        // Load next params
        {
            x_79633 = defunc_9_fit_fun_res_79641;
        }
        // Red body
        {
            float defunc_1_op_res_79634 = x_79632 + x_79633;
            
            local_acc_79664 = defunc_1_op_res_79634;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_79661.mem)[flat_tid_73248] =
        local_acc_79664;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81868_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81868_end -
                 futhark_mc_segred_stage_1_parloop_81868_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81868_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81868_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81868_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81865(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73248 = tid;
    int num_tasks_79660 = info.nsubtasks;
    struct futhark_mc_task_81864 *futhark_mc_task_81864 =
                                 (struct futhark_mc_task_81864 *) args;
    struct futhark_context *ctx = futhark_mc_task_81864->ctx;
    uint64_t futhark_mc_segred_task_81865_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81865_start = get_wall_time();
    
    int64_t last_res_73381 = futhark_mc_task_81864->free_last_res_73381;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_task_81864->free_mem_75704, .size =
                                 0, .references =NULL};
    int64_t max_res_79248 = futhark_mc_task_81864->free_max_res_79248;
    struct memblock mem_79268 = {.desc ="mem_79268", .mem =
                                 futhark_mc_task_81864->free_mem_79268, .size =
                                 0, .references =NULL};
    float a0_79290 = futhark_mc_task_81864->free_a0_79290;
    float defunc_2_reduce_res_79291 =
          *futhark_mc_task_81864->retval_defunc_2_reduce_res_79291;
    size_t reduce_stage_1_tid_res_arr_mem_79661_cached_sizze_81866 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79661 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_79661_cached_sizze_81866 <
        (size_t) ((int64_t) 4 * num_tasks_79660)) {
        reduce_stage_1_tid_res_arr_mem_79661 =
            realloc(reduce_stage_1_tid_res_arr_mem_79661, (int64_t) 4 *
                    num_tasks_79660);
        reduce_stage_1_tid_res_arr_mem_79661_cached_sizze_81866 = (int64_t) 4 *
            num_tasks_79660;
    }
    
    int64_t iter_79663;
    struct futhark_mc_segred_stage_1_parloop_struct_81867
    futhark_mc_segred_stage_1_parloop_struct_81867;
    
    futhark_mc_segred_stage_1_parloop_struct_81867.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_last_res_73381 =
        last_res_73381;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_mem_75704 =
        mem_75704.mem;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_max_res_79248 =
        max_res_79248;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_mem_79268 =
        mem_79268.mem;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_a0_79290 = a0_79290;
    futhark_mc_segred_stage_1_parloop_struct_81867.free_reduce_stage_1_tid_res_arr_mem_79661 =
        reduce_stage_1_tid_res_arr_mem_79661;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81868_task;
    
    futhark_mc_segred_stage_1_parloop_81868_task.name =
        "futhark_mc_segred_stage_1_parloop_81868";
    futhark_mc_segred_stage_1_parloop_81868_task.fn =
        futhark_mc_segred_stage_1_parloop_81868;
    futhark_mc_segred_stage_1_parloop_81868_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81867;
    futhark_mc_segred_stage_1_parloop_81868_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81868_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81868_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81868_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81868_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81868_task);
    
    if (futhark_mc_segred_stage_1_parloop_81868_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81868_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81868_total_end -
                 futhark_mc_segred_stage_1_parloop_81868_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81868_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81868_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81868_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_79291 = 0.0F;
    }
    
    float x_79665;
    float x_79666;
    
    for (int32_t i_79668 = 0; i_79668 < num_tasks_79660; i_79668++) {
        flat_tid_73248 = i_79668;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_79665 = defunc_2_reduce_res_79291;
            }
            // load next params
            {
                x_79666 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79661)[flat_tid_73248];
            }
            // red body
            {
                float defunc_1_op_res_79667 = x_79665 + x_79666;
                
                defunc_2_reduce_res_79291 = defunc_1_op_res_79667;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_79661);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81865_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81865_end -
                 futhark_mc_segred_task_81865_start;
        
        ctx->futhark_mc_segred_task_81865_runs[tid]++;
        ctx->futhark_mc_segred_task_81865_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81865_iter[tid] += iterations;
    }
    *futhark_mc_task_81864->retval_defunc_2_reduce_res_79291 =
        defunc_2_reduce_res_79291;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81857(void *args, int64_t start,
                                           int64_t end, int flat_tid_73244,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81856
    *futhark_mc_segmap_parloop_struct_81856 =
    (struct futhark_mc_segmap_parloop_struct_81856 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81856->ctx;
    uint64_t futhark_mc_segmap_parloop_81857_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81857_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81856->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81856->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81856->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81856->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81856->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81856->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81856->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81856->free_loop_cond_70258;
    int64_t last_res_73381 =
            futhark_mc_segmap_parloop_struct_81856->free_last_res_73381;
    int64_t min_arg_73396 =
            futhark_mc_segmap_parloop_struct_81856->free_min_arg_73396;
    int64_t min_arg_73397 =
            futhark_mc_segmap_parloop_struct_81856->free_min_arg_73397;
    int64_t min_res_73398 =
            futhark_mc_segmap_parloop_struct_81856->free_min_res_73398;
    float max_res_73402 =
          futhark_mc_segmap_parloop_struct_81856->free_max_res_73402;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_segmap_parloop_struct_81856->free_mem_75704,
                                 .size =0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_segmap_parloop_struct_81856->free_mem_75707,
                                 .size =0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_segmap_parloop_struct_81856->free_mem_75710,
                                 .size =0, .references =NULL};
    int64_t bytes_75712 =
            futhark_mc_segmap_parloop_struct_81856->free_bytes_75712;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_segmap_parloop_struct_81856->free_mem_75713,
                                 .size =0, .references =NULL};
    struct memblock mem_75734 = {.desc ="mem_75734", .mem =
                                 futhark_mc_segmap_parloop_struct_81856->free_mem_75734,
                                 .size =0, .references =NULL};
    size_t mem_79268_cached_sizze_81858 = 0;
    unsigned char *mem_79268 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79557 = start;
    
    if (mem_79268_cached_sizze_81858 < (size_t) bytes_75712) {
        mem_79268 = realloc(mem_79268, bytes_75712);
        mem_79268_cached_sizze_81858 = bytes_75712;
    }
    for (; iter_79557 < end; iter_79557++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79642 = n_m_70241;
        int64_t gtid_73245 = iter_79557;
        int64_t remnant_79643 = iter_79557 - gtid_73245;
        int64_t min_arg_79182 = mul64(jump_70237, gtid_73245);
        int64_t min_res_79183 = smin64(i_70247, min_arg_79182);
        int64_t defunc_0_g_res_79184 = add64((int64_t) 1, min_res_79183);
        bool init_idx_79185;
        int64_t init_idx_79186;
        int64_t init_idx_79187;
        bool loop_while_79558;
        int64_t low_79559;
        int64_t high_79560;
        
        loop_while_79558 = x_70248;
        low_79559 = (int64_t) 0;
        high_79560 = i_70247;
        while (loop_while_79558) {
            int64_t x_79561 = add64(low_79559, high_79560);
            int64_t mid_79562 = sdiv64(x_79561, (int64_t) 2);
            bool x_79563 = sle64((int64_t) 0, mid_79562);
            bool y_79564 = slt64(mid_79562, n_70233);
            bool bounds_check_79565 = x_79563 && y_79564;
            bool index_certs_79566;
            
            if (!bounds_check_79565) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_79562,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_79567 = ((int64_t *) mem_75710.mem)[mid_79562];
            bool cond_79568 = slt64(mid_id_79567, (int64_t) 0);
            int64_t mid_idx_79569;
            
            if (cond_79568) {
                mid_idx_79569 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_79569 = mid_id_79567;
            }
            
            bool cond_79570 = sle64(defunc_0_g_res_79184, mid_idx_79569);
            int64_t loopres_79571;
            int64_t loopres_79572;
            
            if (cond_79570) {
                int64_t loopres_t_res_79573 = sub64(mid_79562, (int64_t) 1);
                
                loopres_79571 = low_79559;
                loopres_79572 = loopres_t_res_79573;
            } else {
                int64_t loopres_f_res_79574 = add64((int64_t) 1, mid_79562);
                
                loopres_79571 = loopres_f_res_79574;
                loopres_79572 = high_79560;
            }
            
            bool loop_cond_79575 = sle64(loopres_79571, loopres_79572);
            bool loop_while_tmp_79644 = loop_cond_79575;
            int64_t low_tmp_79645 = loopres_79571;
            int64_t high_tmp_79646 = loopres_79572;
            
            loop_while_79558 = loop_while_tmp_79644;
            low_79559 = low_tmp_79645;
            high_79560 = high_tmp_79646;
        }
        init_idx_79185 = loop_while_79558;
        init_idx_79186 = low_79559;
        init_idx_79187 = high_79560;
        
        bool idx_79206;
        int64_t idx_79207;
        int64_t idx_79208;
        int64_t idx_79209;
        bool loop_while_79576;
        int64_t l_idx_79577;
        int64_t r_idx_79578;
        int64_t span_79579;
        
        loop_while_79576 = loop_cond_70258;
        l_idx_79577 = init_idx_79186;
        r_idx_79578 = init_idx_79186;
        span_79579 = (int64_t) 1;
        while (loop_while_79576) {
            int64_t max_arg_79580 = sub64(l_idx_79577, (int64_t) 1);
            int64_t max_res_79581 = smax64((int64_t) 0, max_arg_79580);
            int64_t min_arg_79582 = add64((int64_t) 1, r_idx_79578);
            int64_t min_res_79583 = smin64(min_arg_73396, min_arg_79582);
            bool x_79584 = sle64((int64_t) 0, max_res_79581);
            bool y_79585 = slt64(max_res_79581, n_70233);
            bool bounds_check_79586 = x_79584 && y_79585;
            bool index_certs_79587;
            
            if (!bounds_check_79586) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79581,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79588 = ((int64_t *) mem_75710.mem)[max_res_79581];
            int64_t abs_arg_79589 = sub64(x_79588, defunc_0_g_res_79184);
            int64_t abs_res_79590 = abs64(abs_arg_79589);
            bool x_79591 = sle64((int64_t) 0, min_res_79583);
            bool y_79592 = slt64(min_res_79583, n_70233);
            bool bounds_check_79593 = x_79591 && y_79592;
            bool index_certs_79594;
            
            if (!bounds_check_79593) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_79583,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79595 = ((int64_t *) mem_75710.mem)[min_res_79583];
            int64_t abs_arg_79596 = sub64(x_79595, defunc_0_g_res_79184);
            int64_t abs_res_79597 = abs64(abs_arg_79596);
            bool cond_79598 = max_res_79581 == l_idx_79577;
            int64_t loopres_79599;
            int64_t loopres_79600;
            int64_t loopres_79601;
            
            if (cond_79598) {
                loopres_79599 = l_idx_79577;
                loopres_79600 = r_idx_79578;
                loopres_79601 = min_res_70253;
            } else {
                bool cond_79602 = slt64(abs_res_79590, abs_res_79597);
                bool cond_f_res_79603 = min_res_79583 == r_idx_79578;
                bool x_79604 = !cond_79602;
                bool y_79605 = cond_f_res_79603 && x_79604;
                bool cond_79606 = cond_79602 || y_79605;
                int64_t loopres_f_res_79607;
                
                if (cond_79606) {
                    loopres_f_res_79607 = max_res_79581;
                } else {
                    loopres_f_res_79607 = l_idx_79577;
                }
                
                int64_t loopres_f_res_79608;
                
                if (cond_79606) {
                    loopres_f_res_79608 = r_idx_79578;
                } else {
                    loopres_f_res_79608 = min_res_79583;
                }
                
                int64_t loopres_f_res_79609;
                
                if (cond_79606) {
                    int64_t loopres_f_res_t_res_79610 = add64((int64_t) 1,
                                                              span_79579);
                    
                    loopres_f_res_79609 = loopres_f_res_t_res_79610;
                } else {
                    int64_t loopres_f_res_f_res_79611 = add64((int64_t) 1,
                                                              span_79579);
                    
                    loopres_f_res_79609 = loopres_f_res_f_res_79611;
                }
                loopres_79599 = loopres_f_res_79607;
                loopres_79600 = loopres_f_res_79608;
                loopres_79601 = loopres_f_res_79609;
            }
            
            bool loop_cond_79612 = slt64(loopres_79601, min_res_70253);
            bool loop_while_tmp_79647 = loop_cond_79612;
            int64_t l_idx_tmp_79648 = loopres_79599;
            int64_t r_idx_tmp_79649 = loopres_79600;
            int64_t span_tmp_79650 = loopres_79601;
            
            loop_while_79576 = loop_while_tmp_79647;
            l_idx_79577 = l_idx_tmp_79648;
            r_idx_79578 = r_idx_tmp_79649;
            span_79579 = span_tmp_79650;
        }
        idx_79206 = loop_while_79576;
        idx_79207 = l_idx_79577;
        idx_79208 = r_idx_79578;
        idx_79209 = span_79579;
        
        int64_t min_res_79247 = smin64(min_arg_73397, idx_79207);
        int64_t max_res_79248 = smax64((int64_t) 0, min_res_79247);
        int64_t x_79249 = add64(min_res_73398, max_res_79248);
        int64_t r_79250 = sub64(x_79249, (int64_t) 1);
        bool x_79251 = sle64((int64_t) 0, r_79250);
        bool y_79252 = slt64(r_79250, n_70233);
        bool bounds_check_79253 = x_79251 && y_79252;
        bool index_certs_79254;
        
        if (!bounds_check_79253) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_79250,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79255 = ((int64_t *) mem_75707.mem)[r_79250];
        int64_t abs_arg_79256 = sub64(x_79255, min_res_79183);
        int64_t abs_res_79257 = abs64(abs_arg_79256);
        bool x_79258 = sle64((int64_t) 0, max_res_79248);
        bool y_79259 = slt64(max_res_79248, n_70233);
        bool bounds_check_79260 = x_79258 && y_79259;
        bool index_certs_79261;
        
        if (!bounds_check_79260) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_79248,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79262 = ((int64_t *) mem_75707.mem)[max_res_79248];
        int64_t abs_arg_79263 = sub64(x_79262, min_res_79183);
        int64_t abs_res_79264 = abs64(abs_arg_79263);
        int64_t max_res_79265 = smax64(abs_res_79257, abs_res_79264);
        float defunc_0_f_res_79266 = sitofp_i64_f32(max_res_79265);
        float defunc_1_f_res_79267 = max_res_73402 + defunc_0_f_res_79266;
        float defunc_2_reduce_res_79269;
        int64_t flat_tid_73246 = (int64_t) 0;
        int32_t num_tasks_79651;
        struct futhark_mc_task_81859 futhark_mc_task_81859;
        
        futhark_mc_task_81859.ctx = ctx;
        futhark_mc_task_81859.free_last_res_73381 = last_res_73381;
        futhark_mc_task_81859.free_mem_75707 = mem_75707.mem;
        futhark_mc_task_81859.free_mem_75713 = mem_75713.mem;
        futhark_mc_task_81859.free_min_res_79183 = min_res_79183;
        futhark_mc_task_81859.free_max_res_79248 = max_res_79248;
        futhark_mc_task_81859.free_defunc_1_f_res_79267 = defunc_1_f_res_79267;
        futhark_mc_task_81859.retval_defunc_2_reduce_res_79269 =
            &defunc_2_reduce_res_79269;
        futhark_mc_task_81859.retval_mem_79268 = mem_79268;
        
        struct scheduler_segop futhark_mc_task_81859_task;
        
        futhark_mc_task_81859_task.args = &futhark_mc_task_81859;
        futhark_mc_task_81859_task.top_level_fn = futhark_mc_segred_task_81860;
        futhark_mc_task_81859_task.name = "futhark_mc_segred_task_81860";
        futhark_mc_task_81859_task.iterations = q_70235;
        futhark_mc_task_81859_task.task_time =
            &ctx->futhark_mc_segred_task_81860_total_time;
        futhark_mc_task_81859_task.task_iter =
            &ctx->futhark_mc_segred_task_81860_total_iter;
        futhark_mc_task_81859_task.sched = STATIC;
        futhark_mc_task_81859_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81860_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81859_task);
        
        if (futhark_mc_segred_task_81860_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_79290 = 1.0F / defunc_2_reduce_res_79269;
        float defunc_2_reduce_res_79291;
        int64_t flat_tid_73248 = (int64_t) 0;
        int32_t num_tasks_79660;
        struct futhark_mc_task_81864 futhark_mc_task_81864;
        
        futhark_mc_task_81864.ctx = ctx;
        futhark_mc_task_81864.free_last_res_73381 = last_res_73381;
        futhark_mc_task_81864.free_mem_75704 = mem_75704.mem;
        futhark_mc_task_81864.free_max_res_79248 = max_res_79248;
        futhark_mc_task_81864.free_mem_79268 = mem_79268;
        futhark_mc_task_81864.free_a0_79290 = a0_79290;
        futhark_mc_task_81864.retval_defunc_2_reduce_res_79291 =
            &defunc_2_reduce_res_79291;
        
        struct scheduler_segop futhark_mc_task_81864_task;
        
        futhark_mc_task_81864_task.args = &futhark_mc_task_81864;
        futhark_mc_task_81864_task.top_level_fn = futhark_mc_segred_task_81865;
        futhark_mc_task_81864_task.name = "futhark_mc_segred_task_81865";
        futhark_mc_task_81864_task.iterations = q_70235;
        futhark_mc_task_81864_task.task_time =
            &ctx->futhark_mc_segred_task_81865_total_time;
        futhark_mc_task_81864_task.task_iter =
            &ctx->futhark_mc_segred_task_81865_total_iter;
        futhark_mc_task_81864_task.sched = STATIC;
        futhark_mc_task_81864_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81865_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81864_task);
        
        if (futhark_mc_segred_task_81865_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75734.mem)[gtid_73245] = defunc_2_reduce_res_79291;
    }
    
  cleanup:
    { }
    free(mem_79268);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81857_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81857_end -
                 futhark_mc_segmap_parloop_81857_start;
        
        ctx->futhark_mc_segmap_parloop_81857_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81857_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81857_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81855(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73244 = tid;
    int num_tasks_79457 = info.nsubtasks;
    struct futhark_mc_task_81850 *futhark_mc_task_81850 =
                                 (struct futhark_mc_task_81850 *) args;
    struct futhark_context *ctx = futhark_mc_task_81850->ctx;
    uint64_t futhark_mc_segmap_nested_task_81855_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81855_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81850->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81850->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81850->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81850->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81850->free_i_70247;
    bool x_70248 = futhark_mc_task_81850->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81850->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81850->free_loop_cond_70258;
    int64_t last_res_73381 = futhark_mc_task_81850->free_last_res_73381;
    int64_t min_arg_73396 = futhark_mc_task_81850->free_min_arg_73396;
    int64_t min_arg_73397 = futhark_mc_task_81850->free_min_arg_73397;
    int64_t min_res_73398 = futhark_mc_task_81850->free_min_res_73398;
    float max_res_73402 = futhark_mc_task_81850->free_max_res_73402;
    struct memblock mem_75704 = {.desc ="mem_75704", .mem =
                                 futhark_mc_task_81850->free_mem_75704, .size =
                                 0, .references =NULL};
    struct memblock mem_75707 = {.desc ="mem_75707", .mem =
                                 futhark_mc_task_81850->free_mem_75707, .size =
                                 0, .references =NULL};
    struct memblock mem_75710 = {.desc ="mem_75710", .mem =
                                 futhark_mc_task_81850->free_mem_75710, .size =
                                 0, .references =NULL};
    int64_t bytes_75712 = futhark_mc_task_81850->free_bytes_75712;
    struct memblock mem_75713 = {.desc ="mem_75713", .mem =
                                 futhark_mc_task_81850->free_mem_75713, .size =
                                 0, .references =NULL};
    struct memblock mem_75734 = {.desc ="mem_75734", .mem =
                                 futhark_mc_task_81850->free_mem_75734, .size =
                                 0, .references =NULL};
    int64_t iter_79557;
    struct futhark_mc_segmap_parloop_struct_81856
    futhark_mc_segmap_parloop_struct_81856;
    
    futhark_mc_segmap_parloop_struct_81856.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81856.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81856.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81856.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81856.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81856.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81856.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81856.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81856.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81856.free_last_res_73381 = last_res_73381;
    futhark_mc_segmap_parloop_struct_81856.free_min_arg_73396 = min_arg_73396;
    futhark_mc_segmap_parloop_struct_81856.free_min_arg_73397 = min_arg_73397;
    futhark_mc_segmap_parloop_struct_81856.free_min_res_73398 = min_res_73398;
    futhark_mc_segmap_parloop_struct_81856.free_max_res_73402 = max_res_73402;
    futhark_mc_segmap_parloop_struct_81856.free_mem_75704 = mem_75704.mem;
    futhark_mc_segmap_parloop_struct_81856.free_mem_75707 = mem_75707.mem;
    futhark_mc_segmap_parloop_struct_81856.free_mem_75710 = mem_75710.mem;
    futhark_mc_segmap_parloop_struct_81856.free_bytes_75712 = bytes_75712;
    futhark_mc_segmap_parloop_struct_81856.free_mem_75713 = mem_75713.mem;
    futhark_mc_segmap_parloop_struct_81856.free_mem_75734 = mem_75734.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81857_task;
    
    futhark_mc_segmap_parloop_81857_task.name =
        "futhark_mc_segmap_parloop_81857";
    futhark_mc_segmap_parloop_81857_task.fn = futhark_mc_segmap_parloop_81857;
    futhark_mc_segmap_parloop_81857_task.args =
        &futhark_mc_segmap_parloop_struct_81856;
    futhark_mc_segmap_parloop_81857_task.iterations = iterations;
    futhark_mc_segmap_parloop_81857_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81857_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81857_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81857_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81857_task);
    
    if (futhark_mc_segmap_parloop_81857_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81857_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81857_total_end -
                 futhark_mc_segmap_parloop_81857_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81857_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81857_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81857_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81855_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81855_end -
                 futhark_mc_segmap_nested_task_81855_start;
        
        ctx->futhark_mc_segmap_nested_task_81855_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81855_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81855_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81824(void *args, int64_t start,
                                           int64_t end, int flat_tid_73232,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81823
    *futhark_mc_segmap_parloop_struct_81823 =
    (struct futhark_mc_segmap_parloop_struct_81823 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81823->ctx;
    uint64_t futhark_mc_segmap_parloop_81824_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81824_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81823->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81823->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81823->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81823->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81823->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81823->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81823->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81823->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81823->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81823->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81823->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75700 =
            futhark_mc_segmap_parloop_struct_81823->free_bytes_75700;
    int64_t bytes_75703 =
            futhark_mc_segmap_parloop_struct_81823->free_bytes_75703;
    int64_t bytes_75712 =
            futhark_mc_segmap_parloop_struct_81823->free_bytes_75712;
    int64_t bytes_75733 =
            futhark_mc_segmap_parloop_struct_81823->free_bytes_75733;
    struct memblock mem_75843 = {.desc ="mem_75843", .mem =
                                 futhark_mc_segmap_parloop_struct_81823->free_mem_75843,
                                 .size =0, .references =NULL};
    size_t mem_75701_cached_sizze_81825 = 0;
    unsigned char *mem_75701 = NULL;
    size_t mem_75704_cached_sizze_81826 = 0;
    unsigned char *mem_75704 = NULL;
    size_t mem_75707_cached_sizze_81827 = 0;
    unsigned char *mem_75707 = NULL;
    size_t mem_75710_cached_sizze_81828 = 0;
    unsigned char *mem_75710 = NULL;
    size_t mem_75713_cached_sizze_81829 = 0;
    unsigned char *mem_75713 = NULL;
    size_t mem_75734_cached_sizze_81830 = 0;
    unsigned char *mem_75734 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79164 = start;
    
    if (mem_75701_cached_sizze_81825 < (size_t) bytes_75700) {
        mem_75701 = realloc(mem_75701, bytes_75700);
        mem_75701_cached_sizze_81825 = bytes_75700;
    }
    if (mem_75704_cached_sizze_81826 < (size_t) bytes_75703) {
        mem_75704 = realloc(mem_75704, bytes_75703);
        mem_75704_cached_sizze_81826 = bytes_75703;
    }
    if (mem_75707_cached_sizze_81827 < (size_t) bytes_75700) {
        mem_75707 = realloc(mem_75707, bytes_75700);
        mem_75707_cached_sizze_81827 = bytes_75700;
    }
    if (mem_75710_cached_sizze_81828 < (size_t) bytes_75700) {
        mem_75710 = realloc(mem_75710, bytes_75700);
        mem_75710_cached_sizze_81828 = bytes_75700;
    }
    if (mem_75713_cached_sizze_81829 < (size_t) bytes_75712) {
        mem_75713 = realloc(mem_75713, bytes_75712);
        mem_75713_cached_sizze_81829 = bytes_75712;
    }
    if (mem_75734_cached_sizze_81830 < (size_t) bytes_75733) {
        mem_75734 = realloc(mem_75734, bytes_75733);
        mem_75734_cached_sizze_81830 = bytes_75733;
    }
    for (; iter_79164 < end; iter_79164++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79425 = m_70232;
        int64_t gtid_73233 = iter_79164;
        int64_t remnant_79426 = iter_79164 - gtid_73233;
        int64_t flat_tid_73234 = (int64_t) 0;
        int32_t num_tasks_79427;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81831 futhark_mc_task_81831;
        
        futhark_mc_task_81831.ctx = ctx;
        futhark_mc_task_81831.free_n_70233 = n_70233;
        futhark_mc_task_81831.free_gtid_73233 = gtid_73233;
        futhark_mc_task_81831.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81831.free_mem_75701 = mem_75701;
        
        struct scheduler_segop futhark_mc_task_81831_task;
        
        futhark_mc_task_81831_task.args = &futhark_mc_task_81831;
        futhark_mc_task_81831_task.top_level_fn = futhark_mc_segscan_task_81832;
        futhark_mc_task_81831_task.name = "futhark_mc_segscan_task_81832";
        futhark_mc_task_81831_task.iterations = n_70233;
        futhark_mc_task_81831_task.task_time =
            &ctx->futhark_mc_segscan_task_81832_total_time;
        futhark_mc_task_81831_task.task_iter =
            &ctx->futhark_mc_segscan_task_81832_total_iter;
        futhark_mc_task_81831_task.sched = STATIC;
        futhark_mc_task_81831_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81832_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81831_task);
        
        if (futhark_mc_segscan_task_81832_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_73381 = ((int64_t *) mem_75701)[i_70247];
        
        for (int64_t i_79441 = 0; i_79441 < n_70233; i_79441++) {
            ((float *) mem_75704)[i_79441] = 0.0F;
        }
        for (int64_t i_79442 = 0; i_79442 < n_70233; i_79442++) {
            ((int64_t *) mem_75707)[i_79442] = (int64_t) -1;
        }
        
        int64_t flat_tid_73236 = (int64_t) 0;
        int32_t num_tasks_79443;
        struct futhark_mc_task_81838 futhark_mc_task_81838;
        
        futhark_mc_task_81838.ctx = ctx;
        futhark_mc_task_81838.free_n_70233 = n_70233;
        futhark_mc_task_81838.free_gtid_73233 = gtid_73233;
        futhark_mc_task_81838.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81838.free_mem_75701 = mem_75701;
        futhark_mc_task_81838.free_mem_75704 = mem_75704;
        futhark_mc_task_81838.free_mem_75707 = mem_75707;
        
        struct scheduler_segop futhark_mc_task_81838_task;
        
        futhark_mc_task_81838_task.args = &futhark_mc_task_81838;
        futhark_mc_task_81838_task.top_level_fn = futhark_mc_segmap_task_81839;
        futhark_mc_task_81838_task.name = "futhark_mc_segmap_task_81839";
        futhark_mc_task_81838_task.iterations = n_70233;
        futhark_mc_task_81838_task.task_time =
            &ctx->futhark_mc_segmap_task_81839_total_time;
        futhark_mc_task_81838_task.task_iter =
            &ctx->futhark_mc_segmap_task_81839_total_iter;
        futhark_mc_task_81838_task.sched = STATIC;
        futhark_mc_task_81838_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81839_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81838_task);
        
        if (futhark_mc_segmap_task_81839_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73238 = (int64_t) 0;
        int32_t num_tasks_79449;
        struct futhark_mc_task_81842 futhark_mc_task_81842;
        
        futhark_mc_task_81842.ctx = ctx;
        futhark_mc_task_81842.free_n_70233 = n_70233;
        futhark_mc_task_81842.free_mem_75707 = mem_75707;
        futhark_mc_task_81842.free_mem_75710 = mem_75710;
        
        struct scheduler_segop futhark_mc_task_81842_task;
        
        futhark_mc_task_81842_task.args = &futhark_mc_task_81842;
        futhark_mc_task_81842_task.top_level_fn = futhark_mc_segmap_task_81843;
        futhark_mc_task_81842_task.name = "futhark_mc_segmap_task_81843";
        futhark_mc_task_81842_task.iterations = n_70233;
        futhark_mc_task_81842_task.task_time =
            &ctx->futhark_mc_segmap_task_81843_total_time;
        futhark_mc_task_81842_task.task_iter =
            &ctx->futhark_mc_segmap_task_81843_total_iter;
        futhark_mc_task_81842_task.sched = STATIC;
        futhark_mc_task_81842_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81843_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81842_task);
        
        if (futhark_mc_segmap_task_81843_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_73396 = sub64(last_res_73381, (int64_t) 1);
        int64_t min_arg_73397 = sub64(last_res_73381, min_res_70253);
        int64_t min_res_73398 = smin64(q_70235, last_res_73381);
        float i64_res_73399 = sitofp_i64_f32(last_res_73381);
        float x_73400 = i64_res_70259 - i64_res_73399;
        float max_arg_73401 = x_73400 / 2.0F;
        float max_res_73402 = fmax32(0.0F, max_arg_73401);
        int64_t flat_tid_73240 = (int64_t) 0;
        int32_t num_tasks_79453;
        struct futhark_mc_task_81846 futhark_mc_task_81846;
        
        futhark_mc_task_81846.ctx = ctx;
        futhark_mc_task_81846.free_q_70235 = q_70235;
        futhark_mc_task_81846.free_last_res_73381 = last_res_73381;
        futhark_mc_task_81846.free_mem_75713 = mem_75713;
        
        struct scheduler_segop futhark_mc_task_81846_task;
        
        futhark_mc_task_81846_task.args = &futhark_mc_task_81846;
        futhark_mc_task_81846_task.top_level_fn = futhark_mc_segmap_task_81847;
        futhark_mc_task_81846_task.name = "futhark_mc_segmap_task_81847";
        futhark_mc_task_81846_task.iterations = q_70235;
        futhark_mc_task_81846_task.task_time =
            &ctx->futhark_mc_segmap_task_81847_total_time;
        futhark_mc_task_81846_task.task_iter =
            &ctx->futhark_mc_segmap_task_81847_total_iter;
        futhark_mc_task_81846_task.sched = STATIC;
        futhark_mc_task_81846_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81847_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81846_task);
        
        if (futhark_mc_segmap_task_81847_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73242 = (int64_t) 0;
        int32_t num_tasks_79457;
        int64_t flat_tid_73244 = (int64_t) 0;
        struct futhark_mc_task_81850 futhark_mc_task_81850;
        
        futhark_mc_task_81850.ctx = ctx;
        futhark_mc_task_81850.free_n_70233 = n_70233;
        futhark_mc_task_81850.free_q_70235 = q_70235;
        futhark_mc_task_81850.free_jump_70237 = jump_70237;
        futhark_mc_task_81850.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81850.free_i_70247 = i_70247;
        futhark_mc_task_81850.free_x_70248 = x_70248;
        futhark_mc_task_81850.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81850.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81850.free_last_res_73381 = last_res_73381;
        futhark_mc_task_81850.free_min_arg_73396 = min_arg_73396;
        futhark_mc_task_81850.free_min_arg_73397 = min_arg_73397;
        futhark_mc_task_81850.free_min_res_73398 = min_res_73398;
        futhark_mc_task_81850.free_max_res_73402 = max_res_73402;
        futhark_mc_task_81850.free_mem_75704 = mem_75704;
        futhark_mc_task_81850.free_mem_75707 = mem_75707;
        futhark_mc_task_81850.free_mem_75710 = mem_75710;
        futhark_mc_task_81850.free_bytes_75712 = bytes_75712;
        futhark_mc_task_81850.free_mem_75713 = mem_75713;
        futhark_mc_task_81850.free_mem_75734 = mem_75734;
        
        struct scheduler_segop futhark_mc_task_81850_task;
        
        futhark_mc_task_81850_task.args = &futhark_mc_task_81850;
        futhark_mc_task_81850_task.top_level_fn = futhark_mc_segmap_task_81851;
        futhark_mc_task_81850_task.name = "futhark_mc_segmap_task_81851";
        futhark_mc_task_81850_task.iterations = n_m_70241;
        futhark_mc_task_81850_task.task_time =
            &ctx->futhark_mc_segmap_task_81851_total_time;
        futhark_mc_task_81850_task.task_iter =
            &ctx->futhark_mc_segmap_task_81851_total_iter;
        futhark_mc_task_81850_task.sched = DYNAMIC;
        futhark_mc_task_81850_task.nested_fn =
            futhark_mc_segmap_nested_task_81855;
        
        int futhark_mc_segmap_task_81851_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81850_task);
        
        if (futhark_mc_segmap_task_81851_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_75843.mem + gtid_73233 * n_m_70241 * (int64_t) 4,
                    mem_75734 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75701);
    free(mem_75704);
    free(mem_75707);
    free(mem_75710);
    free(mem_75713);
    free(mem_75734);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81824_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81824_end -
                 futhark_mc_segmap_parloop_81824_start;
        
        ctx->futhark_mc_segmap_parloop_81824_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81824_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81824_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81822(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73232 = tid;
    int num_tasks_78985 = info.nsubtasks;
    struct futhark_mc_task_81811 *futhark_mc_task_81811 =
                                 (struct futhark_mc_task_81811 *) args;
    struct futhark_context *ctx = futhark_mc_task_81811->ctx;
    uint64_t futhark_mc_segmap_nested_task_81822_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81822_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81811->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81811->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81811->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81811->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81811->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81811->free_i_70247;
    bool x_70248 = futhark_mc_task_81811->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81811->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81811->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81811->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81811->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75700 = futhark_mc_task_81811->free_bytes_75700;
    int64_t bytes_75703 = futhark_mc_task_81811->free_bytes_75703;
    int64_t bytes_75712 = futhark_mc_task_81811->free_bytes_75712;
    int64_t bytes_75733 = futhark_mc_task_81811->free_bytes_75733;
    struct memblock mem_75843 = {.desc ="mem_75843", .mem =
                                 futhark_mc_task_81811->free_mem_75843, .size =
                                 0, .references =NULL};
    int64_t iter_79164;
    struct futhark_mc_segmap_parloop_struct_81823
    futhark_mc_segmap_parloop_struct_81823;
    
    futhark_mc_segmap_parloop_struct_81823.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81823.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81823.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81823.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81823.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81823.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81823.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81823.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81823.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81823.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81823.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81823.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81823.free_bytes_75700 = bytes_75700;
    futhark_mc_segmap_parloop_struct_81823.free_bytes_75703 = bytes_75703;
    futhark_mc_segmap_parloop_struct_81823.free_bytes_75712 = bytes_75712;
    futhark_mc_segmap_parloop_struct_81823.free_bytes_75733 = bytes_75733;
    futhark_mc_segmap_parloop_struct_81823.free_mem_75843 = mem_75843.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81824_task;
    
    futhark_mc_segmap_parloop_81824_task.name =
        "futhark_mc_segmap_parloop_81824";
    futhark_mc_segmap_parloop_81824_task.fn = futhark_mc_segmap_parloop_81824;
    futhark_mc_segmap_parloop_81824_task.args =
        &futhark_mc_segmap_parloop_struct_81823;
    futhark_mc_segmap_parloop_81824_task.iterations = iterations;
    futhark_mc_segmap_parloop_81824_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81824_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81824_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81824_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81824_task);
    
    if (futhark_mc_segmap_parloop_81824_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81824_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81824_total_end -
                 futhark_mc_segmap_parloop_81824_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81824_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81824_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81824_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81822_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81822_end -
                 futhark_mc_segmap_nested_task_81822_start;
        
        ctx->futhark_mc_segmap_nested_task_81822_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81822_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81822_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81869 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75845;
    int64_t free_bytes_75848;
    int64_t free_bytes_75857;
    int64_t free_bytes_75896;
    unsigned char *free_mem_76039;
    unsigned char *free_mem_76043;
};
struct futhark_mc_segmap_parloop_struct_81871 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75845;
    int64_t free_bytes_75848;
    int64_t free_bytes_75857;
    int64_t free_bytes_75896;
    unsigned char *free_mem_76039;
    unsigned char *free_mem_76043;
};
static int futhark_mc_segmap_parloop_81872(void *args, int64_t start,
                                           int64_t end, int flat_tid_73652,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81871
    *futhark_mc_segmap_parloop_struct_81871 =
    (struct futhark_mc_segmap_parloop_struct_81871 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81871->ctx;
    uint64_t futhark_mc_segmap_parloop_81872_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81872_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81871->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81871->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81871->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81871->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81871->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81871->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81871->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81871->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81871->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81871->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81871->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75845 =
            futhark_mc_segmap_parloop_struct_81871->free_bytes_75845;
    int64_t bytes_75848 =
            futhark_mc_segmap_parloop_struct_81871->free_bytes_75848;
    int64_t bytes_75857 =
            futhark_mc_segmap_parloop_struct_81871->free_bytes_75857;
    int64_t bytes_75896 =
            futhark_mc_segmap_parloop_struct_81871->free_bytes_75896;
    struct memblock mem_76039 = {.desc ="mem_76039", .mem =
                                 futhark_mc_segmap_parloop_struct_81871->free_mem_76039,
                                 .size =0, .references =NULL};
    struct memblock mem_76043 = {.desc ="mem_76043", .mem =
                                 futhark_mc_segmap_parloop_struct_81871->free_mem_76043,
                                 .size =0, .references =NULL};
    size_t mem_75903_cached_sizze_81873 = 0;
    unsigned char *mem_75903 = NULL;
    size_t mem_75918_cached_sizze_81874 = 0;
    unsigned char *mem_75918 = NULL;
    size_t mem_75921_cached_sizze_81875 = 0;
    unsigned char *mem_75921 = NULL;
    size_t mem_75948_cached_sizze_81876 = 0;
    unsigned char *mem_75948 = NULL;
    size_t mem_75963_cached_sizze_81877 = 0;
    unsigned char *mem_75963 = NULL;
    size_t mem_75978_cached_sizze_81878 = 0;
    unsigned char *mem_75978 = NULL;
    size_t mem_75981_cached_sizze_81879 = 0;
    unsigned char *mem_75981 = NULL;
    size_t mem_75998_cached_sizze_81880 = 0;
    unsigned char *mem_75998 = NULL;
    size_t mem_76001_cached_sizze_81881 = 0;
    unsigned char *mem_76001 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79670 = start;
    
    if (mem_75903_cached_sizze_81873 < (size_t) bytes_75845) {
        mem_75903 = realloc(mem_75903, bytes_75845);
        mem_75903_cached_sizze_81873 = bytes_75845;
    }
    if (mem_75918_cached_sizze_81874 < (size_t) bytes_75848) {
        mem_75918 = realloc(mem_75918, bytes_75848);
        mem_75918_cached_sizze_81874 = bytes_75848;
    }
    if (mem_75921_cached_sizze_81875 < (size_t) bytes_75845) {
        mem_75921 = realloc(mem_75921, bytes_75845);
        mem_75921_cached_sizze_81875 = bytes_75845;
    }
    if (mem_75948_cached_sizze_81876 < (size_t) bytes_75845) {
        mem_75948 = realloc(mem_75948, bytes_75845);
        mem_75948_cached_sizze_81876 = bytes_75845;
    }
    if (mem_75963_cached_sizze_81877 < (size_t) bytes_75857) {
        mem_75963 = realloc(mem_75963, bytes_75857);
        mem_75963_cached_sizze_81877 = bytes_75857;
    }
    if (mem_75978_cached_sizze_81878 < (size_t) bytes_75896) {
        mem_75978 = realloc(mem_75978, bytes_75896);
        mem_75978_cached_sizze_81878 = bytes_75896;
    }
    if (mem_75981_cached_sizze_81879 < (size_t) bytes_75896) {
        mem_75981 = realloc(mem_75981, bytes_75896);
        mem_75981_cached_sizze_81879 = bytes_75896;
    }
    if (mem_75998_cached_sizze_81880 < (size_t) bytes_75857) {
        mem_75998 = realloc(mem_75998, bytes_75857);
        mem_75998_cached_sizze_81880 = bytes_75857;
    }
    if (mem_76001_cached_sizze_81881 < (size_t) bytes_75857) {
        mem_76001 = realloc(mem_76001, bytes_75857);
        mem_76001_cached_sizze_81881 = bytes_75857;
    }
    for (; iter_79670 < end; iter_79670++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79858 = m_70232;
        int64_t gtid_73653 = iter_79670;
        int64_t remnant_79859 = iter_79670 - gtid_73653;
        int64_t discard_75094;
        int64_t scanacc_79672 = (int64_t) 0;
        
        for (int64_t i_79671 = 0; i_79671 < n_70233; i_79671++) {
            float x_79674 = ((float *) Y_mem_75306.mem)[gtid_73653 * n_70233 +
                                                        i_79671];
            bool isnan_res_79675;
            
            isnan_res_79675 = futrts_isnan32(x_79674);
            
            bool defunc_0_p_res_79676 = !isnan_res_79675;
            int64_t defunc_0_f_res_79677 = btoi_bool_i64(defunc_0_p_res_79676);
            int64_t defunc_1_op_res_79678 = add64(defunc_0_f_res_79677,
                                                  scanacc_79672);
            
            ((int64_t *) mem_75903)[i_79671] = defunc_1_op_res_79678;
            
            int64_t scanacc_tmp_79860 = defunc_1_op_res_79678;
            
            scanacc_79672 = scanacc_tmp_79860;
        }
        discard_75094 = scanacc_79672;
        
        int64_t last_res_71072 = ((int64_t *) mem_75903)[i_70247];
        
        for (int64_t i_79862 = 0; i_79862 < n_70233; i_79862++) {
            ((float *) mem_75918)[i_79862] = 0.0F;
        }
        for (int64_t i_79863 = 0; i_79863 < n_70233; i_79863++) {
            ((int64_t *) mem_75921)[i_79863] = (int64_t) -1;
        }
        for (int64_t write_iter_79680 = 0; write_iter_79680 < n_70233;
             write_iter_79680++) {
            float write_iv_79683 = ((float *) Y_mem_75306.mem)[gtid_73653 *
                                                               n_70233 +
                                                               write_iter_79680];
            bool isnan_res_79684;
            
            isnan_res_79684 = futrts_isnan32(write_iv_79683);
            
            bool defunc_0_p_res_79685 = !isnan_res_79684;
            int64_t defunc_1_f_res_79686;
            
            if (defunc_0_p_res_79685) {
                int64_t write_iv_79687 =
                        ((int64_t *) mem_75903)[write_iter_79680];
                int64_t defunc_1_f_res_t_res_79688 = sub64(write_iv_79687,
                                                           (int64_t) 1);
                
                defunc_1_f_res_79686 = defunc_1_f_res_t_res_79688;
            } else {
                defunc_1_f_res_79686 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79686) &&
                slt64(defunc_1_f_res_79686, n_70233)) {
                ((int64_t *) mem_75921)[defunc_1_f_res_79686] =
                    write_iter_79680;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79686) &&
                slt64(defunc_1_f_res_79686, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75918 + defunc_1_f_res_79686 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_73653 * n_70233 +
                                               write_iter_79680) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_79692 = 0; i_79692 < n_70233; i_79692++) {
            int64_t x_79694 = ((int64_t *) mem_75921)[i_79692];
            int64_t defunc_0_f_res_79695 = add64((int64_t) 1, x_79694);
            
            ((int64_t *) mem_75948)[i_79692] = defunc_0_f_res_79695;
        }
        
        int64_t min_arg_71087 = sub64(last_res_71072, (int64_t) 1);
        int64_t min_arg_71088 = sub64(last_res_71072, min_res_70253);
        int64_t min_res_71089 = smin64(q_70235, last_res_71072);
        float i64_res_71090 = sitofp_i64_f32(last_res_71072);
        float x_71091 = i64_res_70259 - i64_res_71090;
        float max_arg_71092 = x_71091 / 2.0F;
        float max_res_71093 = fmax32(0.0F, max_arg_71092);
        
        for (int64_t i_79697 = 0; i_79697 < q_70235; i_79697++) {
            bool cond_79699 = sle64(last_res_71072, i_79697);
            float defunc_0_f_res_79700;
            
            if (cond_79699) {
                defunc_0_f_res_79700 = 0.0F;
            } else {
                defunc_0_f_res_79700 = 1.0F;
            }
            ((float *) mem_75963)[i_79697] = defunc_0_f_res_79700;
        }
        for (int64_t i_79702 = 0; i_79702 < n_m_70241; i_79702++) {
            int64_t min_arg_79705 = mul64(jump_70237, i_79702);
            int64_t min_res_79706 = smin64(i_70247, min_arg_79705);
            int64_t defunc_0_g_res_79707 = add64((int64_t) 1, min_res_79706);
            bool init_idx_79708;
            int64_t init_idx_79709;
            int64_t init_idx_79710;
            bool loop_while_79711;
            int64_t low_79712;
            int64_t high_79713;
            
            loop_while_79711 = x_70248;
            low_79712 = (int64_t) 0;
            high_79713 = i_70247;
            while (loop_while_79711) {
                int64_t x_79714 = add64(low_79712, high_79713);
                int64_t mid_79715 = sdiv64(x_79714, (int64_t) 2);
                bool x_79716 = sle64((int64_t) 0, mid_79715);
                bool y_79717 = slt64(mid_79715, n_70233);
                bool bounds_check_79718 = x_79716 && y_79717;
                bool index_certs_79719;
                
                if (!bounds_check_79718) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_79715,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_79720 = ((int64_t *) mem_75948)[mid_79715];
                bool cond_79721 = slt64(mid_id_79720, (int64_t) 0);
                int64_t mid_idx_79722;
                
                if (cond_79721) {
                    mid_idx_79722 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_79722 = mid_id_79720;
                }
                
                bool cond_79723 = sle64(defunc_0_g_res_79707, mid_idx_79722);
                int64_t loopres_79724;
                int64_t loopres_79725;
                
                if (cond_79723) {
                    int64_t loopres_t_res_79726 = sub64(mid_79715, (int64_t) 1);
                    
                    loopres_79724 = low_79712;
                    loopres_79725 = loopres_t_res_79726;
                } else {
                    int64_t loopres_f_res_79727 = add64((int64_t) 1, mid_79715);
                    
                    loopres_79724 = loopres_f_res_79727;
                    loopres_79725 = high_79713;
                }
                
                bool loop_cond_79728 = sle64(loopres_79724, loopres_79725);
                bool loop_while_tmp_79870 = loop_cond_79728;
                int64_t low_tmp_79871 = loopres_79724;
                int64_t high_tmp_79872 = loopres_79725;
                
                loop_while_79711 = loop_while_tmp_79870;
                low_79712 = low_tmp_79871;
                high_79713 = high_tmp_79872;
            }
            init_idx_79708 = loop_while_79711;
            init_idx_79709 = low_79712;
            init_idx_79710 = high_79713;
            
            bool idx_79729;
            int64_t idx_79730;
            int64_t idx_79731;
            int64_t idx_79732;
            bool loop_while_79733;
            int64_t l_idx_79734;
            int64_t r_idx_79735;
            int64_t span_79736;
            
            loop_while_79733 = loop_cond_70258;
            l_idx_79734 = init_idx_79709;
            r_idx_79735 = init_idx_79709;
            span_79736 = (int64_t) 1;
            while (loop_while_79733) {
                int64_t max_arg_79737 = sub64(l_idx_79734, (int64_t) 1);
                int64_t max_res_79738 = smax64((int64_t) 0, max_arg_79737);
                int64_t min_arg_79739 = add64((int64_t) 1, r_idx_79735);
                int64_t min_res_79740 = smin64(min_arg_71087, min_arg_79739);
                bool x_79741 = sle64((int64_t) 0, max_res_79738);
                bool y_79742 = slt64(max_res_79738, n_70233);
                bool bounds_check_79743 = x_79741 && y_79742;
                bool index_certs_79744;
                
                if (!bounds_check_79743) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_79738,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_79745 = ((int64_t *) mem_75948)[max_res_79738];
                int64_t abs_arg_79746 = sub64(x_79745, defunc_0_g_res_79707);
                int64_t abs_res_79747 = abs64(abs_arg_79746);
                bool x_79748 = sle64((int64_t) 0, min_res_79740);
                bool y_79749 = slt64(min_res_79740, n_70233);
                bool bounds_check_79750 = x_79748 && y_79749;
                bool index_certs_79751;
                
                if (!bounds_check_79750) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_79740,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_79752 = ((int64_t *) mem_75948)[min_res_79740];
                int64_t abs_arg_79753 = sub64(x_79752, defunc_0_g_res_79707);
                int64_t abs_res_79754 = abs64(abs_arg_79753);
                bool cond_79755 = max_res_79738 == l_idx_79734;
                int64_t loopres_79756;
                int64_t loopres_79757;
                int64_t loopres_79758;
                
                if (cond_79755) {
                    loopres_79756 = l_idx_79734;
                    loopres_79757 = r_idx_79735;
                    loopres_79758 = min_res_70253;
                } else {
                    bool cond_79759 = slt64(abs_res_79747, abs_res_79754);
                    bool cond_f_res_79760 = min_res_79740 == r_idx_79735;
                    bool x_79761 = !cond_79759;
                    bool y_79762 = cond_f_res_79760 && x_79761;
                    bool cond_79763 = cond_79759 || y_79762;
                    int64_t loopres_f_res_79764;
                    
                    if (cond_79763) {
                        loopres_f_res_79764 = max_res_79738;
                    } else {
                        loopres_f_res_79764 = l_idx_79734;
                    }
                    
                    int64_t loopres_f_res_79765;
                    
                    if (cond_79763) {
                        loopres_f_res_79765 = r_idx_79735;
                    } else {
                        loopres_f_res_79765 = min_res_79740;
                    }
                    
                    int64_t loopres_f_res_79766;
                    
                    if (cond_79763) {
                        int64_t loopres_f_res_t_res_79767 = add64((int64_t) 1,
                                                                  span_79736);
                        
                        loopres_f_res_79766 = loopres_f_res_t_res_79767;
                    } else {
                        int64_t loopres_f_res_f_res_79768 = add64((int64_t) 1,
                                                                  span_79736);
                        
                        loopres_f_res_79766 = loopres_f_res_f_res_79768;
                    }
                    loopres_79756 = loopres_f_res_79764;
                    loopres_79757 = loopres_f_res_79765;
                    loopres_79758 = loopres_f_res_79766;
                }
                
                bool loop_cond_79769 = slt64(loopres_79758, min_res_70253);
                bool loop_while_tmp_79873 = loop_cond_79769;
                int64_t l_idx_tmp_79874 = loopres_79756;
                int64_t r_idx_tmp_79875 = loopres_79757;
                int64_t span_tmp_79876 = loopres_79758;
                
                loop_while_79733 = loop_while_tmp_79873;
                l_idx_79734 = l_idx_tmp_79874;
                r_idx_79735 = r_idx_tmp_79875;
                span_79736 = span_tmp_79876;
            }
            idx_79729 = loop_while_79733;
            idx_79730 = l_idx_79734;
            idx_79731 = r_idx_79735;
            idx_79732 = span_79736;
            
            int64_t min_res_79770 = smin64(min_arg_71088, idx_79730);
            int64_t max_res_79771 = smax64((int64_t) 0, min_res_79770);
            int64_t x_79772 = add64(min_res_71089, max_res_79771);
            int64_t r_79773 = sub64(x_79772, (int64_t) 1);
            bool x_79774 = sle64((int64_t) 0, r_79773);
            bool y_79775 = slt64(r_79773, n_70233);
            bool bounds_check_79776 = x_79774 && y_79775;
            bool index_certs_79777;
            
            if (!bounds_check_79776) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_79773,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79778 = ((int64_t *) mem_75921)[r_79773];
            int64_t abs_arg_79779 = sub64(x_79778, min_res_79706);
            int64_t abs_res_79780 = abs64(abs_arg_79779);
            bool x_79781 = sle64((int64_t) 0, max_res_79771);
            bool y_79782 = slt64(max_res_79771, n_70233);
            bool bounds_check_79783 = x_79781 && y_79782;
            bool index_certs_79784;
            
            if (!bounds_check_79783) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79771,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_79785 = ((int64_t *) mem_75921)[max_res_79771];
            int64_t abs_arg_79786 = sub64(x_79785, min_res_79706);
            int64_t abs_res_79787 = abs64(abs_arg_79786);
            int64_t max_res_79788 = smax64(abs_res_79780, abs_res_79787);
            float defunc_0_f_res_79789 = sitofp_i64_f32(max_res_79788);
            float defunc_1_f_res_79790 = max_res_71093 + defunc_0_f_res_79789;
            float defunc_2_reduce_res_79793;
            float defunc_2_reduce_res_79794;
            float defunc_2_reduce_res_79795;
            float redout_79799;
            float redout_79800;
            float redout_79801;
            
            redout_79799 = 0.0F;
            redout_79800 = 0.0F;
            redout_79801 = 0.0F;
            for (int64_t i_79798 = 0; i_79798 < q_70235; i_79798++) {
                float x_79804 = ((float *) mem_75963)[i_79798];
                bool cond_79805 = sle64(last_res_71072, i_79798);
                int64_t defunc_0_f_res_79806;
                
                if (cond_79805) {
                    defunc_0_f_res_79806 = (int64_t) 0;
                } else {
                    int64_t i_79807 = add64(max_res_79771, i_79798);
                    int64_t defunc_0_add_arg_79808 =
                            ((int64_t *) mem_75921)[i_79807];
                    int64_t defunc_1_add_res_79809 = add64((int64_t) 1,
                                                           defunc_0_add_arg_79808);
                    
                    defunc_0_f_res_79806 = defunc_1_add_res_79809;
                }
                
                int64_t binop_p_79810 = sub64(defunc_0_f_res_79806,
                                              min_res_79706);
                float defunc_0_f_res_79811 = sitofp_i64_f32(binop_p_79810);
                float abs_res_79812 = (float) fabs(defunc_0_f_res_79811);
                float tmp1_79813 = abs_res_79812 / defunc_1_f_res_79790;
                float x_79814 = tmp1_79813 * tmp1_79813;
                float y_79815 = tmp1_79813 * x_79814;
                float tmp2_79816 = 1.0F - y_79815;
                float x_79817 = tmp2_79816 * tmp2_79816;
                float tmp3_79818 = tmp2_79816 * x_79817;
                float tmp4_79819 = x_79804 * tmp3_79818;
                float defunc_1_f_res_79820 = defunc_0_f_res_79811 * tmp4_79819;
                float defunc_1_f_res_79821 = defunc_0_f_res_79811 *
                      defunc_1_f_res_79820;
                float defunc_1_op_res_79822 = tmp4_79819 + redout_79799;
                float defunc_1_op_res_79823 = defunc_1_f_res_79820 +
                      redout_79800;
                float defunc_1_op_res_79824 = defunc_1_f_res_79821 +
                      redout_79801;
                
                ((float *) mem_75998)[i_79798] = defunc_1_f_res_79820;
                ((float *) mem_76001)[i_79798] = tmp4_79819;
                
                float redout_tmp_79877 = defunc_1_op_res_79822;
                float redout_tmp_79878 = defunc_1_op_res_79823;
                float redout_tmp_79879 = defunc_1_op_res_79824;
                
                redout_79799 = redout_tmp_79877;
                redout_79800 = redout_tmp_79878;
                redout_79801 = redout_tmp_79879;
            }
            defunc_2_reduce_res_79793 = redout_79799;
            defunc_2_reduce_res_79794 = redout_79800;
            defunc_2_reduce_res_79795 = redout_79801;
            
            float x_79827 = defunc_2_reduce_res_79793 *
                  defunc_2_reduce_res_79795;
            float y_79828 = defunc_2_reduce_res_79794 *
                  defunc_2_reduce_res_79794;
            float y_79829 = x_79827 - y_79828;
            float det1_79830 = 1.0F / y_79829;
            float a11_79831 = defunc_2_reduce_res_79795 * det1_79830;
            float x_79832 = 0.0F - defunc_2_reduce_res_79794;
            float b11_79833 = det1_79830 * x_79832;
            float c11_79834 = defunc_2_reduce_res_79793 * det1_79830;
            float defunc_2_reduce_res_79835;
            float defunc_2_reduce_res_79836;
            float redout_79838;
            float redout_79839;
            
            redout_79838 = 0.0F;
            redout_79839 = 0.0F;
            for (int64_t i_79837 = 0; i_79837 < q_70235; i_79837++) {
                float x_79840 = ((float *) mem_76001)[i_79837];
                float x_79841 = ((float *) mem_75998)[i_79837];
                bool cond_79842 = sle64(last_res_71072, i_79837);
                float defunc_0_f_res_79843;
                
                if (cond_79842) {
                    defunc_0_f_res_79843 = 0.0F;
                } else {
                    int64_t i_79844 = add64(max_res_79771, i_79837);
                    float defunc_0_add_arg_79845 =
                          ((float *) mem_75918)[i_79844];
                    
                    defunc_0_f_res_79843 = defunc_0_add_arg_79845;
                }
                
                float x_79846 = a11_79831 * x_79840;
                float y_79847 = b11_79833 * x_79841;
                float x_79848 = x_79846 + y_79847;
                float defunc_9_fit_fun_res_79849 = defunc_0_f_res_79843 *
                      x_79848;
                float x_79850 = b11_79833 * x_79840;
                float y_79851 = c11_79834 * x_79841;
                float x_79852 = x_79850 + y_79851;
                float defunc_9_slope_fun_res_79853 = defunc_0_f_res_79843 *
                      x_79852;
                float defunc_1_op_res_79854 = defunc_9_fit_fun_res_79849 +
                      redout_79838;
                float defunc_1_op_res_79855 = defunc_9_slope_fun_res_79853 +
                      redout_79839;
                float redout_tmp_79882 = defunc_1_op_res_79854;
                float redout_tmp_79883 = defunc_1_op_res_79855;
                
                redout_79838 = redout_tmp_79882;
                redout_79839 = redout_tmp_79883;
            }
            defunc_2_reduce_res_79835 = redout_79838;
            defunc_2_reduce_res_79836 = redout_79839;
            ((float *) mem_75978)[i_79702] = defunc_2_reduce_res_79835;
            ((float *) mem_75981)[i_79702] = defunc_2_reduce_res_79836;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76039.mem + gtid_73653 * n_m_70241 * (int64_t) 4,
                    mem_75978 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76043.mem + gtid_73653 * n_m_70241 * (int64_t) 4,
                    mem_75981 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75903);
    free(mem_75918);
    free(mem_75921);
    free(mem_75948);
    free(mem_75963);
    free(mem_75978);
    free(mem_75981);
    free(mem_75998);
    free(mem_76001);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81872_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81872_end -
                 futhark_mc_segmap_parloop_81872_start;
        
        ctx->futhark_mc_segmap_parloop_81872_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81872_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81872_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81870(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73652 = tid;
    int num_tasks_79669 = info.nsubtasks;
    struct futhark_mc_task_81869 *futhark_mc_task_81869 =
                                 (struct futhark_mc_task_81869 *) args;
    struct futhark_context *ctx = futhark_mc_task_81869->ctx;
    uint64_t futhark_mc_segmap_task_81870_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81870_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81869->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81869->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81869->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81869->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81869->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81869->free_i_70247;
    bool x_70248 = futhark_mc_task_81869->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81869->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81869->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81869->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81869->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75845 = futhark_mc_task_81869->free_bytes_75845;
    int64_t bytes_75848 = futhark_mc_task_81869->free_bytes_75848;
    int64_t bytes_75857 = futhark_mc_task_81869->free_bytes_75857;
    int64_t bytes_75896 = futhark_mc_task_81869->free_bytes_75896;
    struct memblock mem_76039 = {.desc ="mem_76039", .mem =
                                 futhark_mc_task_81869->free_mem_76039, .size =
                                 0, .references =NULL};
    struct memblock mem_76043 = {.desc ="mem_76043", .mem =
                                 futhark_mc_task_81869->free_mem_76043, .size =
                                 0, .references =NULL};
    int64_t iter_79670;
    struct futhark_mc_segmap_parloop_struct_81871
    futhark_mc_segmap_parloop_struct_81871;
    
    futhark_mc_segmap_parloop_struct_81871.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81871.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81871.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81871.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81871.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81871.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81871.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81871.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81871.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81871.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81871.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81871.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81871.free_bytes_75845 = bytes_75845;
    futhark_mc_segmap_parloop_struct_81871.free_bytes_75848 = bytes_75848;
    futhark_mc_segmap_parloop_struct_81871.free_bytes_75857 = bytes_75857;
    futhark_mc_segmap_parloop_struct_81871.free_bytes_75896 = bytes_75896;
    futhark_mc_segmap_parloop_struct_81871.free_mem_76039 = mem_76039.mem;
    futhark_mc_segmap_parloop_struct_81871.free_mem_76043 = mem_76043.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81872_task;
    
    futhark_mc_segmap_parloop_81872_task.name =
        "futhark_mc_segmap_parloop_81872";
    futhark_mc_segmap_parloop_81872_task.fn = futhark_mc_segmap_parloop_81872;
    futhark_mc_segmap_parloop_81872_task.args =
        &futhark_mc_segmap_parloop_struct_81871;
    futhark_mc_segmap_parloop_81872_task.iterations = iterations;
    futhark_mc_segmap_parloop_81872_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81872_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81872_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81872_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81872_task);
    
    if (futhark_mc_segmap_parloop_81872_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81872_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81872_total_end -
                 futhark_mc_segmap_parloop_81872_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81872_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81872_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81872_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81870_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81870_end -
                 futhark_mc_segmap_task_81870_start;
        
        ctx->futhark_mc_segmap_task_81870_runs[tid]++;
        ctx->futhark_mc_segmap_task_81870_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81870_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81883 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_75845;
    int64_t free_bytes_75848;
    int64_t free_bytes_75857;
    int64_t free_bytes_75896;
    unsigned char *free_mem_76039;
    unsigned char *free_mem_76043;
};
struct futhark_mc_task_81892 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73655;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75846;
};
struct futhark_mc_scan_stage_1_parloop_struct_81895 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73655;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75846;
};
static int futhark_mc_scan_stage_1_parloop_81896(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73656, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81895
    *futhark_mc_scan_stage_1_parloop_struct_81895 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81895 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81895->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81896_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81896_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81895->free_n_70233;
    int64_t gtid_73655 =
            futhark_mc_scan_stage_1_parloop_struct_81895->free_gtid_73655;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81895->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75846 = {.desc ="mem_75846", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81895->free_mem_75846,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80208 = start;
    int64_t x_79885;
    int64_t x_79886;
    
    x_79885 = (int64_t) 0;
    for (; iter_80208 < end; iter_80208++) {
        int64_t gtid_73657 = iter_80208;
        
        // stage 1 scan body
        {
            float x_79888 = ((float *) Y_mem_75306.mem)[gtid_73655 * n_70233 +
                                                        gtid_73657];
            bool isnan_res_79889;
            
            isnan_res_79889 = futrts_isnan32(x_79888);
            
            bool defunc_0_p_res_79890 = !isnan_res_79889;
            int64_t defunc_0_f_res_79891 = btoi_bool_i64(defunc_0_p_res_79890);
            
            // write mapped values results to memory
            { }
            x_79885 = x_79885;
            // Read next values
            {
                x_79886 = defunc_0_f_res_79891;
            }
            
            int64_t defunc_1_op_res_79887 = add64(x_79885, x_79886);
            
            ((int64_t *) mem_75846.mem)[gtid_73657] = defunc_1_op_res_79887;
            x_79885 = defunc_1_op_res_79887;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81896_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81896_end -
                 futhark_mc_scan_stage_1_parloop_81896_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81896_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81896_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81896_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81897 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73655;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75846;
};
static int futhark_mc_scan_stage_3_parloop_81898(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73656, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81897
    *futhark_mc_scan_stage_3_parloop_struct_81897 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81897 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81897->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81898_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81898_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81897->free_n_70233;
    int64_t gtid_73655 =
            futhark_mc_scan_stage_3_parloop_struct_81897->free_gtid_73655;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81897->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75846 = {.desc ="mem_75846", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81897->free_mem_75846,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80220 = start;
    int64_t x_80217;
    int64_t x_80218;
    
    if (iter_80220 == (int64_t) 0) {
        x_80217 = (int64_t) 0;
    } else {
        x_80217 = ((int64_t *) mem_75846.mem)[iter_80220 - (int64_t) 1];
    }
    for (; iter_80220 < end; iter_80220++) {
        int64_t gtid_73657 = iter_80220;
        
        // stage 3 scan body
        {
            float x_79888 = ((float *) Y_mem_75306.mem)[gtid_73655 * n_70233 +
                                                        gtid_73657];
            bool isnan_res_79889;
            
            isnan_res_79889 = futrts_isnan32(x_79888);
            
            bool defunc_0_p_res_79890 = !isnan_res_79889;
            int64_t defunc_0_f_res_79891 = btoi_bool_i64(defunc_0_p_res_79890);
            
            x_80217 = x_80217;
            x_80218 = defunc_0_f_res_79891;
            
            int64_t defunc_1_op_res_80219 = add64(x_80217, x_80218);
            
            ((int64_t *) mem_75846.mem)[gtid_73657] = defunc_1_op_res_80219;
            x_80217 = defunc_1_op_res_80219;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81898_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81898_end -
                 futhark_mc_scan_stage_3_parloop_81898_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81898_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81898_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81898_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81893(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73656 = tid;
    int num_tasks_80207 = info.nsubtasks;
    struct futhark_mc_task_81892 *futhark_mc_task_81892 =
                                 (struct futhark_mc_task_81892 *) args;
    struct futhark_context *ctx = futhark_mc_task_81892->ctx;
    uint64_t futhark_mc_segscan_task_81893_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81893_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81892->free_n_70233;
    int64_t gtid_73655 = futhark_mc_task_81892->free_gtid_73655;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81892->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75846 = {.desc ="mem_75846", .mem =
                                 futhark_mc_task_81892->free_mem_75846, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_80214_cached_sizze_81894 = 0;
    unsigned char *scan_stage_2_accum_mem_80214 = NULL;
    int64_t iter_80208;
    struct futhark_mc_scan_stage_1_parloop_struct_81895
    futhark_mc_scan_stage_1_parloop_struct_81895;
    
    futhark_mc_scan_stage_1_parloop_struct_81895.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81895.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81895.free_gtid_73655 = gtid_73655;
    futhark_mc_scan_stage_1_parloop_struct_81895.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81895.free_mem_75846 = mem_75846.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81896_task;
    
    futhark_mc_scan_stage_1_parloop_81896_task.name =
        "futhark_mc_scan_stage_1_parloop_81896";
    futhark_mc_scan_stage_1_parloop_81896_task.fn =
        futhark_mc_scan_stage_1_parloop_81896;
    futhark_mc_scan_stage_1_parloop_81896_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81895;
    futhark_mc_scan_stage_1_parloop_81896_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81896_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81896_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81896_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81896_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81896_task);
    
    if (futhark_mc_scan_stage_1_parloop_81896_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81896_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81896_total_end -
                 futhark_mc_scan_stage_1_parloop_81896_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81896_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81896_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81896_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_80207)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_80209;
        int64_t x_80210;
        int64_t offset_80212 = (int64_t) 0;
        int64_t offset_index_80213 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_80214_cached_sizze_81894 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_80214 = realloc(scan_stage_2_accum_mem_80214,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_80214_cached_sizze_81894 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_80214)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_80216 = 0; i_80216 < num_tasks_80207 - 1; i_80216++) {
            offset_80212 = squot64(n_70233, sext_i32_i64(num_tasks_80207));
            if (slt64(sext_i32_i64(i_80216), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_80207)))) {
                offset_80212 += (int64_t) 1;
            }
            offset_index_80213 += offset_80212;
            
            int64_t gtid_73657 = offset_index_80213;
            float x_79888 = ((float *) Y_mem_75306.mem)[gtid_73655 * n_70233 +
                                                        gtid_73657];
            bool isnan_res_79889;
            
            isnan_res_79889 = futrts_isnan32(x_79888);
            
            bool defunc_0_p_res_79890 = !isnan_res_79889;
            int64_t defunc_0_f_res_79891 = btoi_bool_i64(defunc_0_p_res_79890);
            
            // Read carry in
            {
                x_80209 =
                    ((int64_t *) scan_stage_2_accum_mem_80214)[(int64_t) 0];
            }
            // Read next values
            {
                x_80210 = ((int64_t *) mem_75846.mem)[offset_index_80213 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_80211 = add64(x_80209, x_80210);
            
            ((int64_t *) mem_75846.mem)[offset_index_80213 - (int64_t) 1] =
                defunc_1_op_res_80211;
            ((int64_t *) scan_stage_2_accum_mem_80214)[(int64_t) 0] =
                defunc_1_op_res_80211;
        }
        
        int64_t iter_80220 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81897
        futhark_mc_scan_stage_3_parloop_struct_81897;
        
        futhark_mc_scan_stage_3_parloop_struct_81897.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81897.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81897.free_gtid_73655 =
            gtid_73655;
        futhark_mc_scan_stage_3_parloop_struct_81897.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81897.free_mem_75846 =
            mem_75846.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81898_task;
        
        futhark_mc_scan_stage_3_parloop_81898_task.name =
            "futhark_mc_scan_stage_3_parloop_81898";
        futhark_mc_scan_stage_3_parloop_81898_task.fn =
            futhark_mc_scan_stage_3_parloop_81898;
        futhark_mc_scan_stage_3_parloop_81898_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81897;
        futhark_mc_scan_stage_3_parloop_81898_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81898_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81898_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81898_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81898_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81898_task);
        
        if (futhark_mc_scan_stage_3_parloop_81898_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81898_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81898_total_end -
                     futhark_mc_scan_stage_3_parloop_81898_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81898_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81898_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81898_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_80214);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81893_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81893_end -
                 futhark_mc_segscan_task_81893_start;
        
        ctx->futhark_mc_segscan_task_81893_runs[tid]++;
        ctx->futhark_mc_segscan_task_81893_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81893_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81899 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73655;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75846;
    unsigned char *free_mem_75849;
    unsigned char *free_mem_75852;
};
struct futhark_mc_segmap_parloop_struct_81901 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_73655;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_75846;
    unsigned char *free_mem_75849;
    unsigned char *free_mem_75852;
};
static int futhark_mc_segmap_parloop_81902(void *args, int64_t start,
                                           int64_t end, int flat_tid_73658,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81901
    *futhark_mc_segmap_parloop_struct_81901 =
    (struct futhark_mc_segmap_parloop_struct_81901 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81901->ctx;
    uint64_t futhark_mc_segmap_parloop_81902_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81902_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81901->free_n_70233;
    int64_t gtid_73655 =
            futhark_mc_segmap_parloop_struct_81901->free_gtid_73655;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81901->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75846 = {.desc ="mem_75846", .mem =
                                 futhark_mc_segmap_parloop_struct_81901->free_mem_75846,
                                 .size =0, .references =NULL};
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_segmap_parloop_struct_81901->free_mem_75849,
                                 .size =0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_segmap_parloop_struct_81901->free_mem_75852,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80224 = start;
    
    for (; iter_80224 < end; iter_80224++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80227 = n_70233;
        int64_t gtid_73659 = iter_80224;
        int64_t remnant_80228 = iter_80224 - gtid_73659;
        float x_79892 = ((float *) Y_mem_75306.mem)[gtid_73655 * n_70233 +
                                                    gtid_73659];
        bool isnan_res_79893;
        
        isnan_res_79893 = futrts_isnan32(x_79892);
        
        bool defunc_0_p_res_79894 = !isnan_res_79893;
        int64_t defunc_1_f_res_79895;
        
        if (defunc_0_p_res_79894) {
            int64_t x_80225 = ((int64_t *) mem_75846.mem)[gtid_73659];
            int64_t defunc_1_f_res_t_res_80226 = sub64(x_80225, (int64_t) 1);
            
            defunc_1_f_res_79895 = defunc_1_f_res_t_res_80226;
        } else {
            defunc_1_f_res_79895 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79895) &&
            slt64(defunc_1_f_res_79895, n_70233)) {
            ((int64_t *) mem_75852.mem)[defunc_1_f_res_79895] = gtid_73659;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79895) &&
            slt64(defunc_1_f_res_79895, n_70233)) {
            ((float *) mem_75849.mem)[defunc_1_f_res_79895] = x_79892;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81902_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81902_end -
                 futhark_mc_segmap_parloop_81902_start;
        
        ctx->futhark_mc_segmap_parloop_81902_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81902_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81902_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81900(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73658 = tid;
    int num_tasks_80223 = info.nsubtasks;
    struct futhark_mc_task_81899 *futhark_mc_task_81899 =
                                 (struct futhark_mc_task_81899 *) args;
    struct futhark_context *ctx = futhark_mc_task_81899->ctx;
    uint64_t futhark_mc_segmap_task_81900_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81900_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81899->free_n_70233;
    int64_t gtid_73655 = futhark_mc_task_81899->free_gtid_73655;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81899->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_75846 = {.desc ="mem_75846", .mem =
                                 futhark_mc_task_81899->free_mem_75846, .size =
                                 0, .references =NULL};
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_task_81899->free_mem_75849, .size =
                                 0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_task_81899->free_mem_75852, .size =
                                 0, .references =NULL};
    int64_t iter_80224;
    struct futhark_mc_segmap_parloop_struct_81901
    futhark_mc_segmap_parloop_struct_81901;
    
    futhark_mc_segmap_parloop_struct_81901.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81901.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81901.free_gtid_73655 = gtid_73655;
    futhark_mc_segmap_parloop_struct_81901.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81901.free_mem_75846 = mem_75846.mem;
    futhark_mc_segmap_parloop_struct_81901.free_mem_75849 = mem_75849.mem;
    futhark_mc_segmap_parloop_struct_81901.free_mem_75852 = mem_75852.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81902_task;
    
    futhark_mc_segmap_parloop_81902_task.name =
        "futhark_mc_segmap_parloop_81902";
    futhark_mc_segmap_parloop_81902_task.fn = futhark_mc_segmap_parloop_81902;
    futhark_mc_segmap_parloop_81902_task.args =
        &futhark_mc_segmap_parloop_struct_81901;
    futhark_mc_segmap_parloop_81902_task.iterations = iterations;
    futhark_mc_segmap_parloop_81902_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81902_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81902_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81902_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81902_task);
    
    if (futhark_mc_segmap_parloop_81902_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81902_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81902_total_end -
                 futhark_mc_segmap_parloop_81902_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81902_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81902_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81902_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81900_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81900_end -
                 futhark_mc_segmap_task_81900_start;
        
        ctx->futhark_mc_segmap_task_81900_runs[tid]++;
        ctx->futhark_mc_segmap_task_81900_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81900_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81903 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75855;
};
struct futhark_mc_segmap_parloop_struct_81905 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75855;
};
static int futhark_mc_segmap_parloop_81906(void *args, int64_t start,
                                           int64_t end, int flat_tid_73660,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81905
    *futhark_mc_segmap_parloop_struct_81905 =
    (struct futhark_mc_segmap_parloop_struct_81905 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81905->ctx;
    uint64_t futhark_mc_segmap_parloop_81906_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81906_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81905->free_n_70233;
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_segmap_parloop_struct_81905->free_mem_75852,
                                 .size =0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_segmap_parloop_struct_81905->free_mem_75855,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80230 = start;
    
    for (; iter_80230 < end; iter_80230++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80231 = n_70233;
        int64_t gtid_73661 = iter_80230;
        int64_t remnant_80232 = iter_80230 - gtid_73661;
        int64_t x_79898 = ((int64_t *) mem_75852.mem)[gtid_73661];
        int64_t defunc_0_f_res_79899 = add64((int64_t) 1, x_79898);
        
        ((int64_t *) mem_75855.mem)[gtid_73661] = defunc_0_f_res_79899;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81906_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81906_end -
                 futhark_mc_segmap_parloop_81906_start;
        
        ctx->futhark_mc_segmap_parloop_81906_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81906_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81906_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81904(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73660 = tid;
    int num_tasks_80229 = info.nsubtasks;
    struct futhark_mc_task_81903 *futhark_mc_task_81903 =
                                 (struct futhark_mc_task_81903 *) args;
    struct futhark_context *ctx = futhark_mc_task_81903->ctx;
    uint64_t futhark_mc_segmap_task_81904_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81904_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81903->free_n_70233;
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_task_81903->free_mem_75852, .size =
                                 0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_task_81903->free_mem_75855, .size =
                                 0, .references =NULL};
    int64_t iter_80230;
    struct futhark_mc_segmap_parloop_struct_81905
    futhark_mc_segmap_parloop_struct_81905;
    
    futhark_mc_segmap_parloop_struct_81905.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81905.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81905.free_mem_75852 = mem_75852.mem;
    futhark_mc_segmap_parloop_struct_81905.free_mem_75855 = mem_75855.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81906_task;
    
    futhark_mc_segmap_parloop_81906_task.name =
        "futhark_mc_segmap_parloop_81906";
    futhark_mc_segmap_parloop_81906_task.fn = futhark_mc_segmap_parloop_81906;
    futhark_mc_segmap_parloop_81906_task.args =
        &futhark_mc_segmap_parloop_struct_81905;
    futhark_mc_segmap_parloop_81906_task.iterations = iterations;
    futhark_mc_segmap_parloop_81906_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81906_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81906_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81906_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81906_task);
    
    if (futhark_mc_segmap_parloop_81906_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81906_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81906_total_end -
                 futhark_mc_segmap_parloop_81906_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81906_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81906_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81906_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81904_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81904_end -
                 futhark_mc_segmap_task_81904_start;
        
        ctx->futhark_mc_segmap_task_81904_runs[tid]++;
        ctx->futhark_mc_segmap_task_81904_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81904_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81907 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75858;
};
struct futhark_mc_segmap_parloop_struct_81909 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75858;
};
static int futhark_mc_segmap_parloop_81910(void *args, int64_t start,
                                           int64_t end, int flat_tid_73662,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81909
    *futhark_mc_segmap_parloop_struct_81909 =
    (struct futhark_mc_segmap_parloop_struct_81909 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81909->ctx;
    uint64_t futhark_mc_segmap_parloop_81910_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81910_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81909->free_q_70235;
    int64_t last_res_73832 =
            futhark_mc_segmap_parloop_struct_81909->free_last_res_73832;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_segmap_parloop_struct_81909->free_mem_75858,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80234 = start;
    
    for (; iter_80234 < end; iter_80234++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80235 = q_70235;
        int64_t gtid_73663 = iter_80234;
        int64_t remnant_80236 = iter_80234 - gtid_73663;
        bool cond_79900 = sle64(last_res_73832, gtid_73663);
        float defunc_0_f_res_79901;
        
        if (cond_79900) {
            defunc_0_f_res_79901 = 0.0F;
        } else {
            defunc_0_f_res_79901 = 1.0F;
        }
        ((float *) mem_75858.mem)[gtid_73663] = defunc_0_f_res_79901;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81910_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81910_end -
                 futhark_mc_segmap_parloop_81910_start;
        
        ctx->futhark_mc_segmap_parloop_81910_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81910_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81910_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81908(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73662 = tid;
    int num_tasks_80233 = info.nsubtasks;
    struct futhark_mc_task_81907 *futhark_mc_task_81907 =
                                 (struct futhark_mc_task_81907 *) args;
    struct futhark_context *ctx = futhark_mc_task_81907->ctx;
    uint64_t futhark_mc_segmap_task_81908_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81908_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81907->free_q_70235;
    int64_t last_res_73832 = futhark_mc_task_81907->free_last_res_73832;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_task_81907->free_mem_75858, .size =
                                 0, .references =NULL};
    int64_t iter_80234;
    struct futhark_mc_segmap_parloop_struct_81909
    futhark_mc_segmap_parloop_struct_81909;
    
    futhark_mc_segmap_parloop_struct_81909.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81909.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81909.free_last_res_73832 = last_res_73832;
    futhark_mc_segmap_parloop_struct_81909.free_mem_75858 = mem_75858.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81910_task;
    
    futhark_mc_segmap_parloop_81910_task.name =
        "futhark_mc_segmap_parloop_81910";
    futhark_mc_segmap_parloop_81910_task.fn = futhark_mc_segmap_parloop_81910;
    futhark_mc_segmap_parloop_81910_task.args =
        &futhark_mc_segmap_parloop_struct_81909;
    futhark_mc_segmap_parloop_81910_task.iterations = iterations;
    futhark_mc_segmap_parloop_81910_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81910_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81910_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81910_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81910_task);
    
    if (futhark_mc_segmap_parloop_81910_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81910_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81910_total_end -
                 futhark_mc_segmap_parloop_81910_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81910_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81910_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81910_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81908_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81908_end -
                 futhark_mc_segmap_task_81908_start;
        
        ctx->futhark_mc_segmap_task_81908_runs[tid]++;
        ctx->futhark_mc_segmap_task_81908_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81908_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81911 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73832;
    int64_t free_min_arg_73847;
    int64_t free_min_arg_73848;
    int64_t free_min_res_73849;
    float free_max_res_73853;
    unsigned char *free_mem_75849;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75855;
    int64_t free_bytes_75857;
    unsigned char *free_mem_75858;
    unsigned char *free_mem_75897;
    unsigned char *free_mem_75900;
};
struct futhark_mc_segmap_parloop_struct_81913 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73832;
    int64_t free_min_arg_73847;
    int64_t free_min_arg_73848;
    int64_t free_min_res_73849;
    float free_max_res_73853;
    unsigned char *free_mem_75849;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75855;
    int64_t free_bytes_75857;
    unsigned char *free_mem_75858;
    unsigned char *free_mem_75897;
    unsigned char *free_mem_75900;
};
static int futhark_mc_segmap_parloop_81914(void *args, int64_t start,
                                           int64_t end, int flat_tid_73664,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81913
    *futhark_mc_segmap_parloop_struct_81913 =
    (struct futhark_mc_segmap_parloop_struct_81913 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81913->ctx;
    uint64_t futhark_mc_segmap_parloop_81914_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81914_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81913->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81913->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81913->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81913->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81913->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81913->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81913->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81913->free_loop_cond_70258;
    int64_t last_res_73832 =
            futhark_mc_segmap_parloop_struct_81913->free_last_res_73832;
    int64_t min_arg_73847 =
            futhark_mc_segmap_parloop_struct_81913->free_min_arg_73847;
    int64_t min_arg_73848 =
            futhark_mc_segmap_parloop_struct_81913->free_min_arg_73848;
    int64_t min_res_73849 =
            futhark_mc_segmap_parloop_struct_81913->free_min_res_73849;
    float max_res_73853 =
          futhark_mc_segmap_parloop_struct_81913->free_max_res_73853;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75849,
                                 .size =0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75852,
                                 .size =0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75855,
                                 .size =0, .references =NULL};
    int64_t bytes_75857 =
            futhark_mc_segmap_parloop_struct_81913->free_bytes_75857;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75858,
                                 .size =0, .references =NULL};
    struct memblock mem_75897 = {.desc ="mem_75897", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75897,
                                 .size =0, .references =NULL};
    struct memblock mem_75900 = {.desc ="mem_75900", .mem =
                                 futhark_mc_segmap_parloop_struct_81913->free_mem_75900,
                                 .size =0, .references =NULL};
    size_t mem_80138_cached_sizze_81915 = 0;
    unsigned char *mem_80138 = NULL;
    size_t mem_80140_cached_sizze_81916 = 0;
    unsigned char *mem_80140 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80238 = start;
    
    if (mem_80138_cached_sizze_81915 < (size_t) bytes_75857) {
        mem_80138 = realloc(mem_80138, bytes_75857);
        mem_80138_cached_sizze_81915 = bytes_75857;
    }
    if (mem_80140_cached_sizze_81916 < (size_t) bytes_75857) {
        mem_80140 = realloc(mem_80140, bytes_75857);
        mem_80140_cached_sizze_81916 = bytes_75857;
    }
    for (; iter_80238 < end; iter_80238++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80342 = n_m_70241;
        int64_t gtid_73665 = iter_80238;
        int64_t remnant_80343 = iter_80238 - gtid_73665;
        int64_t min_arg_80052 = mul64(jump_70237, gtid_73665);
        int64_t min_res_80053 = smin64(i_70247, min_arg_80052);
        int64_t defunc_0_g_res_80054 = add64((int64_t) 1, min_res_80053);
        bool init_idx_80055;
        int64_t init_idx_80056;
        int64_t init_idx_80057;
        bool loop_while_80239;
        int64_t low_80240;
        int64_t high_80241;
        
        loop_while_80239 = x_70248;
        low_80240 = (int64_t) 0;
        high_80241 = i_70247;
        while (loop_while_80239) {
            int64_t x_80242 = add64(low_80240, high_80241);
            int64_t mid_80243 = sdiv64(x_80242, (int64_t) 2);
            bool x_80244 = sle64((int64_t) 0, mid_80243);
            bool y_80245 = slt64(mid_80243, n_70233);
            bool bounds_check_80246 = x_80244 && y_80245;
            bool index_certs_80247;
            
            if (!bounds_check_80246) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_80243,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_80248 = ((int64_t *) mem_75855.mem)[mid_80243];
            bool cond_80249 = slt64(mid_id_80248, (int64_t) 0);
            int64_t mid_idx_80250;
            
            if (cond_80249) {
                mid_idx_80250 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_80250 = mid_id_80248;
            }
            
            bool cond_80251 = sle64(defunc_0_g_res_80054, mid_idx_80250);
            int64_t loopres_80252;
            int64_t loopres_80253;
            
            if (cond_80251) {
                int64_t loopres_t_res_80254 = sub64(mid_80243, (int64_t) 1);
                
                loopres_80252 = low_80240;
                loopres_80253 = loopres_t_res_80254;
            } else {
                int64_t loopres_f_res_80255 = add64((int64_t) 1, mid_80243);
                
                loopres_80252 = loopres_f_res_80255;
                loopres_80253 = high_80241;
            }
            
            bool loop_cond_80256 = sle64(loopres_80252, loopres_80253);
            bool loop_while_tmp_80344 = loop_cond_80256;
            int64_t low_tmp_80345 = loopres_80252;
            int64_t high_tmp_80346 = loopres_80253;
            
            loop_while_80239 = loop_while_tmp_80344;
            low_80240 = low_tmp_80345;
            high_80241 = high_tmp_80346;
        }
        init_idx_80055 = loop_while_80239;
        init_idx_80056 = low_80240;
        init_idx_80057 = high_80241;
        
        bool idx_80076;
        int64_t idx_80077;
        int64_t idx_80078;
        int64_t idx_80079;
        bool loop_while_80257;
        int64_t l_idx_80258;
        int64_t r_idx_80259;
        int64_t span_80260;
        
        loop_while_80257 = loop_cond_70258;
        l_idx_80258 = init_idx_80056;
        r_idx_80259 = init_idx_80056;
        span_80260 = (int64_t) 1;
        while (loop_while_80257) {
            int64_t max_arg_80261 = sub64(l_idx_80258, (int64_t) 1);
            int64_t max_res_80262 = smax64((int64_t) 0, max_arg_80261);
            int64_t min_arg_80263 = add64((int64_t) 1, r_idx_80259);
            int64_t min_res_80264 = smin64(min_arg_73847, min_arg_80263);
            bool x_80265 = sle64((int64_t) 0, max_res_80262);
            bool y_80266 = slt64(max_res_80262, n_70233);
            bool bounds_check_80267 = x_80265 && y_80266;
            bool index_certs_80268;
            
            if (!bounds_check_80267) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80262,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80269 = ((int64_t *) mem_75855.mem)[max_res_80262];
            int64_t abs_arg_80270 = sub64(x_80269, defunc_0_g_res_80054);
            int64_t abs_res_80271 = abs64(abs_arg_80270);
            bool x_80272 = sle64((int64_t) 0, min_res_80264);
            bool y_80273 = slt64(min_res_80264, n_70233);
            bool bounds_check_80274 = x_80272 && y_80273;
            bool index_certs_80275;
            
            if (!bounds_check_80274) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_80264,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80276 = ((int64_t *) mem_75855.mem)[min_res_80264];
            int64_t abs_arg_80277 = sub64(x_80276, defunc_0_g_res_80054);
            int64_t abs_res_80278 = abs64(abs_arg_80277);
            bool cond_80279 = max_res_80262 == l_idx_80258;
            int64_t loopres_80280;
            int64_t loopres_80281;
            int64_t loopres_80282;
            
            if (cond_80279) {
                loopres_80280 = l_idx_80258;
                loopres_80281 = r_idx_80259;
                loopres_80282 = min_res_70253;
            } else {
                bool cond_80283 = slt64(abs_res_80271, abs_res_80278);
                bool cond_f_res_80284 = min_res_80264 == r_idx_80259;
                bool x_80285 = !cond_80283;
                bool y_80286 = cond_f_res_80284 && x_80285;
                bool cond_80287 = cond_80283 || y_80286;
                int64_t loopres_f_res_80288;
                
                if (cond_80287) {
                    loopres_f_res_80288 = max_res_80262;
                } else {
                    loopres_f_res_80288 = l_idx_80258;
                }
                
                int64_t loopres_f_res_80289;
                
                if (cond_80287) {
                    loopres_f_res_80289 = r_idx_80259;
                } else {
                    loopres_f_res_80289 = min_res_80264;
                }
                
                int64_t loopres_f_res_80290;
                
                if (cond_80287) {
                    int64_t loopres_f_res_t_res_80291 = add64((int64_t) 1,
                                                              span_80260);
                    
                    loopres_f_res_80290 = loopres_f_res_t_res_80291;
                } else {
                    int64_t loopres_f_res_f_res_80292 = add64((int64_t) 1,
                                                              span_80260);
                    
                    loopres_f_res_80290 = loopres_f_res_f_res_80292;
                }
                loopres_80280 = loopres_f_res_80288;
                loopres_80281 = loopres_f_res_80289;
                loopres_80282 = loopres_f_res_80290;
            }
            
            bool loop_cond_80293 = slt64(loopres_80282, min_res_70253);
            bool loop_while_tmp_80347 = loop_cond_80293;
            int64_t l_idx_tmp_80348 = loopres_80280;
            int64_t r_idx_tmp_80349 = loopres_80281;
            int64_t span_tmp_80350 = loopres_80282;
            
            loop_while_80257 = loop_while_tmp_80347;
            l_idx_80258 = l_idx_tmp_80348;
            r_idx_80259 = r_idx_tmp_80349;
            span_80260 = span_tmp_80350;
        }
        idx_80076 = loop_while_80257;
        idx_80077 = l_idx_80258;
        idx_80078 = r_idx_80259;
        idx_80079 = span_80260;
        
        int64_t min_res_80117 = smin64(min_arg_73848, idx_80077);
        int64_t max_res_80118 = smax64((int64_t) 0, min_res_80117);
        int64_t x_80119 = add64(min_res_73849, max_res_80118);
        int64_t r_80120 = sub64(x_80119, (int64_t) 1);
        bool x_80121 = sle64((int64_t) 0, r_80120);
        bool y_80122 = slt64(r_80120, n_70233);
        bool bounds_check_80123 = x_80121 && y_80122;
        bool index_certs_80124;
        
        if (!bounds_check_80123) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_80120,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_80125 = ((int64_t *) mem_75852.mem)[r_80120];
        int64_t abs_arg_80126 = sub64(x_80125, min_res_80053);
        int64_t abs_res_80127 = abs64(abs_arg_80126);
        bool x_80128 = sle64((int64_t) 0, max_res_80118);
        bool y_80129 = slt64(max_res_80118, n_70233);
        bool bounds_check_80130 = x_80128 && y_80129;
        bool index_certs_80131;
        
        if (!bounds_check_80130) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_80118,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_80132 = ((int64_t *) mem_75852.mem)[max_res_80118];
        int64_t abs_arg_80133 = sub64(x_80132, min_res_80053);
        int64_t abs_res_80134 = abs64(abs_arg_80133);
        int64_t max_res_80135 = smax64(abs_res_80127, abs_res_80134);
        float defunc_0_f_res_80136 = sitofp_i64_f32(max_res_80135);
        float defunc_1_f_res_80137 = max_res_73853 + defunc_0_f_res_80136;
        float defunc_2_reduce_res_80142;
        float defunc_2_reduce_res_80143;
        float defunc_2_reduce_res_80144;
        float redout_80295;
        float redout_80296;
        float redout_80297;
        
        redout_80295 = 0.0F;
        redout_80296 = 0.0F;
        redout_80297 = 0.0F;
        for (int64_t i_80294 = 0; i_80294 < q_70235; i_80294++) {
            float x_80300 = ((float *) mem_75858.mem)[i_80294];
            bool cond_80301 = sle64(last_res_73832, i_80294);
            int64_t defunc_0_f_res_80302;
            
            if (cond_80301) {
                defunc_0_f_res_80302 = (int64_t) 0;
            } else {
                int64_t i_80303 = add64(max_res_80118, i_80294);
                int64_t defunc_0_add_arg_80304 =
                        ((int64_t *) mem_75852.mem)[i_80303];
                int64_t defunc_1_add_res_80305 = add64((int64_t) 1,
                                                       defunc_0_add_arg_80304);
                
                defunc_0_f_res_80302 = defunc_1_add_res_80305;
            }
            
            int64_t binop_p_80306 = sub64(defunc_0_f_res_80302, min_res_80053);
            float defunc_0_f_res_80307 = sitofp_i64_f32(binop_p_80306);
            float abs_res_80308 = (float) fabs(defunc_0_f_res_80307);
            float tmp1_80309 = abs_res_80308 / defunc_1_f_res_80137;
            float x_80310 = tmp1_80309 * tmp1_80309;
            float y_80311 = tmp1_80309 * x_80310;
            float tmp2_80312 = 1.0F - y_80311;
            float x_80313 = tmp2_80312 * tmp2_80312;
            float tmp3_80314 = tmp2_80312 * x_80313;
            float tmp4_80315 = x_80300 * tmp3_80314;
            float defunc_1_f_res_80316 = defunc_0_f_res_80307 * tmp4_80315;
            float defunc_1_f_res_80317 = defunc_0_f_res_80307 *
                  defunc_1_f_res_80316;
            float defunc_1_op_res_80318 = tmp4_80315 + redout_80295;
            float defunc_1_op_res_80319 = defunc_1_f_res_80316 + redout_80296;
            float defunc_1_op_res_80320 = defunc_1_f_res_80317 + redout_80297;
            
            ((float *) mem_80138)[i_80294] = defunc_1_f_res_80316;
            ((float *) mem_80140)[i_80294] = tmp4_80315;
            
            float redout_tmp_80351 = defunc_1_op_res_80318;
            float redout_tmp_80352 = defunc_1_op_res_80319;
            float redout_tmp_80353 = defunc_1_op_res_80320;
            
            redout_80295 = redout_tmp_80351;
            redout_80296 = redout_tmp_80352;
            redout_80297 = redout_tmp_80353;
        }
        defunc_2_reduce_res_80142 = redout_80295;
        defunc_2_reduce_res_80143 = redout_80296;
        defunc_2_reduce_res_80144 = redout_80297;
        
        float x_80176 = defunc_2_reduce_res_80142 * defunc_2_reduce_res_80144;
        float y_80177 = defunc_2_reduce_res_80143 * defunc_2_reduce_res_80143;
        float y_80178 = x_80176 - y_80177;
        float det1_80179 = 1.0F / y_80178;
        float a11_80180 = defunc_2_reduce_res_80144 * det1_80179;
        float x_80181 = 0.0F - defunc_2_reduce_res_80143;
        float b11_80182 = det1_80179 * x_80181;
        float c11_80183 = defunc_2_reduce_res_80142 * det1_80179;
        float defunc_2_reduce_res_80184;
        float defunc_2_reduce_res_80185;
        float redout_80324;
        float redout_80325;
        
        redout_80324 = 0.0F;
        redout_80325 = 0.0F;
        for (int64_t i_80323 = 0; i_80323 < q_70235; i_80323++) {
            float x_80326 = ((float *) mem_80140)[i_80323];
            float x_80327 = ((float *) mem_80138)[i_80323];
            bool cond_80328 = sle64(last_res_73832, i_80323);
            float defunc_0_f_res_80329;
            
            if (cond_80328) {
                defunc_0_f_res_80329 = 0.0F;
            } else {
                int64_t i_80330 = add64(max_res_80118, i_80323);
                float defunc_0_add_arg_80331 =
                      ((float *) mem_75849.mem)[i_80330];
                
                defunc_0_f_res_80329 = defunc_0_add_arg_80331;
            }
            
            float x_80332 = a11_80180 * x_80326;
            float y_80333 = b11_80182 * x_80327;
            float x_80334 = x_80332 + y_80333;
            float defunc_9_fit_fun_res_80335 = defunc_0_f_res_80329 * x_80334;
            float x_80336 = b11_80182 * x_80326;
            float y_80337 = c11_80183 * x_80327;
            float x_80338 = x_80336 + y_80337;
            float defunc_9_slope_fun_res_80339 = defunc_0_f_res_80329 * x_80338;
            float defunc_1_op_res_80340 = defunc_9_fit_fun_res_80335 +
                  redout_80324;
            float defunc_1_op_res_80341 = defunc_9_slope_fun_res_80339 +
                  redout_80325;
            float redout_tmp_80356 = defunc_1_op_res_80340;
            float redout_tmp_80357 = defunc_1_op_res_80341;
            
            redout_80324 = redout_tmp_80356;
            redout_80325 = redout_tmp_80357;
        }
        defunc_2_reduce_res_80184 = redout_80324;
        defunc_2_reduce_res_80185 = redout_80325;
        ((float *) mem_75897.mem)[gtid_73665] = defunc_2_reduce_res_80184;
        ((float *) mem_75900.mem)[gtid_73665] = defunc_2_reduce_res_80185;
    }
    
  cleanup:
    { }
    free(mem_80138);
    free(mem_80140);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81914_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81914_end -
                 futhark_mc_segmap_parloop_81914_start;
        
        ctx->futhark_mc_segmap_parloop_81914_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81914_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81914_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81912(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73664 = tid;
    int num_tasks_80237 = info.nsubtasks;
    struct futhark_mc_task_81911 *futhark_mc_task_81911 =
                                 (struct futhark_mc_task_81911 *) args;
    struct futhark_context *ctx = futhark_mc_task_81911->ctx;
    uint64_t futhark_mc_segmap_task_81912_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81912_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81911->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81911->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81911->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81911->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81911->free_i_70247;
    bool x_70248 = futhark_mc_task_81911->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81911->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81911->free_loop_cond_70258;
    int64_t last_res_73832 = futhark_mc_task_81911->free_last_res_73832;
    int64_t min_arg_73847 = futhark_mc_task_81911->free_min_arg_73847;
    int64_t min_arg_73848 = futhark_mc_task_81911->free_min_arg_73848;
    int64_t min_res_73849 = futhark_mc_task_81911->free_min_res_73849;
    float max_res_73853 = futhark_mc_task_81911->free_max_res_73853;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_task_81911->free_mem_75849, .size =
                                 0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_task_81911->free_mem_75852, .size =
                                 0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_task_81911->free_mem_75855, .size =
                                 0, .references =NULL};
    int64_t bytes_75857 = futhark_mc_task_81911->free_bytes_75857;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_task_81911->free_mem_75858, .size =
                                 0, .references =NULL};
    struct memblock mem_75897 = {.desc ="mem_75897", .mem =
                                 futhark_mc_task_81911->free_mem_75897, .size =
                                 0, .references =NULL};
    struct memblock mem_75900 = {.desc ="mem_75900", .mem =
                                 futhark_mc_task_81911->free_mem_75900, .size =
                                 0, .references =NULL};
    int64_t iter_80238;
    struct futhark_mc_segmap_parloop_struct_81913
    futhark_mc_segmap_parloop_struct_81913;
    
    futhark_mc_segmap_parloop_struct_81913.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81913.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81913.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81913.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81913.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81913.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81913.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81913.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81913.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81913.free_last_res_73832 = last_res_73832;
    futhark_mc_segmap_parloop_struct_81913.free_min_arg_73847 = min_arg_73847;
    futhark_mc_segmap_parloop_struct_81913.free_min_arg_73848 = min_arg_73848;
    futhark_mc_segmap_parloop_struct_81913.free_min_res_73849 = min_res_73849;
    futhark_mc_segmap_parloop_struct_81913.free_max_res_73853 = max_res_73853;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75849 = mem_75849.mem;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75852 = mem_75852.mem;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75855 = mem_75855.mem;
    futhark_mc_segmap_parloop_struct_81913.free_bytes_75857 = bytes_75857;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75858 = mem_75858.mem;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75897 = mem_75897.mem;
    futhark_mc_segmap_parloop_struct_81913.free_mem_75900 = mem_75900.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81914_task;
    
    futhark_mc_segmap_parloop_81914_task.name =
        "futhark_mc_segmap_parloop_81914";
    futhark_mc_segmap_parloop_81914_task.fn = futhark_mc_segmap_parloop_81914;
    futhark_mc_segmap_parloop_81914_task.args =
        &futhark_mc_segmap_parloop_struct_81913;
    futhark_mc_segmap_parloop_81914_task.iterations = iterations;
    futhark_mc_segmap_parloop_81914_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81914_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81914_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81914_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81914_task);
    
    if (futhark_mc_segmap_parloop_81914_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81914_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81914_total_end -
                 futhark_mc_segmap_parloop_81914_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81914_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81914_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81914_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81912_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81912_end -
                 futhark_mc_segmap_task_81912_start;
        
        ctx->futhark_mc_segmap_task_81912_runs[tid]++;
        ctx->futhark_mc_segmap_task_81912_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81912_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81918 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_73832;
    int64_t free_min_arg_73847;
    int64_t free_min_arg_73848;
    int64_t free_min_res_73849;
    float free_max_res_73853;
    unsigned char *free_mem_75849;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75855;
    int64_t free_bytes_75857;
    unsigned char *free_mem_75858;
    unsigned char *free_mem_75897;
    unsigned char *free_mem_75900;
};
struct futhark_mc_task_81922 {
    struct futhark_context *ctx;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75858;
    int64_t free_min_res_79903;
    int64_t free_max_res_79968;
    float free_defunc_1_f_res_79987;
    float *retval_defunc_2_reduce_res_79990;
    float *retval_defunc_2_reduce_res_79991;
    float *retval_defunc_2_reduce_res_79992;
    unsigned char *retval_mem_79988;
    unsigned char *retval_mem_79989;
};
struct futhark_mc_segred_stage_1_parloop_struct_81927 {
    struct futhark_context *ctx;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75852;
    unsigned char *free_mem_75858;
    int64_t free_min_res_79903;
    int64_t free_max_res_79968;
    float free_defunc_1_f_res_79987;
    unsigned char *free_mem_79988;
    unsigned char *free_mem_79989;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80471;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80473;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80475;
};
static int futhark_mc_segred_stage_1_parloop_81928(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73668, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81927
    *futhark_mc_segred_stage_1_parloop_struct_81927 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81927 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81927->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81928_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81928_start = get_wall_time();
    
    int64_t last_res_73832 =
            futhark_mc_segred_stage_1_parloop_struct_81927->free_last_res_73832;
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81927->free_mem_75852,
                                 .size =0, .references =NULL};
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81927->free_mem_75858,
                                 .size =0, .references =NULL};
    int64_t min_res_79903 =
            futhark_mc_segred_stage_1_parloop_struct_81927->free_min_res_79903;
    int64_t max_res_79968 =
            futhark_mc_segred_stage_1_parloop_struct_81927->free_max_res_79968;
    float defunc_1_f_res_79987 =
          futhark_mc_segred_stage_1_parloop_struct_81927->free_defunc_1_f_res_79987;
    struct memblock mem_79988 = {.desc ="mem_79988", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81927->free_mem_79988,
                                 .size =0, .references =NULL};
    struct memblock mem_79989 = {.desc ="mem_79989", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81927->free_mem_79989,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80471 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80471",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81927->free_reduce_stage_1_tid_res_arr_mem_80471,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80473 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80473",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81927->free_reduce_stage_1_tid_res_arr_mem_80473,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80475 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80475",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81927->free_reduce_stage_1_tid_res_arr_mem_80475,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80477 = start;
    float x_80414;
    float x_80415;
    float x_80417;
    float x_80418;
    float x_80420;
    float x_80421;
    float local_acc_80478 = 0.0F;
    float local_acc_80479 = 0.0F;
    float local_acc_80480 = 0.0F;
    
    for (; iter_80477 < end; iter_80477++) {
        int64_t gtid_73669 = iter_80477;
        float x_80423 = ((float *) mem_75858.mem)[gtid_73669];
        bool cond_80424 = sle64(last_res_73832, gtid_73669);
        int64_t defunc_0_f_res_80425;
        
        if (cond_80424) {
            defunc_0_f_res_80425 = (int64_t) 0;
        } else {
            int64_t i_80426 = add64(gtid_73669, max_res_79968);
            int64_t defunc_0_add_arg_80427 =
                    ((int64_t *) mem_75852.mem)[i_80426];
            int64_t defunc_1_add_res_80428 = add64((int64_t) 1,
                                                   defunc_0_add_arg_80427);
            
            defunc_0_f_res_80425 = defunc_1_add_res_80428;
        }
        
        int64_t binop_p_80429 = sub64(defunc_0_f_res_80425, min_res_79903);
        float defunc_0_f_res_80430 = sitofp_i64_f32(binop_p_80429);
        float abs_res_80431 = (float) fabs(defunc_0_f_res_80430);
        float tmp1_80432 = abs_res_80431 / defunc_1_f_res_79987;
        float x_80433 = tmp1_80432 * tmp1_80432;
        float y_80434 = tmp1_80432 * x_80433;
        float tmp2_80435 = 1.0F - y_80434;
        float x_80436 = tmp2_80435 * tmp2_80435;
        float tmp3_80437 = tmp2_80435 * x_80436;
        float tmp4_80438 = x_80423 * tmp3_80437;
        float defunc_1_f_res_80439 = defunc_0_f_res_80430 * tmp4_80438;
        float defunc_1_f_res_80440 = defunc_0_f_res_80430 *
              defunc_1_f_res_80439;
        
        // save map-out results
        {
            ((float *) mem_79988.mem)[gtid_73669] = defunc_1_f_res_80439;
            ((float *) mem_79989.mem)[gtid_73669] = tmp4_80438;
        }
        // Load accum params
        {
            x_80414 = local_acc_80478;
        }
        // Load next params
        {
            x_80415 = tmp4_80438;
        }
        // Red body
        {
            float defunc_1_op_res_80416 = x_80414 + x_80415;
            
            local_acc_80478 = defunc_1_op_res_80416;
        }
        // Load accum params
        {
            x_80417 = local_acc_80479;
        }
        // Load next params
        {
            x_80418 = defunc_1_f_res_80439;
        }
        // Red body
        {
            float defunc_1_op_res_80419 = x_80417 + x_80418;
            
            local_acc_80479 = defunc_1_op_res_80419;
        }
        // Load accum params
        {
            x_80420 = local_acc_80480;
        }
        // Load next params
        {
            x_80421 = defunc_1_f_res_80440;
        }
        // Red body
        {
            float defunc_1_op_res_80422 = x_80420 + x_80421;
            
            local_acc_80480 = defunc_1_op_res_80422;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_80471.mem)[flat_tid_73668] =
        local_acc_80478;
    ((float *) reduce_stage_1_tid_res_arr_mem_80473.mem)[flat_tid_73668] =
        local_acc_80479;
    ((float *) reduce_stage_1_tid_res_arr_mem_80475.mem)[flat_tid_73668] =
        local_acc_80480;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81928_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81928_end -
                 futhark_mc_segred_stage_1_parloop_81928_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81928_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81928_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81928_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81923(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73668 = tid;
    int num_tasks_80470 = info.nsubtasks;
    struct futhark_mc_task_81922 *futhark_mc_task_81922 =
                                 (struct futhark_mc_task_81922 *) args;
    struct futhark_context *ctx = futhark_mc_task_81922->ctx;
    uint64_t futhark_mc_segred_task_81923_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81923_start = get_wall_time();
    
    int64_t last_res_73832 = futhark_mc_task_81922->free_last_res_73832;
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_task_81922->free_mem_75852, .size =
                                 0, .references =NULL};
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_task_81922->free_mem_75858, .size =
                                 0, .references =NULL};
    int64_t min_res_79903 = futhark_mc_task_81922->free_min_res_79903;
    int64_t max_res_79968 = futhark_mc_task_81922->free_max_res_79968;
    float defunc_1_f_res_79987 =
          futhark_mc_task_81922->free_defunc_1_f_res_79987;
    float defunc_2_reduce_res_79990 =
          *futhark_mc_task_81922->retval_defunc_2_reduce_res_79990;
    float defunc_2_reduce_res_79991 =
          *futhark_mc_task_81922->retval_defunc_2_reduce_res_79991;
    float defunc_2_reduce_res_79992 =
          *futhark_mc_task_81922->retval_defunc_2_reduce_res_79992;
    struct memblock mem_79988 = {.desc ="mem_79988", .mem =
                                 futhark_mc_task_81922->retval_mem_79988,
                                 .size =0, .references =NULL};
    struct memblock mem_79989 = {.desc ="mem_79989", .mem =
                                 futhark_mc_task_81922->retval_mem_79989,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_80471_cached_sizze_81924 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80471 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80473_cached_sizze_81925 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80473 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80475_cached_sizze_81926 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80475 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_80471_cached_sizze_81924 <
        (size_t) ((int64_t) 4 * num_tasks_80470)) {
        reduce_stage_1_tid_res_arr_mem_80471 =
            realloc(reduce_stage_1_tid_res_arr_mem_80471, (int64_t) 4 *
                    num_tasks_80470);
        reduce_stage_1_tid_res_arr_mem_80471_cached_sizze_81924 = (int64_t) 4 *
            num_tasks_80470;
    }
    if (reduce_stage_1_tid_res_arr_mem_80473_cached_sizze_81925 <
        (size_t) ((int64_t) 4 * num_tasks_80470)) {
        reduce_stage_1_tid_res_arr_mem_80473 =
            realloc(reduce_stage_1_tid_res_arr_mem_80473, (int64_t) 4 *
                    num_tasks_80470);
        reduce_stage_1_tid_res_arr_mem_80473_cached_sizze_81925 = (int64_t) 4 *
            num_tasks_80470;
    }
    if (reduce_stage_1_tid_res_arr_mem_80475_cached_sizze_81926 <
        (size_t) ((int64_t) 4 * num_tasks_80470)) {
        reduce_stage_1_tid_res_arr_mem_80475 =
            realloc(reduce_stage_1_tid_res_arr_mem_80475, (int64_t) 4 *
                    num_tasks_80470);
        reduce_stage_1_tid_res_arr_mem_80475_cached_sizze_81926 = (int64_t) 4 *
            num_tasks_80470;
    }
    
    int64_t iter_80477;
    struct futhark_mc_segred_stage_1_parloop_struct_81927
    futhark_mc_segred_stage_1_parloop_struct_81927;
    
    futhark_mc_segred_stage_1_parloop_struct_81927.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_last_res_73832 =
        last_res_73832;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_mem_75852 =
        mem_75852.mem;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_mem_75858 =
        mem_75858.mem;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_min_res_79903 =
        min_res_79903;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_max_res_79968 =
        max_res_79968;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_defunc_1_f_res_79987 =
        defunc_1_f_res_79987;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_mem_79988 =
        mem_79988.mem;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_mem_79989 =
        mem_79989.mem;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_reduce_stage_1_tid_res_arr_mem_80471 =
        reduce_stage_1_tid_res_arr_mem_80471;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_reduce_stage_1_tid_res_arr_mem_80473 =
        reduce_stage_1_tid_res_arr_mem_80473;
    futhark_mc_segred_stage_1_parloop_struct_81927.free_reduce_stage_1_tid_res_arr_mem_80475 =
        reduce_stage_1_tid_res_arr_mem_80475;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81928_task;
    
    futhark_mc_segred_stage_1_parloop_81928_task.name =
        "futhark_mc_segred_stage_1_parloop_81928";
    futhark_mc_segred_stage_1_parloop_81928_task.fn =
        futhark_mc_segred_stage_1_parloop_81928;
    futhark_mc_segred_stage_1_parloop_81928_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81927;
    futhark_mc_segred_stage_1_parloop_81928_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81928_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81928_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81928_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81928_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81928_task);
    
    if (futhark_mc_segred_stage_1_parloop_81928_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81928_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81928_total_end -
                 futhark_mc_segred_stage_1_parloop_81928_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81928_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81928_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81928_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_79990 = 0.0F;
        defunc_2_reduce_res_79991 = 0.0F;
        defunc_2_reduce_res_79992 = 0.0F;
    }
    
    float x_80481;
    float x_80482;
    float x_80484;
    float x_80485;
    float x_80487;
    float x_80488;
    
    for (int32_t i_80490 = 0; i_80490 < num_tasks_80470; i_80490++) {
        flat_tid_73668 = i_80490;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_80481 = defunc_2_reduce_res_79990;
            }
            // load next params
            {
                x_80482 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80471)[flat_tid_73668];
            }
            // red body
            {
                float defunc_1_op_res_80483 = x_80481 + x_80482;
                
                defunc_2_reduce_res_79990 = defunc_1_op_res_80483;
            }
            // load acc params
            {
                x_80484 = defunc_2_reduce_res_79991;
            }
            // load next params
            {
                x_80485 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80473)[flat_tid_73668];
            }
            // red body
            {
                float defunc_1_op_res_80486 = x_80484 + x_80485;
                
                defunc_2_reduce_res_79991 = defunc_1_op_res_80486;
            }
            // load acc params
            {
                x_80487 = defunc_2_reduce_res_79992;
            }
            // load next params
            {
                x_80488 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80475)[flat_tid_73668];
            }
            // red body
            {
                float defunc_1_op_res_80489 = x_80487 + x_80488;
                
                defunc_2_reduce_res_79992 = defunc_1_op_res_80489;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_80471);
    free(reduce_stage_1_tid_res_arr_mem_80473);
    free(reduce_stage_1_tid_res_arr_mem_80475);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81923_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81923_end -
                 futhark_mc_segred_task_81923_start;
        
        ctx->futhark_mc_segred_task_81923_runs[tid]++;
        ctx->futhark_mc_segred_task_81923_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81923_iter[tid] += iterations;
    }
    *futhark_mc_task_81922->retval_defunc_2_reduce_res_79990 =
        defunc_2_reduce_res_79990;
    *futhark_mc_task_81922->retval_defunc_2_reduce_res_79991 =
        defunc_2_reduce_res_79991;
    *futhark_mc_task_81922->retval_defunc_2_reduce_res_79992 =
        defunc_2_reduce_res_79992;
    futhark_mc_task_81922->retval_mem_79988 = mem_79988.mem;
    futhark_mc_task_81922->retval_mem_79989 = mem_79989.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81929 {
    struct futhark_context *ctx;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75849;
    int64_t free_max_res_79968;
    unsigned char *free_mem_79988;
    unsigned char *free_mem_79989;
    float free_a11_80026;
    float free_b11_80028;
    float free_c11_80029;
    float *retval_defunc_2_reduce_res_80030;
    float *retval_defunc_2_reduce_res_80031;
};
struct futhark_mc_segred_stage_1_parloop_struct_81933 {
    struct futhark_context *ctx;
    int64_t free_last_res_73832;
    unsigned char *free_mem_75849;
    int64_t free_max_res_79968;
    unsigned char *free_mem_79988;
    unsigned char *free_mem_79989;
    float free_a11_80026;
    float free_b11_80028;
    float free_c11_80029;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80492;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80494;
};
static int futhark_mc_segred_stage_1_parloop_81934(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73670, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81933
    *futhark_mc_segred_stage_1_parloop_struct_81933 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81933 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81933->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81934_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81934_start = get_wall_time();
    
    int64_t last_res_73832 =
            futhark_mc_segred_stage_1_parloop_struct_81933->free_last_res_73832;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81933->free_mem_75849,
                                 .size =0, .references =NULL};
    int64_t max_res_79968 =
            futhark_mc_segred_stage_1_parloop_struct_81933->free_max_res_79968;
    struct memblock mem_79988 = {.desc ="mem_79988", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81933->free_mem_79988,
                                 .size =0, .references =NULL};
    struct memblock mem_79989 = {.desc ="mem_79989", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81933->free_mem_79989,
                                 .size =0, .references =NULL};
    float a11_80026 =
          futhark_mc_segred_stage_1_parloop_struct_81933->free_a11_80026;
    float b11_80028 =
          futhark_mc_segred_stage_1_parloop_struct_81933->free_b11_80028;
    float c11_80029 =
          futhark_mc_segred_stage_1_parloop_struct_81933->free_c11_80029;
    struct memblock reduce_stage_1_tid_res_arr_mem_80492 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80492",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81933->free_reduce_stage_1_tid_res_arr_mem_80492,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80494 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80494",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81933->free_reduce_stage_1_tid_res_arr_mem_80494,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80496 = start;
    float x_80441;
    float x_80442;
    float x_80444;
    float x_80445;
    float local_acc_80497 = 0.0F;
    float local_acc_80498 = 0.0F;
    
    for (; iter_80496 < end; iter_80496++) {
        int64_t gtid_73671 = iter_80496;
        float x_80447 = ((float *) mem_79989.mem)[gtid_73671];
        float x_80448 = ((float *) mem_79988.mem)[gtid_73671];
        bool cond_80449 = sle64(last_res_73832, gtid_73671);
        float defunc_0_f_res_80450;
        
        if (cond_80449) {
            defunc_0_f_res_80450 = 0.0F;
        } else {
            int64_t i_80451 = add64(gtid_73671, max_res_79968);
            float defunc_0_add_arg_80452 = ((float *) mem_75849.mem)[i_80451];
            
            defunc_0_f_res_80450 = defunc_0_add_arg_80452;
        }
        
        float x_80453 = a11_80026 * x_80447;
        float y_80454 = b11_80028 * x_80448;
        float x_80455 = x_80453 + y_80454;
        float defunc_9_fit_fun_res_80456 = defunc_0_f_res_80450 * x_80455;
        float x_80457 = b11_80028 * x_80447;
        float y_80458 = c11_80029 * x_80448;
        float x_80459 = x_80457 + y_80458;
        float defunc_9_slope_fun_res_80460 = defunc_0_f_res_80450 * x_80459;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_80441 = local_acc_80497;
        }
        // Load next params
        {
            x_80442 = defunc_9_fit_fun_res_80456;
        }
        // Red body
        {
            float defunc_1_op_res_80443 = x_80441 + x_80442;
            
            local_acc_80497 = defunc_1_op_res_80443;
        }
        // Load accum params
        {
            x_80444 = local_acc_80498;
        }
        // Load next params
        {
            x_80445 = defunc_9_slope_fun_res_80460;
        }
        // Red body
        {
            float defunc_1_op_res_80446 = x_80444 + x_80445;
            
            local_acc_80498 = defunc_1_op_res_80446;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_80492.mem)[flat_tid_73670] =
        local_acc_80497;
    ((float *) reduce_stage_1_tid_res_arr_mem_80494.mem)[flat_tid_73670] =
        local_acc_80498;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81934_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81934_end -
                 futhark_mc_segred_stage_1_parloop_81934_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81934_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81934_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81934_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81930(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73670 = tid;
    int num_tasks_80491 = info.nsubtasks;
    struct futhark_mc_task_81929 *futhark_mc_task_81929 =
                                 (struct futhark_mc_task_81929 *) args;
    struct futhark_context *ctx = futhark_mc_task_81929->ctx;
    uint64_t futhark_mc_segred_task_81930_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81930_start = get_wall_time();
    
    int64_t last_res_73832 = futhark_mc_task_81929->free_last_res_73832;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_task_81929->free_mem_75849, .size =
                                 0, .references =NULL};
    int64_t max_res_79968 = futhark_mc_task_81929->free_max_res_79968;
    struct memblock mem_79988 = {.desc ="mem_79988", .mem =
                                 futhark_mc_task_81929->free_mem_79988, .size =
                                 0, .references =NULL};
    struct memblock mem_79989 = {.desc ="mem_79989", .mem =
                                 futhark_mc_task_81929->free_mem_79989, .size =
                                 0, .references =NULL};
    float a11_80026 = futhark_mc_task_81929->free_a11_80026;
    float b11_80028 = futhark_mc_task_81929->free_b11_80028;
    float c11_80029 = futhark_mc_task_81929->free_c11_80029;
    float defunc_2_reduce_res_80030 =
          *futhark_mc_task_81929->retval_defunc_2_reduce_res_80030;
    float defunc_2_reduce_res_80031 =
          *futhark_mc_task_81929->retval_defunc_2_reduce_res_80031;
    size_t reduce_stage_1_tid_res_arr_mem_80492_cached_sizze_81931 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80492 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80494_cached_sizze_81932 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80494 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_80492_cached_sizze_81931 <
        (size_t) ((int64_t) 4 * num_tasks_80491)) {
        reduce_stage_1_tid_res_arr_mem_80492 =
            realloc(reduce_stage_1_tid_res_arr_mem_80492, (int64_t) 4 *
                    num_tasks_80491);
        reduce_stage_1_tid_res_arr_mem_80492_cached_sizze_81931 = (int64_t) 4 *
            num_tasks_80491;
    }
    if (reduce_stage_1_tid_res_arr_mem_80494_cached_sizze_81932 <
        (size_t) ((int64_t) 4 * num_tasks_80491)) {
        reduce_stage_1_tid_res_arr_mem_80494 =
            realloc(reduce_stage_1_tid_res_arr_mem_80494, (int64_t) 4 *
                    num_tasks_80491);
        reduce_stage_1_tid_res_arr_mem_80494_cached_sizze_81932 = (int64_t) 4 *
            num_tasks_80491;
    }
    
    int64_t iter_80496;
    struct futhark_mc_segred_stage_1_parloop_struct_81933
    futhark_mc_segred_stage_1_parloop_struct_81933;
    
    futhark_mc_segred_stage_1_parloop_struct_81933.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_last_res_73832 =
        last_res_73832;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_mem_75849 =
        mem_75849.mem;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_max_res_79968 =
        max_res_79968;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_mem_79988 =
        mem_79988.mem;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_mem_79989 =
        mem_79989.mem;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_a11_80026 = a11_80026;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_b11_80028 = b11_80028;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_c11_80029 = c11_80029;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_reduce_stage_1_tid_res_arr_mem_80492 =
        reduce_stage_1_tid_res_arr_mem_80492;
    futhark_mc_segred_stage_1_parloop_struct_81933.free_reduce_stage_1_tid_res_arr_mem_80494 =
        reduce_stage_1_tid_res_arr_mem_80494;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81934_task;
    
    futhark_mc_segred_stage_1_parloop_81934_task.name =
        "futhark_mc_segred_stage_1_parloop_81934";
    futhark_mc_segred_stage_1_parloop_81934_task.fn =
        futhark_mc_segred_stage_1_parloop_81934;
    futhark_mc_segred_stage_1_parloop_81934_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81933;
    futhark_mc_segred_stage_1_parloop_81934_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81934_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81934_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81934_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81934_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81934_task);
    
    if (futhark_mc_segred_stage_1_parloop_81934_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81934_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81934_total_end -
                 futhark_mc_segred_stage_1_parloop_81934_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81934_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81934_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81934_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80030 = 0.0F;
        defunc_2_reduce_res_80031 = 0.0F;
    }
    
    float x_80499;
    float x_80500;
    float x_80502;
    float x_80503;
    
    for (int32_t i_80505 = 0; i_80505 < num_tasks_80491; i_80505++) {
        flat_tid_73670 = i_80505;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_80499 = defunc_2_reduce_res_80030;
            }
            // load next params
            {
                x_80500 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80492)[flat_tid_73670];
            }
            // red body
            {
                float defunc_1_op_res_80501 = x_80499 + x_80500;
                
                defunc_2_reduce_res_80030 = defunc_1_op_res_80501;
            }
            // load acc params
            {
                x_80502 = defunc_2_reduce_res_80031;
            }
            // load next params
            {
                x_80503 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80494)[flat_tid_73670];
            }
            // red body
            {
                float defunc_1_op_res_80504 = x_80502 + x_80503;
                
                defunc_2_reduce_res_80031 = defunc_1_op_res_80504;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_80492);
    free(reduce_stage_1_tid_res_arr_mem_80494);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81930_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81930_end -
                 futhark_mc_segred_task_81930_start;
        
        ctx->futhark_mc_segred_task_81930_runs[tid]++;
        ctx->futhark_mc_segred_task_81930_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81930_iter[tid] += iterations;
    }
    *futhark_mc_task_81929->retval_defunc_2_reduce_res_80030 =
        defunc_2_reduce_res_80030;
    *futhark_mc_task_81929->retval_defunc_2_reduce_res_80031 =
        defunc_2_reduce_res_80031;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81919(void *args, int64_t start,
                                           int64_t end, int flat_tid_73666,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81918
    *futhark_mc_segmap_parloop_struct_81918 =
    (struct futhark_mc_segmap_parloop_struct_81918 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81918->ctx;
    uint64_t futhark_mc_segmap_parloop_81919_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81919_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81918->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81918->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81918->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81918->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81918->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81918->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81918->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81918->free_loop_cond_70258;
    int64_t last_res_73832 =
            futhark_mc_segmap_parloop_struct_81918->free_last_res_73832;
    int64_t min_arg_73847 =
            futhark_mc_segmap_parloop_struct_81918->free_min_arg_73847;
    int64_t min_arg_73848 =
            futhark_mc_segmap_parloop_struct_81918->free_min_arg_73848;
    int64_t min_res_73849 =
            futhark_mc_segmap_parloop_struct_81918->free_min_res_73849;
    float max_res_73853 =
          futhark_mc_segmap_parloop_struct_81918->free_max_res_73853;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75849,
                                 .size =0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75852,
                                 .size =0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75855,
                                 .size =0, .references =NULL};
    int64_t bytes_75857 =
            futhark_mc_segmap_parloop_struct_81918->free_bytes_75857;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75858,
                                 .size =0, .references =NULL};
    struct memblock mem_75897 = {.desc ="mem_75897", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75897,
                                 .size =0, .references =NULL};
    struct memblock mem_75900 = {.desc ="mem_75900", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_75900,
                                 .size =0, .references =NULL};
    size_t mem_79988_cached_sizze_81920 = 0;
    unsigned char *mem_79988 = NULL;
    size_t mem_79989_cached_sizze_81921 = 0;
    unsigned char *mem_79989 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80358 = start;
    
    if (mem_79988_cached_sizze_81920 < (size_t) bytes_75857) {
        mem_79988 = realloc(mem_79988, bytes_75857);
        mem_79988_cached_sizze_81920 = bytes_75857;
    }
    if (mem_79989_cached_sizze_81921 < (size_t) bytes_75857) {
        mem_79989 = realloc(mem_79989, bytes_75857);
        mem_79989_cached_sizze_81921 = bytes_75857;
    }
    for (; iter_80358 < end; iter_80358++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80461 = n_m_70241;
        int64_t gtid_73667 = iter_80358;
        int64_t remnant_80462 = iter_80358 - gtid_73667;
        int64_t min_arg_79902 = mul64(jump_70237, gtid_73667);
        int64_t min_res_79903 = smin64(i_70247, min_arg_79902);
        int64_t defunc_0_g_res_79904 = add64((int64_t) 1, min_res_79903);
        bool init_idx_79905;
        int64_t init_idx_79906;
        int64_t init_idx_79907;
        bool loop_while_80359;
        int64_t low_80360;
        int64_t high_80361;
        
        loop_while_80359 = x_70248;
        low_80360 = (int64_t) 0;
        high_80361 = i_70247;
        while (loop_while_80359) {
            int64_t x_80362 = add64(low_80360, high_80361);
            int64_t mid_80363 = sdiv64(x_80362, (int64_t) 2);
            bool x_80364 = sle64((int64_t) 0, mid_80363);
            bool y_80365 = slt64(mid_80363, n_70233);
            bool bounds_check_80366 = x_80364 && y_80365;
            bool index_certs_80367;
            
            if (!bounds_check_80366) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_80363,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_80368 = ((int64_t *) mem_75855.mem)[mid_80363];
            bool cond_80369 = slt64(mid_id_80368, (int64_t) 0);
            int64_t mid_idx_80370;
            
            if (cond_80369) {
                mid_idx_80370 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_80370 = mid_id_80368;
            }
            
            bool cond_80371 = sle64(defunc_0_g_res_79904, mid_idx_80370);
            int64_t loopres_80372;
            int64_t loopres_80373;
            
            if (cond_80371) {
                int64_t loopres_t_res_80374 = sub64(mid_80363, (int64_t) 1);
                
                loopres_80372 = low_80360;
                loopres_80373 = loopres_t_res_80374;
            } else {
                int64_t loopres_f_res_80375 = add64((int64_t) 1, mid_80363);
                
                loopres_80372 = loopres_f_res_80375;
                loopres_80373 = high_80361;
            }
            
            bool loop_cond_80376 = sle64(loopres_80372, loopres_80373);
            bool loop_while_tmp_80463 = loop_cond_80376;
            int64_t low_tmp_80464 = loopres_80372;
            int64_t high_tmp_80465 = loopres_80373;
            
            loop_while_80359 = loop_while_tmp_80463;
            low_80360 = low_tmp_80464;
            high_80361 = high_tmp_80465;
        }
        init_idx_79905 = loop_while_80359;
        init_idx_79906 = low_80360;
        init_idx_79907 = high_80361;
        
        bool idx_79926;
        int64_t idx_79927;
        int64_t idx_79928;
        int64_t idx_79929;
        bool loop_while_80377;
        int64_t l_idx_80378;
        int64_t r_idx_80379;
        int64_t span_80380;
        
        loop_while_80377 = loop_cond_70258;
        l_idx_80378 = init_idx_79906;
        r_idx_80379 = init_idx_79906;
        span_80380 = (int64_t) 1;
        while (loop_while_80377) {
            int64_t max_arg_80381 = sub64(l_idx_80378, (int64_t) 1);
            int64_t max_res_80382 = smax64((int64_t) 0, max_arg_80381);
            int64_t min_arg_80383 = add64((int64_t) 1, r_idx_80379);
            int64_t min_res_80384 = smin64(min_arg_73847, min_arg_80383);
            bool x_80385 = sle64((int64_t) 0, max_res_80382);
            bool y_80386 = slt64(max_res_80382, n_70233);
            bool bounds_check_80387 = x_80385 && y_80386;
            bool index_certs_80388;
            
            if (!bounds_check_80387) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80382,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80389 = ((int64_t *) mem_75855.mem)[max_res_80382];
            int64_t abs_arg_80390 = sub64(x_80389, defunc_0_g_res_79904);
            int64_t abs_res_80391 = abs64(abs_arg_80390);
            bool x_80392 = sle64((int64_t) 0, min_res_80384);
            bool y_80393 = slt64(min_res_80384, n_70233);
            bool bounds_check_80394 = x_80392 && y_80393;
            bool index_certs_80395;
            
            if (!bounds_check_80394) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_80384,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80396 = ((int64_t *) mem_75855.mem)[min_res_80384];
            int64_t abs_arg_80397 = sub64(x_80396, defunc_0_g_res_79904);
            int64_t abs_res_80398 = abs64(abs_arg_80397);
            bool cond_80399 = max_res_80382 == l_idx_80378;
            int64_t loopres_80400;
            int64_t loopres_80401;
            int64_t loopres_80402;
            
            if (cond_80399) {
                loopres_80400 = l_idx_80378;
                loopres_80401 = r_idx_80379;
                loopres_80402 = min_res_70253;
            } else {
                bool cond_80403 = slt64(abs_res_80391, abs_res_80398);
                bool cond_f_res_80404 = min_res_80384 == r_idx_80379;
                bool x_80405 = !cond_80403;
                bool y_80406 = cond_f_res_80404 && x_80405;
                bool cond_80407 = cond_80403 || y_80406;
                int64_t loopres_f_res_80408;
                
                if (cond_80407) {
                    loopres_f_res_80408 = max_res_80382;
                } else {
                    loopres_f_res_80408 = l_idx_80378;
                }
                
                int64_t loopres_f_res_80409;
                
                if (cond_80407) {
                    loopres_f_res_80409 = r_idx_80379;
                } else {
                    loopres_f_res_80409 = min_res_80384;
                }
                
                int64_t loopres_f_res_80410;
                
                if (cond_80407) {
                    int64_t loopres_f_res_t_res_80411 = add64((int64_t) 1,
                                                              span_80380);
                    
                    loopres_f_res_80410 = loopres_f_res_t_res_80411;
                } else {
                    int64_t loopres_f_res_f_res_80412 = add64((int64_t) 1,
                                                              span_80380);
                    
                    loopres_f_res_80410 = loopres_f_res_f_res_80412;
                }
                loopres_80400 = loopres_f_res_80408;
                loopres_80401 = loopres_f_res_80409;
                loopres_80402 = loopres_f_res_80410;
            }
            
            bool loop_cond_80413 = slt64(loopres_80402, min_res_70253);
            bool loop_while_tmp_80466 = loop_cond_80413;
            int64_t l_idx_tmp_80467 = loopres_80400;
            int64_t r_idx_tmp_80468 = loopres_80401;
            int64_t span_tmp_80469 = loopres_80402;
            
            loop_while_80377 = loop_while_tmp_80466;
            l_idx_80378 = l_idx_tmp_80467;
            r_idx_80379 = r_idx_tmp_80468;
            span_80380 = span_tmp_80469;
        }
        idx_79926 = loop_while_80377;
        idx_79927 = l_idx_80378;
        idx_79928 = r_idx_80379;
        idx_79929 = span_80380;
        
        int64_t min_res_79967 = smin64(min_arg_73848, idx_79927);
        int64_t max_res_79968 = smax64((int64_t) 0, min_res_79967);
        int64_t x_79969 = add64(min_res_73849, max_res_79968);
        int64_t r_79970 = sub64(x_79969, (int64_t) 1);
        bool x_79971 = sle64((int64_t) 0, r_79970);
        bool y_79972 = slt64(r_79970, n_70233);
        bool bounds_check_79973 = x_79971 && y_79972;
        bool index_certs_79974;
        
        if (!bounds_check_79973) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_79970,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79975 = ((int64_t *) mem_75852.mem)[r_79970];
        int64_t abs_arg_79976 = sub64(x_79975, min_res_79903);
        int64_t abs_res_79977 = abs64(abs_arg_79976);
        bool x_79978 = sle64((int64_t) 0, max_res_79968);
        bool y_79979 = slt64(max_res_79968, n_70233);
        bool bounds_check_79980 = x_79978 && y_79979;
        bool index_certs_79981;
        
        if (!bounds_check_79980) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_79968,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_79982 = ((int64_t *) mem_75852.mem)[max_res_79968];
        int64_t abs_arg_79983 = sub64(x_79982, min_res_79903);
        int64_t abs_res_79984 = abs64(abs_arg_79983);
        int64_t max_res_79985 = smax64(abs_res_79977, abs_res_79984);
        float defunc_0_f_res_79986 = sitofp_i64_f32(max_res_79985);
        float defunc_1_f_res_79987 = max_res_73853 + defunc_0_f_res_79986;
        float defunc_2_reduce_res_79990;
        float defunc_2_reduce_res_79991;
        float defunc_2_reduce_res_79992;
        int64_t flat_tid_73668 = (int64_t) 0;
        int32_t num_tasks_80470;
        struct futhark_mc_task_81922 futhark_mc_task_81922;
        
        futhark_mc_task_81922.ctx = ctx;
        futhark_mc_task_81922.free_last_res_73832 = last_res_73832;
        futhark_mc_task_81922.free_mem_75852 = mem_75852.mem;
        futhark_mc_task_81922.free_mem_75858 = mem_75858.mem;
        futhark_mc_task_81922.free_min_res_79903 = min_res_79903;
        futhark_mc_task_81922.free_max_res_79968 = max_res_79968;
        futhark_mc_task_81922.free_defunc_1_f_res_79987 = defunc_1_f_res_79987;
        futhark_mc_task_81922.retval_defunc_2_reduce_res_79990 =
            &defunc_2_reduce_res_79990;
        futhark_mc_task_81922.retval_defunc_2_reduce_res_79991 =
            &defunc_2_reduce_res_79991;
        futhark_mc_task_81922.retval_defunc_2_reduce_res_79992 =
            &defunc_2_reduce_res_79992;
        futhark_mc_task_81922.retval_mem_79988 = mem_79988;
        futhark_mc_task_81922.retval_mem_79989 = mem_79989;
        
        struct scheduler_segop futhark_mc_task_81922_task;
        
        futhark_mc_task_81922_task.args = &futhark_mc_task_81922;
        futhark_mc_task_81922_task.top_level_fn = futhark_mc_segred_task_81923;
        futhark_mc_task_81922_task.name = "futhark_mc_segred_task_81923";
        futhark_mc_task_81922_task.iterations = q_70235;
        futhark_mc_task_81922_task.task_time =
            &ctx->futhark_mc_segred_task_81923_total_time;
        futhark_mc_task_81922_task.task_iter =
            &ctx->futhark_mc_segred_task_81923_total_iter;
        futhark_mc_task_81922_task.sched = STATIC;
        futhark_mc_task_81922_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81923_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81922_task);
        
        if (futhark_mc_segred_task_81923_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_80022 = defunc_2_reduce_res_79990 * defunc_2_reduce_res_79992;
        float y_80023 = defunc_2_reduce_res_79991 * defunc_2_reduce_res_79991;
        float y_80024 = x_80022 - y_80023;
        float det1_80025 = 1.0F / y_80024;
        float a11_80026 = defunc_2_reduce_res_79992 * det1_80025;
        float x_80027 = 0.0F - defunc_2_reduce_res_79991;
        float b11_80028 = det1_80025 * x_80027;
        float c11_80029 = defunc_2_reduce_res_79990 * det1_80025;
        float defunc_2_reduce_res_80030;
        float defunc_2_reduce_res_80031;
        int64_t flat_tid_73670 = (int64_t) 0;
        int32_t num_tasks_80491;
        struct futhark_mc_task_81929 futhark_mc_task_81929;
        
        futhark_mc_task_81929.ctx = ctx;
        futhark_mc_task_81929.free_last_res_73832 = last_res_73832;
        futhark_mc_task_81929.free_mem_75849 = mem_75849.mem;
        futhark_mc_task_81929.free_max_res_79968 = max_res_79968;
        futhark_mc_task_81929.free_mem_79988 = mem_79988;
        futhark_mc_task_81929.free_mem_79989 = mem_79989;
        futhark_mc_task_81929.free_a11_80026 = a11_80026;
        futhark_mc_task_81929.free_b11_80028 = b11_80028;
        futhark_mc_task_81929.free_c11_80029 = c11_80029;
        futhark_mc_task_81929.retval_defunc_2_reduce_res_80030 =
            &defunc_2_reduce_res_80030;
        futhark_mc_task_81929.retval_defunc_2_reduce_res_80031 =
            &defunc_2_reduce_res_80031;
        
        struct scheduler_segop futhark_mc_task_81929_task;
        
        futhark_mc_task_81929_task.args = &futhark_mc_task_81929;
        futhark_mc_task_81929_task.top_level_fn = futhark_mc_segred_task_81930;
        futhark_mc_task_81929_task.name = "futhark_mc_segred_task_81930";
        futhark_mc_task_81929_task.iterations = q_70235;
        futhark_mc_task_81929_task.task_time =
            &ctx->futhark_mc_segred_task_81930_total_time;
        futhark_mc_task_81929_task.task_iter =
            &ctx->futhark_mc_segred_task_81930_total_iter;
        futhark_mc_task_81929_task.sched = STATIC;
        futhark_mc_task_81929_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81930_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81929_task);
        
        if (futhark_mc_segred_task_81930_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75897.mem)[gtid_73667] = defunc_2_reduce_res_80030;
        ((float *) mem_75900.mem)[gtid_73667] = defunc_2_reduce_res_80031;
    }
    
  cleanup:
    { }
    free(mem_79988);
    free(mem_79989);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81919_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81919_end -
                 futhark_mc_segmap_parloop_81919_start;
        
        ctx->futhark_mc_segmap_parloop_81919_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81919_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81919_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81917(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73666 = tid;
    int num_tasks_80237 = info.nsubtasks;
    struct futhark_mc_task_81911 *futhark_mc_task_81911 =
                                 (struct futhark_mc_task_81911 *) args;
    struct futhark_context *ctx = futhark_mc_task_81911->ctx;
    uint64_t futhark_mc_segmap_nested_task_81917_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81917_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81911->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81911->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81911->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81911->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81911->free_i_70247;
    bool x_70248 = futhark_mc_task_81911->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81911->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81911->free_loop_cond_70258;
    int64_t last_res_73832 = futhark_mc_task_81911->free_last_res_73832;
    int64_t min_arg_73847 = futhark_mc_task_81911->free_min_arg_73847;
    int64_t min_arg_73848 = futhark_mc_task_81911->free_min_arg_73848;
    int64_t min_res_73849 = futhark_mc_task_81911->free_min_res_73849;
    float max_res_73853 = futhark_mc_task_81911->free_max_res_73853;
    struct memblock mem_75849 = {.desc ="mem_75849", .mem =
                                 futhark_mc_task_81911->free_mem_75849, .size =
                                 0, .references =NULL};
    struct memblock mem_75852 = {.desc ="mem_75852", .mem =
                                 futhark_mc_task_81911->free_mem_75852, .size =
                                 0, .references =NULL};
    struct memblock mem_75855 = {.desc ="mem_75855", .mem =
                                 futhark_mc_task_81911->free_mem_75855, .size =
                                 0, .references =NULL};
    int64_t bytes_75857 = futhark_mc_task_81911->free_bytes_75857;
    struct memblock mem_75858 = {.desc ="mem_75858", .mem =
                                 futhark_mc_task_81911->free_mem_75858, .size =
                                 0, .references =NULL};
    struct memblock mem_75897 = {.desc ="mem_75897", .mem =
                                 futhark_mc_task_81911->free_mem_75897, .size =
                                 0, .references =NULL};
    struct memblock mem_75900 = {.desc ="mem_75900", .mem =
                                 futhark_mc_task_81911->free_mem_75900, .size =
                                 0, .references =NULL};
    int64_t iter_80358;
    struct futhark_mc_segmap_parloop_struct_81918
    futhark_mc_segmap_parloop_struct_81918;
    
    futhark_mc_segmap_parloop_struct_81918.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81918.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81918.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81918.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81918.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81918.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81918.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81918.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81918.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81918.free_last_res_73832 = last_res_73832;
    futhark_mc_segmap_parloop_struct_81918.free_min_arg_73847 = min_arg_73847;
    futhark_mc_segmap_parloop_struct_81918.free_min_arg_73848 = min_arg_73848;
    futhark_mc_segmap_parloop_struct_81918.free_min_res_73849 = min_res_73849;
    futhark_mc_segmap_parloop_struct_81918.free_max_res_73853 = max_res_73853;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75849 = mem_75849.mem;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75852 = mem_75852.mem;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75855 = mem_75855.mem;
    futhark_mc_segmap_parloop_struct_81918.free_bytes_75857 = bytes_75857;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75858 = mem_75858.mem;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75897 = mem_75897.mem;
    futhark_mc_segmap_parloop_struct_81918.free_mem_75900 = mem_75900.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81919_task;
    
    futhark_mc_segmap_parloop_81919_task.name =
        "futhark_mc_segmap_parloop_81919";
    futhark_mc_segmap_parloop_81919_task.fn = futhark_mc_segmap_parloop_81919;
    futhark_mc_segmap_parloop_81919_task.args =
        &futhark_mc_segmap_parloop_struct_81918;
    futhark_mc_segmap_parloop_81919_task.iterations = iterations;
    futhark_mc_segmap_parloop_81919_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81919_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81919_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81919_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81919_task);
    
    if (futhark_mc_segmap_parloop_81919_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81919_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81919_total_end -
                 futhark_mc_segmap_parloop_81919_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81917_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81917_end -
                 futhark_mc_segmap_nested_task_81917_start;
        
        ctx->futhark_mc_segmap_nested_task_81917_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81917_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81917_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81884(void *args, int64_t start,
                                           int64_t end, int flat_tid_73654,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81883
    *futhark_mc_segmap_parloop_struct_81883 =
    (struct futhark_mc_segmap_parloop_struct_81883 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81883->ctx;
    uint64_t futhark_mc_segmap_parloop_81884_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81884_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81883->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81883->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81883->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81883->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81883->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81883->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81883->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81883->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81883->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81883->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81883->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75845 =
            futhark_mc_segmap_parloop_struct_81883->free_bytes_75845;
    int64_t bytes_75848 =
            futhark_mc_segmap_parloop_struct_81883->free_bytes_75848;
    int64_t bytes_75857 =
            futhark_mc_segmap_parloop_struct_81883->free_bytes_75857;
    int64_t bytes_75896 =
            futhark_mc_segmap_parloop_struct_81883->free_bytes_75896;
    struct memblock mem_76039 = {.desc ="mem_76039", .mem =
                                 futhark_mc_segmap_parloop_struct_81883->free_mem_76039,
                                 .size =0, .references =NULL};
    struct memblock mem_76043 = {.desc ="mem_76043", .mem =
                                 futhark_mc_segmap_parloop_struct_81883->free_mem_76043,
                                 .size =0, .references =NULL};
    size_t mem_75846_cached_sizze_81885 = 0;
    unsigned char *mem_75846 = NULL;
    size_t mem_75849_cached_sizze_81886 = 0;
    unsigned char *mem_75849 = NULL;
    size_t mem_75852_cached_sizze_81887 = 0;
    unsigned char *mem_75852 = NULL;
    size_t mem_75855_cached_sizze_81888 = 0;
    unsigned char *mem_75855 = NULL;
    size_t mem_75858_cached_sizze_81889 = 0;
    unsigned char *mem_75858 = NULL;
    size_t mem_75897_cached_sizze_81890 = 0;
    unsigned char *mem_75897 = NULL;
    size_t mem_75900_cached_sizze_81891 = 0;
    unsigned char *mem_75900 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79884 = start;
    
    if (mem_75846_cached_sizze_81885 < (size_t) bytes_75845) {
        mem_75846 = realloc(mem_75846, bytes_75845);
        mem_75846_cached_sizze_81885 = bytes_75845;
    }
    if (mem_75849_cached_sizze_81886 < (size_t) bytes_75848) {
        mem_75849 = realloc(mem_75849, bytes_75848);
        mem_75849_cached_sizze_81886 = bytes_75848;
    }
    if (mem_75852_cached_sizze_81887 < (size_t) bytes_75845) {
        mem_75852 = realloc(mem_75852, bytes_75845);
        mem_75852_cached_sizze_81887 = bytes_75845;
    }
    if (mem_75855_cached_sizze_81888 < (size_t) bytes_75845) {
        mem_75855 = realloc(mem_75855, bytes_75845);
        mem_75855_cached_sizze_81888 = bytes_75845;
    }
    if (mem_75858_cached_sizze_81889 < (size_t) bytes_75857) {
        mem_75858 = realloc(mem_75858, bytes_75857);
        mem_75858_cached_sizze_81889 = bytes_75857;
    }
    if (mem_75897_cached_sizze_81890 < (size_t) bytes_75896) {
        mem_75897 = realloc(mem_75897, bytes_75896);
        mem_75897_cached_sizze_81890 = bytes_75896;
    }
    if (mem_75900_cached_sizze_81891 < (size_t) bytes_75896) {
        mem_75900 = realloc(mem_75900, bytes_75896);
        mem_75900_cached_sizze_81891 = bytes_75896;
    }
    for (; iter_79884 < end; iter_79884++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80205 = m_70232;
        int64_t gtid_73655 = iter_79884;
        int64_t remnant_80206 = iter_79884 - gtid_73655;
        int64_t flat_tid_73656 = (int64_t) 0;
        int32_t num_tasks_80207;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81892 futhark_mc_task_81892;
        
        futhark_mc_task_81892.ctx = ctx;
        futhark_mc_task_81892.free_n_70233 = n_70233;
        futhark_mc_task_81892.free_gtid_73655 = gtid_73655;
        futhark_mc_task_81892.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81892.free_mem_75846 = mem_75846;
        
        struct scheduler_segop futhark_mc_task_81892_task;
        
        futhark_mc_task_81892_task.args = &futhark_mc_task_81892;
        futhark_mc_task_81892_task.top_level_fn = futhark_mc_segscan_task_81893;
        futhark_mc_task_81892_task.name = "futhark_mc_segscan_task_81893";
        futhark_mc_task_81892_task.iterations = n_70233;
        futhark_mc_task_81892_task.task_time =
            &ctx->futhark_mc_segscan_task_81893_total_time;
        futhark_mc_task_81892_task.task_iter =
            &ctx->futhark_mc_segscan_task_81893_total_iter;
        futhark_mc_task_81892_task.sched = STATIC;
        futhark_mc_task_81892_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81893_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81892_task);
        
        if (futhark_mc_segscan_task_81893_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_73832 = ((int64_t *) mem_75846)[i_70247];
        
        for (int64_t i_80221 = 0; i_80221 < n_70233; i_80221++) {
            ((float *) mem_75849)[i_80221] = 0.0F;
        }
        for (int64_t i_80222 = 0; i_80222 < n_70233; i_80222++) {
            ((int64_t *) mem_75852)[i_80222] = (int64_t) -1;
        }
        
        int64_t flat_tid_73658 = (int64_t) 0;
        int32_t num_tasks_80223;
        struct futhark_mc_task_81899 futhark_mc_task_81899;
        
        futhark_mc_task_81899.ctx = ctx;
        futhark_mc_task_81899.free_n_70233 = n_70233;
        futhark_mc_task_81899.free_gtid_73655 = gtid_73655;
        futhark_mc_task_81899.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81899.free_mem_75846 = mem_75846;
        futhark_mc_task_81899.free_mem_75849 = mem_75849;
        futhark_mc_task_81899.free_mem_75852 = mem_75852;
        
        struct scheduler_segop futhark_mc_task_81899_task;
        
        futhark_mc_task_81899_task.args = &futhark_mc_task_81899;
        futhark_mc_task_81899_task.top_level_fn = futhark_mc_segmap_task_81900;
        futhark_mc_task_81899_task.name = "futhark_mc_segmap_task_81900";
        futhark_mc_task_81899_task.iterations = n_70233;
        futhark_mc_task_81899_task.task_time =
            &ctx->futhark_mc_segmap_task_81900_total_time;
        futhark_mc_task_81899_task.task_iter =
            &ctx->futhark_mc_segmap_task_81900_total_iter;
        futhark_mc_task_81899_task.sched = STATIC;
        futhark_mc_task_81899_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81900_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81899_task);
        
        if (futhark_mc_segmap_task_81900_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73660 = (int64_t) 0;
        int32_t num_tasks_80229;
        struct futhark_mc_task_81903 futhark_mc_task_81903;
        
        futhark_mc_task_81903.ctx = ctx;
        futhark_mc_task_81903.free_n_70233 = n_70233;
        futhark_mc_task_81903.free_mem_75852 = mem_75852;
        futhark_mc_task_81903.free_mem_75855 = mem_75855;
        
        struct scheduler_segop futhark_mc_task_81903_task;
        
        futhark_mc_task_81903_task.args = &futhark_mc_task_81903;
        futhark_mc_task_81903_task.top_level_fn = futhark_mc_segmap_task_81904;
        futhark_mc_task_81903_task.name = "futhark_mc_segmap_task_81904";
        futhark_mc_task_81903_task.iterations = n_70233;
        futhark_mc_task_81903_task.task_time =
            &ctx->futhark_mc_segmap_task_81904_total_time;
        futhark_mc_task_81903_task.task_iter =
            &ctx->futhark_mc_segmap_task_81904_total_iter;
        futhark_mc_task_81903_task.sched = STATIC;
        futhark_mc_task_81903_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81904_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81903_task);
        
        if (futhark_mc_segmap_task_81904_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_73847 = sub64(last_res_73832, (int64_t) 1);
        int64_t min_arg_73848 = sub64(last_res_73832, min_res_70253);
        int64_t min_res_73849 = smin64(q_70235, last_res_73832);
        float i64_res_73850 = sitofp_i64_f32(last_res_73832);
        float x_73851 = i64_res_70259 - i64_res_73850;
        float max_arg_73852 = x_73851 / 2.0F;
        float max_res_73853 = fmax32(0.0F, max_arg_73852);
        int64_t flat_tid_73662 = (int64_t) 0;
        int32_t num_tasks_80233;
        struct futhark_mc_task_81907 futhark_mc_task_81907;
        
        futhark_mc_task_81907.ctx = ctx;
        futhark_mc_task_81907.free_q_70235 = q_70235;
        futhark_mc_task_81907.free_last_res_73832 = last_res_73832;
        futhark_mc_task_81907.free_mem_75858 = mem_75858;
        
        struct scheduler_segop futhark_mc_task_81907_task;
        
        futhark_mc_task_81907_task.args = &futhark_mc_task_81907;
        futhark_mc_task_81907_task.top_level_fn = futhark_mc_segmap_task_81908;
        futhark_mc_task_81907_task.name = "futhark_mc_segmap_task_81908";
        futhark_mc_task_81907_task.iterations = q_70235;
        futhark_mc_task_81907_task.task_time =
            &ctx->futhark_mc_segmap_task_81908_total_time;
        futhark_mc_task_81907_task.task_iter =
            &ctx->futhark_mc_segmap_task_81908_total_iter;
        futhark_mc_task_81907_task.sched = STATIC;
        futhark_mc_task_81907_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81908_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81907_task);
        
        if (futhark_mc_segmap_task_81908_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73664 = (int64_t) 0;
        int32_t num_tasks_80237;
        int64_t flat_tid_73666 = (int64_t) 0;
        struct futhark_mc_task_81911 futhark_mc_task_81911;
        
        futhark_mc_task_81911.ctx = ctx;
        futhark_mc_task_81911.free_n_70233 = n_70233;
        futhark_mc_task_81911.free_q_70235 = q_70235;
        futhark_mc_task_81911.free_jump_70237 = jump_70237;
        futhark_mc_task_81911.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81911.free_i_70247 = i_70247;
        futhark_mc_task_81911.free_x_70248 = x_70248;
        futhark_mc_task_81911.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81911.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81911.free_last_res_73832 = last_res_73832;
        futhark_mc_task_81911.free_min_arg_73847 = min_arg_73847;
        futhark_mc_task_81911.free_min_arg_73848 = min_arg_73848;
        futhark_mc_task_81911.free_min_res_73849 = min_res_73849;
        futhark_mc_task_81911.free_max_res_73853 = max_res_73853;
        futhark_mc_task_81911.free_mem_75849 = mem_75849;
        futhark_mc_task_81911.free_mem_75852 = mem_75852;
        futhark_mc_task_81911.free_mem_75855 = mem_75855;
        futhark_mc_task_81911.free_bytes_75857 = bytes_75857;
        futhark_mc_task_81911.free_mem_75858 = mem_75858;
        futhark_mc_task_81911.free_mem_75897 = mem_75897;
        futhark_mc_task_81911.free_mem_75900 = mem_75900;
        
        struct scheduler_segop futhark_mc_task_81911_task;
        
        futhark_mc_task_81911_task.args = &futhark_mc_task_81911;
        futhark_mc_task_81911_task.top_level_fn = futhark_mc_segmap_task_81912;
        futhark_mc_task_81911_task.name = "futhark_mc_segmap_task_81912";
        futhark_mc_task_81911_task.iterations = n_m_70241;
        futhark_mc_task_81911_task.task_time =
            &ctx->futhark_mc_segmap_task_81912_total_time;
        futhark_mc_task_81911_task.task_iter =
            &ctx->futhark_mc_segmap_task_81912_total_iter;
        futhark_mc_task_81911_task.sched = DYNAMIC;
        futhark_mc_task_81911_task.nested_fn =
            futhark_mc_segmap_nested_task_81917;
        
        int futhark_mc_segmap_task_81912_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81911_task);
        
        if (futhark_mc_segmap_task_81912_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76039.mem + gtid_73655 * n_m_70241 * (int64_t) 4,
                    mem_75897 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76043.mem + gtid_73655 * n_m_70241 * (int64_t) 4,
                    mem_75900 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75846);
    free(mem_75849);
    free(mem_75852);
    free(mem_75855);
    free(mem_75858);
    free(mem_75897);
    free(mem_75900);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81884_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81884_end -
                 futhark_mc_segmap_parloop_81884_start;
        
        ctx->futhark_mc_segmap_parloop_81884_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81884_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81884_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81882(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73654 = tid;
    int num_tasks_79669 = info.nsubtasks;
    struct futhark_mc_task_81869 *futhark_mc_task_81869 =
                                 (struct futhark_mc_task_81869 *) args;
    struct futhark_context *ctx = futhark_mc_task_81869->ctx;
    uint64_t futhark_mc_segmap_nested_task_81882_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81882_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81869->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81869->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81869->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81869->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81869->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81869->free_i_70247;
    bool x_70248 = futhark_mc_task_81869->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81869->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81869->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81869->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81869->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_75845 = futhark_mc_task_81869->free_bytes_75845;
    int64_t bytes_75848 = futhark_mc_task_81869->free_bytes_75848;
    int64_t bytes_75857 = futhark_mc_task_81869->free_bytes_75857;
    int64_t bytes_75896 = futhark_mc_task_81869->free_bytes_75896;
    struct memblock mem_76039 = {.desc ="mem_76039", .mem =
                                 futhark_mc_task_81869->free_mem_76039, .size =
                                 0, .references =NULL};
    struct memblock mem_76043 = {.desc ="mem_76043", .mem =
                                 futhark_mc_task_81869->free_mem_76043, .size =
                                 0, .references =NULL};
    int64_t iter_79884;
    struct futhark_mc_segmap_parloop_struct_81883
    futhark_mc_segmap_parloop_struct_81883;
    
    futhark_mc_segmap_parloop_struct_81883.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81883.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81883.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81883.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81883.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81883.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81883.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81883.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81883.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81883.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81883.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81883.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81883.free_bytes_75845 = bytes_75845;
    futhark_mc_segmap_parloop_struct_81883.free_bytes_75848 = bytes_75848;
    futhark_mc_segmap_parloop_struct_81883.free_bytes_75857 = bytes_75857;
    futhark_mc_segmap_parloop_struct_81883.free_bytes_75896 = bytes_75896;
    futhark_mc_segmap_parloop_struct_81883.free_mem_76039 = mem_76039.mem;
    futhark_mc_segmap_parloop_struct_81883.free_mem_76043 = mem_76043.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81884_task;
    
    futhark_mc_segmap_parloop_81884_task.name =
        "futhark_mc_segmap_parloop_81884";
    futhark_mc_segmap_parloop_81884_task.fn = futhark_mc_segmap_parloop_81884;
    futhark_mc_segmap_parloop_81884_task.args =
        &futhark_mc_segmap_parloop_struct_81883;
    futhark_mc_segmap_parloop_81884_task.iterations = iterations;
    futhark_mc_segmap_parloop_81884_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81884_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81884_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81884_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81884_task);
    
    if (futhark_mc_segmap_parloop_81884_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81884_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81884_total_end -
                 futhark_mc_segmap_parloop_81884_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81884_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81884_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81884_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81882_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81882_end -
                 futhark_mc_segmap_nested_task_81882_start;
        
        ctx->futhark_mc_segmap_nested_task_81882_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81882_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81882_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81935 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_76045;
    int64_t free_bytes_76048;
    int64_t free_bytes_76057;
    int64_t free_bytes_76132;
    unsigned char *free_mem_76305;
    unsigned char *free_mem_76309;
};
struct futhark_mc_segmap_parloop_struct_81937 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_76045;
    int64_t free_bytes_76048;
    int64_t free_bytes_76057;
    int64_t free_bytes_76132;
    unsigned char *free_mem_76305;
    unsigned char *free_mem_76309;
};
static int futhark_mc_segmap_parloop_81938(void *args, int64_t start,
                                           int64_t end, int flat_tid_74162,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81937
    *futhark_mc_segmap_parloop_struct_81937 =
    (struct futhark_mc_segmap_parloop_struct_81937 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81937->ctx;
    uint64_t futhark_mc_segmap_parloop_81938_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81938_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81937->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81937->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81937->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81937->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81937->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81937->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81937->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81937->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81937->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81937->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81937->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_76045 =
            futhark_mc_segmap_parloop_struct_81937->free_bytes_76045;
    int64_t bytes_76048 =
            futhark_mc_segmap_parloop_struct_81937->free_bytes_76048;
    int64_t bytes_76057 =
            futhark_mc_segmap_parloop_struct_81937->free_bytes_76057;
    int64_t bytes_76132 =
            futhark_mc_segmap_parloop_struct_81937->free_bytes_76132;
    struct memblock mem_76305 = {.desc ="mem_76305", .mem =
                                 futhark_mc_segmap_parloop_struct_81937->free_mem_76305,
                                 .size =0, .references =NULL};
    struct memblock mem_76309 = {.desc ="mem_76309", .mem =
                                 futhark_mc_segmap_parloop_struct_81937->free_mem_76309,
                                 .size =0, .references =NULL};
    size_t mem_76139_cached_sizze_81939 = 0;
    unsigned char *mem_76139 = NULL;
    size_t mem_76154_cached_sizze_81940 = 0;
    unsigned char *mem_76154 = NULL;
    size_t mem_76157_cached_sizze_81941 = 0;
    unsigned char *mem_76157 = NULL;
    size_t mem_76184_cached_sizze_81942 = 0;
    unsigned char *mem_76184 = NULL;
    size_t mem_76199_cached_sizze_81943 = 0;
    unsigned char *mem_76199 = NULL;
    size_t mem_76214_cached_sizze_81944 = 0;
    unsigned char *mem_76214 = NULL;
    size_t mem_76217_cached_sizze_81945 = 0;
    unsigned char *mem_76217 = NULL;
    size_t mem_76234_cached_sizze_81946 = 0;
    unsigned char *mem_76234 = NULL;
    size_t mem_76237_cached_sizze_81947 = 0;
    unsigned char *mem_76237 = NULL;
    size_t mem_76264_cached_sizze_81948 = 0;
    unsigned char *mem_76264 = NULL;
    size_t mem_76267_cached_sizze_81949 = 0;
    unsigned char *mem_76267 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80507 = start;
    
    if (mem_76139_cached_sizze_81939 < (size_t) bytes_76045) {
        mem_76139 = realloc(mem_76139, bytes_76045);
        mem_76139_cached_sizze_81939 = bytes_76045;
    }
    if (mem_76154_cached_sizze_81940 < (size_t) bytes_76048) {
        mem_76154 = realloc(mem_76154, bytes_76048);
        mem_76154_cached_sizze_81940 = bytes_76048;
    }
    if (mem_76157_cached_sizze_81941 < (size_t) bytes_76045) {
        mem_76157 = realloc(mem_76157, bytes_76045);
        mem_76157_cached_sizze_81941 = bytes_76045;
    }
    if (mem_76184_cached_sizze_81942 < (size_t) bytes_76045) {
        mem_76184 = realloc(mem_76184, bytes_76045);
        mem_76184_cached_sizze_81942 = bytes_76045;
    }
    if (mem_76199_cached_sizze_81943 < (size_t) bytes_76057) {
        mem_76199 = realloc(mem_76199, bytes_76057);
        mem_76199_cached_sizze_81943 = bytes_76057;
    }
    if (mem_76214_cached_sizze_81944 < (size_t) bytes_76132) {
        mem_76214 = realloc(mem_76214, bytes_76132);
        mem_76214_cached_sizze_81944 = bytes_76132;
    }
    if (mem_76217_cached_sizze_81945 < (size_t) bytes_76132) {
        mem_76217 = realloc(mem_76217, bytes_76132);
        mem_76217_cached_sizze_81945 = bytes_76132;
    }
    if (mem_76234_cached_sizze_81946 < (size_t) bytes_76057) {
        mem_76234 = realloc(mem_76234, bytes_76057);
        mem_76234_cached_sizze_81946 = bytes_76057;
    }
    if (mem_76237_cached_sizze_81947 < (size_t) bytes_76057) {
        mem_76237 = realloc(mem_76237, bytes_76057);
        mem_76237_cached_sizze_81947 = bytes_76057;
    }
    if (mem_76264_cached_sizze_81948 < (size_t) bytes_76057) {
        mem_76264 = realloc(mem_76264, bytes_76057);
        mem_76264_cached_sizze_81948 = bytes_76057;
    }
    if (mem_76267_cached_sizze_81949 < (size_t) bytes_76057) {
        mem_76267 = realloc(mem_76267, bytes_76057);
        mem_76267_cached_sizze_81949 = bytes_76057;
    }
    for (; iter_80507 < end; iter_80507++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80736 = m_70232;
        int64_t gtid_74163 = iter_80507;
        int64_t remnant_80737 = iter_80507 - gtid_74163;
        int64_t discard_75158;
        int64_t scanacc_80509 = (int64_t) 0;
        
        for (int64_t i_80508 = 0; i_80508 < n_70233; i_80508++) {
            float x_80511 = ((float *) Y_mem_75306.mem)[gtid_74163 * n_70233 +
                                                        i_80508];
            bool isnan_res_80512;
            
            isnan_res_80512 = futrts_isnan32(x_80511);
            
            bool defunc_0_p_res_80513 = !isnan_res_80512;
            int64_t defunc_0_f_res_80514 = btoi_bool_i64(defunc_0_p_res_80513);
            int64_t defunc_1_op_res_80515 = add64(defunc_0_f_res_80514,
                                                  scanacc_80509);
            
            ((int64_t *) mem_76139)[i_80508] = defunc_1_op_res_80515;
            
            int64_t scanacc_tmp_80738 = defunc_1_op_res_80515;
            
            scanacc_80509 = scanacc_tmp_80738;
        }
        discard_75158 = scanacc_80509;
        
        int64_t last_res_71291 = ((int64_t *) mem_76139)[i_70247];
        
        for (int64_t i_80740 = 0; i_80740 < n_70233; i_80740++) {
            ((float *) mem_76154)[i_80740] = 0.0F;
        }
        for (int64_t i_80741 = 0; i_80741 < n_70233; i_80741++) {
            ((int64_t *) mem_76157)[i_80741] = (int64_t) -1;
        }
        for (int64_t write_iter_80517 = 0; write_iter_80517 < n_70233;
             write_iter_80517++) {
            float write_iv_80520 = ((float *) Y_mem_75306.mem)[gtid_74163 *
                                                               n_70233 +
                                                               write_iter_80517];
            bool isnan_res_80521;
            
            isnan_res_80521 = futrts_isnan32(write_iv_80520);
            
            bool defunc_0_p_res_80522 = !isnan_res_80521;
            int64_t defunc_1_f_res_80523;
            
            if (defunc_0_p_res_80522) {
                int64_t write_iv_80524 =
                        ((int64_t *) mem_76139)[write_iter_80517];
                int64_t defunc_1_f_res_t_res_80525 = sub64(write_iv_80524,
                                                           (int64_t) 1);
                
                defunc_1_f_res_80523 = defunc_1_f_res_t_res_80525;
            } else {
                defunc_1_f_res_80523 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_80523) &&
                slt64(defunc_1_f_res_80523, n_70233)) {
                ((int64_t *) mem_76157)[defunc_1_f_res_80523] =
                    write_iter_80517;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_80523) &&
                slt64(defunc_1_f_res_80523, n_70233)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_76154 + defunc_1_f_res_80523 * (int64_t) 4,
                            Y_mem_75306.mem + (gtid_74163 * n_70233 +
                                               write_iter_80517) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_80529 = 0; i_80529 < n_70233; i_80529++) {
            int64_t x_80531 = ((int64_t *) mem_76157)[i_80529];
            int64_t defunc_0_f_res_80532 = add64((int64_t) 1, x_80531);
            
            ((int64_t *) mem_76184)[i_80529] = defunc_0_f_res_80532;
        }
        
        int64_t min_arg_71306 = sub64(last_res_71291, (int64_t) 1);
        int64_t min_arg_71307 = sub64(last_res_71291, min_res_70253);
        int64_t min_res_71308 = smin64(q_70235, last_res_71291);
        float i64_res_71309 = sitofp_i64_f32(last_res_71291);
        float x_71310 = i64_res_70259 - i64_res_71309;
        float max_arg_71311 = x_71310 / 2.0F;
        float max_res_71312 = fmax32(0.0F, max_arg_71311);
        
        for (int64_t i_80534 = 0; i_80534 < q_70235; i_80534++) {
            bool cond_80536 = sle64(last_res_71291, i_80534);
            float defunc_0_f_res_80537;
            
            if (cond_80536) {
                defunc_0_f_res_80537 = 0.0F;
            } else {
                defunc_0_f_res_80537 = 1.0F;
            }
            ((float *) mem_76199)[i_80534] = defunc_0_f_res_80537;
        }
        for (int64_t i_80539 = 0; i_80539 < n_m_70241; i_80539++) {
            int64_t min_arg_80542 = mul64(jump_70237, i_80539);
            int64_t min_res_80543 = smin64(i_70247, min_arg_80542);
            int64_t defunc_0_g_res_80544 = add64((int64_t) 1, min_res_80543);
            bool init_idx_80545;
            int64_t init_idx_80546;
            int64_t init_idx_80547;
            bool loop_while_80548;
            int64_t low_80549;
            int64_t high_80550;
            
            loop_while_80548 = x_70248;
            low_80549 = (int64_t) 0;
            high_80550 = i_70247;
            while (loop_while_80548) {
                int64_t x_80551 = add64(low_80549, high_80550);
                int64_t mid_80552 = sdiv64(x_80551, (int64_t) 2);
                bool x_80553 = sle64((int64_t) 0, mid_80552);
                bool y_80554 = slt64(mid_80552, n_70233);
                bool bounds_check_80555 = x_80553 && y_80554;
                bool index_certs_80556;
                
                if (!bounds_check_80555) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_80552,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t mid_id_80557 = ((int64_t *) mem_76184)[mid_80552];
                bool cond_80558 = slt64(mid_id_80557, (int64_t) 0);
                int64_t mid_idx_80559;
                
                if (cond_80558) {
                    mid_idx_80559 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_80559 = mid_id_80557;
                }
                
                bool cond_80560 = sle64(defunc_0_g_res_80544, mid_idx_80559);
                int64_t loopres_80561;
                int64_t loopres_80562;
                
                if (cond_80560) {
                    int64_t loopres_t_res_80563 = sub64(mid_80552, (int64_t) 1);
                    
                    loopres_80561 = low_80549;
                    loopres_80562 = loopres_t_res_80563;
                } else {
                    int64_t loopres_f_res_80564 = add64((int64_t) 1, mid_80552);
                    
                    loopres_80561 = loopres_f_res_80564;
                    loopres_80562 = high_80550;
                }
                
                bool loop_cond_80565 = sle64(loopres_80561, loopres_80562);
                bool loop_while_tmp_80748 = loop_cond_80565;
                int64_t low_tmp_80749 = loopres_80561;
                int64_t high_tmp_80750 = loopres_80562;
                
                loop_while_80548 = loop_while_tmp_80748;
                low_80549 = low_tmp_80749;
                high_80550 = high_tmp_80750;
            }
            init_idx_80545 = loop_while_80548;
            init_idx_80546 = low_80549;
            init_idx_80547 = high_80550;
            
            bool idx_80566;
            int64_t idx_80567;
            int64_t idx_80568;
            int64_t idx_80569;
            bool loop_while_80570;
            int64_t l_idx_80571;
            int64_t r_idx_80572;
            int64_t span_80573;
            
            loop_while_80570 = loop_cond_70258;
            l_idx_80571 = init_idx_80546;
            r_idx_80572 = init_idx_80546;
            span_80573 = (int64_t) 1;
            while (loop_while_80570) {
                int64_t max_arg_80574 = sub64(l_idx_80571, (int64_t) 1);
                int64_t max_res_80575 = smax64((int64_t) 0, max_arg_80574);
                int64_t min_arg_80576 = add64((int64_t) 1, r_idx_80572);
                int64_t min_res_80577 = smin64(min_arg_71306, min_arg_80576);
                bool x_80578 = sle64((int64_t) 0, max_res_80575);
                bool y_80579 = slt64(max_res_80575, n_70233);
                bool bounds_check_80580 = x_80578 && y_80579;
                bool index_certs_80581;
                
                if (!bounds_check_80580) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_80575,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_80582 = ((int64_t *) mem_76184)[max_res_80575];
                int64_t abs_arg_80583 = sub64(x_80582, defunc_0_g_res_80544);
                int64_t abs_res_80584 = abs64(abs_arg_80583);
                bool x_80585 = sle64((int64_t) 0, min_res_80577);
                bool y_80586 = slt64(min_res_80577, n_70233);
                bool bounds_check_80587 = x_80585 && y_80586;
                bool index_certs_80588;
                
                if (!bounds_check_80587) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_80577,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70233, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                    return 1;
                }
                
                int64_t x_80589 = ((int64_t *) mem_76184)[min_res_80577];
                int64_t abs_arg_80590 = sub64(x_80589, defunc_0_g_res_80544);
                int64_t abs_res_80591 = abs64(abs_arg_80590);
                bool cond_80592 = max_res_80575 == l_idx_80571;
                int64_t loopres_80593;
                int64_t loopres_80594;
                int64_t loopres_80595;
                
                if (cond_80592) {
                    loopres_80593 = l_idx_80571;
                    loopres_80594 = r_idx_80572;
                    loopres_80595 = min_res_70253;
                } else {
                    bool cond_80596 = slt64(abs_res_80584, abs_res_80591);
                    bool cond_f_res_80597 = min_res_80577 == r_idx_80572;
                    bool x_80598 = !cond_80596;
                    bool y_80599 = cond_f_res_80597 && x_80598;
                    bool cond_80600 = cond_80596 || y_80599;
                    int64_t loopres_f_res_80601;
                    
                    if (cond_80600) {
                        loopres_f_res_80601 = max_res_80575;
                    } else {
                        loopres_f_res_80601 = l_idx_80571;
                    }
                    
                    int64_t loopres_f_res_80602;
                    
                    if (cond_80600) {
                        loopres_f_res_80602 = r_idx_80572;
                    } else {
                        loopres_f_res_80602 = min_res_80577;
                    }
                    
                    int64_t loopres_f_res_80603;
                    
                    if (cond_80600) {
                        int64_t loopres_f_res_t_res_80604 = add64((int64_t) 1,
                                                                  span_80573);
                        
                        loopres_f_res_80603 = loopres_f_res_t_res_80604;
                    } else {
                        int64_t loopres_f_res_f_res_80605 = add64((int64_t) 1,
                                                                  span_80573);
                        
                        loopres_f_res_80603 = loopres_f_res_f_res_80605;
                    }
                    loopres_80593 = loopres_f_res_80601;
                    loopres_80594 = loopres_f_res_80602;
                    loopres_80595 = loopres_f_res_80603;
                }
                
                bool loop_cond_80606 = slt64(loopres_80595, min_res_70253);
                bool loop_while_tmp_80751 = loop_cond_80606;
                int64_t l_idx_tmp_80752 = loopres_80593;
                int64_t r_idx_tmp_80753 = loopres_80594;
                int64_t span_tmp_80754 = loopres_80595;
                
                loop_while_80570 = loop_while_tmp_80751;
                l_idx_80571 = l_idx_tmp_80752;
                r_idx_80572 = r_idx_tmp_80753;
                span_80573 = span_tmp_80754;
            }
            idx_80566 = loop_while_80570;
            idx_80567 = l_idx_80571;
            idx_80568 = r_idx_80572;
            idx_80569 = span_80573;
            
            int64_t min_res_80607 = smin64(min_arg_71307, idx_80567);
            int64_t max_res_80608 = smax64((int64_t) 0, min_res_80607);
            int64_t x_80609 = add64(min_res_71308, max_res_80608);
            int64_t r_80610 = sub64(x_80609, (int64_t) 1);
            bool x_80611 = sle64((int64_t) 0, r_80610);
            bool y_80612 = slt64(r_80610, n_70233);
            bool bounds_check_80613 = x_80611 && y_80612;
            bool index_certs_80614;
            
            if (!bounds_check_80613) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_80610,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80615 = ((int64_t *) mem_76157)[r_80610];
            int64_t abs_arg_80616 = sub64(x_80615, min_res_80543);
            int64_t abs_res_80617 = abs64(abs_arg_80616);
            bool x_80618 = sle64((int64_t) 0, max_res_80608);
            bool y_80619 = slt64(max_res_80608, n_70233);
            bool bounds_check_80620 = x_80618 && y_80619;
            bool index_certs_80621;
            
            if (!bounds_check_80620) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80608,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_80622 = ((int64_t *) mem_76157)[max_res_80608];
            int64_t abs_arg_80623 = sub64(x_80622, min_res_80543);
            int64_t abs_res_80624 = abs64(abs_arg_80623);
            int64_t max_res_80625 = smax64(abs_res_80617, abs_res_80624);
            float defunc_0_f_res_80626 = sitofp_i64_f32(max_res_80625);
            float defunc_1_f_res_80627 = max_res_71312 + defunc_0_f_res_80626;
            
            for (int64_t i_80632 = 0; i_80632 < q_70235; i_80632++) {
                float x_80635 = ((float *) mem_76199)[i_80632];
                bool cond_80636 = sle64(last_res_71291, i_80632);
                int64_t defunc_0_f_res_80637;
                
                if (cond_80636) {
                    defunc_0_f_res_80637 = (int64_t) 0;
                } else {
                    int64_t i_80638 = add64(max_res_80608, i_80632);
                    int64_t defunc_0_add_arg_80639 =
                            ((int64_t *) mem_76157)[i_80638];
                    int64_t defunc_1_add_res_80640 = add64((int64_t) 1,
                                                           defunc_0_add_arg_80639);
                    
                    defunc_0_f_res_80637 = defunc_1_add_res_80640;
                }
                
                int64_t binop_p_80641 = sub64(defunc_0_f_res_80637,
                                              min_res_80543);
                float defunc_0_f_res_80642 = sitofp_i64_f32(binop_p_80641);
                float abs_res_80643 = (float) fabs(defunc_0_f_res_80642);
                float tmp1_80644 = abs_res_80643 / defunc_1_f_res_80627;
                float x_80645 = tmp1_80644 * tmp1_80644;
                float y_80646 = tmp1_80644 * x_80645;
                float tmp2_80647 = 1.0F - y_80646;
                float x_80648 = tmp2_80647 * tmp2_80647;
                float tmp3_80649 = tmp2_80647 * x_80648;
                float tmp4_80650 = x_80635 * tmp3_80649;
                
                ((float *) mem_76234)[i_80632] = defunc_0_f_res_80642;
                ((float *) mem_76237)[i_80632] = tmp4_80650;
            }
            
            float defunc_2_reduce_res_80655;
            float defunc_2_reduce_res_80656;
            float defunc_2_reduce_res_80657;
            float defunc_2_reduce_res_80658;
            float defunc_2_reduce_res_80659;
            float redout_80663;
            float redout_80664;
            float redout_80665;
            float redout_80666;
            float redout_80667;
            
            redout_80663 = 0.0F;
            redout_80664 = 0.0F;
            redout_80665 = 0.0F;
            redout_80666 = 0.0F;
            redout_80667 = 0.0F;
            for (int64_t i_80662 = 0; i_80662 < q_70235; i_80662++) {
                float x_80670 = ((float *) mem_76234)[i_80662];
                float x_80671 = ((float *) mem_76237)[i_80662];
                float defunc_1_f_res_80672 = x_80670 * x_80671;
                float defunc_1_f_res_80673 = x_80670 * defunc_1_f_res_80672;
                float defunc_1_f_res_80674 = x_80670 * defunc_1_f_res_80673;
                float defunc_1_f_res_80675 = x_80670 * defunc_1_f_res_80674;
                float defunc_1_op_res_80676 = x_80671 + redout_80663;
                float defunc_1_op_res_80677 = defunc_1_f_res_80672 +
                      redout_80664;
                float defunc_1_op_res_80678 = defunc_1_f_res_80673 +
                      redout_80665;
                float defunc_1_op_res_80679 = defunc_1_f_res_80674 +
                      redout_80666;
                float defunc_1_op_res_80680 = defunc_1_f_res_80675 +
                      redout_80667;
                
                ((float *) mem_76264)[i_80662] = defunc_1_f_res_80673;
                ((float *) mem_76267)[i_80662] = defunc_1_f_res_80672;
                
                float redout_tmp_80757 = defunc_1_op_res_80676;
                float redout_tmp_80758 = defunc_1_op_res_80677;
                float redout_tmp_80759 = defunc_1_op_res_80678;
                float redout_tmp_80760 = defunc_1_op_res_80679;
                float redout_tmp_80761 = defunc_1_op_res_80680;
                
                redout_80663 = redout_tmp_80757;
                redout_80664 = redout_tmp_80758;
                redout_80665 = redout_tmp_80759;
                redout_80666 = redout_tmp_80760;
                redout_80667 = redout_tmp_80761;
            }
            defunc_2_reduce_res_80655 = redout_80663;
            defunc_2_reduce_res_80656 = redout_80664;
            defunc_2_reduce_res_80657 = redout_80665;
            defunc_2_reduce_res_80658 = redout_80666;
            defunc_2_reduce_res_80659 = redout_80667;
            
            float x_80683 = defunc_2_reduce_res_80657 *
                  defunc_2_reduce_res_80659;
            float y_80684 = defunc_2_reduce_res_80658 *
                  defunc_2_reduce_res_80658;
            float a12_80685 = x_80683 - y_80684;
            float x_80686 = defunc_2_reduce_res_80657 *
                  defunc_2_reduce_res_80658;
            float y_80687 = defunc_2_reduce_res_80656 *
                  defunc_2_reduce_res_80659;
            float b12_80688 = x_80686 - y_80687;
            float x_80689 = defunc_2_reduce_res_80656 *
                  defunc_2_reduce_res_80658;
            float y_80690 = defunc_2_reduce_res_80657 *
                  defunc_2_reduce_res_80657;
            float c12_80691 = x_80689 - y_80690;
            float x_80692 = defunc_2_reduce_res_80655 *
                  defunc_2_reduce_res_80659;
            float b2_80693 = x_80692 - y_80690;
            float x_80694 = defunc_2_reduce_res_80656 *
                  defunc_2_reduce_res_80657;
            float y_80695 = defunc_2_reduce_res_80655 *
                  defunc_2_reduce_res_80658;
            float c2_80696 = x_80694 - y_80695;
            float x_80697 = defunc_2_reduce_res_80655 * a12_80685;
            float y_80698 = defunc_2_reduce_res_80656 * b12_80688;
            float x_80699 = x_80697 + y_80698;
            float y_80700 = defunc_2_reduce_res_80657 * c12_80691;
            float y_80701 = x_80699 + y_80700;
            float det_80702 = 1.0F / y_80701;
            float a12_80703 = a12_80685 * det_80702;
            float b12_80704 = b12_80688 * det_80702;
            float c12_80705 = c12_80691 * det_80702;
            float b2_80706 = b2_80693 * det_80702;
            float c2_80707 = c2_80696 * det_80702;
            float defunc_2_reduce_res_80708;
            float defunc_2_reduce_res_80709;
            float redout_80711;
            float redout_80712;
            
            redout_80711 = 0.0F;
            redout_80712 = 0.0F;
            for (int64_t i_80710 = 0; i_80710 < q_70235; i_80710++) {
                float x_80713 = ((float *) mem_76237)[i_80710];
                float x_80714 = ((float *) mem_76267)[i_80710];
                float x_80715 = ((float *) mem_76264)[i_80710];
                bool cond_80716 = sle64(last_res_71291, i_80710);
                float defunc_0_f_res_80717;
                
                if (cond_80716) {
                    defunc_0_f_res_80717 = 0.0F;
                } else {
                    int64_t i_80718 = add64(max_res_80608, i_80710);
                    float defunc_0_add_arg_80719 =
                          ((float *) mem_76154)[i_80718];
                    
                    defunc_0_f_res_80717 = defunc_0_add_arg_80719;
                }
                
                float x_80720 = a12_80703 * x_80713;
                float y_80721 = b12_80704 * x_80714;
                float x_80722 = x_80720 + y_80721;
                float y_80723 = c12_80705 * x_80715;
                float x_80724 = x_80722 + y_80723;
                float defunc_9_fit_fun_res_80725 = defunc_0_f_res_80717 *
                      x_80724;
                float x_80726 = b12_80704 * x_80713;
                float y_80727 = b2_80706 * x_80714;
                float x_80728 = x_80726 + y_80727;
                float y_80729 = c2_80707 * x_80715;
                float x_80730 = x_80728 + y_80729;
                float defunc_9_slope_fun_res_80731 = defunc_0_f_res_80717 *
                      x_80730;
                float defunc_1_op_res_80732 = defunc_9_fit_fun_res_80725 +
                      redout_80711;
                float defunc_1_op_res_80733 = defunc_9_slope_fun_res_80731 +
                      redout_80712;
                float redout_tmp_80764 = defunc_1_op_res_80732;
                float redout_tmp_80765 = defunc_1_op_res_80733;
                
                redout_80711 = redout_tmp_80764;
                redout_80712 = redout_tmp_80765;
            }
            defunc_2_reduce_res_80708 = redout_80711;
            defunc_2_reduce_res_80709 = redout_80712;
            ((float *) mem_76214)[i_80539] = defunc_2_reduce_res_80708;
            ((float *) mem_76217)[i_80539] = defunc_2_reduce_res_80709;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76305.mem + gtid_74163 * n_m_70241 * (int64_t) 4,
                    mem_76214 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76309.mem + gtid_74163 * n_m_70241 * (int64_t) 4,
                    mem_76217 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76139);
    free(mem_76154);
    free(mem_76157);
    free(mem_76184);
    free(mem_76199);
    free(mem_76214);
    free(mem_76217);
    free(mem_76234);
    free(mem_76237);
    free(mem_76264);
    free(mem_76267);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81938_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81938_end -
                 futhark_mc_segmap_parloop_81938_start;
        
        ctx->futhark_mc_segmap_parloop_81938_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81938_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81938_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81936(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74162 = tid;
    int num_tasks_80506 = info.nsubtasks;
    struct futhark_mc_task_81935 *futhark_mc_task_81935 =
                                 (struct futhark_mc_task_81935 *) args;
    struct futhark_context *ctx = futhark_mc_task_81935->ctx;
    uint64_t futhark_mc_segmap_task_81936_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81936_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81935->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81935->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81935->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81935->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81935->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81935->free_i_70247;
    bool x_70248 = futhark_mc_task_81935->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81935->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81935->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81935->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81935->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_76045 = futhark_mc_task_81935->free_bytes_76045;
    int64_t bytes_76048 = futhark_mc_task_81935->free_bytes_76048;
    int64_t bytes_76057 = futhark_mc_task_81935->free_bytes_76057;
    int64_t bytes_76132 = futhark_mc_task_81935->free_bytes_76132;
    struct memblock mem_76305 = {.desc ="mem_76305", .mem =
                                 futhark_mc_task_81935->free_mem_76305, .size =
                                 0, .references =NULL};
    struct memblock mem_76309 = {.desc ="mem_76309", .mem =
                                 futhark_mc_task_81935->free_mem_76309, .size =
                                 0, .references =NULL};
    int64_t iter_80507;
    struct futhark_mc_segmap_parloop_struct_81937
    futhark_mc_segmap_parloop_struct_81937;
    
    futhark_mc_segmap_parloop_struct_81937.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81937.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81937.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81937.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81937.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81937.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81937.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81937.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81937.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81937.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81937.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81937.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81937.free_bytes_76045 = bytes_76045;
    futhark_mc_segmap_parloop_struct_81937.free_bytes_76048 = bytes_76048;
    futhark_mc_segmap_parloop_struct_81937.free_bytes_76057 = bytes_76057;
    futhark_mc_segmap_parloop_struct_81937.free_bytes_76132 = bytes_76132;
    futhark_mc_segmap_parloop_struct_81937.free_mem_76305 = mem_76305.mem;
    futhark_mc_segmap_parloop_struct_81937.free_mem_76309 = mem_76309.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81938_task;
    
    futhark_mc_segmap_parloop_81938_task.name =
        "futhark_mc_segmap_parloop_81938";
    futhark_mc_segmap_parloop_81938_task.fn = futhark_mc_segmap_parloop_81938;
    futhark_mc_segmap_parloop_81938_task.args =
        &futhark_mc_segmap_parloop_struct_81937;
    futhark_mc_segmap_parloop_81938_task.iterations = iterations;
    futhark_mc_segmap_parloop_81938_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81938_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81938_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81938_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81938_task);
    
    if (futhark_mc_segmap_parloop_81938_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81938_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81938_total_end -
                 futhark_mc_segmap_parloop_81938_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81938_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81938_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81938_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81936_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81936_end -
                 futhark_mc_segmap_task_81936_start;
        
        ctx->futhark_mc_segmap_task_81936_runs[tid]++;
        ctx->futhark_mc_segmap_task_81936_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81936_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81951 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    float free_i64_res_70259;
    unsigned char *free_Y_mem_75306;
    int64_t free_bytes_76045;
    int64_t free_bytes_76048;
    int64_t free_bytes_76057;
    int64_t free_bytes_76132;
    unsigned char *free_mem_76305;
    unsigned char *free_mem_76309;
};
struct futhark_mc_task_81960 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_74165;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_76046;
};
struct futhark_mc_scan_stage_1_parloop_struct_81963 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_74165;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_76046;
};
static int futhark_mc_scan_stage_1_parloop_81964(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_74166, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81963
    *futhark_mc_scan_stage_1_parloop_struct_81963 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81963 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81963->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81964_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81964_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_1_parloop_struct_81963->free_n_70233;
    int64_t gtid_74165 =
            futhark_mc_scan_stage_1_parloop_struct_81963->free_gtid_74165;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81963->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_76046 = {.desc ="mem_76046", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81963->free_mem_76046,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81171 = start;
    int64_t x_80767;
    int64_t x_80768;
    
    x_80767 = (int64_t) 0;
    for (; iter_81171 < end; iter_81171++) {
        int64_t gtid_74167 = iter_81171;
        
        // stage 1 scan body
        {
            float x_80770 = ((float *) Y_mem_75306.mem)[gtid_74165 * n_70233 +
                                                        gtid_74167];
            bool isnan_res_80771;
            
            isnan_res_80771 = futrts_isnan32(x_80770);
            
            bool defunc_0_p_res_80772 = !isnan_res_80771;
            int64_t defunc_0_f_res_80773 = btoi_bool_i64(defunc_0_p_res_80772);
            
            // write mapped values results to memory
            { }
            x_80767 = x_80767;
            // Read next values
            {
                x_80768 = defunc_0_f_res_80773;
            }
            
            int64_t defunc_1_op_res_80769 = add64(x_80767, x_80768);
            
            ((int64_t *) mem_76046.mem)[gtid_74167] = defunc_1_op_res_80769;
            x_80767 = defunc_1_op_res_80769;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81964_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81964_end -
                 futhark_mc_scan_stage_1_parloop_81964_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81964_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81964_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81964_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81965 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_74165;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_76046;
};
static int futhark_mc_scan_stage_3_parloop_81966(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_74166, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81965
    *futhark_mc_scan_stage_3_parloop_struct_81965 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81965 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81965->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81966_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81966_start = get_wall_time();
    
    int64_t n_70233 =
            futhark_mc_scan_stage_3_parloop_struct_81965->free_n_70233;
    int64_t gtid_74165 =
            futhark_mc_scan_stage_3_parloop_struct_81965->free_gtid_74165;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81965->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_76046 = {.desc ="mem_76046", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81965->free_mem_76046,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81183 = start;
    int64_t x_81180;
    int64_t x_81181;
    
    if (iter_81183 == (int64_t) 0) {
        x_81180 = (int64_t) 0;
    } else {
        x_81180 = ((int64_t *) mem_76046.mem)[iter_81183 - (int64_t) 1];
    }
    for (; iter_81183 < end; iter_81183++) {
        int64_t gtid_74167 = iter_81183;
        
        // stage 3 scan body
        {
            float x_80770 = ((float *) Y_mem_75306.mem)[gtid_74165 * n_70233 +
                                                        gtid_74167];
            bool isnan_res_80771;
            
            isnan_res_80771 = futrts_isnan32(x_80770);
            
            bool defunc_0_p_res_80772 = !isnan_res_80771;
            int64_t defunc_0_f_res_80773 = btoi_bool_i64(defunc_0_p_res_80772);
            
            x_81180 = x_81180;
            x_81181 = defunc_0_f_res_80773;
            
            int64_t defunc_1_op_res_81182 = add64(x_81180, x_81181);
            
            ((int64_t *) mem_76046.mem)[gtid_74167] = defunc_1_op_res_81182;
            x_81180 = defunc_1_op_res_81182;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81966_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81966_end -
                 futhark_mc_scan_stage_3_parloop_81966_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81966_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81966_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81966_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81961(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74166 = tid;
    int num_tasks_81170 = info.nsubtasks;
    struct futhark_mc_task_81960 *futhark_mc_task_81960 =
                                 (struct futhark_mc_task_81960 *) args;
    struct futhark_context *ctx = futhark_mc_task_81960->ctx;
    uint64_t futhark_mc_segscan_task_81961_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81961_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81960->free_n_70233;
    int64_t gtid_74165 = futhark_mc_task_81960->free_gtid_74165;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81960->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_76046 = {.desc ="mem_76046", .mem =
                                 futhark_mc_task_81960->free_mem_76046, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_81177_cached_sizze_81962 = 0;
    unsigned char *scan_stage_2_accum_mem_81177 = NULL;
    int64_t iter_81171;
    struct futhark_mc_scan_stage_1_parloop_struct_81963
    futhark_mc_scan_stage_1_parloop_struct_81963;
    
    futhark_mc_scan_stage_1_parloop_struct_81963.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81963.free_n_70233 = n_70233;
    futhark_mc_scan_stage_1_parloop_struct_81963.free_gtid_74165 = gtid_74165;
    futhark_mc_scan_stage_1_parloop_struct_81963.free_Y_mem_75306 =
        Y_mem_75306.mem;
    futhark_mc_scan_stage_1_parloop_struct_81963.free_mem_76046 = mem_76046.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81964_task;
    
    futhark_mc_scan_stage_1_parloop_81964_task.name =
        "futhark_mc_scan_stage_1_parloop_81964";
    futhark_mc_scan_stage_1_parloop_81964_task.fn =
        futhark_mc_scan_stage_1_parloop_81964;
    futhark_mc_scan_stage_1_parloop_81964_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81963;
    futhark_mc_scan_stage_1_parloop_81964_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81964_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81964_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81964_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81964_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81964_task);
    
    if (futhark_mc_scan_stage_1_parloop_81964_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81964_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81964_total_end -
                 futhark_mc_scan_stage_1_parloop_81964_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81964_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81964_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81964_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_81170)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_81172;
        int64_t x_81173;
        int64_t offset_81175 = (int64_t) 0;
        int64_t offset_index_81176 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_81177_cached_sizze_81962 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_81177 = realloc(scan_stage_2_accum_mem_81177,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_81177_cached_sizze_81962 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_81177)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_81179 = 0; i_81179 < num_tasks_81170 - 1; i_81179++) {
            offset_81175 = squot64(n_70233, sext_i32_i64(num_tasks_81170));
            if (slt64(sext_i32_i64(i_81179), srem64(n_70233,
                                                    sext_i32_i64(num_tasks_81170)))) {
                offset_81175 += (int64_t) 1;
            }
            offset_index_81176 += offset_81175;
            
            int64_t gtid_74167 = offset_index_81176;
            float x_80770 = ((float *) Y_mem_75306.mem)[gtid_74165 * n_70233 +
                                                        gtid_74167];
            bool isnan_res_80771;
            
            isnan_res_80771 = futrts_isnan32(x_80770);
            
            bool defunc_0_p_res_80772 = !isnan_res_80771;
            int64_t defunc_0_f_res_80773 = btoi_bool_i64(defunc_0_p_res_80772);
            
            // Read carry in
            {
                x_81172 =
                    ((int64_t *) scan_stage_2_accum_mem_81177)[(int64_t) 0];
            }
            // Read next values
            {
                x_81173 = ((int64_t *) mem_76046.mem)[offset_index_81176 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_81174 = add64(x_81172, x_81173);
            
            ((int64_t *) mem_76046.mem)[offset_index_81176 - (int64_t) 1] =
                defunc_1_op_res_81174;
            ((int64_t *) scan_stage_2_accum_mem_81177)[(int64_t) 0] =
                defunc_1_op_res_81174;
        }
        
        int64_t iter_81183 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81965
        futhark_mc_scan_stage_3_parloop_struct_81965;
        
        futhark_mc_scan_stage_3_parloop_struct_81965.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81965.free_n_70233 = n_70233;
        futhark_mc_scan_stage_3_parloop_struct_81965.free_gtid_74165 =
            gtid_74165;
        futhark_mc_scan_stage_3_parloop_struct_81965.free_Y_mem_75306 =
            Y_mem_75306.mem;
        futhark_mc_scan_stage_3_parloop_struct_81965.free_mem_76046 =
            mem_76046.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81966_task;
        
        futhark_mc_scan_stage_3_parloop_81966_task.name =
            "futhark_mc_scan_stage_3_parloop_81966";
        futhark_mc_scan_stage_3_parloop_81966_task.fn =
            futhark_mc_scan_stage_3_parloop_81966;
        futhark_mc_scan_stage_3_parloop_81966_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81965;
        futhark_mc_scan_stage_3_parloop_81966_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81966_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81966_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81966_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81966_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81966_task);
        
        if (futhark_mc_scan_stage_3_parloop_81966_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81966_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81966_total_end -
                     futhark_mc_scan_stage_3_parloop_81966_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81966_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81966_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81966_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_81177);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81961_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81961_end -
                 futhark_mc_segscan_task_81961_start;
        
        ctx->futhark_mc_segscan_task_81961_runs[tid]++;
        ctx->futhark_mc_segscan_task_81961_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81961_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81967 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_74165;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_76046;
    unsigned char *free_mem_76049;
    unsigned char *free_mem_76052;
};
struct futhark_mc_segmap_parloop_struct_81969 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_gtid_74165;
    unsigned char *free_Y_mem_75306;
    unsigned char *free_mem_76046;
    unsigned char *free_mem_76049;
    unsigned char *free_mem_76052;
};
static int futhark_mc_segmap_parloop_81970(void *args, int64_t start,
                                           int64_t end, int flat_tid_74168,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81969
    *futhark_mc_segmap_parloop_struct_81969 =
    (struct futhark_mc_segmap_parloop_struct_81969 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81969->ctx;
    uint64_t futhark_mc_segmap_parloop_81970_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81970_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81969->free_n_70233;
    int64_t gtid_74165 =
            futhark_mc_segmap_parloop_struct_81969->free_gtid_74165;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81969->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_76046 = {.desc ="mem_76046", .mem =
                                 futhark_mc_segmap_parloop_struct_81969->free_mem_76046,
                                 .size =0, .references =NULL};
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_segmap_parloop_struct_81969->free_mem_76049,
                                 .size =0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_segmap_parloop_struct_81969->free_mem_76052,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81187 = start;
    
    for (; iter_81187 < end; iter_81187++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81190 = n_70233;
        int64_t gtid_74169 = iter_81187;
        int64_t remnant_81191 = iter_81187 - gtid_74169;
        float x_80774 = ((float *) Y_mem_75306.mem)[gtid_74165 * n_70233 +
                                                    gtid_74169];
        bool isnan_res_80775;
        
        isnan_res_80775 = futrts_isnan32(x_80774);
        
        bool defunc_0_p_res_80776 = !isnan_res_80775;
        int64_t defunc_1_f_res_80777;
        
        if (defunc_0_p_res_80776) {
            int64_t x_81188 = ((int64_t *) mem_76046.mem)[gtid_74169];
            int64_t defunc_1_f_res_t_res_81189 = sub64(x_81188, (int64_t) 1);
            
            defunc_1_f_res_80777 = defunc_1_f_res_t_res_81189;
        } else {
            defunc_1_f_res_80777 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_80777) &&
            slt64(defunc_1_f_res_80777, n_70233)) {
            ((int64_t *) mem_76052.mem)[defunc_1_f_res_80777] = gtid_74169;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_80777) &&
            slt64(defunc_1_f_res_80777, n_70233)) {
            ((float *) mem_76049.mem)[defunc_1_f_res_80777] = x_80774;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81970_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81970_end -
                 futhark_mc_segmap_parloop_81970_start;
        
        ctx->futhark_mc_segmap_parloop_81970_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81970_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81970_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81968(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74168 = tid;
    int num_tasks_81186 = info.nsubtasks;
    struct futhark_mc_task_81967 *futhark_mc_task_81967 =
                                 (struct futhark_mc_task_81967 *) args;
    struct futhark_context *ctx = futhark_mc_task_81967->ctx;
    uint64_t futhark_mc_segmap_task_81968_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81968_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81967->free_n_70233;
    int64_t gtid_74165 = futhark_mc_task_81967->free_gtid_74165;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81967->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    struct memblock mem_76046 = {.desc ="mem_76046", .mem =
                                 futhark_mc_task_81967->free_mem_76046, .size =
                                 0, .references =NULL};
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_task_81967->free_mem_76049, .size =
                                 0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_task_81967->free_mem_76052, .size =
                                 0, .references =NULL};
    int64_t iter_81187;
    struct futhark_mc_segmap_parloop_struct_81969
    futhark_mc_segmap_parloop_struct_81969;
    
    futhark_mc_segmap_parloop_struct_81969.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81969.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81969.free_gtid_74165 = gtid_74165;
    futhark_mc_segmap_parloop_struct_81969.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81969.free_mem_76046 = mem_76046.mem;
    futhark_mc_segmap_parloop_struct_81969.free_mem_76049 = mem_76049.mem;
    futhark_mc_segmap_parloop_struct_81969.free_mem_76052 = mem_76052.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81970_task;
    
    futhark_mc_segmap_parloop_81970_task.name =
        "futhark_mc_segmap_parloop_81970";
    futhark_mc_segmap_parloop_81970_task.fn = futhark_mc_segmap_parloop_81970;
    futhark_mc_segmap_parloop_81970_task.args =
        &futhark_mc_segmap_parloop_struct_81969;
    futhark_mc_segmap_parloop_81970_task.iterations = iterations;
    futhark_mc_segmap_parloop_81970_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81970_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81970_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81970_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81970_task);
    
    if (futhark_mc_segmap_parloop_81970_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81970_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81970_total_end -
                 futhark_mc_segmap_parloop_81970_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81970_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81970_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81970_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81968_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81968_end -
                 futhark_mc_segmap_task_81968_start;
        
        ctx->futhark_mc_segmap_task_81968_runs[tid]++;
        ctx->futhark_mc_segmap_task_81968_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81968_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81971 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76055;
};
struct futhark_mc_segmap_parloop_struct_81973 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76055;
};
static int futhark_mc_segmap_parloop_81974(void *args, int64_t start,
                                           int64_t end, int flat_tid_74170,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81973
    *futhark_mc_segmap_parloop_struct_81973 =
    (struct futhark_mc_segmap_parloop_struct_81973 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81973->ctx;
    uint64_t futhark_mc_segmap_parloop_81974_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81974_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81973->free_n_70233;
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_segmap_parloop_struct_81973->free_mem_76052,
                                 .size =0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_segmap_parloop_struct_81973->free_mem_76055,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81193 = start;
    
    for (; iter_81193 < end; iter_81193++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81194 = n_70233;
        int64_t gtid_74171 = iter_81193;
        int64_t remnant_81195 = iter_81193 - gtid_74171;
        int64_t x_80780 = ((int64_t *) mem_76052.mem)[gtid_74171];
        int64_t defunc_0_f_res_80781 = add64((int64_t) 1, x_80780);
        
        ((int64_t *) mem_76055.mem)[gtid_74171] = defunc_0_f_res_80781;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81974_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81974_end -
                 futhark_mc_segmap_parloop_81974_start;
        
        ctx->futhark_mc_segmap_parloop_81974_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81974_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81974_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81972(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74170 = tid;
    int num_tasks_81192 = info.nsubtasks;
    struct futhark_mc_task_81971 *futhark_mc_task_81971 =
                                 (struct futhark_mc_task_81971 *) args;
    struct futhark_context *ctx = futhark_mc_task_81971->ctx;
    uint64_t futhark_mc_segmap_task_81972_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81972_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81971->free_n_70233;
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_task_81971->free_mem_76052, .size =
                                 0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_task_81971->free_mem_76055, .size =
                                 0, .references =NULL};
    int64_t iter_81193;
    struct futhark_mc_segmap_parloop_struct_81973
    futhark_mc_segmap_parloop_struct_81973;
    
    futhark_mc_segmap_parloop_struct_81973.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81973.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81973.free_mem_76052 = mem_76052.mem;
    futhark_mc_segmap_parloop_struct_81973.free_mem_76055 = mem_76055.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81974_task;
    
    futhark_mc_segmap_parloop_81974_task.name =
        "futhark_mc_segmap_parloop_81974";
    futhark_mc_segmap_parloop_81974_task.fn = futhark_mc_segmap_parloop_81974;
    futhark_mc_segmap_parloop_81974_task.args =
        &futhark_mc_segmap_parloop_struct_81973;
    futhark_mc_segmap_parloop_81974_task.iterations = iterations;
    futhark_mc_segmap_parloop_81974_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81974_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81974_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81974_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81974_task);
    
    if (futhark_mc_segmap_parloop_81974_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81974_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81974_total_end -
                 futhark_mc_segmap_parloop_81974_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81974_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81974_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81974_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81972_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81972_end -
                 futhark_mc_segmap_task_81972_start;
        
        ctx->futhark_mc_segmap_task_81972_runs[tid]++;
        ctx->futhark_mc_segmap_task_81972_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81972_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81975 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76058;
};
struct futhark_mc_segmap_parloop_struct_81977 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76058;
};
static int futhark_mc_segmap_parloop_81978(void *args, int64_t start,
                                           int64_t end, int flat_tid_74172,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81977
    *futhark_mc_segmap_parloop_struct_81977 =
    (struct futhark_mc_segmap_parloop_struct_81977 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81977->ctx;
    uint64_t futhark_mc_segmap_parloop_81978_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81978_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81977->free_q_70235;
    int64_t last_res_74380 =
            futhark_mc_segmap_parloop_struct_81977->free_last_res_74380;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_segmap_parloop_struct_81977->free_mem_76058,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81197 = start;
    
    for (; iter_81197 < end; iter_81197++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81198 = q_70235;
        int64_t gtid_74173 = iter_81197;
        int64_t remnant_81199 = iter_81197 - gtid_74173;
        bool cond_80782 = sle64(last_res_74380, gtid_74173);
        float defunc_0_f_res_80783;
        
        if (cond_80782) {
            defunc_0_f_res_80783 = 0.0F;
        } else {
            defunc_0_f_res_80783 = 1.0F;
        }
        ((float *) mem_76058.mem)[gtid_74173] = defunc_0_f_res_80783;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81978_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81978_end -
                 futhark_mc_segmap_parloop_81978_start;
        
        ctx->futhark_mc_segmap_parloop_81978_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81978_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81978_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81976(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74172 = tid;
    int num_tasks_81196 = info.nsubtasks;
    struct futhark_mc_task_81975 *futhark_mc_task_81975 =
                                 (struct futhark_mc_task_81975 *) args;
    struct futhark_context *ctx = futhark_mc_task_81975->ctx;
    uint64_t futhark_mc_segmap_task_81976_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81976_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81975->free_q_70235;
    int64_t last_res_74380 = futhark_mc_task_81975->free_last_res_74380;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_task_81975->free_mem_76058, .size =
                                 0, .references =NULL};
    int64_t iter_81197;
    struct futhark_mc_segmap_parloop_struct_81977
    futhark_mc_segmap_parloop_struct_81977;
    
    futhark_mc_segmap_parloop_struct_81977.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81977.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81977.free_last_res_74380 = last_res_74380;
    futhark_mc_segmap_parloop_struct_81977.free_mem_76058 = mem_76058.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81978_task;
    
    futhark_mc_segmap_parloop_81978_task.name =
        "futhark_mc_segmap_parloop_81978";
    futhark_mc_segmap_parloop_81978_task.fn = futhark_mc_segmap_parloop_81978;
    futhark_mc_segmap_parloop_81978_task.args =
        &futhark_mc_segmap_parloop_struct_81977;
    futhark_mc_segmap_parloop_81978_task.iterations = iterations;
    futhark_mc_segmap_parloop_81978_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81978_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81978_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81978_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81978_task);
    
    if (futhark_mc_segmap_parloop_81978_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81978_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81978_total_end -
                 futhark_mc_segmap_parloop_81978_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81978_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81978_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81978_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81976_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81976_end -
                 futhark_mc_segmap_task_81976_start;
        
        ctx->futhark_mc_segmap_task_81976_runs[tid]++;
        ctx->futhark_mc_segmap_task_81976_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81976_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81979 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_74380;
    int64_t free_min_arg_74395;
    int64_t free_min_arg_74396;
    int64_t free_min_res_74397;
    float free_max_res_74401;
    unsigned char *free_mem_76049;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76055;
    int64_t free_bytes_76057;
    unsigned char *free_mem_76058;
    unsigned char *free_mem_76133;
    unsigned char *free_mem_76136;
};
struct futhark_mc_segmap_parloop_struct_81981 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_74380;
    int64_t free_min_arg_74395;
    int64_t free_min_arg_74396;
    int64_t free_min_res_74397;
    float free_max_res_74401;
    unsigned char *free_mem_76049;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76055;
    int64_t free_bytes_76057;
    unsigned char *free_mem_76058;
    unsigned char *free_mem_76133;
    unsigned char *free_mem_76136;
};
static int futhark_mc_segmap_parloop_81982(void *args, int64_t start,
                                           int64_t end, int flat_tid_74174,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81981
    *futhark_mc_segmap_parloop_struct_81981 =
    (struct futhark_mc_segmap_parloop_struct_81981 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81981->ctx;
    uint64_t futhark_mc_segmap_parloop_81982_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81982_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81981->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81981->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81981->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81981->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81981->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81981->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81981->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81981->free_loop_cond_70258;
    int64_t last_res_74380 =
            futhark_mc_segmap_parloop_struct_81981->free_last_res_74380;
    int64_t min_arg_74395 =
            futhark_mc_segmap_parloop_struct_81981->free_min_arg_74395;
    int64_t min_arg_74396 =
            futhark_mc_segmap_parloop_struct_81981->free_min_arg_74396;
    int64_t min_res_74397 =
            futhark_mc_segmap_parloop_struct_81981->free_min_res_74397;
    float max_res_74401 =
          futhark_mc_segmap_parloop_struct_81981->free_max_res_74401;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76049,
                                 .size =0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76052,
                                 .size =0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76055,
                                 .size =0, .references =NULL};
    int64_t bytes_76057 =
            futhark_mc_segmap_parloop_struct_81981->free_bytes_76057;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76058,
                                 .size =0, .references =NULL};
    struct memblock mem_76133 = {.desc ="mem_76133", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76133,
                                 .size =0, .references =NULL};
    struct memblock mem_76136 = {.desc ="mem_76136", .mem =
                                 futhark_mc_segmap_parloop_struct_81981->free_mem_76136,
                                 .size =0, .references =NULL};
    size_t mem_81058_cached_sizze_81983 = 0;
    unsigned char *mem_81058 = NULL;
    size_t mem_81060_cached_sizze_81984 = 0;
    unsigned char *mem_81060 = NULL;
    size_t mem_81085_cached_sizze_81985 = 0;
    unsigned char *mem_81085 = NULL;
    size_t mem_81087_cached_sizze_81986 = 0;
    unsigned char *mem_81087 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81201 = start;
    
    if (mem_81058_cached_sizze_81983 < (size_t) bytes_76057) {
        mem_81058 = realloc(mem_81058, bytes_76057);
        mem_81058_cached_sizze_81983 = bytes_76057;
    }
    if (mem_81060_cached_sizze_81984 < (size_t) bytes_76057) {
        mem_81060 = realloc(mem_81060, bytes_76057);
        mem_81060_cached_sizze_81984 = bytes_76057;
    }
    if (mem_81085_cached_sizze_81985 < (size_t) bytes_76057) {
        mem_81085 = realloc(mem_81085, bytes_76057);
        mem_81085_cached_sizze_81985 = bytes_76057;
    }
    if (mem_81087_cached_sizze_81986 < (size_t) bytes_76057) {
        mem_81087 = realloc(mem_81087, bytes_76057);
        mem_81087_cached_sizze_81986 = bytes_76057;
    }
    for (; iter_81201 < end; iter_81201++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81323 = n_m_70241;
        int64_t gtid_74175 = iter_81201;
        int64_t remnant_81324 = iter_81201 - gtid_74175;
        int64_t min_arg_80972 = mul64(jump_70237, gtid_74175);
        int64_t min_res_80973 = smin64(i_70247, min_arg_80972);
        int64_t defunc_0_g_res_80974 = add64((int64_t) 1, min_res_80973);
        bool init_idx_80975;
        int64_t init_idx_80976;
        int64_t init_idx_80977;
        bool loop_while_81202;
        int64_t low_81203;
        int64_t high_81204;
        
        loop_while_81202 = x_70248;
        low_81203 = (int64_t) 0;
        high_81204 = i_70247;
        while (loop_while_81202) {
            int64_t x_81205 = add64(low_81203, high_81204);
            int64_t mid_81206 = sdiv64(x_81205, (int64_t) 2);
            bool x_81207 = sle64((int64_t) 0, mid_81206);
            bool y_81208 = slt64(mid_81206, n_70233);
            bool bounds_check_81209 = x_81207 && y_81208;
            bool index_certs_81210;
            
            if (!bounds_check_81209) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_81206,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_81211 = ((int64_t *) mem_76055.mem)[mid_81206];
            bool cond_81212 = slt64(mid_id_81211, (int64_t) 0);
            int64_t mid_idx_81213;
            
            if (cond_81212) {
                mid_idx_81213 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_81213 = mid_id_81211;
            }
            
            bool cond_81214 = sle64(defunc_0_g_res_80974, mid_idx_81213);
            int64_t loopres_81215;
            int64_t loopres_81216;
            
            if (cond_81214) {
                int64_t loopres_t_res_81217 = sub64(mid_81206, (int64_t) 1);
                
                loopres_81215 = low_81203;
                loopres_81216 = loopres_t_res_81217;
            } else {
                int64_t loopres_f_res_81218 = add64((int64_t) 1, mid_81206);
                
                loopres_81215 = loopres_f_res_81218;
                loopres_81216 = high_81204;
            }
            
            bool loop_cond_81219 = sle64(loopres_81215, loopres_81216);
            bool loop_while_tmp_81325 = loop_cond_81219;
            int64_t low_tmp_81326 = loopres_81215;
            int64_t high_tmp_81327 = loopres_81216;
            
            loop_while_81202 = loop_while_tmp_81325;
            low_81203 = low_tmp_81326;
            high_81204 = high_tmp_81327;
        }
        init_idx_80975 = loop_while_81202;
        init_idx_80976 = low_81203;
        init_idx_80977 = high_81204;
        
        bool idx_80996;
        int64_t idx_80997;
        int64_t idx_80998;
        int64_t idx_80999;
        bool loop_while_81220;
        int64_t l_idx_81221;
        int64_t r_idx_81222;
        int64_t span_81223;
        
        loop_while_81220 = loop_cond_70258;
        l_idx_81221 = init_idx_80976;
        r_idx_81222 = init_idx_80976;
        span_81223 = (int64_t) 1;
        while (loop_while_81220) {
            int64_t max_arg_81224 = sub64(l_idx_81221, (int64_t) 1);
            int64_t max_res_81225 = smax64((int64_t) 0, max_arg_81224);
            int64_t min_arg_81226 = add64((int64_t) 1, r_idx_81222);
            int64_t min_res_81227 = smin64(min_arg_74395, min_arg_81226);
            bool x_81228 = sle64((int64_t) 0, max_res_81225);
            bool y_81229 = slt64(max_res_81225, n_70233);
            bool bounds_check_81230 = x_81228 && y_81229;
            bool index_certs_81231;
            
            if (!bounds_check_81230) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_81225,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_81232 = ((int64_t *) mem_76055.mem)[max_res_81225];
            int64_t abs_arg_81233 = sub64(x_81232, defunc_0_g_res_80974);
            int64_t abs_res_81234 = abs64(abs_arg_81233);
            bool x_81235 = sle64((int64_t) 0, min_res_81227);
            bool y_81236 = slt64(min_res_81227, n_70233);
            bool bounds_check_81237 = x_81235 && y_81236;
            bool index_certs_81238;
            
            if (!bounds_check_81237) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_81227,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_81239 = ((int64_t *) mem_76055.mem)[min_res_81227];
            int64_t abs_arg_81240 = sub64(x_81239, defunc_0_g_res_80974);
            int64_t abs_res_81241 = abs64(abs_arg_81240);
            bool cond_81242 = max_res_81225 == l_idx_81221;
            int64_t loopres_81243;
            int64_t loopres_81244;
            int64_t loopres_81245;
            
            if (cond_81242) {
                loopres_81243 = l_idx_81221;
                loopres_81244 = r_idx_81222;
                loopres_81245 = min_res_70253;
            } else {
                bool cond_81246 = slt64(abs_res_81234, abs_res_81241);
                bool cond_f_res_81247 = min_res_81227 == r_idx_81222;
                bool x_81248 = !cond_81246;
                bool y_81249 = cond_f_res_81247 && x_81248;
                bool cond_81250 = cond_81246 || y_81249;
                int64_t loopres_f_res_81251;
                
                if (cond_81250) {
                    loopres_f_res_81251 = max_res_81225;
                } else {
                    loopres_f_res_81251 = l_idx_81221;
                }
                
                int64_t loopres_f_res_81252;
                
                if (cond_81250) {
                    loopres_f_res_81252 = r_idx_81222;
                } else {
                    loopres_f_res_81252 = min_res_81227;
                }
                
                int64_t loopres_f_res_81253;
                
                if (cond_81250) {
                    int64_t loopres_f_res_t_res_81254 = add64((int64_t) 1,
                                                              span_81223);
                    
                    loopres_f_res_81253 = loopres_f_res_t_res_81254;
                } else {
                    int64_t loopres_f_res_f_res_81255 = add64((int64_t) 1,
                                                              span_81223);
                    
                    loopres_f_res_81253 = loopres_f_res_f_res_81255;
                }
                loopres_81243 = loopres_f_res_81251;
                loopres_81244 = loopres_f_res_81252;
                loopres_81245 = loopres_f_res_81253;
            }
            
            bool loop_cond_81256 = slt64(loopres_81245, min_res_70253);
            bool loop_while_tmp_81328 = loop_cond_81256;
            int64_t l_idx_tmp_81329 = loopres_81243;
            int64_t r_idx_tmp_81330 = loopres_81244;
            int64_t span_tmp_81331 = loopres_81245;
            
            loop_while_81220 = loop_while_tmp_81328;
            l_idx_81221 = l_idx_tmp_81329;
            r_idx_81222 = r_idx_tmp_81330;
            span_81223 = span_tmp_81331;
        }
        idx_80996 = loop_while_81220;
        idx_80997 = l_idx_81221;
        idx_80998 = r_idx_81222;
        idx_80999 = span_81223;
        
        int64_t min_res_81037 = smin64(min_arg_74396, idx_80997);
        int64_t max_res_81038 = smax64((int64_t) 0, min_res_81037);
        int64_t x_81039 = add64(min_res_74397, max_res_81038);
        int64_t r_81040 = sub64(x_81039, (int64_t) 1);
        bool x_81041 = sle64((int64_t) 0, r_81040);
        bool y_81042 = slt64(r_81040, n_70233);
        bool bounds_check_81043 = x_81041 && y_81042;
        bool index_certs_81044;
        
        if (!bounds_check_81043) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_81040,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_81045 = ((int64_t *) mem_76052.mem)[r_81040];
        int64_t abs_arg_81046 = sub64(x_81045, min_res_80973);
        int64_t abs_res_81047 = abs64(abs_arg_81046);
        bool x_81048 = sle64((int64_t) 0, max_res_81038);
        bool y_81049 = slt64(max_res_81038, n_70233);
        bool bounds_check_81050 = x_81048 && y_81049;
        bool index_certs_81051;
        
        if (!bounds_check_81050) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_81038,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_81052 = ((int64_t *) mem_76052.mem)[max_res_81038];
        int64_t abs_arg_81053 = sub64(x_81052, min_res_80973);
        int64_t abs_res_81054 = abs64(abs_arg_81053);
        int64_t max_res_81055 = smax64(abs_res_81047, abs_res_81054);
        float defunc_0_f_res_81056 = sitofp_i64_f32(max_res_81055);
        float defunc_1_f_res_81057 = max_res_74401 + defunc_0_f_res_81056;
        
        for (int64_t i_81257 = 0; i_81257 < q_70235; i_81257++) {
            float x_81260 = ((float *) mem_76058.mem)[i_81257];
            bool cond_81261 = sle64(last_res_74380, i_81257);
            int64_t defunc_0_f_res_81262;
            
            if (cond_81261) {
                defunc_0_f_res_81262 = (int64_t) 0;
            } else {
                int64_t i_81263 = add64(max_res_81038, i_81257);
                int64_t defunc_0_add_arg_81264 =
                        ((int64_t *) mem_76052.mem)[i_81263];
                int64_t defunc_1_add_res_81265 = add64((int64_t) 1,
                                                       defunc_0_add_arg_81264);
                
                defunc_0_f_res_81262 = defunc_1_add_res_81265;
            }
            
            int64_t binop_p_81266 = sub64(defunc_0_f_res_81262, min_res_80973);
            float defunc_0_f_res_81267 = sitofp_i64_f32(binop_p_81266);
            float abs_res_81268 = (float) fabs(defunc_0_f_res_81267);
            float tmp1_81269 = abs_res_81268 / defunc_1_f_res_81057;
            float x_81270 = tmp1_81269 * tmp1_81269;
            float y_81271 = tmp1_81269 * x_81270;
            float tmp2_81272 = 1.0F - y_81271;
            float x_81273 = tmp2_81272 * tmp2_81272;
            float tmp3_81274 = tmp2_81272 * x_81273;
            float tmp4_81275 = x_81260 * tmp3_81274;
            
            ((float *) mem_81058)[i_81257] = defunc_0_f_res_81267;
            ((float *) mem_81060)[i_81257] = tmp4_81275;
        }
        
        float defunc_2_reduce_res_81089;
        float defunc_2_reduce_res_81090;
        float defunc_2_reduce_res_81091;
        float defunc_2_reduce_res_81092;
        float defunc_2_reduce_res_81093;
        float redout_81279;
        float redout_81280;
        float redout_81281;
        float redout_81282;
        float redout_81283;
        
        redout_81279 = 0.0F;
        redout_81280 = 0.0F;
        redout_81281 = 0.0F;
        redout_81282 = 0.0F;
        redout_81283 = 0.0F;
        for (int64_t i_81278 = 0; i_81278 < q_70235; i_81278++) {
            float x_81286 = ((float *) mem_81058)[i_81278];
            float x_81287 = ((float *) mem_81060)[i_81278];
            float defunc_1_f_res_81288 = x_81286 * x_81287;
            float defunc_1_f_res_81289 = x_81286 * defunc_1_f_res_81288;
            float defunc_1_f_res_81290 = x_81286 * defunc_1_f_res_81289;
            float defunc_1_f_res_81291 = x_81286 * defunc_1_f_res_81290;
            float defunc_1_op_res_81292 = x_81287 + redout_81279;
            float defunc_1_op_res_81293 = defunc_1_f_res_81288 + redout_81280;
            float defunc_1_op_res_81294 = defunc_1_f_res_81289 + redout_81281;
            float defunc_1_op_res_81295 = defunc_1_f_res_81290 + redout_81282;
            float defunc_1_op_res_81296 = defunc_1_f_res_81291 + redout_81283;
            
            ((float *) mem_81085)[i_81278] = defunc_1_f_res_81289;
            ((float *) mem_81087)[i_81278] = defunc_1_f_res_81288;
            
            float redout_tmp_81334 = defunc_1_op_res_81292;
            float redout_tmp_81335 = defunc_1_op_res_81293;
            float redout_tmp_81336 = defunc_1_op_res_81294;
            float redout_tmp_81337 = defunc_1_op_res_81295;
            float redout_tmp_81338 = defunc_1_op_res_81296;
            
            redout_81279 = redout_tmp_81334;
            redout_81280 = redout_tmp_81335;
            redout_81281 = redout_tmp_81336;
            redout_81282 = redout_tmp_81337;
            redout_81283 = redout_tmp_81338;
        }
        defunc_2_reduce_res_81089 = redout_81279;
        defunc_2_reduce_res_81090 = redout_81280;
        defunc_2_reduce_res_81091 = redout_81281;
        defunc_2_reduce_res_81092 = redout_81282;
        defunc_2_reduce_res_81093 = redout_81283;
        
        float x_81117 = defunc_2_reduce_res_81091 * defunc_2_reduce_res_81093;
        float y_81118 = defunc_2_reduce_res_81092 * defunc_2_reduce_res_81092;
        float a12_81119 = x_81117 - y_81118;
        float x_81120 = defunc_2_reduce_res_81091 * defunc_2_reduce_res_81092;
        float y_81121 = defunc_2_reduce_res_81090 * defunc_2_reduce_res_81093;
        float b12_81122 = x_81120 - y_81121;
        float x_81123 = defunc_2_reduce_res_81090 * defunc_2_reduce_res_81092;
        float y_81124 = defunc_2_reduce_res_81091 * defunc_2_reduce_res_81091;
        float c12_81125 = x_81123 - y_81124;
        float x_81126 = defunc_2_reduce_res_81089 * defunc_2_reduce_res_81093;
        float b2_81127 = x_81126 - y_81124;
        float x_81128 = defunc_2_reduce_res_81090 * defunc_2_reduce_res_81091;
        float y_81129 = defunc_2_reduce_res_81089 * defunc_2_reduce_res_81092;
        float c2_81130 = x_81128 - y_81129;
        float x_81131 = defunc_2_reduce_res_81089 * a12_81119;
        float y_81132 = defunc_2_reduce_res_81090 * b12_81122;
        float x_81133 = x_81131 + y_81132;
        float y_81134 = defunc_2_reduce_res_81091 * c12_81125;
        float y_81135 = x_81133 + y_81134;
        float det_81136 = 1.0F / y_81135;
        float a12_81137 = a12_81119 * det_81136;
        float b12_81138 = b12_81122 * det_81136;
        float c12_81139 = c12_81125 * det_81136;
        float b2_81140 = b2_81127 * det_81136;
        float c2_81141 = c2_81130 * det_81136;
        float defunc_2_reduce_res_81142;
        float defunc_2_reduce_res_81143;
        float redout_81300;
        float redout_81301;
        
        redout_81300 = 0.0F;
        redout_81301 = 0.0F;
        for (int64_t i_81299 = 0; i_81299 < q_70235; i_81299++) {
            float x_81302 = ((float *) mem_81060)[i_81299];
            float x_81303 = ((float *) mem_81087)[i_81299];
            float x_81304 = ((float *) mem_81085)[i_81299];
            bool cond_81305 = sle64(last_res_74380, i_81299);
            float defunc_0_f_res_81306;
            
            if (cond_81305) {
                defunc_0_f_res_81306 = 0.0F;
            } else {
                int64_t i_81307 = add64(max_res_81038, i_81299);
                float defunc_0_add_arg_81308 =
                      ((float *) mem_76049.mem)[i_81307];
                
                defunc_0_f_res_81306 = defunc_0_add_arg_81308;
            }
            
            float x_81309 = a12_81137 * x_81302;
            float y_81310 = b12_81138 * x_81303;
            float x_81311 = x_81309 + y_81310;
            float y_81312 = c12_81139 * x_81304;
            float x_81313 = x_81311 + y_81312;
            float defunc_9_fit_fun_res_81314 = defunc_0_f_res_81306 * x_81313;
            float x_81315 = b12_81138 * x_81302;
            float y_81316 = b2_81140 * x_81303;
            float x_81317 = x_81315 + y_81316;
            float y_81318 = c2_81141 * x_81304;
            float x_81319 = x_81317 + y_81318;
            float defunc_9_slope_fun_res_81320 = defunc_0_f_res_81306 * x_81319;
            float defunc_1_op_res_81321 = defunc_9_fit_fun_res_81314 +
                  redout_81300;
            float defunc_1_op_res_81322 = defunc_9_slope_fun_res_81320 +
                  redout_81301;
            float redout_tmp_81341 = defunc_1_op_res_81321;
            float redout_tmp_81342 = defunc_1_op_res_81322;
            
            redout_81300 = redout_tmp_81341;
            redout_81301 = redout_tmp_81342;
        }
        defunc_2_reduce_res_81142 = redout_81300;
        defunc_2_reduce_res_81143 = redout_81301;
        ((float *) mem_76133.mem)[gtid_74175] = defunc_2_reduce_res_81142;
        ((float *) mem_76136.mem)[gtid_74175] = defunc_2_reduce_res_81143;
    }
    
  cleanup:
    { }
    free(mem_81058);
    free(mem_81060);
    free(mem_81085);
    free(mem_81087);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81982_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81982_end -
                 futhark_mc_segmap_parloop_81982_start;
        
        ctx->futhark_mc_segmap_parloop_81982_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81982_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81982_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81980(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74174 = tid;
    int num_tasks_81200 = info.nsubtasks;
    struct futhark_mc_task_81979 *futhark_mc_task_81979 =
                                 (struct futhark_mc_task_81979 *) args;
    struct futhark_context *ctx = futhark_mc_task_81979->ctx;
    uint64_t futhark_mc_segmap_task_81980_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81980_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81979->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81979->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81979->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81979->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81979->free_i_70247;
    bool x_70248 = futhark_mc_task_81979->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81979->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81979->free_loop_cond_70258;
    int64_t last_res_74380 = futhark_mc_task_81979->free_last_res_74380;
    int64_t min_arg_74395 = futhark_mc_task_81979->free_min_arg_74395;
    int64_t min_arg_74396 = futhark_mc_task_81979->free_min_arg_74396;
    int64_t min_res_74397 = futhark_mc_task_81979->free_min_res_74397;
    float max_res_74401 = futhark_mc_task_81979->free_max_res_74401;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_task_81979->free_mem_76049, .size =
                                 0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_task_81979->free_mem_76052, .size =
                                 0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_task_81979->free_mem_76055, .size =
                                 0, .references =NULL};
    int64_t bytes_76057 = futhark_mc_task_81979->free_bytes_76057;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_task_81979->free_mem_76058, .size =
                                 0, .references =NULL};
    struct memblock mem_76133 = {.desc ="mem_76133", .mem =
                                 futhark_mc_task_81979->free_mem_76133, .size =
                                 0, .references =NULL};
    struct memblock mem_76136 = {.desc ="mem_76136", .mem =
                                 futhark_mc_task_81979->free_mem_76136, .size =
                                 0, .references =NULL};
    int64_t iter_81201;
    struct futhark_mc_segmap_parloop_struct_81981
    futhark_mc_segmap_parloop_struct_81981;
    
    futhark_mc_segmap_parloop_struct_81981.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81981.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81981.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81981.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81981.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81981.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81981.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81981.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81981.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81981.free_last_res_74380 = last_res_74380;
    futhark_mc_segmap_parloop_struct_81981.free_min_arg_74395 = min_arg_74395;
    futhark_mc_segmap_parloop_struct_81981.free_min_arg_74396 = min_arg_74396;
    futhark_mc_segmap_parloop_struct_81981.free_min_res_74397 = min_res_74397;
    futhark_mc_segmap_parloop_struct_81981.free_max_res_74401 = max_res_74401;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76049 = mem_76049.mem;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76052 = mem_76052.mem;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76055 = mem_76055.mem;
    futhark_mc_segmap_parloop_struct_81981.free_bytes_76057 = bytes_76057;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76058 = mem_76058.mem;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76133 = mem_76133.mem;
    futhark_mc_segmap_parloop_struct_81981.free_mem_76136 = mem_76136.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81982_task;
    
    futhark_mc_segmap_parloop_81982_task.name =
        "futhark_mc_segmap_parloop_81982";
    futhark_mc_segmap_parloop_81982_task.fn = futhark_mc_segmap_parloop_81982;
    futhark_mc_segmap_parloop_81982_task.args =
        &futhark_mc_segmap_parloop_struct_81981;
    futhark_mc_segmap_parloop_81982_task.iterations = iterations;
    futhark_mc_segmap_parloop_81982_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81982_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81982_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81982_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81982_task);
    
    if (futhark_mc_segmap_parloop_81982_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81982_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81982_total_end -
                 futhark_mc_segmap_parloop_81982_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81982_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81982_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81982_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81980_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81980_end -
                 futhark_mc_segmap_task_81980_start;
        
        ctx->futhark_mc_segmap_task_81980_runs[tid]++;
        ctx->futhark_mc_segmap_task_81980_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81980_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81988 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_q_70235;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    bool free_x_70248;
    int64_t free_min_res_70253;
    bool free_loop_cond_70258;
    int64_t free_last_res_74380;
    int64_t free_min_arg_74395;
    int64_t free_min_arg_74396;
    int64_t free_min_res_74397;
    float free_max_res_74401;
    unsigned char *free_mem_76049;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76055;
    int64_t free_bytes_76057;
    unsigned char *free_mem_76058;
    unsigned char *free_mem_76133;
    unsigned char *free_mem_76136;
};
struct futhark_mc_task_81994 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76058;
    int64_t free_min_res_80785;
    int64_t free_max_res_80850;
    float free_defunc_1_f_res_80869;
    unsigned char *free_mem_80870;
    unsigned char *free_mem_80871;
};
struct futhark_mc_segmap_parloop_struct_81996 {
    struct futhark_context *ctx;
    int64_t free_q_70235;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76052;
    unsigned char *free_mem_76058;
    int64_t free_min_res_80785;
    int64_t free_max_res_80850;
    float free_defunc_1_f_res_80869;
    unsigned char *free_mem_80870;
    unsigned char *free_mem_80871;
};
static int futhark_mc_segmap_parloop_81997(void *args, int64_t start,
                                           int64_t end, int flat_tid_74178,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81996
    *futhark_mc_segmap_parloop_struct_81996 =
    (struct futhark_mc_segmap_parloop_struct_81996 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81996->ctx;
    uint64_t futhark_mc_segmap_parloop_81997_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81997_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81996->free_q_70235;
    int64_t last_res_74380 =
            futhark_mc_segmap_parloop_struct_81996->free_last_res_74380;
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_segmap_parloop_struct_81996->free_mem_76052,
                                 .size =0, .references =NULL};
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_segmap_parloop_struct_81996->free_mem_76058,
                                 .size =0, .references =NULL};
    int64_t min_res_80785 =
            futhark_mc_segmap_parloop_struct_81996->free_min_res_80785;
    int64_t max_res_80850 =
            futhark_mc_segmap_parloop_struct_81996->free_max_res_80850;
    float defunc_1_f_res_80869 =
          futhark_mc_segmap_parloop_struct_81996->free_defunc_1_f_res_80869;
    struct memblock mem_80870 = {.desc ="mem_80870", .mem =
                                 futhark_mc_segmap_parloop_struct_81996->free_mem_80870,
                                 .size =0, .references =NULL};
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_segmap_parloop_struct_81996->free_mem_80871,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81471 = start;
    
    for (; iter_81471 < end; iter_81471++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81475 = q_70235;
        int64_t gtid_74179 = iter_81471;
        int64_t remnant_81476 = iter_81471 - gtid_74179;
        float x_81399 = ((float *) mem_76058.mem)[gtid_74179];
        bool cond_81400 = sle64(last_res_74380, gtid_74179);
        int64_t defunc_0_f_res_81401;
        
        if (cond_81400) {
            defunc_0_f_res_81401 = (int64_t) 0;
        } else {
            int64_t i_81472 = add64(gtid_74179, max_res_80850);
            int64_t defunc_0_add_arg_81473 =
                    ((int64_t *) mem_76052.mem)[i_81472];
            int64_t defunc_1_add_res_81474 = add64((int64_t) 1,
                                                   defunc_0_add_arg_81473);
            
            defunc_0_f_res_81401 = defunc_1_add_res_81474;
        }
        
        int64_t binop_p_81405 = sub64(defunc_0_f_res_81401, min_res_80785);
        float defunc_0_f_res_81406 = sitofp_i64_f32(binop_p_81405);
        float abs_res_81407 = (float) fabs(defunc_0_f_res_81406);
        float tmp1_81408 = abs_res_81407 / defunc_1_f_res_80869;
        float x_81409 = tmp1_81408 * tmp1_81408;
        float y_81410 = tmp1_81408 * x_81409;
        float tmp2_81411 = 1.0F - y_81410;
        float x_81412 = tmp2_81411 * tmp2_81411;
        float tmp3_81413 = tmp2_81411 * x_81412;
        float tmp4_81414 = x_81399 * tmp3_81413;
        
        ((float *) mem_80870.mem)[gtid_74179] = defunc_0_f_res_81406;
        ((float *) mem_80871.mem)[gtid_74179] = tmp4_81414;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81997_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81997_end -
                 futhark_mc_segmap_parloop_81997_start;
        
        ctx->futhark_mc_segmap_parloop_81997_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81997_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81997_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81995(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74178 = tid;
    int num_tasks_81470 = info.nsubtasks;
    struct futhark_mc_task_81994 *futhark_mc_task_81994 =
                                 (struct futhark_mc_task_81994 *) args;
    struct futhark_context *ctx = futhark_mc_task_81994->ctx;
    uint64_t futhark_mc_segmap_task_81995_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81995_start = get_wall_time();
    
    int64_t q_70235 = futhark_mc_task_81994->free_q_70235;
    int64_t last_res_74380 = futhark_mc_task_81994->free_last_res_74380;
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_task_81994->free_mem_76052, .size =
                                 0, .references =NULL};
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_task_81994->free_mem_76058, .size =
                                 0, .references =NULL};
    int64_t min_res_80785 = futhark_mc_task_81994->free_min_res_80785;
    int64_t max_res_80850 = futhark_mc_task_81994->free_max_res_80850;
    float defunc_1_f_res_80869 =
          futhark_mc_task_81994->free_defunc_1_f_res_80869;
    struct memblock mem_80870 = {.desc ="mem_80870", .mem =
                                 futhark_mc_task_81994->free_mem_80870, .size =
                                 0, .references =NULL};
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_task_81994->free_mem_80871, .size =
                                 0, .references =NULL};
    int64_t iter_81471;
    struct futhark_mc_segmap_parloop_struct_81996
    futhark_mc_segmap_parloop_struct_81996;
    
    futhark_mc_segmap_parloop_struct_81996.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81996.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81996.free_last_res_74380 = last_res_74380;
    futhark_mc_segmap_parloop_struct_81996.free_mem_76052 = mem_76052.mem;
    futhark_mc_segmap_parloop_struct_81996.free_mem_76058 = mem_76058.mem;
    futhark_mc_segmap_parloop_struct_81996.free_min_res_80785 = min_res_80785;
    futhark_mc_segmap_parloop_struct_81996.free_max_res_80850 = max_res_80850;
    futhark_mc_segmap_parloop_struct_81996.free_defunc_1_f_res_80869 =
        defunc_1_f_res_80869;
    futhark_mc_segmap_parloop_struct_81996.free_mem_80870 = mem_80870.mem;
    futhark_mc_segmap_parloop_struct_81996.free_mem_80871 = mem_80871.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81997_task;
    
    futhark_mc_segmap_parloop_81997_task.name =
        "futhark_mc_segmap_parloop_81997";
    futhark_mc_segmap_parloop_81997_task.fn = futhark_mc_segmap_parloop_81997;
    futhark_mc_segmap_parloop_81997_task.args =
        &futhark_mc_segmap_parloop_struct_81996;
    futhark_mc_segmap_parloop_81997_task.iterations = iterations;
    futhark_mc_segmap_parloop_81997_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81997_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81997_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81997_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81997_task);
    
    if (futhark_mc_segmap_parloop_81997_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81997_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81997_total_end -
                 futhark_mc_segmap_parloop_81997_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81997_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81997_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81997_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81995_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81995_end -
                 futhark_mc_segmap_task_81995_start;
        
        ctx->futhark_mc_segmap_task_81995_runs[tid]++;
        ctx->futhark_mc_segmap_task_81995_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81995_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81998 {
    struct futhark_context *ctx;
    unsigned char *free_mem_80870;
    unsigned char *free_mem_80871;
    float *retval_defunc_2_reduce_res_80892;
    float *retval_defunc_2_reduce_res_80893;
    float *retval_defunc_2_reduce_res_80894;
    float *retval_defunc_2_reduce_res_80895;
    float *retval_defunc_2_reduce_res_80896;
    unsigned char *retval_mem_80890;
    unsigned char *retval_mem_80891;
};
struct futhark_mc_segred_stage_1_parloop_struct_82005 {
    struct futhark_context *ctx;
    unsigned char *free_mem_80870;
    unsigned char *free_mem_80871;
    unsigned char *free_mem_80890;
    unsigned char *free_mem_80891;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81478;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81480;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81482;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81484;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81486;
};
static int futhark_mc_segred_stage_1_parloop_82006(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_74180, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_82005
    *futhark_mc_segred_stage_1_parloop_struct_82005 =
    (struct futhark_mc_segred_stage_1_parloop_struct_82005 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_82005->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_82006_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82006_start = get_wall_time();
    
    struct memblock mem_80870 = {.desc ="mem_80870", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82005->free_mem_80870,
                                 .size =0, .references =NULL};
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82005->free_mem_80871,
                                 .size =0, .references =NULL};
    struct memblock mem_80890 = {.desc ="mem_80890", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82005->free_mem_80890,
                                 .size =0, .references =NULL};
    struct memblock mem_80891 = {.desc ="mem_80891", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82005->free_mem_80891,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81478 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81478",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82005->free_reduce_stage_1_tid_res_arr_mem_81478,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81480 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81480",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82005->free_reduce_stage_1_tid_res_arr_mem_81480,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81482 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81482",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82005->free_reduce_stage_1_tid_res_arr_mem_81482,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81484 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81484",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82005->free_reduce_stage_1_tid_res_arr_mem_81484,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81486 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81486",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82005->free_reduce_stage_1_tid_res_arr_mem_81486,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81488 = start;
    float x_81415;
    float x_81416;
    float x_81418;
    float x_81419;
    float x_81421;
    float x_81422;
    float x_81424;
    float x_81425;
    float x_81427;
    float x_81428;
    float local_acc_81489 = 0.0F;
    float local_acc_81490 = 0.0F;
    float local_acc_81491 = 0.0F;
    float local_acc_81492 = 0.0F;
    float local_acc_81493 = 0.0F;
    
    for (; iter_81488 < end; iter_81488++) {
        int64_t gtid_74181 = iter_81488;
        float x_81430 = ((float *) mem_80870.mem)[gtid_74181];
        float x_81431 = ((float *) mem_80871.mem)[gtid_74181];
        float defunc_1_f_res_81432 = x_81430 * x_81431;
        float defunc_1_f_res_81433 = x_81430 * defunc_1_f_res_81432;
        float defunc_1_f_res_81434 = x_81430 * defunc_1_f_res_81433;
        float defunc_1_f_res_81435 = x_81430 * defunc_1_f_res_81434;
        
        // save map-out results
        {
            ((float *) mem_80890.mem)[gtid_74181] = defunc_1_f_res_81433;
            ((float *) mem_80891.mem)[gtid_74181] = defunc_1_f_res_81432;
        }
        // Load accum params
        {
            x_81415 = local_acc_81489;
        }
        // Load next params
        {
            x_81416 = x_81431;
        }
        // Red body
        {
            float defunc_1_op_res_81417 = x_81415 + x_81416;
            
            local_acc_81489 = defunc_1_op_res_81417;
        }
        // Load accum params
        {
            x_81418 = local_acc_81490;
        }
        // Load next params
        {
            x_81419 = defunc_1_f_res_81432;
        }
        // Red body
        {
            float defunc_1_op_res_81420 = x_81418 + x_81419;
            
            local_acc_81490 = defunc_1_op_res_81420;
        }
        // Load accum params
        {
            x_81421 = local_acc_81491;
        }
        // Load next params
        {
            x_81422 = defunc_1_f_res_81433;
        }
        // Red body
        {
            float defunc_1_op_res_81423 = x_81421 + x_81422;
            
            local_acc_81491 = defunc_1_op_res_81423;
        }
        // Load accum params
        {
            x_81424 = local_acc_81492;
        }
        // Load next params
        {
            x_81425 = defunc_1_f_res_81434;
        }
        // Red body
        {
            float defunc_1_op_res_81426 = x_81424 + x_81425;
            
            local_acc_81492 = defunc_1_op_res_81426;
        }
        // Load accum params
        {
            x_81427 = local_acc_81493;
        }
        // Load next params
        {
            x_81428 = defunc_1_f_res_81435;
        }
        // Red body
        {
            float defunc_1_op_res_81429 = x_81427 + x_81428;
            
            local_acc_81493 = defunc_1_op_res_81429;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_81478.mem)[flat_tid_74180] =
        local_acc_81489;
    ((float *) reduce_stage_1_tid_res_arr_mem_81480.mem)[flat_tid_74180] =
        local_acc_81490;
    ((float *) reduce_stage_1_tid_res_arr_mem_81482.mem)[flat_tid_74180] =
        local_acc_81491;
    ((float *) reduce_stage_1_tid_res_arr_mem_81484.mem)[flat_tid_74180] =
        local_acc_81492;
    ((float *) reduce_stage_1_tid_res_arr_mem_81486.mem)[flat_tid_74180] =
        local_acc_81493;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82006_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82006_end -
                 futhark_mc_segred_stage_1_parloop_82006_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_82006_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_82006_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_82006_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81999(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74180 = tid;
    int num_tasks_81477 = info.nsubtasks;
    struct futhark_mc_task_81998 *futhark_mc_task_81998 =
                                 (struct futhark_mc_task_81998 *) args;
    struct futhark_context *ctx = futhark_mc_task_81998->ctx;
    uint64_t futhark_mc_segred_task_81999_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81999_start = get_wall_time();
    
    struct memblock mem_80870 = {.desc ="mem_80870", .mem =
                                 futhark_mc_task_81998->free_mem_80870, .size =
                                 0, .references =NULL};
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_task_81998->free_mem_80871, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_80892 =
          *futhark_mc_task_81998->retval_defunc_2_reduce_res_80892;
    float defunc_2_reduce_res_80893 =
          *futhark_mc_task_81998->retval_defunc_2_reduce_res_80893;
    float defunc_2_reduce_res_80894 =
          *futhark_mc_task_81998->retval_defunc_2_reduce_res_80894;
    float defunc_2_reduce_res_80895 =
          *futhark_mc_task_81998->retval_defunc_2_reduce_res_80895;
    float defunc_2_reduce_res_80896 =
          *futhark_mc_task_81998->retval_defunc_2_reduce_res_80896;
    struct memblock mem_80890 = {.desc ="mem_80890", .mem =
                                 futhark_mc_task_81998->retval_mem_80890,
                                 .size =0, .references =NULL};
    struct memblock mem_80891 = {.desc ="mem_80891", .mem =
                                 futhark_mc_task_81998->retval_mem_80891,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_81478_cached_sizze_82000 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81478 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81480_cached_sizze_82001 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81480 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81482_cached_sizze_82002 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81482 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81484_cached_sizze_82003 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81484 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81486_cached_sizze_82004 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81486 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_81478_cached_sizze_82000 <
        (size_t) ((int64_t) 4 * num_tasks_81477)) {
        reduce_stage_1_tid_res_arr_mem_81478 =
            realloc(reduce_stage_1_tid_res_arr_mem_81478, (int64_t) 4 *
                    num_tasks_81477);
        reduce_stage_1_tid_res_arr_mem_81478_cached_sizze_82000 = (int64_t) 4 *
            num_tasks_81477;
    }
    if (reduce_stage_1_tid_res_arr_mem_81480_cached_sizze_82001 <
        (size_t) ((int64_t) 4 * num_tasks_81477)) {
        reduce_stage_1_tid_res_arr_mem_81480 =
            realloc(reduce_stage_1_tid_res_arr_mem_81480, (int64_t) 4 *
                    num_tasks_81477);
        reduce_stage_1_tid_res_arr_mem_81480_cached_sizze_82001 = (int64_t) 4 *
            num_tasks_81477;
    }
    if (reduce_stage_1_tid_res_arr_mem_81482_cached_sizze_82002 <
        (size_t) ((int64_t) 4 * num_tasks_81477)) {
        reduce_stage_1_tid_res_arr_mem_81482 =
            realloc(reduce_stage_1_tid_res_arr_mem_81482, (int64_t) 4 *
                    num_tasks_81477);
        reduce_stage_1_tid_res_arr_mem_81482_cached_sizze_82002 = (int64_t) 4 *
            num_tasks_81477;
    }
    if (reduce_stage_1_tid_res_arr_mem_81484_cached_sizze_82003 <
        (size_t) ((int64_t) 4 * num_tasks_81477)) {
        reduce_stage_1_tid_res_arr_mem_81484 =
            realloc(reduce_stage_1_tid_res_arr_mem_81484, (int64_t) 4 *
                    num_tasks_81477);
        reduce_stage_1_tid_res_arr_mem_81484_cached_sizze_82003 = (int64_t) 4 *
            num_tasks_81477;
    }
    if (reduce_stage_1_tid_res_arr_mem_81486_cached_sizze_82004 <
        (size_t) ((int64_t) 4 * num_tasks_81477)) {
        reduce_stage_1_tid_res_arr_mem_81486 =
            realloc(reduce_stage_1_tid_res_arr_mem_81486, (int64_t) 4 *
                    num_tasks_81477);
        reduce_stage_1_tid_res_arr_mem_81486_cached_sizze_82004 = (int64_t) 4 *
            num_tasks_81477;
    }
    
    int64_t iter_81488;
    struct futhark_mc_segred_stage_1_parloop_struct_82005
    futhark_mc_segred_stage_1_parloop_struct_82005;
    
    futhark_mc_segred_stage_1_parloop_struct_82005.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_mem_80870 =
        mem_80870.mem;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_mem_80871 =
        mem_80871.mem;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_mem_80890 =
        mem_80890.mem;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_mem_80891 =
        mem_80891.mem;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_reduce_stage_1_tid_res_arr_mem_81478 =
        reduce_stage_1_tid_res_arr_mem_81478;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_reduce_stage_1_tid_res_arr_mem_81480 =
        reduce_stage_1_tid_res_arr_mem_81480;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_reduce_stage_1_tid_res_arr_mem_81482 =
        reduce_stage_1_tid_res_arr_mem_81482;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_reduce_stage_1_tid_res_arr_mem_81484 =
        reduce_stage_1_tid_res_arr_mem_81484;
    futhark_mc_segred_stage_1_parloop_struct_82005.free_reduce_stage_1_tid_res_arr_mem_81486 =
        reduce_stage_1_tid_res_arr_mem_81486;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_82006_task;
    
    futhark_mc_segred_stage_1_parloop_82006_task.name =
        "futhark_mc_segred_stage_1_parloop_82006";
    futhark_mc_segred_stage_1_parloop_82006_task.fn =
        futhark_mc_segred_stage_1_parloop_82006;
    futhark_mc_segred_stage_1_parloop_82006_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_82005;
    futhark_mc_segred_stage_1_parloop_82006_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_82006_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_82006_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82006_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_82006_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_82006_task);
    
    if (futhark_mc_segred_stage_1_parloop_82006_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82006_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82006_total_end -
                 futhark_mc_segred_stage_1_parloop_82006_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82006_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82006_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82006_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80892 = 0.0F;
        defunc_2_reduce_res_80893 = 0.0F;
        defunc_2_reduce_res_80894 = 0.0F;
        defunc_2_reduce_res_80895 = 0.0F;
        defunc_2_reduce_res_80896 = 0.0F;
    }
    
    float x_81494;
    float x_81495;
    float x_81497;
    float x_81498;
    float x_81500;
    float x_81501;
    float x_81503;
    float x_81504;
    float x_81506;
    float x_81507;
    
    for (int32_t i_81509 = 0; i_81509 < num_tasks_81477; i_81509++) {
        flat_tid_74180 = i_81509;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_81494 = defunc_2_reduce_res_80892;
            }
            // load next params
            {
                x_81495 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81478)[flat_tid_74180];
            }
            // red body
            {
                float defunc_1_op_res_81496 = x_81494 + x_81495;
                
                defunc_2_reduce_res_80892 = defunc_1_op_res_81496;
            }
            // load acc params
            {
                x_81497 = defunc_2_reduce_res_80893;
            }
            // load next params
            {
                x_81498 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81480)[flat_tid_74180];
            }
            // red body
            {
                float defunc_1_op_res_81499 = x_81497 + x_81498;
                
                defunc_2_reduce_res_80893 = defunc_1_op_res_81499;
            }
            // load acc params
            {
                x_81500 = defunc_2_reduce_res_80894;
            }
            // load next params
            {
                x_81501 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81482)[flat_tid_74180];
            }
            // red body
            {
                float defunc_1_op_res_81502 = x_81500 + x_81501;
                
                defunc_2_reduce_res_80894 = defunc_1_op_res_81502;
            }
            // load acc params
            {
                x_81503 = defunc_2_reduce_res_80895;
            }
            // load next params
            {
                x_81504 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81484)[flat_tid_74180];
            }
            // red body
            {
                float defunc_1_op_res_81505 = x_81503 + x_81504;
                
                defunc_2_reduce_res_80895 = defunc_1_op_res_81505;
            }
            // load acc params
            {
                x_81506 = defunc_2_reduce_res_80896;
            }
            // load next params
            {
                x_81507 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81486)[flat_tid_74180];
            }
            // red body
            {
                float defunc_1_op_res_81508 = x_81506 + x_81507;
                
                defunc_2_reduce_res_80896 = defunc_1_op_res_81508;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_81478);
    free(reduce_stage_1_tid_res_arr_mem_81480);
    free(reduce_stage_1_tid_res_arr_mem_81482);
    free(reduce_stage_1_tid_res_arr_mem_81484);
    free(reduce_stage_1_tid_res_arr_mem_81486);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81999_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81999_end -
                 futhark_mc_segred_task_81999_start;
        
        ctx->futhark_mc_segred_task_81999_runs[tid]++;
        ctx->futhark_mc_segred_task_81999_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81999_iter[tid] += iterations;
    }
    *futhark_mc_task_81998->retval_defunc_2_reduce_res_80892 =
        defunc_2_reduce_res_80892;
    *futhark_mc_task_81998->retval_defunc_2_reduce_res_80893 =
        defunc_2_reduce_res_80893;
    *futhark_mc_task_81998->retval_defunc_2_reduce_res_80894 =
        defunc_2_reduce_res_80894;
    *futhark_mc_task_81998->retval_defunc_2_reduce_res_80895 =
        defunc_2_reduce_res_80895;
    *futhark_mc_task_81998->retval_defunc_2_reduce_res_80896 =
        defunc_2_reduce_res_80896;
    futhark_mc_task_81998->retval_mem_80890 = mem_80890.mem;
    futhark_mc_task_81998->retval_mem_80891 = mem_80891.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82007 {
    struct futhark_context *ctx;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76049;
    int64_t free_max_res_80850;
    unsigned char *free_mem_80871;
    unsigned char *free_mem_80890;
    unsigned char *free_mem_80891;
    float free_a12_80940;
    float free_b12_80941;
    float free_c12_80942;
    float free_b2_80943;
    float free_c2_80944;
    float *retval_defunc_2_reduce_res_80945;
    float *retval_defunc_2_reduce_res_80946;
};
struct futhark_mc_segred_stage_1_parloop_struct_82011 {
    struct futhark_context *ctx;
    int64_t free_last_res_74380;
    unsigned char *free_mem_76049;
    int64_t free_max_res_80850;
    unsigned char *free_mem_80871;
    unsigned char *free_mem_80890;
    unsigned char *free_mem_80891;
    float free_a12_80940;
    float free_b12_80941;
    float free_c12_80942;
    float free_b2_80943;
    float free_c2_80944;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81511;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81513;
};
static int futhark_mc_segred_stage_1_parloop_82012(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_74182, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_82011
    *futhark_mc_segred_stage_1_parloop_struct_82011 =
    (struct futhark_mc_segred_stage_1_parloop_struct_82011 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_82011->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_82012_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82012_start = get_wall_time();
    
    int64_t last_res_74380 =
            futhark_mc_segred_stage_1_parloop_struct_82011->free_last_res_74380;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82011->free_mem_76049,
                                 .size =0, .references =NULL};
    int64_t max_res_80850 =
            futhark_mc_segred_stage_1_parloop_struct_82011->free_max_res_80850;
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82011->free_mem_80871,
                                 .size =0, .references =NULL};
    struct memblock mem_80890 = {.desc ="mem_80890", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82011->free_mem_80890,
                                 .size =0, .references =NULL};
    struct memblock mem_80891 = {.desc ="mem_80891", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82011->free_mem_80891,
                                 .size =0, .references =NULL};
    float a12_80940 =
          futhark_mc_segred_stage_1_parloop_struct_82011->free_a12_80940;
    float b12_80941 =
          futhark_mc_segred_stage_1_parloop_struct_82011->free_b12_80941;
    float c12_80942 =
          futhark_mc_segred_stage_1_parloop_struct_82011->free_c12_80942;
    float b2_80943 =
          futhark_mc_segred_stage_1_parloop_struct_82011->free_b2_80943;
    float c2_80944 =
          futhark_mc_segred_stage_1_parloop_struct_82011->free_c2_80944;
    struct memblock reduce_stage_1_tid_res_arr_mem_81511 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81511",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82011->free_reduce_stage_1_tid_res_arr_mem_81511,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81513 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81513",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82011->free_reduce_stage_1_tid_res_arr_mem_81513,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81515 = start;
    float x_81436;
    float x_81437;
    float x_81439;
    float x_81440;
    float local_acc_81516 = 0.0F;
    float local_acc_81517 = 0.0F;
    
    for (; iter_81515 < end; iter_81515++) {
        int64_t gtid_74183 = iter_81515;
        float x_81442 = ((float *) mem_80871.mem)[gtid_74183];
        float x_81443 = ((float *) mem_80891.mem)[gtid_74183];
        float x_81444 = ((float *) mem_80890.mem)[gtid_74183];
        bool cond_81445 = sle64(last_res_74380, gtid_74183);
        float defunc_0_f_res_81446;
        
        if (cond_81445) {
            defunc_0_f_res_81446 = 0.0F;
        } else {
            int64_t i_81447 = add64(gtid_74183, max_res_80850);
            float defunc_0_add_arg_81448 = ((float *) mem_76049.mem)[i_81447];
            
            defunc_0_f_res_81446 = defunc_0_add_arg_81448;
        }
        
        float x_81449 = a12_80940 * x_81442;
        float y_81450 = b12_80941 * x_81443;
        float x_81451 = x_81449 + y_81450;
        float y_81452 = c12_80942 * x_81444;
        float x_81453 = x_81451 + y_81452;
        float defunc_9_fit_fun_res_81454 = defunc_0_f_res_81446 * x_81453;
        float x_81455 = b12_80941 * x_81442;
        float y_81456 = b2_80943 * x_81443;
        float x_81457 = x_81455 + y_81456;
        float y_81458 = c2_80944 * x_81444;
        float x_81459 = x_81457 + y_81458;
        float defunc_9_slope_fun_res_81460 = defunc_0_f_res_81446 * x_81459;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_81436 = local_acc_81516;
        }
        // Load next params
        {
            x_81437 = defunc_9_fit_fun_res_81454;
        }
        // Red body
        {
            float defunc_1_op_res_81438 = x_81436 + x_81437;
            
            local_acc_81516 = defunc_1_op_res_81438;
        }
        // Load accum params
        {
            x_81439 = local_acc_81517;
        }
        // Load next params
        {
            x_81440 = defunc_9_slope_fun_res_81460;
        }
        // Red body
        {
            float defunc_1_op_res_81441 = x_81439 + x_81440;
            
            local_acc_81517 = defunc_1_op_res_81441;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_81511.mem)[flat_tid_74182] =
        local_acc_81516;
    ((float *) reduce_stage_1_tid_res_arr_mem_81513.mem)[flat_tid_74182] =
        local_acc_81517;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82012_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82012_end -
                 futhark_mc_segred_stage_1_parloop_82012_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_82012_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_82012_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_82012_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_82008(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74182 = tid;
    int num_tasks_81510 = info.nsubtasks;
    struct futhark_mc_task_82007 *futhark_mc_task_82007 =
                                 (struct futhark_mc_task_82007 *) args;
    struct futhark_context *ctx = futhark_mc_task_82007->ctx;
    uint64_t futhark_mc_segred_task_82008_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_82008_start = get_wall_time();
    
    int64_t last_res_74380 = futhark_mc_task_82007->free_last_res_74380;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_task_82007->free_mem_76049, .size =
                                 0, .references =NULL};
    int64_t max_res_80850 = futhark_mc_task_82007->free_max_res_80850;
    struct memblock mem_80871 = {.desc ="mem_80871", .mem =
                                 futhark_mc_task_82007->free_mem_80871, .size =
                                 0, .references =NULL};
    struct memblock mem_80890 = {.desc ="mem_80890", .mem =
                                 futhark_mc_task_82007->free_mem_80890, .size =
                                 0, .references =NULL};
    struct memblock mem_80891 = {.desc ="mem_80891", .mem =
                                 futhark_mc_task_82007->free_mem_80891, .size =
                                 0, .references =NULL};
    float a12_80940 = futhark_mc_task_82007->free_a12_80940;
    float b12_80941 = futhark_mc_task_82007->free_b12_80941;
    float c12_80942 = futhark_mc_task_82007->free_c12_80942;
    float b2_80943 = futhark_mc_task_82007->free_b2_80943;
    float c2_80944 = futhark_mc_task_82007->free_c2_80944;
    float defunc_2_reduce_res_80945 =
          *futhark_mc_task_82007->retval_defunc_2_reduce_res_80945;
    float defunc_2_reduce_res_80946 =
          *futhark_mc_task_82007->retval_defunc_2_reduce_res_80946;
    size_t reduce_stage_1_tid_res_arr_mem_81511_cached_sizze_82009 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81511 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81513_cached_sizze_82010 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81513 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_81511_cached_sizze_82009 <
        (size_t) ((int64_t) 4 * num_tasks_81510)) {
        reduce_stage_1_tid_res_arr_mem_81511 =
            realloc(reduce_stage_1_tid_res_arr_mem_81511, (int64_t) 4 *
                    num_tasks_81510);
        reduce_stage_1_tid_res_arr_mem_81511_cached_sizze_82009 = (int64_t) 4 *
            num_tasks_81510;
    }
    if (reduce_stage_1_tid_res_arr_mem_81513_cached_sizze_82010 <
        (size_t) ((int64_t) 4 * num_tasks_81510)) {
        reduce_stage_1_tid_res_arr_mem_81513 =
            realloc(reduce_stage_1_tid_res_arr_mem_81513, (int64_t) 4 *
                    num_tasks_81510);
        reduce_stage_1_tid_res_arr_mem_81513_cached_sizze_82010 = (int64_t) 4 *
            num_tasks_81510;
    }
    
    int64_t iter_81515;
    struct futhark_mc_segred_stage_1_parloop_struct_82011
    futhark_mc_segred_stage_1_parloop_struct_82011;
    
    futhark_mc_segred_stage_1_parloop_struct_82011.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_last_res_74380 =
        last_res_74380;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_mem_76049 =
        mem_76049.mem;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_max_res_80850 =
        max_res_80850;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_mem_80871 =
        mem_80871.mem;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_mem_80890 =
        mem_80890.mem;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_mem_80891 =
        mem_80891.mem;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_a12_80940 = a12_80940;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_b12_80941 = b12_80941;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_c12_80942 = c12_80942;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_b2_80943 = b2_80943;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_c2_80944 = c2_80944;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_reduce_stage_1_tid_res_arr_mem_81511 =
        reduce_stage_1_tid_res_arr_mem_81511;
    futhark_mc_segred_stage_1_parloop_struct_82011.free_reduce_stage_1_tid_res_arr_mem_81513 =
        reduce_stage_1_tid_res_arr_mem_81513;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_82012_task;
    
    futhark_mc_segred_stage_1_parloop_82012_task.name =
        "futhark_mc_segred_stage_1_parloop_82012";
    futhark_mc_segred_stage_1_parloop_82012_task.fn =
        futhark_mc_segred_stage_1_parloop_82012;
    futhark_mc_segred_stage_1_parloop_82012_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_82011;
    futhark_mc_segred_stage_1_parloop_82012_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_82012_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_82012_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82012_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_82012_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_82012_task);
    
    if (futhark_mc_segred_stage_1_parloop_82012_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82012_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82012_total_end -
                 futhark_mc_segred_stage_1_parloop_82012_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82012_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82012_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82012_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80945 = 0.0F;
        defunc_2_reduce_res_80946 = 0.0F;
    }
    
    float x_81518;
    float x_81519;
    float x_81521;
    float x_81522;
    
    for (int32_t i_81524 = 0; i_81524 < num_tasks_81510; i_81524++) {
        flat_tid_74182 = i_81524;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_81518 = defunc_2_reduce_res_80945;
            }
            // load next params
            {
                x_81519 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81511)[flat_tid_74182];
            }
            // red body
            {
                float defunc_1_op_res_81520 = x_81518 + x_81519;
                
                defunc_2_reduce_res_80945 = defunc_1_op_res_81520;
            }
            // load acc params
            {
                x_81521 = defunc_2_reduce_res_80946;
            }
            // load next params
            {
                x_81522 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81513)[flat_tid_74182];
            }
            // red body
            {
                float defunc_1_op_res_81523 = x_81521 + x_81522;
                
                defunc_2_reduce_res_80946 = defunc_1_op_res_81523;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_81511);
    free(reduce_stage_1_tid_res_arr_mem_81513);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_82008_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_82008_end -
                 futhark_mc_segred_task_82008_start;
        
        ctx->futhark_mc_segred_task_82008_runs[tid]++;
        ctx->futhark_mc_segred_task_82008_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_82008_iter[tid] += iterations;
    }
    *futhark_mc_task_82007->retval_defunc_2_reduce_res_80945 =
        defunc_2_reduce_res_80945;
    *futhark_mc_task_82007->retval_defunc_2_reduce_res_80946 =
        defunc_2_reduce_res_80946;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81989(void *args, int64_t start,
                                           int64_t end, int flat_tid_74176,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81988
    *futhark_mc_segmap_parloop_struct_81988 =
    (struct futhark_mc_segmap_parloop_struct_81988 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81988->ctx;
    uint64_t futhark_mc_segmap_parloop_81989_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81989_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81988->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81988->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81988->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81988->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81988->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81988->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81988->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81988->free_loop_cond_70258;
    int64_t last_res_74380 =
            futhark_mc_segmap_parloop_struct_81988->free_last_res_74380;
    int64_t min_arg_74395 =
            futhark_mc_segmap_parloop_struct_81988->free_min_arg_74395;
    int64_t min_arg_74396 =
            futhark_mc_segmap_parloop_struct_81988->free_min_arg_74396;
    int64_t min_res_74397 =
            futhark_mc_segmap_parloop_struct_81988->free_min_res_74397;
    float max_res_74401 =
          futhark_mc_segmap_parloop_struct_81988->free_max_res_74401;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76049,
                                 .size =0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76052,
                                 .size =0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76055,
                                 .size =0, .references =NULL};
    int64_t bytes_76057 =
            futhark_mc_segmap_parloop_struct_81988->free_bytes_76057;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76058,
                                 .size =0, .references =NULL};
    struct memblock mem_76133 = {.desc ="mem_76133", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76133,
                                 .size =0, .references =NULL};
    struct memblock mem_76136 = {.desc ="mem_76136", .mem =
                                 futhark_mc_segmap_parloop_struct_81988->free_mem_76136,
                                 .size =0, .references =NULL};
    size_t mem_80870_cached_sizze_81990 = 0;
    unsigned char *mem_80870 = NULL;
    size_t mem_80871_cached_sizze_81991 = 0;
    unsigned char *mem_80871 = NULL;
    size_t mem_80890_cached_sizze_81992 = 0;
    unsigned char *mem_80890 = NULL;
    size_t mem_80891_cached_sizze_81993 = 0;
    unsigned char *mem_80891 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81343 = start;
    
    if (mem_80870_cached_sizze_81990 < (size_t) bytes_76057) {
        mem_80870 = realloc(mem_80870, bytes_76057);
        mem_80870_cached_sizze_81990 = bytes_76057;
    }
    if (mem_80871_cached_sizze_81991 < (size_t) bytes_76057) {
        mem_80871 = realloc(mem_80871, bytes_76057);
        mem_80871_cached_sizze_81991 = bytes_76057;
    }
    if (mem_80890_cached_sizze_81992 < (size_t) bytes_76057) {
        mem_80890 = realloc(mem_80890, bytes_76057);
        mem_80890_cached_sizze_81992 = bytes_76057;
    }
    if (mem_80891_cached_sizze_81993 < (size_t) bytes_76057) {
        mem_80891 = realloc(mem_80891, bytes_76057);
        mem_80891_cached_sizze_81993 = bytes_76057;
    }
    for (; iter_81343 < end; iter_81343++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81461 = n_m_70241;
        int64_t gtid_74177 = iter_81343;
        int64_t remnant_81462 = iter_81343 - gtid_74177;
        int64_t min_arg_80784 = mul64(jump_70237, gtid_74177);
        int64_t min_res_80785 = smin64(i_70247, min_arg_80784);
        int64_t defunc_0_g_res_80786 = add64((int64_t) 1, min_res_80785);
        bool init_idx_80787;
        int64_t init_idx_80788;
        int64_t init_idx_80789;
        bool loop_while_81344;
        int64_t low_81345;
        int64_t high_81346;
        
        loop_while_81344 = x_70248;
        low_81345 = (int64_t) 0;
        high_81346 = i_70247;
        while (loop_while_81344) {
            int64_t x_81347 = add64(low_81345, high_81346);
            int64_t mid_81348 = sdiv64(x_81347, (int64_t) 2);
            bool x_81349 = sle64((int64_t) 0, mid_81348);
            bool y_81350 = slt64(mid_81348, n_70233);
            bool bounds_check_81351 = x_81349 && y_81350;
            bool index_certs_81352;
            
            if (!bounds_check_81351) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_81348,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t mid_id_81353 = ((int64_t *) mem_76055.mem)[mid_81348];
            bool cond_81354 = slt64(mid_id_81353, (int64_t) 0);
            int64_t mid_idx_81355;
            
            if (cond_81354) {
                mid_idx_81355 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_81355 = mid_id_81353;
            }
            
            bool cond_81356 = sle64(defunc_0_g_res_80786, mid_idx_81355);
            int64_t loopres_81357;
            int64_t loopres_81358;
            
            if (cond_81356) {
                int64_t loopres_t_res_81359 = sub64(mid_81348, (int64_t) 1);
                
                loopres_81357 = low_81345;
                loopres_81358 = loopres_t_res_81359;
            } else {
                int64_t loopres_f_res_81360 = add64((int64_t) 1, mid_81348);
                
                loopres_81357 = loopres_f_res_81360;
                loopres_81358 = high_81346;
            }
            
            bool loop_cond_81361 = sle64(loopres_81357, loopres_81358);
            bool loop_while_tmp_81463 = loop_cond_81361;
            int64_t low_tmp_81464 = loopres_81357;
            int64_t high_tmp_81465 = loopres_81358;
            
            loop_while_81344 = loop_while_tmp_81463;
            low_81345 = low_tmp_81464;
            high_81346 = high_tmp_81465;
        }
        init_idx_80787 = loop_while_81344;
        init_idx_80788 = low_81345;
        init_idx_80789 = high_81346;
        
        bool idx_80808;
        int64_t idx_80809;
        int64_t idx_80810;
        int64_t idx_80811;
        bool loop_while_81362;
        int64_t l_idx_81363;
        int64_t r_idx_81364;
        int64_t span_81365;
        
        loop_while_81362 = loop_cond_70258;
        l_idx_81363 = init_idx_80788;
        r_idx_81364 = init_idx_80788;
        span_81365 = (int64_t) 1;
        while (loop_while_81362) {
            int64_t max_arg_81366 = sub64(l_idx_81363, (int64_t) 1);
            int64_t max_res_81367 = smax64((int64_t) 0, max_arg_81366);
            int64_t min_arg_81368 = add64((int64_t) 1, r_idx_81364);
            int64_t min_res_81369 = smin64(min_arg_74395, min_arg_81368);
            bool x_81370 = sle64((int64_t) 0, max_res_81367);
            bool y_81371 = slt64(max_res_81367, n_70233);
            bool bounds_check_81372 = x_81370 && y_81371;
            bool index_certs_81373;
            
            if (!bounds_check_81372) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_81367,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_81374 = ((int64_t *) mem_76055.mem)[max_res_81367];
            int64_t abs_arg_81375 = sub64(x_81374, defunc_0_g_res_80786);
            int64_t abs_res_81376 = abs64(abs_arg_81375);
            bool x_81377 = sle64((int64_t) 0, min_res_81369);
            bool y_81378 = slt64(min_res_81369, n_70233);
            bool bounds_check_81379 = x_81377 && y_81378;
            bool index_certs_81380;
            
            if (!bounds_check_81379) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_81369,
                              "] out of bounds for array of shape [",
                              (long long) n_70233, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:588:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:587:5-589:26\n   #10 loess.fut:571:1-610:26\n");
                return 1;
            }
            
            int64_t x_81381 = ((int64_t *) mem_76055.mem)[min_res_81369];
            int64_t abs_arg_81382 = sub64(x_81381, defunc_0_g_res_80786);
            int64_t abs_res_81383 = abs64(abs_arg_81382);
            bool cond_81384 = max_res_81367 == l_idx_81363;
            int64_t loopres_81385;
            int64_t loopres_81386;
            int64_t loopres_81387;
            
            if (cond_81384) {
                loopres_81385 = l_idx_81363;
                loopres_81386 = r_idx_81364;
                loopres_81387 = min_res_70253;
            } else {
                bool cond_81388 = slt64(abs_res_81376, abs_res_81383);
                bool cond_f_res_81389 = min_res_81369 == r_idx_81364;
                bool x_81390 = !cond_81388;
                bool y_81391 = cond_f_res_81389 && x_81390;
                bool cond_81392 = cond_81388 || y_81391;
                int64_t loopres_f_res_81393;
                
                if (cond_81392) {
                    loopres_f_res_81393 = max_res_81367;
                } else {
                    loopres_f_res_81393 = l_idx_81363;
                }
                
                int64_t loopres_f_res_81394;
                
                if (cond_81392) {
                    loopres_f_res_81394 = r_idx_81364;
                } else {
                    loopres_f_res_81394 = min_res_81369;
                }
                
                int64_t loopres_f_res_81395;
                
                if (cond_81392) {
                    int64_t loopres_f_res_t_res_81396 = add64((int64_t) 1,
                                                              span_81365);
                    
                    loopres_f_res_81395 = loopres_f_res_t_res_81396;
                } else {
                    int64_t loopres_f_res_f_res_81397 = add64((int64_t) 1,
                                                              span_81365);
                    
                    loopres_f_res_81395 = loopres_f_res_f_res_81397;
                }
                loopres_81385 = loopres_f_res_81393;
                loopres_81386 = loopres_f_res_81394;
                loopres_81387 = loopres_f_res_81395;
            }
            
            bool loop_cond_81398 = slt64(loopres_81387, min_res_70253);
            bool loop_while_tmp_81466 = loop_cond_81398;
            int64_t l_idx_tmp_81467 = loopres_81385;
            int64_t r_idx_tmp_81468 = loopres_81386;
            int64_t span_tmp_81469 = loopres_81387;
            
            loop_while_81362 = loop_while_tmp_81466;
            l_idx_81363 = l_idx_tmp_81467;
            r_idx_81364 = r_idx_tmp_81468;
            span_81365 = span_tmp_81469;
        }
        idx_80808 = loop_while_81362;
        idx_80809 = l_idx_81363;
        idx_80810 = r_idx_81364;
        idx_80811 = span_81365;
        
        int64_t min_res_80849 = smin64(min_arg_74396, idx_80809);
        int64_t max_res_80850 = smax64((int64_t) 0, min_res_80849);
        int64_t x_80851 = add64(min_res_74397, max_res_80850);
        int64_t r_80852 = sub64(x_80851, (int64_t) 1);
        bool x_80853 = sle64((int64_t) 0, r_80852);
        bool y_80854 = slt64(r_80852, n_70233);
        bool bounds_check_80855 = x_80853 && y_80854;
        bool index_certs_80856;
        
        if (!bounds_check_80855) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_80852,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_80857 = ((int64_t *) mem_76052.mem)[r_80852];
        int64_t abs_arg_80858 = sub64(x_80857, min_res_80785);
        int64_t abs_res_80859 = abs64(abs_arg_80858);
        bool x_80860 = sle64((int64_t) 0, max_res_80850);
        bool y_80861 = slt64(max_res_80850, n_70233);
        bool bounds_check_80862 = x_80860 && y_80861;
        bool index_certs_80863;
        
        if (!bounds_check_80862) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_80850,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70233, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:18-55\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        int64_t x_80864 = ((int64_t *) mem_76052.mem)[max_res_80850];
        int64_t abs_arg_80865 = sub64(x_80864, min_res_80785);
        int64_t abs_res_80866 = abs64(abs_arg_80865);
        int64_t max_res_80867 = smax64(abs_res_80859, abs_res_80866);
        float defunc_0_f_res_80868 = sitofp_i64_f32(max_res_80867);
        float defunc_1_f_res_80869 = max_res_74401 + defunc_0_f_res_80868;
        int64_t flat_tid_74178 = (int64_t) 0;
        int32_t num_tasks_81470;
        struct futhark_mc_task_81994 futhark_mc_task_81994;
        
        futhark_mc_task_81994.ctx = ctx;
        futhark_mc_task_81994.free_q_70235 = q_70235;
        futhark_mc_task_81994.free_last_res_74380 = last_res_74380;
        futhark_mc_task_81994.free_mem_76052 = mem_76052.mem;
        futhark_mc_task_81994.free_mem_76058 = mem_76058.mem;
        futhark_mc_task_81994.free_min_res_80785 = min_res_80785;
        futhark_mc_task_81994.free_max_res_80850 = max_res_80850;
        futhark_mc_task_81994.free_defunc_1_f_res_80869 = defunc_1_f_res_80869;
        futhark_mc_task_81994.free_mem_80870 = mem_80870;
        futhark_mc_task_81994.free_mem_80871 = mem_80871;
        
        struct scheduler_segop futhark_mc_task_81994_task;
        
        futhark_mc_task_81994_task.args = &futhark_mc_task_81994;
        futhark_mc_task_81994_task.top_level_fn = futhark_mc_segmap_task_81995;
        futhark_mc_task_81994_task.name = "futhark_mc_segmap_task_81995";
        futhark_mc_task_81994_task.iterations = q_70235;
        futhark_mc_task_81994_task.task_time =
            &ctx->futhark_mc_segmap_task_81995_total_time;
        futhark_mc_task_81994_task.task_iter =
            &ctx->futhark_mc_segmap_task_81995_total_iter;
        futhark_mc_task_81994_task.sched = STATIC;
        futhark_mc_task_81994_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81995_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81994_task);
        
        if (futhark_mc_segmap_task_81995_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_80892;
        float defunc_2_reduce_res_80893;
        float defunc_2_reduce_res_80894;
        float defunc_2_reduce_res_80895;
        float defunc_2_reduce_res_80896;
        int64_t flat_tid_74180 = (int64_t) 0;
        int32_t num_tasks_81477;
        struct futhark_mc_task_81998 futhark_mc_task_81998;
        
        futhark_mc_task_81998.ctx = ctx;
        futhark_mc_task_81998.free_mem_80870 = mem_80870;
        futhark_mc_task_81998.free_mem_80871 = mem_80871;
        futhark_mc_task_81998.retval_defunc_2_reduce_res_80892 =
            &defunc_2_reduce_res_80892;
        futhark_mc_task_81998.retval_defunc_2_reduce_res_80893 =
            &defunc_2_reduce_res_80893;
        futhark_mc_task_81998.retval_defunc_2_reduce_res_80894 =
            &defunc_2_reduce_res_80894;
        futhark_mc_task_81998.retval_defunc_2_reduce_res_80895 =
            &defunc_2_reduce_res_80895;
        futhark_mc_task_81998.retval_defunc_2_reduce_res_80896 =
            &defunc_2_reduce_res_80896;
        futhark_mc_task_81998.retval_mem_80890 = mem_80890;
        futhark_mc_task_81998.retval_mem_80891 = mem_80891;
        
        struct scheduler_segop futhark_mc_task_81998_task;
        
        futhark_mc_task_81998_task.args = &futhark_mc_task_81998;
        futhark_mc_task_81998_task.top_level_fn = futhark_mc_segred_task_81999;
        futhark_mc_task_81998_task.name = "futhark_mc_segred_task_81999";
        futhark_mc_task_81998_task.iterations = q_70235;
        futhark_mc_task_81998_task.task_time =
            &ctx->futhark_mc_segred_task_81999_total_time;
        futhark_mc_task_81998_task.task_iter =
            &ctx->futhark_mc_segred_task_81999_total_iter;
        futhark_mc_task_81998_task.sched = STATIC;
        futhark_mc_task_81998_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81999_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81998_task);
        
        if (futhark_mc_segred_task_81999_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_80920 = defunc_2_reduce_res_80894 * defunc_2_reduce_res_80896;
        float y_80921 = defunc_2_reduce_res_80895 * defunc_2_reduce_res_80895;
        float a12_80922 = x_80920 - y_80921;
        float x_80923 = defunc_2_reduce_res_80894 * defunc_2_reduce_res_80895;
        float y_80924 = defunc_2_reduce_res_80893 * defunc_2_reduce_res_80896;
        float b12_80925 = x_80923 - y_80924;
        float x_80926 = defunc_2_reduce_res_80893 * defunc_2_reduce_res_80895;
        float y_80927 = defunc_2_reduce_res_80894 * defunc_2_reduce_res_80894;
        float c12_80928 = x_80926 - y_80927;
        float x_80929 = defunc_2_reduce_res_80892 * defunc_2_reduce_res_80896;
        float b2_80930 = x_80929 - y_80927;
        float x_80931 = defunc_2_reduce_res_80893 * defunc_2_reduce_res_80894;
        float y_80932 = defunc_2_reduce_res_80892 * defunc_2_reduce_res_80895;
        float c2_80933 = x_80931 - y_80932;
        float x_80934 = defunc_2_reduce_res_80892 * a12_80922;
        float y_80935 = defunc_2_reduce_res_80893 * b12_80925;
        float x_80936 = x_80934 + y_80935;
        float y_80937 = defunc_2_reduce_res_80894 * c12_80928;
        float y_80938 = x_80936 + y_80937;
        float det_80939 = 1.0F / y_80938;
        float a12_80940 = a12_80922 * det_80939;
        float b12_80941 = b12_80925 * det_80939;
        float c12_80942 = c12_80928 * det_80939;
        float b2_80943 = b2_80930 * det_80939;
        float c2_80944 = c2_80933 * det_80939;
        float defunc_2_reduce_res_80945;
        float defunc_2_reduce_res_80946;
        int64_t flat_tid_74182 = (int64_t) 0;
        int32_t num_tasks_81510;
        struct futhark_mc_task_82007 futhark_mc_task_82007;
        
        futhark_mc_task_82007.ctx = ctx;
        futhark_mc_task_82007.free_last_res_74380 = last_res_74380;
        futhark_mc_task_82007.free_mem_76049 = mem_76049.mem;
        futhark_mc_task_82007.free_max_res_80850 = max_res_80850;
        futhark_mc_task_82007.free_mem_80871 = mem_80871;
        futhark_mc_task_82007.free_mem_80890 = mem_80890;
        futhark_mc_task_82007.free_mem_80891 = mem_80891;
        futhark_mc_task_82007.free_a12_80940 = a12_80940;
        futhark_mc_task_82007.free_b12_80941 = b12_80941;
        futhark_mc_task_82007.free_c12_80942 = c12_80942;
        futhark_mc_task_82007.free_b2_80943 = b2_80943;
        futhark_mc_task_82007.free_c2_80944 = c2_80944;
        futhark_mc_task_82007.retval_defunc_2_reduce_res_80945 =
            &defunc_2_reduce_res_80945;
        futhark_mc_task_82007.retval_defunc_2_reduce_res_80946 =
            &defunc_2_reduce_res_80946;
        
        struct scheduler_segop futhark_mc_task_82007_task;
        
        futhark_mc_task_82007_task.args = &futhark_mc_task_82007;
        futhark_mc_task_82007_task.top_level_fn = futhark_mc_segred_task_82008;
        futhark_mc_task_82007_task.name = "futhark_mc_segred_task_82008";
        futhark_mc_task_82007_task.iterations = q_70235;
        futhark_mc_task_82007_task.task_time =
            &ctx->futhark_mc_segred_task_82008_total_time;
        futhark_mc_task_82007_task.task_iter =
            &ctx->futhark_mc_segred_task_82008_total_iter;
        futhark_mc_task_82007_task.sched = STATIC;
        futhark_mc_task_82007_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_82008_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82007_task);
        
        if (futhark_mc_segred_task_82008_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_76133.mem)[gtid_74177] = defunc_2_reduce_res_80945;
        ((float *) mem_76136.mem)[gtid_74177] = defunc_2_reduce_res_80946;
    }
    
  cleanup:
    { }
    free(mem_80870);
    free(mem_80871);
    free(mem_80890);
    free(mem_80891);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81989_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81989_end -
                 futhark_mc_segmap_parloop_81989_start;
        
        ctx->futhark_mc_segmap_parloop_81989_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81989_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81989_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81987(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74176 = tid;
    int num_tasks_81200 = info.nsubtasks;
    struct futhark_mc_task_81979 *futhark_mc_task_81979 =
                                 (struct futhark_mc_task_81979 *) args;
    struct futhark_context *ctx = futhark_mc_task_81979->ctx;
    uint64_t futhark_mc_segmap_nested_task_81987_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81987_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_81979->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81979->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81979->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81979->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81979->free_i_70247;
    bool x_70248 = futhark_mc_task_81979->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81979->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81979->free_loop_cond_70258;
    int64_t last_res_74380 = futhark_mc_task_81979->free_last_res_74380;
    int64_t min_arg_74395 = futhark_mc_task_81979->free_min_arg_74395;
    int64_t min_arg_74396 = futhark_mc_task_81979->free_min_arg_74396;
    int64_t min_res_74397 = futhark_mc_task_81979->free_min_res_74397;
    float max_res_74401 = futhark_mc_task_81979->free_max_res_74401;
    struct memblock mem_76049 = {.desc ="mem_76049", .mem =
                                 futhark_mc_task_81979->free_mem_76049, .size =
                                 0, .references =NULL};
    struct memblock mem_76052 = {.desc ="mem_76052", .mem =
                                 futhark_mc_task_81979->free_mem_76052, .size =
                                 0, .references =NULL};
    struct memblock mem_76055 = {.desc ="mem_76055", .mem =
                                 futhark_mc_task_81979->free_mem_76055, .size =
                                 0, .references =NULL};
    int64_t bytes_76057 = futhark_mc_task_81979->free_bytes_76057;
    struct memblock mem_76058 = {.desc ="mem_76058", .mem =
                                 futhark_mc_task_81979->free_mem_76058, .size =
                                 0, .references =NULL};
    struct memblock mem_76133 = {.desc ="mem_76133", .mem =
                                 futhark_mc_task_81979->free_mem_76133, .size =
                                 0, .references =NULL};
    struct memblock mem_76136 = {.desc ="mem_76136", .mem =
                                 futhark_mc_task_81979->free_mem_76136, .size =
                                 0, .references =NULL};
    int64_t iter_81343;
    struct futhark_mc_segmap_parloop_struct_81988
    futhark_mc_segmap_parloop_struct_81988;
    
    futhark_mc_segmap_parloop_struct_81988.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81988.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81988.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81988.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81988.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81988.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81988.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81988.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81988.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81988.free_last_res_74380 = last_res_74380;
    futhark_mc_segmap_parloop_struct_81988.free_min_arg_74395 = min_arg_74395;
    futhark_mc_segmap_parloop_struct_81988.free_min_arg_74396 = min_arg_74396;
    futhark_mc_segmap_parloop_struct_81988.free_min_res_74397 = min_res_74397;
    futhark_mc_segmap_parloop_struct_81988.free_max_res_74401 = max_res_74401;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76049 = mem_76049.mem;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76052 = mem_76052.mem;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76055 = mem_76055.mem;
    futhark_mc_segmap_parloop_struct_81988.free_bytes_76057 = bytes_76057;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76058 = mem_76058.mem;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76133 = mem_76133.mem;
    futhark_mc_segmap_parloop_struct_81988.free_mem_76136 = mem_76136.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81989_task;
    
    futhark_mc_segmap_parloop_81989_task.name =
        "futhark_mc_segmap_parloop_81989";
    futhark_mc_segmap_parloop_81989_task.fn = futhark_mc_segmap_parloop_81989;
    futhark_mc_segmap_parloop_81989_task.args =
        &futhark_mc_segmap_parloop_struct_81988;
    futhark_mc_segmap_parloop_81989_task.iterations = iterations;
    futhark_mc_segmap_parloop_81989_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81989_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81989_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81989_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81989_task);
    
    if (futhark_mc_segmap_parloop_81989_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81989_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81989_total_end -
                 futhark_mc_segmap_parloop_81989_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81989_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81989_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81989_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81987_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81987_end -
                 futhark_mc_segmap_nested_task_81987_start;
        
        ctx->futhark_mc_segmap_nested_task_81987_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81987_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81987_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81952(void *args, int64_t start,
                                           int64_t end, int flat_tid_74164,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81951
    *futhark_mc_segmap_parloop_struct_81951 =
    (struct futhark_mc_segmap_parloop_struct_81951 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81951->ctx;
    uint64_t futhark_mc_segmap_parloop_81952_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81952_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_81951->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_81951->free_n_70233;
    int64_t q_70235 = futhark_mc_segmap_parloop_struct_81951->free_q_70235;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_81951->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_81951->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_81951->free_i_70247;
    bool x_70248 = futhark_mc_segmap_parloop_struct_81951->free_x_70248;
    int64_t min_res_70253 =
            futhark_mc_segmap_parloop_struct_81951->free_min_res_70253;
    bool loop_cond_70258 =
         futhark_mc_segmap_parloop_struct_81951->free_loop_cond_70258;
    float i64_res_70259 =
          futhark_mc_segmap_parloop_struct_81951->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_segmap_parloop_struct_81951->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_76045 =
            futhark_mc_segmap_parloop_struct_81951->free_bytes_76045;
    int64_t bytes_76048 =
            futhark_mc_segmap_parloop_struct_81951->free_bytes_76048;
    int64_t bytes_76057 =
            futhark_mc_segmap_parloop_struct_81951->free_bytes_76057;
    int64_t bytes_76132 =
            futhark_mc_segmap_parloop_struct_81951->free_bytes_76132;
    struct memblock mem_76305 = {.desc ="mem_76305", .mem =
                                 futhark_mc_segmap_parloop_struct_81951->free_mem_76305,
                                 .size =0, .references =NULL};
    struct memblock mem_76309 = {.desc ="mem_76309", .mem =
                                 futhark_mc_segmap_parloop_struct_81951->free_mem_76309,
                                 .size =0, .references =NULL};
    size_t mem_76046_cached_sizze_81953 = 0;
    unsigned char *mem_76046 = NULL;
    size_t mem_76049_cached_sizze_81954 = 0;
    unsigned char *mem_76049 = NULL;
    size_t mem_76052_cached_sizze_81955 = 0;
    unsigned char *mem_76052 = NULL;
    size_t mem_76055_cached_sizze_81956 = 0;
    unsigned char *mem_76055 = NULL;
    size_t mem_76058_cached_sizze_81957 = 0;
    unsigned char *mem_76058 = NULL;
    size_t mem_76133_cached_sizze_81958 = 0;
    unsigned char *mem_76133 = NULL;
    size_t mem_76136_cached_sizze_81959 = 0;
    unsigned char *mem_76136 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80766 = start;
    
    if (mem_76046_cached_sizze_81953 < (size_t) bytes_76045) {
        mem_76046 = realloc(mem_76046, bytes_76045);
        mem_76046_cached_sizze_81953 = bytes_76045;
    }
    if (mem_76049_cached_sizze_81954 < (size_t) bytes_76048) {
        mem_76049 = realloc(mem_76049, bytes_76048);
        mem_76049_cached_sizze_81954 = bytes_76048;
    }
    if (mem_76052_cached_sizze_81955 < (size_t) bytes_76045) {
        mem_76052 = realloc(mem_76052, bytes_76045);
        mem_76052_cached_sizze_81955 = bytes_76045;
    }
    if (mem_76055_cached_sizze_81956 < (size_t) bytes_76045) {
        mem_76055 = realloc(mem_76055, bytes_76045);
        mem_76055_cached_sizze_81956 = bytes_76045;
    }
    if (mem_76058_cached_sizze_81957 < (size_t) bytes_76057) {
        mem_76058 = realloc(mem_76058, bytes_76057);
        mem_76058_cached_sizze_81957 = bytes_76057;
    }
    if (mem_76133_cached_sizze_81958 < (size_t) bytes_76132) {
        mem_76133 = realloc(mem_76133, bytes_76132);
        mem_76133_cached_sizze_81958 = bytes_76132;
    }
    if (mem_76136_cached_sizze_81959 < (size_t) bytes_76132) {
        mem_76136 = realloc(mem_76136, bytes_76132);
        mem_76136_cached_sizze_81959 = bytes_76132;
    }
    for (; iter_80766 < end; iter_80766++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81168 = m_70232;
        int64_t gtid_74165 = iter_80766;
        int64_t remnant_81169 = iter_80766 - gtid_74165;
        int64_t flat_tid_74166 = (int64_t) 0;
        int32_t num_tasks_81170;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81960 futhark_mc_task_81960;
        
        futhark_mc_task_81960.ctx = ctx;
        futhark_mc_task_81960.free_n_70233 = n_70233;
        futhark_mc_task_81960.free_gtid_74165 = gtid_74165;
        futhark_mc_task_81960.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81960.free_mem_76046 = mem_76046;
        
        struct scheduler_segop futhark_mc_task_81960_task;
        
        futhark_mc_task_81960_task.args = &futhark_mc_task_81960;
        futhark_mc_task_81960_task.top_level_fn = futhark_mc_segscan_task_81961;
        futhark_mc_task_81960_task.name = "futhark_mc_segscan_task_81961";
        futhark_mc_task_81960_task.iterations = n_70233;
        futhark_mc_task_81960_task.task_time =
            &ctx->futhark_mc_segscan_task_81961_total_time;
        futhark_mc_task_81960_task.task_iter =
            &ctx->futhark_mc_segscan_task_81961_total_iter;
        futhark_mc_task_81960_task.sched = STATIC;
        futhark_mc_task_81960_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81961_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81960_task);
        
        if (futhark_mc_segscan_task_81961_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_74380 = ((int64_t *) mem_76046)[i_70247];
        
        for (int64_t i_81184 = 0; i_81184 < n_70233; i_81184++) {
            ((float *) mem_76049)[i_81184] = 0.0F;
        }
        for (int64_t i_81185 = 0; i_81185 < n_70233; i_81185++) {
            ((int64_t *) mem_76052)[i_81185] = (int64_t) -1;
        }
        
        int64_t flat_tid_74168 = (int64_t) 0;
        int32_t num_tasks_81186;
        struct futhark_mc_task_81967 futhark_mc_task_81967;
        
        futhark_mc_task_81967.ctx = ctx;
        futhark_mc_task_81967.free_n_70233 = n_70233;
        futhark_mc_task_81967.free_gtid_74165 = gtid_74165;
        futhark_mc_task_81967.free_Y_mem_75306 = Y_mem_75306.mem;
        futhark_mc_task_81967.free_mem_76046 = mem_76046;
        futhark_mc_task_81967.free_mem_76049 = mem_76049;
        futhark_mc_task_81967.free_mem_76052 = mem_76052;
        
        struct scheduler_segop futhark_mc_task_81967_task;
        
        futhark_mc_task_81967_task.args = &futhark_mc_task_81967;
        futhark_mc_task_81967_task.top_level_fn = futhark_mc_segmap_task_81968;
        futhark_mc_task_81967_task.name = "futhark_mc_segmap_task_81968";
        futhark_mc_task_81967_task.iterations = n_70233;
        futhark_mc_task_81967_task.task_time =
            &ctx->futhark_mc_segmap_task_81968_total_time;
        futhark_mc_task_81967_task.task_iter =
            &ctx->futhark_mc_segmap_task_81968_total_iter;
        futhark_mc_task_81967_task.sched = STATIC;
        futhark_mc_task_81967_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81968_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81967_task);
        
        if (futhark_mc_segmap_task_81968_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_74170 = (int64_t) 0;
        int32_t num_tasks_81192;
        struct futhark_mc_task_81971 futhark_mc_task_81971;
        
        futhark_mc_task_81971.ctx = ctx;
        futhark_mc_task_81971.free_n_70233 = n_70233;
        futhark_mc_task_81971.free_mem_76052 = mem_76052;
        futhark_mc_task_81971.free_mem_76055 = mem_76055;
        
        struct scheduler_segop futhark_mc_task_81971_task;
        
        futhark_mc_task_81971_task.args = &futhark_mc_task_81971;
        futhark_mc_task_81971_task.top_level_fn = futhark_mc_segmap_task_81972;
        futhark_mc_task_81971_task.name = "futhark_mc_segmap_task_81972";
        futhark_mc_task_81971_task.iterations = n_70233;
        futhark_mc_task_81971_task.task_time =
            &ctx->futhark_mc_segmap_task_81972_total_time;
        futhark_mc_task_81971_task.task_iter =
            &ctx->futhark_mc_segmap_task_81972_total_iter;
        futhark_mc_task_81971_task.sched = STATIC;
        futhark_mc_task_81971_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81972_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81971_task);
        
        if (futhark_mc_segmap_task_81972_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_74395 = sub64(last_res_74380, (int64_t) 1);
        int64_t min_arg_74396 = sub64(last_res_74380, min_res_70253);
        int64_t min_res_74397 = smin64(q_70235, last_res_74380);
        float i64_res_74398 = sitofp_i64_f32(last_res_74380);
        float x_74399 = i64_res_70259 - i64_res_74398;
        float max_arg_74400 = x_74399 / 2.0F;
        float max_res_74401 = fmax32(0.0F, max_arg_74400);
        int64_t flat_tid_74172 = (int64_t) 0;
        int32_t num_tasks_81196;
        struct futhark_mc_task_81975 futhark_mc_task_81975;
        
        futhark_mc_task_81975.ctx = ctx;
        futhark_mc_task_81975.free_q_70235 = q_70235;
        futhark_mc_task_81975.free_last_res_74380 = last_res_74380;
        futhark_mc_task_81975.free_mem_76058 = mem_76058;
        
        struct scheduler_segop futhark_mc_task_81975_task;
        
        futhark_mc_task_81975_task.args = &futhark_mc_task_81975;
        futhark_mc_task_81975_task.top_level_fn = futhark_mc_segmap_task_81976;
        futhark_mc_task_81975_task.name = "futhark_mc_segmap_task_81976";
        futhark_mc_task_81975_task.iterations = q_70235;
        futhark_mc_task_81975_task.task_time =
            &ctx->futhark_mc_segmap_task_81976_total_time;
        futhark_mc_task_81975_task.task_iter =
            &ctx->futhark_mc_segmap_task_81976_total_iter;
        futhark_mc_task_81975_task.sched = STATIC;
        futhark_mc_task_81975_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81976_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81975_task);
        
        if (futhark_mc_segmap_task_81976_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_74174 = (int64_t) 0;
        int32_t num_tasks_81200;
        int64_t flat_tid_74176 = (int64_t) 0;
        struct futhark_mc_task_81979 futhark_mc_task_81979;
        
        futhark_mc_task_81979.ctx = ctx;
        futhark_mc_task_81979.free_n_70233 = n_70233;
        futhark_mc_task_81979.free_q_70235 = q_70235;
        futhark_mc_task_81979.free_jump_70237 = jump_70237;
        futhark_mc_task_81979.free_n_m_70241 = n_m_70241;
        futhark_mc_task_81979.free_i_70247 = i_70247;
        futhark_mc_task_81979.free_x_70248 = x_70248;
        futhark_mc_task_81979.free_min_res_70253 = min_res_70253;
        futhark_mc_task_81979.free_loop_cond_70258 = loop_cond_70258;
        futhark_mc_task_81979.free_last_res_74380 = last_res_74380;
        futhark_mc_task_81979.free_min_arg_74395 = min_arg_74395;
        futhark_mc_task_81979.free_min_arg_74396 = min_arg_74396;
        futhark_mc_task_81979.free_min_res_74397 = min_res_74397;
        futhark_mc_task_81979.free_max_res_74401 = max_res_74401;
        futhark_mc_task_81979.free_mem_76049 = mem_76049;
        futhark_mc_task_81979.free_mem_76052 = mem_76052;
        futhark_mc_task_81979.free_mem_76055 = mem_76055;
        futhark_mc_task_81979.free_bytes_76057 = bytes_76057;
        futhark_mc_task_81979.free_mem_76058 = mem_76058;
        futhark_mc_task_81979.free_mem_76133 = mem_76133;
        futhark_mc_task_81979.free_mem_76136 = mem_76136;
        
        struct scheduler_segop futhark_mc_task_81979_task;
        
        futhark_mc_task_81979_task.args = &futhark_mc_task_81979;
        futhark_mc_task_81979_task.top_level_fn = futhark_mc_segmap_task_81980;
        futhark_mc_task_81979_task.name = "futhark_mc_segmap_task_81980";
        futhark_mc_task_81979_task.iterations = n_m_70241;
        futhark_mc_task_81979_task.task_time =
            &ctx->futhark_mc_segmap_task_81980_total_time;
        futhark_mc_task_81979_task.task_iter =
            &ctx->futhark_mc_segmap_task_81980_total_iter;
        futhark_mc_task_81979_task.sched = DYNAMIC;
        futhark_mc_task_81979_task.nested_fn =
            futhark_mc_segmap_nested_task_81987;
        
        int futhark_mc_segmap_task_81980_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81979_task);
        
        if (futhark_mc_segmap_task_81980_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76305.mem + gtid_74165 * n_m_70241 * (int64_t) 4,
                    mem_76133 + (int64_t) 0, n_m_70241 * (int64_t) 4);
        if (n_m_70241 * (int64_t) 4 > 0)
            memmove(mem_76309.mem + gtid_74165 * n_m_70241 * (int64_t) 4,
                    mem_76136 + (int64_t) 0, n_m_70241 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76046);
    free(mem_76049);
    free(mem_76052);
    free(mem_76055);
    free(mem_76058);
    free(mem_76133);
    free(mem_76136);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81952_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81952_end -
                 futhark_mc_segmap_parloop_81952_start;
        
        ctx->futhark_mc_segmap_parloop_81952_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81952_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81952_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81950(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74164 = tid;
    int num_tasks_80506 = info.nsubtasks;
    struct futhark_mc_task_81935 *futhark_mc_task_81935 =
                                 (struct futhark_mc_task_81935 *) args;
    struct futhark_context *ctx = futhark_mc_task_81935->ctx;
    uint64_t futhark_mc_segmap_nested_task_81950_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81950_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_81935->free_m_70232;
    int64_t n_70233 = futhark_mc_task_81935->free_n_70233;
    int64_t q_70235 = futhark_mc_task_81935->free_q_70235;
    int64_t jump_70237 = futhark_mc_task_81935->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_81935->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_81935->free_i_70247;
    bool x_70248 = futhark_mc_task_81935->free_x_70248;
    int64_t min_res_70253 = futhark_mc_task_81935->free_min_res_70253;
    bool loop_cond_70258 = futhark_mc_task_81935->free_loop_cond_70258;
    float i64_res_70259 = futhark_mc_task_81935->free_i64_res_70259;
    struct memblock Y_mem_75306 = {.desc ="Y_mem_75306", .mem =
                                   futhark_mc_task_81935->free_Y_mem_75306,
                                   .size =0, .references =NULL};
    int64_t bytes_76045 = futhark_mc_task_81935->free_bytes_76045;
    int64_t bytes_76048 = futhark_mc_task_81935->free_bytes_76048;
    int64_t bytes_76057 = futhark_mc_task_81935->free_bytes_76057;
    int64_t bytes_76132 = futhark_mc_task_81935->free_bytes_76132;
    struct memblock mem_76305 = {.desc ="mem_76305", .mem =
                                 futhark_mc_task_81935->free_mem_76305, .size =
                                 0, .references =NULL};
    struct memblock mem_76309 = {.desc ="mem_76309", .mem =
                                 futhark_mc_task_81935->free_mem_76309, .size =
                                 0, .references =NULL};
    int64_t iter_80766;
    struct futhark_mc_segmap_parloop_struct_81951
    futhark_mc_segmap_parloop_struct_81951;
    
    futhark_mc_segmap_parloop_struct_81951.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81951.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_81951.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_81951.free_q_70235 = q_70235;
    futhark_mc_segmap_parloop_struct_81951.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_81951.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_81951.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_81951.free_x_70248 = x_70248;
    futhark_mc_segmap_parloop_struct_81951.free_min_res_70253 = min_res_70253;
    futhark_mc_segmap_parloop_struct_81951.free_loop_cond_70258 =
        loop_cond_70258;
    futhark_mc_segmap_parloop_struct_81951.free_i64_res_70259 = i64_res_70259;
    futhark_mc_segmap_parloop_struct_81951.free_Y_mem_75306 = Y_mem_75306.mem;
    futhark_mc_segmap_parloop_struct_81951.free_bytes_76045 = bytes_76045;
    futhark_mc_segmap_parloop_struct_81951.free_bytes_76048 = bytes_76048;
    futhark_mc_segmap_parloop_struct_81951.free_bytes_76057 = bytes_76057;
    futhark_mc_segmap_parloop_struct_81951.free_bytes_76132 = bytes_76132;
    futhark_mc_segmap_parloop_struct_81951.free_mem_76305 = mem_76305.mem;
    futhark_mc_segmap_parloop_struct_81951.free_mem_76309 = mem_76309.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81952_task;
    
    futhark_mc_segmap_parloop_81952_task.name =
        "futhark_mc_segmap_parloop_81952";
    futhark_mc_segmap_parloop_81952_task.fn = futhark_mc_segmap_parloop_81952;
    futhark_mc_segmap_parloop_81952_task.args =
        &futhark_mc_segmap_parloop_struct_81951;
    futhark_mc_segmap_parloop_81952_task.iterations = iterations;
    futhark_mc_segmap_parloop_81952_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81952_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81952_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81952_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81952_task);
    
    if (futhark_mc_segmap_parloop_81952_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81952_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81952_total_end -
                 futhark_mc_segmap_parloop_81952_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81952_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81952_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81952_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81950_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81950_end -
                 futhark_mc_segmap_nested_task_81950_start;
        
        ctx->futhark_mc_segmap_nested_task_81950_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81950_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81950_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82013 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    int64_t free_y_71526;
    unsigned char *free_ext_mem_76314;
    unsigned char *free_ext_mem_76315;
    int64_t free_bytes_76317;
    unsigned char *free_mem_76337;
};
struct futhark_mc_segmap_parloop_struct_82015 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    int64_t free_y_71526;
    unsigned char *free_ext_mem_76314;
    unsigned char *free_ext_mem_76315;
    int64_t free_bytes_76317;
    unsigned char *free_mem_76337;
};
static int futhark_mc_segmap_parloop_82016(void *args, int64_t start,
                                           int64_t end, int flat_tid_74782,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82015
    *futhark_mc_segmap_parloop_struct_82015 =
    (struct futhark_mc_segmap_parloop_struct_82015 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82015->ctx;
    uint64_t futhark_mc_segmap_parloop_82016_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82016_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_82015->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_82015->free_n_70233;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_82015->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_82015->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_82015->free_i_70247;
    int64_t y_71526 = futhark_mc_segmap_parloop_struct_82015->free_y_71526;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_segmap_parloop_struct_82015->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_segmap_parloop_struct_82015->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    int64_t bytes_76317 =
            futhark_mc_segmap_parloop_struct_82015->free_bytes_76317;
    struct memblock mem_76337 = {.desc ="mem_76337", .mem =
                                 futhark_mc_segmap_parloop_struct_82015->free_mem_76337,
                                 .size =0, .references =NULL};
    size_t mem_76321_cached_sizze_82017 = 0;
    unsigned char *mem_76321 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81526 = start;
    
    if (mem_76321_cached_sizze_82017 < (size_t) bytes_76317) {
        mem_76321 = realloc(mem_76321, bytes_76317);
        mem_76321_cached_sizze_82017 = bytes_76317;
    }
    for (; iter_81526 < end; iter_81526++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81576 = m_70232;
        int64_t gtid_74783 = iter_81526;
        int64_t remnant_81577 = iter_81526 - gtid_74783;
        
        for (int64_t i_81527 = 0; i_81527 < n_70233; i_81527++) {
            int64_t m_v_81529 = sdiv64(i_81527, jump_70237);
            bool cond_81530 = m_v_81529 == y_71526;
            int64_t j_81531;
            
            if (cond_81530) {
                int64_t j_t_res_81532 = sub64(m_v_81529, (int64_t) 1);
                
                j_81531 = j_t_res_81532;
            } else {
                j_81531 = m_v_81529;
            }
            
            int64_t min_arg_81533 = mul64(jump_70237, j_81531);
            int64_t min_res_81534 = smin64(i_70247, min_arg_81533);
            int64_t defunc_0_m_fun_arg_81535 = add64((int64_t) 1, j_81531);
            int64_t min_arg_81536 = mul64(jump_70237, defunc_0_m_fun_arg_81535);
            int64_t min_res_81537 = smin64(i_70247, min_arg_81536);
            int64_t i64_arg_81538 = sub64(min_res_81537, min_res_81534);
            float i64_res_81539 = sitofp_i64_f32(i64_arg_81538);
            int64_t i64_arg_81540 = sub64(i_81527, min_res_81534);
            float i64_res_81541 = sitofp_i64_f32(i64_arg_81540);
            float u_81542 = i64_res_81541 / i64_res_81539;
            float u2_81543 = u_81542 * u_81542;
            float u3_81544 = u_81542 * u2_81543;
            float x_81545 = 2.0F * u3_81544;
            float y_81546 = 3.0F * u2_81543;
            float x_81547 = x_81545 - y_81546;
            float x_81548 = 1.0F + x_81547;
            bool x_81549 = sle64((int64_t) 0, j_81531);
            bool y_81550 = slt64(j_81531, n_m_70241);
            bool bounds_check_81551 = x_81549 && y_81550;
            bool index_certs_81552;
            
            if (!bounds_check_81551) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_81531,
                              "] out of bounds for array of shape [",
                              (long long) n_m_70241, "].",
                              "-> #0  loess.fut:538:34-40\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:529:3-542:9\n   #5  loess.fut:607:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:606:5-608:29\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            float y_81553 = ((float *) ext_mem_76315.mem)[gtid_74783 *
                                                          n_m_70241 + j_81531];
            float x_81554 = x_81548 * y_81553;
            float x_81555 = y_81546 - x_81545;
            bool x_81556 = sle64((int64_t) 0, defunc_0_m_fun_arg_81535);
            bool y_81557 = slt64(defunc_0_m_fun_arg_81535, n_m_70241);
            bool bounds_check_81558 = x_81556 && y_81557;
            bool index_certs_81559;
            
            if (!bounds_check_81558) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_81535,
                              "] out of bounds for array of shape [",
                              (long long) n_m_70241, "].",
                              "-> #0  loess.fut:539:34-44\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:529:3-542:9\n   #5  loess.fut:607:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:606:5-608:29\n   #9  loess.fut:571:1-610:26\n");
                return 1;
            }
            
            float y_81560 = ((float *) ext_mem_76315.mem)[gtid_74783 *
                                                          n_m_70241 +
                                                          defunc_0_m_fun_arg_81535];
            float y_81561 = x_81555 * y_81560;
            float x_81562 = x_81554 + y_81561;
            float y_81563 = 2.0F * u2_81543;
            float x_81564 = u3_81544 - y_81563;
            float x_81565 = u_81542 + x_81564;
            float y_81566 = ((float *) ext_mem_76314.mem)[gtid_74783 *
                                                          n_m_70241 + j_81531];
            float x_81567 = x_81565 * y_81566;
            float y_81568 = i64_res_81539 * x_81567;
            float x_81569 = x_81562 + y_81568;
            float x_81570 = u3_81544 - u2_81543;
            float y_81571 = ((float *) ext_mem_76314.mem)[gtid_74783 *
                                                          n_m_70241 +
                                                          defunc_0_m_fun_arg_81535];
            float x_81572 = x_81570 * y_81571;
            float y_81573 = i64_res_81539 * x_81572;
            float defunc_0_f_res_81574 = x_81569 + y_81573;
            
            ((float *) mem_76321)[i_81527] = defunc_0_f_res_81574;
        }
        if (n_70233 * (int64_t) 4 > 0)
            memmove(mem_76337.mem + gtid_74783 * n_70233 * (int64_t) 4,
                    mem_76321 + (int64_t) 0, n_70233 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76321);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82016_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82016_end -
                 futhark_mc_segmap_parloop_82016_start;
        
        ctx->futhark_mc_segmap_parloop_82016_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82016_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82016_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82014(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74782 = tid;
    int num_tasks_81525 = info.nsubtasks;
    struct futhark_mc_task_82013 *futhark_mc_task_82013 =
                                 (struct futhark_mc_task_82013 *) args;
    struct futhark_context *ctx = futhark_mc_task_82013->ctx;
    uint64_t futhark_mc_segmap_task_82014_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82014_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_82013->free_m_70232;
    int64_t n_70233 = futhark_mc_task_82013->free_n_70233;
    int64_t jump_70237 = futhark_mc_task_82013->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_82013->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_82013->free_i_70247;
    int64_t y_71526 = futhark_mc_task_82013->free_y_71526;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_task_82013->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_task_82013->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    int64_t bytes_76317 = futhark_mc_task_82013->free_bytes_76317;
    struct memblock mem_76337 = {.desc ="mem_76337", .mem =
                                 futhark_mc_task_82013->free_mem_76337, .size =
                                 0, .references =NULL};
    int64_t iter_81526;
    struct futhark_mc_segmap_parloop_struct_82015
    futhark_mc_segmap_parloop_struct_82015;
    
    futhark_mc_segmap_parloop_struct_82015.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82015.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_82015.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_82015.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_82015.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_82015.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_82015.free_y_71526 = y_71526;
    futhark_mc_segmap_parloop_struct_82015.free_ext_mem_76314 =
        ext_mem_76314.mem;
    futhark_mc_segmap_parloop_struct_82015.free_ext_mem_76315 =
        ext_mem_76315.mem;
    futhark_mc_segmap_parloop_struct_82015.free_bytes_76317 = bytes_76317;
    futhark_mc_segmap_parloop_struct_82015.free_mem_76337 = mem_76337.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82016_task;
    
    futhark_mc_segmap_parloop_82016_task.name =
        "futhark_mc_segmap_parloop_82016";
    futhark_mc_segmap_parloop_82016_task.fn = futhark_mc_segmap_parloop_82016;
    futhark_mc_segmap_parloop_82016_task.args =
        &futhark_mc_segmap_parloop_struct_82015;
    futhark_mc_segmap_parloop_82016_task.iterations = iterations;
    futhark_mc_segmap_parloop_82016_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82016_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82016_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82016_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82016_task);
    
    if (futhark_mc_segmap_parloop_82016_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82016_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82016_total_end -
                 futhark_mc_segmap_parloop_82016_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82016_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82016_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82016_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82014_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82014_end -
                 futhark_mc_segmap_task_82014_start;
        
        ctx->futhark_mc_segmap_task_82014_runs[tid]++;
        ctx->futhark_mc_segmap_task_82014_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82014_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_82019 {
    struct futhark_context *ctx;
    int64_t free_m_70232;
    int64_t free_n_70233;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    int64_t free_y_71526;
    unsigned char *free_ext_mem_76314;
    unsigned char *free_ext_mem_76315;
    int64_t free_bytes_76317;
    unsigned char *free_mem_76337;
};
struct futhark_mc_task_82022 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    int64_t free_y_71526;
    int64_t free_gtid_74785;
    unsigned char *free_ext_mem_76314;
    unsigned char *free_ext_mem_76315;
    unsigned char *free_mem_76318;
};
struct futhark_mc_segmap_parloop_struct_82024 {
    struct futhark_context *ctx;
    int64_t free_n_70233;
    int64_t free_jump_70237;
    int64_t free_n_m_70241;
    int64_t free_i_70247;
    int64_t free_y_71526;
    int64_t free_gtid_74785;
    unsigned char *free_ext_mem_76314;
    unsigned char *free_ext_mem_76315;
    unsigned char *free_mem_76318;
};
static int futhark_mc_segmap_parloop_82025(void *args, int64_t start,
                                           int64_t end, int flat_tid_74786,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82024
    *futhark_mc_segmap_parloop_struct_82024 =
    (struct futhark_mc_segmap_parloop_struct_82024 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82024->ctx;
    uint64_t futhark_mc_segmap_parloop_82025_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82025_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_82024->free_n_70233;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_82024->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_82024->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_82024->free_i_70247;
    int64_t y_71526 = futhark_mc_segmap_parloop_struct_82024->free_y_71526;
    int64_t gtid_74785 =
            futhark_mc_segmap_parloop_struct_82024->free_gtid_74785;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_segmap_parloop_struct_82024->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_segmap_parloop_struct_82024->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    struct memblock mem_76318 = {.desc ="mem_76318", .mem =
                                 futhark_mc_segmap_parloop_struct_82024->free_mem_76318,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81629 = start;
    
    for (; iter_81629 < end; iter_81629++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81631 = n_70233;
        int64_t gtid_74787 = iter_81629;
        int64_t remnant_81632 = iter_81629 - gtid_74787;
        int64_t m_v_81580 = sdiv64(gtid_74787, jump_70237);
        bool cond_81581 = m_v_81580 == y_71526;
        int64_t j_81582;
        
        if (cond_81581) {
            int64_t j_t_res_81630 = sub64(m_v_81580, (int64_t) 1);
            
            j_81582 = j_t_res_81630;
        } else {
            j_81582 = m_v_81580;
        }
        
        int64_t min_arg_81584 = mul64(jump_70237, j_81582);
        int64_t min_res_81585 = smin64(i_70247, min_arg_81584);
        int64_t defunc_0_m_fun_arg_81586 = add64((int64_t) 1, j_81582);
        int64_t min_arg_81587 = mul64(jump_70237, defunc_0_m_fun_arg_81586);
        int64_t min_res_81588 = smin64(i_70247, min_arg_81587);
        int64_t i64_arg_81589 = sub64(min_res_81588, min_res_81585);
        float i64_res_81590 = sitofp_i64_f32(i64_arg_81589);
        int64_t i64_arg_81591 = sub64(gtid_74787, min_res_81585);
        float i64_res_81592 = sitofp_i64_f32(i64_arg_81591);
        float u_81593 = i64_res_81592 / i64_res_81590;
        float u2_81594 = u_81593 * u_81593;
        float u3_81595 = u_81593 * u2_81594;
        float x_81596 = 2.0F * u3_81595;
        float y_81597 = 3.0F * u2_81594;
        float x_81598 = x_81596 - y_81597;
        float x_81599 = 1.0F + x_81598;
        bool x_81600 = sle64((int64_t) 0, j_81582);
        bool y_81601 = slt64(j_81582, n_m_70241);
        bool bounds_check_81602 = x_81600 && y_81601;
        bool index_certs_81603;
        
        if (!bounds_check_81602) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_81582,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_70241, "].",
                                   "-> #0  loess.fut:538:34-40\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:529:3-542:9\n   #5  loess.fut:607:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:606:5-608:29\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        float y_81604 = ((float *) ext_mem_76315.mem)[gtid_74785 * n_m_70241 +
                                                      j_81582];
        float x_81605 = x_81599 * y_81604;
        float x_81606 = y_81597 - x_81596;
        bool x_81607 = sle64((int64_t) 0, defunc_0_m_fun_arg_81586);
        bool y_81608 = slt64(defunc_0_m_fun_arg_81586, n_m_70241);
        bool bounds_check_81609 = x_81607 && y_81608;
        bool index_certs_81610;
        
        if (!bounds_check_81609) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_81586,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_70241, "].",
                                   "-> #0  loess.fut:539:34-44\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:529:3-542:9\n   #5  loess.fut:607:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:606:5-608:29\n   #9  loess.fut:571:1-610:26\n");
            return 1;
        }
        
        float y_81611 = ((float *) ext_mem_76315.mem)[gtid_74785 * n_m_70241 +
                                                      defunc_0_m_fun_arg_81586];
        float y_81612 = x_81606 * y_81611;
        float x_81613 = x_81605 + y_81612;
        float y_81614 = 2.0F * u2_81594;
        float x_81615 = u3_81595 - y_81614;
        float x_81616 = u_81593 + x_81615;
        float y_81617 = ((float *) ext_mem_76314.mem)[gtid_74785 * n_m_70241 +
                                                      j_81582];
        float x_81618 = x_81616 * y_81617;
        float y_81619 = i64_res_81590 * x_81618;
        float x_81620 = x_81613 + y_81619;
        float x_81621 = u3_81595 - u2_81594;
        float y_81622 = ((float *) ext_mem_76314.mem)[gtid_74785 * n_m_70241 +
                                                      defunc_0_m_fun_arg_81586];
        float x_81623 = x_81621 * y_81622;
        float y_81624 = i64_res_81590 * x_81623;
        float defunc_0_f_res_81625 = x_81620 + y_81624;
        
        ((float *) mem_76318.mem)[gtid_74787] = defunc_0_f_res_81625;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82025_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82025_end -
                 futhark_mc_segmap_parloop_82025_start;
        
        ctx->futhark_mc_segmap_parloop_82025_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82025_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82025_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82023(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74786 = tid;
    int num_tasks_81628 = info.nsubtasks;
    struct futhark_mc_task_82022 *futhark_mc_task_82022 =
                                 (struct futhark_mc_task_82022 *) args;
    struct futhark_context *ctx = futhark_mc_task_82022->ctx;
    uint64_t futhark_mc_segmap_task_82023_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82023_start = get_wall_time();
    
    int64_t n_70233 = futhark_mc_task_82022->free_n_70233;
    int64_t jump_70237 = futhark_mc_task_82022->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_82022->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_82022->free_i_70247;
    int64_t y_71526 = futhark_mc_task_82022->free_y_71526;
    int64_t gtid_74785 = futhark_mc_task_82022->free_gtid_74785;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_task_82022->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_task_82022->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    struct memblock mem_76318 = {.desc ="mem_76318", .mem =
                                 futhark_mc_task_82022->free_mem_76318, .size =
                                 0, .references =NULL};
    int64_t iter_81629;
    struct futhark_mc_segmap_parloop_struct_82024
    futhark_mc_segmap_parloop_struct_82024;
    
    futhark_mc_segmap_parloop_struct_82024.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82024.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_82024.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_82024.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_82024.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_82024.free_y_71526 = y_71526;
    futhark_mc_segmap_parloop_struct_82024.free_gtid_74785 = gtid_74785;
    futhark_mc_segmap_parloop_struct_82024.free_ext_mem_76314 =
        ext_mem_76314.mem;
    futhark_mc_segmap_parloop_struct_82024.free_ext_mem_76315 =
        ext_mem_76315.mem;
    futhark_mc_segmap_parloop_struct_82024.free_mem_76318 = mem_76318.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82025_task;
    
    futhark_mc_segmap_parloop_82025_task.name =
        "futhark_mc_segmap_parloop_82025";
    futhark_mc_segmap_parloop_82025_task.fn = futhark_mc_segmap_parloop_82025;
    futhark_mc_segmap_parloop_82025_task.args =
        &futhark_mc_segmap_parloop_struct_82024;
    futhark_mc_segmap_parloop_82025_task.iterations = iterations;
    futhark_mc_segmap_parloop_82025_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82025_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82025_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82025_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82025_task);
    
    if (futhark_mc_segmap_parloop_82025_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82025_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82025_total_end -
                 futhark_mc_segmap_parloop_82025_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82023_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82023_end -
                 futhark_mc_segmap_task_82023_start;
        
        ctx->futhark_mc_segmap_task_82023_runs[tid]++;
        ctx->futhark_mc_segmap_task_82023_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82023_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_82020(void *args, int64_t start,
                                           int64_t end, int flat_tid_74784,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82019
    *futhark_mc_segmap_parloop_struct_82019 =
    (struct futhark_mc_segmap_parloop_struct_82019 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82019->ctx;
    uint64_t futhark_mc_segmap_parloop_82020_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82020_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_segmap_parloop_struct_82019->free_m_70232;
    int64_t n_70233 = futhark_mc_segmap_parloop_struct_82019->free_n_70233;
    int64_t jump_70237 =
            futhark_mc_segmap_parloop_struct_82019->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_segmap_parloop_struct_82019->free_n_m_70241;
    int64_t i_70247 = futhark_mc_segmap_parloop_struct_82019->free_i_70247;
    int64_t y_71526 = futhark_mc_segmap_parloop_struct_82019->free_y_71526;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_segmap_parloop_struct_82019->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_segmap_parloop_struct_82019->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    int64_t bytes_76317 =
            futhark_mc_segmap_parloop_struct_82019->free_bytes_76317;
    struct memblock mem_76337 = {.desc ="mem_76337", .mem =
                                 futhark_mc_segmap_parloop_struct_82019->free_mem_76337,
                                 .size =0, .references =NULL};
    size_t mem_76318_cached_sizze_82021 = 0;
    unsigned char *mem_76318 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81579 = start;
    
    if (mem_76318_cached_sizze_82021 < (size_t) bytes_76317) {
        mem_76318 = realloc(mem_76318, bytes_76317);
        mem_76318_cached_sizze_82021 = bytes_76317;
    }
    for (; iter_81579 < end; iter_81579++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81626 = m_70232;
        int64_t gtid_74785 = iter_81579;
        int64_t remnant_81627 = iter_81579 - gtid_74785;
        int64_t flat_tid_74786 = (int64_t) 0;
        int32_t num_tasks_81628;
        struct futhark_mc_task_82022 futhark_mc_task_82022;
        
        futhark_mc_task_82022.ctx = ctx;
        futhark_mc_task_82022.free_n_70233 = n_70233;
        futhark_mc_task_82022.free_jump_70237 = jump_70237;
        futhark_mc_task_82022.free_n_m_70241 = n_m_70241;
        futhark_mc_task_82022.free_i_70247 = i_70247;
        futhark_mc_task_82022.free_y_71526 = y_71526;
        futhark_mc_task_82022.free_gtid_74785 = gtid_74785;
        futhark_mc_task_82022.free_ext_mem_76314 = ext_mem_76314.mem;
        futhark_mc_task_82022.free_ext_mem_76315 = ext_mem_76315.mem;
        futhark_mc_task_82022.free_mem_76318 = mem_76318;
        
        struct scheduler_segop futhark_mc_task_82022_task;
        
        futhark_mc_task_82022_task.args = &futhark_mc_task_82022;
        futhark_mc_task_82022_task.top_level_fn = futhark_mc_segmap_task_82023;
        futhark_mc_task_82022_task.name = "futhark_mc_segmap_task_82023";
        futhark_mc_task_82022_task.iterations = n_70233;
        futhark_mc_task_82022_task.task_time =
            &ctx->futhark_mc_segmap_task_82023_total_time;
        futhark_mc_task_82022_task.task_iter =
            &ctx->futhark_mc_segmap_task_82023_total_iter;
        futhark_mc_task_82022_task.sched = STATIC;
        futhark_mc_task_82022_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82023_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82022_task);
        
        if (futhark_mc_segmap_task_82023_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_70233 * (int64_t) 4 > 0)
            memmove(mem_76337.mem + gtid_74785 * n_70233 * (int64_t) 4,
                    mem_76318 + (int64_t) 0, n_70233 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76318);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82020_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82020_end -
                 futhark_mc_segmap_parloop_82020_start;
        
        ctx->futhark_mc_segmap_parloop_82020_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82020_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82020_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_82018(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74784 = tid;
    int num_tasks_81525 = info.nsubtasks;
    struct futhark_mc_task_82013 *futhark_mc_task_82013 =
                                 (struct futhark_mc_task_82013 *) args;
    struct futhark_context *ctx = futhark_mc_task_82013->ctx;
    uint64_t futhark_mc_segmap_nested_task_82018_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_82018_start = get_wall_time();
    
    int64_t m_70232 = futhark_mc_task_82013->free_m_70232;
    int64_t n_70233 = futhark_mc_task_82013->free_n_70233;
    int64_t jump_70237 = futhark_mc_task_82013->free_jump_70237;
    int64_t n_m_70241 = futhark_mc_task_82013->free_n_m_70241;
    int64_t i_70247 = futhark_mc_task_82013->free_i_70247;
    int64_t y_71526 = futhark_mc_task_82013->free_y_71526;
    struct memblock ext_mem_76314 = {.desc ="ext_mem_76314", .mem =
                                     futhark_mc_task_82013->free_ext_mem_76314,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76315 = {.desc ="ext_mem_76315", .mem =
                                     futhark_mc_task_82013->free_ext_mem_76315,
                                     .size =0, .references =NULL};
    int64_t bytes_76317 = futhark_mc_task_82013->free_bytes_76317;
    struct memblock mem_76337 = {.desc ="mem_76337", .mem =
                                 futhark_mc_task_82013->free_mem_76337, .size =
                                 0, .references =NULL};
    int64_t iter_81579;
    struct futhark_mc_segmap_parloop_struct_82019
    futhark_mc_segmap_parloop_struct_82019;
    
    futhark_mc_segmap_parloop_struct_82019.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82019.free_m_70232 = m_70232;
    futhark_mc_segmap_parloop_struct_82019.free_n_70233 = n_70233;
    futhark_mc_segmap_parloop_struct_82019.free_jump_70237 = jump_70237;
    futhark_mc_segmap_parloop_struct_82019.free_n_m_70241 = n_m_70241;
    futhark_mc_segmap_parloop_struct_82019.free_i_70247 = i_70247;
    futhark_mc_segmap_parloop_struct_82019.free_y_71526 = y_71526;
    futhark_mc_segmap_parloop_struct_82019.free_ext_mem_76314 =
        ext_mem_76314.mem;
    futhark_mc_segmap_parloop_struct_82019.free_ext_mem_76315 =
        ext_mem_76315.mem;
    futhark_mc_segmap_parloop_struct_82019.free_bytes_76317 = bytes_76317;
    futhark_mc_segmap_parloop_struct_82019.free_mem_76337 = mem_76337.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82020_task;
    
    futhark_mc_segmap_parloop_82020_task.name =
        "futhark_mc_segmap_parloop_82020";
    futhark_mc_segmap_parloop_82020_task.fn = futhark_mc_segmap_parloop_82020;
    futhark_mc_segmap_parloop_82020_task.args =
        &futhark_mc_segmap_parloop_struct_82019;
    futhark_mc_segmap_parloop_82020_task.iterations = iterations;
    futhark_mc_segmap_parloop_82020_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82020_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82020_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82020_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82020_task);
    
    if (futhark_mc_segmap_parloop_82020_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82020_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82020_total_end -
                 futhark_mc_segmap_parloop_82020_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82020_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82020_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82020_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_82018_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_82018_end -
                 futhark_mc_segmap_nested_task_82018_start;
        
        ctx->futhark_mc_segmap_nested_task_82018_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_82018_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_82018_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_81633,
                             struct memblock Y_mem_75306, int64_t m_70232,
                             int64_t n_70233, int64_t q_70235,
                             int64_t degree_70236, int64_t jump_70237,
                             int64_t jump_threshold_70238,
                             int64_t q_threshold_70239)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_76355;
    
    mem_out_76355.references = NULL;
    
    bool cond_70240 = jump_70237 == (int64_t) 1;
    int64_t n_m_70241;
    
    if (cond_70240) {
        n_m_70241 = n_70233;
    } else {
        bool zzero_70242 = jump_70237 == (int64_t) 0;
        bool nonzzero_70243 = !zzero_70242;
        bool nonzzero_cert_70244;
        
        if (!nonzzero_70243) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:578:38-45\n   #1  loess.fut:571:1-610:26\n");
            if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_70245 = sdiv64(n_70233, jump_70237);
        int64_t n_m_f_res_70246 = add64((int64_t) 1, x_70245);
        
        n_m_70241 = n_m_f_res_70246;
    }
    
    int64_t i_70247 = sub64(n_70233, (int64_t) 1);
    bool x_70248 = sle64((int64_t) 0, i_70247);
    bool y_70249 = slt64(i_70247, n_70233);
    bool bounds_check_70250 = x_70248 && y_70249;
    bool index_certs_70251;
    
    if (!bounds_check_70250) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_70247,
                               "] out of bounds for array of shape [",
                               (long long) n_70233, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:53:13-20\n   #2  loess.fut:583:5-54\n   #3  loess.fut:571:1-610:26\n");
        if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_70253 = smin64(n_70233, q_70235);
    bool bounds_invalid_upwards_70254 = slt64(n_m_70241, (int64_t) 0);
    bool valid_70255 = !bounds_invalid_upwards_70254;
    bool range_valid_c_70256;
    
    if (!valid_70255) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_70241, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:442:3-469:10\n   #4  loess.fut:502:15-61\n   #5  loess.fut:588:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:587:5-589:26\n   #9  loess.fut:571:1-610:26\n");
        if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_70258 = slt64((int64_t) 1, min_res_70253);
    float i64_res_70259 = sitofp_i64_f32(q_70235);
    bool cond_70260 = slt64(jump_70237, jump_threshold_70238);
    bool cond_f_res_70261 = slt64(q_threshold_70239, q_70235);
    bool x_70262 = !cond_70260;
    bool y_70263 = cond_f_res_70261 && x_70262;
    bool cond_70264 = cond_70260 || y_70263;
    struct memblock ext_mem_76315;
    
    ext_mem_76315.references = NULL;
    
    struct memblock ext_mem_76314;
    
    ext_mem_76314.references = NULL;
    if (cond_70264) {
        bool match_lit_70267 = (int64_t) 0 == degree_70236;
        int64_t binop_x_75307 = m_70232 * n_m_70241;
        int64_t binop_y_75308 = (int64_t) 4 * binop_x_75307;
        int64_t bytes_75309 = smax64((int64_t) 0, binop_y_75308);
        struct memblock ext_mem_75694;
        
        ext_mem_75694.references = NULL;
        
        struct memblock ext_mem_75693;
        
        ext_mem_75693.references = NULL;
        if (match_lit_70267) {
            struct memblock mem_75310;
            
            mem_75310.references = NULL;
            if (memblock_alloc(ctx, &mem_75310, bytes_75309, "mem_75310")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_76356 = 0; i_76356 < m_70232; i_76356++) {
                for (int64_t i_76357 = 0; i_76357 < n_m_70241; i_76357++) {
                    ((float *) mem_75310.mem)[i_76356 * n_m_70241 + i_76357] =
                        0.0F;
                }
            }
            
            struct memblock mem_75422;
            
            mem_75422.references = NULL;
            if (memblock_alloc(ctx, &mem_75422, bytes_75309, "mem_75422")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_75311 = (int64_t) 8 * n_70233;
            int64_t bytes_75312 = smax64((int64_t) 0, binop_y_75311);
            int64_t binop_y_75314 = (int64_t) 4 * n_70233;
            int64_t bytes_75315 = smax64((int64_t) 0, binop_y_75314);
            int64_t binop_y_75323 = (int64_t) 4 * q_70235;
            int64_t bytes_75324 = smax64((int64_t) 0, binop_y_75323);
            int64_t binop_y_75326 = (int64_t) 4 * n_m_70241;
            int64_t bytes_75327 = smax64((int64_t) 0, binop_y_75326);
            int64_t flat_tid_71581 = (int64_t) 0;
            int32_t num_tasks_76358;
            int64_t flat_tid_71583 = (int64_t) 0;
            struct futhark_mc_task_81634 futhark_mc_task_81634;
            
            futhark_mc_task_81634.ctx = ctx;
            futhark_mc_task_81634.free_m_70232 = m_70232;
            futhark_mc_task_81634.free_n_70233 = n_70233;
            futhark_mc_task_81634.free_q_70235 = q_70235;
            futhark_mc_task_81634.free_jump_70237 = jump_70237;
            futhark_mc_task_81634.free_n_m_70241 = n_m_70241;
            futhark_mc_task_81634.free_i_70247 = i_70247;
            futhark_mc_task_81634.free_x_70248 = x_70248;
            futhark_mc_task_81634.free_min_res_70253 = min_res_70253;
            futhark_mc_task_81634.free_loop_cond_70258 = loop_cond_70258;
            futhark_mc_task_81634.free_i64_res_70259 = i64_res_70259;
            futhark_mc_task_81634.free_Y_mem_75306 = Y_mem_75306.mem;
            futhark_mc_task_81634.free_bytes_75312 = bytes_75312;
            futhark_mc_task_81634.free_bytes_75315 = bytes_75315;
            futhark_mc_task_81634.free_bytes_75324 = bytes_75324;
            futhark_mc_task_81634.free_bytes_75327 = bytes_75327;
            futhark_mc_task_81634.free_mem_75422 = mem_75422.mem;
            
            struct scheduler_segop futhark_mc_task_81634_task;
            
            futhark_mc_task_81634_task.args = &futhark_mc_task_81634;
            futhark_mc_task_81634_task.top_level_fn =
                futhark_mc_segmap_task_81635;
            futhark_mc_task_81634_task.name = "futhark_mc_segmap_task_81635";
            futhark_mc_task_81634_task.iterations = m_70232;
            futhark_mc_task_81634_task.task_time =
                &ctx->futhark_mc_segmap_task_81635_total_time;
            futhark_mc_task_81634_task.task_iter =
                &ctx->futhark_mc_segmap_task_81635_total_iter;
            futhark_mc_task_81634_task.sched = DYNAMIC;
            futhark_mc_task_81634_task.nested_fn =
                futhark_mc_segmap_nested_task_81644;
            
            int futhark_mc_segmap_task_81635_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_81634_task);
            
            if (futhark_mc_segmap_task_81635_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_75694, &mem_75422, "mem_75422") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_75693, &mem_75310, "mem_75310") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75422, "mem_75422") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75310, "mem_75310") != 0)
                return 1;
        } else {
            bool match_lit_70446 = (int64_t) 1 == degree_70236;
            struct memblock ext_mem_75692;
            
            ext_mem_75692.references = NULL;
            
            struct memblock ext_mem_75691;
            
            ext_mem_75691.references = NULL;
            if (match_lit_70446) {
                struct memblock mem_75552;
                
                mem_75552.references = NULL;
                if (memblock_alloc(ctx, &mem_75552, bytes_75309, "mem_75552")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_75556;
                
                mem_75556.references = NULL;
                if (memblock_alloc(ctx, &mem_75556, bytes_75309, "mem_75556")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75423 = (int64_t) 8 * n_70233;
                int64_t bytes_75424 = smax64((int64_t) 0, binop_y_75423);
                int64_t binop_y_75426 = (int64_t) 4 * n_70233;
                int64_t bytes_75427 = smax64((int64_t) 0, binop_y_75426);
                int64_t binop_y_75435 = (int64_t) 4 * q_70235;
                int64_t bytes_75436 = smax64((int64_t) 0, binop_y_75435);
                int64_t binop_y_75438 = (int64_t) 4 * n_m_70241;
                int64_t bytes_75439 = smax64((int64_t) 0, binop_y_75438);
                int64_t flat_tid_72042 = (int64_t) 0;
                int32_t num_tasks_77097;
                int64_t flat_tid_72044 = (int64_t) 0;
                struct futhark_mc_task_81689 futhark_mc_task_81689;
                
                futhark_mc_task_81689.ctx = ctx;
                futhark_mc_task_81689.free_m_70232 = m_70232;
                futhark_mc_task_81689.free_n_70233 = n_70233;
                futhark_mc_task_81689.free_q_70235 = q_70235;
                futhark_mc_task_81689.free_jump_70237 = jump_70237;
                futhark_mc_task_81689.free_n_m_70241 = n_m_70241;
                futhark_mc_task_81689.free_i_70247 = i_70247;
                futhark_mc_task_81689.free_x_70248 = x_70248;
                futhark_mc_task_81689.free_min_res_70253 = min_res_70253;
                futhark_mc_task_81689.free_loop_cond_70258 = loop_cond_70258;
                futhark_mc_task_81689.free_i64_res_70259 = i64_res_70259;
                futhark_mc_task_81689.free_Y_mem_75306 = Y_mem_75306.mem;
                futhark_mc_task_81689.free_bytes_75424 = bytes_75424;
                futhark_mc_task_81689.free_bytes_75427 = bytes_75427;
                futhark_mc_task_81689.free_bytes_75436 = bytes_75436;
                futhark_mc_task_81689.free_bytes_75439 = bytes_75439;
                futhark_mc_task_81689.free_mem_75552 = mem_75552.mem;
                futhark_mc_task_81689.free_mem_75556 = mem_75556.mem;
                
                struct scheduler_segop futhark_mc_task_81689_task;
                
                futhark_mc_task_81689_task.args = &futhark_mc_task_81689;
                futhark_mc_task_81689_task.top_level_fn =
                    futhark_mc_segmap_task_81690;
                futhark_mc_task_81689_task.name =
                    "futhark_mc_segmap_task_81690";
                futhark_mc_task_81689_task.iterations = m_70232;
                futhark_mc_task_81689_task.task_time =
                    &ctx->futhark_mc_segmap_task_81690_total_time;
                futhark_mc_task_81689_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81690_total_iter;
                futhark_mc_task_81689_task.sched = DYNAMIC;
                futhark_mc_task_81689_task.nested_fn =
                    futhark_mc_segmap_nested_task_81700;
                
                int futhark_mc_segmap_task_81690_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81689_task);
                
                if (futhark_mc_segmap_task_81690_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_75692, &mem_75552,
                                 "mem_75552") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_75691, &mem_75556,
                                 "mem_75556") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75556, "mem_75556") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75552, "mem_75552") != 0)
                    return 1;
            } else {
                struct memblock mem_75686;
                
                mem_75686.references = NULL;
                if (memblock_alloc(ctx, &mem_75686, bytes_75309, "mem_75686")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_75690;
                
                mem_75690.references = NULL;
                if (memblock_alloc(ctx, &mem_75690, bytes_75309, "mem_75690")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75557 = (int64_t) 8 * n_70233;
                int64_t bytes_75558 = smax64((int64_t) 0, binop_y_75557);
                int64_t binop_y_75560 = (int64_t) 4 * n_70233;
                int64_t bytes_75561 = smax64((int64_t) 0, binop_y_75560);
                int64_t binop_y_75569 = (int64_t) 4 * q_70235;
                int64_t bytes_75570 = smax64((int64_t) 0, binop_y_75569);
                int64_t binop_y_75572 = (int64_t) 4 * n_m_70241;
                int64_t bytes_75573 = smax64((int64_t) 0, binop_y_75572);
                int64_t flat_tid_72588 = (int64_t) 0;
                int32_t num_tasks_77974;
                int64_t flat_tid_72590 = (int64_t) 0;
                struct futhark_mc_task_81749 futhark_mc_task_81749;
                
                futhark_mc_task_81749.ctx = ctx;
                futhark_mc_task_81749.free_m_70232 = m_70232;
                futhark_mc_task_81749.free_n_70233 = n_70233;
                futhark_mc_task_81749.free_q_70235 = q_70235;
                futhark_mc_task_81749.free_jump_70237 = jump_70237;
                futhark_mc_task_81749.free_n_m_70241 = n_m_70241;
                futhark_mc_task_81749.free_i_70247 = i_70247;
                futhark_mc_task_81749.free_x_70248 = x_70248;
                futhark_mc_task_81749.free_min_res_70253 = min_res_70253;
                futhark_mc_task_81749.free_loop_cond_70258 = loop_cond_70258;
                futhark_mc_task_81749.free_i64_res_70259 = i64_res_70259;
                futhark_mc_task_81749.free_Y_mem_75306 = Y_mem_75306.mem;
                futhark_mc_task_81749.free_bytes_75558 = bytes_75558;
                futhark_mc_task_81749.free_bytes_75561 = bytes_75561;
                futhark_mc_task_81749.free_bytes_75570 = bytes_75570;
                futhark_mc_task_81749.free_bytes_75573 = bytes_75573;
                futhark_mc_task_81749.free_mem_75686 = mem_75686.mem;
                futhark_mc_task_81749.free_mem_75690 = mem_75690.mem;
                
                struct scheduler_segop futhark_mc_task_81749_task;
                
                futhark_mc_task_81749_task.args = &futhark_mc_task_81749;
                futhark_mc_task_81749_task.top_level_fn =
                    futhark_mc_segmap_task_81750;
                futhark_mc_task_81749_task.name =
                    "futhark_mc_segmap_task_81750";
                futhark_mc_task_81749_task.iterations = m_70232;
                futhark_mc_task_81749_task.task_time =
                    &ctx->futhark_mc_segmap_task_81750_total_time;
                futhark_mc_task_81749_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81750_total_iter;
                futhark_mc_task_81749_task.sched = DYNAMIC;
                futhark_mc_task_81749_task.nested_fn =
                    futhark_mc_segmap_nested_task_81760;
                
                int futhark_mc_segmap_task_81750_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81749_task);
                
                if (futhark_mc_segmap_task_81750_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_75692, &mem_75686,
                                 "mem_75686") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_75691, &mem_75690,
                                 "mem_75690") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75690, "mem_75690") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75686, "mem_75686") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_75694, &ext_mem_75692,
                             "ext_mem_75692") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_75693, &ext_mem_75691,
                             "ext_mem_75691") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_75691, "ext_mem_75691") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_75692, "ext_mem_75692") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_76315, &ext_mem_75694,
                         "ext_mem_75694") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_76314, &ext_mem_75693,
                         "ext_mem_75693") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_75693, "ext_mem_75693") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_75694, "ext_mem_75694") != 0)
            return 1;
    } else {
        bool match_lit_70891 = (int64_t) 0 == degree_70236;
        int64_t binop_x_75695 = m_70232 * n_m_70241;
        int64_t binop_y_75696 = (int64_t) 4 * binop_x_75695;
        int64_t bytes_75697 = smax64((int64_t) 0, binop_y_75696);
        struct memblock ext_mem_76313;
        
        ext_mem_76313.references = NULL;
        
        struct memblock ext_mem_76312;
        
        ext_mem_76312.references = NULL;
        if (match_lit_70891) {
            struct memblock mem_75698;
            
            mem_75698.references = NULL;
            if (memblock_alloc(ctx, &mem_75698, bytes_75697, "mem_75698")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_78983 = 0; i_78983 < m_70232; i_78983++) {
                for (int64_t i_78984 = 0; i_78984 < n_m_70241; i_78984++) {
                    ((float *) mem_75698.mem)[i_78983 * n_m_70241 + i_78984] =
                        0.0F;
                }
            }
            
            struct memblock mem_75843;
            
            mem_75843.references = NULL;
            if (memblock_alloc(ctx, &mem_75843, bytes_75697, "mem_75843")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_75699 = (int64_t) 8 * n_70233;
            int64_t bytes_75700 = smax64((int64_t) 0, binop_y_75699);
            int64_t binop_y_75702 = (int64_t) 4 * n_70233;
            int64_t bytes_75703 = smax64((int64_t) 0, binop_y_75702);
            int64_t binop_y_75711 = (int64_t) 4 * q_70235;
            int64_t bytes_75712 = smax64((int64_t) 0, binop_y_75711);
            int64_t binop_y_75732 = (int64_t) 4 * n_m_70241;
            int64_t bytes_75733 = smax64((int64_t) 0, binop_y_75732);
            int64_t flat_tid_73230 = (int64_t) 0;
            int32_t num_tasks_78985;
            int64_t flat_tid_73232 = (int64_t) 0;
            struct futhark_mc_task_81811 futhark_mc_task_81811;
            
            futhark_mc_task_81811.ctx = ctx;
            futhark_mc_task_81811.free_m_70232 = m_70232;
            futhark_mc_task_81811.free_n_70233 = n_70233;
            futhark_mc_task_81811.free_q_70235 = q_70235;
            futhark_mc_task_81811.free_jump_70237 = jump_70237;
            futhark_mc_task_81811.free_n_m_70241 = n_m_70241;
            futhark_mc_task_81811.free_i_70247 = i_70247;
            futhark_mc_task_81811.free_x_70248 = x_70248;
            futhark_mc_task_81811.free_min_res_70253 = min_res_70253;
            futhark_mc_task_81811.free_loop_cond_70258 = loop_cond_70258;
            futhark_mc_task_81811.free_i64_res_70259 = i64_res_70259;
            futhark_mc_task_81811.free_Y_mem_75306 = Y_mem_75306.mem;
            futhark_mc_task_81811.free_bytes_75700 = bytes_75700;
            futhark_mc_task_81811.free_bytes_75703 = bytes_75703;
            futhark_mc_task_81811.free_bytes_75712 = bytes_75712;
            futhark_mc_task_81811.free_bytes_75733 = bytes_75733;
            futhark_mc_task_81811.free_mem_75843 = mem_75843.mem;
            
            struct scheduler_segop futhark_mc_task_81811_task;
            
            futhark_mc_task_81811_task.args = &futhark_mc_task_81811;
            futhark_mc_task_81811_task.top_level_fn =
                futhark_mc_segmap_task_81812;
            futhark_mc_task_81811_task.name = "futhark_mc_segmap_task_81812";
            futhark_mc_task_81811_task.iterations = m_70232;
            futhark_mc_task_81811_task.task_time =
                &ctx->futhark_mc_segmap_task_81812_total_time;
            futhark_mc_task_81811_task.task_iter =
                &ctx->futhark_mc_segmap_task_81812_total_iter;
            futhark_mc_task_81811_task.sched = DYNAMIC;
            futhark_mc_task_81811_task.nested_fn =
                futhark_mc_segmap_nested_task_81822;
            
            int futhark_mc_segmap_task_81812_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_81811_task);
            
            if (futhark_mc_segmap_task_81812_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_76313, &mem_75843, "mem_75843") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_76312, &mem_75698, "mem_75698") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75843, "mem_75843") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75698, "mem_75698") != 0)
                return 1;
        } else {
            bool match_lit_71057 = (int64_t) 1 == degree_70236;
            struct memblock ext_mem_76311;
            
            ext_mem_76311.references = NULL;
            
            struct memblock ext_mem_76310;
            
            ext_mem_76310.references = NULL;
            if (match_lit_71057) {
                struct memblock mem_76039;
                
                mem_76039.references = NULL;
                if (memblock_alloc(ctx, &mem_76039, bytes_75697, "mem_76039")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_76043;
                
                mem_76043.references = NULL;
                if (memblock_alloc(ctx, &mem_76043, bytes_75697, "mem_76043")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75844 = (int64_t) 8 * n_70233;
                int64_t bytes_75845 = smax64((int64_t) 0, binop_y_75844);
                int64_t binop_y_75847 = (int64_t) 4 * n_70233;
                int64_t bytes_75848 = smax64((int64_t) 0, binop_y_75847);
                int64_t binop_y_75856 = (int64_t) 4 * q_70235;
                int64_t bytes_75857 = smax64((int64_t) 0, binop_y_75856);
                int64_t binop_y_75895 = (int64_t) 4 * n_m_70241;
                int64_t bytes_75896 = smax64((int64_t) 0, binop_y_75895);
                int64_t flat_tid_73652 = (int64_t) 0;
                int32_t num_tasks_79669;
                int64_t flat_tid_73654 = (int64_t) 0;
                struct futhark_mc_task_81869 futhark_mc_task_81869;
                
                futhark_mc_task_81869.ctx = ctx;
                futhark_mc_task_81869.free_m_70232 = m_70232;
                futhark_mc_task_81869.free_n_70233 = n_70233;
                futhark_mc_task_81869.free_q_70235 = q_70235;
                futhark_mc_task_81869.free_jump_70237 = jump_70237;
                futhark_mc_task_81869.free_n_m_70241 = n_m_70241;
                futhark_mc_task_81869.free_i_70247 = i_70247;
                futhark_mc_task_81869.free_x_70248 = x_70248;
                futhark_mc_task_81869.free_min_res_70253 = min_res_70253;
                futhark_mc_task_81869.free_loop_cond_70258 = loop_cond_70258;
                futhark_mc_task_81869.free_i64_res_70259 = i64_res_70259;
                futhark_mc_task_81869.free_Y_mem_75306 = Y_mem_75306.mem;
                futhark_mc_task_81869.free_bytes_75845 = bytes_75845;
                futhark_mc_task_81869.free_bytes_75848 = bytes_75848;
                futhark_mc_task_81869.free_bytes_75857 = bytes_75857;
                futhark_mc_task_81869.free_bytes_75896 = bytes_75896;
                futhark_mc_task_81869.free_mem_76039 = mem_76039.mem;
                futhark_mc_task_81869.free_mem_76043 = mem_76043.mem;
                
                struct scheduler_segop futhark_mc_task_81869_task;
                
                futhark_mc_task_81869_task.args = &futhark_mc_task_81869;
                futhark_mc_task_81869_task.top_level_fn =
                    futhark_mc_segmap_task_81870;
                futhark_mc_task_81869_task.name =
                    "futhark_mc_segmap_task_81870";
                futhark_mc_task_81869_task.iterations = m_70232;
                futhark_mc_task_81869_task.task_time =
                    &ctx->futhark_mc_segmap_task_81870_total_time;
                futhark_mc_task_81869_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81870_total_iter;
                futhark_mc_task_81869_task.sched = DYNAMIC;
                futhark_mc_task_81869_task.nested_fn =
                    futhark_mc_segmap_nested_task_81882;
                
                int futhark_mc_segmap_task_81870_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81869_task);
                
                if (futhark_mc_segmap_task_81870_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_76311, &mem_76039,
                                 "mem_76039") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_76310, &mem_76043,
                                 "mem_76043") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76043, "mem_76043") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76039, "mem_76039") != 0)
                    return 1;
            } else {
                struct memblock mem_76305;
                
                mem_76305.references = NULL;
                if (memblock_alloc(ctx, &mem_76305, bytes_75697, "mem_76305")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_76309;
                
                mem_76309.references = NULL;
                if (memblock_alloc(ctx, &mem_76309, bytes_75697, "mem_76309")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_76044 = (int64_t) 8 * n_70233;
                int64_t bytes_76045 = smax64((int64_t) 0, binop_y_76044);
                int64_t binop_y_76047 = (int64_t) 4 * n_70233;
                int64_t bytes_76048 = smax64((int64_t) 0, binop_y_76047);
                int64_t binop_y_76056 = (int64_t) 4 * q_70235;
                int64_t bytes_76057 = smax64((int64_t) 0, binop_y_76056);
                int64_t binop_y_76131 = (int64_t) 4 * n_m_70241;
                int64_t bytes_76132 = smax64((int64_t) 0, binop_y_76131);
                int64_t flat_tid_74162 = (int64_t) 0;
                int32_t num_tasks_80506;
                int64_t flat_tid_74164 = (int64_t) 0;
                struct futhark_mc_task_81935 futhark_mc_task_81935;
                
                futhark_mc_task_81935.ctx = ctx;
                futhark_mc_task_81935.free_m_70232 = m_70232;
                futhark_mc_task_81935.free_n_70233 = n_70233;
                futhark_mc_task_81935.free_q_70235 = q_70235;
                futhark_mc_task_81935.free_jump_70237 = jump_70237;
                futhark_mc_task_81935.free_n_m_70241 = n_m_70241;
                futhark_mc_task_81935.free_i_70247 = i_70247;
                futhark_mc_task_81935.free_x_70248 = x_70248;
                futhark_mc_task_81935.free_min_res_70253 = min_res_70253;
                futhark_mc_task_81935.free_loop_cond_70258 = loop_cond_70258;
                futhark_mc_task_81935.free_i64_res_70259 = i64_res_70259;
                futhark_mc_task_81935.free_Y_mem_75306 = Y_mem_75306.mem;
                futhark_mc_task_81935.free_bytes_76045 = bytes_76045;
                futhark_mc_task_81935.free_bytes_76048 = bytes_76048;
                futhark_mc_task_81935.free_bytes_76057 = bytes_76057;
                futhark_mc_task_81935.free_bytes_76132 = bytes_76132;
                futhark_mc_task_81935.free_mem_76305 = mem_76305.mem;
                futhark_mc_task_81935.free_mem_76309 = mem_76309.mem;
                
                struct scheduler_segop futhark_mc_task_81935_task;
                
                futhark_mc_task_81935_task.args = &futhark_mc_task_81935;
                futhark_mc_task_81935_task.top_level_fn =
                    futhark_mc_segmap_task_81936;
                futhark_mc_task_81935_task.name =
                    "futhark_mc_segmap_task_81936";
                futhark_mc_task_81935_task.iterations = m_70232;
                futhark_mc_task_81935_task.task_time =
                    &ctx->futhark_mc_segmap_task_81936_total_time;
                futhark_mc_task_81935_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81936_total_iter;
                futhark_mc_task_81935_task.sched = DYNAMIC;
                futhark_mc_task_81935_task.nested_fn =
                    futhark_mc_segmap_nested_task_81950;
                
                int futhark_mc_segmap_task_81936_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81935_task);
                
                if (futhark_mc_segmap_task_81936_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_76311, &mem_76305,
                                 "mem_76305") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_76310, &mem_76309,
                                 "mem_76309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76309, "mem_76309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76305, "mem_76305") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_76313, &ext_mem_76311,
                             "ext_mem_76311") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_76312, &ext_mem_76310,
                             "ext_mem_76310") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76310, "ext_mem_76310") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76311, "ext_mem_76311") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_76315, &ext_mem_76313,
                         "ext_mem_76313") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_76314, &ext_mem_76312,
                         "ext_mem_76312") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_76312, "ext_mem_76312") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_76313, "ext_mem_76313") != 0)
            return 1;
    }
    
    bool cond_71521 = slt64((int64_t) 1, jump_70237);
    int64_t binop_x_76334 = m_70232 * n_70233;
    int64_t binop_y_76335 = (int64_t) 4 * binop_x_76334;
    int64_t bytes_76336 = smax64((int64_t) 0, binop_y_76335);
    int64_t ext_76339;
    
    if (cond_71521) {
        ext_76339 = n_70233;
    } else {
        ext_76339 = n_m_70241;
    }
    
    struct memblock ext_mem_76338;
    
    ext_mem_76338.references = NULL;
    if (cond_71521) {
        bool zzero_71523 = jump_70237 == (int64_t) 0;
        bool nonzzero_71524 = !zzero_71523;
        bool nonzzero_cert_71525;
        
        if (!nonzzero_71524) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:530:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:529:3-542:9\n   #5  loess.fut:607:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:606:5-608:29\n   #9  loess.fut:571:1-610:26\n");
            if (memblock_unref(ctx, &ext_mem_76338, "ext_mem_76338") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76314, "ext_mem_76314") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76315, "ext_mem_76315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_71526 = sub64(n_m_70241, (int64_t) 1);
        struct memblock mem_76337;
        
        mem_76337.references = NULL;
        if (memblock_alloc(ctx, &mem_76337, bytes_76336, "mem_76337")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_76316 = (int64_t) 4 * n_70233;
        int64_t bytes_76317 = smax64((int64_t) 0, binop_y_76316);
        int64_t flat_tid_74782 = (int64_t) 0;
        int32_t num_tasks_81525;
        int64_t flat_tid_74784 = (int64_t) 0;
        struct futhark_mc_task_82013 futhark_mc_task_82013;
        
        futhark_mc_task_82013.ctx = ctx;
        futhark_mc_task_82013.free_m_70232 = m_70232;
        futhark_mc_task_82013.free_n_70233 = n_70233;
        futhark_mc_task_82013.free_jump_70237 = jump_70237;
        futhark_mc_task_82013.free_n_m_70241 = n_m_70241;
        futhark_mc_task_82013.free_i_70247 = i_70247;
        futhark_mc_task_82013.free_y_71526 = y_71526;
        futhark_mc_task_82013.free_ext_mem_76314 = ext_mem_76314.mem;
        futhark_mc_task_82013.free_ext_mem_76315 = ext_mem_76315.mem;
        futhark_mc_task_82013.free_bytes_76317 = bytes_76317;
        futhark_mc_task_82013.free_mem_76337 = mem_76337.mem;
        
        struct scheduler_segop futhark_mc_task_82013_task;
        
        futhark_mc_task_82013_task.args = &futhark_mc_task_82013;
        futhark_mc_task_82013_task.top_level_fn = futhark_mc_segmap_task_82014;
        futhark_mc_task_82013_task.name = "futhark_mc_segmap_task_82014";
        futhark_mc_task_82013_task.iterations = m_70232;
        futhark_mc_task_82013_task.task_time =
            &ctx->futhark_mc_segmap_task_82014_total_time;
        futhark_mc_task_82013_task.task_iter =
            &ctx->futhark_mc_segmap_task_82014_total_iter;
        futhark_mc_task_82013_task.sched = STATIC;
        futhark_mc_task_82013_task.nested_fn =
            futhark_mc_segmap_nested_task_82018;
        
        int futhark_mc_segmap_task_82014_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82013_task);
        
        if (futhark_mc_segmap_task_82014_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_76338, &mem_76337, "mem_76337") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_76337, "mem_76337") != 0)
            return 1;
    } else {
        bool dim_match_71578 = n_70233 == n_m_70241;
        bool empty_or_match_cert_71579;
        
        if (!dim_match_71578) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_70232, ", ", (long long) n_m_70241,
                          ") cannot match shape of type `[",
                          (long long) m_70232, "][", (long long) n_70233,
                          "]f32`.",
                          "-> #0  loess.fut:610:5-26\n   #1  loess.fut:571:1-610:26\n");
            if (memblock_unref(ctx, &ext_mem_76338, "ext_mem_76338") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76314, "ext_mem_76314") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76315, "ext_mem_76315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_76338, &ext_mem_76315,
                         "ext_mem_76315") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_76314, "ext_mem_76314") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76315, "ext_mem_76315") != 0)
        return 1;
    
    struct memblock mem_76343;
    
    mem_76343.references = NULL;
    if (memblock_alloc(ctx, &mem_76343, bytes_76336, "mem_76343")) {
        err = 1;
        goto cleanup;
    }
    if (m_70232 * n_70233 * (int64_t) 4 > 0)
        memmove(mem_76343.mem + (int64_t) 0, ext_mem_76338.mem + (int64_t) 0,
                m_70232 * n_70233 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_76338, "ext_mem_76338") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_76355, &mem_76343, "mem_76343") != 0)
        return 1;
    (*mem_out_p_81633).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_81633, &mem_out_76355, "mem_out_76355") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_76343, "mem_76343") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76338, "ext_mem_76338") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76314, "ext_mem_76314") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76315, "ext_mem_76315") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_76355, "mem_out_76355") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_75306;
    
    Y_mem_75306.references = NULL;
    
    int64_t m_70232;
    int64_t n_70233;
    int64_t q_70235;
    int64_t degree_70236;
    int64_t jump_70237;
    int64_t jump_threshold_70238;
    int64_t q_threshold_70239;
    struct memblock mem_out_76355;
    
    mem_out_76355.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_75306 = in0->mem;
    m_70232 = in0->shape[0];
    n_70233 = in0->shape[1];
    q_70235 = in1;
    degree_70236 = in2;
    jump_70237 = in3;
    jump_threshold_70238 = in4;
    q_threshold_70239 = in5;
    if (!(m_70232 == in0->shape[0] && n_70233 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_76355, Y_mem_75306, m_70232,
                                n_70233, q_70235, degree_70236, jump_70237,
                                jump_threshold_70238, q_threshold_70239);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_76355;
            (*out0)->shape[0] = m_70232;
            (*out0)->shape[1] = n_70233;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
