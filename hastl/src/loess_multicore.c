// Generated by Futhark 0.22.0
// git: ed22762 (Sat Jan 15 01:09:59 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f64_2d;
struct futhark_f64_2d *futhark_new_f64_2d(struct futhark_context *ctx, const
                                          double *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f64_2d *futhark_new_raw_f64_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f64_2d(struct futhark_context *ctx,
                        struct futhark_f64_2d *arr);
int futhark_values_f64_2d(struct futhark_context *ctx,
                          struct futhark_f64_2d *arr, double *data);
unsigned char *futhark_values_raw_f64_2d(struct futhark_context *ctx,
                                         struct futhark_f64_2d *arr);
const int64_t *futhark_shape_f64_2d(struct futhark_context *ctx,
                                    struct futhark_f64_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f64_2d **out0, const
                       struct futhark_f64_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7);

// Miscellaneous
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // We assume that this function is called by the thread controlling
  // the first worker, which is why we treat scheduler->workers[0]
  // specially here.

  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  // And then destroy our own queue.
  subtask_queue_destroy(&scheduler->workers[0].q);

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int in_use;
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_109720_total_runtime;
    int *futhark_mc_segmap_parloop_109720_runs;
    int64_t *futhark_mc_segmap_parloop_109720_iter;
    int64_t futhark_mc_segmap_parloop_109720_total_total_runtime;
    int futhark_mc_segmap_parloop_109720_total_runs;
    int64_t futhark_mc_segmap_parloop_109720_total_iter;
    int64_t *futhark_mc_segmap_task_109718_total_runtime;
    int *futhark_mc_segmap_task_109718_runs;
    int64_t *futhark_mc_segmap_task_109718_iter;
    int64_t futhark_mc_segmap_task_109718_total_time;
    int64_t futhark_mc_segmap_task_109718_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_109740_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_109740_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_109740_iter;
    int64_t futhark_mc_scan_stage_1_parloop_109740_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_109740_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_109740_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_109742_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_109742_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_109742_iter;
    int64_t futhark_mc_scan_stage_3_parloop_109742_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_109742_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_109742_total_iter;
    int64_t *futhark_mc_segscan_task_109737_total_runtime;
    int *futhark_mc_segscan_task_109737_runs;
    int64_t *futhark_mc_segscan_task_109737_iter;
    int64_t futhark_mc_segscan_task_109737_total_time;
    int64_t futhark_mc_segscan_task_109737_total_iter;
    int64_t *futhark_mc_segmap_parloop_109746_total_runtime;
    int *futhark_mc_segmap_parloop_109746_runs;
    int64_t *futhark_mc_segmap_parloop_109746_iter;
    int64_t futhark_mc_segmap_parloop_109746_total_total_runtime;
    int futhark_mc_segmap_parloop_109746_total_runs;
    int64_t futhark_mc_segmap_parloop_109746_total_iter;
    int64_t *futhark_mc_segmap_task_109744_total_runtime;
    int *futhark_mc_segmap_task_109744_runs;
    int64_t *futhark_mc_segmap_task_109744_iter;
    int64_t futhark_mc_segmap_task_109744_total_time;
    int64_t futhark_mc_segmap_task_109744_total_iter;
    int64_t *futhark_mc_segmap_parloop_109750_total_runtime;
    int *futhark_mc_segmap_parloop_109750_runs;
    int64_t *futhark_mc_segmap_parloop_109750_iter;
    int64_t futhark_mc_segmap_parloop_109750_total_total_runtime;
    int futhark_mc_segmap_parloop_109750_total_runs;
    int64_t futhark_mc_segmap_parloop_109750_total_iter;
    int64_t *futhark_mc_segmap_task_109748_total_runtime;
    int *futhark_mc_segmap_task_109748_runs;
    int64_t *futhark_mc_segmap_task_109748_iter;
    int64_t futhark_mc_segmap_task_109748_total_time;
    int64_t futhark_mc_segmap_task_109748_total_iter;
    int64_t *futhark_mc_segmap_parloop_109754_total_runtime;
    int *futhark_mc_segmap_parloop_109754_runs;
    int64_t *futhark_mc_segmap_parloop_109754_iter;
    int64_t futhark_mc_segmap_parloop_109754_total_total_runtime;
    int futhark_mc_segmap_parloop_109754_total_runs;
    int64_t futhark_mc_segmap_parloop_109754_total_iter;
    int64_t *futhark_mc_segmap_task_109752_total_runtime;
    int *futhark_mc_segmap_task_109752_runs;
    int64_t *futhark_mc_segmap_task_109752_iter;
    int64_t futhark_mc_segmap_task_109752_total_time;
    int64_t futhark_mc_segmap_task_109752_total_iter;
    int64_t *futhark_mc_segmap_parloop_109758_total_runtime;
    int *futhark_mc_segmap_parloop_109758_runs;
    int64_t *futhark_mc_segmap_parloop_109758_iter;
    int64_t futhark_mc_segmap_parloop_109758_total_total_runtime;
    int futhark_mc_segmap_parloop_109758_total_runs;
    int64_t futhark_mc_segmap_parloop_109758_total_iter;
    int64_t *futhark_mc_segmap_task_109756_total_runtime;
    int *futhark_mc_segmap_task_109756_runs;
    int64_t *futhark_mc_segmap_task_109756_iter;
    int64_t futhark_mc_segmap_task_109756_total_time;
    int64_t futhark_mc_segmap_task_109756_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109766_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109766_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109766_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109766_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109766_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109766_total_iter;
    int64_t *futhark_mc_segred_task_109763_total_runtime;
    int *futhark_mc_segred_task_109763_runs;
    int64_t *futhark_mc_segred_task_109763_iter;
    int64_t futhark_mc_segred_task_109763_total_time;
    int64_t futhark_mc_segred_task_109763_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109771_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109771_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109771_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109771_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109771_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109771_total_iter;
    int64_t *futhark_mc_segred_task_109768_total_runtime;
    int *futhark_mc_segred_task_109768_runs;
    int64_t *futhark_mc_segred_task_109768_iter;
    int64_t futhark_mc_segred_task_109768_total_time;
    int64_t futhark_mc_segred_task_109768_total_iter;
    int64_t *futhark_mc_segmap_parloop_109761_total_runtime;
    int *futhark_mc_segmap_parloop_109761_runs;
    int64_t *futhark_mc_segmap_parloop_109761_iter;
    int64_t futhark_mc_segmap_parloop_109761_total_total_runtime;
    int futhark_mc_segmap_parloop_109761_total_runs;
    int64_t futhark_mc_segmap_parloop_109761_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109759_total_runtime;
    int *futhark_mc_segmap_nested_task_109759_runs;
    int64_t *futhark_mc_segmap_nested_task_109759_iter;
    int64_t *futhark_mc_segmap_parloop_109729_total_runtime;
    int *futhark_mc_segmap_parloop_109729_runs;
    int64_t *futhark_mc_segmap_parloop_109729_iter;
    int64_t futhark_mc_segmap_parloop_109729_total_total_runtime;
    int futhark_mc_segmap_parloop_109729_total_runs;
    int64_t futhark_mc_segmap_parloop_109729_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109727_total_runtime;
    int *futhark_mc_segmap_nested_task_109727_runs;
    int64_t *futhark_mc_segmap_nested_task_109727_iter;
    int64_t *futhark_mc_segmap_parloop_109775_total_runtime;
    int *futhark_mc_segmap_parloop_109775_runs;
    int64_t *futhark_mc_segmap_parloop_109775_iter;
    int64_t futhark_mc_segmap_parloop_109775_total_total_runtime;
    int futhark_mc_segmap_parloop_109775_total_runs;
    int64_t futhark_mc_segmap_parloop_109775_total_iter;
    int64_t *futhark_mc_segmap_task_109773_total_runtime;
    int *futhark_mc_segmap_task_109773_runs;
    int64_t *futhark_mc_segmap_task_109773_iter;
    int64_t futhark_mc_segmap_task_109773_total_time;
    int64_t futhark_mc_segmap_task_109773_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_109797_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_109797_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_109797_iter;
    int64_t futhark_mc_scan_stage_1_parloop_109797_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_109797_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_109797_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_109799_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_109799_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_109799_iter;
    int64_t futhark_mc_scan_stage_3_parloop_109799_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_109799_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_109799_total_iter;
    int64_t *futhark_mc_segscan_task_109794_total_runtime;
    int *futhark_mc_segscan_task_109794_runs;
    int64_t *futhark_mc_segscan_task_109794_iter;
    int64_t futhark_mc_segscan_task_109794_total_time;
    int64_t futhark_mc_segscan_task_109794_total_iter;
    int64_t *futhark_mc_segmap_parloop_109803_total_runtime;
    int *futhark_mc_segmap_parloop_109803_runs;
    int64_t *futhark_mc_segmap_parloop_109803_iter;
    int64_t futhark_mc_segmap_parloop_109803_total_total_runtime;
    int futhark_mc_segmap_parloop_109803_total_runs;
    int64_t futhark_mc_segmap_parloop_109803_total_iter;
    int64_t *futhark_mc_segmap_task_109801_total_runtime;
    int *futhark_mc_segmap_task_109801_runs;
    int64_t *futhark_mc_segmap_task_109801_iter;
    int64_t futhark_mc_segmap_task_109801_total_time;
    int64_t futhark_mc_segmap_task_109801_total_iter;
    int64_t *futhark_mc_segmap_parloop_109807_total_runtime;
    int *futhark_mc_segmap_parloop_109807_runs;
    int64_t *futhark_mc_segmap_parloop_109807_iter;
    int64_t futhark_mc_segmap_parloop_109807_total_total_runtime;
    int futhark_mc_segmap_parloop_109807_total_runs;
    int64_t futhark_mc_segmap_parloop_109807_total_iter;
    int64_t *futhark_mc_segmap_task_109805_total_runtime;
    int *futhark_mc_segmap_task_109805_runs;
    int64_t *futhark_mc_segmap_task_109805_iter;
    int64_t futhark_mc_segmap_task_109805_total_time;
    int64_t futhark_mc_segmap_task_109805_total_iter;
    int64_t *futhark_mc_segmap_parloop_109811_total_runtime;
    int *futhark_mc_segmap_parloop_109811_runs;
    int64_t *futhark_mc_segmap_parloop_109811_iter;
    int64_t futhark_mc_segmap_parloop_109811_total_total_runtime;
    int futhark_mc_segmap_parloop_109811_total_runs;
    int64_t futhark_mc_segmap_parloop_109811_total_iter;
    int64_t *futhark_mc_segmap_task_109809_total_runtime;
    int *futhark_mc_segmap_task_109809_runs;
    int64_t *futhark_mc_segmap_task_109809_iter;
    int64_t futhark_mc_segmap_task_109809_total_time;
    int64_t futhark_mc_segmap_task_109809_total_iter;
    int64_t *futhark_mc_segmap_parloop_109815_total_runtime;
    int *futhark_mc_segmap_parloop_109815_runs;
    int64_t *futhark_mc_segmap_parloop_109815_iter;
    int64_t futhark_mc_segmap_parloop_109815_total_total_runtime;
    int futhark_mc_segmap_parloop_109815_total_runs;
    int64_t futhark_mc_segmap_parloop_109815_total_iter;
    int64_t *futhark_mc_segmap_task_109813_total_runtime;
    int *futhark_mc_segmap_task_109813_runs;
    int64_t *futhark_mc_segmap_task_109813_iter;
    int64_t futhark_mc_segmap_task_109813_total_time;
    int64_t futhark_mc_segmap_task_109813_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109825_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109825_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109825_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109825_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109825_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109825_total_iter;
    int64_t *futhark_mc_segred_task_109820_total_runtime;
    int *futhark_mc_segred_task_109820_runs;
    int64_t *futhark_mc_segred_task_109820_iter;
    int64_t futhark_mc_segred_task_109820_total_time;
    int64_t futhark_mc_segred_task_109820_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109831_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109831_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109831_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109831_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109831_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109831_total_iter;
    int64_t *futhark_mc_segred_task_109827_total_runtime;
    int *futhark_mc_segred_task_109827_runs;
    int64_t *futhark_mc_segred_task_109827_iter;
    int64_t futhark_mc_segred_task_109827_total_time;
    int64_t futhark_mc_segred_task_109827_total_iter;
    int64_t *futhark_mc_segmap_parloop_109818_total_runtime;
    int *futhark_mc_segmap_parloop_109818_runs;
    int64_t *futhark_mc_segmap_parloop_109818_iter;
    int64_t futhark_mc_segmap_parloop_109818_total_total_runtime;
    int futhark_mc_segmap_parloop_109818_total_runs;
    int64_t futhark_mc_segmap_parloop_109818_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109816_total_runtime;
    int *futhark_mc_segmap_nested_task_109816_runs;
    int64_t *futhark_mc_segmap_nested_task_109816_iter;
    int64_t *futhark_mc_segmap_parloop_109785_total_runtime;
    int *futhark_mc_segmap_parloop_109785_runs;
    int64_t *futhark_mc_segmap_parloop_109785_iter;
    int64_t futhark_mc_segmap_parloop_109785_total_total_runtime;
    int futhark_mc_segmap_parloop_109785_total_runs;
    int64_t futhark_mc_segmap_parloop_109785_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109783_total_runtime;
    int *futhark_mc_segmap_nested_task_109783_runs;
    int64_t *futhark_mc_segmap_nested_task_109783_iter;
    int64_t *futhark_mc_segmap_parloop_109835_total_runtime;
    int *futhark_mc_segmap_parloop_109835_runs;
    int64_t *futhark_mc_segmap_parloop_109835_iter;
    int64_t futhark_mc_segmap_parloop_109835_total_total_runtime;
    int futhark_mc_segmap_parloop_109835_total_runs;
    int64_t futhark_mc_segmap_parloop_109835_total_iter;
    int64_t *futhark_mc_segmap_task_109833_total_runtime;
    int *futhark_mc_segmap_task_109833_runs;
    int64_t *futhark_mc_segmap_task_109833_iter;
    int64_t futhark_mc_segmap_task_109833_total_time;
    int64_t futhark_mc_segmap_task_109833_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_109857_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_109857_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_109857_iter;
    int64_t futhark_mc_scan_stage_1_parloop_109857_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_109857_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_109857_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_109859_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_109859_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_109859_iter;
    int64_t futhark_mc_scan_stage_3_parloop_109859_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_109859_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_109859_total_iter;
    int64_t *futhark_mc_segscan_task_109854_total_runtime;
    int *futhark_mc_segscan_task_109854_runs;
    int64_t *futhark_mc_segscan_task_109854_iter;
    int64_t futhark_mc_segscan_task_109854_total_time;
    int64_t futhark_mc_segscan_task_109854_total_iter;
    int64_t *futhark_mc_segmap_parloop_109863_total_runtime;
    int *futhark_mc_segmap_parloop_109863_runs;
    int64_t *futhark_mc_segmap_parloop_109863_iter;
    int64_t futhark_mc_segmap_parloop_109863_total_total_runtime;
    int futhark_mc_segmap_parloop_109863_total_runs;
    int64_t futhark_mc_segmap_parloop_109863_total_iter;
    int64_t *futhark_mc_segmap_task_109861_total_runtime;
    int *futhark_mc_segmap_task_109861_runs;
    int64_t *futhark_mc_segmap_task_109861_iter;
    int64_t futhark_mc_segmap_task_109861_total_time;
    int64_t futhark_mc_segmap_task_109861_total_iter;
    int64_t *futhark_mc_segmap_parloop_109867_total_runtime;
    int *futhark_mc_segmap_parloop_109867_runs;
    int64_t *futhark_mc_segmap_parloop_109867_iter;
    int64_t futhark_mc_segmap_parloop_109867_total_total_runtime;
    int futhark_mc_segmap_parloop_109867_total_runs;
    int64_t futhark_mc_segmap_parloop_109867_total_iter;
    int64_t *futhark_mc_segmap_task_109865_total_runtime;
    int *futhark_mc_segmap_task_109865_runs;
    int64_t *futhark_mc_segmap_task_109865_iter;
    int64_t futhark_mc_segmap_task_109865_total_time;
    int64_t futhark_mc_segmap_task_109865_total_iter;
    int64_t *futhark_mc_segmap_parloop_109871_total_runtime;
    int *futhark_mc_segmap_parloop_109871_runs;
    int64_t *futhark_mc_segmap_parloop_109871_iter;
    int64_t futhark_mc_segmap_parloop_109871_total_total_runtime;
    int futhark_mc_segmap_parloop_109871_total_runs;
    int64_t futhark_mc_segmap_parloop_109871_total_iter;
    int64_t *futhark_mc_segmap_task_109869_total_runtime;
    int *futhark_mc_segmap_task_109869_runs;
    int64_t *futhark_mc_segmap_task_109869_iter;
    int64_t futhark_mc_segmap_task_109869_total_time;
    int64_t futhark_mc_segmap_task_109869_total_iter;
    int64_t *futhark_mc_segmap_parloop_109875_total_runtime;
    int *futhark_mc_segmap_parloop_109875_runs;
    int64_t *futhark_mc_segmap_parloop_109875_iter;
    int64_t futhark_mc_segmap_parloop_109875_total_total_runtime;
    int futhark_mc_segmap_parloop_109875_total_runs;
    int64_t futhark_mc_segmap_parloop_109875_total_iter;
    int64_t *futhark_mc_segmap_task_109873_total_runtime;
    int *futhark_mc_segmap_task_109873_runs;
    int64_t *futhark_mc_segmap_task_109873_iter;
    int64_t futhark_mc_segmap_task_109873_total_time;
    int64_t futhark_mc_segmap_task_109873_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109887_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109887_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109887_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109887_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109887_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109887_total_iter;
    int64_t *futhark_mc_segred_task_109880_total_runtime;
    int *futhark_mc_segred_task_109880_runs;
    int64_t *futhark_mc_segred_task_109880_iter;
    int64_t futhark_mc_segred_task_109880_total_time;
    int64_t futhark_mc_segred_task_109880_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109893_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109893_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109893_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109893_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109893_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109893_total_iter;
    int64_t *futhark_mc_segred_task_109889_total_runtime;
    int *futhark_mc_segred_task_109889_runs;
    int64_t *futhark_mc_segred_task_109889_iter;
    int64_t futhark_mc_segred_task_109889_total_time;
    int64_t futhark_mc_segred_task_109889_total_iter;
    int64_t *futhark_mc_segmap_parloop_109878_total_runtime;
    int *futhark_mc_segmap_parloop_109878_runs;
    int64_t *futhark_mc_segmap_parloop_109878_iter;
    int64_t futhark_mc_segmap_parloop_109878_total_total_runtime;
    int futhark_mc_segmap_parloop_109878_total_runs;
    int64_t futhark_mc_segmap_parloop_109878_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109876_total_runtime;
    int *futhark_mc_segmap_nested_task_109876_runs;
    int64_t *futhark_mc_segmap_nested_task_109876_iter;
    int64_t *futhark_mc_segmap_parloop_109845_total_runtime;
    int *futhark_mc_segmap_parloop_109845_runs;
    int64_t *futhark_mc_segmap_parloop_109845_iter;
    int64_t futhark_mc_segmap_parloop_109845_total_total_runtime;
    int futhark_mc_segmap_parloop_109845_total_runs;
    int64_t futhark_mc_segmap_parloop_109845_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109843_total_runtime;
    int *futhark_mc_segmap_nested_task_109843_runs;
    int64_t *futhark_mc_segmap_nested_task_109843_iter;
    int64_t *futhark_mc_segmap_parloop_109897_total_runtime;
    int *futhark_mc_segmap_parloop_109897_runs;
    int64_t *futhark_mc_segmap_parloop_109897_iter;
    int64_t futhark_mc_segmap_parloop_109897_total_total_runtime;
    int futhark_mc_segmap_parloop_109897_total_runs;
    int64_t futhark_mc_segmap_parloop_109897_total_iter;
    int64_t *futhark_mc_segmap_task_109895_total_runtime;
    int *futhark_mc_segmap_task_109895_runs;
    int64_t *futhark_mc_segmap_task_109895_iter;
    int64_t futhark_mc_segmap_task_109895_total_time;
    int64_t futhark_mc_segmap_task_109895_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_109918_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_109918_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_109918_iter;
    int64_t futhark_mc_scan_stage_1_parloop_109918_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_109918_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_109918_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_109920_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_109920_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_109920_iter;
    int64_t futhark_mc_scan_stage_3_parloop_109920_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_109920_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_109920_total_iter;
    int64_t *futhark_mc_segscan_task_109915_total_runtime;
    int *futhark_mc_segscan_task_109915_runs;
    int64_t *futhark_mc_segscan_task_109915_iter;
    int64_t futhark_mc_segscan_task_109915_total_time;
    int64_t futhark_mc_segscan_task_109915_total_iter;
    int64_t *futhark_mc_segmap_parloop_109924_total_runtime;
    int *futhark_mc_segmap_parloop_109924_runs;
    int64_t *futhark_mc_segmap_parloop_109924_iter;
    int64_t futhark_mc_segmap_parloop_109924_total_total_runtime;
    int futhark_mc_segmap_parloop_109924_total_runs;
    int64_t futhark_mc_segmap_parloop_109924_total_iter;
    int64_t *futhark_mc_segmap_task_109922_total_runtime;
    int *futhark_mc_segmap_task_109922_runs;
    int64_t *futhark_mc_segmap_task_109922_iter;
    int64_t futhark_mc_segmap_task_109922_total_time;
    int64_t futhark_mc_segmap_task_109922_total_iter;
    int64_t *futhark_mc_segmap_parloop_109928_total_runtime;
    int *futhark_mc_segmap_parloop_109928_runs;
    int64_t *futhark_mc_segmap_parloop_109928_iter;
    int64_t futhark_mc_segmap_parloop_109928_total_total_runtime;
    int futhark_mc_segmap_parloop_109928_total_runs;
    int64_t futhark_mc_segmap_parloop_109928_total_iter;
    int64_t *futhark_mc_segmap_task_109926_total_runtime;
    int *futhark_mc_segmap_task_109926_runs;
    int64_t *futhark_mc_segmap_task_109926_iter;
    int64_t futhark_mc_segmap_task_109926_total_time;
    int64_t futhark_mc_segmap_task_109926_total_iter;
    int64_t *futhark_mc_segmap_parloop_109932_total_runtime;
    int *futhark_mc_segmap_parloop_109932_runs;
    int64_t *futhark_mc_segmap_parloop_109932_iter;
    int64_t futhark_mc_segmap_parloop_109932_total_total_runtime;
    int futhark_mc_segmap_parloop_109932_total_runs;
    int64_t futhark_mc_segmap_parloop_109932_total_iter;
    int64_t *futhark_mc_segmap_task_109930_total_runtime;
    int *futhark_mc_segmap_task_109930_runs;
    int64_t *futhark_mc_segmap_task_109930_iter;
    int64_t futhark_mc_segmap_task_109930_total_time;
    int64_t futhark_mc_segmap_task_109930_total_iter;
    int64_t *futhark_mc_segmap_parloop_109936_total_runtime;
    int *futhark_mc_segmap_parloop_109936_runs;
    int64_t *futhark_mc_segmap_parloop_109936_iter;
    int64_t futhark_mc_segmap_parloop_109936_total_total_runtime;
    int futhark_mc_segmap_parloop_109936_total_runs;
    int64_t futhark_mc_segmap_parloop_109936_total_iter;
    int64_t *futhark_mc_segmap_task_109934_total_runtime;
    int *futhark_mc_segmap_task_109934_runs;
    int64_t *futhark_mc_segmap_task_109934_iter;
    int64_t futhark_mc_segmap_task_109934_total_time;
    int64_t futhark_mc_segmap_task_109934_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109946_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109946_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109946_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109946_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109946_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109946_total_iter;
    int64_t *futhark_mc_segred_task_109943_total_runtime;
    int *futhark_mc_segred_task_109943_runs;
    int64_t *futhark_mc_segred_task_109943_iter;
    int64_t futhark_mc_segred_task_109943_total_time;
    int64_t futhark_mc_segred_task_109943_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_109951_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_109951_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_109951_iter;
    int64_t futhark_mc_segred_stage_1_parloop_109951_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_109951_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_109951_total_iter;
    int64_t *futhark_mc_segred_task_109948_total_runtime;
    int *futhark_mc_segred_task_109948_runs;
    int64_t *futhark_mc_segred_task_109948_iter;
    int64_t futhark_mc_segred_task_109948_total_time;
    int64_t futhark_mc_segred_task_109948_total_iter;
    int64_t *futhark_mc_segmap_parloop_109940_total_runtime;
    int *futhark_mc_segmap_parloop_109940_runs;
    int64_t *futhark_mc_segmap_parloop_109940_iter;
    int64_t futhark_mc_segmap_parloop_109940_total_total_runtime;
    int futhark_mc_segmap_parloop_109940_total_runs;
    int64_t futhark_mc_segmap_parloop_109940_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109938_total_runtime;
    int *futhark_mc_segmap_nested_task_109938_runs;
    int64_t *futhark_mc_segmap_nested_task_109938_iter;
    int64_t *futhark_mc_segmap_parloop_109907_total_runtime;
    int *futhark_mc_segmap_parloop_109907_runs;
    int64_t *futhark_mc_segmap_parloop_109907_iter;
    int64_t futhark_mc_segmap_parloop_109907_total_total_runtime;
    int futhark_mc_segmap_parloop_109907_total_runs;
    int64_t futhark_mc_segmap_parloop_109907_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109905_total_runtime;
    int *futhark_mc_segmap_nested_task_109905_runs;
    int64_t *futhark_mc_segmap_nested_task_109905_iter;
    int64_t *futhark_mc_segmap_parloop_109955_total_runtime;
    int *futhark_mc_segmap_parloop_109955_runs;
    int64_t *futhark_mc_segmap_parloop_109955_iter;
    int64_t futhark_mc_segmap_parloop_109955_total_total_runtime;
    int futhark_mc_segmap_parloop_109955_total_runs;
    int64_t futhark_mc_segmap_parloop_109955_total_iter;
    int64_t *futhark_mc_segmap_task_109953_total_runtime;
    int *futhark_mc_segmap_task_109953_runs;
    int64_t *futhark_mc_segmap_task_109953_iter;
    int64_t futhark_mc_segmap_task_109953_total_time;
    int64_t futhark_mc_segmap_task_109953_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_109979_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_109979_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_109979_iter;
    int64_t futhark_mc_scan_stage_1_parloop_109979_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_109979_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_109979_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_109981_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_109981_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_109981_iter;
    int64_t futhark_mc_scan_stage_3_parloop_109981_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_109981_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_109981_total_iter;
    int64_t *futhark_mc_segscan_task_109976_total_runtime;
    int *futhark_mc_segscan_task_109976_runs;
    int64_t *futhark_mc_segscan_task_109976_iter;
    int64_t futhark_mc_segscan_task_109976_total_time;
    int64_t futhark_mc_segscan_task_109976_total_iter;
    int64_t *futhark_mc_segmap_parloop_109985_total_runtime;
    int *futhark_mc_segmap_parloop_109985_runs;
    int64_t *futhark_mc_segmap_parloop_109985_iter;
    int64_t futhark_mc_segmap_parloop_109985_total_total_runtime;
    int futhark_mc_segmap_parloop_109985_total_runs;
    int64_t futhark_mc_segmap_parloop_109985_total_iter;
    int64_t *futhark_mc_segmap_task_109983_total_runtime;
    int *futhark_mc_segmap_task_109983_runs;
    int64_t *futhark_mc_segmap_task_109983_iter;
    int64_t futhark_mc_segmap_task_109983_total_time;
    int64_t futhark_mc_segmap_task_109983_total_iter;
    int64_t *futhark_mc_segmap_parloop_109989_total_runtime;
    int *futhark_mc_segmap_parloop_109989_runs;
    int64_t *futhark_mc_segmap_parloop_109989_iter;
    int64_t futhark_mc_segmap_parloop_109989_total_total_runtime;
    int futhark_mc_segmap_parloop_109989_total_runs;
    int64_t futhark_mc_segmap_parloop_109989_total_iter;
    int64_t *futhark_mc_segmap_task_109987_total_runtime;
    int *futhark_mc_segmap_task_109987_runs;
    int64_t *futhark_mc_segmap_task_109987_iter;
    int64_t futhark_mc_segmap_task_109987_total_time;
    int64_t futhark_mc_segmap_task_109987_total_iter;
    int64_t *futhark_mc_segmap_parloop_109993_total_runtime;
    int *futhark_mc_segmap_parloop_109993_runs;
    int64_t *futhark_mc_segmap_parloop_109993_iter;
    int64_t futhark_mc_segmap_parloop_109993_total_total_runtime;
    int futhark_mc_segmap_parloop_109993_total_runs;
    int64_t futhark_mc_segmap_parloop_109993_total_iter;
    int64_t *futhark_mc_segmap_task_109991_total_runtime;
    int *futhark_mc_segmap_task_109991_runs;
    int64_t *futhark_mc_segmap_task_109991_iter;
    int64_t futhark_mc_segmap_task_109991_total_time;
    int64_t futhark_mc_segmap_task_109991_total_iter;
    int64_t *futhark_mc_segmap_parloop_109997_total_runtime;
    int *futhark_mc_segmap_parloop_109997_runs;
    int64_t *futhark_mc_segmap_parloop_109997_iter;
    int64_t futhark_mc_segmap_parloop_109997_total_total_runtime;
    int futhark_mc_segmap_parloop_109997_total_runs;
    int64_t futhark_mc_segmap_parloop_109997_total_iter;
    int64_t *futhark_mc_segmap_task_109995_total_runtime;
    int *futhark_mc_segmap_task_109995_runs;
    int64_t *futhark_mc_segmap_task_109995_iter;
    int64_t futhark_mc_segmap_task_109995_total_time;
    int64_t futhark_mc_segmap_task_109995_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110011_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110011_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110011_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110011_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110011_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110011_total_iter;
    int64_t *futhark_mc_segred_task_110006_total_runtime;
    int *futhark_mc_segred_task_110006_runs;
    int64_t *futhark_mc_segred_task_110006_iter;
    int64_t futhark_mc_segred_task_110006_total_time;
    int64_t futhark_mc_segred_task_110006_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110017_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110017_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110017_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110017_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110017_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110017_total_iter;
    int64_t *futhark_mc_segred_task_110013_total_runtime;
    int *futhark_mc_segred_task_110013_runs;
    int64_t *futhark_mc_segred_task_110013_iter;
    int64_t futhark_mc_segred_task_110013_total_time;
    int64_t futhark_mc_segred_task_110013_total_iter;
    int64_t *futhark_mc_segmap_parloop_110002_total_runtime;
    int *futhark_mc_segmap_parloop_110002_runs;
    int64_t *futhark_mc_segmap_parloop_110002_iter;
    int64_t futhark_mc_segmap_parloop_110002_total_total_runtime;
    int futhark_mc_segmap_parloop_110002_total_runs;
    int64_t futhark_mc_segmap_parloop_110002_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110000_total_runtime;
    int *futhark_mc_segmap_nested_task_110000_runs;
    int64_t *futhark_mc_segmap_nested_task_110000_iter;
    int64_t *futhark_mc_segmap_parloop_109967_total_runtime;
    int *futhark_mc_segmap_parloop_109967_runs;
    int64_t *futhark_mc_segmap_parloop_109967_iter;
    int64_t futhark_mc_segmap_parloop_109967_total_total_runtime;
    int futhark_mc_segmap_parloop_109967_total_runs;
    int64_t futhark_mc_segmap_parloop_109967_total_iter;
    int64_t *futhark_mc_segmap_nested_task_109965_total_runtime;
    int *futhark_mc_segmap_nested_task_109965_runs;
    int64_t *futhark_mc_segmap_nested_task_109965_iter;
    int64_t *futhark_mc_segmap_parloop_110021_total_runtime;
    int *futhark_mc_segmap_parloop_110021_runs;
    int64_t *futhark_mc_segmap_parloop_110021_iter;
    int64_t futhark_mc_segmap_parloop_110021_total_total_runtime;
    int futhark_mc_segmap_parloop_110021_total_runs;
    int64_t futhark_mc_segmap_parloop_110021_total_iter;
    int64_t *futhark_mc_segmap_task_110019_total_runtime;
    int *futhark_mc_segmap_task_110019_runs;
    int64_t *futhark_mc_segmap_task_110019_iter;
    int64_t futhark_mc_segmap_task_110019_total_time;
    int64_t futhark_mc_segmap_task_110019_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_110047_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_110047_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_110047_iter;
    int64_t futhark_mc_scan_stage_1_parloop_110047_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_110047_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_110047_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_110049_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_110049_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_110049_iter;
    int64_t futhark_mc_scan_stage_3_parloop_110049_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_110049_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_110049_total_iter;
    int64_t *futhark_mc_segscan_task_110044_total_runtime;
    int *futhark_mc_segscan_task_110044_runs;
    int64_t *futhark_mc_segscan_task_110044_iter;
    int64_t futhark_mc_segscan_task_110044_total_time;
    int64_t futhark_mc_segscan_task_110044_total_iter;
    int64_t *futhark_mc_segmap_parloop_110053_total_runtime;
    int *futhark_mc_segmap_parloop_110053_runs;
    int64_t *futhark_mc_segmap_parloop_110053_iter;
    int64_t futhark_mc_segmap_parloop_110053_total_total_runtime;
    int futhark_mc_segmap_parloop_110053_total_runs;
    int64_t futhark_mc_segmap_parloop_110053_total_iter;
    int64_t *futhark_mc_segmap_task_110051_total_runtime;
    int *futhark_mc_segmap_task_110051_runs;
    int64_t *futhark_mc_segmap_task_110051_iter;
    int64_t futhark_mc_segmap_task_110051_total_time;
    int64_t futhark_mc_segmap_task_110051_total_iter;
    int64_t *futhark_mc_segmap_parloop_110057_total_runtime;
    int *futhark_mc_segmap_parloop_110057_runs;
    int64_t *futhark_mc_segmap_parloop_110057_iter;
    int64_t futhark_mc_segmap_parloop_110057_total_total_runtime;
    int futhark_mc_segmap_parloop_110057_total_runs;
    int64_t futhark_mc_segmap_parloop_110057_total_iter;
    int64_t *futhark_mc_segmap_task_110055_total_runtime;
    int *futhark_mc_segmap_task_110055_runs;
    int64_t *futhark_mc_segmap_task_110055_iter;
    int64_t futhark_mc_segmap_task_110055_total_time;
    int64_t futhark_mc_segmap_task_110055_total_iter;
    int64_t *futhark_mc_segmap_parloop_110061_total_runtime;
    int *futhark_mc_segmap_parloop_110061_runs;
    int64_t *futhark_mc_segmap_parloop_110061_iter;
    int64_t futhark_mc_segmap_parloop_110061_total_total_runtime;
    int futhark_mc_segmap_parloop_110061_total_runs;
    int64_t futhark_mc_segmap_parloop_110061_total_iter;
    int64_t *futhark_mc_segmap_task_110059_total_runtime;
    int *futhark_mc_segmap_task_110059_runs;
    int64_t *futhark_mc_segmap_task_110059_iter;
    int64_t futhark_mc_segmap_task_110059_total_time;
    int64_t futhark_mc_segmap_task_110059_total_iter;
    int64_t *futhark_mc_segmap_parloop_110065_total_runtime;
    int *futhark_mc_segmap_parloop_110065_runs;
    int64_t *futhark_mc_segmap_parloop_110065_iter;
    int64_t futhark_mc_segmap_parloop_110065_total_total_runtime;
    int futhark_mc_segmap_parloop_110065_total_runs;
    int64_t futhark_mc_segmap_parloop_110065_total_iter;
    int64_t *futhark_mc_segmap_task_110063_total_runtime;
    int *futhark_mc_segmap_task_110063_runs;
    int64_t *futhark_mc_segmap_task_110063_iter;
    int64_t futhark_mc_segmap_task_110063_total_time;
    int64_t futhark_mc_segmap_task_110063_total_iter;
    int64_t *futhark_mc_segmap_parloop_110080_total_runtime;
    int *futhark_mc_segmap_parloop_110080_runs;
    int64_t *futhark_mc_segmap_parloop_110080_iter;
    int64_t futhark_mc_segmap_parloop_110080_total_total_runtime;
    int futhark_mc_segmap_parloop_110080_total_runs;
    int64_t futhark_mc_segmap_parloop_110080_total_iter;
    int64_t *futhark_mc_segmap_task_110078_total_runtime;
    int *futhark_mc_segmap_task_110078_runs;
    int64_t *futhark_mc_segmap_task_110078_iter;
    int64_t futhark_mc_segmap_task_110078_total_time;
    int64_t futhark_mc_segmap_task_110078_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110089_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110089_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110089_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110089_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110089_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110089_total_iter;
    int64_t *futhark_mc_segred_task_110082_total_runtime;
    int *futhark_mc_segred_task_110082_runs;
    int64_t *futhark_mc_segred_task_110082_iter;
    int64_t futhark_mc_segred_task_110082_total_time;
    int64_t futhark_mc_segred_task_110082_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110095_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110095_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110095_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110095_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110095_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110095_total_iter;
    int64_t *futhark_mc_segred_task_110091_total_runtime;
    int *futhark_mc_segred_task_110091_runs;
    int64_t *futhark_mc_segred_task_110091_iter;
    int64_t futhark_mc_segred_task_110091_total_time;
    int64_t futhark_mc_segred_task_110091_total_iter;
    int64_t *futhark_mc_segmap_parloop_110072_total_runtime;
    int *futhark_mc_segmap_parloop_110072_runs;
    int64_t *futhark_mc_segmap_parloop_110072_iter;
    int64_t futhark_mc_segmap_parloop_110072_total_total_runtime;
    int futhark_mc_segmap_parloop_110072_total_runs;
    int64_t futhark_mc_segmap_parloop_110072_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110070_total_runtime;
    int *futhark_mc_segmap_nested_task_110070_runs;
    int64_t *futhark_mc_segmap_nested_task_110070_iter;
    int64_t *futhark_mc_segmap_parloop_110035_total_runtime;
    int *futhark_mc_segmap_parloop_110035_runs;
    int64_t *futhark_mc_segmap_parloop_110035_iter;
    int64_t futhark_mc_segmap_parloop_110035_total_total_runtime;
    int futhark_mc_segmap_parloop_110035_total_runs;
    int64_t futhark_mc_segmap_parloop_110035_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110033_total_runtime;
    int *futhark_mc_segmap_nested_task_110033_runs;
    int64_t *futhark_mc_segmap_nested_task_110033_iter;
    int64_t *futhark_mc_segmap_parloop_110099_total_runtime;
    int *futhark_mc_segmap_parloop_110099_runs;
    int64_t *futhark_mc_segmap_parloop_110099_iter;
    int64_t futhark_mc_segmap_parloop_110099_total_total_runtime;
    int futhark_mc_segmap_parloop_110099_total_runs;
    int64_t futhark_mc_segmap_parloop_110099_total_iter;
    int64_t *futhark_mc_segmap_task_110097_total_runtime;
    int *futhark_mc_segmap_task_110097_runs;
    int64_t *futhark_mc_segmap_task_110097_iter;
    int64_t futhark_mc_segmap_task_110097_total_time;
    int64_t futhark_mc_segmap_task_110097_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_110119_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_110119_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_110119_iter;
    int64_t futhark_mc_scan_stage_1_parloop_110119_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_110119_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_110119_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_110121_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_110121_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_110121_iter;
    int64_t futhark_mc_scan_stage_3_parloop_110121_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_110121_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_110121_total_iter;
    int64_t *futhark_mc_segscan_task_110116_total_runtime;
    int *futhark_mc_segscan_task_110116_runs;
    int64_t *futhark_mc_segscan_task_110116_iter;
    int64_t futhark_mc_segscan_task_110116_total_time;
    int64_t futhark_mc_segscan_task_110116_total_iter;
    int64_t *futhark_mc_segmap_parloop_110125_total_runtime;
    int *futhark_mc_segmap_parloop_110125_runs;
    int64_t *futhark_mc_segmap_parloop_110125_iter;
    int64_t futhark_mc_segmap_parloop_110125_total_total_runtime;
    int futhark_mc_segmap_parloop_110125_total_runs;
    int64_t futhark_mc_segmap_parloop_110125_total_iter;
    int64_t *futhark_mc_segmap_task_110123_total_runtime;
    int *futhark_mc_segmap_task_110123_runs;
    int64_t *futhark_mc_segmap_task_110123_iter;
    int64_t futhark_mc_segmap_task_110123_total_time;
    int64_t futhark_mc_segmap_task_110123_total_iter;
    int64_t *futhark_mc_segmap_parloop_110129_total_runtime;
    int *futhark_mc_segmap_parloop_110129_runs;
    int64_t *futhark_mc_segmap_parloop_110129_iter;
    int64_t futhark_mc_segmap_parloop_110129_total_total_runtime;
    int futhark_mc_segmap_parloop_110129_total_runs;
    int64_t futhark_mc_segmap_parloop_110129_total_iter;
    int64_t *futhark_mc_segmap_task_110127_total_runtime;
    int *futhark_mc_segmap_task_110127_runs;
    int64_t *futhark_mc_segmap_task_110127_iter;
    int64_t futhark_mc_segmap_task_110127_total_time;
    int64_t futhark_mc_segmap_task_110127_total_iter;
    int64_t *futhark_mc_segmap_parloop_110133_total_runtime;
    int *futhark_mc_segmap_parloop_110133_runs;
    int64_t *futhark_mc_segmap_parloop_110133_iter;
    int64_t futhark_mc_segmap_parloop_110133_total_total_runtime;
    int futhark_mc_segmap_parloop_110133_total_runs;
    int64_t futhark_mc_segmap_parloop_110133_total_iter;
    int64_t *futhark_mc_segmap_task_110131_total_runtime;
    int *futhark_mc_segmap_task_110131_runs;
    int64_t *futhark_mc_segmap_task_110131_iter;
    int64_t futhark_mc_segmap_task_110131_total_time;
    int64_t futhark_mc_segmap_task_110131_total_iter;
    int64_t *futhark_mc_segmap_parloop_110137_total_runtime;
    int *futhark_mc_segmap_parloop_110137_runs;
    int64_t *futhark_mc_segmap_parloop_110137_iter;
    int64_t futhark_mc_segmap_parloop_110137_total_total_runtime;
    int futhark_mc_segmap_parloop_110137_total_runs;
    int64_t futhark_mc_segmap_parloop_110137_total_iter;
    int64_t *futhark_mc_segmap_task_110135_total_runtime;
    int *futhark_mc_segmap_task_110135_runs;
    int64_t *futhark_mc_segmap_task_110135_iter;
    int64_t futhark_mc_segmap_task_110135_total_time;
    int64_t futhark_mc_segmap_task_110135_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110145_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110145_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110145_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110145_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110145_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110145_total_iter;
    int64_t *futhark_mc_segred_task_110142_total_runtime;
    int *futhark_mc_segred_task_110142_runs;
    int64_t *futhark_mc_segred_task_110142_iter;
    int64_t futhark_mc_segred_task_110142_total_time;
    int64_t futhark_mc_segred_task_110142_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110150_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110150_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110150_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110150_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110150_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110150_total_iter;
    int64_t *futhark_mc_segred_task_110147_total_runtime;
    int *futhark_mc_segred_task_110147_runs;
    int64_t *futhark_mc_segred_task_110147_iter;
    int64_t futhark_mc_segred_task_110147_total_time;
    int64_t futhark_mc_segred_task_110147_total_iter;
    int64_t *futhark_mc_segmap_parloop_110140_total_runtime;
    int *futhark_mc_segmap_parloop_110140_runs;
    int64_t *futhark_mc_segmap_parloop_110140_iter;
    int64_t futhark_mc_segmap_parloop_110140_total_total_runtime;
    int futhark_mc_segmap_parloop_110140_total_runs;
    int64_t futhark_mc_segmap_parloop_110140_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110138_total_runtime;
    int *futhark_mc_segmap_nested_task_110138_runs;
    int64_t *futhark_mc_segmap_nested_task_110138_iter;
    int64_t *futhark_mc_segmap_parloop_110108_total_runtime;
    int *futhark_mc_segmap_parloop_110108_runs;
    int64_t *futhark_mc_segmap_parloop_110108_iter;
    int64_t futhark_mc_segmap_parloop_110108_total_total_runtime;
    int futhark_mc_segmap_parloop_110108_total_runs;
    int64_t futhark_mc_segmap_parloop_110108_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110106_total_runtime;
    int *futhark_mc_segmap_nested_task_110106_runs;
    int64_t *futhark_mc_segmap_nested_task_110106_iter;
    int64_t *futhark_mc_segmap_parloop_110154_total_runtime;
    int *futhark_mc_segmap_parloop_110154_runs;
    int64_t *futhark_mc_segmap_parloop_110154_iter;
    int64_t futhark_mc_segmap_parloop_110154_total_total_runtime;
    int futhark_mc_segmap_parloop_110154_total_runs;
    int64_t futhark_mc_segmap_parloop_110154_total_iter;
    int64_t *futhark_mc_segmap_task_110152_total_runtime;
    int *futhark_mc_segmap_task_110152_runs;
    int64_t *futhark_mc_segmap_task_110152_iter;
    int64_t futhark_mc_segmap_task_110152_total_time;
    int64_t futhark_mc_segmap_task_110152_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_110176_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_110176_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_110176_iter;
    int64_t futhark_mc_scan_stage_1_parloop_110176_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_110176_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_110176_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_110178_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_110178_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_110178_iter;
    int64_t futhark_mc_scan_stage_3_parloop_110178_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_110178_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_110178_total_iter;
    int64_t *futhark_mc_segscan_task_110173_total_runtime;
    int *futhark_mc_segscan_task_110173_runs;
    int64_t *futhark_mc_segscan_task_110173_iter;
    int64_t futhark_mc_segscan_task_110173_total_time;
    int64_t futhark_mc_segscan_task_110173_total_iter;
    int64_t *futhark_mc_segmap_parloop_110182_total_runtime;
    int *futhark_mc_segmap_parloop_110182_runs;
    int64_t *futhark_mc_segmap_parloop_110182_iter;
    int64_t futhark_mc_segmap_parloop_110182_total_total_runtime;
    int futhark_mc_segmap_parloop_110182_total_runs;
    int64_t futhark_mc_segmap_parloop_110182_total_iter;
    int64_t *futhark_mc_segmap_task_110180_total_runtime;
    int *futhark_mc_segmap_task_110180_runs;
    int64_t *futhark_mc_segmap_task_110180_iter;
    int64_t futhark_mc_segmap_task_110180_total_time;
    int64_t futhark_mc_segmap_task_110180_total_iter;
    int64_t *futhark_mc_segmap_parloop_110186_total_runtime;
    int *futhark_mc_segmap_parloop_110186_runs;
    int64_t *futhark_mc_segmap_parloop_110186_iter;
    int64_t futhark_mc_segmap_parloop_110186_total_total_runtime;
    int futhark_mc_segmap_parloop_110186_total_runs;
    int64_t futhark_mc_segmap_parloop_110186_total_iter;
    int64_t *futhark_mc_segmap_task_110184_total_runtime;
    int *futhark_mc_segmap_task_110184_runs;
    int64_t *futhark_mc_segmap_task_110184_iter;
    int64_t futhark_mc_segmap_task_110184_total_time;
    int64_t futhark_mc_segmap_task_110184_total_iter;
    int64_t *futhark_mc_segmap_parloop_110190_total_runtime;
    int *futhark_mc_segmap_parloop_110190_runs;
    int64_t *futhark_mc_segmap_parloop_110190_iter;
    int64_t futhark_mc_segmap_parloop_110190_total_total_runtime;
    int futhark_mc_segmap_parloop_110190_total_runs;
    int64_t futhark_mc_segmap_parloop_110190_total_iter;
    int64_t *futhark_mc_segmap_task_110188_total_runtime;
    int *futhark_mc_segmap_task_110188_runs;
    int64_t *futhark_mc_segmap_task_110188_iter;
    int64_t futhark_mc_segmap_task_110188_total_time;
    int64_t futhark_mc_segmap_task_110188_total_iter;
    int64_t *futhark_mc_segmap_parloop_110194_total_runtime;
    int *futhark_mc_segmap_parloop_110194_runs;
    int64_t *futhark_mc_segmap_parloop_110194_iter;
    int64_t futhark_mc_segmap_parloop_110194_total_total_runtime;
    int futhark_mc_segmap_parloop_110194_total_runs;
    int64_t futhark_mc_segmap_parloop_110194_total_iter;
    int64_t *futhark_mc_segmap_task_110192_total_runtime;
    int *futhark_mc_segmap_task_110192_runs;
    int64_t *futhark_mc_segmap_task_110192_iter;
    int64_t futhark_mc_segmap_task_110192_total_time;
    int64_t futhark_mc_segmap_task_110192_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110204_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110204_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110204_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110204_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110204_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110204_total_iter;
    int64_t *futhark_mc_segred_task_110199_total_runtime;
    int *futhark_mc_segred_task_110199_runs;
    int64_t *futhark_mc_segred_task_110199_iter;
    int64_t futhark_mc_segred_task_110199_total_time;
    int64_t futhark_mc_segred_task_110199_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110210_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110210_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110210_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110210_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110210_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110210_total_iter;
    int64_t *futhark_mc_segred_task_110206_total_runtime;
    int *futhark_mc_segred_task_110206_runs;
    int64_t *futhark_mc_segred_task_110206_iter;
    int64_t futhark_mc_segred_task_110206_total_time;
    int64_t futhark_mc_segred_task_110206_total_iter;
    int64_t *futhark_mc_segmap_parloop_110197_total_runtime;
    int *futhark_mc_segmap_parloop_110197_runs;
    int64_t *futhark_mc_segmap_parloop_110197_iter;
    int64_t futhark_mc_segmap_parloop_110197_total_total_runtime;
    int futhark_mc_segmap_parloop_110197_total_runs;
    int64_t futhark_mc_segmap_parloop_110197_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110195_total_runtime;
    int *futhark_mc_segmap_nested_task_110195_runs;
    int64_t *futhark_mc_segmap_nested_task_110195_iter;
    int64_t *futhark_mc_segmap_parloop_110164_total_runtime;
    int *futhark_mc_segmap_parloop_110164_runs;
    int64_t *futhark_mc_segmap_parloop_110164_iter;
    int64_t futhark_mc_segmap_parloop_110164_total_total_runtime;
    int futhark_mc_segmap_parloop_110164_total_runs;
    int64_t futhark_mc_segmap_parloop_110164_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110162_total_runtime;
    int *futhark_mc_segmap_nested_task_110162_runs;
    int64_t *futhark_mc_segmap_nested_task_110162_iter;
    int64_t *futhark_mc_segmap_parloop_110214_total_runtime;
    int *futhark_mc_segmap_parloop_110214_runs;
    int64_t *futhark_mc_segmap_parloop_110214_iter;
    int64_t futhark_mc_segmap_parloop_110214_total_total_runtime;
    int futhark_mc_segmap_parloop_110214_total_runs;
    int64_t futhark_mc_segmap_parloop_110214_total_iter;
    int64_t *futhark_mc_segmap_task_110212_total_runtime;
    int *futhark_mc_segmap_task_110212_runs;
    int64_t *futhark_mc_segmap_task_110212_iter;
    int64_t futhark_mc_segmap_task_110212_total_time;
    int64_t futhark_mc_segmap_task_110212_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_110236_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_110236_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_110236_iter;
    int64_t futhark_mc_scan_stage_1_parloop_110236_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_110236_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_110236_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_110238_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_110238_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_110238_iter;
    int64_t futhark_mc_scan_stage_3_parloop_110238_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_110238_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_110238_total_iter;
    int64_t *futhark_mc_segscan_task_110233_total_runtime;
    int *futhark_mc_segscan_task_110233_runs;
    int64_t *futhark_mc_segscan_task_110233_iter;
    int64_t futhark_mc_segscan_task_110233_total_time;
    int64_t futhark_mc_segscan_task_110233_total_iter;
    int64_t *futhark_mc_segmap_parloop_110242_total_runtime;
    int *futhark_mc_segmap_parloop_110242_runs;
    int64_t *futhark_mc_segmap_parloop_110242_iter;
    int64_t futhark_mc_segmap_parloop_110242_total_total_runtime;
    int futhark_mc_segmap_parloop_110242_total_runs;
    int64_t futhark_mc_segmap_parloop_110242_total_iter;
    int64_t *futhark_mc_segmap_task_110240_total_runtime;
    int *futhark_mc_segmap_task_110240_runs;
    int64_t *futhark_mc_segmap_task_110240_iter;
    int64_t futhark_mc_segmap_task_110240_total_time;
    int64_t futhark_mc_segmap_task_110240_total_iter;
    int64_t *futhark_mc_segmap_parloop_110246_total_runtime;
    int *futhark_mc_segmap_parloop_110246_runs;
    int64_t *futhark_mc_segmap_parloop_110246_iter;
    int64_t futhark_mc_segmap_parloop_110246_total_total_runtime;
    int futhark_mc_segmap_parloop_110246_total_runs;
    int64_t futhark_mc_segmap_parloop_110246_total_iter;
    int64_t *futhark_mc_segmap_task_110244_total_runtime;
    int *futhark_mc_segmap_task_110244_runs;
    int64_t *futhark_mc_segmap_task_110244_iter;
    int64_t futhark_mc_segmap_task_110244_total_time;
    int64_t futhark_mc_segmap_task_110244_total_iter;
    int64_t *futhark_mc_segmap_parloop_110250_total_runtime;
    int *futhark_mc_segmap_parloop_110250_runs;
    int64_t *futhark_mc_segmap_parloop_110250_iter;
    int64_t futhark_mc_segmap_parloop_110250_total_total_runtime;
    int futhark_mc_segmap_parloop_110250_total_runs;
    int64_t futhark_mc_segmap_parloop_110250_total_iter;
    int64_t *futhark_mc_segmap_task_110248_total_runtime;
    int *futhark_mc_segmap_task_110248_runs;
    int64_t *futhark_mc_segmap_task_110248_iter;
    int64_t futhark_mc_segmap_task_110248_total_time;
    int64_t futhark_mc_segmap_task_110248_total_iter;
    int64_t *futhark_mc_segmap_parloop_110254_total_runtime;
    int *futhark_mc_segmap_parloop_110254_runs;
    int64_t *futhark_mc_segmap_parloop_110254_iter;
    int64_t futhark_mc_segmap_parloop_110254_total_total_runtime;
    int futhark_mc_segmap_parloop_110254_total_runs;
    int64_t futhark_mc_segmap_parloop_110254_total_iter;
    int64_t *futhark_mc_segmap_task_110252_total_runtime;
    int *futhark_mc_segmap_task_110252_runs;
    int64_t *futhark_mc_segmap_task_110252_iter;
    int64_t futhark_mc_segmap_task_110252_total_time;
    int64_t futhark_mc_segmap_task_110252_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110266_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110266_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110266_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110266_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110266_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110266_total_iter;
    int64_t *futhark_mc_segred_task_110259_total_runtime;
    int *futhark_mc_segred_task_110259_runs;
    int64_t *futhark_mc_segred_task_110259_iter;
    int64_t futhark_mc_segred_task_110259_total_time;
    int64_t futhark_mc_segred_task_110259_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_110272_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_110272_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_110272_iter;
    int64_t futhark_mc_segred_stage_1_parloop_110272_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_110272_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_110272_total_iter;
    int64_t *futhark_mc_segred_task_110268_total_runtime;
    int *futhark_mc_segred_task_110268_runs;
    int64_t *futhark_mc_segred_task_110268_iter;
    int64_t futhark_mc_segred_task_110268_total_time;
    int64_t futhark_mc_segred_task_110268_total_iter;
    int64_t *futhark_mc_segmap_parloop_110257_total_runtime;
    int *futhark_mc_segmap_parloop_110257_runs;
    int64_t *futhark_mc_segmap_parloop_110257_iter;
    int64_t futhark_mc_segmap_parloop_110257_total_total_runtime;
    int futhark_mc_segmap_parloop_110257_total_runs;
    int64_t futhark_mc_segmap_parloop_110257_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110255_total_runtime;
    int *futhark_mc_segmap_nested_task_110255_runs;
    int64_t *futhark_mc_segmap_nested_task_110255_iter;
    int64_t *futhark_mc_segmap_parloop_110224_total_runtime;
    int *futhark_mc_segmap_parloop_110224_runs;
    int64_t *futhark_mc_segmap_parloop_110224_iter;
    int64_t futhark_mc_segmap_parloop_110224_total_total_runtime;
    int futhark_mc_segmap_parloop_110224_total_runs;
    int64_t futhark_mc_segmap_parloop_110224_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110222_total_runtime;
    int *futhark_mc_segmap_nested_task_110222_runs;
    int64_t *futhark_mc_segmap_nested_task_110222_iter;
    int64_t *futhark_mc_segmap_parloop_110276_total_runtime;
    int *futhark_mc_segmap_parloop_110276_runs;
    int64_t *futhark_mc_segmap_parloop_110276_iter;
    int64_t futhark_mc_segmap_parloop_110276_total_total_runtime;
    int futhark_mc_segmap_parloop_110276_total_runs;
    int64_t futhark_mc_segmap_parloop_110276_total_iter;
    int64_t *futhark_mc_segmap_task_110274_total_runtime;
    int *futhark_mc_segmap_task_110274_runs;
    int64_t *futhark_mc_segmap_task_110274_iter;
    int64_t futhark_mc_segmap_task_110274_total_time;
    int64_t futhark_mc_segmap_task_110274_total_iter;
    int64_t *futhark_mc_segmap_parloop_110285_total_runtime;
    int *futhark_mc_segmap_parloop_110285_runs;
    int64_t *futhark_mc_segmap_parloop_110285_iter;
    int64_t futhark_mc_segmap_parloop_110285_total_total_runtime;
    int futhark_mc_segmap_parloop_110285_total_runs;
    int64_t futhark_mc_segmap_parloop_110285_total_iter;
    int64_t *futhark_mc_segmap_task_110283_total_runtime;
    int *futhark_mc_segmap_task_110283_runs;
    int64_t *futhark_mc_segmap_task_110283_iter;
    int64_t futhark_mc_segmap_task_110283_total_time;
    int64_t futhark_mc_segmap_task_110283_total_iter;
    int64_t *futhark_mc_segmap_parloop_110280_total_runtime;
    int *futhark_mc_segmap_parloop_110280_runs;
    int64_t *futhark_mc_segmap_parloop_110280_iter;
    int64_t futhark_mc_segmap_parloop_110280_total_total_runtime;
    int futhark_mc_segmap_parloop_110280_total_runs;
    int64_t futhark_mc_segmap_parloop_110280_total_iter;
    int64_t *futhark_mc_segmap_nested_task_110278_total_runtime;
    int *futhark_mc_segmap_nested_task_110278_runs;
    int64_t *futhark_mc_segmap_nested_task_110278_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    // Initialize rand()
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_109720_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109720_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109720_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109720_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109720_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109720_total_iter = 0;
    ctx->futhark_mc_segmap_task_109718_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109718_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109718_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109718_total_time = 0;
    ctx->futhark_mc_segmap_task_109718_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109740_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109740_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109742_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109742_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter = 0;
    ctx->futhark_mc_segscan_task_109737_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109737_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109737_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109737_total_time = 0;
    ctx->futhark_mc_segscan_task_109737_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109746_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109746_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109746_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109746_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109746_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109746_total_iter = 0;
    ctx->futhark_mc_segmap_task_109744_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109744_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109744_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109744_total_time = 0;
    ctx->futhark_mc_segmap_task_109744_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109750_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109750_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109750_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109750_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109750_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109750_total_iter = 0;
    ctx->futhark_mc_segmap_task_109748_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109748_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109748_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109748_total_time = 0;
    ctx->futhark_mc_segmap_task_109748_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109754_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109754_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109754_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109754_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109754_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109754_total_iter = 0;
    ctx->futhark_mc_segmap_task_109752_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109752_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109752_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109752_total_time = 0;
    ctx->futhark_mc_segmap_task_109752_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109758_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109758_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109758_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109758_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109758_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109758_total_iter = 0;
    ctx->futhark_mc_segmap_task_109756_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109756_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109756_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109756_total_time = 0;
    ctx->futhark_mc_segmap_task_109756_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109766_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109766_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter = 0;
    ctx->futhark_mc_segred_task_109763_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109763_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109763_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109763_total_time = 0;
    ctx->futhark_mc_segred_task_109763_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109771_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109771_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter = 0;
    ctx->futhark_mc_segred_task_109768_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109768_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109768_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109768_total_time = 0;
    ctx->futhark_mc_segred_task_109768_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109761_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109761_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109761_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109761_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109761_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109761_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109759_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109759_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109759_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109729_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109729_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109729_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109729_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109729_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109729_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109727_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109727_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109727_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109775_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109775_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109775_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109775_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109775_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109775_total_iter = 0;
    ctx->futhark_mc_segmap_task_109773_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109773_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109773_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109773_total_time = 0;
    ctx->futhark_mc_segmap_task_109773_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109797_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109797_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109799_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109799_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter = 0;
    ctx->futhark_mc_segscan_task_109794_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109794_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109794_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109794_total_time = 0;
    ctx->futhark_mc_segscan_task_109794_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109803_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109803_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109803_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109803_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109803_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109803_total_iter = 0;
    ctx->futhark_mc_segmap_task_109801_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109801_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109801_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109801_total_time = 0;
    ctx->futhark_mc_segmap_task_109801_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109807_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109807_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109807_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109807_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109807_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109807_total_iter = 0;
    ctx->futhark_mc_segmap_task_109805_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109805_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109805_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109805_total_time = 0;
    ctx->futhark_mc_segmap_task_109805_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109811_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109811_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109811_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109811_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109811_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109811_total_iter = 0;
    ctx->futhark_mc_segmap_task_109809_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109809_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109809_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109809_total_time = 0;
    ctx->futhark_mc_segmap_task_109809_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109815_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109815_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109815_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109815_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109815_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109815_total_iter = 0;
    ctx->futhark_mc_segmap_task_109813_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109813_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109813_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109813_total_time = 0;
    ctx->futhark_mc_segmap_task_109813_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109825_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109825_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter = 0;
    ctx->futhark_mc_segred_task_109820_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109820_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109820_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109820_total_time = 0;
    ctx->futhark_mc_segred_task_109820_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109831_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109831_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter = 0;
    ctx->futhark_mc_segred_task_109827_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109827_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109827_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109827_total_time = 0;
    ctx->futhark_mc_segred_task_109827_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109818_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109818_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109818_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109818_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109818_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109818_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109816_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109816_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109816_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109785_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109785_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109785_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109785_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109785_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109785_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109783_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109783_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109783_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109835_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109835_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109835_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109835_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109835_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109835_total_iter = 0;
    ctx->futhark_mc_segmap_task_109833_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109833_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109833_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109833_total_time = 0;
    ctx->futhark_mc_segmap_task_109833_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109857_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109857_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109859_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109859_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter = 0;
    ctx->futhark_mc_segscan_task_109854_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109854_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109854_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109854_total_time = 0;
    ctx->futhark_mc_segscan_task_109854_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109863_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109863_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109863_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109863_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109863_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109863_total_iter = 0;
    ctx->futhark_mc_segmap_task_109861_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109861_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109861_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109861_total_time = 0;
    ctx->futhark_mc_segmap_task_109861_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109867_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109867_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109867_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109867_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109867_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109867_total_iter = 0;
    ctx->futhark_mc_segmap_task_109865_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109865_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109865_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109865_total_time = 0;
    ctx->futhark_mc_segmap_task_109865_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109871_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109871_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109871_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109871_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109871_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109871_total_iter = 0;
    ctx->futhark_mc_segmap_task_109869_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109869_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109869_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109869_total_time = 0;
    ctx->futhark_mc_segmap_task_109869_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109875_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109875_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109875_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109875_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109875_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109875_total_iter = 0;
    ctx->futhark_mc_segmap_task_109873_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109873_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109873_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109873_total_time = 0;
    ctx->futhark_mc_segmap_task_109873_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109887_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109887_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter = 0;
    ctx->futhark_mc_segred_task_109880_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109880_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109880_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109880_total_time = 0;
    ctx->futhark_mc_segred_task_109880_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109893_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109893_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter = 0;
    ctx->futhark_mc_segred_task_109889_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109889_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109889_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109889_total_time = 0;
    ctx->futhark_mc_segred_task_109889_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109878_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109878_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109878_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109878_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109878_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109878_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109876_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109876_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109876_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109845_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109845_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109845_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109845_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109845_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109845_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109843_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109843_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109843_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109897_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109897_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109897_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109897_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109897_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109897_total_iter = 0;
    ctx->futhark_mc_segmap_task_109895_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109895_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109895_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109895_total_time = 0;
    ctx->futhark_mc_segmap_task_109895_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109918_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109918_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109920_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109920_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter = 0;
    ctx->futhark_mc_segscan_task_109915_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109915_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109915_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109915_total_time = 0;
    ctx->futhark_mc_segscan_task_109915_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109924_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109924_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109924_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109924_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109924_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109924_total_iter = 0;
    ctx->futhark_mc_segmap_task_109922_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109922_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109922_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109922_total_time = 0;
    ctx->futhark_mc_segmap_task_109922_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109928_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109928_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109928_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109928_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109928_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109928_total_iter = 0;
    ctx->futhark_mc_segmap_task_109926_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109926_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109926_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109926_total_time = 0;
    ctx->futhark_mc_segmap_task_109926_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109932_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109932_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109932_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109932_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109932_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109932_total_iter = 0;
    ctx->futhark_mc_segmap_task_109930_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109930_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109930_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109930_total_time = 0;
    ctx->futhark_mc_segmap_task_109930_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109936_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109936_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109936_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109936_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109936_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109936_total_iter = 0;
    ctx->futhark_mc_segmap_task_109934_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109934_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109934_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109934_total_time = 0;
    ctx->futhark_mc_segmap_task_109934_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109946_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109946_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter = 0;
    ctx->futhark_mc_segred_task_109943_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109943_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109943_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109943_total_time = 0;
    ctx->futhark_mc_segred_task_109943_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109951_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109951_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter = 0;
    ctx->futhark_mc_segred_task_109948_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109948_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109948_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_109948_total_time = 0;
    ctx->futhark_mc_segred_task_109948_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109940_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109940_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109940_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109940_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109940_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109940_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109938_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109938_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109938_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109907_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109907_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109907_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109907_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109907_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109907_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109905_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109905_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109905_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109955_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109955_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109955_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109955_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109955_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109955_total_iter = 0;
    ctx->futhark_mc_segmap_task_109953_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109953_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109953_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109953_total_time = 0;
    ctx->futhark_mc_segmap_task_109953_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109979_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109979_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109981_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109981_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter = 0;
    ctx->futhark_mc_segscan_task_109976_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109976_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109976_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_109976_total_time = 0;
    ctx->futhark_mc_segscan_task_109976_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109985_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109985_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109985_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109985_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109985_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109985_total_iter = 0;
    ctx->futhark_mc_segmap_task_109983_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109983_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109983_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109983_total_time = 0;
    ctx->futhark_mc_segmap_task_109983_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109989_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109989_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109989_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109989_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109989_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109989_total_iter = 0;
    ctx->futhark_mc_segmap_task_109987_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109987_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109987_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109987_total_time = 0;
    ctx->futhark_mc_segmap_task_109987_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109993_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109993_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109993_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109993_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109993_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109993_total_iter = 0;
    ctx->futhark_mc_segmap_task_109991_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109991_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109991_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109991_total_time = 0;
    ctx->futhark_mc_segmap_task_109991_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_109997_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109997_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109997_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109997_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109997_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109997_total_iter = 0;
    ctx->futhark_mc_segmap_task_109995_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109995_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109995_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_109995_total_time = 0;
    ctx->futhark_mc_segmap_task_109995_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110011_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110011_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter = 0;
    ctx->futhark_mc_segred_task_110006_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110006_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110006_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110006_total_time = 0;
    ctx->futhark_mc_segred_task_110006_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110017_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110017_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter = 0;
    ctx->futhark_mc_segred_task_110013_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110013_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110013_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110013_total_time = 0;
    ctx->futhark_mc_segred_task_110013_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110002_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110002_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110002_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110002_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110002_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110002_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110000_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110000_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110000_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109967_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109967_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109967_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_109967_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_109967_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_109967_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_109965_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109965_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_109965_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110021_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110021_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110021_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110021_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110021_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110021_total_iter = 0;
    ctx->futhark_mc_segmap_task_110019_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110019_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110019_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110019_total_time = 0;
    ctx->futhark_mc_segmap_task_110019_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110047_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110047_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110049_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110049_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter = 0;
    ctx->futhark_mc_segscan_task_110044_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110044_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110044_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110044_total_time = 0;
    ctx->futhark_mc_segscan_task_110044_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110053_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110053_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110053_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110053_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110053_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110053_total_iter = 0;
    ctx->futhark_mc_segmap_task_110051_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110051_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110051_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110051_total_time = 0;
    ctx->futhark_mc_segmap_task_110051_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110057_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110057_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110057_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110057_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110057_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110057_total_iter = 0;
    ctx->futhark_mc_segmap_task_110055_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110055_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110055_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110055_total_time = 0;
    ctx->futhark_mc_segmap_task_110055_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110061_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110061_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110061_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110061_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110061_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110061_total_iter = 0;
    ctx->futhark_mc_segmap_task_110059_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110059_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110059_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110059_total_time = 0;
    ctx->futhark_mc_segmap_task_110059_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110065_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110065_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110065_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110065_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110065_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110065_total_iter = 0;
    ctx->futhark_mc_segmap_task_110063_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110063_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110063_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110063_total_time = 0;
    ctx->futhark_mc_segmap_task_110063_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110080_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110080_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110080_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110080_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110080_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110080_total_iter = 0;
    ctx->futhark_mc_segmap_task_110078_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110078_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110078_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110078_total_time = 0;
    ctx->futhark_mc_segmap_task_110078_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110089_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110089_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter = 0;
    ctx->futhark_mc_segred_task_110082_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110082_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110082_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110082_total_time = 0;
    ctx->futhark_mc_segred_task_110082_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110095_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110095_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter = 0;
    ctx->futhark_mc_segred_task_110091_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110091_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110091_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110091_total_time = 0;
    ctx->futhark_mc_segred_task_110091_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110072_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110072_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110072_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110072_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110072_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110072_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110070_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110070_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110070_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110035_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110035_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110035_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110035_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110035_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110035_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110033_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110033_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110033_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110099_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110099_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110099_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110099_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110099_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110099_total_iter = 0;
    ctx->futhark_mc_segmap_task_110097_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110097_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110097_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110097_total_time = 0;
    ctx->futhark_mc_segmap_task_110097_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110119_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110119_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110121_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110121_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter = 0;
    ctx->futhark_mc_segscan_task_110116_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110116_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110116_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110116_total_time = 0;
    ctx->futhark_mc_segscan_task_110116_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110125_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110125_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110125_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110125_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110125_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110125_total_iter = 0;
    ctx->futhark_mc_segmap_task_110123_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110123_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110123_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110123_total_time = 0;
    ctx->futhark_mc_segmap_task_110123_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110129_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110129_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110129_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110129_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110129_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110129_total_iter = 0;
    ctx->futhark_mc_segmap_task_110127_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110127_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110127_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110127_total_time = 0;
    ctx->futhark_mc_segmap_task_110127_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110133_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110133_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110133_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110133_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110133_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110133_total_iter = 0;
    ctx->futhark_mc_segmap_task_110131_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110131_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110131_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110131_total_time = 0;
    ctx->futhark_mc_segmap_task_110131_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110137_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110137_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110137_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110137_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110137_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110137_total_iter = 0;
    ctx->futhark_mc_segmap_task_110135_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110135_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110135_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110135_total_time = 0;
    ctx->futhark_mc_segmap_task_110135_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110145_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110145_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter = 0;
    ctx->futhark_mc_segred_task_110142_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110142_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110142_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110142_total_time = 0;
    ctx->futhark_mc_segred_task_110142_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110150_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110150_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter = 0;
    ctx->futhark_mc_segred_task_110147_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110147_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110147_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110147_total_time = 0;
    ctx->futhark_mc_segred_task_110147_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110140_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110140_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110140_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110140_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110140_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110140_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110138_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110138_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110138_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110108_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110108_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110108_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110108_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110108_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110108_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110106_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110106_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110106_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110154_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110154_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110154_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110154_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110154_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110154_total_iter = 0;
    ctx->futhark_mc_segmap_task_110152_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110152_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110152_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110152_total_time = 0;
    ctx->futhark_mc_segmap_task_110152_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110176_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110176_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110178_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110178_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter = 0;
    ctx->futhark_mc_segscan_task_110173_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110173_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110173_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110173_total_time = 0;
    ctx->futhark_mc_segscan_task_110173_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110182_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110182_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110182_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110182_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110182_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110182_total_iter = 0;
    ctx->futhark_mc_segmap_task_110180_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110180_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110180_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110180_total_time = 0;
    ctx->futhark_mc_segmap_task_110180_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110186_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110186_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110186_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110186_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110186_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110186_total_iter = 0;
    ctx->futhark_mc_segmap_task_110184_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110184_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110184_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110184_total_time = 0;
    ctx->futhark_mc_segmap_task_110184_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110190_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110190_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110190_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110190_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110190_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110190_total_iter = 0;
    ctx->futhark_mc_segmap_task_110188_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110188_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110188_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110188_total_time = 0;
    ctx->futhark_mc_segmap_task_110188_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110194_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110194_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110194_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110194_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110194_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110194_total_iter = 0;
    ctx->futhark_mc_segmap_task_110192_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110192_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110192_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110192_total_time = 0;
    ctx->futhark_mc_segmap_task_110192_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110204_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110204_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter = 0;
    ctx->futhark_mc_segred_task_110199_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110199_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110199_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110199_total_time = 0;
    ctx->futhark_mc_segred_task_110199_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110210_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110210_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter = 0;
    ctx->futhark_mc_segred_task_110206_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110206_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110206_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110206_total_time = 0;
    ctx->futhark_mc_segred_task_110206_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110197_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110197_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110197_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110197_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110197_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110197_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110195_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110195_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110195_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110164_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110164_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110164_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110164_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110164_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110164_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110162_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110162_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110162_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110214_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110214_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110214_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110214_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110214_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110214_total_iter = 0;
    ctx->futhark_mc_segmap_task_110212_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110212_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110212_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110212_total_time = 0;
    ctx->futhark_mc_segmap_task_110212_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110236_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110236_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110238_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110238_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter = 0;
    ctx->futhark_mc_segscan_task_110233_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110233_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110233_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_110233_total_time = 0;
    ctx->futhark_mc_segscan_task_110233_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110242_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110242_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110242_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110242_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110242_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110242_total_iter = 0;
    ctx->futhark_mc_segmap_task_110240_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110240_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110240_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110240_total_time = 0;
    ctx->futhark_mc_segmap_task_110240_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110246_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110246_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110246_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110246_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110246_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110246_total_iter = 0;
    ctx->futhark_mc_segmap_task_110244_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110244_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110244_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110244_total_time = 0;
    ctx->futhark_mc_segmap_task_110244_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110250_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110250_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110250_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110250_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110250_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110250_total_iter = 0;
    ctx->futhark_mc_segmap_task_110248_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110248_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110248_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110248_total_time = 0;
    ctx->futhark_mc_segmap_task_110248_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110254_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110254_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110254_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110254_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110254_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110254_total_iter = 0;
    ctx->futhark_mc_segmap_task_110252_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110252_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110252_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110252_total_time = 0;
    ctx->futhark_mc_segmap_task_110252_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110266_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110266_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter = 0;
    ctx->futhark_mc_segred_task_110259_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110259_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110259_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110259_total_time = 0;
    ctx->futhark_mc_segred_task_110259_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110272_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110272_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter = 0;
    ctx->futhark_mc_segred_task_110268_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110268_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110268_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_110268_total_time = 0;
    ctx->futhark_mc_segred_task_110268_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110257_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110257_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110257_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110257_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110257_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110257_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110255_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110255_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110255_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110224_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110224_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110224_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110224_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110224_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110224_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110222_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110222_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110222_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110276_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110276_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110276_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110276_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110276_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110276_total_iter = 0;
    ctx->futhark_mc_segmap_task_110274_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110274_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110274_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110274_total_time = 0;
    ctx->futhark_mc_segmap_task_110274_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110285_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110285_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110285_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110285_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110285_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110285_total_iter = 0;
    ctx->futhark_mc_segmap_task_110283_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110283_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110283_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_110283_total_time = 0;
    ctx->futhark_mc_segmap_task_110283_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_110280_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110280_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110280_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_110280_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_110280_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_110280_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_110278_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110278_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_110278_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free(ctx->futhark_mc_segmap_parloop_109720_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109720_runs);
    free(ctx->futhark_mc_segmap_parloop_109720_iter);
    free(ctx->futhark_mc_segmap_task_109718_total_runtime);
    free(ctx->futhark_mc_segmap_task_109718_runs);
    free(ctx->futhark_mc_segmap_task_109718_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_109740_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_109740_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_109742_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_109742_iter);
    free(ctx->futhark_mc_segscan_task_109737_total_runtime);
    free(ctx->futhark_mc_segscan_task_109737_runs);
    free(ctx->futhark_mc_segscan_task_109737_iter);
    free(ctx->futhark_mc_segmap_parloop_109746_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109746_runs);
    free(ctx->futhark_mc_segmap_parloop_109746_iter);
    free(ctx->futhark_mc_segmap_task_109744_total_runtime);
    free(ctx->futhark_mc_segmap_task_109744_runs);
    free(ctx->futhark_mc_segmap_task_109744_iter);
    free(ctx->futhark_mc_segmap_parloop_109750_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109750_runs);
    free(ctx->futhark_mc_segmap_parloop_109750_iter);
    free(ctx->futhark_mc_segmap_task_109748_total_runtime);
    free(ctx->futhark_mc_segmap_task_109748_runs);
    free(ctx->futhark_mc_segmap_task_109748_iter);
    free(ctx->futhark_mc_segmap_parloop_109754_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109754_runs);
    free(ctx->futhark_mc_segmap_parloop_109754_iter);
    free(ctx->futhark_mc_segmap_task_109752_total_runtime);
    free(ctx->futhark_mc_segmap_task_109752_runs);
    free(ctx->futhark_mc_segmap_task_109752_iter);
    free(ctx->futhark_mc_segmap_parloop_109758_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109758_runs);
    free(ctx->futhark_mc_segmap_parloop_109758_iter);
    free(ctx->futhark_mc_segmap_task_109756_total_runtime);
    free(ctx->futhark_mc_segmap_task_109756_runs);
    free(ctx->futhark_mc_segmap_task_109756_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109766_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109766_iter);
    free(ctx->futhark_mc_segred_task_109763_total_runtime);
    free(ctx->futhark_mc_segred_task_109763_runs);
    free(ctx->futhark_mc_segred_task_109763_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109771_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109771_iter);
    free(ctx->futhark_mc_segred_task_109768_total_runtime);
    free(ctx->futhark_mc_segred_task_109768_runs);
    free(ctx->futhark_mc_segred_task_109768_iter);
    free(ctx->futhark_mc_segmap_parloop_109761_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109761_runs);
    free(ctx->futhark_mc_segmap_parloop_109761_iter);
    free(ctx->futhark_mc_segmap_nested_task_109759_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109759_runs);
    free(ctx->futhark_mc_segmap_nested_task_109759_iter);
    free(ctx->futhark_mc_segmap_parloop_109729_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109729_runs);
    free(ctx->futhark_mc_segmap_parloop_109729_iter);
    free(ctx->futhark_mc_segmap_nested_task_109727_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109727_runs);
    free(ctx->futhark_mc_segmap_nested_task_109727_iter);
    free(ctx->futhark_mc_segmap_parloop_109775_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109775_runs);
    free(ctx->futhark_mc_segmap_parloop_109775_iter);
    free(ctx->futhark_mc_segmap_task_109773_total_runtime);
    free(ctx->futhark_mc_segmap_task_109773_runs);
    free(ctx->futhark_mc_segmap_task_109773_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_109797_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_109797_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_109799_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_109799_iter);
    free(ctx->futhark_mc_segscan_task_109794_total_runtime);
    free(ctx->futhark_mc_segscan_task_109794_runs);
    free(ctx->futhark_mc_segscan_task_109794_iter);
    free(ctx->futhark_mc_segmap_parloop_109803_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109803_runs);
    free(ctx->futhark_mc_segmap_parloop_109803_iter);
    free(ctx->futhark_mc_segmap_task_109801_total_runtime);
    free(ctx->futhark_mc_segmap_task_109801_runs);
    free(ctx->futhark_mc_segmap_task_109801_iter);
    free(ctx->futhark_mc_segmap_parloop_109807_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109807_runs);
    free(ctx->futhark_mc_segmap_parloop_109807_iter);
    free(ctx->futhark_mc_segmap_task_109805_total_runtime);
    free(ctx->futhark_mc_segmap_task_109805_runs);
    free(ctx->futhark_mc_segmap_task_109805_iter);
    free(ctx->futhark_mc_segmap_parloop_109811_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109811_runs);
    free(ctx->futhark_mc_segmap_parloop_109811_iter);
    free(ctx->futhark_mc_segmap_task_109809_total_runtime);
    free(ctx->futhark_mc_segmap_task_109809_runs);
    free(ctx->futhark_mc_segmap_task_109809_iter);
    free(ctx->futhark_mc_segmap_parloop_109815_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109815_runs);
    free(ctx->futhark_mc_segmap_parloop_109815_iter);
    free(ctx->futhark_mc_segmap_task_109813_total_runtime);
    free(ctx->futhark_mc_segmap_task_109813_runs);
    free(ctx->futhark_mc_segmap_task_109813_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109825_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109825_iter);
    free(ctx->futhark_mc_segred_task_109820_total_runtime);
    free(ctx->futhark_mc_segred_task_109820_runs);
    free(ctx->futhark_mc_segred_task_109820_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109831_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109831_iter);
    free(ctx->futhark_mc_segred_task_109827_total_runtime);
    free(ctx->futhark_mc_segred_task_109827_runs);
    free(ctx->futhark_mc_segred_task_109827_iter);
    free(ctx->futhark_mc_segmap_parloop_109818_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109818_runs);
    free(ctx->futhark_mc_segmap_parloop_109818_iter);
    free(ctx->futhark_mc_segmap_nested_task_109816_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109816_runs);
    free(ctx->futhark_mc_segmap_nested_task_109816_iter);
    free(ctx->futhark_mc_segmap_parloop_109785_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109785_runs);
    free(ctx->futhark_mc_segmap_parloop_109785_iter);
    free(ctx->futhark_mc_segmap_nested_task_109783_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109783_runs);
    free(ctx->futhark_mc_segmap_nested_task_109783_iter);
    free(ctx->futhark_mc_segmap_parloop_109835_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109835_runs);
    free(ctx->futhark_mc_segmap_parloop_109835_iter);
    free(ctx->futhark_mc_segmap_task_109833_total_runtime);
    free(ctx->futhark_mc_segmap_task_109833_runs);
    free(ctx->futhark_mc_segmap_task_109833_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_109857_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_109857_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_109859_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_109859_iter);
    free(ctx->futhark_mc_segscan_task_109854_total_runtime);
    free(ctx->futhark_mc_segscan_task_109854_runs);
    free(ctx->futhark_mc_segscan_task_109854_iter);
    free(ctx->futhark_mc_segmap_parloop_109863_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109863_runs);
    free(ctx->futhark_mc_segmap_parloop_109863_iter);
    free(ctx->futhark_mc_segmap_task_109861_total_runtime);
    free(ctx->futhark_mc_segmap_task_109861_runs);
    free(ctx->futhark_mc_segmap_task_109861_iter);
    free(ctx->futhark_mc_segmap_parloop_109867_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109867_runs);
    free(ctx->futhark_mc_segmap_parloop_109867_iter);
    free(ctx->futhark_mc_segmap_task_109865_total_runtime);
    free(ctx->futhark_mc_segmap_task_109865_runs);
    free(ctx->futhark_mc_segmap_task_109865_iter);
    free(ctx->futhark_mc_segmap_parloop_109871_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109871_runs);
    free(ctx->futhark_mc_segmap_parloop_109871_iter);
    free(ctx->futhark_mc_segmap_task_109869_total_runtime);
    free(ctx->futhark_mc_segmap_task_109869_runs);
    free(ctx->futhark_mc_segmap_task_109869_iter);
    free(ctx->futhark_mc_segmap_parloop_109875_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109875_runs);
    free(ctx->futhark_mc_segmap_parloop_109875_iter);
    free(ctx->futhark_mc_segmap_task_109873_total_runtime);
    free(ctx->futhark_mc_segmap_task_109873_runs);
    free(ctx->futhark_mc_segmap_task_109873_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109887_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109887_iter);
    free(ctx->futhark_mc_segred_task_109880_total_runtime);
    free(ctx->futhark_mc_segred_task_109880_runs);
    free(ctx->futhark_mc_segred_task_109880_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109893_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109893_iter);
    free(ctx->futhark_mc_segred_task_109889_total_runtime);
    free(ctx->futhark_mc_segred_task_109889_runs);
    free(ctx->futhark_mc_segred_task_109889_iter);
    free(ctx->futhark_mc_segmap_parloop_109878_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109878_runs);
    free(ctx->futhark_mc_segmap_parloop_109878_iter);
    free(ctx->futhark_mc_segmap_nested_task_109876_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109876_runs);
    free(ctx->futhark_mc_segmap_nested_task_109876_iter);
    free(ctx->futhark_mc_segmap_parloop_109845_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109845_runs);
    free(ctx->futhark_mc_segmap_parloop_109845_iter);
    free(ctx->futhark_mc_segmap_nested_task_109843_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109843_runs);
    free(ctx->futhark_mc_segmap_nested_task_109843_iter);
    free(ctx->futhark_mc_segmap_parloop_109897_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109897_runs);
    free(ctx->futhark_mc_segmap_parloop_109897_iter);
    free(ctx->futhark_mc_segmap_task_109895_total_runtime);
    free(ctx->futhark_mc_segmap_task_109895_runs);
    free(ctx->futhark_mc_segmap_task_109895_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_109918_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_109918_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_109920_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_109920_iter);
    free(ctx->futhark_mc_segscan_task_109915_total_runtime);
    free(ctx->futhark_mc_segscan_task_109915_runs);
    free(ctx->futhark_mc_segscan_task_109915_iter);
    free(ctx->futhark_mc_segmap_parloop_109924_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109924_runs);
    free(ctx->futhark_mc_segmap_parloop_109924_iter);
    free(ctx->futhark_mc_segmap_task_109922_total_runtime);
    free(ctx->futhark_mc_segmap_task_109922_runs);
    free(ctx->futhark_mc_segmap_task_109922_iter);
    free(ctx->futhark_mc_segmap_parloop_109928_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109928_runs);
    free(ctx->futhark_mc_segmap_parloop_109928_iter);
    free(ctx->futhark_mc_segmap_task_109926_total_runtime);
    free(ctx->futhark_mc_segmap_task_109926_runs);
    free(ctx->futhark_mc_segmap_task_109926_iter);
    free(ctx->futhark_mc_segmap_parloop_109932_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109932_runs);
    free(ctx->futhark_mc_segmap_parloop_109932_iter);
    free(ctx->futhark_mc_segmap_task_109930_total_runtime);
    free(ctx->futhark_mc_segmap_task_109930_runs);
    free(ctx->futhark_mc_segmap_task_109930_iter);
    free(ctx->futhark_mc_segmap_parloop_109936_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109936_runs);
    free(ctx->futhark_mc_segmap_parloop_109936_iter);
    free(ctx->futhark_mc_segmap_task_109934_total_runtime);
    free(ctx->futhark_mc_segmap_task_109934_runs);
    free(ctx->futhark_mc_segmap_task_109934_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109946_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109946_iter);
    free(ctx->futhark_mc_segred_task_109943_total_runtime);
    free(ctx->futhark_mc_segred_task_109943_runs);
    free(ctx->futhark_mc_segred_task_109943_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_109951_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_109951_iter);
    free(ctx->futhark_mc_segred_task_109948_total_runtime);
    free(ctx->futhark_mc_segred_task_109948_runs);
    free(ctx->futhark_mc_segred_task_109948_iter);
    free(ctx->futhark_mc_segmap_parloop_109940_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109940_runs);
    free(ctx->futhark_mc_segmap_parloop_109940_iter);
    free(ctx->futhark_mc_segmap_nested_task_109938_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109938_runs);
    free(ctx->futhark_mc_segmap_nested_task_109938_iter);
    free(ctx->futhark_mc_segmap_parloop_109907_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109907_runs);
    free(ctx->futhark_mc_segmap_parloop_109907_iter);
    free(ctx->futhark_mc_segmap_nested_task_109905_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109905_runs);
    free(ctx->futhark_mc_segmap_nested_task_109905_iter);
    free(ctx->futhark_mc_segmap_parloop_109955_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109955_runs);
    free(ctx->futhark_mc_segmap_parloop_109955_iter);
    free(ctx->futhark_mc_segmap_task_109953_total_runtime);
    free(ctx->futhark_mc_segmap_task_109953_runs);
    free(ctx->futhark_mc_segmap_task_109953_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_109979_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_109979_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_109981_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_109981_iter);
    free(ctx->futhark_mc_segscan_task_109976_total_runtime);
    free(ctx->futhark_mc_segscan_task_109976_runs);
    free(ctx->futhark_mc_segscan_task_109976_iter);
    free(ctx->futhark_mc_segmap_parloop_109985_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109985_runs);
    free(ctx->futhark_mc_segmap_parloop_109985_iter);
    free(ctx->futhark_mc_segmap_task_109983_total_runtime);
    free(ctx->futhark_mc_segmap_task_109983_runs);
    free(ctx->futhark_mc_segmap_task_109983_iter);
    free(ctx->futhark_mc_segmap_parloop_109989_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109989_runs);
    free(ctx->futhark_mc_segmap_parloop_109989_iter);
    free(ctx->futhark_mc_segmap_task_109987_total_runtime);
    free(ctx->futhark_mc_segmap_task_109987_runs);
    free(ctx->futhark_mc_segmap_task_109987_iter);
    free(ctx->futhark_mc_segmap_parloop_109993_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109993_runs);
    free(ctx->futhark_mc_segmap_parloop_109993_iter);
    free(ctx->futhark_mc_segmap_task_109991_total_runtime);
    free(ctx->futhark_mc_segmap_task_109991_runs);
    free(ctx->futhark_mc_segmap_task_109991_iter);
    free(ctx->futhark_mc_segmap_parloop_109997_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109997_runs);
    free(ctx->futhark_mc_segmap_parloop_109997_iter);
    free(ctx->futhark_mc_segmap_task_109995_total_runtime);
    free(ctx->futhark_mc_segmap_task_109995_runs);
    free(ctx->futhark_mc_segmap_task_109995_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110011_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110011_iter);
    free(ctx->futhark_mc_segred_task_110006_total_runtime);
    free(ctx->futhark_mc_segred_task_110006_runs);
    free(ctx->futhark_mc_segred_task_110006_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110017_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110017_iter);
    free(ctx->futhark_mc_segred_task_110013_total_runtime);
    free(ctx->futhark_mc_segred_task_110013_runs);
    free(ctx->futhark_mc_segred_task_110013_iter);
    free(ctx->futhark_mc_segmap_parloop_110002_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110002_runs);
    free(ctx->futhark_mc_segmap_parloop_110002_iter);
    free(ctx->futhark_mc_segmap_nested_task_110000_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110000_runs);
    free(ctx->futhark_mc_segmap_nested_task_110000_iter);
    free(ctx->futhark_mc_segmap_parloop_109967_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_109967_runs);
    free(ctx->futhark_mc_segmap_parloop_109967_iter);
    free(ctx->futhark_mc_segmap_nested_task_109965_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_109965_runs);
    free(ctx->futhark_mc_segmap_nested_task_109965_iter);
    free(ctx->futhark_mc_segmap_parloop_110021_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110021_runs);
    free(ctx->futhark_mc_segmap_parloop_110021_iter);
    free(ctx->futhark_mc_segmap_task_110019_total_runtime);
    free(ctx->futhark_mc_segmap_task_110019_runs);
    free(ctx->futhark_mc_segmap_task_110019_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_110047_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_110047_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_110049_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_110049_iter);
    free(ctx->futhark_mc_segscan_task_110044_total_runtime);
    free(ctx->futhark_mc_segscan_task_110044_runs);
    free(ctx->futhark_mc_segscan_task_110044_iter);
    free(ctx->futhark_mc_segmap_parloop_110053_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110053_runs);
    free(ctx->futhark_mc_segmap_parloop_110053_iter);
    free(ctx->futhark_mc_segmap_task_110051_total_runtime);
    free(ctx->futhark_mc_segmap_task_110051_runs);
    free(ctx->futhark_mc_segmap_task_110051_iter);
    free(ctx->futhark_mc_segmap_parloop_110057_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110057_runs);
    free(ctx->futhark_mc_segmap_parloop_110057_iter);
    free(ctx->futhark_mc_segmap_task_110055_total_runtime);
    free(ctx->futhark_mc_segmap_task_110055_runs);
    free(ctx->futhark_mc_segmap_task_110055_iter);
    free(ctx->futhark_mc_segmap_parloop_110061_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110061_runs);
    free(ctx->futhark_mc_segmap_parloop_110061_iter);
    free(ctx->futhark_mc_segmap_task_110059_total_runtime);
    free(ctx->futhark_mc_segmap_task_110059_runs);
    free(ctx->futhark_mc_segmap_task_110059_iter);
    free(ctx->futhark_mc_segmap_parloop_110065_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110065_runs);
    free(ctx->futhark_mc_segmap_parloop_110065_iter);
    free(ctx->futhark_mc_segmap_task_110063_total_runtime);
    free(ctx->futhark_mc_segmap_task_110063_runs);
    free(ctx->futhark_mc_segmap_task_110063_iter);
    free(ctx->futhark_mc_segmap_parloop_110080_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110080_runs);
    free(ctx->futhark_mc_segmap_parloop_110080_iter);
    free(ctx->futhark_mc_segmap_task_110078_total_runtime);
    free(ctx->futhark_mc_segmap_task_110078_runs);
    free(ctx->futhark_mc_segmap_task_110078_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110089_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110089_iter);
    free(ctx->futhark_mc_segred_task_110082_total_runtime);
    free(ctx->futhark_mc_segred_task_110082_runs);
    free(ctx->futhark_mc_segred_task_110082_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110095_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110095_iter);
    free(ctx->futhark_mc_segred_task_110091_total_runtime);
    free(ctx->futhark_mc_segred_task_110091_runs);
    free(ctx->futhark_mc_segred_task_110091_iter);
    free(ctx->futhark_mc_segmap_parloop_110072_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110072_runs);
    free(ctx->futhark_mc_segmap_parloop_110072_iter);
    free(ctx->futhark_mc_segmap_nested_task_110070_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110070_runs);
    free(ctx->futhark_mc_segmap_nested_task_110070_iter);
    free(ctx->futhark_mc_segmap_parloop_110035_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110035_runs);
    free(ctx->futhark_mc_segmap_parloop_110035_iter);
    free(ctx->futhark_mc_segmap_nested_task_110033_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110033_runs);
    free(ctx->futhark_mc_segmap_nested_task_110033_iter);
    free(ctx->futhark_mc_segmap_parloop_110099_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110099_runs);
    free(ctx->futhark_mc_segmap_parloop_110099_iter);
    free(ctx->futhark_mc_segmap_task_110097_total_runtime);
    free(ctx->futhark_mc_segmap_task_110097_runs);
    free(ctx->futhark_mc_segmap_task_110097_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_110119_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_110119_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_110121_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_110121_iter);
    free(ctx->futhark_mc_segscan_task_110116_total_runtime);
    free(ctx->futhark_mc_segscan_task_110116_runs);
    free(ctx->futhark_mc_segscan_task_110116_iter);
    free(ctx->futhark_mc_segmap_parloop_110125_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110125_runs);
    free(ctx->futhark_mc_segmap_parloop_110125_iter);
    free(ctx->futhark_mc_segmap_task_110123_total_runtime);
    free(ctx->futhark_mc_segmap_task_110123_runs);
    free(ctx->futhark_mc_segmap_task_110123_iter);
    free(ctx->futhark_mc_segmap_parloop_110129_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110129_runs);
    free(ctx->futhark_mc_segmap_parloop_110129_iter);
    free(ctx->futhark_mc_segmap_task_110127_total_runtime);
    free(ctx->futhark_mc_segmap_task_110127_runs);
    free(ctx->futhark_mc_segmap_task_110127_iter);
    free(ctx->futhark_mc_segmap_parloop_110133_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110133_runs);
    free(ctx->futhark_mc_segmap_parloop_110133_iter);
    free(ctx->futhark_mc_segmap_task_110131_total_runtime);
    free(ctx->futhark_mc_segmap_task_110131_runs);
    free(ctx->futhark_mc_segmap_task_110131_iter);
    free(ctx->futhark_mc_segmap_parloop_110137_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110137_runs);
    free(ctx->futhark_mc_segmap_parloop_110137_iter);
    free(ctx->futhark_mc_segmap_task_110135_total_runtime);
    free(ctx->futhark_mc_segmap_task_110135_runs);
    free(ctx->futhark_mc_segmap_task_110135_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110145_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110145_iter);
    free(ctx->futhark_mc_segred_task_110142_total_runtime);
    free(ctx->futhark_mc_segred_task_110142_runs);
    free(ctx->futhark_mc_segred_task_110142_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110150_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110150_iter);
    free(ctx->futhark_mc_segred_task_110147_total_runtime);
    free(ctx->futhark_mc_segred_task_110147_runs);
    free(ctx->futhark_mc_segred_task_110147_iter);
    free(ctx->futhark_mc_segmap_parloop_110140_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110140_runs);
    free(ctx->futhark_mc_segmap_parloop_110140_iter);
    free(ctx->futhark_mc_segmap_nested_task_110138_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110138_runs);
    free(ctx->futhark_mc_segmap_nested_task_110138_iter);
    free(ctx->futhark_mc_segmap_parloop_110108_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110108_runs);
    free(ctx->futhark_mc_segmap_parloop_110108_iter);
    free(ctx->futhark_mc_segmap_nested_task_110106_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110106_runs);
    free(ctx->futhark_mc_segmap_nested_task_110106_iter);
    free(ctx->futhark_mc_segmap_parloop_110154_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110154_runs);
    free(ctx->futhark_mc_segmap_parloop_110154_iter);
    free(ctx->futhark_mc_segmap_task_110152_total_runtime);
    free(ctx->futhark_mc_segmap_task_110152_runs);
    free(ctx->futhark_mc_segmap_task_110152_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_110176_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_110176_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_110178_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_110178_iter);
    free(ctx->futhark_mc_segscan_task_110173_total_runtime);
    free(ctx->futhark_mc_segscan_task_110173_runs);
    free(ctx->futhark_mc_segscan_task_110173_iter);
    free(ctx->futhark_mc_segmap_parloop_110182_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110182_runs);
    free(ctx->futhark_mc_segmap_parloop_110182_iter);
    free(ctx->futhark_mc_segmap_task_110180_total_runtime);
    free(ctx->futhark_mc_segmap_task_110180_runs);
    free(ctx->futhark_mc_segmap_task_110180_iter);
    free(ctx->futhark_mc_segmap_parloop_110186_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110186_runs);
    free(ctx->futhark_mc_segmap_parloop_110186_iter);
    free(ctx->futhark_mc_segmap_task_110184_total_runtime);
    free(ctx->futhark_mc_segmap_task_110184_runs);
    free(ctx->futhark_mc_segmap_task_110184_iter);
    free(ctx->futhark_mc_segmap_parloop_110190_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110190_runs);
    free(ctx->futhark_mc_segmap_parloop_110190_iter);
    free(ctx->futhark_mc_segmap_task_110188_total_runtime);
    free(ctx->futhark_mc_segmap_task_110188_runs);
    free(ctx->futhark_mc_segmap_task_110188_iter);
    free(ctx->futhark_mc_segmap_parloop_110194_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110194_runs);
    free(ctx->futhark_mc_segmap_parloop_110194_iter);
    free(ctx->futhark_mc_segmap_task_110192_total_runtime);
    free(ctx->futhark_mc_segmap_task_110192_runs);
    free(ctx->futhark_mc_segmap_task_110192_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110204_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110204_iter);
    free(ctx->futhark_mc_segred_task_110199_total_runtime);
    free(ctx->futhark_mc_segred_task_110199_runs);
    free(ctx->futhark_mc_segred_task_110199_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110210_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110210_iter);
    free(ctx->futhark_mc_segred_task_110206_total_runtime);
    free(ctx->futhark_mc_segred_task_110206_runs);
    free(ctx->futhark_mc_segred_task_110206_iter);
    free(ctx->futhark_mc_segmap_parloop_110197_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110197_runs);
    free(ctx->futhark_mc_segmap_parloop_110197_iter);
    free(ctx->futhark_mc_segmap_nested_task_110195_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110195_runs);
    free(ctx->futhark_mc_segmap_nested_task_110195_iter);
    free(ctx->futhark_mc_segmap_parloop_110164_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110164_runs);
    free(ctx->futhark_mc_segmap_parloop_110164_iter);
    free(ctx->futhark_mc_segmap_nested_task_110162_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110162_runs);
    free(ctx->futhark_mc_segmap_nested_task_110162_iter);
    free(ctx->futhark_mc_segmap_parloop_110214_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110214_runs);
    free(ctx->futhark_mc_segmap_parloop_110214_iter);
    free(ctx->futhark_mc_segmap_task_110212_total_runtime);
    free(ctx->futhark_mc_segmap_task_110212_runs);
    free(ctx->futhark_mc_segmap_task_110212_iter);
    free(ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime);
    free(ctx->futhark_mc_scan_stage_1_parloop_110236_runs);
    free(ctx->futhark_mc_scan_stage_1_parloop_110236_iter);
    free(ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime);
    free(ctx->futhark_mc_scan_stage_3_parloop_110238_runs);
    free(ctx->futhark_mc_scan_stage_3_parloop_110238_iter);
    free(ctx->futhark_mc_segscan_task_110233_total_runtime);
    free(ctx->futhark_mc_segscan_task_110233_runs);
    free(ctx->futhark_mc_segscan_task_110233_iter);
    free(ctx->futhark_mc_segmap_parloop_110242_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110242_runs);
    free(ctx->futhark_mc_segmap_parloop_110242_iter);
    free(ctx->futhark_mc_segmap_task_110240_total_runtime);
    free(ctx->futhark_mc_segmap_task_110240_runs);
    free(ctx->futhark_mc_segmap_task_110240_iter);
    free(ctx->futhark_mc_segmap_parloop_110246_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110246_runs);
    free(ctx->futhark_mc_segmap_parloop_110246_iter);
    free(ctx->futhark_mc_segmap_task_110244_total_runtime);
    free(ctx->futhark_mc_segmap_task_110244_runs);
    free(ctx->futhark_mc_segmap_task_110244_iter);
    free(ctx->futhark_mc_segmap_parloop_110250_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110250_runs);
    free(ctx->futhark_mc_segmap_parloop_110250_iter);
    free(ctx->futhark_mc_segmap_task_110248_total_runtime);
    free(ctx->futhark_mc_segmap_task_110248_runs);
    free(ctx->futhark_mc_segmap_task_110248_iter);
    free(ctx->futhark_mc_segmap_parloop_110254_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110254_runs);
    free(ctx->futhark_mc_segmap_parloop_110254_iter);
    free(ctx->futhark_mc_segmap_task_110252_total_runtime);
    free(ctx->futhark_mc_segmap_task_110252_runs);
    free(ctx->futhark_mc_segmap_task_110252_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110266_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110266_iter);
    free(ctx->futhark_mc_segred_task_110259_total_runtime);
    free(ctx->futhark_mc_segred_task_110259_runs);
    free(ctx->futhark_mc_segred_task_110259_iter);
    free(ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime);
    free(ctx->futhark_mc_segred_stage_1_parloop_110272_runs);
    free(ctx->futhark_mc_segred_stage_1_parloop_110272_iter);
    free(ctx->futhark_mc_segred_task_110268_total_runtime);
    free(ctx->futhark_mc_segred_task_110268_runs);
    free(ctx->futhark_mc_segred_task_110268_iter);
    free(ctx->futhark_mc_segmap_parloop_110257_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110257_runs);
    free(ctx->futhark_mc_segmap_parloop_110257_iter);
    free(ctx->futhark_mc_segmap_nested_task_110255_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110255_runs);
    free(ctx->futhark_mc_segmap_nested_task_110255_iter);
    free(ctx->futhark_mc_segmap_parloop_110224_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110224_runs);
    free(ctx->futhark_mc_segmap_parloop_110224_iter);
    free(ctx->futhark_mc_segmap_nested_task_110222_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110222_runs);
    free(ctx->futhark_mc_segmap_nested_task_110222_iter);
    free(ctx->futhark_mc_segmap_parloop_110276_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110276_runs);
    free(ctx->futhark_mc_segmap_parloop_110276_iter);
    free(ctx->futhark_mc_segmap_task_110274_total_runtime);
    free(ctx->futhark_mc_segmap_task_110274_runs);
    free(ctx->futhark_mc_segmap_task_110274_iter);
    free(ctx->futhark_mc_segmap_parloop_110285_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110285_runs);
    free(ctx->futhark_mc_segmap_parloop_110285_iter);
    free(ctx->futhark_mc_segmap_task_110283_total_runtime);
    free(ctx->futhark_mc_segmap_task_110283_runs);
    free(ctx->futhark_mc_segmap_task_110283_iter);
    free(ctx->futhark_mc_segmap_parloop_110280_total_runtime);
    free(ctx->futhark_mc_segmap_parloop_110280_runs);
    free(ctx->futhark_mc_segmap_parloop_110280_iter);
    free(ctx->futhark_mc_segmap_nested_task_110278_total_runtime);
    free(ctx->futhark_mc_segmap_nested_task_110278_runs);
    free(ctx->futhark_mc_segmap_nested_task_110278_iter);
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109720         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109720_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109720_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109720_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109720_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109720_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109720_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109720_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109720_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109720_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109720_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109720_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109720_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109720_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109720_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109720_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109720_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109720_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109720_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109720_total_iter /
                (ctx->futhark_mc_segmap_parloop_109720_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109720_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109720_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109720_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_109740   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_109740_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109740_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109740_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109740_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109740_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109740_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109740_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109740_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109740_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_109740_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_109742   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_109742_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109742_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109742_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109742_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109742_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109742_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109742_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109742_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109742_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_109742_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_109737           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_109737_runs[i],
                    (long) ctx->futhark_mc_segscan_task_109737_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109737_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109737_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_109737_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_109737_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109737_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_109737_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_109737_iter[i],
                    (long) ctx->futhark_mc_segscan_task_109737_iter[i] /
                    (ctx->futhark_mc_segscan_task_109737_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109737_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109746         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109746_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109746_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109746_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109746_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109746_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109746_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109746_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109746_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109746_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109746_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109746_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109746_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109746_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109746_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109746_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109746_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109746_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109746_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109746_total_iter /
                (ctx->futhark_mc_segmap_parloop_109746_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109746_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109746_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109746_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109744            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109744_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109744_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109744_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109744_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109744_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109744_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109744_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109744_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109744_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109744_iter[i] /
                    (ctx->futhark_mc_segmap_task_109744_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109744_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109750         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109750_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109750_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109750_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109750_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109750_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109750_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109750_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109750_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109750_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109750_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109750_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109750_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109750_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109750_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109750_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109750_total_iter /
                (ctx->futhark_mc_segmap_parloop_109750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109750_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109750_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109750_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109748            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109748_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109748_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109748_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109748_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109748_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109748_iter[i] /
                    (ctx->futhark_mc_segmap_task_109748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109748_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109754         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109754_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109754_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109754_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109754_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109754_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109754_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109754_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109754_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109754_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109754_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109754_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109754_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109754_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109754_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109754_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109754_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109754_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109754_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109754_total_iter /
                (ctx->futhark_mc_segmap_parloop_109754_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109754_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109754_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109754_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109752            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109752_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109752_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109752_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109752_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109752_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109752_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109752_iter[i] /
                    (ctx->futhark_mc_segmap_task_109752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109752_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109758         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109758_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109758_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109758_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109758_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109758_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109758_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109758_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109758_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109758_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109758_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109758_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109758_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109758_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109758_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109758_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109758_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109758_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109758_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109758_total_iter /
                (ctx->futhark_mc_segmap_parloop_109758_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109758_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109758_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109758_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109766 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109766_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109766_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109766_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109766_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109766_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109766_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109766_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109766_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109766_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109766_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109763            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109763_runs[i],
                    (long) ctx->futhark_mc_segred_task_109763_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109763_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109763_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109763_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109763_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109763_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109763_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109763_iter[i],
                    (long) ctx->futhark_mc_segred_task_109763_iter[i] /
                    (ctx->futhark_mc_segred_task_109763_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109763_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109771 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109771_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109771_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109771_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109771_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109771_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109771_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109771_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109771_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109771_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109771_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109768            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109768_runs[i],
                    (long) ctx->futhark_mc_segred_task_109768_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109768_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109768_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109768_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109768_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109768_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109768_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109768_iter[i],
                    (long) ctx->futhark_mc_segred_task_109768_iter[i] /
                    (ctx->futhark_mc_segred_task_109768_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109768_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109761         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109761_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109761_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109761_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109761_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109761_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109761_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109761_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109761_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109761_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109761_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109761_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109761_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109761_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109761_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109761_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109761_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109761_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109761_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109761_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109761_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109761_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109761_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109761_total_iter /
                (ctx->futhark_mc_segmap_parloop_109761_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109761_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109761_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109761_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109756            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109756_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109756_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109756_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109756_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109756_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109756_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109756_iter[i] /
                    (ctx->futhark_mc_segmap_task_109756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109756_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109759     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109759_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109759_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109759_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109759_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109759_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109759_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109759_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109759_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109729         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109729_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109729_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109729_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109729_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109729_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109729_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109729_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109729_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109729_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109729_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109729_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109729_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109729_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109729_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109729_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109729_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109729_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109729_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109729_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109729_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109729_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109729_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109729_total_iter /
                (ctx->futhark_mc_segmap_parloop_109729_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109729_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109729_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109729_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109718            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109718_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109718_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109718_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109718_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109718_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109718_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109718_iter[i] /
                    (ctx->futhark_mc_segmap_task_109718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109718_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109727     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109727_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109727_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109727_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109727_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109727_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109727_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109727_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109727_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109727_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109727_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109727_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109727_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109775         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109775_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109775_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109775_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109775_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109775_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109775_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109775_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109775_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109775_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109775_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109775_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109775_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109775_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109775_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109775_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109775_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109775_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109775_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109775_total_iter /
                (ctx->futhark_mc_segmap_parloop_109775_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109775_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109775_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109775_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_109797   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_109797_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109797_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109797_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109797_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109797_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109797_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109797_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109797_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109797_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_109797_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_109799   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_109799_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109799_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109799_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109799_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109799_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109799_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109799_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109799_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109799_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_109799_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_109794           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_109794_runs[i],
                    (long) ctx->futhark_mc_segscan_task_109794_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109794_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109794_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_109794_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_109794_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109794_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_109794_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_109794_iter[i],
                    (long) ctx->futhark_mc_segscan_task_109794_iter[i] /
                    (ctx->futhark_mc_segscan_task_109794_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109794_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109803         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109803_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109803_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109803_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109803_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109803_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109803_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109803_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109803_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109803_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109803_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109803_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109803_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109803_total_iter /
                (ctx->futhark_mc_segmap_parloop_109803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109803_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109803_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109803_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109801            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109801_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109801_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109801_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109801_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109801_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109801_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109801_iter[i] /
                    (ctx->futhark_mc_segmap_task_109801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109801_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109807         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109807_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109807_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109807_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109807_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109807_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109807_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109807_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109807_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109807_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109807_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109807_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109807_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109807_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109807_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109807_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109807_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109807_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109807_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109807_total_iter /
                (ctx->futhark_mc_segmap_parloop_109807_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109807_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109807_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109807_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109805            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109805_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109805_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109805_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109805_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109805_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109805_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109805_iter[i] /
                    (ctx->futhark_mc_segmap_task_109805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109805_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109811         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109811_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109811_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109811_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109811_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109811_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109811_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109811_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109811_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109811_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109811_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109811_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109811_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109811_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109811_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109811_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109811_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109811_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109811_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109811_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109811_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109811_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109811_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109811_total_iter /
                (ctx->futhark_mc_segmap_parloop_109811_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109811_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109811_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109811_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109809            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109809_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109809_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109809_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109809_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109809_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109809_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109809_iter[i] /
                    (ctx->futhark_mc_segmap_task_109809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109809_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109815         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109815_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109815_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109815_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109815_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109815_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109815_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109815_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109815_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109815_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109815_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109815_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109815_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109815_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109815_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109815_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109815_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109815_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109815_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109815_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109815_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109815_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109815_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109815_total_iter /
                (ctx->futhark_mc_segmap_parloop_109815_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109815_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109815_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109815_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109825 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109825_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109825_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109825_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109825_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109825_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109825_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109825_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109825_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109825_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109825_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109820            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109820_runs[i],
                    (long) ctx->futhark_mc_segred_task_109820_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109820_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109820_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109820_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109820_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109820_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109820_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109820_iter[i],
                    (long) ctx->futhark_mc_segred_task_109820_iter[i] /
                    (ctx->futhark_mc_segred_task_109820_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109820_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109831 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109831_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109831_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109831_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109831_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109831_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109831_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109831_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109831_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109831_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109831_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109827            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109827_runs[i],
                    (long) ctx->futhark_mc_segred_task_109827_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109827_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109827_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109827_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109827_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109827_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109827_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109827_iter[i],
                    (long) ctx->futhark_mc_segred_task_109827_iter[i] /
                    (ctx->futhark_mc_segred_task_109827_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109827_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109818         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109818_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109818_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109818_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109818_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109818_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109818_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109818_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109818_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109818_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109818_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109818_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109818_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109818_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109818_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109818_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109818_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109818_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109818_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109818_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109818_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109818_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109818_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109818_total_iter /
                (ctx->futhark_mc_segmap_parloop_109818_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109818_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109818_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109818_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109813            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109813_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109813_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109813_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109813_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109813_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109813_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109813_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109813_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109813_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109813_iter[i] /
                    (ctx->futhark_mc_segmap_task_109813_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109813_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109816     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109816_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109816_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109816_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109816_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109816_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109816_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109816_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109816_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109785         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109785_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109785_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109785_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109785_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109785_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109785_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109785_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109785_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109785_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109785_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109785_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109785_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109785_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109785_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109785_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109785_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109785_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109785_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109785_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109785_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109785_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109785_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109785_total_iter /
                (ctx->futhark_mc_segmap_parloop_109785_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109785_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109785_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109785_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109773            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109773_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109773_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109773_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109773_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109773_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109773_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109773_iter[i] /
                    (ctx->futhark_mc_segmap_task_109773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109773_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109783     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109783_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109783_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109783_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109783_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109783_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109783_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109783_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109783_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109783_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109783_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109783_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109783_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109835         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109835_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109835_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109835_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109835_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109835_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109835_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109835_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109835_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109835_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109835_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109835_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109835_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109835_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109835_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109835_total_iter /
                (ctx->futhark_mc_segmap_parloop_109835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109835_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109835_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109835_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_109857   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_109857_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109857_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109857_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109857_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109857_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109857_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109857_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109857_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109857_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_109857_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_109859   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_109859_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109859_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109859_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109859_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109859_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109859_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109859_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109859_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109859_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_109859_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_109854           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_109854_runs[i],
                    (long) ctx->futhark_mc_segscan_task_109854_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109854_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109854_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_109854_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_109854_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109854_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_109854_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_109854_iter[i],
                    (long) ctx->futhark_mc_segscan_task_109854_iter[i] /
                    (ctx->futhark_mc_segscan_task_109854_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109854_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109863         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109863_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109863_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109863_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109863_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109863_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109863_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109863_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109863_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109863_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109863_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109863_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109863_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109863_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109863_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109863_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109863_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109863_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109863_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109863_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109863_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109863_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109863_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109863_total_iter /
                (ctx->futhark_mc_segmap_parloop_109863_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109863_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109863_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109863_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109861            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109861_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109861_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109861_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109861_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109861_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109861_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109861_iter[i] /
                    (ctx->futhark_mc_segmap_task_109861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109861_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109867         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109867_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109867_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109867_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109867_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109867_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109867_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109867_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109867_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109867_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109867_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109867_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109867_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109867_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109867_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109867_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109867_total_iter /
                (ctx->futhark_mc_segmap_parloop_109867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109867_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109867_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109867_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109865            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109865_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109865_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109865_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109865_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109865_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109865_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109865_iter[i] /
                    (ctx->futhark_mc_segmap_task_109865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109865_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109871         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109871_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109871_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109871_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109871_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109871_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109871_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109871_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109871_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109871_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109871_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109871_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109871_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109871_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109871_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109871_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109871_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109871_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109871_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109871_total_iter /
                (ctx->futhark_mc_segmap_parloop_109871_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109871_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109871_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109871_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109869            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109869_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109869_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109869_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109869_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109869_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109869_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109869_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109869_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109869_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109869_iter[i] /
                    (ctx->futhark_mc_segmap_task_109869_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109869_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109875         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109875_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109875_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109875_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109875_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109875_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109875_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109875_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109875_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109875_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109875_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109875_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109875_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109875_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109875_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109875_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109875_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109875_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109875_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109875_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109875_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109875_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109875_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109875_total_iter /
                (ctx->futhark_mc_segmap_parloop_109875_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109875_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109875_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109875_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109887 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109887_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109887_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109887_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109887_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109887_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109887_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109887_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109887_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109887_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109887_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109880            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109880_runs[i],
                    (long) ctx->futhark_mc_segred_task_109880_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109880_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109880_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109880_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109880_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109880_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109880_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109880_iter[i],
                    (long) ctx->futhark_mc_segred_task_109880_iter[i] /
                    (ctx->futhark_mc_segred_task_109880_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109880_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109893 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109893_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109893_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109893_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109893_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109893_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109893_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109893_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109893_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109893_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109893_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109889            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109889_runs[i],
                    (long) ctx->futhark_mc_segred_task_109889_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109889_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109889_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109889_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109889_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109889_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109889_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109889_iter[i],
                    (long) ctx->futhark_mc_segred_task_109889_iter[i] /
                    (ctx->futhark_mc_segred_task_109889_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109889_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109878         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109878_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109878_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109878_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109878_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109878_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109878_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109878_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109878_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109878_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109878_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109878_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109878_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109878_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109878_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109878_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109878_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109878_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109878_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109878_total_iter /
                (ctx->futhark_mc_segmap_parloop_109878_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109878_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109878_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109878_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109873            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109873_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109873_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109873_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109873_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109873_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109873_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109873_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109873_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109873_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109873_iter[i] /
                    (ctx->futhark_mc_segmap_task_109873_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109873_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109876     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109876_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109876_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109876_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109876_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109876_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109876_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109876_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109876_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109845         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109845_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109845_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109845_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109845_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109845_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109845_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109845_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109845_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109845_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109845_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109845_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109845_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109845_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109845_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109845_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109845_total_iter /
                (ctx->futhark_mc_segmap_parloop_109845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109845_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109845_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109845_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109833            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109833_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109833_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109833_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109833_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109833_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109833_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109833_iter[i] /
                    (ctx->futhark_mc_segmap_task_109833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109833_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109843     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109843_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109843_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109843_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109843_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109843_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109843_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109843_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109843_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109897         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109897_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109897_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109897_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109897_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109897_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109897_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109897_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109897_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109897_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109897_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109897_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109897_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109897_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109897_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109897_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109897_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109897_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109897_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109897_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109897_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109897_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109897_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109897_total_iter /
                (ctx->futhark_mc_segmap_parloop_109897_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109897_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109897_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109897_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_109918   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_109918_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109918_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109918_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109918_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109918_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109918_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109918_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109918_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109918_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_109918_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_109920   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_109920_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109920_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109920_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109920_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109920_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109920_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109920_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109920_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109920_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_109920_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_109915           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_109915_runs[i],
                    (long) ctx->futhark_mc_segscan_task_109915_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109915_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109915_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_109915_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_109915_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109915_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_109915_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_109915_iter[i],
                    (long) ctx->futhark_mc_segscan_task_109915_iter[i] /
                    (ctx->futhark_mc_segscan_task_109915_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109915_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109924         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109924_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109924_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109924_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109924_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109924_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109924_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109924_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109924_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109924_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109924_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109924_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109924_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109924_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109924_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109924_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109924_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109924_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109924_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109924_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109924_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109924_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109924_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109924_total_iter /
                (ctx->futhark_mc_segmap_parloop_109924_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109924_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109924_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109924_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109922            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109922_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109922_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109922_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109922_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109922_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109922_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109922_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109922_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109922_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109922_iter[i] /
                    (ctx->futhark_mc_segmap_task_109922_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109922_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109928         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109928_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109928_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109928_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109928_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109928_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109928_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109928_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109928_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109928_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109928_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109928_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109928_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109928_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109928_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109928_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109928_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109928_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109928_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109928_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109928_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109928_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109928_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109928_total_iter /
                (ctx->futhark_mc_segmap_parloop_109928_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109928_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109928_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109928_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109926            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109926_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109926_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109926_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109926_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109926_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109926_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109926_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109926_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109926_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109926_iter[i] /
                    (ctx->futhark_mc_segmap_task_109926_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109926_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109932         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109932_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109932_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109932_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109932_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109932_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109932_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109932_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109932_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109932_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109932_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109932_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109932_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109932_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109932_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109932_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109932_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109932_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109932_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109932_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109932_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109932_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109932_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109932_total_iter /
                (ctx->futhark_mc_segmap_parloop_109932_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109932_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109932_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109932_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109930            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109930_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109930_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109930_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109930_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109930_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109930_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109930_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109930_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109930_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109930_iter[i] /
                    (ctx->futhark_mc_segmap_task_109930_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109930_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109936         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109936_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109936_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109936_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109936_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109936_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109936_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109936_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109936_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109936_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109936_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109936_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109936_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109936_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109936_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109936_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109936_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109936_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109936_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109936_total_iter /
                (ctx->futhark_mc_segmap_parloop_109936_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109936_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109936_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109936_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109946 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109946_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109946_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109946_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109946_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109946_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109946_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109946_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109946_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109946_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109946_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109943            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109943_runs[i],
                    (long) ctx->futhark_mc_segred_task_109943_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109943_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109943_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109943_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109943_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109943_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109943_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109943_iter[i],
                    (long) ctx->futhark_mc_segred_task_109943_iter[i] /
                    (ctx->futhark_mc_segred_task_109943_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109943_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_109951 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_109951_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109951_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109951_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109951_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109951_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109951_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_109951_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_109951_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_109951_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_109951_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_109948            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_109948_runs[i],
                    (long) ctx->futhark_mc_segred_task_109948_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109948_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109948_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_109948_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_109948_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_109948_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_109948_iter[i]),
                    (long) ctx->futhark_mc_segred_task_109948_iter[i],
                    (long) ctx->futhark_mc_segred_task_109948_iter[i] /
                    (ctx->futhark_mc_segred_task_109948_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_109948_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109940         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109940_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109940_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109940_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109940_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109940_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109940_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109940_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109940_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109940_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109940_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109940_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109940_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109940_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109940_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109940_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109940_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109940_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109940_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109940_total_iter /
                (ctx->futhark_mc_segmap_parloop_109940_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109940_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109940_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109940_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109934            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109934_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109934_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109934_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109934_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109934_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109934_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109934_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109934_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109934_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109934_iter[i] /
                    (ctx->futhark_mc_segmap_task_109934_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109934_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109938     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109938_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109938_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109938_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109938_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109938_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109938_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109938_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109938_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109907         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109907_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109907_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109907_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109907_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109907_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109907_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109907_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109907_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109907_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109907_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109907_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109907_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109907_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109907_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109907_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109907_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109907_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109907_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109907_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109907_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109907_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109907_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109907_total_iter /
                (ctx->futhark_mc_segmap_parloop_109907_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109907_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109907_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109907_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109895            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109895_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109895_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109895_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109895_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109895_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109895_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109895_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109895_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109895_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109895_iter[i] /
                    (ctx->futhark_mc_segmap_task_109895_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109895_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109905     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109905_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109905_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109905_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109905_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109905_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109905_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109905_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109905_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109905_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109905_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109905_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109905_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109955         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109955_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109955_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109955_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109955_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109955_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109955_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109955_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109955_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109955_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109955_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109955_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109955_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109955_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109955_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109955_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109955_total_iter /
                (ctx->futhark_mc_segmap_parloop_109955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109955_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109955_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109955_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_109979   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_109979_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109979_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109979_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109979_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109979_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109979_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_109979_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_109979_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_109979_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_109979_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_109981   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_109981_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109981_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109981_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109981_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109981_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109981_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_109981_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_109981_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_109981_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_109981_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_109976           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_109976_runs[i],
                    (long) ctx->futhark_mc_segscan_task_109976_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109976_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109976_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_109976_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_109976_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_109976_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_109976_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_109976_iter[i],
                    (long) ctx->futhark_mc_segscan_task_109976_iter[i] /
                    (ctx->futhark_mc_segscan_task_109976_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_109976_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109985         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109985_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109985_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109985_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109985_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109985_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109985_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109985_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109985_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109985_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109985_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109985_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109985_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109985_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109985_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109985_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109985_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109985_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109985_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109985_total_iter /
                (ctx->futhark_mc_segmap_parloop_109985_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109985_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109985_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109985_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109983            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109983_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109983_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109983_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109983_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109983_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109983_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109983_iter[i] /
                    (ctx->futhark_mc_segmap_task_109983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109983_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109989         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109989_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109989_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109989_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109989_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109989_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109989_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109989_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109989_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109989_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109989_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109989_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109989_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109989_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109989_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109989_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109989_total_iter /
                (ctx->futhark_mc_segmap_parloop_109989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109989_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109989_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109989_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109987            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109987_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109987_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109987_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109987_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109987_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109987_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109987_iter[i] /
                    (ctx->futhark_mc_segmap_task_109987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109987_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109993         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109993_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109993_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109993_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109993_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109993_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109993_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109993_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109993_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109993_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109993_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109993_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109993_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109993_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109993_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109993_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109993_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109993_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109993_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109993_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109993_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109993_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109993_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109993_total_iter /
                (ctx->futhark_mc_segmap_parloop_109993_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109993_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109993_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109993_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109991            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109991_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109991_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109991_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109991_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109991_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109991_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109991_iter[i] /
                    (ctx->futhark_mc_segmap_task_109991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109991_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109997         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109997_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109997_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109997_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109997_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109997_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109997_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109997_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109997_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109997_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109997_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109997_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109997_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109997_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109997_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109997_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109997_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109997_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109997_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109997_total_iter /
                (ctx->futhark_mc_segmap_parloop_109997_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109997_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109997_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109997_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110011 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110011_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110011_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110011_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110011_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110011_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110011_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110011_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110011_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110011_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110011_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110006            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110006_runs[i],
                    (long) ctx->futhark_mc_segred_task_110006_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110006_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110006_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110006_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110006_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110006_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110006_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110006_iter[i],
                    (long) ctx->futhark_mc_segred_task_110006_iter[i] /
                    (ctx->futhark_mc_segred_task_110006_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110006_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110017 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110017_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110017_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110017_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110017_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110017_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110017_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110017_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110017_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110017_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110017_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110013            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110013_runs[i],
                    (long) ctx->futhark_mc_segred_task_110013_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110013_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110013_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110013_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110013_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110013_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110013_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110013_iter[i],
                    (long) ctx->futhark_mc_segred_task_110013_iter[i] /
                    (ctx->futhark_mc_segred_task_110013_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110013_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110002         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110002_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110002_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110002_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110002_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110002_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110002_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110002_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110002_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110002_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110002_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110002_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110002_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110002_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110002_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110002_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110002_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110002_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110002_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110002_total_iter /
                (ctx->futhark_mc_segmap_parloop_110002_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110002_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110002_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110002_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109995            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109995_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109995_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109995_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109995_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109995_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109995_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109995_iter[i] /
                    (ctx->futhark_mc_segmap_task_109995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109995_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110000     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110000_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110000_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110000_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110000_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110000_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110000_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110000_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110000_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110000_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110000_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110000_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110000_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_109967         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_109967_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_109967_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109967_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109967_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_109967_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_109967_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_109967_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109967_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_109967_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_109967_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_109967_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_109967_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_109967_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_109967_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_109967_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109967_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109967_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_109967_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_109967_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_109967_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_109967_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_109967_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_109967_total_iter /
                (ctx->futhark_mc_segmap_parloop_109967_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_109967_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_109967_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_109967_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_109953            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_109953_runs[i],
                    (long) ctx->futhark_mc_segmap_task_109953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109953_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_109953_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_109953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_109953_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_109953_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_109953_iter[i],
                    (long) ctx->futhark_mc_segmap_task_109953_iter[i] /
                    (ctx->futhark_mc_segmap_task_109953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_109953_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_109965     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_109965_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109965_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109965_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109965_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_109965_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_109965_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_109965_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_109965_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_109965_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_109965_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_109965_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_109965_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110021         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110021_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110021_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110021_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110021_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110021_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110021_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110021_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110021_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110021_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110021_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110021_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110021_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110021_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110021_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110021_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110021_total_iter /
                (ctx->futhark_mc_segmap_parloop_110021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110021_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110021_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110021_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_110047   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_110047_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110047_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110047_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110047_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110047_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110047_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110047_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110047_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110047_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_110047_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_110049   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_110049_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110049_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110049_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110049_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110049_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110049_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110049_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110049_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110049_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_110049_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_110044           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_110044_runs[i],
                    (long) ctx->futhark_mc_segscan_task_110044_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110044_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110044_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_110044_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_110044_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110044_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_110044_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_110044_iter[i],
                    (long) ctx->futhark_mc_segscan_task_110044_iter[i] /
                    (ctx->futhark_mc_segscan_task_110044_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110044_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110053         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110053_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110053_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110053_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110053_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110053_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110053_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110053_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110053_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110053_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110053_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110053_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110053_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110053_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110053_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110053_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110053_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110053_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110053_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110053_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110053_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110053_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110053_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110053_total_iter /
                (ctx->futhark_mc_segmap_parloop_110053_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110053_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110053_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110053_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110051            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110051_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110051_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110051_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110051_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110051_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110051_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110051_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110051_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110051_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110051_iter[i] /
                    (ctx->futhark_mc_segmap_task_110051_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110051_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110057         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110057_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110057_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110057_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110057_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110057_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110057_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110057_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110057_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110057_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110057_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110057_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110057_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110057_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110057_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110057_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110057_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110057_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110057_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110057_total_iter /
                (ctx->futhark_mc_segmap_parloop_110057_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110057_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110057_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110057_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110055            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110055_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110055_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110055_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110055_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110055_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110055_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110055_iter[i] /
                    (ctx->futhark_mc_segmap_task_110055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110055_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110061         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110061_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110061_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110061_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110061_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110061_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110061_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110061_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110061_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110061_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110061_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110061_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110061_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110061_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110061_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110061_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110061_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110061_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110061_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110061_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110061_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110061_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110061_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110061_total_iter /
                (ctx->futhark_mc_segmap_parloop_110061_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110061_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110061_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110061_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110059            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110059_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110059_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110059_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110059_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110059_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110059_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110059_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110059_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110059_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110059_iter[i] /
                    (ctx->futhark_mc_segmap_task_110059_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110059_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110065         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110065_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110065_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110065_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110065_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110065_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110065_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110065_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110065_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110065_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110065_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110065_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110065_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110065_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110065_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110065_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110065_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110065_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110065_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110065_total_iter /
                (ctx->futhark_mc_segmap_parloop_110065_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110065_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110065_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110065_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110080         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110080_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110080_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110080_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110080_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110080_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110080_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110080_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110080_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110080_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110080_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110080_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110080_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110080_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110080_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110080_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110080_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110080_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110080_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110080_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110080_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110080_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110080_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110080_total_iter /
                (ctx->futhark_mc_segmap_parloop_110080_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110080_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110080_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110080_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110078            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110078_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110078_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110078_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110078_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110078_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110078_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110078_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110078_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110078_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110078_iter[i] /
                    (ctx->futhark_mc_segmap_task_110078_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110078_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110089 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110089_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110089_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110089_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110089_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110089_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110089_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110089_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110089_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110089_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110089_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110082            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110082_runs[i],
                    (long) ctx->futhark_mc_segred_task_110082_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110082_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110082_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110082_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110082_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110082_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110082_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110082_iter[i],
                    (long) ctx->futhark_mc_segred_task_110082_iter[i] /
                    (ctx->futhark_mc_segred_task_110082_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110082_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110095 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110095_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110095_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110095_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110095_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110095_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110095_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110095_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110095_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110095_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110095_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110091            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110091_runs[i],
                    (long) ctx->futhark_mc_segred_task_110091_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110091_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110091_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110091_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110091_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110091_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110091_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110091_iter[i],
                    (long) ctx->futhark_mc_segred_task_110091_iter[i] /
                    (ctx->futhark_mc_segred_task_110091_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110091_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110072         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110072_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110072_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110072_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110072_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110072_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110072_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110072_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110072_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110072_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110072_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110072_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110072_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110072_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110072_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110072_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110072_total_iter /
                (ctx->futhark_mc_segmap_parloop_110072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110072_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110072_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110072_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110063            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110063_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110063_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110063_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110063_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110063_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110063_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110063_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110063_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110063_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110063_iter[i] /
                    (ctx->futhark_mc_segmap_task_110063_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110063_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110070     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110070_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110070_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110070_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110070_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110070_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110070_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110070_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110070_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110035         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110035_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110035_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110035_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110035_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110035_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110035_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110035_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110035_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110035_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110035_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110035_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110035_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110035_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110035_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110035_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110035_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110035_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110035_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110035_total_iter /
                (ctx->futhark_mc_segmap_parloop_110035_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110035_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110035_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110035_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110019            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110019_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110019_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110019_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110019_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110019_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110019_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110019_iter[i] /
                    (ctx->futhark_mc_segmap_task_110019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110019_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110033     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110033_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110033_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110033_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110033_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110033_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110033_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110033_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110033_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110099         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110099_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110099_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110099_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110099_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110099_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110099_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110099_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110099_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110099_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110099_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110099_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110099_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110099_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110099_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110099_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110099_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110099_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110099_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110099_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110099_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110099_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110099_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110099_total_iter /
                (ctx->futhark_mc_segmap_parloop_110099_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110099_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110099_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110099_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_110119   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_110119_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110119_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110119_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110119_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110119_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110119_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110119_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110119_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110119_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_110119_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_110121   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_110121_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110121_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110121_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110121_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110121_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110121_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110121_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110121_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110121_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_110121_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_110116           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_110116_runs[i],
                    (long) ctx->futhark_mc_segscan_task_110116_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110116_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110116_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_110116_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_110116_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110116_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_110116_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_110116_iter[i],
                    (long) ctx->futhark_mc_segscan_task_110116_iter[i] /
                    (ctx->futhark_mc_segscan_task_110116_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110116_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110125         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110125_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110125_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110125_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110125_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110125_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110125_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110125_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110125_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110125_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110125_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110125_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110125_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110125_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110125_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110125_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110125_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110125_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110125_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110125_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110125_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110125_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110125_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110125_total_iter /
                (ctx->futhark_mc_segmap_parloop_110125_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110125_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110125_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110125_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110123            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110123_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110123_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110123_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110123_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110123_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110123_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110123_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110123_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110123_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110123_iter[i] /
                    (ctx->futhark_mc_segmap_task_110123_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110123_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110129         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110129_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110129_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110129_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110129_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110129_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110129_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110129_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110129_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110129_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110129_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110129_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110129_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110129_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110129_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110129_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110129_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110129_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110129_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110129_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110129_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110129_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110129_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110129_total_iter /
                (ctx->futhark_mc_segmap_parloop_110129_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110129_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110129_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110129_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110127            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110127_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110127_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110127_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110127_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110127_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110127_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110127_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110127_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110127_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110127_iter[i] /
                    (ctx->futhark_mc_segmap_task_110127_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110127_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110133         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110133_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110133_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110133_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110133_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110133_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110133_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110133_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110133_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110133_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110133_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110133_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110133_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110133_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110133_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110133_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110133_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110133_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110133_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110133_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110133_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110133_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110133_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110133_total_iter /
                (ctx->futhark_mc_segmap_parloop_110133_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110133_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110133_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110133_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110131            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110131_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110131_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110131_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110131_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110131_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110131_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110131_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110131_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110131_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110131_iter[i] /
                    (ctx->futhark_mc_segmap_task_110131_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110131_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110137         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110137_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110137_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110137_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110137_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110137_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110137_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110137_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110137_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110137_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110137_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110137_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110137_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110137_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110137_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110137_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110137_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110137_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110137_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110137_total_iter /
                (ctx->futhark_mc_segmap_parloop_110137_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110137_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110137_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110137_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110145 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110145_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110145_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110145_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110145_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110145_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110145_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110145_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110145_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110145_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110145_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110142            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110142_runs[i],
                    (long) ctx->futhark_mc_segred_task_110142_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110142_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110142_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110142_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110142_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110142_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110142_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110142_iter[i],
                    (long) ctx->futhark_mc_segred_task_110142_iter[i] /
                    (ctx->futhark_mc_segred_task_110142_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110142_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110150 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110150_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110150_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110150_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110150_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110150_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110150_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110150_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110150_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110150_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110150_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110147            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110147_runs[i],
                    (long) ctx->futhark_mc_segred_task_110147_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110147_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110147_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110147_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110147_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110147_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110147_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110147_iter[i],
                    (long) ctx->futhark_mc_segred_task_110147_iter[i] /
                    (ctx->futhark_mc_segred_task_110147_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110147_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110140         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110140_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110140_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110140_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110140_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110140_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110140_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110140_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110140_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110140_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110140_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110140_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110140_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110140_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110140_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110140_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110140_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110140_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110140_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110140_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110140_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110140_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110140_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110140_total_iter /
                (ctx->futhark_mc_segmap_parloop_110140_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110140_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110140_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110140_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110135            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110135_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110135_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110135_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110135_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110135_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110135_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110135_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110135_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110135_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110135_iter[i] /
                    (ctx->futhark_mc_segmap_task_110135_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110135_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110138     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110138_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110138_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110138_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110138_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110138_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110138_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110138_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110138_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110138_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110138_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110138_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110138_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110108         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110108_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110108_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110108_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110108_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110108_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110108_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110108_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110108_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110108_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110108_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110108_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110108_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110108_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110108_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110108_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110108_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110108_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110108_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110108_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110108_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110108_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110108_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110108_total_iter /
                (ctx->futhark_mc_segmap_parloop_110108_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110108_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110108_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110108_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110097            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110097_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110097_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110097_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110097_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110097_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110097_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110097_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110097_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110097_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110097_iter[i] /
                    (ctx->futhark_mc_segmap_task_110097_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110097_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110106     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110106_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110106_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110106_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110106_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110106_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110106_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110106_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110106_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110106_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110106_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110106_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110106_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110154         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110154_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110154_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110154_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110154_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110154_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110154_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110154_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110154_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110154_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110154_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110154_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110154_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110154_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110154_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110154_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110154_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110154_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110154_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110154_total_iter /
                (ctx->futhark_mc_segmap_parloop_110154_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110154_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110154_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110154_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_110176   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_110176_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110176_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110176_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110176_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110176_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110176_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110176_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110176_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110176_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_110176_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_110178   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_110178_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110178_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110178_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110178_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110178_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110178_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110178_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110178_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110178_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_110178_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_110173           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_110173_runs[i],
                    (long) ctx->futhark_mc_segscan_task_110173_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110173_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110173_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_110173_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_110173_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110173_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_110173_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_110173_iter[i],
                    (long) ctx->futhark_mc_segscan_task_110173_iter[i] /
                    (ctx->futhark_mc_segscan_task_110173_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110173_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110182         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110182_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110182_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110182_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110182_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110182_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110182_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110182_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110182_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110182_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110182_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110182_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110182_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110182_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110182_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110182_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110182_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110182_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110182_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110182_total_iter /
                (ctx->futhark_mc_segmap_parloop_110182_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110182_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110182_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110182_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110180            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110180_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110180_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110180_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110180_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110180_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110180_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110180_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110180_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110180_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110180_iter[i] /
                    (ctx->futhark_mc_segmap_task_110180_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110180_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110186         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110186_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110186_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110186_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110186_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110186_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110186_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110186_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110186_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110186_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110186_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110186_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110186_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110186_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110186_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110186_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110186_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110186_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110186_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110186_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110186_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110186_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110186_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110186_total_iter /
                (ctx->futhark_mc_segmap_parloop_110186_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110186_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110186_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110186_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110184            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110184_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110184_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110184_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110184_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110184_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110184_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110184_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110184_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110184_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110184_iter[i] /
                    (ctx->futhark_mc_segmap_task_110184_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110184_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110190         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110190_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110190_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110190_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110190_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110190_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110190_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110190_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110190_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110190_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110190_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110190_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110190_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110190_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110190_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110190_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110190_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110190_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110190_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110190_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110190_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110190_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110190_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110190_total_iter /
                (ctx->futhark_mc_segmap_parloop_110190_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110190_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110190_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110190_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110188            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110188_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110188_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110188_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110188_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110188_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110188_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110188_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110188_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110188_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110188_iter[i] /
                    (ctx->futhark_mc_segmap_task_110188_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110188_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110194         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110194_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110194_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110194_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110194_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110194_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110194_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110194_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110194_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110194_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110194_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110194_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110194_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110194_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110194_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110194_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110194_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110194_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110194_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110194_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110194_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110194_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110194_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110194_total_iter /
                (ctx->futhark_mc_segmap_parloop_110194_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110194_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110194_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110194_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110204 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110204_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110204_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110204_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110204_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110204_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110204_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110204_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110204_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110204_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110204_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110199            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110199_runs[i],
                    (long) ctx->futhark_mc_segred_task_110199_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110199_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110199_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110199_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110199_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110199_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110199_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110199_iter[i],
                    (long) ctx->futhark_mc_segred_task_110199_iter[i] /
                    (ctx->futhark_mc_segred_task_110199_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110199_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110210 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110210_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110210_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110210_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110210_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110210_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110210_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110210_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110210_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110210_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110210_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110206            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110206_runs[i],
                    (long) ctx->futhark_mc_segred_task_110206_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110206_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110206_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110206_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110206_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110206_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110206_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110206_iter[i],
                    (long) ctx->futhark_mc_segred_task_110206_iter[i] /
                    (ctx->futhark_mc_segred_task_110206_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110206_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110197         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110197_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110197_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110197_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110197_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110197_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110197_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110197_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110197_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110197_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110197_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110197_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110197_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110197_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110197_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110197_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110197_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110197_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110197_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110197_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110197_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110197_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110197_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110197_total_iter /
                (ctx->futhark_mc_segmap_parloop_110197_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110197_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110197_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110197_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110192            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110192_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110192_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110192_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110192_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110192_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110192_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110192_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110192_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110192_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110192_iter[i] /
                    (ctx->futhark_mc_segmap_task_110192_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110192_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110195     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110195_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110195_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110195_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110195_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110195_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110195_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110195_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110195_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110195_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110195_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110195_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110195_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110164         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110164_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110164_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110164_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110164_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110164_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110164_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110164_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110164_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110164_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110164_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110164_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110164_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110164_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110164_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110164_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110164_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110164_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110164_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110164_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110164_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110164_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110164_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110164_total_iter /
                (ctx->futhark_mc_segmap_parloop_110164_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110164_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110164_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110164_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110152            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110152_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110152_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110152_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110152_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110152_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110152_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110152_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110152_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110152_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110152_iter[i] /
                    (ctx->futhark_mc_segmap_task_110152_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110152_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110162     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110162_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110162_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110162_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110162_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110162_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110162_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110162_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110162_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110162_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110162_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110162_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110162_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110214         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110214_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110214_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110214_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110214_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110214_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110214_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110214_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110214_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110214_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110214_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110214_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110214_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110214_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110214_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110214_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110214_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110214_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110214_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110214_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110214_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110214_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110214_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110214_total_iter /
                (ctx->futhark_mc_segmap_parloop_110214_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110214_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110214_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110214_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_110236   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_110236_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110236_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110236_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110236_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110236_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110236_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_110236_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_110236_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_110236_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_110236_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_110238   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_110238_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110238_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110238_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110238_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110238_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110238_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_110238_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_110238_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_110238_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_110238_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_110233           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_110233_runs[i],
                    (long) ctx->futhark_mc_segscan_task_110233_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110233_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110233_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_110233_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_110233_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_110233_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_110233_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_110233_iter[i],
                    (long) ctx->futhark_mc_segscan_task_110233_iter[i] /
                    (ctx->futhark_mc_segscan_task_110233_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_110233_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110242         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110242_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110242_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110242_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110242_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110242_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110242_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110242_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110242_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110242_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110242_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110242_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110242_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110242_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110242_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110242_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110242_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110242_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110242_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110242_total_iter /
                (ctx->futhark_mc_segmap_parloop_110242_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110242_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110242_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110242_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110240            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110240_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110240_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110240_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110240_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110240_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110240_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110240_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110240_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110240_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110240_iter[i] /
                    (ctx->futhark_mc_segmap_task_110240_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110240_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110246         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110246_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110246_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110246_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110246_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110246_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110246_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110246_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110246_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110246_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110246_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110246_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110246_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110246_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110246_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110246_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110246_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110246_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110246_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110246_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110246_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110246_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110246_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110246_total_iter /
                (ctx->futhark_mc_segmap_parloop_110246_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110246_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110246_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110246_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110244            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110244_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110244_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110244_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110244_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110244_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110244_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110244_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110244_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110244_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110244_iter[i] /
                    (ctx->futhark_mc_segmap_task_110244_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110244_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110250         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110250_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110250_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110250_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110250_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110250_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110250_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110250_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110250_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110250_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110250_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110250_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110250_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110250_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110250_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110250_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110250_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110250_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110250_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110250_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110250_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110250_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110250_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110250_total_iter /
                (ctx->futhark_mc_segmap_parloop_110250_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110250_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110250_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110250_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110248            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110248_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110248_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110248_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110248_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110248_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110248_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110248_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110248_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110248_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110248_iter[i] /
                    (ctx->futhark_mc_segmap_task_110248_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110248_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110254         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110254_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110254_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110254_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110254_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110254_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110254_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110254_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110254_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110254_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110254_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110254_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110254_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110254_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110254_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110254_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110254_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110254_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110254_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110254_total_iter /
                (ctx->futhark_mc_segmap_parloop_110254_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110254_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110254_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110254_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110266 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110266_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110266_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110266_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110266_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110266_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110266_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110266_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110266_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110266_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110266_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110259            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110259_runs[i],
                    (long) ctx->futhark_mc_segred_task_110259_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110259_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110259_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110259_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110259_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110259_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110259_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110259_iter[i],
                    (long) ctx->futhark_mc_segred_task_110259_iter[i] /
                    (ctx->futhark_mc_segred_task_110259_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110259_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_110272 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_110272_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110272_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110272_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110272_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110272_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110272_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_110272_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_110272_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_110272_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_110272_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_110268            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_110268_runs[i],
                    (long) ctx->futhark_mc_segred_task_110268_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110268_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110268_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_110268_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_110268_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_110268_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_110268_iter[i]),
                    (long) ctx->futhark_mc_segred_task_110268_iter[i],
                    (long) ctx->futhark_mc_segred_task_110268_iter[i] /
                    (ctx->futhark_mc_segred_task_110268_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_110268_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110257         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110257_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110257_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110257_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110257_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110257_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110257_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110257_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110257_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110257_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110257_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110257_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110257_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110257_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110257_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110257_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110257_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110257_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110257_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110257_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110257_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110257_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110257_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110257_total_iter /
                (ctx->futhark_mc_segmap_parloop_110257_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110257_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110257_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110257_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110252            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110252_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110252_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110252_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110252_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110252_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110252_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110252_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110252_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110252_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110252_iter[i] /
                    (ctx->futhark_mc_segmap_task_110252_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110252_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110255     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110255_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110255_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110255_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110255_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110255_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110255_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110255_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110255_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110255_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110255_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110255_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110255_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110224         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110224_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110224_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110224_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110224_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110224_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110224_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110224_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110224_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110224_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110224_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110224_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110224_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110224_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110224_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110224_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110224_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110224_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110224_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110224_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110224_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110224_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110224_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110224_total_iter /
                (ctx->futhark_mc_segmap_parloop_110224_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110224_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110224_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110224_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110212            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110212_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110212_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110212_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110212_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110212_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110212_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110212_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110212_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110212_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110212_iter[i] /
                    (ctx->futhark_mc_segmap_task_110212_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110212_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110222     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110222_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110222_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110222_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110222_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110222_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110222_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110222_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110222_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110222_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110222_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110222_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110222_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110276         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110276_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110276_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110276_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110276_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110276_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110276_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110276_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110276_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110276_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110276_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110276_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110276_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110276_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110276_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110276_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110276_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110276_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110276_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110276_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110276_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110276_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110276_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110276_total_iter /
                (ctx->futhark_mc_segmap_parloop_110276_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110276_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110276_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110276_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110285         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110285_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110285_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110285_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110285_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110285_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110285_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110285_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110285_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110285_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110285_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110285_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110285_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110285_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110285_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110285_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110285_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110285_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110285_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110285_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110285_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110285_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110285_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110285_total_iter /
                (ctx->futhark_mc_segmap_parloop_110285_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110285_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110285_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110285_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110283            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110283_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110283_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110283_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110283_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110283_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110283_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110283_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110283_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110283_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110283_iter[i] /
                    (ctx->futhark_mc_segmap_task_110283_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110283_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_110280         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_110280_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_110280_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110280_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110280_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_110280_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_110280_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_110280_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110280_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_110280_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_110280_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_110280_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_110280_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_110280_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_110280_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_110280_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110280_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110280_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_110280_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_110280_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_110280_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_110280_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_110280_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_110280_total_iter /
                (ctx->futhark_mc_segmap_parloop_110280_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_110280_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_110280_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_110280_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_110274            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_110274_runs[i],
                    (long) ctx->futhark_mc_segmap_task_110274_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110274_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110274_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_110274_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_110274_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_110274_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_110274_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_110274_iter[i],
                    (long) ctx->futhark_mc_segmap_task_110274_iter[i] /
                    (ctx->futhark_mc_segmap_task_110274_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_110274_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_110278     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_110278_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110278_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110278_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110278_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_110278_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_110278_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_110278_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_110278_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_110278_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_110278_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_110278_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_110278_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_109716,
                             struct memblock Y_mem_100186, int64_t m_92398,
                             int64_t n_92399, int64_t q_92401,
                             int64_t degree_92402, int64_t jump_92403,
                             int64_t jump_threshold_1_92404,
                             int64_t jump_threshold_2_92405,
                             int64_t q_threshold_1_92406,
                             int64_t q_threshold_2_92407);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_109717 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100192;
    int64_t free_bytes_100204;
    int64_t free_bytes_100207;
    unsigned char *free_mem_100302;
};
struct futhark_mc_segmap_parloop_struct_109719 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100192;
    int64_t free_bytes_100204;
    int64_t free_bytes_100207;
    unsigned char *free_mem_100302;
};
static int futhark_mc_segmap_parloop_109720(void *args, int64_t start,
                                            int64_t end, int flat_tid_94380,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109719
    *futhark_mc_segmap_parloop_struct_109719 =
    (struct futhark_mc_segmap_parloop_struct_109719 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109719->ctx;
    uint64_t futhark_mc_segmap_parloop_109720_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109720_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109719->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109719->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109719->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109719->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109719->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109719->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109719->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109719->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109719->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109719->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109719->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100192 =
            futhark_mc_segmap_parloop_struct_109719->free_bytes_100192;
    int64_t bytes_100204 =
            futhark_mc_segmap_parloop_struct_109719->free_bytes_100204;
    int64_t bytes_100207 =
            futhark_mc_segmap_parloop_struct_109719->free_bytes_100207;
    struct memblock mem_100302 = {.desc ="mem_100302", .mem =
                                  futhark_mc_segmap_parloop_struct_109719->free_mem_100302,
                                  .size =0, .references =NULL};
    size_t mem_100211_cached_sizze_109721 = 0;
    unsigned char *mem_100211 = NULL;
    size_t mem_100226_cached_sizze_109722 = 0;
    unsigned char *mem_100226 = NULL;
    size_t mem_100229_cached_sizze_109723 = 0;
    unsigned char *mem_100229 = NULL;
    size_t mem_100256_cached_sizze_109724 = 0;
    unsigned char *mem_100256 = NULL;
    size_t mem_100271_cached_sizze_109725 = 0;
    unsigned char *mem_100271 = NULL;
    size_t mem_100286_cached_sizze_109726 = 0;
    unsigned char *mem_100286 = NULL;
    int64_t iterations = end - start;
    int64_t iter_101629 = start;
    
    if (mem_100211_cached_sizze_109721 < (size_t) bytes_100192) {
        mem_100211 = realloc(mem_100211, bytes_100192);
        mem_100211_cached_sizze_109721 = bytes_100192;
    }
    if (mem_100226_cached_sizze_109722 < (size_t) bytes_100192) {
        mem_100226 = realloc(mem_100226, bytes_100192);
        mem_100226_cached_sizze_109722 = bytes_100192;
    }
    if (mem_100229_cached_sizze_109723 < (size_t) bytes_100192) {
        mem_100229 = realloc(mem_100229, bytes_100192);
        mem_100229_cached_sizze_109723 = bytes_100192;
    }
    if (mem_100256_cached_sizze_109724 < (size_t) bytes_100192) {
        mem_100256 = realloc(mem_100256, bytes_100192);
        mem_100256_cached_sizze_109724 = bytes_100192;
    }
    if (mem_100271_cached_sizze_109725 < (size_t) bytes_100204) {
        mem_100271 = realloc(mem_100271, bytes_100204);
        mem_100271_cached_sizze_109725 = bytes_100204;
    }
    if (mem_100286_cached_sizze_109726 < (size_t) bytes_100207) {
        mem_100286 = realloc(mem_100286, bytes_100207);
        mem_100286_cached_sizze_109726 = bytes_100207;
    }
    for (; iter_101629 < end; iter_101629++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_101796 = m_92398;
        int64_t gtid_94381 = iter_101629;
        int64_t remnant_101797 = iter_101629 - gtid_94381;
        int64_t discard_99629;
        int64_t scanacc_101631 = (int64_t) 0;
        
        for (int64_t i_101630 = 0; i_101630 < n_92399; i_101630++) {
            double x_101633;
            
            x_101633 = ((double *) Y_mem_100186.mem)[gtid_94381 * n_92399 +
                                                     i_101630];
            
            bool isnan_res_101634;
            
            isnan_res_101634 = futrts_isnan64(x_101633);
            
            bool defunc_0_p_res_101635 = !isnan_res_101634;
            int64_t defunc_0_f_res_101636 =
                    btoi_bool_i64(defunc_0_p_res_101635);
            int64_t defunc_1_op_res_101637 = add64(defunc_0_f_res_101636,
                                                   scanacc_101631);
            
            ((int64_t *) mem_100211)[i_101630] = defunc_1_op_res_101637;
            
            int64_t scanacc_tmp_101798 = defunc_1_op_res_101637;
            
            scanacc_101631 = scanacc_tmp_101798;
        }
        discard_99629 = scanacc_101631;
        
        int64_t last_res_92452;
        
        last_res_92452 = ((int64_t *) mem_100211)[i_92415];
        for (int64_t i_101800 = 0; i_101800 < n_92399; i_101800++) {
            ((double *) mem_100226)[i_101800] = 0.0;
        }
        for (int64_t i_101801 = 0; i_101801 < n_92399; i_101801++) {
            ((int64_t *) mem_100229)[i_101801] = (int64_t) -1;
        }
        for (int64_t write_iter_101639 = 0; write_iter_101639 < n_92399;
             write_iter_101639++) {
            double write_iv_101642;
            
            write_iv_101642 = ((double *) Y_mem_100186.mem)[gtid_94381 *
                                                            n_92399 +
                                                            write_iter_101639];
            
            bool isnan_res_101643;
            
            isnan_res_101643 = futrts_isnan64(write_iv_101642);
            
            bool defunc_0_p_res_101644 = !isnan_res_101643;
            int64_t defunc_1_f_res_101645;
            
            if (defunc_0_p_res_101644) {
                int64_t write_iv_101646;
                
                write_iv_101646 = ((int64_t *) mem_100211)[write_iter_101639];
                
                int64_t defunc_1_f_res_t_res_101647 = sub64(write_iv_101646,
                                                            (int64_t) 1);
                
                defunc_1_f_res_101645 = defunc_1_f_res_t_res_101647;
            } else {
                defunc_1_f_res_101645 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_101645) &&
                slt64(defunc_1_f_res_101645, n_92399)) {
                ((int64_t *) mem_100229)[defunc_1_f_res_101645] =
                    write_iter_101639;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_101645) &&
                slt64(defunc_1_f_res_101645, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_100226 + defunc_1_f_res_101645 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_94381 * n_92399 +
                                                write_iter_101639) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_101651 = 0; i_101651 < n_92399; i_101651++) {
            int64_t x_101653;
            
            x_101653 = ((int64_t *) mem_100229)[i_101651];
            
            int64_t defunc_0_f_res_101654 = add64((int64_t) 1, x_101653);
            
            ((int64_t *) mem_100256)[i_101651] = defunc_0_f_res_101654;
        }
        
        int64_t min_arg_92467 = sub64(last_res_92452, (int64_t) 1);
        int64_t min_arg_92468 = sub64(last_res_92452, min_res_92421);
        int64_t min_res_92469 = smin64(q_92401, last_res_92452);
        double i64_res_92470 = sitofp_i64_f64(last_res_92452);
        double x_92471 = i64_res_92427 - i64_res_92470;
        double max_arg_92472 = x_92471 / 2.0;
        double max_res_92473 = fmax64(0.0, max_arg_92472);
        
        for (int64_t i_101656 = 0; i_101656 < q_92401; i_101656++) {
            bool cond_101658 = sle64(last_res_92452, i_101656);
            double defunc_0_f_res_101659;
            
            if (cond_101658) {
                defunc_0_f_res_101659 = 0.0;
            } else {
                defunc_0_f_res_101659 = 1.0;
            }
            ((double *) mem_100271)[i_101656] = defunc_0_f_res_101659;
        }
        for (int64_t i_101661 = 0; i_101661 < n_m_92409; i_101661++) {
            int64_t min_arg_101663 = mul64(jump_92403, i_101661);
            int64_t min_res_101664 = smin64(i_92415, min_arg_101663);
            int64_t defunc_0_g_res_101665 = add64((int64_t) 1, min_res_101664);
            bool init_idx_101666;
            int64_t init_idx_101667;
            int64_t init_idx_101668;
            bool loop_while_101669;
            int64_t low_101670;
            int64_t high_101671;
            
            loop_while_101669 = x_92416;
            low_101670 = (int64_t) 0;
            high_101671 = i_92415;
            while (loop_while_101669) {
                int64_t x_101672 = add64(low_101670, high_101671);
                int64_t mid_101673 = sdiv64(x_101672, (int64_t) 2);
                bool x_101674 = sle64((int64_t) 0, mid_101673);
                bool y_101675 = slt64(mid_101673, n_92399);
                bool bounds_check_101676 = x_101674 && y_101675;
                bool index_certs_101677;
                
                if (!bounds_check_101676) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_101673,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_101678;
                
                mid_id_101678 = ((int64_t *) mem_100256)[mid_101673];
                
                bool cond_101679 = slt64(mid_id_101678, (int64_t) 0);
                int64_t mid_idx_101680;
                
                if (cond_101679) {
                    mid_idx_101680 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_101680 = mid_id_101678;
                }
                
                bool cond_101681 = sle64(defunc_0_g_res_101665, mid_idx_101680);
                int64_t loopres_101682;
                int64_t loopres_101683;
                
                if (cond_101681) {
                    int64_t loopres_t_res_101684 = sub64(mid_101673,
                                                         (int64_t) 1);
                    
                    loopres_101682 = low_101670;
                    loopres_101683 = loopres_t_res_101684;
                } else {
                    int64_t loopres_f_res_101685 = add64((int64_t) 1,
                                                         mid_101673);
                    
                    loopres_101682 = loopres_f_res_101685;
                    loopres_101683 = high_101671;
                }
                
                bool loop_cond_101686 = sle64(loopres_101682, loopres_101683);
                bool loop_while_tmp_101807 = loop_cond_101686;
                int64_t low_tmp_101808 = loopres_101682;
                int64_t high_tmp_101809 = loopres_101683;
                
                loop_while_101669 = loop_while_tmp_101807;
                low_101670 = low_tmp_101808;
                high_101671 = high_tmp_101809;
            }
            init_idx_101666 = loop_while_101669;
            init_idx_101667 = low_101670;
            init_idx_101668 = high_101671;
            
            bool idx_101687;
            int64_t idx_101688;
            int64_t idx_101689;
            int64_t idx_101690;
            bool loop_while_101691;
            int64_t l_idx_101692;
            int64_t r_idx_101693;
            int64_t span_101694;
            
            loop_while_101691 = loop_cond_92426;
            l_idx_101692 = init_idx_101667;
            r_idx_101693 = init_idx_101667;
            span_101694 = (int64_t) 1;
            while (loop_while_101691) {
                int64_t max_arg_101695 = sub64(l_idx_101692, (int64_t) 1);
                int64_t max_res_101696 = smax64((int64_t) 0, max_arg_101695);
                int64_t min_arg_101697 = add64((int64_t) 1, r_idx_101693);
                int64_t min_res_101698 = smin64(min_arg_92467, min_arg_101697);
                bool x_101699 = sle64((int64_t) 0, max_res_101696);
                bool y_101700 = slt64(max_res_101696, n_92399);
                bool bounds_check_101701 = x_101699 && y_101700;
                bool index_certs_101702;
                
                if (!bounds_check_101701) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_101696,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_101703;
                
                x_101703 = ((int64_t *) mem_100256)[max_res_101696];
                
                int64_t abs_arg_101704 = sub64(x_101703, defunc_0_g_res_101665);
                int64_t abs_res_101705 = abs64(abs_arg_101704);
                bool x_101706 = sle64((int64_t) 0, min_res_101698);
                bool y_101707 = slt64(min_res_101698, n_92399);
                bool bounds_check_101708 = x_101706 && y_101707;
                bool index_certs_101709;
                
                if (!bounds_check_101708) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_101698,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_101710;
                
                x_101710 = ((int64_t *) mem_100256)[min_res_101698];
                
                int64_t abs_arg_101711 = sub64(x_101710, defunc_0_g_res_101665);
                int64_t abs_res_101712 = abs64(abs_arg_101711);
                bool cond_101713 = max_res_101696 == l_idx_101692;
                int64_t loopres_101714;
                int64_t loopres_101715;
                int64_t loopres_101716;
                
                if (cond_101713) {
                    loopres_101714 = l_idx_101692;
                    loopres_101715 = r_idx_101693;
                    loopres_101716 = min_res_92421;
                } else {
                    bool cond_101717 = slt64(abs_res_101705, abs_res_101712);
                    bool cond_f_res_101718 = min_res_101698 == r_idx_101693;
                    bool x_101719 = !cond_101717;
                    bool y_101720 = cond_f_res_101718 && x_101719;
                    bool cond_101721 = cond_101717 || y_101720;
                    int64_t loopres_f_res_101722;
                    
                    if (cond_101721) {
                        loopres_f_res_101722 = max_res_101696;
                    } else {
                        loopres_f_res_101722 = l_idx_101692;
                    }
                    
                    int64_t loopres_f_res_101723;
                    
                    if (cond_101721) {
                        loopres_f_res_101723 = r_idx_101693;
                    } else {
                        loopres_f_res_101723 = min_res_101698;
                    }
                    
                    int64_t loopres_f_res_101724;
                    
                    if (cond_101721) {
                        int64_t loopres_f_res_t_res_101725 = add64((int64_t) 1,
                                                                   span_101694);
                        
                        loopres_f_res_101724 = loopres_f_res_t_res_101725;
                    } else {
                        int64_t loopres_f_res_f_res_101726 = add64((int64_t) 1,
                                                                   span_101694);
                        
                        loopres_f_res_101724 = loopres_f_res_f_res_101726;
                    }
                    loopres_101714 = loopres_f_res_101722;
                    loopres_101715 = loopres_f_res_101723;
                    loopres_101716 = loopres_f_res_101724;
                }
                
                bool loop_cond_101727 = slt64(loopres_101716, min_res_92421);
                bool loop_while_tmp_101810 = loop_cond_101727;
                int64_t l_idx_tmp_101811 = loopres_101714;
                int64_t r_idx_tmp_101812 = loopres_101715;
                int64_t span_tmp_101813 = loopres_101716;
                
                loop_while_101691 = loop_while_tmp_101810;
                l_idx_101692 = l_idx_tmp_101811;
                r_idx_101693 = r_idx_tmp_101812;
                span_101694 = span_tmp_101813;
            }
            idx_101687 = loop_while_101691;
            idx_101688 = l_idx_101692;
            idx_101689 = r_idx_101693;
            idx_101690 = span_101694;
            
            int64_t min_res_101728 = smin64(min_arg_92468, idx_101688);
            int64_t max_res_101729 = smax64((int64_t) 0, min_res_101728);
            int64_t x_101730 = add64(min_res_92469, max_res_101729);
            int64_t r_101731 = sub64(x_101730, (int64_t) 1);
            bool x_101732 = sle64((int64_t) 0, r_101731);
            bool y_101733 = slt64(r_101731, n_92399);
            bool bounds_check_101734 = x_101732 && y_101733;
            bool index_certs_101735;
            
            if (!bounds_check_101734) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_101731,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_101736;
            
            x_101736 = ((int64_t *) mem_100229)[r_101731];
            
            int64_t abs_arg_101737 = sub64(x_101736, min_res_101664);
            int64_t abs_res_101738 = abs64(abs_arg_101737);
            bool x_101739 = sle64((int64_t) 0, max_res_101729);
            bool y_101740 = slt64(max_res_101729, n_92399);
            bool bounds_check_101741 = x_101739 && y_101740;
            bool index_certs_101742;
            
            if (!bounds_check_101741) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_101729,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_101743;
            
            x_101743 = ((int64_t *) mem_100229)[max_res_101729];
            
            int64_t abs_arg_101744 = sub64(x_101743, min_res_101664);
            int64_t abs_res_101745 = abs64(abs_arg_101744);
            int64_t max_res_101746 = smax64(abs_res_101738, abs_res_101745);
            double defunc_0_f_res_101747 = sitofp_i64_f64(max_res_101746);
            double defunc_1_f_res_101748 = max_res_92473 +
                   defunc_0_f_res_101747;
            double defunc_2_reduce_res_101749;
            double redout_101751 = 0.0;
            
            for (int64_t i_101750 = 0; i_101750 < q_92401; i_101750++) {
                double x_101752;
                
                x_101752 = ((double *) mem_100271)[i_101750];
                
                bool cond_101753 = sle64(last_res_92452, i_101750);
                int64_t defunc_0_f_res_101754;
                
                if (cond_101753) {
                    defunc_0_f_res_101754 = (int64_t) 0;
                } else {
                    int64_t i_101755 = add64(max_res_101729, i_101750);
                    int64_t defunc_0_add_arg_101756;
                    
                    defunc_0_add_arg_101756 =
                        ((int64_t *) mem_100229)[i_101755];
                    
                    int64_t defunc_1_add_res_101757 = add64((int64_t) 1,
                                                            defunc_0_add_arg_101756);
                    
                    defunc_0_f_res_101754 = defunc_1_add_res_101757;
                }
                
                int64_t binop_p_101758 = sub64(defunc_0_f_res_101754,
                                               min_res_101664);
                double defunc_0_f_res_101759 = sitofp_i64_f64(binop_p_101758);
                double abs_res_101760 = fabs(defunc_0_f_res_101759);
                double tmp1_101761 = abs_res_101760 / defunc_1_f_res_101748;
                double x_101762 = tmp1_101761 * tmp1_101761;
                double y_101763 = tmp1_101761 * x_101762;
                double tmp2_101764 = 1.0 - y_101763;
                double x_101765 = tmp2_101764 * tmp2_101764;
                double tmp3_101766 = tmp2_101764 * x_101765;
                double w_j_101767 = x_101752 * tmp3_101766;
                double defunc_1_op_res_101768 = w_j_101767 + redout_101751;
                double redout_tmp_101814 = defunc_1_op_res_101768;
                
                redout_101751 = redout_tmp_101814;
            }
            defunc_2_reduce_res_101749 = redout_101751;
            
            double a0_101769 = 1.0 / defunc_2_reduce_res_101749;
            double defunc_2_reduce_res_101770;
            double redout_101772 = 0.0;
            
            for (int64_t i_101771 = 0; i_101771 < q_92401; i_101771++) {
                double x_101773;
                
                x_101773 = ((double *) mem_100271)[i_101771];
                
                bool cond_101774 = sle64(last_res_92452, i_101771);
                int64_t defunc_0_f_res_101775;
                
                if (cond_101774) {
                    defunc_0_f_res_101775 = (int64_t) 0;
                } else {
                    int64_t i_101776 = add64(max_res_101729, i_101771);
                    int64_t defunc_0_add_arg_101777;
                    
                    defunc_0_add_arg_101777 =
                        ((int64_t *) mem_100229)[i_101776];
                    
                    int64_t defunc_1_add_res_101778 = add64((int64_t) 1,
                                                            defunc_0_add_arg_101777);
                    
                    defunc_0_f_res_101775 = defunc_1_add_res_101778;
                }
                
                int64_t binop_p_101779 = sub64(defunc_0_f_res_101775,
                                               min_res_101664);
                double defunc_0_f_res_101780 = sitofp_i64_f64(binop_p_101779);
                double abs_res_101781 = fabs(defunc_0_f_res_101780);
                double tmp1_101782 = abs_res_101781 / defunc_1_f_res_101748;
                double x_101783 = tmp1_101782 * tmp1_101782;
                double y_101784 = tmp1_101782 * x_101783;
                double tmp2_101785 = 1.0 - y_101784;
                double x_101786 = tmp2_101785 * tmp2_101785;
                double tmp3_101787 = tmp2_101785 * x_101786;
                double tmp4_101788 = x_101773 * tmp3_101787;
                double defunc_0_f_res_101789;
                
                if (cond_101774) {
                    defunc_0_f_res_101789 = 0.0;
                } else {
                    int64_t i_101790 = add64(max_res_101729, i_101771);
                    double defunc_0_add_arg_101791;
                    
                    defunc_0_add_arg_101791 = ((double *) mem_100226)[i_101790];
                    defunc_0_f_res_101789 = defunc_0_add_arg_101791;
                }
                
                double x_101792 = a0_101769 * tmp4_101788;
                double defunc_9_fit_fun_res_101793 = defunc_0_f_res_101789 *
                       x_101792;
                double defunc_1_op_res_101794 = defunc_9_fit_fun_res_101793 +
                       redout_101772;
                double redout_tmp_101815 = defunc_1_op_res_101794;
                
                redout_101772 = redout_tmp_101815;
            }
            defunc_2_reduce_res_101770 = redout_101772;
            ((double *) mem_100286)[i_101661] = defunc_2_reduce_res_101770;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100302.mem + gtid_94381 * n_m_92409 * (int64_t) 8,
                    mem_100286 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100211);
    free(mem_100226);
    free(mem_100229);
    free(mem_100256);
    free(mem_100271);
    free(mem_100286);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109720_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109720_end -
                 futhark_mc_segmap_parloop_109720_start;
        
        ctx->futhark_mc_segmap_parloop_109720_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109720_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109720_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109718(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_94380 = tid;
    int num_tasks_101628 = info.nsubtasks;
    struct futhark_mc_task_109717 *futhark_mc_task_109717 =
                                  (struct futhark_mc_task_109717 *) args;
    struct futhark_context *ctx = futhark_mc_task_109717->ctx;
    uint64_t futhark_mc_segmap_task_109718_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109718_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109717->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109717->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109717->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109717->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109717->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109717->free_i_92415;
    bool x_92416 = futhark_mc_task_109717->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109717->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109717->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109717->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109717->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100192 = futhark_mc_task_109717->free_bytes_100192;
    int64_t bytes_100204 = futhark_mc_task_109717->free_bytes_100204;
    int64_t bytes_100207 = futhark_mc_task_109717->free_bytes_100207;
    struct memblock mem_100302 = {.desc ="mem_100302", .mem =
                                  futhark_mc_task_109717->free_mem_100302,
                                  .size =0, .references =NULL};
    int64_t iter_101629;
    struct futhark_mc_segmap_parloop_struct_109719
    futhark_mc_segmap_parloop_struct_109719;
    
    futhark_mc_segmap_parloop_struct_109719.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109719.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109719.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109719.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109719.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109719.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109719.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109719.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109719.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109719.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109719.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109719.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109719.free_bytes_100192 = bytes_100192;
    futhark_mc_segmap_parloop_struct_109719.free_bytes_100204 = bytes_100204;
    futhark_mc_segmap_parloop_struct_109719.free_bytes_100207 = bytes_100207;
    futhark_mc_segmap_parloop_struct_109719.free_mem_100302 = mem_100302.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109720_task;
    
    futhark_mc_segmap_parloop_109720_task.name =
        "futhark_mc_segmap_parloop_109720";
    futhark_mc_segmap_parloop_109720_task.fn = futhark_mc_segmap_parloop_109720;
    futhark_mc_segmap_parloop_109720_task.args =
        &futhark_mc_segmap_parloop_struct_109719;
    futhark_mc_segmap_parloop_109720_task.iterations = iterations;
    futhark_mc_segmap_parloop_109720_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109720_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109720_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109720_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109720_task);
    
    if (futhark_mc_segmap_parloop_109720_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109720_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109720_total_end -
                 futhark_mc_segmap_parloop_109720_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109720_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109720_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109720_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109718_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109718_end -
                 futhark_mc_segmap_task_109718_start;
        
        ctx->futhark_mc_segmap_task_109718_runs[tid]++;
        ctx->futhark_mc_segmap_task_109718_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109718_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109728 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100192;
    int64_t free_bytes_100204;
    int64_t free_bytes_100207;
    unsigned char *free_mem_100302;
};
struct futhark_mc_task_109736 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_94542;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100193;
};
struct futhark_mc_scan_stage_1_parloop_struct_109739 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_94542;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100193;
};
static int futhark_mc_scan_stage_1_parloop_109740(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_101817, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_109739
    *futhark_mc_scan_stage_1_parloop_struct_109739 =
    (struct futhark_mc_scan_stage_1_parloop_struct_109739 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_109739->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_109740_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109740_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_109739->free_n_92399;
    int64_t gtid_94542 =
            futhark_mc_scan_stage_1_parloop_struct_109739->free_gtid_94542;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_109739->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100193 = {.desc ="mem_100193", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_109739->free_mem_100193,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102117 = start;
    int64_t x_101819;
    int64_t x_101820;
    
    x_101819 = (int64_t) 0;
    for (; iter_102117 < end; iter_102117++) {
        int64_t gtid_101818 = iter_102117;
        
        // stage 1 scan body
        {
            double x_101822;
            
            x_101822 = ((double *) Y_mem_100186.mem)[gtid_94542 * n_92399 +
                                                     gtid_101818];
            
            bool isnan_res_101823;
            
            isnan_res_101823 = futrts_isnan64(x_101822);
            
            bool defunc_0_p_res_101824 = !isnan_res_101823;
            int64_t defunc_0_f_res_101825 =
                    btoi_bool_i64(defunc_0_p_res_101824);
            
            // write mapped values results to memory
            { }
            x_101819 = x_101819;
            // Read next values
            {
                x_101820 = defunc_0_f_res_101825;
            }
            
            int64_t defunc_1_op_res_101821 = add64(x_101819, x_101820);
            
            ((int64_t *) mem_100193.mem)[gtid_101818] = defunc_1_op_res_101821;
            x_101819 = defunc_1_op_res_101821;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109740_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109740_end -
                 futhark_mc_scan_stage_1_parloop_109740_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_109740_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_109740_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_109740_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_109741 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_94542;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100193;
};
static int futhark_mc_scan_stage_3_parloop_109742(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_101817, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_109741
    *futhark_mc_scan_stage_3_parloop_struct_109741 =
    (struct futhark_mc_scan_stage_3_parloop_struct_109741 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_109741->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_109742_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_109742_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_109741->free_n_92399;
    int64_t gtid_94542 =
            futhark_mc_scan_stage_3_parloop_struct_109741->free_gtid_94542;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_109741->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100193 = {.desc ="mem_100193", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_109741->free_mem_100193,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102129 = start;
    int64_t x_102126;
    int64_t x_102127;
    
    if (iter_102129 == (int64_t) 0) {
        x_102126 = (int64_t) 0;
    } else {
        x_102126 = ((int64_t *) mem_100193.mem)[iter_102129 - (int64_t) 1];
    }
    for (; iter_102129 < end; iter_102129++) {
        int64_t gtid_101818 = iter_102129;
        
        // stage 3 scan body
        {
            double x_101822;
            
            x_101822 = ((double *) Y_mem_100186.mem)[gtid_94542 * n_92399 +
                                                     gtid_101818];
            
            bool isnan_res_101823;
            
            isnan_res_101823 = futrts_isnan64(x_101822);
            
            bool defunc_0_p_res_101824 = !isnan_res_101823;
            int64_t defunc_0_f_res_101825 =
                    btoi_bool_i64(defunc_0_p_res_101824);
            
            x_102126 = x_102126;
            x_102127 = defunc_0_f_res_101825;
            
            int64_t defunc_1_op_res_102128 = add64(x_102126, x_102127);
            
            ((int64_t *) mem_100193.mem)[gtid_101818] = defunc_1_op_res_102128;
            x_102126 = defunc_1_op_res_102128;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_109742_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_109742_end -
                 futhark_mc_scan_stage_3_parloop_109742_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_109742_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_109742_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_109742_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_109737(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101817 = tid;
    int num_tasks_102116 = info.nsubtasks;
    struct futhark_mc_task_109736 *futhark_mc_task_109736 =
                                  (struct futhark_mc_task_109736 *) args;
    struct futhark_context *ctx = futhark_mc_task_109736->ctx;
    uint64_t futhark_mc_segscan_task_109737_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_109737_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109736->free_n_92399;
    int64_t gtid_94542 = futhark_mc_task_109736->free_gtid_94542;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109736->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100193 = {.desc ="mem_100193", .mem =
                                  futhark_mc_task_109736->free_mem_100193,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_102123_cached_sizze_109738 = 0;
    unsigned char *scan_stage_2_accum_mem_102123 = NULL;
    int64_t iter_102117;
    struct futhark_mc_scan_stage_1_parloop_struct_109739
    futhark_mc_scan_stage_1_parloop_struct_109739;
    
    futhark_mc_scan_stage_1_parloop_struct_109739.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_109739.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_109739.free_gtid_94542 = gtid_94542;
    futhark_mc_scan_stage_1_parloop_struct_109739.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_109739.free_mem_100193 =
        mem_100193.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_109740_task;
    
    futhark_mc_scan_stage_1_parloop_109740_task.name =
        "futhark_mc_scan_stage_1_parloop_109740";
    futhark_mc_scan_stage_1_parloop_109740_task.fn =
        futhark_mc_scan_stage_1_parloop_109740;
    futhark_mc_scan_stage_1_parloop_109740_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_109739;
    futhark_mc_scan_stage_1_parloop_109740_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_109740_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_109740_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109740_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_109740_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_109740_task);
    
    if (futhark_mc_scan_stage_1_parloop_109740_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109740_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109740_total_end -
                 futhark_mc_scan_stage_1_parloop_109740_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109740_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109740_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109740_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_102116)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_102118;
        int64_t x_102119;
        int64_t offset_102121 = (int64_t) 0;
        int64_t offset_index_102122 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_102123_cached_sizze_109738 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_102123 =
                realloc(scan_stage_2_accum_mem_102123, (int64_t) 8);
            scan_stage_2_accum_mem_102123_cached_sizze_109738 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_102123)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_102125 = 0; i_102125 < num_tasks_102116 - 1;
             i_102125++) {
            offset_102121 = squot64(n_92399, sext_i32_i64(num_tasks_102116));
            if (slt64(sext_i32_i64(i_102125), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_102116)))) {
                offset_102121 += (int64_t) 1;
            }
            offset_index_102122 += offset_102121;
            
            int64_t gtid_101818 = offset_index_102122;
            double x_101822;
            
            x_101822 = ((double *) Y_mem_100186.mem)[gtid_94542 * n_92399 +
                                                     gtid_101818];
            
            bool isnan_res_101823;
            
            isnan_res_101823 = futrts_isnan64(x_101822);
            
            bool defunc_0_p_res_101824 = !isnan_res_101823;
            int64_t defunc_0_f_res_101825 =
                    btoi_bool_i64(defunc_0_p_res_101824);
            
            // Read carry in
            {
                x_102118 =
                    ((int64_t *) scan_stage_2_accum_mem_102123)[(int64_t) 0];
            }
            // Read next values
            {
                x_102119 = ((int64_t *) mem_100193.mem)[offset_index_102122 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_102120 = add64(x_102118, x_102119);
            
            ((int64_t *) mem_100193.mem)[offset_index_102122 - (int64_t) 1] =
                defunc_1_op_res_102120;
            ((int64_t *) scan_stage_2_accum_mem_102123)[(int64_t) 0] =
                defunc_1_op_res_102120;
        }
        
        int64_t iter_102129 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_109741
        futhark_mc_scan_stage_3_parloop_struct_109741;
        
        futhark_mc_scan_stage_3_parloop_struct_109741.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_109741.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_109741.free_gtid_94542 =
            gtid_94542;
        futhark_mc_scan_stage_3_parloop_struct_109741.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_109741.free_mem_100193 =
            mem_100193.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_109742_task;
        
        futhark_mc_scan_stage_3_parloop_109742_task.name =
            "futhark_mc_scan_stage_3_parloop_109742";
        futhark_mc_scan_stage_3_parloop_109742_task.fn =
            futhark_mc_scan_stage_3_parloop_109742;
        futhark_mc_scan_stage_3_parloop_109742_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_109741;
        futhark_mc_scan_stage_3_parloop_109742_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_109742_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_109742_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_109742_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_109742_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_109742_task);
        
        if (futhark_mc_scan_stage_3_parloop_109742_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_109742_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_109742_total_end -
                     futhark_mc_scan_stage_3_parloop_109742_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109742_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109742_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109742_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_102123);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_109737_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_109737_end -
                 futhark_mc_segscan_task_109737_start;
        
        ctx->futhark_mc_segscan_task_109737_runs[tid]++;
        ctx->futhark_mc_segscan_task_109737_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_109737_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109743 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_94542;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100193;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
};
struct futhark_mc_segmap_parloop_struct_109745 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_94542;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100193;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
};
static int futhark_mc_segmap_parloop_109746(void *args, int64_t start,
                                            int64_t end, int flat_tid_101826,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109745
    *futhark_mc_segmap_parloop_struct_109745 =
    (struct futhark_mc_segmap_parloop_struct_109745 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109745->ctx;
    uint64_t futhark_mc_segmap_parloop_109746_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109746_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109745->free_n_92399;
    int64_t gtid_94542 =
            futhark_mc_segmap_parloop_struct_109745->free_gtid_94542;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109745->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100193 = {.desc ="mem_100193", .mem =
                                  futhark_mc_segmap_parloop_struct_109745->free_mem_100193,
                                  .size =0, .references =NULL};
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_segmap_parloop_struct_109745->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segmap_parloop_struct_109745->free_mem_100199,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102133 = start;
    
    for (; iter_102133 < end; iter_102133++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102136 = n_92399;
        int64_t gtid_101827 = iter_102133;
        int64_t remnant_102137 = iter_102133 - gtid_101827;
        double x_101828;
        
        x_101828 = ((double *) Y_mem_100186.mem)[gtid_94542 * n_92399 +
                                                 gtid_101827];
        
        bool isnan_res_101829;
        
        isnan_res_101829 = futrts_isnan64(x_101828);
        
        bool defunc_0_p_res_101830 = !isnan_res_101829;
        int64_t defunc_1_f_res_101831;
        
        if (defunc_0_p_res_101830) {
            int64_t x_102134;
            
            x_102134 = ((int64_t *) mem_100193.mem)[gtid_101827];
            
            int64_t defunc_1_f_res_t_res_102135 = sub64(x_102134, (int64_t) 1);
            
            defunc_1_f_res_101831 = defunc_1_f_res_t_res_102135;
        } else {
            defunc_1_f_res_101831 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_101831) &&
            slt64(defunc_1_f_res_101831, n_92399)) {
            ((int64_t *) mem_100199.mem)[defunc_1_f_res_101831] = gtid_101827;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_101831) &&
            slt64(defunc_1_f_res_101831, n_92399)) {
            ((double *) mem_100196.mem)[defunc_1_f_res_101831] = x_101828;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109746_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109746_end -
                 futhark_mc_segmap_parloop_109746_start;
        
        ctx->futhark_mc_segmap_parloop_109746_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109746_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109746_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109744(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101826 = tid;
    int num_tasks_102132 = info.nsubtasks;
    struct futhark_mc_task_109743 *futhark_mc_task_109743 =
                                  (struct futhark_mc_task_109743 *) args;
    struct futhark_context *ctx = futhark_mc_task_109743->ctx;
    uint64_t futhark_mc_segmap_task_109744_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109744_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109743->free_n_92399;
    int64_t gtid_94542 = futhark_mc_task_109743->free_gtid_94542;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109743->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100193 = {.desc ="mem_100193", .mem =
                                  futhark_mc_task_109743->free_mem_100193,
                                  .size =0, .references =NULL};
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_task_109743->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109743->free_mem_100199,
                                  .size =0, .references =NULL};
    int64_t iter_102133;
    struct futhark_mc_segmap_parloop_struct_109745
    futhark_mc_segmap_parloop_struct_109745;
    
    futhark_mc_segmap_parloop_struct_109745.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109745.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109745.free_gtid_94542 = gtid_94542;
    futhark_mc_segmap_parloop_struct_109745.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109745.free_mem_100193 = mem_100193.mem;
    futhark_mc_segmap_parloop_struct_109745.free_mem_100196 = mem_100196.mem;
    futhark_mc_segmap_parloop_struct_109745.free_mem_100199 = mem_100199.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109746_task;
    
    futhark_mc_segmap_parloop_109746_task.name =
        "futhark_mc_segmap_parloop_109746";
    futhark_mc_segmap_parloop_109746_task.fn = futhark_mc_segmap_parloop_109746;
    futhark_mc_segmap_parloop_109746_task.args =
        &futhark_mc_segmap_parloop_struct_109745;
    futhark_mc_segmap_parloop_109746_task.iterations = iterations;
    futhark_mc_segmap_parloop_109746_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109746_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109746_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109746_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109746_task);
    
    if (futhark_mc_segmap_parloop_109746_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109746_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109746_total_end -
                 futhark_mc_segmap_parloop_109746_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109746_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109746_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109746_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109744_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109744_end -
                 futhark_mc_segmap_task_109744_start;
        
        ctx->futhark_mc_segmap_task_109744_runs[tid]++;
        ctx->futhark_mc_segmap_task_109744_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109744_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109747 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100202;
};
struct futhark_mc_segmap_parloop_struct_109749 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100202;
};
static int futhark_mc_segmap_parloop_109750(void *args, int64_t start,
                                            int64_t end, int flat_tid_101834,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109749
    *futhark_mc_segmap_parloop_struct_109749 =
    (struct futhark_mc_segmap_parloop_struct_109749 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109749->ctx;
    uint64_t futhark_mc_segmap_parloop_109750_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109750_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109749->free_n_92399;
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segmap_parloop_struct_109749->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_segmap_parloop_struct_109749->free_mem_100202,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102139 = start;
    
    for (; iter_102139 < end; iter_102139++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102140 = n_92399;
        int64_t gtid_101835 = iter_102139;
        int64_t remnant_102141 = iter_102139 - gtid_101835;
        int64_t x_101836;
        
        x_101836 = ((int64_t *) mem_100199.mem)[gtid_101835];
        
        int64_t defunc_0_f_res_101837 = add64((int64_t) 1, x_101836);
        
        ((int64_t *) mem_100202.mem)[gtid_101835] = defunc_0_f_res_101837;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109750_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109750_end -
                 futhark_mc_segmap_parloop_109750_start;
        
        ctx->futhark_mc_segmap_parloop_109750_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109750_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109750_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109748(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101834 = tid;
    int num_tasks_102138 = info.nsubtasks;
    struct futhark_mc_task_109747 *futhark_mc_task_109747 =
                                  (struct futhark_mc_task_109747 *) args;
    struct futhark_context *ctx = futhark_mc_task_109747->ctx;
    uint64_t futhark_mc_segmap_task_109748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109748_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109747->free_n_92399;
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109747->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_task_109747->free_mem_100202,
                                  .size =0, .references =NULL};
    int64_t iter_102139;
    struct futhark_mc_segmap_parloop_struct_109749
    futhark_mc_segmap_parloop_struct_109749;
    
    futhark_mc_segmap_parloop_struct_109749.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109749.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109749.free_mem_100199 = mem_100199.mem;
    futhark_mc_segmap_parloop_struct_109749.free_mem_100202 = mem_100202.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109750_task;
    
    futhark_mc_segmap_parloop_109750_task.name =
        "futhark_mc_segmap_parloop_109750";
    futhark_mc_segmap_parloop_109750_task.fn = futhark_mc_segmap_parloop_109750;
    futhark_mc_segmap_parloop_109750_task.args =
        &futhark_mc_segmap_parloop_struct_109749;
    futhark_mc_segmap_parloop_109750_task.iterations = iterations;
    futhark_mc_segmap_parloop_109750_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109750_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109750_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109750_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109750_task);
    
    if (futhark_mc_segmap_parloop_109750_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109750_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109750_total_end -
                 futhark_mc_segmap_parloop_109750_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109750_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109750_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109750_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109748_end -
                 futhark_mc_segmap_task_109748_start;
        
        ctx->futhark_mc_segmap_task_109748_runs[tid]++;
        ctx->futhark_mc_segmap_task_109748_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109748_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109751 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100205;
};
struct futhark_mc_segmap_parloop_struct_109753 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100205;
};
static int futhark_mc_segmap_parloop_109754(void *args, int64_t start,
                                            int64_t end, int flat_tid_101838,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109753
    *futhark_mc_segmap_parloop_struct_109753 =
    (struct futhark_mc_segmap_parloop_struct_109753 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109753->ctx;
    uint64_t futhark_mc_segmap_parloop_109754_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109754_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109753->free_q_92401;
    int64_t last_res_94554 =
            futhark_mc_segmap_parloop_struct_109753->free_last_res_94554;
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_segmap_parloop_struct_109753->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102143 = start;
    
    for (; iter_102143 < end; iter_102143++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102144 = q_92401;
        int64_t gtid_101839 = iter_102143;
        int64_t remnant_102145 = iter_102143 - gtid_101839;
        bool cond_101840 = sle64(last_res_94554, gtid_101839);
        double defunc_0_f_res_101841;
        
        if (cond_101840) {
            defunc_0_f_res_101841 = 0.0;
        } else {
            defunc_0_f_res_101841 = 1.0;
        }
        ((double *) mem_100205.mem)[gtid_101839] = defunc_0_f_res_101841;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109754_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109754_end -
                 futhark_mc_segmap_parloop_109754_start;
        
        ctx->futhark_mc_segmap_parloop_109754_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109754_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109754_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109752(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101838 = tid;
    int num_tasks_102142 = info.nsubtasks;
    struct futhark_mc_task_109751 *futhark_mc_task_109751 =
                                  (struct futhark_mc_task_109751 *) args;
    struct futhark_context *ctx = futhark_mc_task_109751->ctx;
    uint64_t futhark_mc_segmap_task_109752_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109752_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_109751->free_q_92401;
    int64_t last_res_94554 = futhark_mc_task_109751->free_last_res_94554;
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_task_109751->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t iter_102143;
    struct futhark_mc_segmap_parloop_struct_109753
    futhark_mc_segmap_parloop_struct_109753;
    
    futhark_mc_segmap_parloop_struct_109753.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109753.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109753.free_last_res_94554 =
        last_res_94554;
    futhark_mc_segmap_parloop_struct_109753.free_mem_100205 = mem_100205.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109754_task;
    
    futhark_mc_segmap_parloop_109754_task.name =
        "futhark_mc_segmap_parloop_109754";
    futhark_mc_segmap_parloop_109754_task.fn = futhark_mc_segmap_parloop_109754;
    futhark_mc_segmap_parloop_109754_task.args =
        &futhark_mc_segmap_parloop_struct_109753;
    futhark_mc_segmap_parloop_109754_task.iterations = iterations;
    futhark_mc_segmap_parloop_109754_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109754_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109754_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109754_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109754_task);
    
    if (futhark_mc_segmap_parloop_109754_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109754_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109754_total_end -
                 futhark_mc_segmap_parloop_109754_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109754_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109754_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109754_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109752_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109752_end -
                 futhark_mc_segmap_task_109752_start;
        
        ctx->futhark_mc_segmap_task_109752_runs[tid]++;
        ctx->futhark_mc_segmap_task_109752_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109752_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109755 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_94554;
    int64_t free_min_arg_94573;
    int64_t free_min_arg_94574;
    int64_t free_min_res_94575;
    double free_max_res_94579;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100202;
    unsigned char *free_mem_100205;
    unsigned char *free_mem_100208;
};
struct futhark_mc_segmap_parloop_struct_109757 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_94554;
    int64_t free_min_arg_94573;
    int64_t free_min_arg_94574;
    int64_t free_min_res_94575;
    double free_max_res_94579;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100202;
    unsigned char *free_mem_100205;
    unsigned char *free_mem_100208;
};
static int futhark_mc_segmap_parloop_109758(void *args, int64_t start,
                                            int64_t end, int flat_tid_101980,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109757
    *futhark_mc_segmap_parloop_struct_109757 =
    (struct futhark_mc_segmap_parloop_struct_109757 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109757->ctx;
    uint64_t futhark_mc_segmap_parloop_109758_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109758_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109757->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109757->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109757->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109757->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109757->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109757->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109757->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109757->free_loop_cond_92426;
    int64_t last_res_94554 =
            futhark_mc_segmap_parloop_struct_109757->free_last_res_94554;
    int64_t min_arg_94573 =
            futhark_mc_segmap_parloop_struct_109757->free_min_arg_94573;
    int64_t min_arg_94574 =
            futhark_mc_segmap_parloop_struct_109757->free_min_arg_94574;
    int64_t min_res_94575 =
            futhark_mc_segmap_parloop_struct_109757->free_min_res_94575;
    double max_res_94579 =
           futhark_mc_segmap_parloop_struct_109757->free_max_res_94579;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_segmap_parloop_struct_109757->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segmap_parloop_struct_109757->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_segmap_parloop_struct_109757->free_mem_100202,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_segmap_parloop_struct_109757->free_mem_100205,
                                  .size =0, .references =NULL};
    struct memblock mem_100208 = {.desc ="mem_100208", .mem =
                                  futhark_mc_segmap_parloop_struct_109757->free_mem_100208,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102147 = start;
    
    for (; iter_102147 < end; iter_102147++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102246 = n_m_92409;
        int64_t gtid_101981 = iter_102147;
        int64_t remnant_102247 = iter_102147 - gtid_101981;
        int64_t min_arg_101982 = mul64(jump_92403, gtid_101981);
        int64_t min_res_101983 = smin64(i_92415, min_arg_101982);
        int64_t defunc_0_g_res_101984 = add64((int64_t) 1, min_res_101983);
        bool init_idx_101985;
        int64_t init_idx_101986;
        int64_t init_idx_101987;
        bool loop_while_102148;
        int64_t low_102149;
        int64_t high_102150;
        
        loop_while_102148 = x_92416;
        low_102149 = (int64_t) 0;
        high_102150 = i_92415;
        while (loop_while_102148) {
            int64_t x_102151 = add64(low_102149, high_102150);
            int64_t mid_102152 = sdiv64(x_102151, (int64_t) 2);
            bool x_102153 = sle64((int64_t) 0, mid_102152);
            bool y_102154 = slt64(mid_102152, n_92399);
            bool bounds_check_102155 = x_102153 && y_102154;
            bool index_certs_102156;
            
            if (!bounds_check_102155) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_102152,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_102157;
            
            mid_id_102157 = ((int64_t *) mem_100202.mem)[mid_102152];
            
            bool cond_102158 = slt64(mid_id_102157, (int64_t) 0);
            int64_t mid_idx_102159;
            
            if (cond_102158) {
                mid_idx_102159 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_102159 = mid_id_102157;
            }
            
            bool cond_102160 = sle64(defunc_0_g_res_101984, mid_idx_102159);
            int64_t loopres_102161;
            int64_t loopres_102162;
            
            if (cond_102160) {
                int64_t loopres_t_res_102163 = sub64(mid_102152, (int64_t) 1);
                
                loopres_102161 = low_102149;
                loopres_102162 = loopres_t_res_102163;
            } else {
                int64_t loopres_f_res_102164 = add64((int64_t) 1, mid_102152);
                
                loopres_102161 = loopres_f_res_102164;
                loopres_102162 = high_102150;
            }
            
            bool loop_cond_102165 = sle64(loopres_102161, loopres_102162);
            bool loop_while_tmp_102248 = loop_cond_102165;
            int64_t low_tmp_102249 = loopres_102161;
            int64_t high_tmp_102250 = loopres_102162;
            
            loop_while_102148 = loop_while_tmp_102248;
            low_102149 = low_tmp_102249;
            high_102150 = high_tmp_102250;
        }
        init_idx_101985 = loop_while_102148;
        init_idx_101986 = low_102149;
        init_idx_101987 = high_102150;
        
        bool idx_102006;
        int64_t idx_102007;
        int64_t idx_102008;
        int64_t idx_102009;
        bool loop_while_102166;
        int64_t l_idx_102167;
        int64_t r_idx_102168;
        int64_t span_102169;
        
        loop_while_102166 = loop_cond_92426;
        l_idx_102167 = init_idx_101986;
        r_idx_102168 = init_idx_101986;
        span_102169 = (int64_t) 1;
        while (loop_while_102166) {
            int64_t max_arg_102170 = sub64(l_idx_102167, (int64_t) 1);
            int64_t max_res_102171 = smax64((int64_t) 0, max_arg_102170);
            int64_t min_arg_102172 = add64((int64_t) 1, r_idx_102168);
            int64_t min_res_102173 = smin64(min_arg_94573, min_arg_102172);
            bool x_102174 = sle64((int64_t) 0, max_res_102171);
            bool y_102175 = slt64(max_res_102171, n_92399);
            bool bounds_check_102176 = x_102174 && y_102175;
            bool index_certs_102177;
            
            if (!bounds_check_102176) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_102171,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102178;
            
            x_102178 = ((int64_t *) mem_100202.mem)[max_res_102171];
            
            int64_t abs_arg_102179 = sub64(x_102178, defunc_0_g_res_101984);
            int64_t abs_res_102180 = abs64(abs_arg_102179);
            bool x_102181 = sle64((int64_t) 0, min_res_102173);
            bool y_102182 = slt64(min_res_102173, n_92399);
            bool bounds_check_102183 = x_102181 && y_102182;
            bool index_certs_102184;
            
            if (!bounds_check_102183) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_102173,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102185;
            
            x_102185 = ((int64_t *) mem_100202.mem)[min_res_102173];
            
            int64_t abs_arg_102186 = sub64(x_102185, defunc_0_g_res_101984);
            int64_t abs_res_102187 = abs64(abs_arg_102186);
            bool cond_102188 = max_res_102171 == l_idx_102167;
            int64_t loopres_102189;
            int64_t loopres_102190;
            int64_t loopres_102191;
            
            if (cond_102188) {
                loopres_102189 = l_idx_102167;
                loopres_102190 = r_idx_102168;
                loopres_102191 = min_res_92421;
            } else {
                bool cond_102192 = slt64(abs_res_102180, abs_res_102187);
                bool cond_f_res_102193 = min_res_102173 == r_idx_102168;
                bool x_102194 = !cond_102192;
                bool y_102195 = cond_f_res_102193 && x_102194;
                bool cond_102196 = cond_102192 || y_102195;
                int64_t loopres_f_res_102197;
                
                if (cond_102196) {
                    loopres_f_res_102197 = max_res_102171;
                } else {
                    loopres_f_res_102197 = l_idx_102167;
                }
                
                int64_t loopres_f_res_102198;
                
                if (cond_102196) {
                    loopres_f_res_102198 = r_idx_102168;
                } else {
                    loopres_f_res_102198 = min_res_102173;
                }
                
                int64_t loopres_f_res_102199;
                
                if (cond_102196) {
                    int64_t loopres_f_res_t_res_102200 = add64((int64_t) 1,
                                                               span_102169);
                    
                    loopres_f_res_102199 = loopres_f_res_t_res_102200;
                } else {
                    int64_t loopres_f_res_f_res_102201 = add64((int64_t) 1,
                                                               span_102169);
                    
                    loopres_f_res_102199 = loopres_f_res_f_res_102201;
                }
                loopres_102189 = loopres_f_res_102197;
                loopres_102190 = loopres_f_res_102198;
                loopres_102191 = loopres_f_res_102199;
            }
            
            bool loop_cond_102202 = slt64(loopres_102191, min_res_92421);
            bool loop_while_tmp_102251 = loop_cond_102202;
            int64_t l_idx_tmp_102252 = loopres_102189;
            int64_t r_idx_tmp_102253 = loopres_102190;
            int64_t span_tmp_102254 = loopres_102191;
            
            loop_while_102166 = loop_while_tmp_102251;
            l_idx_102167 = l_idx_tmp_102252;
            r_idx_102168 = r_idx_tmp_102253;
            span_102169 = span_tmp_102254;
        }
        idx_102006 = loop_while_102166;
        idx_102007 = l_idx_102167;
        idx_102008 = r_idx_102168;
        idx_102009 = span_102169;
        
        int64_t min_res_102047 = smin64(min_arg_94574, idx_102007);
        int64_t max_res_102048 = smax64((int64_t) 0, min_res_102047);
        int64_t x_102049 = add64(min_res_94575, max_res_102048);
        int64_t r_102050 = sub64(x_102049, (int64_t) 1);
        bool x_102051 = sle64((int64_t) 0, r_102050);
        bool y_102052 = slt64(r_102050, n_92399);
        bool bounds_check_102053 = x_102051 && y_102052;
        bool index_certs_102054;
        
        if (!bounds_check_102053) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_102050,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102055;
        
        x_102055 = ((int64_t *) mem_100199.mem)[r_102050];
        
        int64_t abs_arg_102056 = sub64(x_102055, min_res_101983);
        int64_t abs_res_102057 = abs64(abs_arg_102056);
        bool x_102058 = sle64((int64_t) 0, max_res_102048);
        bool y_102059 = slt64(max_res_102048, n_92399);
        bool bounds_check_102060 = x_102058 && y_102059;
        bool index_certs_102061;
        
        if (!bounds_check_102060) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_102048,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102062;
        
        x_102062 = ((int64_t *) mem_100199.mem)[max_res_102048];
        
        int64_t abs_arg_102063 = sub64(x_102062, min_res_101983);
        int64_t abs_res_102064 = abs64(abs_arg_102063);
        int64_t max_res_102065 = smax64(abs_res_102057, abs_res_102064);
        double defunc_0_f_res_102066 = sitofp_i64_f64(max_res_102065);
        double defunc_1_f_res_102067 = max_res_94579 + defunc_0_f_res_102066;
        double defunc_2_reduce_res_102068;
        double redout_102204 = 0.0;
        
        for (int64_t i_102203 = 0; i_102203 < q_92401; i_102203++) {
            double x_102205;
            
            x_102205 = ((double *) mem_100205.mem)[i_102203];
            
            bool cond_102206 = sle64(last_res_94554, i_102203);
            int64_t defunc_0_f_res_102207;
            
            if (cond_102206) {
                defunc_0_f_res_102207 = (int64_t) 0;
            } else {
                int64_t i_102208 = add64(max_res_102048, i_102203);
                int64_t defunc_0_add_arg_102209;
                
                defunc_0_add_arg_102209 =
                    ((int64_t *) mem_100199.mem)[i_102208];
                
                int64_t defunc_1_add_res_102210 = add64((int64_t) 1,
                                                        defunc_0_add_arg_102209);
                
                defunc_0_f_res_102207 = defunc_1_add_res_102210;
            }
            
            int64_t binop_p_102211 = sub64(defunc_0_f_res_102207,
                                           min_res_101983);
            double defunc_0_f_res_102212 = sitofp_i64_f64(binop_p_102211);
            double abs_res_102213 = fabs(defunc_0_f_res_102212);
            double tmp1_102214 = abs_res_102213 / defunc_1_f_res_102067;
            double x_102215 = tmp1_102214 * tmp1_102214;
            double y_102216 = tmp1_102214 * x_102215;
            double tmp2_102217 = 1.0 - y_102216;
            double x_102218 = tmp2_102217 * tmp2_102217;
            double tmp3_102219 = tmp2_102217 * x_102218;
            double w_j_102220 = x_102205 * tmp3_102219;
            double defunc_1_op_res_102221 = w_j_102220 + redout_102204;
            double redout_tmp_102255 = defunc_1_op_res_102221;
            
            redout_102204 = redout_tmp_102255;
        }
        defunc_2_reduce_res_102068 = redout_102204;
        
        double a0_102088 = 1.0 / defunc_2_reduce_res_102068;
        double defunc_2_reduce_res_102089;
        double redout_102223 = 0.0;
        
        for (int64_t i_102222 = 0; i_102222 < q_92401; i_102222++) {
            double x_102224;
            
            x_102224 = ((double *) mem_100205.mem)[i_102222];
            
            bool cond_102225 = sle64(last_res_94554, i_102222);
            int64_t defunc_0_f_res_102226;
            
            if (cond_102225) {
                defunc_0_f_res_102226 = (int64_t) 0;
            } else {
                int64_t i_102227 = add64(max_res_102048, i_102222);
                int64_t defunc_0_add_arg_102228;
                
                defunc_0_add_arg_102228 =
                    ((int64_t *) mem_100199.mem)[i_102227];
                
                int64_t defunc_1_add_res_102229 = add64((int64_t) 1,
                                                        defunc_0_add_arg_102228);
                
                defunc_0_f_res_102226 = defunc_1_add_res_102229;
            }
            
            int64_t binop_p_102230 = sub64(defunc_0_f_res_102226,
                                           min_res_101983);
            double defunc_0_f_res_102231 = sitofp_i64_f64(binop_p_102230);
            double abs_res_102232 = fabs(defunc_0_f_res_102231);
            double tmp1_102233 = abs_res_102232 / defunc_1_f_res_102067;
            double x_102234 = tmp1_102233 * tmp1_102233;
            double y_102235 = tmp1_102233 * x_102234;
            double tmp2_102236 = 1.0 - y_102235;
            double x_102237 = tmp2_102236 * tmp2_102236;
            double tmp3_102238 = tmp2_102236 * x_102237;
            double tmp4_102239 = x_102224 * tmp3_102238;
            double defunc_0_f_res_102240;
            
            if (cond_102225) {
                defunc_0_f_res_102240 = 0.0;
            } else {
                int64_t i_102241 = add64(max_res_102048, i_102222);
                double defunc_0_add_arg_102242;
                
                defunc_0_add_arg_102242 = ((double *) mem_100196.mem)[i_102241];
                defunc_0_f_res_102240 = defunc_0_add_arg_102242;
            }
            
            double x_102243 = a0_102088 * tmp4_102239;
            double defunc_9_fit_fun_res_102244 = defunc_0_f_res_102240 *
                   x_102243;
            double defunc_1_op_res_102245 = defunc_9_fit_fun_res_102244 +
                   redout_102223;
            double redout_tmp_102256 = defunc_1_op_res_102245;
            
            redout_102223 = redout_tmp_102256;
        }
        defunc_2_reduce_res_102089 = redout_102223;
        ((double *) mem_100208.mem)[gtid_101981] = defunc_2_reduce_res_102089;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109758_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109758_end -
                 futhark_mc_segmap_parloop_109758_start;
        
        ctx->futhark_mc_segmap_parloop_109758_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109758_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109758_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109756(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101980 = tid;
    int num_tasks_102146 = info.nsubtasks;
    struct futhark_mc_task_109755 *futhark_mc_task_109755 =
                                  (struct futhark_mc_task_109755 *) args;
    struct futhark_context *ctx = futhark_mc_task_109755->ctx;
    uint64_t futhark_mc_segmap_task_109756_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109756_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109755->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109755->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109755->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109755->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109755->free_i_92415;
    bool x_92416 = futhark_mc_task_109755->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109755->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109755->free_loop_cond_92426;
    int64_t last_res_94554 = futhark_mc_task_109755->free_last_res_94554;
    int64_t min_arg_94573 = futhark_mc_task_109755->free_min_arg_94573;
    int64_t min_arg_94574 = futhark_mc_task_109755->free_min_arg_94574;
    int64_t min_res_94575 = futhark_mc_task_109755->free_min_res_94575;
    double max_res_94579 = futhark_mc_task_109755->free_max_res_94579;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_task_109755->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109755->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_task_109755->free_mem_100202,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_task_109755->free_mem_100205,
                                  .size =0, .references =NULL};
    struct memblock mem_100208 = {.desc ="mem_100208", .mem =
                                  futhark_mc_task_109755->free_mem_100208,
                                  .size =0, .references =NULL};
    int64_t iter_102147;
    struct futhark_mc_segmap_parloop_struct_109757
    futhark_mc_segmap_parloop_struct_109757;
    
    futhark_mc_segmap_parloop_struct_109757.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109757.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109757.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109757.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109757.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109757.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109757.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109757.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109757.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109757.free_last_res_94554 =
        last_res_94554;
    futhark_mc_segmap_parloop_struct_109757.free_min_arg_94573 = min_arg_94573;
    futhark_mc_segmap_parloop_struct_109757.free_min_arg_94574 = min_arg_94574;
    futhark_mc_segmap_parloop_struct_109757.free_min_res_94575 = min_res_94575;
    futhark_mc_segmap_parloop_struct_109757.free_max_res_94579 = max_res_94579;
    futhark_mc_segmap_parloop_struct_109757.free_mem_100196 = mem_100196.mem;
    futhark_mc_segmap_parloop_struct_109757.free_mem_100199 = mem_100199.mem;
    futhark_mc_segmap_parloop_struct_109757.free_mem_100202 = mem_100202.mem;
    futhark_mc_segmap_parloop_struct_109757.free_mem_100205 = mem_100205.mem;
    futhark_mc_segmap_parloop_struct_109757.free_mem_100208 = mem_100208.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109758_task;
    
    futhark_mc_segmap_parloop_109758_task.name =
        "futhark_mc_segmap_parloop_109758";
    futhark_mc_segmap_parloop_109758_task.fn = futhark_mc_segmap_parloop_109758;
    futhark_mc_segmap_parloop_109758_task.args =
        &futhark_mc_segmap_parloop_struct_109757;
    futhark_mc_segmap_parloop_109758_task.iterations = iterations;
    futhark_mc_segmap_parloop_109758_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109758_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109758_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109758_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109758_task);
    
    if (futhark_mc_segmap_parloop_109758_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109758_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109758_total_end -
                 futhark_mc_segmap_parloop_109758_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109758_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109758_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109758_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109756_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109756_end -
                 futhark_mc_segmap_task_109756_start;
        
        ctx->futhark_mc_segmap_task_109756_runs[tid]++;
        ctx->futhark_mc_segmap_task_109756_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109756_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109760 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_94554;
    int64_t free_min_arg_94573;
    int64_t free_min_arg_94574;
    int64_t free_min_res_94575;
    double free_max_res_94579;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100202;
    unsigned char *free_mem_100205;
    unsigned char *free_mem_100208;
};
struct futhark_mc_task_109762 {
    struct futhark_context *ctx;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100205;
    int64_t free_min_res_101845;
    int64_t free_max_res_101910;
    double free_defunc_1_f_res_101929;
    double *retval_defunc_2_reduce_res_101930;
};
struct futhark_mc_segred_stage_1_parloop_struct_109765 {
    struct futhark_context *ctx;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100205;
    int64_t free_min_res_101845;
    int64_t free_max_res_101910;
    double free_defunc_1_f_res_101929;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_102370;
};
static int futhark_mc_segred_stage_1_parloop_109766(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_102313,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109765
    *futhark_mc_segred_stage_1_parloop_struct_109765 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109765 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109765->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109766_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109766_start = get_wall_time();
    
    int64_t last_res_94554 =
            futhark_mc_segred_stage_1_parloop_struct_109765->free_last_res_94554;
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109765->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109765->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t min_res_101845 =
            futhark_mc_segred_stage_1_parloop_struct_109765->free_min_res_101845;
    int64_t max_res_101910 =
            futhark_mc_segred_stage_1_parloop_struct_109765->free_max_res_101910;
    double defunc_1_f_res_101929 =
           futhark_mc_segred_stage_1_parloop_struct_109765->free_defunc_1_f_res_101929;
    struct memblock reduce_stage_1_tid_res_arr_mem_102370 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_102370",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109765->free_reduce_stage_1_tid_res_arr_mem_102370,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102372 = start;
    double x_102315;
    double x_102316;
    double local_acc_102373 = 0.0;
    
    for (; iter_102372 < end; iter_102372++) {
        int64_t gtid_102314 = iter_102372;
        double x_102318;
        
        x_102318 = ((double *) mem_100205.mem)[gtid_102314];
        
        bool cond_102319 = sle64(last_res_94554, gtid_102314);
        int64_t defunc_0_f_res_102320;
        
        if (cond_102319) {
            defunc_0_f_res_102320 = (int64_t) 0;
        } else {
            int64_t i_102321 = add64(max_res_101910, gtid_102314);
            int64_t defunc_0_add_arg_102322;
            
            defunc_0_add_arg_102322 = ((int64_t *) mem_100199.mem)[i_102321];
            
            int64_t defunc_1_add_res_102323 = add64((int64_t) 1,
                                                    defunc_0_add_arg_102322);
            
            defunc_0_f_res_102320 = defunc_1_add_res_102323;
        }
        
        int64_t binop_p_102324 = sub64(defunc_0_f_res_102320, min_res_101845);
        double defunc_0_f_res_102325 = sitofp_i64_f64(binop_p_102324);
        double abs_res_102326 = fabs(defunc_0_f_res_102325);
        double tmp1_102327 = abs_res_102326 / defunc_1_f_res_101929;
        double x_102328 = tmp1_102327 * tmp1_102327;
        double y_102329 = tmp1_102327 * x_102328;
        double tmp2_102330 = 1.0 - y_102329;
        double x_102331 = tmp2_102330 * tmp2_102330;
        double tmp3_102332 = tmp2_102330 * x_102331;
        double w_j_102333 = x_102318 * tmp3_102332;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_102315 = local_acc_102373;
        }
        // Load next params
        {
            x_102316 = w_j_102333;
        }
        // Red body
        {
            double defunc_1_op_res_102317 = x_102315 + x_102316;
            
            local_acc_102373 = defunc_1_op_res_102317;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_102370.mem)[flat_tid_102313] =
        local_acc_102373;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109766_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109766_end -
                 futhark_mc_segred_stage_1_parloop_109766_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109766_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109766_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109766_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109763(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102313 = tid;
    int num_tasks_102369 = info.nsubtasks;
    struct futhark_mc_task_109762 *futhark_mc_task_109762 =
                                  (struct futhark_mc_task_109762 *) args;
    struct futhark_context *ctx = futhark_mc_task_109762->ctx;
    uint64_t futhark_mc_segred_task_109763_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109763_start = get_wall_time();
    
    int64_t last_res_94554 = futhark_mc_task_109762->free_last_res_94554;
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109762->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_task_109762->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t min_res_101845 = futhark_mc_task_109762->free_min_res_101845;
    int64_t max_res_101910 = futhark_mc_task_109762->free_max_res_101910;
    double defunc_1_f_res_101929 =
           futhark_mc_task_109762->free_defunc_1_f_res_101929;
    double defunc_2_reduce_res_101930 =
           *futhark_mc_task_109762->retval_defunc_2_reduce_res_101930;
    size_t reduce_stage_1_tid_res_arr_mem_102370_cached_sizze_109764 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_102370 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_102370_cached_sizze_109764 <
        (size_t) ((int64_t) 8 * num_tasks_102369)) {
        reduce_stage_1_tid_res_arr_mem_102370 =
            realloc(reduce_stage_1_tid_res_arr_mem_102370, (int64_t) 8 *
                    num_tasks_102369);
        reduce_stage_1_tid_res_arr_mem_102370_cached_sizze_109764 =
            (int64_t) 8 * num_tasks_102369;
    }
    
    int64_t iter_102372;
    struct futhark_mc_segred_stage_1_parloop_struct_109765
    futhark_mc_segred_stage_1_parloop_struct_109765;
    
    futhark_mc_segred_stage_1_parloop_struct_109765.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_last_res_94554 =
        last_res_94554;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_mem_100199 =
        mem_100199.mem;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_mem_100205 =
        mem_100205.mem;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_min_res_101845 =
        min_res_101845;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_max_res_101910 =
        max_res_101910;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_defunc_1_f_res_101929 =
        defunc_1_f_res_101929;
    futhark_mc_segred_stage_1_parloop_struct_109765.free_reduce_stage_1_tid_res_arr_mem_102370 =
        reduce_stage_1_tid_res_arr_mem_102370;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109766_task;
    
    futhark_mc_segred_stage_1_parloop_109766_task.name =
        "futhark_mc_segred_stage_1_parloop_109766";
    futhark_mc_segred_stage_1_parloop_109766_task.fn =
        futhark_mc_segred_stage_1_parloop_109766;
    futhark_mc_segred_stage_1_parloop_109766_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109765;
    futhark_mc_segred_stage_1_parloop_109766_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109766_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109766_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109766_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109766_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109766_task);
    
    if (futhark_mc_segred_stage_1_parloop_109766_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109766_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109766_total_end -
                 futhark_mc_segred_stage_1_parloop_109766_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109766_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109766_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109766_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_101930 = 0.0;
    }
    
    double x_102374;
    double x_102375;
    
    for (int32_t i_102377 = 0; i_102377 < num_tasks_102369; i_102377++) {
        flat_tid_102313 = i_102377;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_102374 = defunc_2_reduce_res_101930;
            }
            // load next params
            {
                x_102375 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_102370)[flat_tid_102313];
            }
            // red body
            {
                double defunc_1_op_res_102376 = x_102374 + x_102375;
                
                defunc_2_reduce_res_101930 = defunc_1_op_res_102376;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_102370);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109763_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109763_end -
                 futhark_mc_segred_task_109763_start;
        
        ctx->futhark_mc_segred_task_109763_runs[tid]++;
        ctx->futhark_mc_segred_task_109763_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109763_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109762->retval_defunc_2_reduce_res_101930 =
            defunc_2_reduce_res_101930;
    }
    return err;
}
struct futhark_mc_task_109767 {
    struct futhark_context *ctx;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100205;
    int64_t free_min_res_101845;
    int64_t free_max_res_101910;
    double free_defunc_1_f_res_101929;
    double free_a0_101952;
    double *retval_defunc_2_reduce_res_101953;
};
struct futhark_mc_segred_stage_1_parloop_struct_109770 {
    struct futhark_context *ctx;
    int64_t free_last_res_94554;
    unsigned char *free_mem_100196;
    unsigned char *free_mem_100199;
    unsigned char *free_mem_100205;
    int64_t free_min_res_101845;
    int64_t free_max_res_101910;
    double free_defunc_1_f_res_101929;
    double free_a0_101952;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_102379;
};
static int futhark_mc_segred_stage_1_parloop_109771(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_102334,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109770
    *futhark_mc_segred_stage_1_parloop_struct_109770 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109770 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109770->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109771_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109771_start = get_wall_time();
    
    int64_t last_res_94554 =
            futhark_mc_segred_stage_1_parloop_struct_109770->free_last_res_94554;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109770->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109770->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109770->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t min_res_101845 =
            futhark_mc_segred_stage_1_parloop_struct_109770->free_min_res_101845;
    int64_t max_res_101910 =
            futhark_mc_segred_stage_1_parloop_struct_109770->free_max_res_101910;
    double defunc_1_f_res_101929 =
           futhark_mc_segred_stage_1_parloop_struct_109770->free_defunc_1_f_res_101929;
    double a0_101952 =
           futhark_mc_segred_stage_1_parloop_struct_109770->free_a0_101952;
    struct memblock reduce_stage_1_tid_res_arr_mem_102379 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_102379",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109770->free_reduce_stage_1_tid_res_arr_mem_102379,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102381 = start;
    double x_102336;
    double x_102337;
    double local_acc_102382 = 0.0;
    
    for (; iter_102381 < end; iter_102381++) {
        int64_t gtid_102335 = iter_102381;
        double x_102339;
        
        x_102339 = ((double *) mem_100205.mem)[gtid_102335];
        
        bool cond_102340 = sle64(last_res_94554, gtid_102335);
        int64_t defunc_0_f_res_102341;
        
        if (cond_102340) {
            defunc_0_f_res_102341 = (int64_t) 0;
        } else {
            int64_t i_102342 = add64(max_res_101910, gtid_102335);
            int64_t defunc_0_add_arg_102343;
            
            defunc_0_add_arg_102343 = ((int64_t *) mem_100199.mem)[i_102342];
            
            int64_t defunc_1_add_res_102344 = add64((int64_t) 1,
                                                    defunc_0_add_arg_102343);
            
            defunc_0_f_res_102341 = defunc_1_add_res_102344;
        }
        
        int64_t binop_p_102345 = sub64(defunc_0_f_res_102341, min_res_101845);
        double defunc_0_f_res_102346 = sitofp_i64_f64(binop_p_102345);
        double abs_res_102347 = fabs(defunc_0_f_res_102346);
        double tmp1_102348 = abs_res_102347 / defunc_1_f_res_101929;
        double x_102349 = tmp1_102348 * tmp1_102348;
        double y_102350 = tmp1_102348 * x_102349;
        double tmp2_102351 = 1.0 - y_102350;
        double x_102352 = tmp2_102351 * tmp2_102351;
        double tmp3_102353 = tmp2_102351 * x_102352;
        double tmp4_102354 = x_102339 * tmp3_102353;
        double defunc_0_f_res_102355;
        
        if (cond_102340) {
            defunc_0_f_res_102355 = 0.0;
        } else {
            int64_t i_102356 = add64(max_res_101910, gtid_102335);
            double defunc_0_add_arg_102357;
            
            defunc_0_add_arg_102357 = ((double *) mem_100196.mem)[i_102356];
            defunc_0_f_res_102355 = defunc_0_add_arg_102357;
        }
        
        double x_102358 = a0_101952 * tmp4_102354;
        double defunc_9_fit_fun_res_102359 = defunc_0_f_res_102355 * x_102358;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_102336 = local_acc_102382;
        }
        // Load next params
        {
            x_102337 = defunc_9_fit_fun_res_102359;
        }
        // Red body
        {
            double defunc_1_op_res_102338 = x_102336 + x_102337;
            
            local_acc_102382 = defunc_1_op_res_102338;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_102379.mem)[flat_tid_102334] =
        local_acc_102382;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109771_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109771_end -
                 futhark_mc_segred_stage_1_parloop_109771_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109771_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109771_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109771_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109768(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102334 = tid;
    int num_tasks_102378 = info.nsubtasks;
    struct futhark_mc_task_109767 *futhark_mc_task_109767 =
                                  (struct futhark_mc_task_109767 *) args;
    struct futhark_context *ctx = futhark_mc_task_109767->ctx;
    uint64_t futhark_mc_segred_task_109768_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109768_start = get_wall_time();
    
    int64_t last_res_94554 = futhark_mc_task_109767->free_last_res_94554;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_task_109767->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109767->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_task_109767->free_mem_100205,
                                  .size =0, .references =NULL};
    int64_t min_res_101845 = futhark_mc_task_109767->free_min_res_101845;
    int64_t max_res_101910 = futhark_mc_task_109767->free_max_res_101910;
    double defunc_1_f_res_101929 =
           futhark_mc_task_109767->free_defunc_1_f_res_101929;
    double a0_101952 = futhark_mc_task_109767->free_a0_101952;
    double defunc_2_reduce_res_101953 =
           *futhark_mc_task_109767->retval_defunc_2_reduce_res_101953;
    size_t reduce_stage_1_tid_res_arr_mem_102379_cached_sizze_109769 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_102379 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_102379_cached_sizze_109769 <
        (size_t) ((int64_t) 8 * num_tasks_102378)) {
        reduce_stage_1_tid_res_arr_mem_102379 =
            realloc(reduce_stage_1_tid_res_arr_mem_102379, (int64_t) 8 *
                    num_tasks_102378);
        reduce_stage_1_tid_res_arr_mem_102379_cached_sizze_109769 =
            (int64_t) 8 * num_tasks_102378;
    }
    
    int64_t iter_102381;
    struct futhark_mc_segred_stage_1_parloop_struct_109770
    futhark_mc_segred_stage_1_parloop_struct_109770;
    
    futhark_mc_segred_stage_1_parloop_struct_109770.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_last_res_94554 =
        last_res_94554;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_mem_100196 =
        mem_100196.mem;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_mem_100199 =
        mem_100199.mem;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_mem_100205 =
        mem_100205.mem;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_min_res_101845 =
        min_res_101845;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_max_res_101910 =
        max_res_101910;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_defunc_1_f_res_101929 =
        defunc_1_f_res_101929;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_a0_101952 = a0_101952;
    futhark_mc_segred_stage_1_parloop_struct_109770.free_reduce_stage_1_tid_res_arr_mem_102379 =
        reduce_stage_1_tid_res_arr_mem_102379;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109771_task;
    
    futhark_mc_segred_stage_1_parloop_109771_task.name =
        "futhark_mc_segred_stage_1_parloop_109771";
    futhark_mc_segred_stage_1_parloop_109771_task.fn =
        futhark_mc_segred_stage_1_parloop_109771;
    futhark_mc_segred_stage_1_parloop_109771_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109770;
    futhark_mc_segred_stage_1_parloop_109771_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109771_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109771_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109771_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109771_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109771_task);
    
    if (futhark_mc_segred_stage_1_parloop_109771_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109771_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109771_total_end -
                 futhark_mc_segred_stage_1_parloop_109771_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109771_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109771_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109771_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_101953 = 0.0;
    }
    
    double x_102383;
    double x_102384;
    
    for (int32_t i_102386 = 0; i_102386 < num_tasks_102378; i_102386++) {
        flat_tid_102334 = i_102386;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_102383 = defunc_2_reduce_res_101953;
            }
            // load next params
            {
                x_102384 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_102379)[flat_tid_102334];
            }
            // red body
            {
                double defunc_1_op_res_102385 = x_102383 + x_102384;
                
                defunc_2_reduce_res_101953 = defunc_1_op_res_102385;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_102379);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109768_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109768_end -
                 futhark_mc_segred_task_109768_start;
        
        ctx->futhark_mc_segred_task_109768_runs[tid]++;
        ctx->futhark_mc_segred_task_109768_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109768_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109767->retval_defunc_2_reduce_res_101953 =
            defunc_2_reduce_res_101953;
    }
    return err;
}
static int futhark_mc_segmap_parloop_109761(void *args, int64_t start,
                                            int64_t end, int flat_tid_101842,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109760
    *futhark_mc_segmap_parloop_struct_109760 =
    (struct futhark_mc_segmap_parloop_struct_109760 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109760->ctx;
    uint64_t futhark_mc_segmap_parloop_109761_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109761_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109760->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109760->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109760->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109760->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109760->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109760->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109760->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109760->free_loop_cond_92426;
    int64_t last_res_94554 =
            futhark_mc_segmap_parloop_struct_109760->free_last_res_94554;
    int64_t min_arg_94573 =
            futhark_mc_segmap_parloop_struct_109760->free_min_arg_94573;
    int64_t min_arg_94574 =
            futhark_mc_segmap_parloop_struct_109760->free_min_arg_94574;
    int64_t min_res_94575 =
            futhark_mc_segmap_parloop_struct_109760->free_min_res_94575;
    double max_res_94579 =
           futhark_mc_segmap_parloop_struct_109760->free_max_res_94579;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_segmap_parloop_struct_109760->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_segmap_parloop_struct_109760->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_segmap_parloop_struct_109760->free_mem_100202,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_segmap_parloop_struct_109760->free_mem_100205,
                                  .size =0, .references =NULL};
    struct memblock mem_100208 = {.desc ="mem_100208", .mem =
                                  futhark_mc_segmap_parloop_struct_109760->free_mem_100208,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102257 = start;
    
    for (; iter_102257 < end; iter_102257++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102360 = n_m_92409;
        int64_t gtid_101843 = iter_102257;
        int64_t remnant_102361 = iter_102257 - gtid_101843;
        int64_t min_arg_101844 = mul64(jump_92403, gtid_101843);
        int64_t min_res_101845 = smin64(i_92415, min_arg_101844);
        int64_t defunc_0_g_res_101846 = add64((int64_t) 1, min_res_101845);
        bool init_idx_101847;
        int64_t init_idx_101848;
        int64_t init_idx_101849;
        bool loop_while_102258;
        int64_t low_102259;
        int64_t high_102260;
        
        loop_while_102258 = x_92416;
        low_102259 = (int64_t) 0;
        high_102260 = i_92415;
        while (loop_while_102258) {
            int64_t x_102261 = add64(low_102259, high_102260);
            int64_t mid_102262 = sdiv64(x_102261, (int64_t) 2);
            bool x_102263 = sle64((int64_t) 0, mid_102262);
            bool y_102264 = slt64(mid_102262, n_92399);
            bool bounds_check_102265 = x_102263 && y_102264;
            bool index_certs_102266;
            
            if (!bounds_check_102265) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_102262,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_102267;
            
            mid_id_102267 = ((int64_t *) mem_100202.mem)[mid_102262];
            
            bool cond_102268 = slt64(mid_id_102267, (int64_t) 0);
            int64_t mid_idx_102269;
            
            if (cond_102268) {
                mid_idx_102269 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_102269 = mid_id_102267;
            }
            
            bool cond_102270 = sle64(defunc_0_g_res_101846, mid_idx_102269);
            int64_t loopres_102271;
            int64_t loopres_102272;
            
            if (cond_102270) {
                int64_t loopres_t_res_102273 = sub64(mid_102262, (int64_t) 1);
                
                loopres_102271 = low_102259;
                loopres_102272 = loopres_t_res_102273;
            } else {
                int64_t loopres_f_res_102274 = add64((int64_t) 1, mid_102262);
                
                loopres_102271 = loopres_f_res_102274;
                loopres_102272 = high_102260;
            }
            
            bool loop_cond_102275 = sle64(loopres_102271, loopres_102272);
            bool loop_while_tmp_102362 = loop_cond_102275;
            int64_t low_tmp_102363 = loopres_102271;
            int64_t high_tmp_102364 = loopres_102272;
            
            loop_while_102258 = loop_while_tmp_102362;
            low_102259 = low_tmp_102363;
            high_102260 = high_tmp_102364;
        }
        init_idx_101847 = loop_while_102258;
        init_idx_101848 = low_102259;
        init_idx_101849 = high_102260;
        
        bool idx_101868;
        int64_t idx_101869;
        int64_t idx_101870;
        int64_t idx_101871;
        bool loop_while_102276;
        int64_t l_idx_102277;
        int64_t r_idx_102278;
        int64_t span_102279;
        
        loop_while_102276 = loop_cond_92426;
        l_idx_102277 = init_idx_101848;
        r_idx_102278 = init_idx_101848;
        span_102279 = (int64_t) 1;
        while (loop_while_102276) {
            int64_t max_arg_102280 = sub64(l_idx_102277, (int64_t) 1);
            int64_t max_res_102281 = smax64((int64_t) 0, max_arg_102280);
            int64_t min_arg_102282 = add64((int64_t) 1, r_idx_102278);
            int64_t min_res_102283 = smin64(min_arg_94573, min_arg_102282);
            bool x_102284 = sle64((int64_t) 0, max_res_102281);
            bool y_102285 = slt64(max_res_102281, n_92399);
            bool bounds_check_102286 = x_102284 && y_102285;
            bool index_certs_102287;
            
            if (!bounds_check_102286) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_102281,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102288;
            
            x_102288 = ((int64_t *) mem_100202.mem)[max_res_102281];
            
            int64_t abs_arg_102289 = sub64(x_102288, defunc_0_g_res_101846);
            int64_t abs_res_102290 = abs64(abs_arg_102289);
            bool x_102291 = sle64((int64_t) 0, min_res_102283);
            bool y_102292 = slt64(min_res_102283, n_92399);
            bool bounds_check_102293 = x_102291 && y_102292;
            bool index_certs_102294;
            
            if (!bounds_check_102293) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_102283,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102295;
            
            x_102295 = ((int64_t *) mem_100202.mem)[min_res_102283];
            
            int64_t abs_arg_102296 = sub64(x_102295, defunc_0_g_res_101846);
            int64_t abs_res_102297 = abs64(abs_arg_102296);
            bool cond_102298 = max_res_102281 == l_idx_102277;
            int64_t loopres_102299;
            int64_t loopres_102300;
            int64_t loopres_102301;
            
            if (cond_102298) {
                loopres_102299 = l_idx_102277;
                loopres_102300 = r_idx_102278;
                loopres_102301 = min_res_92421;
            } else {
                bool cond_102302 = slt64(abs_res_102290, abs_res_102297);
                bool cond_f_res_102303 = min_res_102283 == r_idx_102278;
                bool x_102304 = !cond_102302;
                bool y_102305 = cond_f_res_102303 && x_102304;
                bool cond_102306 = cond_102302 || y_102305;
                int64_t loopres_f_res_102307;
                
                if (cond_102306) {
                    loopres_f_res_102307 = max_res_102281;
                } else {
                    loopres_f_res_102307 = l_idx_102277;
                }
                
                int64_t loopres_f_res_102308;
                
                if (cond_102306) {
                    loopres_f_res_102308 = r_idx_102278;
                } else {
                    loopres_f_res_102308 = min_res_102283;
                }
                
                int64_t loopres_f_res_102309;
                
                if (cond_102306) {
                    int64_t loopres_f_res_t_res_102310 = add64((int64_t) 1,
                                                               span_102279);
                    
                    loopres_f_res_102309 = loopres_f_res_t_res_102310;
                } else {
                    int64_t loopres_f_res_f_res_102311 = add64((int64_t) 1,
                                                               span_102279);
                    
                    loopres_f_res_102309 = loopres_f_res_f_res_102311;
                }
                loopres_102299 = loopres_f_res_102307;
                loopres_102300 = loopres_f_res_102308;
                loopres_102301 = loopres_f_res_102309;
            }
            
            bool loop_cond_102312 = slt64(loopres_102301, min_res_92421);
            bool loop_while_tmp_102365 = loop_cond_102312;
            int64_t l_idx_tmp_102366 = loopres_102299;
            int64_t r_idx_tmp_102367 = loopres_102300;
            int64_t span_tmp_102368 = loopres_102301;
            
            loop_while_102276 = loop_while_tmp_102365;
            l_idx_102277 = l_idx_tmp_102366;
            r_idx_102278 = r_idx_tmp_102367;
            span_102279 = span_tmp_102368;
        }
        idx_101868 = loop_while_102276;
        idx_101869 = l_idx_102277;
        idx_101870 = r_idx_102278;
        idx_101871 = span_102279;
        
        int64_t min_res_101909 = smin64(min_arg_94574, idx_101869);
        int64_t max_res_101910 = smax64((int64_t) 0, min_res_101909);
        int64_t x_101911 = add64(min_res_94575, max_res_101910);
        int64_t r_101912 = sub64(x_101911, (int64_t) 1);
        bool x_101913 = sle64((int64_t) 0, r_101912);
        bool y_101914 = slt64(r_101912, n_92399);
        bool bounds_check_101915 = x_101913 && y_101914;
        bool index_certs_101916;
        
        if (!bounds_check_101915) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_101912,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_101917;
        
        x_101917 = ((int64_t *) mem_100199.mem)[r_101912];
        
        int64_t abs_arg_101918 = sub64(x_101917, min_res_101845);
        int64_t abs_res_101919 = abs64(abs_arg_101918);
        bool x_101920 = sle64((int64_t) 0, max_res_101910);
        bool y_101921 = slt64(max_res_101910, n_92399);
        bool bounds_check_101922 = x_101920 && y_101921;
        bool index_certs_101923;
        
        if (!bounds_check_101922) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_101910,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_101924;
        
        x_101924 = ((int64_t *) mem_100199.mem)[max_res_101910];
        
        int64_t abs_arg_101925 = sub64(x_101924, min_res_101845);
        int64_t abs_res_101926 = abs64(abs_arg_101925);
        int64_t max_res_101927 = smax64(abs_res_101919, abs_res_101926);
        double defunc_0_f_res_101928 = sitofp_i64_f64(max_res_101927);
        double defunc_1_f_res_101929 = max_res_94579 + defunc_0_f_res_101928;
        double defunc_2_reduce_res_101930;
        int64_t flat_tid_102313 = (int64_t) 0;
        int32_t num_tasks_102369;
        
        defunc_2_reduce_res_101930 = 0.0;
        
        struct futhark_mc_task_109762 futhark_mc_task_109762;
        
        futhark_mc_task_109762.ctx = ctx;
        futhark_mc_task_109762.free_last_res_94554 = last_res_94554;
        futhark_mc_task_109762.free_mem_100199 = mem_100199.mem;
        futhark_mc_task_109762.free_mem_100205 = mem_100205.mem;
        futhark_mc_task_109762.free_min_res_101845 = min_res_101845;
        futhark_mc_task_109762.free_max_res_101910 = max_res_101910;
        futhark_mc_task_109762.free_defunc_1_f_res_101929 =
            defunc_1_f_res_101929;
        futhark_mc_task_109762.retval_defunc_2_reduce_res_101930 =
            &defunc_2_reduce_res_101930;
        
        struct scheduler_segop futhark_mc_task_109762_task;
        
        futhark_mc_task_109762_task.args = &futhark_mc_task_109762;
        futhark_mc_task_109762_task.top_level_fn =
            futhark_mc_segred_task_109763;
        futhark_mc_task_109762_task.name = "futhark_mc_segred_task_109763";
        futhark_mc_task_109762_task.iterations = q_92401;
        futhark_mc_task_109762_task.task_time =
            &ctx->futhark_mc_segred_task_109763_total_time;
        futhark_mc_task_109762_task.task_iter =
            &ctx->futhark_mc_segred_task_109763_total_iter;
        futhark_mc_task_109762_task.sched = STATIC;
        futhark_mc_task_109762_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109763_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109762_task);
        
        if (futhark_mc_segred_task_109763_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double a0_101952 = 1.0 / defunc_2_reduce_res_101930;
        double defunc_2_reduce_res_101953;
        int64_t flat_tid_102334 = (int64_t) 0;
        int32_t num_tasks_102378;
        
        defunc_2_reduce_res_101953 = 0.0;
        
        struct futhark_mc_task_109767 futhark_mc_task_109767;
        
        futhark_mc_task_109767.ctx = ctx;
        futhark_mc_task_109767.free_last_res_94554 = last_res_94554;
        futhark_mc_task_109767.free_mem_100196 = mem_100196.mem;
        futhark_mc_task_109767.free_mem_100199 = mem_100199.mem;
        futhark_mc_task_109767.free_mem_100205 = mem_100205.mem;
        futhark_mc_task_109767.free_min_res_101845 = min_res_101845;
        futhark_mc_task_109767.free_max_res_101910 = max_res_101910;
        futhark_mc_task_109767.free_defunc_1_f_res_101929 =
            defunc_1_f_res_101929;
        futhark_mc_task_109767.free_a0_101952 = a0_101952;
        futhark_mc_task_109767.retval_defunc_2_reduce_res_101953 =
            &defunc_2_reduce_res_101953;
        
        struct scheduler_segop futhark_mc_task_109767_task;
        
        futhark_mc_task_109767_task.args = &futhark_mc_task_109767;
        futhark_mc_task_109767_task.top_level_fn =
            futhark_mc_segred_task_109768;
        futhark_mc_task_109767_task.name = "futhark_mc_segred_task_109768";
        futhark_mc_task_109767_task.iterations = q_92401;
        futhark_mc_task_109767_task.task_time =
            &ctx->futhark_mc_segred_task_109768_total_time;
        futhark_mc_task_109767_task.task_iter =
            &ctx->futhark_mc_segred_task_109768_total_iter;
        futhark_mc_task_109767_task.sched = STATIC;
        futhark_mc_task_109767_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109768_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109767_task);
        
        if (futhark_mc_segred_task_109768_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_100208.mem)[gtid_101843] = defunc_2_reduce_res_101953;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109761_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109761_end -
                 futhark_mc_segmap_parloop_109761_start;
        
        ctx->futhark_mc_segmap_parloop_109761_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109761_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109761_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109759(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_101842 = tid;
    int num_tasks_102146 = info.nsubtasks;
    struct futhark_mc_task_109755 *futhark_mc_task_109755 =
                                  (struct futhark_mc_task_109755 *) args;
    struct futhark_context *ctx = futhark_mc_task_109755->ctx;
    uint64_t futhark_mc_segmap_nested_task_109759_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109759_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109755->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109755->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109755->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109755->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109755->free_i_92415;
    bool x_92416 = futhark_mc_task_109755->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109755->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109755->free_loop_cond_92426;
    int64_t last_res_94554 = futhark_mc_task_109755->free_last_res_94554;
    int64_t min_arg_94573 = futhark_mc_task_109755->free_min_arg_94573;
    int64_t min_arg_94574 = futhark_mc_task_109755->free_min_arg_94574;
    int64_t min_res_94575 = futhark_mc_task_109755->free_min_res_94575;
    double max_res_94579 = futhark_mc_task_109755->free_max_res_94579;
    struct memblock mem_100196 = {.desc ="mem_100196", .mem =
                                  futhark_mc_task_109755->free_mem_100196,
                                  .size =0, .references =NULL};
    struct memblock mem_100199 = {.desc ="mem_100199", .mem =
                                  futhark_mc_task_109755->free_mem_100199,
                                  .size =0, .references =NULL};
    struct memblock mem_100202 = {.desc ="mem_100202", .mem =
                                  futhark_mc_task_109755->free_mem_100202,
                                  .size =0, .references =NULL};
    struct memblock mem_100205 = {.desc ="mem_100205", .mem =
                                  futhark_mc_task_109755->free_mem_100205,
                                  .size =0, .references =NULL};
    struct memblock mem_100208 = {.desc ="mem_100208", .mem =
                                  futhark_mc_task_109755->free_mem_100208,
                                  .size =0, .references =NULL};
    int64_t iter_102257;
    struct futhark_mc_segmap_parloop_struct_109760
    futhark_mc_segmap_parloop_struct_109760;
    
    futhark_mc_segmap_parloop_struct_109760.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109760.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109760.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109760.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109760.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109760.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109760.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109760.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109760.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109760.free_last_res_94554 =
        last_res_94554;
    futhark_mc_segmap_parloop_struct_109760.free_min_arg_94573 = min_arg_94573;
    futhark_mc_segmap_parloop_struct_109760.free_min_arg_94574 = min_arg_94574;
    futhark_mc_segmap_parloop_struct_109760.free_min_res_94575 = min_res_94575;
    futhark_mc_segmap_parloop_struct_109760.free_max_res_94579 = max_res_94579;
    futhark_mc_segmap_parloop_struct_109760.free_mem_100196 = mem_100196.mem;
    futhark_mc_segmap_parloop_struct_109760.free_mem_100199 = mem_100199.mem;
    futhark_mc_segmap_parloop_struct_109760.free_mem_100202 = mem_100202.mem;
    futhark_mc_segmap_parloop_struct_109760.free_mem_100205 = mem_100205.mem;
    futhark_mc_segmap_parloop_struct_109760.free_mem_100208 = mem_100208.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109761_task;
    
    futhark_mc_segmap_parloop_109761_task.name =
        "futhark_mc_segmap_parloop_109761";
    futhark_mc_segmap_parloop_109761_task.fn = futhark_mc_segmap_parloop_109761;
    futhark_mc_segmap_parloop_109761_task.args =
        &futhark_mc_segmap_parloop_struct_109760;
    futhark_mc_segmap_parloop_109761_task.iterations = iterations;
    futhark_mc_segmap_parloop_109761_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109761_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109761_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109761_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109761_task);
    
    if (futhark_mc_segmap_parloop_109761_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109761_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109761_total_end -
                 futhark_mc_segmap_parloop_109761_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109761_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109761_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109761_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109759_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109759_end -
                 futhark_mc_segmap_nested_task_109759_start;
        
        ctx->futhark_mc_segmap_nested_task_109759_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109759_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109759_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_109729(void *args, int64_t start,
                                            int64_t end, int flat_tid_94541,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109728
    *futhark_mc_segmap_parloop_struct_109728 =
    (struct futhark_mc_segmap_parloop_struct_109728 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109728->ctx;
    uint64_t futhark_mc_segmap_parloop_109729_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109729_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109728->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109728->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109728->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109728->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109728->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109728->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109728->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109728->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109728->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109728->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109728->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100192 =
            futhark_mc_segmap_parloop_struct_109728->free_bytes_100192;
    int64_t bytes_100204 =
            futhark_mc_segmap_parloop_struct_109728->free_bytes_100204;
    int64_t bytes_100207 =
            futhark_mc_segmap_parloop_struct_109728->free_bytes_100207;
    struct memblock mem_100302 = {.desc ="mem_100302", .mem =
                                  futhark_mc_segmap_parloop_struct_109728->free_mem_100302,
                                  .size =0, .references =NULL};
    size_t mem_100193_cached_sizze_109730 = 0;
    unsigned char *mem_100193 = NULL;
    size_t mem_100196_cached_sizze_109731 = 0;
    unsigned char *mem_100196 = NULL;
    size_t mem_100199_cached_sizze_109732 = 0;
    unsigned char *mem_100199 = NULL;
    size_t mem_100202_cached_sizze_109733 = 0;
    unsigned char *mem_100202 = NULL;
    size_t mem_100205_cached_sizze_109734 = 0;
    unsigned char *mem_100205 = NULL;
    size_t mem_100208_cached_sizze_109735 = 0;
    unsigned char *mem_100208 = NULL;
    int64_t iterations = end - start;
    int64_t iter_101816 = start;
    
    if (mem_100193_cached_sizze_109730 < (size_t) bytes_100192) {
        mem_100193 = realloc(mem_100193, bytes_100192);
        mem_100193_cached_sizze_109730 = bytes_100192;
    }
    if (mem_100196_cached_sizze_109731 < (size_t) bytes_100192) {
        mem_100196 = realloc(mem_100196, bytes_100192);
        mem_100196_cached_sizze_109731 = bytes_100192;
    }
    if (mem_100199_cached_sizze_109732 < (size_t) bytes_100192) {
        mem_100199 = realloc(mem_100199, bytes_100192);
        mem_100199_cached_sizze_109732 = bytes_100192;
    }
    if (mem_100202_cached_sizze_109733 < (size_t) bytes_100192) {
        mem_100202 = realloc(mem_100202, bytes_100192);
        mem_100202_cached_sizze_109733 = bytes_100192;
    }
    if (mem_100205_cached_sizze_109734 < (size_t) bytes_100204) {
        mem_100205 = realloc(mem_100205, bytes_100204);
        mem_100205_cached_sizze_109734 = bytes_100204;
    }
    if (mem_100208_cached_sizze_109735 < (size_t) bytes_100207) {
        mem_100208 = realloc(mem_100208, bytes_100207);
        mem_100208_cached_sizze_109735 = bytes_100207;
    }
    for (; iter_101816 < end; iter_101816++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102114 = m_92398;
        int64_t gtid_94542 = iter_101816;
        int64_t remnant_102115 = iter_101816 - gtid_94542;
        int64_t flat_tid_101817 = (int64_t) 0;
        int32_t num_tasks_102116;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_109736 futhark_mc_task_109736;
        
        futhark_mc_task_109736.ctx = ctx;
        futhark_mc_task_109736.free_n_92399 = n_92399;
        futhark_mc_task_109736.free_gtid_94542 = gtid_94542;
        futhark_mc_task_109736.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109736.free_mem_100193 = mem_100193;
        
        struct scheduler_segop futhark_mc_task_109736_task;
        
        futhark_mc_task_109736_task.args = &futhark_mc_task_109736;
        futhark_mc_task_109736_task.top_level_fn =
            futhark_mc_segscan_task_109737;
        futhark_mc_task_109736_task.name = "futhark_mc_segscan_task_109737";
        futhark_mc_task_109736_task.iterations = n_92399;
        futhark_mc_task_109736_task.task_time =
            &ctx->futhark_mc_segscan_task_109737_total_time;
        futhark_mc_task_109736_task.task_iter =
            &ctx->futhark_mc_segscan_task_109737_total_iter;
        futhark_mc_task_109736_task.sched = STATIC;
        futhark_mc_task_109736_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_109737_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109736_task);
        
        if (futhark_mc_segscan_task_109737_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_94554;
        
        last_res_94554 = ((int64_t *) mem_100193)[i_92415];
        for (int64_t i_102130 = 0; i_102130 < n_92399; i_102130++) {
            ((double *) mem_100196)[i_102130] = 0.0;
        }
        for (int64_t i_102131 = 0; i_102131 < n_92399; i_102131++) {
            ((int64_t *) mem_100199)[i_102131] = (int64_t) -1;
        }
        
        int64_t flat_tid_101826 = (int64_t) 0;
        int32_t num_tasks_102132;
        struct futhark_mc_task_109743 futhark_mc_task_109743;
        
        futhark_mc_task_109743.ctx = ctx;
        futhark_mc_task_109743.free_n_92399 = n_92399;
        futhark_mc_task_109743.free_gtid_94542 = gtid_94542;
        futhark_mc_task_109743.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109743.free_mem_100193 = mem_100193;
        futhark_mc_task_109743.free_mem_100196 = mem_100196;
        futhark_mc_task_109743.free_mem_100199 = mem_100199;
        
        struct scheduler_segop futhark_mc_task_109743_task;
        
        futhark_mc_task_109743_task.args = &futhark_mc_task_109743;
        futhark_mc_task_109743_task.top_level_fn =
            futhark_mc_segmap_task_109744;
        futhark_mc_task_109743_task.name = "futhark_mc_segmap_task_109744";
        futhark_mc_task_109743_task.iterations = n_92399;
        futhark_mc_task_109743_task.task_time =
            &ctx->futhark_mc_segmap_task_109744_total_time;
        futhark_mc_task_109743_task.task_iter =
            &ctx->futhark_mc_segmap_task_109744_total_iter;
        futhark_mc_task_109743_task.sched = STATIC;
        futhark_mc_task_109743_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109744_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109743_task);
        
        if (futhark_mc_segmap_task_109744_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_101834 = (int64_t) 0;
        int32_t num_tasks_102138;
        struct futhark_mc_task_109747 futhark_mc_task_109747;
        
        futhark_mc_task_109747.ctx = ctx;
        futhark_mc_task_109747.free_n_92399 = n_92399;
        futhark_mc_task_109747.free_mem_100199 = mem_100199;
        futhark_mc_task_109747.free_mem_100202 = mem_100202;
        
        struct scheduler_segop futhark_mc_task_109747_task;
        
        futhark_mc_task_109747_task.args = &futhark_mc_task_109747;
        futhark_mc_task_109747_task.top_level_fn =
            futhark_mc_segmap_task_109748;
        futhark_mc_task_109747_task.name = "futhark_mc_segmap_task_109748";
        futhark_mc_task_109747_task.iterations = n_92399;
        futhark_mc_task_109747_task.task_time =
            &ctx->futhark_mc_segmap_task_109748_total_time;
        futhark_mc_task_109747_task.task_iter =
            &ctx->futhark_mc_segmap_task_109748_total_iter;
        futhark_mc_task_109747_task.sched = STATIC;
        futhark_mc_task_109747_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109748_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109747_task);
        
        if (futhark_mc_segmap_task_109748_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_94573 = sub64(last_res_94554, (int64_t) 1);
        int64_t min_arg_94574 = sub64(last_res_94554, min_res_92421);
        int64_t min_res_94575 = smin64(q_92401, last_res_94554);
        double i64_res_94576 = sitofp_i64_f64(last_res_94554);
        double x_94577 = i64_res_92427 - i64_res_94576;
        double max_arg_94578 = x_94577 / 2.0;
        double max_res_94579 = fmax64(0.0, max_arg_94578);
        int64_t flat_tid_101838 = (int64_t) 0;
        int32_t num_tasks_102142;
        struct futhark_mc_task_109751 futhark_mc_task_109751;
        
        futhark_mc_task_109751.ctx = ctx;
        futhark_mc_task_109751.free_q_92401 = q_92401;
        futhark_mc_task_109751.free_last_res_94554 = last_res_94554;
        futhark_mc_task_109751.free_mem_100205 = mem_100205;
        
        struct scheduler_segop futhark_mc_task_109751_task;
        
        futhark_mc_task_109751_task.args = &futhark_mc_task_109751;
        futhark_mc_task_109751_task.top_level_fn =
            futhark_mc_segmap_task_109752;
        futhark_mc_task_109751_task.name = "futhark_mc_segmap_task_109752";
        futhark_mc_task_109751_task.iterations = q_92401;
        futhark_mc_task_109751_task.task_time =
            &ctx->futhark_mc_segmap_task_109752_total_time;
        futhark_mc_task_109751_task.task_iter =
            &ctx->futhark_mc_segmap_task_109752_total_iter;
        futhark_mc_task_109751_task.sched = STATIC;
        futhark_mc_task_109751_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109752_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109751_task);
        
        if (futhark_mc_segmap_task_109752_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_101980 = (int64_t) 0;
        int32_t num_tasks_102146;
        int64_t flat_tid_101842 = (int64_t) 0;
        struct futhark_mc_task_109755 futhark_mc_task_109755;
        
        futhark_mc_task_109755.ctx = ctx;
        futhark_mc_task_109755.free_n_92399 = n_92399;
        futhark_mc_task_109755.free_q_92401 = q_92401;
        futhark_mc_task_109755.free_jump_92403 = jump_92403;
        futhark_mc_task_109755.free_n_m_92409 = n_m_92409;
        futhark_mc_task_109755.free_i_92415 = i_92415;
        futhark_mc_task_109755.free_x_92416 = x_92416;
        futhark_mc_task_109755.free_min_res_92421 = min_res_92421;
        futhark_mc_task_109755.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_109755.free_last_res_94554 = last_res_94554;
        futhark_mc_task_109755.free_min_arg_94573 = min_arg_94573;
        futhark_mc_task_109755.free_min_arg_94574 = min_arg_94574;
        futhark_mc_task_109755.free_min_res_94575 = min_res_94575;
        futhark_mc_task_109755.free_max_res_94579 = max_res_94579;
        futhark_mc_task_109755.free_mem_100196 = mem_100196;
        futhark_mc_task_109755.free_mem_100199 = mem_100199;
        futhark_mc_task_109755.free_mem_100202 = mem_100202;
        futhark_mc_task_109755.free_mem_100205 = mem_100205;
        futhark_mc_task_109755.free_mem_100208 = mem_100208;
        
        struct scheduler_segop futhark_mc_task_109755_task;
        
        futhark_mc_task_109755_task.args = &futhark_mc_task_109755;
        futhark_mc_task_109755_task.top_level_fn =
            futhark_mc_segmap_task_109756;
        futhark_mc_task_109755_task.name = "futhark_mc_segmap_task_109756";
        futhark_mc_task_109755_task.iterations = n_m_92409;
        futhark_mc_task_109755_task.task_time =
            &ctx->futhark_mc_segmap_task_109756_total_time;
        futhark_mc_task_109755_task.task_iter =
            &ctx->futhark_mc_segmap_task_109756_total_iter;
        futhark_mc_task_109755_task.sched = DYNAMIC;
        futhark_mc_task_109755_task.nested_fn =
            futhark_mc_segmap_nested_task_109759;
        
        int futhark_mc_segmap_task_109756_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109755_task);
        
        if (futhark_mc_segmap_task_109756_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100302.mem + gtid_94542 * n_m_92409 * (int64_t) 8,
                    mem_100208 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100193);
    free(mem_100196);
    free(mem_100199);
    free(mem_100202);
    free(mem_100205);
    free(mem_100208);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109729_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109729_end -
                 futhark_mc_segmap_parloop_109729_start;
        
        ctx->futhark_mc_segmap_parloop_109729_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109729_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109729_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109727(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_94541 = tid;
    int num_tasks_101628 = info.nsubtasks;
    struct futhark_mc_task_109717 *futhark_mc_task_109717 =
                                  (struct futhark_mc_task_109717 *) args;
    struct futhark_context *ctx = futhark_mc_task_109717->ctx;
    uint64_t futhark_mc_segmap_nested_task_109727_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109727_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109717->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109717->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109717->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109717->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109717->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109717->free_i_92415;
    bool x_92416 = futhark_mc_task_109717->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109717->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109717->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109717->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109717->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100192 = futhark_mc_task_109717->free_bytes_100192;
    int64_t bytes_100204 = futhark_mc_task_109717->free_bytes_100204;
    int64_t bytes_100207 = futhark_mc_task_109717->free_bytes_100207;
    struct memblock mem_100302 = {.desc ="mem_100302", .mem =
                                  futhark_mc_task_109717->free_mem_100302,
                                  .size =0, .references =NULL};
    int64_t iter_101816;
    struct futhark_mc_segmap_parloop_struct_109728
    futhark_mc_segmap_parloop_struct_109728;
    
    futhark_mc_segmap_parloop_struct_109728.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109728.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109728.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109728.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109728.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109728.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109728.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109728.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109728.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109728.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109728.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109728.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109728.free_bytes_100192 = bytes_100192;
    futhark_mc_segmap_parloop_struct_109728.free_bytes_100204 = bytes_100204;
    futhark_mc_segmap_parloop_struct_109728.free_bytes_100207 = bytes_100207;
    futhark_mc_segmap_parloop_struct_109728.free_mem_100302 = mem_100302.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109729_task;
    
    futhark_mc_segmap_parloop_109729_task.name =
        "futhark_mc_segmap_parloop_109729";
    futhark_mc_segmap_parloop_109729_task.fn = futhark_mc_segmap_parloop_109729;
    futhark_mc_segmap_parloop_109729_task.args =
        &futhark_mc_segmap_parloop_struct_109728;
    futhark_mc_segmap_parloop_109729_task.iterations = iterations;
    futhark_mc_segmap_parloop_109729_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109729_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109729_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109729_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109729_task);
    
    if (futhark_mc_segmap_parloop_109729_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109729_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109729_total_end -
                 futhark_mc_segmap_parloop_109729_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109729_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109729_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109729_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109727_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109727_end -
                 futhark_mc_segmap_nested_task_109727_start;
        
        ctx->futhark_mc_segmap_nested_task_109727_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109727_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109727_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109772 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100304;
    int64_t free_bytes_100316;
    int64_t free_bytes_100319;
    unsigned char *free_mem_100432;
    unsigned char *free_mem_100436;
};
struct futhark_mc_segmap_parloop_struct_109774 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100304;
    int64_t free_bytes_100316;
    int64_t free_bytes_100319;
    unsigned char *free_mem_100432;
    unsigned char *free_mem_100436;
};
static int futhark_mc_segmap_parloop_109775(void *args, int64_t start,
                                            int64_t end, int flat_tid_94865,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109774
    *futhark_mc_segmap_parloop_struct_109774 =
    (struct futhark_mc_segmap_parloop_struct_109774 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109774->ctx;
    uint64_t futhark_mc_segmap_parloop_109775_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109775_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109774->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109774->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109774->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109774->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109774->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109774->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109774->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109774->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109774->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109774->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109774->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100304 =
            futhark_mc_segmap_parloop_struct_109774->free_bytes_100304;
    int64_t bytes_100316 =
            futhark_mc_segmap_parloop_struct_109774->free_bytes_100316;
    int64_t bytes_100319 =
            futhark_mc_segmap_parloop_struct_109774->free_bytes_100319;
    struct memblock mem_100432 = {.desc ="mem_100432", .mem =
                                  futhark_mc_segmap_parloop_struct_109774->free_mem_100432,
                                  .size =0, .references =NULL};
    struct memblock mem_100436 = {.desc ="mem_100436", .mem =
                                  futhark_mc_segmap_parloop_struct_109774->free_mem_100436,
                                  .size =0, .references =NULL};
    size_t mem_100326_cached_sizze_109776 = 0;
    unsigned char *mem_100326 = NULL;
    size_t mem_100341_cached_sizze_109777 = 0;
    unsigned char *mem_100341 = NULL;
    size_t mem_100344_cached_sizze_109778 = 0;
    unsigned char *mem_100344 = NULL;
    size_t mem_100371_cached_sizze_109779 = 0;
    unsigned char *mem_100371 = NULL;
    size_t mem_100386_cached_sizze_109780 = 0;
    unsigned char *mem_100386 = NULL;
    size_t mem_100401_cached_sizze_109781 = 0;
    unsigned char *mem_100401 = NULL;
    size_t mem_100404_cached_sizze_109782 = 0;
    unsigned char *mem_100404 = NULL;
    int64_t iterations = end - start;
    int64_t iter_102388 = start;
    
    if (mem_100326_cached_sizze_109776 < (size_t) bytes_100304) {
        mem_100326 = realloc(mem_100326, bytes_100304);
        mem_100326_cached_sizze_109776 = bytes_100304;
    }
    if (mem_100341_cached_sizze_109777 < (size_t) bytes_100304) {
        mem_100341 = realloc(mem_100341, bytes_100304);
        mem_100341_cached_sizze_109777 = bytes_100304;
    }
    if (mem_100344_cached_sizze_109778 < (size_t) bytes_100304) {
        mem_100344 = realloc(mem_100344, bytes_100304);
        mem_100344_cached_sizze_109778 = bytes_100304;
    }
    if (mem_100371_cached_sizze_109779 < (size_t) bytes_100304) {
        mem_100371 = realloc(mem_100371, bytes_100304);
        mem_100371_cached_sizze_109779 = bytes_100304;
    }
    if (mem_100386_cached_sizze_109780 < (size_t) bytes_100316) {
        mem_100386 = realloc(mem_100386, bytes_100316);
        mem_100386_cached_sizze_109780 = bytes_100316;
    }
    if (mem_100401_cached_sizze_109781 < (size_t) bytes_100319) {
        mem_100401 = realloc(mem_100401, bytes_100319);
        mem_100401_cached_sizze_109781 = bytes_100319;
    }
    if (mem_100404_cached_sizze_109782 < (size_t) bytes_100319) {
        mem_100404 = realloc(mem_100404, bytes_100319);
        mem_100404_cached_sizze_109782 = bytes_100319;
    }
    for (; iter_102388 < end; iter_102388++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102582 = m_92398;
        int64_t gtid_94866 = iter_102388;
        int64_t remnant_102583 = iter_102388 - gtid_94866;
        int64_t discard_99666;
        int64_t scanacc_102390 = (int64_t) 0;
        
        for (int64_t i_102389 = 0; i_102389 < n_92399; i_102389++) {
            double x_102392;
            
            x_102392 = ((double *) Y_mem_100186.mem)[gtid_94866 * n_92399 +
                                                     i_102389];
            
            bool isnan_res_102393;
            
            isnan_res_102393 = futrts_isnan64(x_102392);
            
            bool defunc_0_p_res_102394 = !isnan_res_102393;
            int64_t defunc_0_f_res_102395 =
                    btoi_bool_i64(defunc_0_p_res_102394);
            int64_t defunc_1_op_res_102396 = add64(defunc_0_f_res_102395,
                                                   scanacc_102390);
            
            ((int64_t *) mem_100326)[i_102389] = defunc_1_op_res_102396;
            
            int64_t scanacc_tmp_102584 = defunc_1_op_res_102396;
            
            scanacc_102390 = scanacc_tmp_102584;
        }
        discard_99666 = scanacc_102390;
        
        int64_t last_res_92631;
        
        last_res_92631 = ((int64_t *) mem_100326)[i_92415];
        for (int64_t i_102586 = 0; i_102586 < n_92399; i_102586++) {
            ((double *) mem_100341)[i_102586] = 0.0;
        }
        for (int64_t i_102587 = 0; i_102587 < n_92399; i_102587++) {
            ((int64_t *) mem_100344)[i_102587] = (int64_t) -1;
        }
        for (int64_t write_iter_102398 = 0; write_iter_102398 < n_92399;
             write_iter_102398++) {
            double write_iv_102401;
            
            write_iv_102401 = ((double *) Y_mem_100186.mem)[gtid_94866 *
                                                            n_92399 +
                                                            write_iter_102398];
            
            bool isnan_res_102402;
            
            isnan_res_102402 = futrts_isnan64(write_iv_102401);
            
            bool defunc_0_p_res_102403 = !isnan_res_102402;
            int64_t defunc_1_f_res_102404;
            
            if (defunc_0_p_res_102403) {
                int64_t write_iv_102405;
                
                write_iv_102405 = ((int64_t *) mem_100326)[write_iter_102398];
                
                int64_t defunc_1_f_res_t_res_102406 = sub64(write_iv_102405,
                                                            (int64_t) 1);
                
                defunc_1_f_res_102404 = defunc_1_f_res_t_res_102406;
            } else {
                defunc_1_f_res_102404 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_102404) &&
                slt64(defunc_1_f_res_102404, n_92399)) {
                ((int64_t *) mem_100344)[defunc_1_f_res_102404] =
                    write_iter_102398;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_102404) &&
                slt64(defunc_1_f_res_102404, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_100341 + defunc_1_f_res_102404 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_94866 * n_92399 +
                                                write_iter_102398) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_102410 = 0; i_102410 < n_92399; i_102410++) {
            int64_t x_102412;
            
            x_102412 = ((int64_t *) mem_100344)[i_102410];
            
            int64_t defunc_0_f_res_102413 = add64((int64_t) 1, x_102412);
            
            ((int64_t *) mem_100371)[i_102410] = defunc_0_f_res_102413;
        }
        
        int64_t min_arg_92646 = sub64(last_res_92631, (int64_t) 1);
        int64_t min_arg_92647 = sub64(last_res_92631, min_res_92421);
        int64_t min_res_92648 = smin64(q_92401, last_res_92631);
        double i64_res_92649 = sitofp_i64_f64(last_res_92631);
        double x_92650 = i64_res_92427 - i64_res_92649;
        double max_arg_92651 = x_92650 / 2.0;
        double max_res_92652 = fmax64(0.0, max_arg_92651);
        
        for (int64_t i_102415 = 0; i_102415 < q_92401; i_102415++) {
            bool cond_102417 = sle64(last_res_92631, i_102415);
            double defunc_0_f_res_102418;
            
            if (cond_102417) {
                defunc_0_f_res_102418 = 0.0;
            } else {
                defunc_0_f_res_102418 = 1.0;
            }
            ((double *) mem_100386)[i_102415] = defunc_0_f_res_102418;
        }
        for (int64_t i_102420 = 0; i_102420 < n_m_92409; i_102420++) {
            int64_t min_arg_102423 = mul64(jump_92403, i_102420);
            int64_t min_res_102424 = smin64(i_92415, min_arg_102423);
            int64_t defunc_0_g_res_102425 = add64((int64_t) 1, min_res_102424);
            bool init_idx_102426;
            int64_t init_idx_102427;
            int64_t init_idx_102428;
            bool loop_while_102429;
            int64_t low_102430;
            int64_t high_102431;
            
            loop_while_102429 = x_92416;
            low_102430 = (int64_t) 0;
            high_102431 = i_92415;
            while (loop_while_102429) {
                int64_t x_102432 = add64(low_102430, high_102431);
                int64_t mid_102433 = sdiv64(x_102432, (int64_t) 2);
                bool x_102434 = sle64((int64_t) 0, mid_102433);
                bool y_102435 = slt64(mid_102433, n_92399);
                bool bounds_check_102436 = x_102434 && y_102435;
                bool index_certs_102437;
                
                if (!bounds_check_102436) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_102433,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_102438;
                
                mid_id_102438 = ((int64_t *) mem_100371)[mid_102433];
                
                bool cond_102439 = slt64(mid_id_102438, (int64_t) 0);
                int64_t mid_idx_102440;
                
                if (cond_102439) {
                    mid_idx_102440 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_102440 = mid_id_102438;
                }
                
                bool cond_102441 = sle64(defunc_0_g_res_102425, mid_idx_102440);
                int64_t loopres_102442;
                int64_t loopres_102443;
                
                if (cond_102441) {
                    int64_t loopres_t_res_102444 = sub64(mid_102433,
                                                         (int64_t) 1);
                    
                    loopres_102442 = low_102430;
                    loopres_102443 = loopres_t_res_102444;
                } else {
                    int64_t loopres_f_res_102445 = add64((int64_t) 1,
                                                         mid_102433);
                    
                    loopres_102442 = loopres_f_res_102445;
                    loopres_102443 = high_102431;
                }
                
                bool loop_cond_102446 = sle64(loopres_102442, loopres_102443);
                bool loop_while_tmp_102594 = loop_cond_102446;
                int64_t low_tmp_102595 = loopres_102442;
                int64_t high_tmp_102596 = loopres_102443;
                
                loop_while_102429 = loop_while_tmp_102594;
                low_102430 = low_tmp_102595;
                high_102431 = high_tmp_102596;
            }
            init_idx_102426 = loop_while_102429;
            init_idx_102427 = low_102430;
            init_idx_102428 = high_102431;
            
            bool idx_102447;
            int64_t idx_102448;
            int64_t idx_102449;
            int64_t idx_102450;
            bool loop_while_102451;
            int64_t l_idx_102452;
            int64_t r_idx_102453;
            int64_t span_102454;
            
            loop_while_102451 = loop_cond_92426;
            l_idx_102452 = init_idx_102427;
            r_idx_102453 = init_idx_102427;
            span_102454 = (int64_t) 1;
            while (loop_while_102451) {
                int64_t max_arg_102455 = sub64(l_idx_102452, (int64_t) 1);
                int64_t max_res_102456 = smax64((int64_t) 0, max_arg_102455);
                int64_t min_arg_102457 = add64((int64_t) 1, r_idx_102453);
                int64_t min_res_102458 = smin64(min_arg_92646, min_arg_102457);
                bool x_102459 = sle64((int64_t) 0, max_res_102456);
                bool y_102460 = slt64(max_res_102456, n_92399);
                bool bounds_check_102461 = x_102459 && y_102460;
                bool index_certs_102462;
                
                if (!bounds_check_102461) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_102456,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_102463;
                
                x_102463 = ((int64_t *) mem_100371)[max_res_102456];
                
                int64_t abs_arg_102464 = sub64(x_102463, defunc_0_g_res_102425);
                int64_t abs_res_102465 = abs64(abs_arg_102464);
                bool x_102466 = sle64((int64_t) 0, min_res_102458);
                bool y_102467 = slt64(min_res_102458, n_92399);
                bool bounds_check_102468 = x_102466 && y_102467;
                bool index_certs_102469;
                
                if (!bounds_check_102468) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_102458,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_102470;
                
                x_102470 = ((int64_t *) mem_100371)[min_res_102458];
                
                int64_t abs_arg_102471 = sub64(x_102470, defunc_0_g_res_102425);
                int64_t abs_res_102472 = abs64(abs_arg_102471);
                bool cond_102473 = max_res_102456 == l_idx_102452;
                int64_t loopres_102474;
                int64_t loopres_102475;
                int64_t loopres_102476;
                
                if (cond_102473) {
                    loopres_102474 = l_idx_102452;
                    loopres_102475 = r_idx_102453;
                    loopres_102476 = min_res_92421;
                } else {
                    bool cond_102477 = slt64(abs_res_102465, abs_res_102472);
                    bool cond_f_res_102478 = min_res_102458 == r_idx_102453;
                    bool x_102479 = !cond_102477;
                    bool y_102480 = cond_f_res_102478 && x_102479;
                    bool cond_102481 = cond_102477 || y_102480;
                    int64_t loopres_f_res_102482;
                    
                    if (cond_102481) {
                        loopres_f_res_102482 = max_res_102456;
                    } else {
                        loopres_f_res_102482 = l_idx_102452;
                    }
                    
                    int64_t loopres_f_res_102483;
                    
                    if (cond_102481) {
                        loopres_f_res_102483 = r_idx_102453;
                    } else {
                        loopres_f_res_102483 = min_res_102458;
                    }
                    
                    int64_t loopres_f_res_102484;
                    
                    if (cond_102481) {
                        int64_t loopres_f_res_t_res_102485 = add64((int64_t) 1,
                                                                   span_102454);
                        
                        loopres_f_res_102484 = loopres_f_res_t_res_102485;
                    } else {
                        int64_t loopres_f_res_f_res_102486 = add64((int64_t) 1,
                                                                   span_102454);
                        
                        loopres_f_res_102484 = loopres_f_res_f_res_102486;
                    }
                    loopres_102474 = loopres_f_res_102482;
                    loopres_102475 = loopres_f_res_102483;
                    loopres_102476 = loopres_f_res_102484;
                }
                
                bool loop_cond_102487 = slt64(loopres_102476, min_res_92421);
                bool loop_while_tmp_102597 = loop_cond_102487;
                int64_t l_idx_tmp_102598 = loopres_102474;
                int64_t r_idx_tmp_102599 = loopres_102475;
                int64_t span_tmp_102600 = loopres_102476;
                
                loop_while_102451 = loop_while_tmp_102597;
                l_idx_102452 = l_idx_tmp_102598;
                r_idx_102453 = r_idx_tmp_102599;
                span_102454 = span_tmp_102600;
            }
            idx_102447 = loop_while_102451;
            idx_102448 = l_idx_102452;
            idx_102449 = r_idx_102453;
            idx_102450 = span_102454;
            
            int64_t min_res_102488 = smin64(min_arg_92647, idx_102448);
            int64_t max_res_102489 = smax64((int64_t) 0, min_res_102488);
            int64_t x_102490 = add64(min_res_92648, max_res_102489);
            int64_t r_102491 = sub64(x_102490, (int64_t) 1);
            bool x_102492 = sle64((int64_t) 0, r_102491);
            bool y_102493 = slt64(r_102491, n_92399);
            bool bounds_check_102494 = x_102492 && y_102493;
            bool index_certs_102495;
            
            if (!bounds_check_102494) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_102491,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102496;
            
            x_102496 = ((int64_t *) mem_100344)[r_102491];
            
            int64_t abs_arg_102497 = sub64(x_102496, min_res_102424);
            int64_t abs_res_102498 = abs64(abs_arg_102497);
            bool x_102499 = sle64((int64_t) 0, max_res_102489);
            bool y_102500 = slt64(max_res_102489, n_92399);
            bool bounds_check_102501 = x_102499 && y_102500;
            bool index_certs_102502;
            
            if (!bounds_check_102501) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_102489,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_102503;
            
            x_102503 = ((int64_t *) mem_100344)[max_res_102489];
            
            int64_t abs_arg_102504 = sub64(x_102503, min_res_102424);
            int64_t abs_res_102505 = abs64(abs_arg_102504);
            int64_t max_res_102506 = smax64(abs_res_102498, abs_res_102505);
            double defunc_0_f_res_102507 = sitofp_i64_f64(max_res_102506);
            double defunc_1_f_res_102508 = max_res_92652 +
                   defunc_0_f_res_102507;
            double defunc_2_reduce_res_102509;
            double defunc_2_reduce_res_102510;
            double defunc_2_reduce_res_102511;
            double redout_102513;
            double redout_102514;
            double redout_102515;
            
            redout_102513 = 0.0;
            redout_102514 = 0.0;
            redout_102515 = 0.0;
            for (int64_t i_102512 = 0; i_102512 < q_92401; i_102512++) {
                double x_102516;
                
                x_102516 = ((double *) mem_100386)[i_102512];
                
                bool cond_102517 = sle64(last_res_92631, i_102512);
                int64_t defunc_0_f_res_102518;
                
                if (cond_102517) {
                    defunc_0_f_res_102518 = (int64_t) 0;
                } else {
                    int64_t i_102519 = add64(max_res_102489, i_102512);
                    int64_t defunc_0_add_arg_102520;
                    
                    defunc_0_add_arg_102520 =
                        ((int64_t *) mem_100344)[i_102519];
                    
                    int64_t defunc_1_add_res_102521 = add64((int64_t) 1,
                                                            defunc_0_add_arg_102520);
                    
                    defunc_0_f_res_102518 = defunc_1_add_res_102521;
                }
                
                int64_t binop_p_102522 = sub64(defunc_0_f_res_102518,
                                               min_res_102424);
                double defunc_0_f_res_102523 = sitofp_i64_f64(binop_p_102522);
                double abs_res_102524 = fabs(defunc_0_f_res_102523);
                double tmp1_102525 = abs_res_102524 / defunc_1_f_res_102508;
                double x_102526 = tmp1_102525 * tmp1_102525;
                double y_102527 = tmp1_102525 * x_102526;
                double tmp2_102528 = 1.0 - y_102527;
                double x_102529 = tmp2_102528 * tmp2_102528;
                double tmp3_102530 = tmp2_102528 * x_102529;
                double w_j_102531 = x_102516 * tmp3_102530;
                double xw_j_102532 = defunc_0_f_res_102523 * w_j_102531;
                double x2w_j_102533 = defunc_0_f_res_102523 * xw_j_102532;
                double defunc_1_op_res_102534 = w_j_102531 + redout_102513;
                double defunc_1_op_res_102535 = xw_j_102532 + redout_102514;
                double defunc_1_op_res_102536 = x2w_j_102533 + redout_102515;
                double redout_tmp_102601 = defunc_1_op_res_102534;
                double redout_tmp_102602 = defunc_1_op_res_102535;
                double redout_tmp_102603 = defunc_1_op_res_102536;
                
                redout_102513 = redout_tmp_102601;
                redout_102514 = redout_tmp_102602;
                redout_102515 = redout_tmp_102603;
            }
            defunc_2_reduce_res_102509 = redout_102513;
            defunc_2_reduce_res_102510 = redout_102514;
            defunc_2_reduce_res_102511 = redout_102515;
            
            double x_102537 = defunc_2_reduce_res_102509 *
                   defunc_2_reduce_res_102511;
            double y_102538 = defunc_2_reduce_res_102510 *
                   defunc_2_reduce_res_102510;
            double y_102539 = x_102537 - y_102538;
            double det1_102540 = 1.0 / y_102539;
            double a11_102541 = defunc_2_reduce_res_102511 * det1_102540;
            double x_102542 = 0.0 - defunc_2_reduce_res_102510;
            double b11_102543 = det1_102540 * x_102542;
            double c11_102544 = defunc_2_reduce_res_102509 * det1_102540;
            double defunc_2_reduce_res_102545;
            double defunc_2_reduce_res_102546;
            double redout_102548;
            double redout_102549;
            
            redout_102548 = 0.0;
            redout_102549 = 0.0;
            for (int64_t i_102547 = 0; i_102547 < q_92401; i_102547++) {
                double x_102550;
                
                x_102550 = ((double *) mem_100386)[i_102547];
                
                bool cond_102551 = sle64(last_res_92631, i_102547);
                int64_t defunc_0_f_res_102552;
                
                if (cond_102551) {
                    defunc_0_f_res_102552 = (int64_t) 0;
                } else {
                    int64_t i_102553 = add64(max_res_102489, i_102547);
                    int64_t defunc_0_add_arg_102554;
                    
                    defunc_0_add_arg_102554 =
                        ((int64_t *) mem_100344)[i_102553];
                    
                    int64_t defunc_1_add_res_102555 = add64((int64_t) 1,
                                                            defunc_0_add_arg_102554);
                    
                    defunc_0_f_res_102552 = defunc_1_add_res_102555;
                }
                
                int64_t binop_p_102556 = sub64(defunc_0_f_res_102552,
                                               min_res_102424);
                double defunc_0_f_res_102557 = sitofp_i64_f64(binop_p_102556);
                double abs_res_102558 = fabs(defunc_0_f_res_102557);
                double tmp1_102559 = abs_res_102558 / defunc_1_f_res_102508;
                double x_102560 = tmp1_102559 * tmp1_102559;
                double y_102561 = tmp1_102559 * x_102560;
                double tmp2_102562 = 1.0 - y_102561;
                double x_102563 = tmp2_102562 * tmp2_102562;
                double tmp3_102564 = tmp2_102562 * x_102563;
                double tmp4_102565 = x_102550 * tmp3_102564;
                double defunc_1_f_res_102566 = defunc_0_f_res_102557 *
                       tmp4_102565;
                double defunc_0_f_res_102567;
                
                if (cond_102551) {
                    defunc_0_f_res_102567 = 0.0;
                } else {
                    int64_t i_102568 = add64(max_res_102489, i_102547);
                    double defunc_0_add_arg_102569;
                    
                    defunc_0_add_arg_102569 = ((double *) mem_100341)[i_102568];
                    defunc_0_f_res_102567 = defunc_0_add_arg_102569;
                }
                
                double x_102570 = a11_102541 * tmp4_102565;
                double y_102571 = b11_102543 * defunc_1_f_res_102566;
                double x_102572 = x_102570 + y_102571;
                double defunc_9_fit_fun_res_102573 = defunc_0_f_res_102567 *
                       x_102572;
                double x_102574 = b11_102543 * tmp4_102565;
                double y_102575 = c11_102544 * defunc_1_f_res_102566;
                double x_102576 = x_102574 + y_102575;
                double defunc_9_slope_fun_res_102577 = defunc_0_f_res_102567 *
                       x_102576;
                double defunc_1_op_res_102578 = defunc_9_fit_fun_res_102573 +
                       redout_102548;
                double defunc_1_op_res_102579 = defunc_9_slope_fun_res_102577 +
                       redout_102549;
                double redout_tmp_102604 = defunc_1_op_res_102578;
                double redout_tmp_102605 = defunc_1_op_res_102579;
                
                redout_102548 = redout_tmp_102604;
                redout_102549 = redout_tmp_102605;
            }
            defunc_2_reduce_res_102545 = redout_102548;
            defunc_2_reduce_res_102546 = redout_102549;
            ((double *) mem_100401)[i_102420] = defunc_2_reduce_res_102545;
            ((double *) mem_100404)[i_102420] = defunc_2_reduce_res_102546;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100432.mem + gtid_94866 * n_m_92409 * (int64_t) 8,
                    mem_100401 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100436.mem + gtid_94866 * n_m_92409 * (int64_t) 8,
                    mem_100404 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100326);
    free(mem_100341);
    free(mem_100344);
    free(mem_100371);
    free(mem_100386);
    free(mem_100401);
    free(mem_100404);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109775_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109775_end -
                 futhark_mc_segmap_parloop_109775_start;
        
        ctx->futhark_mc_segmap_parloop_109775_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109775_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109775_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109773(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_94865 = tid;
    int num_tasks_102387 = info.nsubtasks;
    struct futhark_mc_task_109772 *futhark_mc_task_109772 =
                                  (struct futhark_mc_task_109772 *) args;
    struct futhark_context *ctx = futhark_mc_task_109772->ctx;
    uint64_t futhark_mc_segmap_task_109773_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109773_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109772->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109772->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109772->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109772->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109772->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109772->free_i_92415;
    bool x_92416 = futhark_mc_task_109772->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109772->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109772->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109772->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109772->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100304 = futhark_mc_task_109772->free_bytes_100304;
    int64_t bytes_100316 = futhark_mc_task_109772->free_bytes_100316;
    int64_t bytes_100319 = futhark_mc_task_109772->free_bytes_100319;
    struct memblock mem_100432 = {.desc ="mem_100432", .mem =
                                  futhark_mc_task_109772->free_mem_100432,
                                  .size =0, .references =NULL};
    struct memblock mem_100436 = {.desc ="mem_100436", .mem =
                                  futhark_mc_task_109772->free_mem_100436,
                                  .size =0, .references =NULL};
    int64_t iter_102388;
    struct futhark_mc_segmap_parloop_struct_109774
    futhark_mc_segmap_parloop_struct_109774;
    
    futhark_mc_segmap_parloop_struct_109774.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109774.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109774.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109774.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109774.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109774.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109774.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109774.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109774.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109774.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109774.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109774.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109774.free_bytes_100304 = bytes_100304;
    futhark_mc_segmap_parloop_struct_109774.free_bytes_100316 = bytes_100316;
    futhark_mc_segmap_parloop_struct_109774.free_bytes_100319 = bytes_100319;
    futhark_mc_segmap_parloop_struct_109774.free_mem_100432 = mem_100432.mem;
    futhark_mc_segmap_parloop_struct_109774.free_mem_100436 = mem_100436.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109775_task;
    
    futhark_mc_segmap_parloop_109775_task.name =
        "futhark_mc_segmap_parloop_109775";
    futhark_mc_segmap_parloop_109775_task.fn = futhark_mc_segmap_parloop_109775;
    futhark_mc_segmap_parloop_109775_task.args =
        &futhark_mc_segmap_parloop_struct_109774;
    futhark_mc_segmap_parloop_109775_task.iterations = iterations;
    futhark_mc_segmap_parloop_109775_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109775_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109775_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109775_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109775_task);
    
    if (futhark_mc_segmap_parloop_109775_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109775_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109775_total_end -
                 futhark_mc_segmap_parloop_109775_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109775_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109775_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109775_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109773_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109773_end -
                 futhark_mc_segmap_task_109773_start;
        
        ctx->futhark_mc_segmap_task_109773_runs[tid]++;
        ctx->futhark_mc_segmap_task_109773_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109773_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109784 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100304;
    int64_t free_bytes_100316;
    int64_t free_bytes_100319;
    unsigned char *free_mem_100432;
    unsigned char *free_mem_100436;
};
struct futhark_mc_task_109793 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95055;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100305;
};
struct futhark_mc_scan_stage_1_parloop_struct_109796 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95055;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100305;
};
static int futhark_mc_scan_stage_1_parloop_109797(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_102607, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_109796
    *futhark_mc_scan_stage_1_parloop_struct_109796 =
    (struct futhark_mc_scan_stage_1_parloop_struct_109796 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_109796->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_109797_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109797_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_109796->free_n_92399;
    int64_t gtid_95055 =
            futhark_mc_scan_stage_1_parloop_struct_109796->free_gtid_95055;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_109796->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100305 = {.desc ="mem_100305", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_109796->free_mem_100305,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102960 = start;
    int64_t x_102609;
    int64_t x_102610;
    
    x_102609 = (int64_t) 0;
    for (; iter_102960 < end; iter_102960++) {
        int64_t gtid_102608 = iter_102960;
        
        // stage 1 scan body
        {
            double x_102612;
            
            x_102612 = ((double *) Y_mem_100186.mem)[gtid_95055 * n_92399 +
                                                     gtid_102608];
            
            bool isnan_res_102613;
            
            isnan_res_102613 = futrts_isnan64(x_102612);
            
            bool defunc_0_p_res_102614 = !isnan_res_102613;
            int64_t defunc_0_f_res_102615 =
                    btoi_bool_i64(defunc_0_p_res_102614);
            
            // write mapped values results to memory
            { }
            x_102609 = x_102609;
            // Read next values
            {
                x_102610 = defunc_0_f_res_102615;
            }
            
            int64_t defunc_1_op_res_102611 = add64(x_102609, x_102610);
            
            ((int64_t *) mem_100305.mem)[gtid_102608] = defunc_1_op_res_102611;
            x_102609 = defunc_1_op_res_102611;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109797_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109797_end -
                 futhark_mc_scan_stage_1_parloop_109797_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_109797_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_109797_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_109797_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_109798 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95055;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100305;
};
static int futhark_mc_scan_stage_3_parloop_109799(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_102607, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_109798
    *futhark_mc_scan_stage_3_parloop_struct_109798 =
    (struct futhark_mc_scan_stage_3_parloop_struct_109798 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_109798->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_109799_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_109799_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_109798->free_n_92399;
    int64_t gtid_95055 =
            futhark_mc_scan_stage_3_parloop_struct_109798->free_gtid_95055;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_109798->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100305 = {.desc ="mem_100305", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_109798->free_mem_100305,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102972 = start;
    int64_t x_102969;
    int64_t x_102970;
    
    if (iter_102972 == (int64_t) 0) {
        x_102969 = (int64_t) 0;
    } else {
        x_102969 = ((int64_t *) mem_100305.mem)[iter_102972 - (int64_t) 1];
    }
    for (; iter_102972 < end; iter_102972++) {
        int64_t gtid_102608 = iter_102972;
        
        // stage 3 scan body
        {
            double x_102612;
            
            x_102612 = ((double *) Y_mem_100186.mem)[gtid_95055 * n_92399 +
                                                     gtid_102608];
            
            bool isnan_res_102613;
            
            isnan_res_102613 = futrts_isnan64(x_102612);
            
            bool defunc_0_p_res_102614 = !isnan_res_102613;
            int64_t defunc_0_f_res_102615 =
                    btoi_bool_i64(defunc_0_p_res_102614);
            
            x_102969 = x_102969;
            x_102970 = defunc_0_f_res_102615;
            
            int64_t defunc_1_op_res_102971 = add64(x_102969, x_102970);
            
            ((int64_t *) mem_100305.mem)[gtid_102608] = defunc_1_op_res_102971;
            x_102969 = defunc_1_op_res_102971;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_109799_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_109799_end -
                 futhark_mc_scan_stage_3_parloop_109799_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_109799_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_109799_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_109799_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_109794(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102607 = tid;
    int num_tasks_102959 = info.nsubtasks;
    struct futhark_mc_task_109793 *futhark_mc_task_109793 =
                                  (struct futhark_mc_task_109793 *) args;
    struct futhark_context *ctx = futhark_mc_task_109793->ctx;
    uint64_t futhark_mc_segscan_task_109794_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_109794_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109793->free_n_92399;
    int64_t gtid_95055 = futhark_mc_task_109793->free_gtid_95055;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109793->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100305 = {.desc ="mem_100305", .mem =
                                  futhark_mc_task_109793->free_mem_100305,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_102966_cached_sizze_109795 = 0;
    unsigned char *scan_stage_2_accum_mem_102966 = NULL;
    int64_t iter_102960;
    struct futhark_mc_scan_stage_1_parloop_struct_109796
    futhark_mc_scan_stage_1_parloop_struct_109796;
    
    futhark_mc_scan_stage_1_parloop_struct_109796.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_109796.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_109796.free_gtid_95055 = gtid_95055;
    futhark_mc_scan_stage_1_parloop_struct_109796.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_109796.free_mem_100305 =
        mem_100305.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_109797_task;
    
    futhark_mc_scan_stage_1_parloop_109797_task.name =
        "futhark_mc_scan_stage_1_parloop_109797";
    futhark_mc_scan_stage_1_parloop_109797_task.fn =
        futhark_mc_scan_stage_1_parloop_109797;
    futhark_mc_scan_stage_1_parloop_109797_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_109796;
    futhark_mc_scan_stage_1_parloop_109797_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_109797_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_109797_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109797_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_109797_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_109797_task);
    
    if (futhark_mc_scan_stage_1_parloop_109797_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109797_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109797_total_end -
                 futhark_mc_scan_stage_1_parloop_109797_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109797_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109797_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109797_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_102959)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_102961;
        int64_t x_102962;
        int64_t offset_102964 = (int64_t) 0;
        int64_t offset_index_102965 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_102966_cached_sizze_109795 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_102966 =
                realloc(scan_stage_2_accum_mem_102966, (int64_t) 8);
            scan_stage_2_accum_mem_102966_cached_sizze_109795 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_102966)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_102968 = 0; i_102968 < num_tasks_102959 - 1;
             i_102968++) {
            offset_102964 = squot64(n_92399, sext_i32_i64(num_tasks_102959));
            if (slt64(sext_i32_i64(i_102968), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_102959)))) {
                offset_102964 += (int64_t) 1;
            }
            offset_index_102965 += offset_102964;
            
            int64_t gtid_102608 = offset_index_102965;
            double x_102612;
            
            x_102612 = ((double *) Y_mem_100186.mem)[gtid_95055 * n_92399 +
                                                     gtid_102608];
            
            bool isnan_res_102613;
            
            isnan_res_102613 = futrts_isnan64(x_102612);
            
            bool defunc_0_p_res_102614 = !isnan_res_102613;
            int64_t defunc_0_f_res_102615 =
                    btoi_bool_i64(defunc_0_p_res_102614);
            
            // Read carry in
            {
                x_102961 =
                    ((int64_t *) scan_stage_2_accum_mem_102966)[(int64_t) 0];
            }
            // Read next values
            {
                x_102962 = ((int64_t *) mem_100305.mem)[offset_index_102965 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_102963 = add64(x_102961, x_102962);
            
            ((int64_t *) mem_100305.mem)[offset_index_102965 - (int64_t) 1] =
                defunc_1_op_res_102963;
            ((int64_t *) scan_stage_2_accum_mem_102966)[(int64_t) 0] =
                defunc_1_op_res_102963;
        }
        
        int64_t iter_102972 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_109798
        futhark_mc_scan_stage_3_parloop_struct_109798;
        
        futhark_mc_scan_stage_3_parloop_struct_109798.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_109798.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_109798.free_gtid_95055 =
            gtid_95055;
        futhark_mc_scan_stage_3_parloop_struct_109798.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_109798.free_mem_100305 =
            mem_100305.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_109799_task;
        
        futhark_mc_scan_stage_3_parloop_109799_task.name =
            "futhark_mc_scan_stage_3_parloop_109799";
        futhark_mc_scan_stage_3_parloop_109799_task.fn =
            futhark_mc_scan_stage_3_parloop_109799;
        futhark_mc_scan_stage_3_parloop_109799_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_109798;
        futhark_mc_scan_stage_3_parloop_109799_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_109799_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_109799_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_109799_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_109799_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_109799_task);
        
        if (futhark_mc_scan_stage_3_parloop_109799_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_109799_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_109799_total_end -
                     futhark_mc_scan_stage_3_parloop_109799_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109799_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109799_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109799_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_102966);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_109794_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_109794_end -
                 futhark_mc_segscan_task_109794_start;
        
        ctx->futhark_mc_segscan_task_109794_runs[tid]++;
        ctx->futhark_mc_segscan_task_109794_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_109794_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109800 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95055;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100305;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
};
struct futhark_mc_segmap_parloop_struct_109802 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95055;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100305;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
};
static int futhark_mc_segmap_parloop_109803(void *args, int64_t start,
                                            int64_t end, int flat_tid_102616,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109802
    *futhark_mc_segmap_parloop_struct_109802 =
    (struct futhark_mc_segmap_parloop_struct_109802 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109802->ctx;
    uint64_t futhark_mc_segmap_parloop_109803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109803_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109802->free_n_92399;
    int64_t gtid_95055 =
            futhark_mc_segmap_parloop_struct_109802->free_gtid_95055;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109802->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100305 = {.desc ="mem_100305", .mem =
                                  futhark_mc_segmap_parloop_struct_109802->free_mem_100305,
                                  .size =0, .references =NULL};
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_segmap_parloop_struct_109802->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segmap_parloop_struct_109802->free_mem_100311,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102976 = start;
    
    for (; iter_102976 < end; iter_102976++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102979 = n_92399;
        int64_t gtid_102617 = iter_102976;
        int64_t remnant_102980 = iter_102976 - gtid_102617;
        double x_102618;
        
        x_102618 = ((double *) Y_mem_100186.mem)[gtid_95055 * n_92399 +
                                                 gtid_102617];
        
        bool isnan_res_102619;
        
        isnan_res_102619 = futrts_isnan64(x_102618);
        
        bool defunc_0_p_res_102620 = !isnan_res_102619;
        int64_t defunc_1_f_res_102621;
        
        if (defunc_0_p_res_102620) {
            int64_t x_102977;
            
            x_102977 = ((int64_t *) mem_100305.mem)[gtid_102617];
            
            int64_t defunc_1_f_res_t_res_102978 = sub64(x_102977, (int64_t) 1);
            
            defunc_1_f_res_102621 = defunc_1_f_res_t_res_102978;
        } else {
            defunc_1_f_res_102621 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_102621) &&
            slt64(defunc_1_f_res_102621, n_92399)) {
            ((int64_t *) mem_100311.mem)[defunc_1_f_res_102621] = gtid_102617;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_102621) &&
            slt64(defunc_1_f_res_102621, n_92399)) {
            ((double *) mem_100308.mem)[defunc_1_f_res_102621] = x_102618;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109803_end -
                 futhark_mc_segmap_parloop_109803_start;
        
        ctx->futhark_mc_segmap_parloop_109803_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109803_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109801(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102616 = tid;
    int num_tasks_102975 = info.nsubtasks;
    struct futhark_mc_task_109800 *futhark_mc_task_109800 =
                                  (struct futhark_mc_task_109800 *) args;
    struct futhark_context *ctx = futhark_mc_task_109800->ctx;
    uint64_t futhark_mc_segmap_task_109801_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109801_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109800->free_n_92399;
    int64_t gtid_95055 = futhark_mc_task_109800->free_gtid_95055;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109800->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100305 = {.desc ="mem_100305", .mem =
                                  futhark_mc_task_109800->free_mem_100305,
                                  .size =0, .references =NULL};
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_task_109800->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109800->free_mem_100311,
                                  .size =0, .references =NULL};
    int64_t iter_102976;
    struct futhark_mc_segmap_parloop_struct_109802
    futhark_mc_segmap_parloop_struct_109802;
    
    futhark_mc_segmap_parloop_struct_109802.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109802.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109802.free_gtid_95055 = gtid_95055;
    futhark_mc_segmap_parloop_struct_109802.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109802.free_mem_100305 = mem_100305.mem;
    futhark_mc_segmap_parloop_struct_109802.free_mem_100308 = mem_100308.mem;
    futhark_mc_segmap_parloop_struct_109802.free_mem_100311 = mem_100311.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109803_task;
    
    futhark_mc_segmap_parloop_109803_task.name =
        "futhark_mc_segmap_parloop_109803";
    futhark_mc_segmap_parloop_109803_task.fn = futhark_mc_segmap_parloop_109803;
    futhark_mc_segmap_parloop_109803_task.args =
        &futhark_mc_segmap_parloop_struct_109802;
    futhark_mc_segmap_parloop_109803_task.iterations = iterations;
    futhark_mc_segmap_parloop_109803_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109803_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109803_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109803_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109803_task);
    
    if (futhark_mc_segmap_parloop_109803_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109803_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109803_total_end -
                 futhark_mc_segmap_parloop_109803_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109803_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109803_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109803_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109801_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109801_end -
                 futhark_mc_segmap_task_109801_start;
        
        ctx->futhark_mc_segmap_task_109801_runs[tid]++;
        ctx->futhark_mc_segmap_task_109801_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109801_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109804 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100314;
};
struct futhark_mc_segmap_parloop_struct_109806 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100314;
};
static int futhark_mc_segmap_parloop_109807(void *args, int64_t start,
                                            int64_t end, int flat_tid_102624,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109806
    *futhark_mc_segmap_parloop_struct_109806 =
    (struct futhark_mc_segmap_parloop_struct_109806 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109806->ctx;
    uint64_t futhark_mc_segmap_parloop_109807_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109807_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109806->free_n_92399;
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segmap_parloop_struct_109806->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_segmap_parloop_struct_109806->free_mem_100314,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102982 = start;
    
    for (; iter_102982 < end; iter_102982++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102983 = n_92399;
        int64_t gtid_102625 = iter_102982;
        int64_t remnant_102984 = iter_102982 - gtid_102625;
        int64_t x_102626;
        
        x_102626 = ((int64_t *) mem_100311.mem)[gtid_102625];
        
        int64_t defunc_0_f_res_102627 = add64((int64_t) 1, x_102626);
        
        ((int64_t *) mem_100314.mem)[gtid_102625] = defunc_0_f_res_102627;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109807_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109807_end -
                 futhark_mc_segmap_parloop_109807_start;
        
        ctx->futhark_mc_segmap_parloop_109807_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109807_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109807_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109805(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102624 = tid;
    int num_tasks_102981 = info.nsubtasks;
    struct futhark_mc_task_109804 *futhark_mc_task_109804 =
                                  (struct futhark_mc_task_109804 *) args;
    struct futhark_context *ctx = futhark_mc_task_109804->ctx;
    uint64_t futhark_mc_segmap_task_109805_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109805_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109804->free_n_92399;
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109804->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_task_109804->free_mem_100314,
                                  .size =0, .references =NULL};
    int64_t iter_102982;
    struct futhark_mc_segmap_parloop_struct_109806
    futhark_mc_segmap_parloop_struct_109806;
    
    futhark_mc_segmap_parloop_struct_109806.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109806.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109806.free_mem_100311 = mem_100311.mem;
    futhark_mc_segmap_parloop_struct_109806.free_mem_100314 = mem_100314.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109807_task;
    
    futhark_mc_segmap_parloop_109807_task.name =
        "futhark_mc_segmap_parloop_109807";
    futhark_mc_segmap_parloop_109807_task.fn = futhark_mc_segmap_parloop_109807;
    futhark_mc_segmap_parloop_109807_task.args =
        &futhark_mc_segmap_parloop_struct_109806;
    futhark_mc_segmap_parloop_109807_task.iterations = iterations;
    futhark_mc_segmap_parloop_109807_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109807_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109807_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109807_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109807_task);
    
    if (futhark_mc_segmap_parloop_109807_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109807_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109807_total_end -
                 futhark_mc_segmap_parloop_109807_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109807_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109807_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109807_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109805_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109805_end -
                 futhark_mc_segmap_task_109805_start;
        
        ctx->futhark_mc_segmap_task_109805_runs[tid]++;
        ctx->futhark_mc_segmap_task_109805_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109805_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109808 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100317;
};
struct futhark_mc_segmap_parloop_struct_109810 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100317;
};
static int futhark_mc_segmap_parloop_109811(void *args, int64_t start,
                                            int64_t end, int flat_tid_102628,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109810
    *futhark_mc_segmap_parloop_struct_109810 =
    (struct futhark_mc_segmap_parloop_struct_109810 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109810->ctx;
    uint64_t futhark_mc_segmap_parloop_109811_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109811_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109810->free_q_92401;
    int64_t last_res_95067 =
            futhark_mc_segmap_parloop_struct_109810->free_last_res_95067;
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_segmap_parloop_struct_109810->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102986 = start;
    
    for (; iter_102986 < end; iter_102986++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102987 = q_92401;
        int64_t gtid_102629 = iter_102986;
        int64_t remnant_102988 = iter_102986 - gtid_102629;
        bool cond_102630 = sle64(last_res_95067, gtid_102629);
        double defunc_0_f_res_102631;
        
        if (cond_102630) {
            defunc_0_f_res_102631 = 0.0;
        } else {
            defunc_0_f_res_102631 = 1.0;
        }
        ((double *) mem_100317.mem)[gtid_102629] = defunc_0_f_res_102631;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109811_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109811_end -
                 futhark_mc_segmap_parloop_109811_start;
        
        ctx->futhark_mc_segmap_parloop_109811_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109811_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109811_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109809(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102628 = tid;
    int num_tasks_102985 = info.nsubtasks;
    struct futhark_mc_task_109808 *futhark_mc_task_109808 =
                                  (struct futhark_mc_task_109808 *) args;
    struct futhark_context *ctx = futhark_mc_task_109808->ctx;
    uint64_t futhark_mc_segmap_task_109809_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109809_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_109808->free_q_92401;
    int64_t last_res_95067 = futhark_mc_task_109808->free_last_res_95067;
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_task_109808->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t iter_102986;
    struct futhark_mc_segmap_parloop_struct_109810
    futhark_mc_segmap_parloop_struct_109810;
    
    futhark_mc_segmap_parloop_struct_109810.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109810.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109810.free_last_res_95067 =
        last_res_95067;
    futhark_mc_segmap_parloop_struct_109810.free_mem_100317 = mem_100317.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109811_task;
    
    futhark_mc_segmap_parloop_109811_task.name =
        "futhark_mc_segmap_parloop_109811";
    futhark_mc_segmap_parloop_109811_task.fn = futhark_mc_segmap_parloop_109811;
    futhark_mc_segmap_parloop_109811_task.args =
        &futhark_mc_segmap_parloop_struct_109810;
    futhark_mc_segmap_parloop_109811_task.iterations = iterations;
    futhark_mc_segmap_parloop_109811_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109811_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109811_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109811_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109811_task);
    
    if (futhark_mc_segmap_parloop_109811_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109811_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109811_total_end -
                 futhark_mc_segmap_parloop_109811_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109811_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109811_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109811_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109809_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109809_end -
                 futhark_mc_segmap_task_109809_start;
        
        ctx->futhark_mc_segmap_task_109809_runs[tid]++;
        ctx->futhark_mc_segmap_task_109809_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109809_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109812 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95067;
    int64_t free_min_arg_95086;
    int64_t free_min_arg_95087;
    int64_t free_min_res_95088;
    double free_max_res_95092;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100314;
    unsigned char *free_mem_100317;
    unsigned char *free_mem_100320;
    unsigned char *free_mem_100323;
};
struct futhark_mc_segmap_parloop_struct_109814 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95067;
    int64_t free_min_arg_95086;
    int64_t free_min_arg_95087;
    int64_t free_min_res_95088;
    double free_max_res_95092;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100314;
    unsigned char *free_mem_100317;
    unsigned char *free_mem_100320;
    unsigned char *free_mem_100323;
};
static int futhark_mc_segmap_parloop_109815(void *args, int64_t start,
                                            int64_t end, int flat_tid_102798,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109814
    *futhark_mc_segmap_parloop_struct_109814 =
    (struct futhark_mc_segmap_parloop_struct_109814 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109814->ctx;
    uint64_t futhark_mc_segmap_parloop_109815_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109815_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109814->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109814->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109814->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109814->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109814->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109814->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109814->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109814->free_loop_cond_92426;
    int64_t last_res_95067 =
            futhark_mc_segmap_parloop_struct_109814->free_last_res_95067;
    int64_t min_arg_95086 =
            futhark_mc_segmap_parloop_struct_109814->free_min_arg_95086;
    int64_t min_arg_95087 =
            futhark_mc_segmap_parloop_struct_109814->free_min_arg_95087;
    int64_t min_res_95088 =
            futhark_mc_segmap_parloop_struct_109814->free_min_res_95088;
    double max_res_95092 =
           futhark_mc_segmap_parloop_struct_109814->free_max_res_95092;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100314,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100317,
                                  .size =0, .references =NULL};
    struct memblock mem_100320 = {.desc ="mem_100320", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100320,
                                  .size =0, .references =NULL};
    struct memblock mem_100323 = {.desc ="mem_100323", .mem =
                                  futhark_mc_segmap_parloop_struct_109814->free_mem_100323,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_102990 = start;
    
    for (; iter_102990 < end; iter_102990++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103104 = n_m_92409;
        int64_t gtid_102799 = iter_102990;
        int64_t remnant_103105 = iter_102990 - gtid_102799;
        int64_t min_arg_102800 = mul64(jump_92403, gtid_102799);
        int64_t min_res_102801 = smin64(i_92415, min_arg_102800);
        int64_t defunc_0_g_res_102802 = add64((int64_t) 1, min_res_102801);
        bool init_idx_102803;
        int64_t init_idx_102804;
        int64_t init_idx_102805;
        bool loop_while_102991;
        int64_t low_102992;
        int64_t high_102993;
        
        loop_while_102991 = x_92416;
        low_102992 = (int64_t) 0;
        high_102993 = i_92415;
        while (loop_while_102991) {
            int64_t x_102994 = add64(low_102992, high_102993);
            int64_t mid_102995 = sdiv64(x_102994, (int64_t) 2);
            bool x_102996 = sle64((int64_t) 0, mid_102995);
            bool y_102997 = slt64(mid_102995, n_92399);
            bool bounds_check_102998 = x_102996 && y_102997;
            bool index_certs_102999;
            
            if (!bounds_check_102998) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_102995,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_103000;
            
            mid_id_103000 = ((int64_t *) mem_100314.mem)[mid_102995];
            
            bool cond_103001 = slt64(mid_id_103000, (int64_t) 0);
            int64_t mid_idx_103002;
            
            if (cond_103001) {
                mid_idx_103002 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_103002 = mid_id_103000;
            }
            
            bool cond_103003 = sle64(defunc_0_g_res_102802, mid_idx_103002);
            int64_t loopres_103004;
            int64_t loopres_103005;
            
            if (cond_103003) {
                int64_t loopres_t_res_103006 = sub64(mid_102995, (int64_t) 1);
                
                loopres_103004 = low_102992;
                loopres_103005 = loopres_t_res_103006;
            } else {
                int64_t loopres_f_res_103007 = add64((int64_t) 1, mid_102995);
                
                loopres_103004 = loopres_f_res_103007;
                loopres_103005 = high_102993;
            }
            
            bool loop_cond_103008 = sle64(loopres_103004, loopres_103005);
            bool loop_while_tmp_103106 = loop_cond_103008;
            int64_t low_tmp_103107 = loopres_103004;
            int64_t high_tmp_103108 = loopres_103005;
            
            loop_while_102991 = loop_while_tmp_103106;
            low_102992 = low_tmp_103107;
            high_102993 = high_tmp_103108;
        }
        init_idx_102803 = loop_while_102991;
        init_idx_102804 = low_102992;
        init_idx_102805 = high_102993;
        
        bool idx_102824;
        int64_t idx_102825;
        int64_t idx_102826;
        int64_t idx_102827;
        bool loop_while_103009;
        int64_t l_idx_103010;
        int64_t r_idx_103011;
        int64_t span_103012;
        
        loop_while_103009 = loop_cond_92426;
        l_idx_103010 = init_idx_102804;
        r_idx_103011 = init_idx_102804;
        span_103012 = (int64_t) 1;
        while (loop_while_103009) {
            int64_t max_arg_103013 = sub64(l_idx_103010, (int64_t) 1);
            int64_t max_res_103014 = smax64((int64_t) 0, max_arg_103013);
            int64_t min_arg_103015 = add64((int64_t) 1, r_idx_103011);
            int64_t min_res_103016 = smin64(min_arg_95086, min_arg_103015);
            bool x_103017 = sle64((int64_t) 0, max_res_103014);
            bool y_103018 = slt64(max_res_103014, n_92399);
            bool bounds_check_103019 = x_103017 && y_103018;
            bool index_certs_103020;
            
            if (!bounds_check_103019) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_103014,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103021;
            
            x_103021 = ((int64_t *) mem_100314.mem)[max_res_103014];
            
            int64_t abs_arg_103022 = sub64(x_103021, defunc_0_g_res_102802);
            int64_t abs_res_103023 = abs64(abs_arg_103022);
            bool x_103024 = sle64((int64_t) 0, min_res_103016);
            bool y_103025 = slt64(min_res_103016, n_92399);
            bool bounds_check_103026 = x_103024 && y_103025;
            bool index_certs_103027;
            
            if (!bounds_check_103026) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_103016,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103028;
            
            x_103028 = ((int64_t *) mem_100314.mem)[min_res_103016];
            
            int64_t abs_arg_103029 = sub64(x_103028, defunc_0_g_res_102802);
            int64_t abs_res_103030 = abs64(abs_arg_103029);
            bool cond_103031 = max_res_103014 == l_idx_103010;
            int64_t loopres_103032;
            int64_t loopres_103033;
            int64_t loopres_103034;
            
            if (cond_103031) {
                loopres_103032 = l_idx_103010;
                loopres_103033 = r_idx_103011;
                loopres_103034 = min_res_92421;
            } else {
                bool cond_103035 = slt64(abs_res_103023, abs_res_103030);
                bool cond_f_res_103036 = min_res_103016 == r_idx_103011;
                bool x_103037 = !cond_103035;
                bool y_103038 = cond_f_res_103036 && x_103037;
                bool cond_103039 = cond_103035 || y_103038;
                int64_t loopres_f_res_103040;
                
                if (cond_103039) {
                    loopres_f_res_103040 = max_res_103014;
                } else {
                    loopres_f_res_103040 = l_idx_103010;
                }
                
                int64_t loopres_f_res_103041;
                
                if (cond_103039) {
                    loopres_f_res_103041 = r_idx_103011;
                } else {
                    loopres_f_res_103041 = min_res_103016;
                }
                
                int64_t loopres_f_res_103042;
                
                if (cond_103039) {
                    int64_t loopres_f_res_t_res_103043 = add64((int64_t) 1,
                                                               span_103012);
                    
                    loopres_f_res_103042 = loopres_f_res_t_res_103043;
                } else {
                    int64_t loopres_f_res_f_res_103044 = add64((int64_t) 1,
                                                               span_103012);
                    
                    loopres_f_res_103042 = loopres_f_res_f_res_103044;
                }
                loopres_103032 = loopres_f_res_103040;
                loopres_103033 = loopres_f_res_103041;
                loopres_103034 = loopres_f_res_103042;
            }
            
            bool loop_cond_103045 = slt64(loopres_103034, min_res_92421);
            bool loop_while_tmp_103109 = loop_cond_103045;
            int64_t l_idx_tmp_103110 = loopres_103032;
            int64_t r_idx_tmp_103111 = loopres_103033;
            int64_t span_tmp_103112 = loopres_103034;
            
            loop_while_103009 = loop_while_tmp_103109;
            l_idx_103010 = l_idx_tmp_103110;
            r_idx_103011 = r_idx_tmp_103111;
            span_103012 = span_tmp_103112;
        }
        idx_102824 = loop_while_103009;
        idx_102825 = l_idx_103010;
        idx_102826 = r_idx_103011;
        idx_102827 = span_103012;
        
        int64_t min_res_102865 = smin64(min_arg_95087, idx_102825);
        int64_t max_res_102866 = smax64((int64_t) 0, min_res_102865);
        int64_t x_102867 = add64(min_res_95088, max_res_102866);
        int64_t r_102868 = sub64(x_102867, (int64_t) 1);
        bool x_102869 = sle64((int64_t) 0, r_102868);
        bool y_102870 = slt64(r_102868, n_92399);
        bool bounds_check_102871 = x_102869 && y_102870;
        bool index_certs_102872;
        
        if (!bounds_check_102871) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_102868,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102873;
        
        x_102873 = ((int64_t *) mem_100311.mem)[r_102868];
        
        int64_t abs_arg_102874 = sub64(x_102873, min_res_102801);
        int64_t abs_res_102875 = abs64(abs_arg_102874);
        bool x_102876 = sle64((int64_t) 0, max_res_102866);
        bool y_102877 = slt64(max_res_102866, n_92399);
        bool bounds_check_102878 = x_102876 && y_102877;
        bool index_certs_102879;
        
        if (!bounds_check_102878) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_102866,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102880;
        
        x_102880 = ((int64_t *) mem_100311.mem)[max_res_102866];
        
        int64_t abs_arg_102881 = sub64(x_102880, min_res_102801);
        int64_t abs_res_102882 = abs64(abs_arg_102881);
        int64_t max_res_102883 = smax64(abs_res_102875, abs_res_102882);
        double defunc_0_f_res_102884 = sitofp_i64_f64(max_res_102883);
        double defunc_1_f_res_102885 = max_res_95092 + defunc_0_f_res_102884;
        double defunc_2_reduce_res_102886;
        double defunc_2_reduce_res_102887;
        double defunc_2_reduce_res_102888;
        double redout_103047;
        double redout_103048;
        double redout_103049;
        
        redout_103047 = 0.0;
        redout_103048 = 0.0;
        redout_103049 = 0.0;
        for (int64_t i_103046 = 0; i_103046 < q_92401; i_103046++) {
            double x_103050;
            
            x_103050 = ((double *) mem_100317.mem)[i_103046];
            
            bool cond_103051 = sle64(last_res_95067, i_103046);
            int64_t defunc_0_f_res_103052;
            
            if (cond_103051) {
                defunc_0_f_res_103052 = (int64_t) 0;
            } else {
                int64_t i_103053 = add64(max_res_102866, i_103046);
                int64_t defunc_0_add_arg_103054;
                
                defunc_0_add_arg_103054 =
                    ((int64_t *) mem_100311.mem)[i_103053];
                
                int64_t defunc_1_add_res_103055 = add64((int64_t) 1,
                                                        defunc_0_add_arg_103054);
                
                defunc_0_f_res_103052 = defunc_1_add_res_103055;
            }
            
            int64_t binop_p_103056 = sub64(defunc_0_f_res_103052,
                                           min_res_102801);
            double defunc_0_f_res_103057 = sitofp_i64_f64(binop_p_103056);
            double abs_res_103058 = fabs(defunc_0_f_res_103057);
            double tmp1_103059 = abs_res_103058 / defunc_1_f_res_102885;
            double x_103060 = tmp1_103059 * tmp1_103059;
            double y_103061 = tmp1_103059 * x_103060;
            double tmp2_103062 = 1.0 - y_103061;
            double x_103063 = tmp2_103062 * tmp2_103062;
            double tmp3_103064 = tmp2_103062 * x_103063;
            double w_j_103065 = x_103050 * tmp3_103064;
            double xw_j_103066 = defunc_0_f_res_103057 * w_j_103065;
            double x2w_j_103067 = defunc_0_f_res_103057 * xw_j_103066;
            double defunc_1_op_res_103068 = w_j_103065 + redout_103047;
            double defunc_1_op_res_103069 = xw_j_103066 + redout_103048;
            double defunc_1_op_res_103070 = x2w_j_103067 + redout_103049;
            double redout_tmp_103113 = defunc_1_op_res_103068;
            double redout_tmp_103114 = defunc_1_op_res_103069;
            double redout_tmp_103115 = defunc_1_op_res_103070;
            
            redout_103047 = redout_tmp_103113;
            redout_103048 = redout_tmp_103114;
            redout_103049 = redout_tmp_103115;
        }
        defunc_2_reduce_res_102886 = redout_103047;
        defunc_2_reduce_res_102887 = redout_103048;
        defunc_2_reduce_res_102888 = redout_103049;
        
        double x_102914 = defunc_2_reduce_res_102886 *
               defunc_2_reduce_res_102888;
        double y_102915 = defunc_2_reduce_res_102887 *
               defunc_2_reduce_res_102887;
        double y_102916 = x_102914 - y_102915;
        double det1_102917 = 1.0 / y_102916;
        double a11_102918 = defunc_2_reduce_res_102888 * det1_102917;
        double x_102919 = 0.0 - defunc_2_reduce_res_102887;
        double b11_102920 = det1_102917 * x_102919;
        double c11_102921 = defunc_2_reduce_res_102886 * det1_102917;
        double defunc_2_reduce_res_102922;
        double defunc_2_reduce_res_102923;
        double redout_103072;
        double redout_103073;
        
        redout_103072 = 0.0;
        redout_103073 = 0.0;
        for (int64_t i_103071 = 0; i_103071 < q_92401; i_103071++) {
            double x_103074;
            
            x_103074 = ((double *) mem_100317.mem)[i_103071];
            
            bool cond_103075 = sle64(last_res_95067, i_103071);
            int64_t defunc_0_f_res_103076;
            
            if (cond_103075) {
                defunc_0_f_res_103076 = (int64_t) 0;
            } else {
                int64_t i_103077 = add64(max_res_102866, i_103071);
                int64_t defunc_0_add_arg_103078;
                
                defunc_0_add_arg_103078 =
                    ((int64_t *) mem_100311.mem)[i_103077];
                
                int64_t defunc_1_add_res_103079 = add64((int64_t) 1,
                                                        defunc_0_add_arg_103078);
                
                defunc_0_f_res_103076 = defunc_1_add_res_103079;
            }
            
            int64_t binop_p_103080 = sub64(defunc_0_f_res_103076,
                                           min_res_102801);
            double defunc_0_f_res_103081 = sitofp_i64_f64(binop_p_103080);
            double abs_res_103082 = fabs(defunc_0_f_res_103081);
            double tmp1_103083 = abs_res_103082 / defunc_1_f_res_102885;
            double x_103084 = tmp1_103083 * tmp1_103083;
            double y_103085 = tmp1_103083 * x_103084;
            double tmp2_103086 = 1.0 - y_103085;
            double x_103087 = tmp2_103086 * tmp2_103086;
            double tmp3_103088 = tmp2_103086 * x_103087;
            double tmp4_103089 = x_103074 * tmp3_103088;
            double defunc_1_f_res_103090 = defunc_0_f_res_103081 * tmp4_103089;
            double defunc_0_f_res_103091;
            
            if (cond_103075) {
                defunc_0_f_res_103091 = 0.0;
            } else {
                int64_t i_103092 = add64(max_res_102866, i_103071);
                double defunc_0_add_arg_103093;
                
                defunc_0_add_arg_103093 = ((double *) mem_100308.mem)[i_103092];
                defunc_0_f_res_103091 = defunc_0_add_arg_103093;
            }
            
            double x_103094 = a11_102918 * tmp4_103089;
            double y_103095 = b11_102920 * defunc_1_f_res_103090;
            double x_103096 = x_103094 + y_103095;
            double defunc_9_fit_fun_res_103097 = defunc_0_f_res_103091 *
                   x_103096;
            double x_103098 = b11_102920 * tmp4_103089;
            double y_103099 = c11_102921 * defunc_1_f_res_103090;
            double x_103100 = x_103098 + y_103099;
            double defunc_9_slope_fun_res_103101 = defunc_0_f_res_103091 *
                   x_103100;
            double defunc_1_op_res_103102 = defunc_9_fit_fun_res_103097 +
                   redout_103072;
            double defunc_1_op_res_103103 = defunc_9_slope_fun_res_103101 +
                   redout_103073;
            double redout_tmp_103116 = defunc_1_op_res_103102;
            double redout_tmp_103117 = defunc_1_op_res_103103;
            
            redout_103072 = redout_tmp_103116;
            redout_103073 = redout_tmp_103117;
        }
        defunc_2_reduce_res_102922 = redout_103072;
        defunc_2_reduce_res_102923 = redout_103073;
        ((double *) mem_100320.mem)[gtid_102799] = defunc_2_reduce_res_102922;
        ((double *) mem_100323.mem)[gtid_102799] = defunc_2_reduce_res_102923;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109815_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109815_end -
                 futhark_mc_segmap_parloop_109815_start;
        
        ctx->futhark_mc_segmap_parloop_109815_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109815_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109815_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109813(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102798 = tid;
    int num_tasks_102989 = info.nsubtasks;
    struct futhark_mc_task_109812 *futhark_mc_task_109812 =
                                  (struct futhark_mc_task_109812 *) args;
    struct futhark_context *ctx = futhark_mc_task_109812->ctx;
    uint64_t futhark_mc_segmap_task_109813_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109813_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109812->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109812->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109812->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109812->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109812->free_i_92415;
    bool x_92416 = futhark_mc_task_109812->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109812->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109812->free_loop_cond_92426;
    int64_t last_res_95067 = futhark_mc_task_109812->free_last_res_95067;
    int64_t min_arg_95086 = futhark_mc_task_109812->free_min_arg_95086;
    int64_t min_arg_95087 = futhark_mc_task_109812->free_min_arg_95087;
    int64_t min_res_95088 = futhark_mc_task_109812->free_min_res_95088;
    double max_res_95092 = futhark_mc_task_109812->free_max_res_95092;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_task_109812->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109812->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_task_109812->free_mem_100314,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_task_109812->free_mem_100317,
                                  .size =0, .references =NULL};
    struct memblock mem_100320 = {.desc ="mem_100320", .mem =
                                  futhark_mc_task_109812->free_mem_100320,
                                  .size =0, .references =NULL};
    struct memblock mem_100323 = {.desc ="mem_100323", .mem =
                                  futhark_mc_task_109812->free_mem_100323,
                                  .size =0, .references =NULL};
    int64_t iter_102990;
    struct futhark_mc_segmap_parloop_struct_109814
    futhark_mc_segmap_parloop_struct_109814;
    
    futhark_mc_segmap_parloop_struct_109814.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109814.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109814.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109814.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109814.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109814.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109814.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109814.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109814.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109814.free_last_res_95067 =
        last_res_95067;
    futhark_mc_segmap_parloop_struct_109814.free_min_arg_95086 = min_arg_95086;
    futhark_mc_segmap_parloop_struct_109814.free_min_arg_95087 = min_arg_95087;
    futhark_mc_segmap_parloop_struct_109814.free_min_res_95088 = min_res_95088;
    futhark_mc_segmap_parloop_struct_109814.free_max_res_95092 = max_res_95092;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100308 = mem_100308.mem;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100311 = mem_100311.mem;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100314 = mem_100314.mem;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100317 = mem_100317.mem;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100320 = mem_100320.mem;
    futhark_mc_segmap_parloop_struct_109814.free_mem_100323 = mem_100323.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109815_task;
    
    futhark_mc_segmap_parloop_109815_task.name =
        "futhark_mc_segmap_parloop_109815";
    futhark_mc_segmap_parloop_109815_task.fn = futhark_mc_segmap_parloop_109815;
    futhark_mc_segmap_parloop_109815_task.args =
        &futhark_mc_segmap_parloop_struct_109814;
    futhark_mc_segmap_parloop_109815_task.iterations = iterations;
    futhark_mc_segmap_parloop_109815_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109815_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109815_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109815_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109815_task);
    
    if (futhark_mc_segmap_parloop_109815_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109815_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109815_total_end -
                 futhark_mc_segmap_parloop_109815_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109815_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109815_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109815_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109813_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109813_end -
                 futhark_mc_segmap_task_109813_start;
        
        ctx->futhark_mc_segmap_task_109813_runs[tid]++;
        ctx->futhark_mc_segmap_task_109813_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109813_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109817 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95067;
    int64_t free_min_arg_95086;
    int64_t free_min_arg_95087;
    int64_t free_min_res_95088;
    double free_max_res_95092;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100314;
    unsigned char *free_mem_100317;
    unsigned char *free_mem_100320;
    unsigned char *free_mem_100323;
};
struct futhark_mc_task_109819 {
    struct futhark_context *ctx;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100317;
    int64_t free_min_res_102635;
    int64_t free_max_res_102700;
    double free_defunc_1_f_res_102719;
    double *retval_defunc_2_reduce_res_102720;
    double *retval_defunc_2_reduce_res_102721;
    double *retval_defunc_2_reduce_res_102722;
};
struct futhark_mc_segred_stage_1_parloop_struct_109824 {
    struct futhark_context *ctx;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100317;
    int64_t free_min_res_102635;
    int64_t free_max_res_102700;
    double free_defunc_1_f_res_102719;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_103249;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_103251;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_103253;
};
static int futhark_mc_segred_stage_1_parloop_109825(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_103174,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109824
    *futhark_mc_segred_stage_1_parloop_struct_109824 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109824 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109824->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109825_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109825_start = get_wall_time();
    
    int64_t last_res_95067 =
            futhark_mc_segred_stage_1_parloop_struct_109824->free_last_res_95067;
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109824->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109824->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t min_res_102635 =
            futhark_mc_segred_stage_1_parloop_struct_109824->free_min_res_102635;
    int64_t max_res_102700 =
            futhark_mc_segred_stage_1_parloop_struct_109824->free_max_res_102700;
    double defunc_1_f_res_102719 =
           futhark_mc_segred_stage_1_parloop_struct_109824->free_defunc_1_f_res_102719;
    struct memblock reduce_stage_1_tid_res_arr_mem_103249 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_103249",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109824->free_reduce_stage_1_tid_res_arr_mem_103249,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_103251 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_103251",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109824->free_reduce_stage_1_tid_res_arr_mem_103251,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_103253 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_103253",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109824->free_reduce_stage_1_tid_res_arr_mem_103253,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103255 = start;
    double x_103176;
    double x_103177;
    double x_103179;
    double x_103180;
    double x_103182;
    double x_103183;
    double local_acc_103256 = 0.0;
    double local_acc_103257 = 0.0;
    double local_acc_103258 = 0.0;
    
    for (; iter_103255 < end; iter_103255++) {
        int64_t gtid_103175 = iter_103255;
        double x_103185;
        
        x_103185 = ((double *) mem_100317.mem)[gtid_103175];
        
        bool cond_103186 = sle64(last_res_95067, gtid_103175);
        int64_t defunc_0_f_res_103187;
        
        if (cond_103186) {
            defunc_0_f_res_103187 = (int64_t) 0;
        } else {
            int64_t i_103188 = add64(max_res_102700, gtid_103175);
            int64_t defunc_0_add_arg_103189;
            
            defunc_0_add_arg_103189 = ((int64_t *) mem_100311.mem)[i_103188];
            
            int64_t defunc_1_add_res_103190 = add64((int64_t) 1,
                                                    defunc_0_add_arg_103189);
            
            defunc_0_f_res_103187 = defunc_1_add_res_103190;
        }
        
        int64_t binop_p_103191 = sub64(defunc_0_f_res_103187, min_res_102635);
        double defunc_0_f_res_103192 = sitofp_i64_f64(binop_p_103191);
        double abs_res_103193 = fabs(defunc_0_f_res_103192);
        double tmp1_103194 = abs_res_103193 / defunc_1_f_res_102719;
        double x_103195 = tmp1_103194 * tmp1_103194;
        double y_103196 = tmp1_103194 * x_103195;
        double tmp2_103197 = 1.0 - y_103196;
        double x_103198 = tmp2_103197 * tmp2_103197;
        double tmp3_103199 = tmp2_103197 * x_103198;
        double w_j_103200 = x_103185 * tmp3_103199;
        double xw_j_103201 = defunc_0_f_res_103192 * w_j_103200;
        double x2w_j_103202 = defunc_0_f_res_103192 * xw_j_103201;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_103176 = local_acc_103256;
        }
        // Load next params
        {
            x_103177 = w_j_103200;
        }
        // Red body
        {
            double defunc_1_op_res_103178 = x_103176 + x_103177;
            
            local_acc_103256 = defunc_1_op_res_103178;
        }
        // Load accum params
        {
            x_103179 = local_acc_103257;
        }
        // Load next params
        {
            x_103180 = xw_j_103201;
        }
        // Red body
        {
            double defunc_1_op_res_103181 = x_103179 + x_103180;
            
            local_acc_103257 = defunc_1_op_res_103181;
        }
        // Load accum params
        {
            x_103182 = local_acc_103258;
        }
        // Load next params
        {
            x_103183 = x2w_j_103202;
        }
        // Red body
        {
            double defunc_1_op_res_103184 = x_103182 + x_103183;
            
            local_acc_103258 = defunc_1_op_res_103184;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_103249.mem)[flat_tid_103174] =
        local_acc_103256;
    ((double *) reduce_stage_1_tid_res_arr_mem_103251.mem)[flat_tid_103174] =
        local_acc_103257;
    ((double *) reduce_stage_1_tid_res_arr_mem_103253.mem)[flat_tid_103174] =
        local_acc_103258;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109825_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109825_end -
                 futhark_mc_segred_stage_1_parloop_109825_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109825_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109825_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109825_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109820(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103174 = tid;
    int num_tasks_103248 = info.nsubtasks;
    struct futhark_mc_task_109819 *futhark_mc_task_109819 =
                                  (struct futhark_mc_task_109819 *) args;
    struct futhark_context *ctx = futhark_mc_task_109819->ctx;
    uint64_t futhark_mc_segred_task_109820_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109820_start = get_wall_time();
    
    int64_t last_res_95067 = futhark_mc_task_109819->free_last_res_95067;
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109819->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_task_109819->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t min_res_102635 = futhark_mc_task_109819->free_min_res_102635;
    int64_t max_res_102700 = futhark_mc_task_109819->free_max_res_102700;
    double defunc_1_f_res_102719 =
           futhark_mc_task_109819->free_defunc_1_f_res_102719;
    double defunc_2_reduce_res_102720 =
           *futhark_mc_task_109819->retval_defunc_2_reduce_res_102720;
    double defunc_2_reduce_res_102721 =
           *futhark_mc_task_109819->retval_defunc_2_reduce_res_102721;
    double defunc_2_reduce_res_102722 =
           *futhark_mc_task_109819->retval_defunc_2_reduce_res_102722;
    size_t reduce_stage_1_tid_res_arr_mem_103249_cached_sizze_109821 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_103249 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_103251_cached_sizze_109822 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_103251 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_103253_cached_sizze_109823 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_103253 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_103249_cached_sizze_109821 <
        (size_t) ((int64_t) 8 * num_tasks_103248)) {
        reduce_stage_1_tid_res_arr_mem_103249 =
            realloc(reduce_stage_1_tid_res_arr_mem_103249, (int64_t) 8 *
                    num_tasks_103248);
        reduce_stage_1_tid_res_arr_mem_103249_cached_sizze_109821 =
            (int64_t) 8 * num_tasks_103248;
    }
    if (reduce_stage_1_tid_res_arr_mem_103251_cached_sizze_109822 <
        (size_t) ((int64_t) 8 * num_tasks_103248)) {
        reduce_stage_1_tid_res_arr_mem_103251 =
            realloc(reduce_stage_1_tid_res_arr_mem_103251, (int64_t) 8 *
                    num_tasks_103248);
        reduce_stage_1_tid_res_arr_mem_103251_cached_sizze_109822 =
            (int64_t) 8 * num_tasks_103248;
    }
    if (reduce_stage_1_tid_res_arr_mem_103253_cached_sizze_109823 <
        (size_t) ((int64_t) 8 * num_tasks_103248)) {
        reduce_stage_1_tid_res_arr_mem_103253 =
            realloc(reduce_stage_1_tid_res_arr_mem_103253, (int64_t) 8 *
                    num_tasks_103248);
        reduce_stage_1_tid_res_arr_mem_103253_cached_sizze_109823 =
            (int64_t) 8 * num_tasks_103248;
    }
    
    int64_t iter_103255;
    struct futhark_mc_segred_stage_1_parloop_struct_109824
    futhark_mc_segred_stage_1_parloop_struct_109824;
    
    futhark_mc_segred_stage_1_parloop_struct_109824.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_last_res_95067 =
        last_res_95067;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_mem_100311 =
        mem_100311.mem;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_mem_100317 =
        mem_100317.mem;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_min_res_102635 =
        min_res_102635;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_max_res_102700 =
        max_res_102700;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_defunc_1_f_res_102719 =
        defunc_1_f_res_102719;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_reduce_stage_1_tid_res_arr_mem_103249 =
        reduce_stage_1_tid_res_arr_mem_103249;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_reduce_stage_1_tid_res_arr_mem_103251 =
        reduce_stage_1_tid_res_arr_mem_103251;
    futhark_mc_segred_stage_1_parloop_struct_109824.free_reduce_stage_1_tid_res_arr_mem_103253 =
        reduce_stage_1_tid_res_arr_mem_103253;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109825_task;
    
    futhark_mc_segred_stage_1_parloop_109825_task.name =
        "futhark_mc_segred_stage_1_parloop_109825";
    futhark_mc_segred_stage_1_parloop_109825_task.fn =
        futhark_mc_segred_stage_1_parloop_109825;
    futhark_mc_segred_stage_1_parloop_109825_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109824;
    futhark_mc_segred_stage_1_parloop_109825_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109825_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109825_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109825_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109825_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109825_task);
    
    if (futhark_mc_segred_stage_1_parloop_109825_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109825_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109825_total_end -
                 futhark_mc_segred_stage_1_parloop_109825_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109825_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109825_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109825_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_102720 = 0.0;
        defunc_2_reduce_res_102721 = 0.0;
        defunc_2_reduce_res_102722 = 0.0;
    }
    
    double x_103259;
    double x_103260;
    double x_103262;
    double x_103263;
    double x_103265;
    double x_103266;
    
    for (int32_t i_103268 = 0; i_103268 < num_tasks_103248; i_103268++) {
        flat_tid_103174 = i_103268;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_103259 = defunc_2_reduce_res_102720;
            }
            // load next params
            {
                x_103260 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_103249)[flat_tid_103174];
            }
            // red body
            {
                double defunc_1_op_res_103261 = x_103259 + x_103260;
                
                defunc_2_reduce_res_102720 = defunc_1_op_res_103261;
            }
            // load acc params
            {
                x_103262 = defunc_2_reduce_res_102721;
            }
            // load next params
            {
                x_103263 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_103251)[flat_tid_103174];
            }
            // red body
            {
                double defunc_1_op_res_103264 = x_103262 + x_103263;
                
                defunc_2_reduce_res_102721 = defunc_1_op_res_103264;
            }
            // load acc params
            {
                x_103265 = defunc_2_reduce_res_102722;
            }
            // load next params
            {
                x_103266 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_103253)[flat_tid_103174];
            }
            // red body
            {
                double defunc_1_op_res_103267 = x_103265 + x_103266;
                
                defunc_2_reduce_res_102722 = defunc_1_op_res_103267;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_103249);
        free(reduce_stage_1_tid_res_arr_mem_103251);
        free(reduce_stage_1_tid_res_arr_mem_103253);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109820_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109820_end -
                 futhark_mc_segred_task_109820_start;
        
        ctx->futhark_mc_segred_task_109820_runs[tid]++;
        ctx->futhark_mc_segred_task_109820_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109820_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109819->retval_defunc_2_reduce_res_102720 =
            defunc_2_reduce_res_102720;
        *futhark_mc_task_109819->retval_defunc_2_reduce_res_102721 =
            defunc_2_reduce_res_102721;
        *futhark_mc_task_109819->retval_defunc_2_reduce_res_102722 =
            defunc_2_reduce_res_102722;
    }
    return err;
}
struct futhark_mc_task_109826 {
    struct futhark_context *ctx;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100317;
    int64_t free_min_res_102635;
    int64_t free_max_res_102700;
    double free_defunc_1_f_res_102719;
    double free_a11_102756;
    double free_b11_102758;
    double free_c11_102759;
    double *retval_defunc_2_reduce_res_102760;
    double *retval_defunc_2_reduce_res_102761;
};
struct futhark_mc_segred_stage_1_parloop_struct_109830 {
    struct futhark_context *ctx;
    int64_t free_last_res_95067;
    unsigned char *free_mem_100308;
    unsigned char *free_mem_100311;
    unsigned char *free_mem_100317;
    int64_t free_min_res_102635;
    int64_t free_max_res_102700;
    double free_defunc_1_f_res_102719;
    double free_a11_102756;
    double free_b11_102758;
    double free_c11_102759;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_103270;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_103272;
};
static int futhark_mc_segred_stage_1_parloop_109831(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_103203,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109830
    *futhark_mc_segred_stage_1_parloop_struct_109830 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109830 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109830->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109831_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109831_start = get_wall_time();
    
    int64_t last_res_95067 =
            futhark_mc_segred_stage_1_parloop_struct_109830->free_last_res_95067;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109830->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109830->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109830->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t min_res_102635 =
            futhark_mc_segred_stage_1_parloop_struct_109830->free_min_res_102635;
    int64_t max_res_102700 =
            futhark_mc_segred_stage_1_parloop_struct_109830->free_max_res_102700;
    double defunc_1_f_res_102719 =
           futhark_mc_segred_stage_1_parloop_struct_109830->free_defunc_1_f_res_102719;
    double a11_102756 =
           futhark_mc_segred_stage_1_parloop_struct_109830->free_a11_102756;
    double b11_102758 =
           futhark_mc_segred_stage_1_parloop_struct_109830->free_b11_102758;
    double c11_102759 =
           futhark_mc_segred_stage_1_parloop_struct_109830->free_c11_102759;
    struct memblock reduce_stage_1_tid_res_arr_mem_103270 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_103270",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109830->free_reduce_stage_1_tid_res_arr_mem_103270,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_103272 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_103272",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109830->free_reduce_stage_1_tid_res_arr_mem_103272,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103274 = start;
    double x_103205;
    double x_103206;
    double x_103208;
    double x_103209;
    double local_acc_103275 = 0.0;
    double local_acc_103276 = 0.0;
    
    for (; iter_103274 < end; iter_103274++) {
        int64_t gtid_103204 = iter_103274;
        double x_103211;
        
        x_103211 = ((double *) mem_100317.mem)[gtid_103204];
        
        bool cond_103212 = sle64(last_res_95067, gtid_103204);
        int64_t defunc_0_f_res_103213;
        
        if (cond_103212) {
            defunc_0_f_res_103213 = (int64_t) 0;
        } else {
            int64_t i_103214 = add64(max_res_102700, gtid_103204);
            int64_t defunc_0_add_arg_103215;
            
            defunc_0_add_arg_103215 = ((int64_t *) mem_100311.mem)[i_103214];
            
            int64_t defunc_1_add_res_103216 = add64((int64_t) 1,
                                                    defunc_0_add_arg_103215);
            
            defunc_0_f_res_103213 = defunc_1_add_res_103216;
        }
        
        int64_t binop_p_103217 = sub64(defunc_0_f_res_103213, min_res_102635);
        double defunc_0_f_res_103218 = sitofp_i64_f64(binop_p_103217);
        double abs_res_103219 = fabs(defunc_0_f_res_103218);
        double tmp1_103220 = abs_res_103219 / defunc_1_f_res_102719;
        double x_103221 = tmp1_103220 * tmp1_103220;
        double y_103222 = tmp1_103220 * x_103221;
        double tmp2_103223 = 1.0 - y_103222;
        double x_103224 = tmp2_103223 * tmp2_103223;
        double tmp3_103225 = tmp2_103223 * x_103224;
        double tmp4_103226 = x_103211 * tmp3_103225;
        double defunc_1_f_res_103227 = defunc_0_f_res_103218 * tmp4_103226;
        double defunc_0_f_res_103228;
        
        if (cond_103212) {
            defunc_0_f_res_103228 = 0.0;
        } else {
            int64_t i_103229 = add64(max_res_102700, gtid_103204);
            double defunc_0_add_arg_103230;
            
            defunc_0_add_arg_103230 = ((double *) mem_100308.mem)[i_103229];
            defunc_0_f_res_103228 = defunc_0_add_arg_103230;
        }
        
        double x_103231 = a11_102756 * tmp4_103226;
        double y_103232 = b11_102758 * defunc_1_f_res_103227;
        double x_103233 = x_103231 + y_103232;
        double defunc_9_fit_fun_res_103234 = defunc_0_f_res_103228 * x_103233;
        double x_103235 = b11_102758 * tmp4_103226;
        double y_103236 = c11_102759 * defunc_1_f_res_103227;
        double x_103237 = x_103235 + y_103236;
        double defunc_9_slope_fun_res_103238 = defunc_0_f_res_103228 * x_103237;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_103205 = local_acc_103275;
        }
        // Load next params
        {
            x_103206 = defunc_9_fit_fun_res_103234;
        }
        // Red body
        {
            double defunc_1_op_res_103207 = x_103205 + x_103206;
            
            local_acc_103275 = defunc_1_op_res_103207;
        }
        // Load accum params
        {
            x_103208 = local_acc_103276;
        }
        // Load next params
        {
            x_103209 = defunc_9_slope_fun_res_103238;
        }
        // Red body
        {
            double defunc_1_op_res_103210 = x_103208 + x_103209;
            
            local_acc_103276 = defunc_1_op_res_103210;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_103270.mem)[flat_tid_103203] =
        local_acc_103275;
    ((double *) reduce_stage_1_tid_res_arr_mem_103272.mem)[flat_tid_103203] =
        local_acc_103276;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109831_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109831_end -
                 futhark_mc_segred_stage_1_parloop_109831_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109831_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109831_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109831_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109827(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103203 = tid;
    int num_tasks_103269 = info.nsubtasks;
    struct futhark_mc_task_109826 *futhark_mc_task_109826 =
                                  (struct futhark_mc_task_109826 *) args;
    struct futhark_context *ctx = futhark_mc_task_109826->ctx;
    uint64_t futhark_mc_segred_task_109827_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109827_start = get_wall_time();
    
    int64_t last_res_95067 = futhark_mc_task_109826->free_last_res_95067;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_task_109826->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109826->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_task_109826->free_mem_100317,
                                  .size =0, .references =NULL};
    int64_t min_res_102635 = futhark_mc_task_109826->free_min_res_102635;
    int64_t max_res_102700 = futhark_mc_task_109826->free_max_res_102700;
    double defunc_1_f_res_102719 =
           futhark_mc_task_109826->free_defunc_1_f_res_102719;
    double a11_102756 = futhark_mc_task_109826->free_a11_102756;
    double b11_102758 = futhark_mc_task_109826->free_b11_102758;
    double c11_102759 = futhark_mc_task_109826->free_c11_102759;
    double defunc_2_reduce_res_102760 =
           *futhark_mc_task_109826->retval_defunc_2_reduce_res_102760;
    double defunc_2_reduce_res_102761 =
           *futhark_mc_task_109826->retval_defunc_2_reduce_res_102761;
    size_t reduce_stage_1_tid_res_arr_mem_103270_cached_sizze_109828 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_103270 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_103272_cached_sizze_109829 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_103272 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_103270_cached_sizze_109828 <
        (size_t) ((int64_t) 8 * num_tasks_103269)) {
        reduce_stage_1_tid_res_arr_mem_103270 =
            realloc(reduce_stage_1_tid_res_arr_mem_103270, (int64_t) 8 *
                    num_tasks_103269);
        reduce_stage_1_tid_res_arr_mem_103270_cached_sizze_109828 =
            (int64_t) 8 * num_tasks_103269;
    }
    if (reduce_stage_1_tid_res_arr_mem_103272_cached_sizze_109829 <
        (size_t) ((int64_t) 8 * num_tasks_103269)) {
        reduce_stage_1_tid_res_arr_mem_103272 =
            realloc(reduce_stage_1_tid_res_arr_mem_103272, (int64_t) 8 *
                    num_tasks_103269);
        reduce_stage_1_tid_res_arr_mem_103272_cached_sizze_109829 =
            (int64_t) 8 * num_tasks_103269;
    }
    
    int64_t iter_103274;
    struct futhark_mc_segred_stage_1_parloop_struct_109830
    futhark_mc_segred_stage_1_parloop_struct_109830;
    
    futhark_mc_segred_stage_1_parloop_struct_109830.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_last_res_95067 =
        last_res_95067;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_mem_100308 =
        mem_100308.mem;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_mem_100311 =
        mem_100311.mem;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_mem_100317 =
        mem_100317.mem;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_min_res_102635 =
        min_res_102635;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_max_res_102700 =
        max_res_102700;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_defunc_1_f_res_102719 =
        defunc_1_f_res_102719;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_a11_102756 =
        a11_102756;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_b11_102758 =
        b11_102758;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_c11_102759 =
        c11_102759;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_reduce_stage_1_tid_res_arr_mem_103270 =
        reduce_stage_1_tid_res_arr_mem_103270;
    futhark_mc_segred_stage_1_parloop_struct_109830.free_reduce_stage_1_tid_res_arr_mem_103272 =
        reduce_stage_1_tid_res_arr_mem_103272;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109831_task;
    
    futhark_mc_segred_stage_1_parloop_109831_task.name =
        "futhark_mc_segred_stage_1_parloop_109831";
    futhark_mc_segred_stage_1_parloop_109831_task.fn =
        futhark_mc_segred_stage_1_parloop_109831;
    futhark_mc_segred_stage_1_parloop_109831_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109830;
    futhark_mc_segred_stage_1_parloop_109831_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109831_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109831_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109831_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109831_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109831_task);
    
    if (futhark_mc_segred_stage_1_parloop_109831_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109831_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109831_total_end -
                 futhark_mc_segred_stage_1_parloop_109831_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109831_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109831_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109831_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_102760 = 0.0;
        defunc_2_reduce_res_102761 = 0.0;
    }
    
    double x_103277;
    double x_103278;
    double x_103280;
    double x_103281;
    
    for (int32_t i_103283 = 0; i_103283 < num_tasks_103269; i_103283++) {
        flat_tid_103203 = i_103283;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_103277 = defunc_2_reduce_res_102760;
            }
            // load next params
            {
                x_103278 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_103270)[flat_tid_103203];
            }
            // red body
            {
                double defunc_1_op_res_103279 = x_103277 + x_103278;
                
                defunc_2_reduce_res_102760 = defunc_1_op_res_103279;
            }
            // load acc params
            {
                x_103280 = defunc_2_reduce_res_102761;
            }
            // load next params
            {
                x_103281 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_103272)[flat_tid_103203];
            }
            // red body
            {
                double defunc_1_op_res_103282 = x_103280 + x_103281;
                
                defunc_2_reduce_res_102761 = defunc_1_op_res_103282;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_103270);
        free(reduce_stage_1_tid_res_arr_mem_103272);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109827_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109827_end -
                 futhark_mc_segred_task_109827_start;
        
        ctx->futhark_mc_segred_task_109827_runs[tid]++;
        ctx->futhark_mc_segred_task_109827_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109827_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109826->retval_defunc_2_reduce_res_102760 =
            defunc_2_reduce_res_102760;
        *futhark_mc_task_109826->retval_defunc_2_reduce_res_102761 =
            defunc_2_reduce_res_102761;
    }
    return err;
}
static int futhark_mc_segmap_parloop_109818(void *args, int64_t start,
                                            int64_t end, int flat_tid_102632,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109817
    *futhark_mc_segmap_parloop_struct_109817 =
    (struct futhark_mc_segmap_parloop_struct_109817 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109817->ctx;
    uint64_t futhark_mc_segmap_parloop_109818_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109818_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109817->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109817->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109817->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109817->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109817->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109817->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109817->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109817->free_loop_cond_92426;
    int64_t last_res_95067 =
            futhark_mc_segmap_parloop_struct_109817->free_last_res_95067;
    int64_t min_arg_95086 =
            futhark_mc_segmap_parloop_struct_109817->free_min_arg_95086;
    int64_t min_arg_95087 =
            futhark_mc_segmap_parloop_struct_109817->free_min_arg_95087;
    int64_t min_res_95088 =
            futhark_mc_segmap_parloop_struct_109817->free_min_res_95088;
    double max_res_95092 =
           futhark_mc_segmap_parloop_struct_109817->free_max_res_95092;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100314,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100317,
                                  .size =0, .references =NULL};
    struct memblock mem_100320 = {.desc ="mem_100320", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100320,
                                  .size =0, .references =NULL};
    struct memblock mem_100323 = {.desc ="mem_100323", .mem =
                                  futhark_mc_segmap_parloop_struct_109817->free_mem_100323,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103118 = start;
    
    for (; iter_103118 < end; iter_103118++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103239 = n_m_92409;
        int64_t gtid_102633 = iter_103118;
        int64_t remnant_103240 = iter_103118 - gtid_102633;
        int64_t min_arg_102634 = mul64(jump_92403, gtid_102633);
        int64_t min_res_102635 = smin64(i_92415, min_arg_102634);
        int64_t defunc_0_g_res_102636 = add64((int64_t) 1, min_res_102635);
        bool init_idx_102637;
        int64_t init_idx_102638;
        int64_t init_idx_102639;
        bool loop_while_103119;
        int64_t low_103120;
        int64_t high_103121;
        
        loop_while_103119 = x_92416;
        low_103120 = (int64_t) 0;
        high_103121 = i_92415;
        while (loop_while_103119) {
            int64_t x_103122 = add64(low_103120, high_103121);
            int64_t mid_103123 = sdiv64(x_103122, (int64_t) 2);
            bool x_103124 = sle64((int64_t) 0, mid_103123);
            bool y_103125 = slt64(mid_103123, n_92399);
            bool bounds_check_103126 = x_103124 && y_103125;
            bool index_certs_103127;
            
            if (!bounds_check_103126) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_103123,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_103128;
            
            mid_id_103128 = ((int64_t *) mem_100314.mem)[mid_103123];
            
            bool cond_103129 = slt64(mid_id_103128, (int64_t) 0);
            int64_t mid_idx_103130;
            
            if (cond_103129) {
                mid_idx_103130 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_103130 = mid_id_103128;
            }
            
            bool cond_103131 = sle64(defunc_0_g_res_102636, mid_idx_103130);
            int64_t loopres_103132;
            int64_t loopres_103133;
            
            if (cond_103131) {
                int64_t loopres_t_res_103134 = sub64(mid_103123, (int64_t) 1);
                
                loopres_103132 = low_103120;
                loopres_103133 = loopres_t_res_103134;
            } else {
                int64_t loopres_f_res_103135 = add64((int64_t) 1, mid_103123);
                
                loopres_103132 = loopres_f_res_103135;
                loopres_103133 = high_103121;
            }
            
            bool loop_cond_103136 = sle64(loopres_103132, loopres_103133);
            bool loop_while_tmp_103241 = loop_cond_103136;
            int64_t low_tmp_103242 = loopres_103132;
            int64_t high_tmp_103243 = loopres_103133;
            
            loop_while_103119 = loop_while_tmp_103241;
            low_103120 = low_tmp_103242;
            high_103121 = high_tmp_103243;
        }
        init_idx_102637 = loop_while_103119;
        init_idx_102638 = low_103120;
        init_idx_102639 = high_103121;
        
        bool idx_102658;
        int64_t idx_102659;
        int64_t idx_102660;
        int64_t idx_102661;
        bool loop_while_103137;
        int64_t l_idx_103138;
        int64_t r_idx_103139;
        int64_t span_103140;
        
        loop_while_103137 = loop_cond_92426;
        l_idx_103138 = init_idx_102638;
        r_idx_103139 = init_idx_102638;
        span_103140 = (int64_t) 1;
        while (loop_while_103137) {
            int64_t max_arg_103141 = sub64(l_idx_103138, (int64_t) 1);
            int64_t max_res_103142 = smax64((int64_t) 0, max_arg_103141);
            int64_t min_arg_103143 = add64((int64_t) 1, r_idx_103139);
            int64_t min_res_103144 = smin64(min_arg_95086, min_arg_103143);
            bool x_103145 = sle64((int64_t) 0, max_res_103142);
            bool y_103146 = slt64(max_res_103142, n_92399);
            bool bounds_check_103147 = x_103145 && y_103146;
            bool index_certs_103148;
            
            if (!bounds_check_103147) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_103142,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103149;
            
            x_103149 = ((int64_t *) mem_100314.mem)[max_res_103142];
            
            int64_t abs_arg_103150 = sub64(x_103149, defunc_0_g_res_102636);
            int64_t abs_res_103151 = abs64(abs_arg_103150);
            bool x_103152 = sle64((int64_t) 0, min_res_103144);
            bool y_103153 = slt64(min_res_103144, n_92399);
            bool bounds_check_103154 = x_103152 && y_103153;
            bool index_certs_103155;
            
            if (!bounds_check_103154) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_103144,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103156;
            
            x_103156 = ((int64_t *) mem_100314.mem)[min_res_103144];
            
            int64_t abs_arg_103157 = sub64(x_103156, defunc_0_g_res_102636);
            int64_t abs_res_103158 = abs64(abs_arg_103157);
            bool cond_103159 = max_res_103142 == l_idx_103138;
            int64_t loopres_103160;
            int64_t loopres_103161;
            int64_t loopres_103162;
            
            if (cond_103159) {
                loopres_103160 = l_idx_103138;
                loopres_103161 = r_idx_103139;
                loopres_103162 = min_res_92421;
            } else {
                bool cond_103163 = slt64(abs_res_103151, abs_res_103158);
                bool cond_f_res_103164 = min_res_103144 == r_idx_103139;
                bool x_103165 = !cond_103163;
                bool y_103166 = cond_f_res_103164 && x_103165;
                bool cond_103167 = cond_103163 || y_103166;
                int64_t loopres_f_res_103168;
                
                if (cond_103167) {
                    loopres_f_res_103168 = max_res_103142;
                } else {
                    loopres_f_res_103168 = l_idx_103138;
                }
                
                int64_t loopres_f_res_103169;
                
                if (cond_103167) {
                    loopres_f_res_103169 = r_idx_103139;
                } else {
                    loopres_f_res_103169 = min_res_103144;
                }
                
                int64_t loopres_f_res_103170;
                
                if (cond_103167) {
                    int64_t loopres_f_res_t_res_103171 = add64((int64_t) 1,
                                                               span_103140);
                    
                    loopres_f_res_103170 = loopres_f_res_t_res_103171;
                } else {
                    int64_t loopres_f_res_f_res_103172 = add64((int64_t) 1,
                                                               span_103140);
                    
                    loopres_f_res_103170 = loopres_f_res_f_res_103172;
                }
                loopres_103160 = loopres_f_res_103168;
                loopres_103161 = loopres_f_res_103169;
                loopres_103162 = loopres_f_res_103170;
            }
            
            bool loop_cond_103173 = slt64(loopres_103162, min_res_92421);
            bool loop_while_tmp_103244 = loop_cond_103173;
            int64_t l_idx_tmp_103245 = loopres_103160;
            int64_t r_idx_tmp_103246 = loopres_103161;
            int64_t span_tmp_103247 = loopres_103162;
            
            loop_while_103137 = loop_while_tmp_103244;
            l_idx_103138 = l_idx_tmp_103245;
            r_idx_103139 = r_idx_tmp_103246;
            span_103140 = span_tmp_103247;
        }
        idx_102658 = loop_while_103137;
        idx_102659 = l_idx_103138;
        idx_102660 = r_idx_103139;
        idx_102661 = span_103140;
        
        int64_t min_res_102699 = smin64(min_arg_95087, idx_102659);
        int64_t max_res_102700 = smax64((int64_t) 0, min_res_102699);
        int64_t x_102701 = add64(min_res_95088, max_res_102700);
        int64_t r_102702 = sub64(x_102701, (int64_t) 1);
        bool x_102703 = sle64((int64_t) 0, r_102702);
        bool y_102704 = slt64(r_102702, n_92399);
        bool bounds_check_102705 = x_102703 && y_102704;
        bool index_certs_102706;
        
        if (!bounds_check_102705) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_102702,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102707;
        
        x_102707 = ((int64_t *) mem_100311.mem)[r_102702];
        
        int64_t abs_arg_102708 = sub64(x_102707, min_res_102635);
        int64_t abs_res_102709 = abs64(abs_arg_102708);
        bool x_102710 = sle64((int64_t) 0, max_res_102700);
        bool y_102711 = slt64(max_res_102700, n_92399);
        bool bounds_check_102712 = x_102710 && y_102711;
        bool index_certs_102713;
        
        if (!bounds_check_102712) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_102700,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_102714;
        
        x_102714 = ((int64_t *) mem_100311.mem)[max_res_102700];
        
        int64_t abs_arg_102715 = sub64(x_102714, min_res_102635);
        int64_t abs_res_102716 = abs64(abs_arg_102715);
        int64_t max_res_102717 = smax64(abs_res_102709, abs_res_102716);
        double defunc_0_f_res_102718 = sitofp_i64_f64(max_res_102717);
        double defunc_1_f_res_102719 = max_res_95092 + defunc_0_f_res_102718;
        double defunc_2_reduce_res_102720;
        double defunc_2_reduce_res_102721;
        double defunc_2_reduce_res_102722;
        int64_t flat_tid_103174 = (int64_t) 0;
        int32_t num_tasks_103248;
        
        defunc_2_reduce_res_102720 = 0.0;
        defunc_2_reduce_res_102721 = 0.0;
        defunc_2_reduce_res_102722 = 0.0;
        
        struct futhark_mc_task_109819 futhark_mc_task_109819;
        
        futhark_mc_task_109819.ctx = ctx;
        futhark_mc_task_109819.free_last_res_95067 = last_res_95067;
        futhark_mc_task_109819.free_mem_100311 = mem_100311.mem;
        futhark_mc_task_109819.free_mem_100317 = mem_100317.mem;
        futhark_mc_task_109819.free_min_res_102635 = min_res_102635;
        futhark_mc_task_109819.free_max_res_102700 = max_res_102700;
        futhark_mc_task_109819.free_defunc_1_f_res_102719 =
            defunc_1_f_res_102719;
        futhark_mc_task_109819.retval_defunc_2_reduce_res_102720 =
            &defunc_2_reduce_res_102720;
        futhark_mc_task_109819.retval_defunc_2_reduce_res_102721 =
            &defunc_2_reduce_res_102721;
        futhark_mc_task_109819.retval_defunc_2_reduce_res_102722 =
            &defunc_2_reduce_res_102722;
        
        struct scheduler_segop futhark_mc_task_109819_task;
        
        futhark_mc_task_109819_task.args = &futhark_mc_task_109819;
        futhark_mc_task_109819_task.top_level_fn =
            futhark_mc_segred_task_109820;
        futhark_mc_task_109819_task.name = "futhark_mc_segred_task_109820";
        futhark_mc_task_109819_task.iterations = q_92401;
        futhark_mc_task_109819_task.task_time =
            &ctx->futhark_mc_segred_task_109820_total_time;
        futhark_mc_task_109819_task.task_iter =
            &ctx->futhark_mc_segred_task_109820_total_iter;
        futhark_mc_task_109819_task.sched = STATIC;
        futhark_mc_task_109819_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109820_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109819_task);
        
        if (futhark_mc_segred_task_109820_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_102752 = defunc_2_reduce_res_102720 *
               defunc_2_reduce_res_102722;
        double y_102753 = defunc_2_reduce_res_102721 *
               defunc_2_reduce_res_102721;
        double y_102754 = x_102752 - y_102753;
        double det1_102755 = 1.0 / y_102754;
        double a11_102756 = defunc_2_reduce_res_102722 * det1_102755;
        double x_102757 = 0.0 - defunc_2_reduce_res_102721;
        double b11_102758 = det1_102755 * x_102757;
        double c11_102759 = defunc_2_reduce_res_102720 * det1_102755;
        double defunc_2_reduce_res_102760;
        double defunc_2_reduce_res_102761;
        int64_t flat_tid_103203 = (int64_t) 0;
        int32_t num_tasks_103269;
        
        defunc_2_reduce_res_102760 = 0.0;
        defunc_2_reduce_res_102761 = 0.0;
        
        struct futhark_mc_task_109826 futhark_mc_task_109826;
        
        futhark_mc_task_109826.ctx = ctx;
        futhark_mc_task_109826.free_last_res_95067 = last_res_95067;
        futhark_mc_task_109826.free_mem_100308 = mem_100308.mem;
        futhark_mc_task_109826.free_mem_100311 = mem_100311.mem;
        futhark_mc_task_109826.free_mem_100317 = mem_100317.mem;
        futhark_mc_task_109826.free_min_res_102635 = min_res_102635;
        futhark_mc_task_109826.free_max_res_102700 = max_res_102700;
        futhark_mc_task_109826.free_defunc_1_f_res_102719 =
            defunc_1_f_res_102719;
        futhark_mc_task_109826.free_a11_102756 = a11_102756;
        futhark_mc_task_109826.free_b11_102758 = b11_102758;
        futhark_mc_task_109826.free_c11_102759 = c11_102759;
        futhark_mc_task_109826.retval_defunc_2_reduce_res_102760 =
            &defunc_2_reduce_res_102760;
        futhark_mc_task_109826.retval_defunc_2_reduce_res_102761 =
            &defunc_2_reduce_res_102761;
        
        struct scheduler_segop futhark_mc_task_109826_task;
        
        futhark_mc_task_109826_task.args = &futhark_mc_task_109826;
        futhark_mc_task_109826_task.top_level_fn =
            futhark_mc_segred_task_109827;
        futhark_mc_task_109826_task.name = "futhark_mc_segred_task_109827";
        futhark_mc_task_109826_task.iterations = q_92401;
        futhark_mc_task_109826_task.task_time =
            &ctx->futhark_mc_segred_task_109827_total_time;
        futhark_mc_task_109826_task.task_iter =
            &ctx->futhark_mc_segred_task_109827_total_iter;
        futhark_mc_task_109826_task.sched = STATIC;
        futhark_mc_task_109826_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109827_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109826_task);
        
        if (futhark_mc_segred_task_109827_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_100320.mem)[gtid_102633] = defunc_2_reduce_res_102760;
        ((double *) mem_100323.mem)[gtid_102633] = defunc_2_reduce_res_102761;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109818_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109818_end -
                 futhark_mc_segmap_parloop_109818_start;
        
        ctx->futhark_mc_segmap_parloop_109818_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109818_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109818_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109816(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_102632 = tid;
    int num_tasks_102989 = info.nsubtasks;
    struct futhark_mc_task_109812 *futhark_mc_task_109812 =
                                  (struct futhark_mc_task_109812 *) args;
    struct futhark_context *ctx = futhark_mc_task_109812->ctx;
    uint64_t futhark_mc_segmap_nested_task_109816_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109816_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109812->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109812->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109812->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109812->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109812->free_i_92415;
    bool x_92416 = futhark_mc_task_109812->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109812->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109812->free_loop_cond_92426;
    int64_t last_res_95067 = futhark_mc_task_109812->free_last_res_95067;
    int64_t min_arg_95086 = futhark_mc_task_109812->free_min_arg_95086;
    int64_t min_arg_95087 = futhark_mc_task_109812->free_min_arg_95087;
    int64_t min_res_95088 = futhark_mc_task_109812->free_min_res_95088;
    double max_res_95092 = futhark_mc_task_109812->free_max_res_95092;
    struct memblock mem_100308 = {.desc ="mem_100308", .mem =
                                  futhark_mc_task_109812->free_mem_100308,
                                  .size =0, .references =NULL};
    struct memblock mem_100311 = {.desc ="mem_100311", .mem =
                                  futhark_mc_task_109812->free_mem_100311,
                                  .size =0, .references =NULL};
    struct memblock mem_100314 = {.desc ="mem_100314", .mem =
                                  futhark_mc_task_109812->free_mem_100314,
                                  .size =0, .references =NULL};
    struct memblock mem_100317 = {.desc ="mem_100317", .mem =
                                  futhark_mc_task_109812->free_mem_100317,
                                  .size =0, .references =NULL};
    struct memblock mem_100320 = {.desc ="mem_100320", .mem =
                                  futhark_mc_task_109812->free_mem_100320,
                                  .size =0, .references =NULL};
    struct memblock mem_100323 = {.desc ="mem_100323", .mem =
                                  futhark_mc_task_109812->free_mem_100323,
                                  .size =0, .references =NULL};
    int64_t iter_103118;
    struct futhark_mc_segmap_parloop_struct_109817
    futhark_mc_segmap_parloop_struct_109817;
    
    futhark_mc_segmap_parloop_struct_109817.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109817.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109817.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109817.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109817.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109817.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109817.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109817.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109817.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109817.free_last_res_95067 =
        last_res_95067;
    futhark_mc_segmap_parloop_struct_109817.free_min_arg_95086 = min_arg_95086;
    futhark_mc_segmap_parloop_struct_109817.free_min_arg_95087 = min_arg_95087;
    futhark_mc_segmap_parloop_struct_109817.free_min_res_95088 = min_res_95088;
    futhark_mc_segmap_parloop_struct_109817.free_max_res_95092 = max_res_95092;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100308 = mem_100308.mem;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100311 = mem_100311.mem;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100314 = mem_100314.mem;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100317 = mem_100317.mem;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100320 = mem_100320.mem;
    futhark_mc_segmap_parloop_struct_109817.free_mem_100323 = mem_100323.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109818_task;
    
    futhark_mc_segmap_parloop_109818_task.name =
        "futhark_mc_segmap_parloop_109818";
    futhark_mc_segmap_parloop_109818_task.fn = futhark_mc_segmap_parloop_109818;
    futhark_mc_segmap_parloop_109818_task.args =
        &futhark_mc_segmap_parloop_struct_109817;
    futhark_mc_segmap_parloop_109818_task.iterations = iterations;
    futhark_mc_segmap_parloop_109818_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109818_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109818_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109818_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109818_task);
    
    if (futhark_mc_segmap_parloop_109818_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109818_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109818_total_end -
                 futhark_mc_segmap_parloop_109818_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109818_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109818_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109818_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109816_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109816_end -
                 futhark_mc_segmap_nested_task_109816_start;
        
        ctx->futhark_mc_segmap_nested_task_109816_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109816_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109816_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_109785(void *args, int64_t start,
                                            int64_t end, int flat_tid_95054,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109784
    *futhark_mc_segmap_parloop_struct_109784 =
    (struct futhark_mc_segmap_parloop_struct_109784 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109784->ctx;
    uint64_t futhark_mc_segmap_parloop_109785_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109785_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109784->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109784->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109784->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109784->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109784->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109784->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109784->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109784->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109784->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109784->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109784->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100304 =
            futhark_mc_segmap_parloop_struct_109784->free_bytes_100304;
    int64_t bytes_100316 =
            futhark_mc_segmap_parloop_struct_109784->free_bytes_100316;
    int64_t bytes_100319 =
            futhark_mc_segmap_parloop_struct_109784->free_bytes_100319;
    struct memblock mem_100432 = {.desc ="mem_100432", .mem =
                                  futhark_mc_segmap_parloop_struct_109784->free_mem_100432,
                                  .size =0, .references =NULL};
    struct memblock mem_100436 = {.desc ="mem_100436", .mem =
                                  futhark_mc_segmap_parloop_struct_109784->free_mem_100436,
                                  .size =0, .references =NULL};
    size_t mem_100305_cached_sizze_109786 = 0;
    unsigned char *mem_100305 = NULL;
    size_t mem_100308_cached_sizze_109787 = 0;
    unsigned char *mem_100308 = NULL;
    size_t mem_100311_cached_sizze_109788 = 0;
    unsigned char *mem_100311 = NULL;
    size_t mem_100314_cached_sizze_109789 = 0;
    unsigned char *mem_100314 = NULL;
    size_t mem_100317_cached_sizze_109790 = 0;
    unsigned char *mem_100317 = NULL;
    size_t mem_100320_cached_sizze_109791 = 0;
    unsigned char *mem_100320 = NULL;
    size_t mem_100323_cached_sizze_109792 = 0;
    unsigned char *mem_100323 = NULL;
    int64_t iterations = end - start;
    int64_t iter_102606 = start;
    
    if (mem_100305_cached_sizze_109786 < (size_t) bytes_100304) {
        mem_100305 = realloc(mem_100305, bytes_100304);
        mem_100305_cached_sizze_109786 = bytes_100304;
    }
    if (mem_100308_cached_sizze_109787 < (size_t) bytes_100304) {
        mem_100308 = realloc(mem_100308, bytes_100304);
        mem_100308_cached_sizze_109787 = bytes_100304;
    }
    if (mem_100311_cached_sizze_109788 < (size_t) bytes_100304) {
        mem_100311 = realloc(mem_100311, bytes_100304);
        mem_100311_cached_sizze_109788 = bytes_100304;
    }
    if (mem_100314_cached_sizze_109789 < (size_t) bytes_100304) {
        mem_100314 = realloc(mem_100314, bytes_100304);
        mem_100314_cached_sizze_109789 = bytes_100304;
    }
    if (mem_100317_cached_sizze_109790 < (size_t) bytes_100316) {
        mem_100317 = realloc(mem_100317, bytes_100316);
        mem_100317_cached_sizze_109790 = bytes_100316;
    }
    if (mem_100320_cached_sizze_109791 < (size_t) bytes_100319) {
        mem_100320 = realloc(mem_100320, bytes_100319);
        mem_100320_cached_sizze_109791 = bytes_100319;
    }
    if (mem_100323_cached_sizze_109792 < (size_t) bytes_100319) {
        mem_100323 = realloc(mem_100323, bytes_100319);
        mem_100323_cached_sizze_109792 = bytes_100319;
    }
    for (; iter_102606 < end; iter_102606++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_102957 = m_92398;
        int64_t gtid_95055 = iter_102606;
        int64_t remnant_102958 = iter_102606 - gtid_95055;
        int64_t flat_tid_102607 = (int64_t) 0;
        int32_t num_tasks_102959;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_109793 futhark_mc_task_109793;
        
        futhark_mc_task_109793.ctx = ctx;
        futhark_mc_task_109793.free_n_92399 = n_92399;
        futhark_mc_task_109793.free_gtid_95055 = gtid_95055;
        futhark_mc_task_109793.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109793.free_mem_100305 = mem_100305;
        
        struct scheduler_segop futhark_mc_task_109793_task;
        
        futhark_mc_task_109793_task.args = &futhark_mc_task_109793;
        futhark_mc_task_109793_task.top_level_fn =
            futhark_mc_segscan_task_109794;
        futhark_mc_task_109793_task.name = "futhark_mc_segscan_task_109794";
        futhark_mc_task_109793_task.iterations = n_92399;
        futhark_mc_task_109793_task.task_time =
            &ctx->futhark_mc_segscan_task_109794_total_time;
        futhark_mc_task_109793_task.task_iter =
            &ctx->futhark_mc_segscan_task_109794_total_iter;
        futhark_mc_task_109793_task.sched = STATIC;
        futhark_mc_task_109793_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_109794_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109793_task);
        
        if (futhark_mc_segscan_task_109794_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_95067;
        
        last_res_95067 = ((int64_t *) mem_100305)[i_92415];
        for (int64_t i_102973 = 0; i_102973 < n_92399; i_102973++) {
            ((double *) mem_100308)[i_102973] = 0.0;
        }
        for (int64_t i_102974 = 0; i_102974 < n_92399; i_102974++) {
            ((int64_t *) mem_100311)[i_102974] = (int64_t) -1;
        }
        
        int64_t flat_tid_102616 = (int64_t) 0;
        int32_t num_tasks_102975;
        struct futhark_mc_task_109800 futhark_mc_task_109800;
        
        futhark_mc_task_109800.ctx = ctx;
        futhark_mc_task_109800.free_n_92399 = n_92399;
        futhark_mc_task_109800.free_gtid_95055 = gtid_95055;
        futhark_mc_task_109800.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109800.free_mem_100305 = mem_100305;
        futhark_mc_task_109800.free_mem_100308 = mem_100308;
        futhark_mc_task_109800.free_mem_100311 = mem_100311;
        
        struct scheduler_segop futhark_mc_task_109800_task;
        
        futhark_mc_task_109800_task.args = &futhark_mc_task_109800;
        futhark_mc_task_109800_task.top_level_fn =
            futhark_mc_segmap_task_109801;
        futhark_mc_task_109800_task.name = "futhark_mc_segmap_task_109801";
        futhark_mc_task_109800_task.iterations = n_92399;
        futhark_mc_task_109800_task.task_time =
            &ctx->futhark_mc_segmap_task_109801_total_time;
        futhark_mc_task_109800_task.task_iter =
            &ctx->futhark_mc_segmap_task_109801_total_iter;
        futhark_mc_task_109800_task.sched = STATIC;
        futhark_mc_task_109800_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109801_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109800_task);
        
        if (futhark_mc_segmap_task_109801_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_102624 = (int64_t) 0;
        int32_t num_tasks_102981;
        struct futhark_mc_task_109804 futhark_mc_task_109804;
        
        futhark_mc_task_109804.ctx = ctx;
        futhark_mc_task_109804.free_n_92399 = n_92399;
        futhark_mc_task_109804.free_mem_100311 = mem_100311;
        futhark_mc_task_109804.free_mem_100314 = mem_100314;
        
        struct scheduler_segop futhark_mc_task_109804_task;
        
        futhark_mc_task_109804_task.args = &futhark_mc_task_109804;
        futhark_mc_task_109804_task.top_level_fn =
            futhark_mc_segmap_task_109805;
        futhark_mc_task_109804_task.name = "futhark_mc_segmap_task_109805";
        futhark_mc_task_109804_task.iterations = n_92399;
        futhark_mc_task_109804_task.task_time =
            &ctx->futhark_mc_segmap_task_109805_total_time;
        futhark_mc_task_109804_task.task_iter =
            &ctx->futhark_mc_segmap_task_109805_total_iter;
        futhark_mc_task_109804_task.sched = STATIC;
        futhark_mc_task_109804_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109805_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109804_task);
        
        if (futhark_mc_segmap_task_109805_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_95086 = sub64(last_res_95067, (int64_t) 1);
        int64_t min_arg_95087 = sub64(last_res_95067, min_res_92421);
        int64_t min_res_95088 = smin64(q_92401, last_res_95067);
        double i64_res_95089 = sitofp_i64_f64(last_res_95067);
        double x_95090 = i64_res_92427 - i64_res_95089;
        double max_arg_95091 = x_95090 / 2.0;
        double max_res_95092 = fmax64(0.0, max_arg_95091);
        int64_t flat_tid_102628 = (int64_t) 0;
        int32_t num_tasks_102985;
        struct futhark_mc_task_109808 futhark_mc_task_109808;
        
        futhark_mc_task_109808.ctx = ctx;
        futhark_mc_task_109808.free_q_92401 = q_92401;
        futhark_mc_task_109808.free_last_res_95067 = last_res_95067;
        futhark_mc_task_109808.free_mem_100317 = mem_100317;
        
        struct scheduler_segop futhark_mc_task_109808_task;
        
        futhark_mc_task_109808_task.args = &futhark_mc_task_109808;
        futhark_mc_task_109808_task.top_level_fn =
            futhark_mc_segmap_task_109809;
        futhark_mc_task_109808_task.name = "futhark_mc_segmap_task_109809";
        futhark_mc_task_109808_task.iterations = q_92401;
        futhark_mc_task_109808_task.task_time =
            &ctx->futhark_mc_segmap_task_109809_total_time;
        futhark_mc_task_109808_task.task_iter =
            &ctx->futhark_mc_segmap_task_109809_total_iter;
        futhark_mc_task_109808_task.sched = STATIC;
        futhark_mc_task_109808_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109809_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109808_task);
        
        if (futhark_mc_segmap_task_109809_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_102798 = (int64_t) 0;
        int32_t num_tasks_102989;
        int64_t flat_tid_102632 = (int64_t) 0;
        struct futhark_mc_task_109812 futhark_mc_task_109812;
        
        futhark_mc_task_109812.ctx = ctx;
        futhark_mc_task_109812.free_n_92399 = n_92399;
        futhark_mc_task_109812.free_q_92401 = q_92401;
        futhark_mc_task_109812.free_jump_92403 = jump_92403;
        futhark_mc_task_109812.free_n_m_92409 = n_m_92409;
        futhark_mc_task_109812.free_i_92415 = i_92415;
        futhark_mc_task_109812.free_x_92416 = x_92416;
        futhark_mc_task_109812.free_min_res_92421 = min_res_92421;
        futhark_mc_task_109812.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_109812.free_last_res_95067 = last_res_95067;
        futhark_mc_task_109812.free_min_arg_95086 = min_arg_95086;
        futhark_mc_task_109812.free_min_arg_95087 = min_arg_95087;
        futhark_mc_task_109812.free_min_res_95088 = min_res_95088;
        futhark_mc_task_109812.free_max_res_95092 = max_res_95092;
        futhark_mc_task_109812.free_mem_100308 = mem_100308;
        futhark_mc_task_109812.free_mem_100311 = mem_100311;
        futhark_mc_task_109812.free_mem_100314 = mem_100314;
        futhark_mc_task_109812.free_mem_100317 = mem_100317;
        futhark_mc_task_109812.free_mem_100320 = mem_100320;
        futhark_mc_task_109812.free_mem_100323 = mem_100323;
        
        struct scheduler_segop futhark_mc_task_109812_task;
        
        futhark_mc_task_109812_task.args = &futhark_mc_task_109812;
        futhark_mc_task_109812_task.top_level_fn =
            futhark_mc_segmap_task_109813;
        futhark_mc_task_109812_task.name = "futhark_mc_segmap_task_109813";
        futhark_mc_task_109812_task.iterations = n_m_92409;
        futhark_mc_task_109812_task.task_time =
            &ctx->futhark_mc_segmap_task_109813_total_time;
        futhark_mc_task_109812_task.task_iter =
            &ctx->futhark_mc_segmap_task_109813_total_iter;
        futhark_mc_task_109812_task.sched = DYNAMIC;
        futhark_mc_task_109812_task.nested_fn =
            futhark_mc_segmap_nested_task_109816;
        
        int futhark_mc_segmap_task_109813_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109812_task);
        
        if (futhark_mc_segmap_task_109813_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100432.mem + gtid_95055 * n_m_92409 * (int64_t) 8,
                    mem_100320 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100436.mem + gtid_95055 * n_m_92409 * (int64_t) 8,
                    mem_100323 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100305);
    free(mem_100308);
    free(mem_100311);
    free(mem_100314);
    free(mem_100317);
    free(mem_100320);
    free(mem_100323);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109785_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109785_end -
                 futhark_mc_segmap_parloop_109785_start;
        
        ctx->futhark_mc_segmap_parloop_109785_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109785_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109785_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109783(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_95054 = tid;
    int num_tasks_102387 = info.nsubtasks;
    struct futhark_mc_task_109772 *futhark_mc_task_109772 =
                                  (struct futhark_mc_task_109772 *) args;
    struct futhark_context *ctx = futhark_mc_task_109772->ctx;
    uint64_t futhark_mc_segmap_nested_task_109783_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109783_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109772->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109772->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109772->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109772->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109772->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109772->free_i_92415;
    bool x_92416 = futhark_mc_task_109772->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109772->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109772->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109772->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109772->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100304 = futhark_mc_task_109772->free_bytes_100304;
    int64_t bytes_100316 = futhark_mc_task_109772->free_bytes_100316;
    int64_t bytes_100319 = futhark_mc_task_109772->free_bytes_100319;
    struct memblock mem_100432 = {.desc ="mem_100432", .mem =
                                  futhark_mc_task_109772->free_mem_100432,
                                  .size =0, .references =NULL};
    struct memblock mem_100436 = {.desc ="mem_100436", .mem =
                                  futhark_mc_task_109772->free_mem_100436,
                                  .size =0, .references =NULL};
    int64_t iter_102606;
    struct futhark_mc_segmap_parloop_struct_109784
    futhark_mc_segmap_parloop_struct_109784;
    
    futhark_mc_segmap_parloop_struct_109784.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109784.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109784.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109784.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109784.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109784.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109784.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109784.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109784.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109784.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109784.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109784.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109784.free_bytes_100304 = bytes_100304;
    futhark_mc_segmap_parloop_struct_109784.free_bytes_100316 = bytes_100316;
    futhark_mc_segmap_parloop_struct_109784.free_bytes_100319 = bytes_100319;
    futhark_mc_segmap_parloop_struct_109784.free_mem_100432 = mem_100432.mem;
    futhark_mc_segmap_parloop_struct_109784.free_mem_100436 = mem_100436.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109785_task;
    
    futhark_mc_segmap_parloop_109785_task.name =
        "futhark_mc_segmap_parloop_109785";
    futhark_mc_segmap_parloop_109785_task.fn = futhark_mc_segmap_parloop_109785;
    futhark_mc_segmap_parloop_109785_task.args =
        &futhark_mc_segmap_parloop_struct_109784;
    futhark_mc_segmap_parloop_109785_task.iterations = iterations;
    futhark_mc_segmap_parloop_109785_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109785_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109785_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109785_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109785_task);
    
    if (futhark_mc_segmap_parloop_109785_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109785_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109785_total_end -
                 futhark_mc_segmap_parloop_109785_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109785_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109785_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109785_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109783_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109783_end -
                 futhark_mc_segmap_nested_task_109783_start;
        
        ctx->futhark_mc_segmap_nested_task_109783_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109783_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109783_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109832 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100438;
    int64_t free_bytes_100450;
    int64_t free_bytes_100453;
    unsigned char *free_mem_100566;
    unsigned char *free_mem_100570;
};
struct futhark_mc_segmap_parloop_struct_109834 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100438;
    int64_t free_bytes_100450;
    int64_t free_bytes_100453;
    unsigned char *free_mem_100566;
    unsigned char *free_mem_100570;
};
static int futhark_mc_segmap_parloop_109835(void *args, int64_t start,
                                            int64_t end, int flat_tid_95435,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109834
    *futhark_mc_segmap_parloop_struct_109834 =
    (struct futhark_mc_segmap_parloop_struct_109834 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109834->ctx;
    uint64_t futhark_mc_segmap_parloop_109835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109835_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109834->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109834->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109834->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109834->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109834->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109834->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109834->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109834->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109834->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109834->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109834->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100438 =
            futhark_mc_segmap_parloop_struct_109834->free_bytes_100438;
    int64_t bytes_100450 =
            futhark_mc_segmap_parloop_struct_109834->free_bytes_100450;
    int64_t bytes_100453 =
            futhark_mc_segmap_parloop_struct_109834->free_bytes_100453;
    struct memblock mem_100566 = {.desc ="mem_100566", .mem =
                                  futhark_mc_segmap_parloop_struct_109834->free_mem_100566,
                                  .size =0, .references =NULL};
    struct memblock mem_100570 = {.desc ="mem_100570", .mem =
                                  futhark_mc_segmap_parloop_struct_109834->free_mem_100570,
                                  .size =0, .references =NULL};
    size_t mem_100460_cached_sizze_109836 = 0;
    unsigned char *mem_100460 = NULL;
    size_t mem_100475_cached_sizze_109837 = 0;
    unsigned char *mem_100475 = NULL;
    size_t mem_100478_cached_sizze_109838 = 0;
    unsigned char *mem_100478 = NULL;
    size_t mem_100505_cached_sizze_109839 = 0;
    unsigned char *mem_100505 = NULL;
    size_t mem_100520_cached_sizze_109840 = 0;
    unsigned char *mem_100520 = NULL;
    size_t mem_100535_cached_sizze_109841 = 0;
    unsigned char *mem_100535 = NULL;
    size_t mem_100538_cached_sizze_109842 = 0;
    unsigned char *mem_100538 = NULL;
    int64_t iterations = end - start;
    int64_t iter_103285 = start;
    
    if (mem_100460_cached_sizze_109836 < (size_t) bytes_100438) {
        mem_100460 = realloc(mem_100460, bytes_100438);
        mem_100460_cached_sizze_109836 = bytes_100438;
    }
    if (mem_100475_cached_sizze_109837 < (size_t) bytes_100438) {
        mem_100475 = realloc(mem_100475, bytes_100438);
        mem_100475_cached_sizze_109837 = bytes_100438;
    }
    if (mem_100478_cached_sizze_109838 < (size_t) bytes_100438) {
        mem_100478 = realloc(mem_100478, bytes_100438);
        mem_100478_cached_sizze_109838 = bytes_100438;
    }
    if (mem_100505_cached_sizze_109839 < (size_t) bytes_100438) {
        mem_100505 = realloc(mem_100505, bytes_100438);
        mem_100505_cached_sizze_109839 = bytes_100438;
    }
    if (mem_100520_cached_sizze_109840 < (size_t) bytes_100450) {
        mem_100520 = realloc(mem_100520, bytes_100450);
        mem_100520_cached_sizze_109840 = bytes_100450;
    }
    if (mem_100535_cached_sizze_109841 < (size_t) bytes_100453) {
        mem_100535 = realloc(mem_100535, bytes_100453);
        mem_100535_cached_sizze_109841 = bytes_100453;
    }
    if (mem_100538_cached_sizze_109842 < (size_t) bytes_100453) {
        mem_100538 = realloc(mem_100538, bytes_100453);
        mem_100538_cached_sizze_109842 = bytes_100453;
    }
    for (; iter_103285 < end; iter_103285++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103509 = m_92398;
        int64_t gtid_95436 = iter_103285;
        int64_t remnant_103510 = iter_103285 - gtid_95436;
        int64_t discard_99711;
        int64_t scanacc_103287 = (int64_t) 0;
        
        for (int64_t i_103286 = 0; i_103286 < n_92399; i_103286++) {
            double x_103289;
            
            x_103289 = ((double *) Y_mem_100186.mem)[gtid_95436 * n_92399 +
                                                     i_103286];
            
            bool isnan_res_103290;
            
            isnan_res_103290 = futrts_isnan64(x_103289);
            
            bool defunc_0_p_res_103291 = !isnan_res_103290;
            int64_t defunc_0_f_res_103292 =
                    btoi_bool_i64(defunc_0_p_res_103291);
            int64_t defunc_1_op_res_103293 = add64(defunc_0_f_res_103292,
                                                   scanacc_103287);
            
            ((int64_t *) mem_100460)[i_103286] = defunc_1_op_res_103293;
            
            int64_t scanacc_tmp_103511 = defunc_1_op_res_103293;
            
            scanacc_103287 = scanacc_tmp_103511;
        }
        discard_99711 = scanacc_103287;
        
        int64_t last_res_92836;
        
        last_res_92836 = ((int64_t *) mem_100460)[i_92415];
        for (int64_t i_103513 = 0; i_103513 < n_92399; i_103513++) {
            ((double *) mem_100475)[i_103513] = 0.0;
        }
        for (int64_t i_103514 = 0; i_103514 < n_92399; i_103514++) {
            ((int64_t *) mem_100478)[i_103514] = (int64_t) -1;
        }
        for (int64_t write_iter_103295 = 0; write_iter_103295 < n_92399;
             write_iter_103295++) {
            double write_iv_103298;
            
            write_iv_103298 = ((double *) Y_mem_100186.mem)[gtid_95436 *
                                                            n_92399 +
                                                            write_iter_103295];
            
            bool isnan_res_103299;
            
            isnan_res_103299 = futrts_isnan64(write_iv_103298);
            
            bool defunc_0_p_res_103300 = !isnan_res_103299;
            int64_t defunc_1_f_res_103301;
            
            if (defunc_0_p_res_103300) {
                int64_t write_iv_103302;
                
                write_iv_103302 = ((int64_t *) mem_100460)[write_iter_103295];
                
                int64_t defunc_1_f_res_t_res_103303 = sub64(write_iv_103302,
                                                            (int64_t) 1);
                
                defunc_1_f_res_103301 = defunc_1_f_res_t_res_103303;
            } else {
                defunc_1_f_res_103301 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_103301) &&
                slt64(defunc_1_f_res_103301, n_92399)) {
                ((int64_t *) mem_100478)[defunc_1_f_res_103301] =
                    write_iter_103295;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_103301) &&
                slt64(defunc_1_f_res_103301, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_100475 + defunc_1_f_res_103301 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_95436 * n_92399 +
                                                write_iter_103295) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_103307 = 0; i_103307 < n_92399; i_103307++) {
            int64_t x_103309;
            
            x_103309 = ((int64_t *) mem_100478)[i_103307];
            
            int64_t defunc_0_f_res_103310 = add64((int64_t) 1, x_103309);
            
            ((int64_t *) mem_100505)[i_103307] = defunc_0_f_res_103310;
        }
        
        int64_t min_arg_92851 = sub64(last_res_92836, (int64_t) 1);
        int64_t min_arg_92852 = sub64(last_res_92836, min_res_92421);
        int64_t min_res_92853 = smin64(q_92401, last_res_92836);
        double i64_res_92854 = sitofp_i64_f64(last_res_92836);
        double x_92855 = i64_res_92427 - i64_res_92854;
        double max_arg_92856 = x_92855 / 2.0;
        double max_res_92857 = fmax64(0.0, max_arg_92856);
        
        for (int64_t i_103312 = 0; i_103312 < q_92401; i_103312++) {
            bool cond_103314 = sle64(last_res_92836, i_103312);
            double defunc_0_f_res_103315;
            
            if (cond_103314) {
                defunc_0_f_res_103315 = 0.0;
            } else {
                defunc_0_f_res_103315 = 1.0;
            }
            ((double *) mem_100520)[i_103312] = defunc_0_f_res_103315;
        }
        for (int64_t i_103317 = 0; i_103317 < n_m_92409; i_103317++) {
            int64_t min_arg_103320 = mul64(jump_92403, i_103317);
            int64_t min_res_103321 = smin64(i_92415, min_arg_103320);
            int64_t defunc_0_g_res_103322 = add64((int64_t) 1, min_res_103321);
            bool init_idx_103323;
            int64_t init_idx_103324;
            int64_t init_idx_103325;
            bool loop_while_103326;
            int64_t low_103327;
            int64_t high_103328;
            
            loop_while_103326 = x_92416;
            low_103327 = (int64_t) 0;
            high_103328 = i_92415;
            while (loop_while_103326) {
                int64_t x_103329 = add64(low_103327, high_103328);
                int64_t mid_103330 = sdiv64(x_103329, (int64_t) 2);
                bool x_103331 = sle64((int64_t) 0, mid_103330);
                bool y_103332 = slt64(mid_103330, n_92399);
                bool bounds_check_103333 = x_103331 && y_103332;
                bool index_certs_103334;
                
                if (!bounds_check_103333) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_103330,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_103335;
                
                mid_id_103335 = ((int64_t *) mem_100505)[mid_103330];
                
                bool cond_103336 = slt64(mid_id_103335, (int64_t) 0);
                int64_t mid_idx_103337;
                
                if (cond_103336) {
                    mid_idx_103337 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_103337 = mid_id_103335;
                }
                
                bool cond_103338 = sle64(defunc_0_g_res_103322, mid_idx_103337);
                int64_t loopres_103339;
                int64_t loopres_103340;
                
                if (cond_103338) {
                    int64_t loopres_t_res_103341 = sub64(mid_103330,
                                                         (int64_t) 1);
                    
                    loopres_103339 = low_103327;
                    loopres_103340 = loopres_t_res_103341;
                } else {
                    int64_t loopres_f_res_103342 = add64((int64_t) 1,
                                                         mid_103330);
                    
                    loopres_103339 = loopres_f_res_103342;
                    loopres_103340 = high_103328;
                }
                
                bool loop_cond_103343 = sle64(loopres_103339, loopres_103340);
                bool loop_while_tmp_103521 = loop_cond_103343;
                int64_t low_tmp_103522 = loopres_103339;
                int64_t high_tmp_103523 = loopres_103340;
                
                loop_while_103326 = loop_while_tmp_103521;
                low_103327 = low_tmp_103522;
                high_103328 = high_tmp_103523;
            }
            init_idx_103323 = loop_while_103326;
            init_idx_103324 = low_103327;
            init_idx_103325 = high_103328;
            
            bool idx_103344;
            int64_t idx_103345;
            int64_t idx_103346;
            int64_t idx_103347;
            bool loop_while_103348;
            int64_t l_idx_103349;
            int64_t r_idx_103350;
            int64_t span_103351;
            
            loop_while_103348 = loop_cond_92426;
            l_idx_103349 = init_idx_103324;
            r_idx_103350 = init_idx_103324;
            span_103351 = (int64_t) 1;
            while (loop_while_103348) {
                int64_t max_arg_103352 = sub64(l_idx_103349, (int64_t) 1);
                int64_t max_res_103353 = smax64((int64_t) 0, max_arg_103352);
                int64_t min_arg_103354 = add64((int64_t) 1, r_idx_103350);
                int64_t min_res_103355 = smin64(min_arg_92851, min_arg_103354);
                bool x_103356 = sle64((int64_t) 0, max_res_103353);
                bool y_103357 = slt64(max_res_103353, n_92399);
                bool bounds_check_103358 = x_103356 && y_103357;
                bool index_certs_103359;
                
                if (!bounds_check_103358) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_103353,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_103360;
                
                x_103360 = ((int64_t *) mem_100505)[max_res_103353];
                
                int64_t abs_arg_103361 = sub64(x_103360, defunc_0_g_res_103322);
                int64_t abs_res_103362 = abs64(abs_arg_103361);
                bool x_103363 = sle64((int64_t) 0, min_res_103355);
                bool y_103364 = slt64(min_res_103355, n_92399);
                bool bounds_check_103365 = x_103363 && y_103364;
                bool index_certs_103366;
                
                if (!bounds_check_103365) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_103355,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_103367;
                
                x_103367 = ((int64_t *) mem_100505)[min_res_103355];
                
                int64_t abs_arg_103368 = sub64(x_103367, defunc_0_g_res_103322);
                int64_t abs_res_103369 = abs64(abs_arg_103368);
                bool cond_103370 = max_res_103353 == l_idx_103349;
                int64_t loopres_103371;
                int64_t loopres_103372;
                int64_t loopres_103373;
                
                if (cond_103370) {
                    loopres_103371 = l_idx_103349;
                    loopres_103372 = r_idx_103350;
                    loopres_103373 = min_res_92421;
                } else {
                    bool cond_103374 = slt64(abs_res_103362, abs_res_103369);
                    bool cond_f_res_103375 = min_res_103355 == r_idx_103350;
                    bool x_103376 = !cond_103374;
                    bool y_103377 = cond_f_res_103375 && x_103376;
                    bool cond_103378 = cond_103374 || y_103377;
                    int64_t loopres_f_res_103379;
                    
                    if (cond_103378) {
                        loopres_f_res_103379 = max_res_103353;
                    } else {
                        loopres_f_res_103379 = l_idx_103349;
                    }
                    
                    int64_t loopres_f_res_103380;
                    
                    if (cond_103378) {
                        loopres_f_res_103380 = r_idx_103350;
                    } else {
                        loopres_f_res_103380 = min_res_103355;
                    }
                    
                    int64_t loopres_f_res_103381;
                    
                    if (cond_103378) {
                        int64_t loopres_f_res_t_res_103382 = add64((int64_t) 1,
                                                                   span_103351);
                        
                        loopres_f_res_103381 = loopres_f_res_t_res_103382;
                    } else {
                        int64_t loopres_f_res_f_res_103383 = add64((int64_t) 1,
                                                                   span_103351);
                        
                        loopres_f_res_103381 = loopres_f_res_f_res_103383;
                    }
                    loopres_103371 = loopres_f_res_103379;
                    loopres_103372 = loopres_f_res_103380;
                    loopres_103373 = loopres_f_res_103381;
                }
                
                bool loop_cond_103384 = slt64(loopres_103373, min_res_92421);
                bool loop_while_tmp_103524 = loop_cond_103384;
                int64_t l_idx_tmp_103525 = loopres_103371;
                int64_t r_idx_tmp_103526 = loopres_103372;
                int64_t span_tmp_103527 = loopres_103373;
                
                loop_while_103348 = loop_while_tmp_103524;
                l_idx_103349 = l_idx_tmp_103525;
                r_idx_103350 = r_idx_tmp_103526;
                span_103351 = span_tmp_103527;
            }
            idx_103344 = loop_while_103348;
            idx_103345 = l_idx_103349;
            idx_103346 = r_idx_103350;
            idx_103347 = span_103351;
            
            int64_t min_res_103385 = smin64(min_arg_92852, idx_103345);
            int64_t max_res_103386 = smax64((int64_t) 0, min_res_103385);
            int64_t x_103387 = add64(min_res_92853, max_res_103386);
            int64_t r_103388 = sub64(x_103387, (int64_t) 1);
            bool x_103389 = sle64((int64_t) 0, r_103388);
            bool y_103390 = slt64(r_103388, n_92399);
            bool bounds_check_103391 = x_103389 && y_103390;
            bool index_certs_103392;
            
            if (!bounds_check_103391) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_103388,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103393;
            
            x_103393 = ((int64_t *) mem_100478)[r_103388];
            
            int64_t abs_arg_103394 = sub64(x_103393, min_res_103321);
            int64_t abs_res_103395 = abs64(abs_arg_103394);
            bool x_103396 = sle64((int64_t) 0, max_res_103386);
            bool y_103397 = slt64(max_res_103386, n_92399);
            bool bounds_check_103398 = x_103396 && y_103397;
            bool index_certs_103399;
            
            if (!bounds_check_103398) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_103386,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_103400;
            
            x_103400 = ((int64_t *) mem_100478)[max_res_103386];
            
            int64_t abs_arg_103401 = sub64(x_103400, min_res_103321);
            int64_t abs_res_103402 = abs64(abs_arg_103401);
            int64_t max_res_103403 = smax64(abs_res_103395, abs_res_103402);
            double defunc_0_f_res_103404 = sitofp_i64_f64(max_res_103403);
            double defunc_1_f_res_103405 = max_res_92857 +
                   defunc_0_f_res_103404;
            double defunc_2_reduce_res_103406;
            double defunc_2_reduce_res_103407;
            double defunc_2_reduce_res_103408;
            double defunc_2_reduce_res_103409;
            double defunc_2_reduce_res_103410;
            double redout_103412;
            double redout_103413;
            double redout_103414;
            double redout_103415;
            double redout_103416;
            
            redout_103412 = 0.0;
            redout_103413 = 0.0;
            redout_103414 = 0.0;
            redout_103415 = 0.0;
            redout_103416 = 0.0;
            for (int64_t i_103411 = 0; i_103411 < q_92401; i_103411++) {
                double x_103417;
                
                x_103417 = ((double *) mem_100520)[i_103411];
                
                bool cond_103418 = sle64(last_res_92836, i_103411);
                int64_t defunc_0_f_res_103419;
                
                if (cond_103418) {
                    defunc_0_f_res_103419 = (int64_t) 0;
                } else {
                    int64_t i_103420 = add64(max_res_103386, i_103411);
                    int64_t defunc_0_add_arg_103421;
                    
                    defunc_0_add_arg_103421 =
                        ((int64_t *) mem_100478)[i_103420];
                    
                    int64_t defunc_1_add_res_103422 = add64((int64_t) 1,
                                                            defunc_0_add_arg_103421);
                    
                    defunc_0_f_res_103419 = defunc_1_add_res_103422;
                }
                
                int64_t binop_p_103423 = sub64(defunc_0_f_res_103419,
                                               min_res_103321);
                double defunc_0_f_res_103424 = sitofp_i64_f64(binop_p_103423);
                double abs_res_103425 = fabs(defunc_0_f_res_103424);
                double tmp1_103426 = abs_res_103425 / defunc_1_f_res_103405;
                double x_103427 = tmp1_103426 * tmp1_103426;
                double y_103428 = tmp1_103426 * x_103427;
                double tmp2_103429 = 1.0 - y_103428;
                double x_103430 = tmp2_103429 * tmp2_103429;
                double tmp3_103431 = tmp2_103429 * x_103430;
                double w_j_103432 = x_103417 * tmp3_103431;
                double xw_j_103433 = defunc_0_f_res_103424 * w_j_103432;
                double x2w_j_103434 = defunc_0_f_res_103424 * xw_j_103433;
                double x3w_j_103435 = defunc_0_f_res_103424 * x2w_j_103434;
                double x4w_j_103436 = defunc_0_f_res_103424 * x3w_j_103435;
                double defunc_1_op_res_103437 = w_j_103432 + redout_103412;
                double defunc_1_op_res_103438 = xw_j_103433 + redout_103413;
                double defunc_1_op_res_103439 = x2w_j_103434 + redout_103414;
                double defunc_1_op_res_103440 = x3w_j_103435 + redout_103415;
                double defunc_1_op_res_103441 = x4w_j_103436 + redout_103416;
                double redout_tmp_103528 = defunc_1_op_res_103437;
                double redout_tmp_103529 = defunc_1_op_res_103438;
                double redout_tmp_103530 = defunc_1_op_res_103439;
                double redout_tmp_103531 = defunc_1_op_res_103440;
                double redout_tmp_103532 = defunc_1_op_res_103441;
                
                redout_103412 = redout_tmp_103528;
                redout_103413 = redout_tmp_103529;
                redout_103414 = redout_tmp_103530;
                redout_103415 = redout_tmp_103531;
                redout_103416 = redout_tmp_103532;
            }
            defunc_2_reduce_res_103406 = redout_103412;
            defunc_2_reduce_res_103407 = redout_103413;
            defunc_2_reduce_res_103408 = redout_103414;
            defunc_2_reduce_res_103409 = redout_103415;
            defunc_2_reduce_res_103410 = redout_103416;
            
            double x_103442 = defunc_2_reduce_res_103408 *
                   defunc_2_reduce_res_103410;
            double y_103443 = defunc_2_reduce_res_103409 *
                   defunc_2_reduce_res_103409;
            double a12_103444 = x_103442 - y_103443;
            double x_103445 = defunc_2_reduce_res_103408 *
                   defunc_2_reduce_res_103409;
            double y_103446 = defunc_2_reduce_res_103407 *
                   defunc_2_reduce_res_103410;
            double b12_103447 = x_103445 - y_103446;
            double x_103448 = defunc_2_reduce_res_103407 *
                   defunc_2_reduce_res_103409;
            double y_103449 = defunc_2_reduce_res_103408 *
                   defunc_2_reduce_res_103408;
            double c12_103450 = x_103448 - y_103449;
            double x_103451 = defunc_2_reduce_res_103406 *
                   defunc_2_reduce_res_103410;
            double b2_103452 = x_103451 - y_103449;
            double x_103453 = defunc_2_reduce_res_103407 *
                   defunc_2_reduce_res_103408;
            double y_103454 = defunc_2_reduce_res_103406 *
                   defunc_2_reduce_res_103409;
            double c2_103455 = x_103453 - y_103454;
            double x_103456 = defunc_2_reduce_res_103406 * a12_103444;
            double y_103457 = defunc_2_reduce_res_103407 * b12_103447;
            double x_103458 = x_103456 + y_103457;
            double y_103459 = defunc_2_reduce_res_103408 * c12_103450;
            double y_103460 = x_103458 + y_103459;
            double det_103461 = 1.0 / y_103460;
            double a12_103462 = a12_103444 * det_103461;
            double b12_103463 = b12_103447 * det_103461;
            double c12_103464 = c12_103450 * det_103461;
            double b2_103465 = b2_103452 * det_103461;
            double c2_103466 = c2_103455 * det_103461;
            double defunc_2_reduce_res_103467;
            double defunc_2_reduce_res_103468;
            double redout_103470;
            double redout_103471;
            
            redout_103470 = 0.0;
            redout_103471 = 0.0;
            for (int64_t i_103469 = 0; i_103469 < q_92401; i_103469++) {
                double x_103472;
                
                x_103472 = ((double *) mem_100520)[i_103469];
                
                bool cond_103473 = sle64(last_res_92836, i_103469);
                int64_t defunc_0_f_res_103474;
                
                if (cond_103473) {
                    defunc_0_f_res_103474 = (int64_t) 0;
                } else {
                    int64_t i_103475 = add64(max_res_103386, i_103469);
                    int64_t defunc_0_add_arg_103476;
                    
                    defunc_0_add_arg_103476 =
                        ((int64_t *) mem_100478)[i_103475];
                    
                    int64_t defunc_1_add_res_103477 = add64((int64_t) 1,
                                                            defunc_0_add_arg_103476);
                    
                    defunc_0_f_res_103474 = defunc_1_add_res_103477;
                }
                
                int64_t binop_p_103478 = sub64(defunc_0_f_res_103474,
                                               min_res_103321);
                double defunc_0_f_res_103479 = sitofp_i64_f64(binop_p_103478);
                double abs_res_103480 = fabs(defunc_0_f_res_103479);
                double tmp1_103481 = abs_res_103480 / defunc_1_f_res_103405;
                double x_103482 = tmp1_103481 * tmp1_103481;
                double y_103483 = tmp1_103481 * x_103482;
                double tmp2_103484 = 1.0 - y_103483;
                double x_103485 = tmp2_103484 * tmp2_103484;
                double tmp3_103486 = tmp2_103484 * x_103485;
                double tmp4_103487 = x_103472 * tmp3_103486;
                double defunc_1_f_res_103488 = defunc_0_f_res_103479 *
                       tmp4_103487;
                double defunc_1_f_res_103489 = defunc_0_f_res_103479 *
                       defunc_1_f_res_103488;
                double defunc_0_f_res_103490;
                
                if (cond_103473) {
                    defunc_0_f_res_103490 = 0.0;
                } else {
                    int64_t i_103491 = add64(max_res_103386, i_103469);
                    double defunc_0_add_arg_103492;
                    
                    defunc_0_add_arg_103492 = ((double *) mem_100475)[i_103491];
                    defunc_0_f_res_103490 = defunc_0_add_arg_103492;
                }
                
                double x_103493 = a12_103462 * tmp4_103487;
                double y_103494 = b12_103463 * defunc_1_f_res_103488;
                double x_103495 = x_103493 + y_103494;
                double y_103496 = c12_103464 * defunc_1_f_res_103489;
                double x_103497 = x_103495 + y_103496;
                double defunc_9_fit_fun_res_103498 = defunc_0_f_res_103490 *
                       x_103497;
                double x_103499 = b12_103463 * tmp4_103487;
                double y_103500 = b2_103465 * defunc_1_f_res_103488;
                double x_103501 = x_103499 + y_103500;
                double y_103502 = c2_103466 * defunc_1_f_res_103489;
                double x_103503 = x_103501 + y_103502;
                double defunc_9_slope_fun_res_103504 = defunc_0_f_res_103490 *
                       x_103503;
                double defunc_1_op_res_103505 = defunc_9_fit_fun_res_103498 +
                       redout_103470;
                double defunc_1_op_res_103506 = defunc_9_slope_fun_res_103504 +
                       redout_103471;
                double redout_tmp_103533 = defunc_1_op_res_103505;
                double redout_tmp_103534 = defunc_1_op_res_103506;
                
                redout_103470 = redout_tmp_103533;
                redout_103471 = redout_tmp_103534;
            }
            defunc_2_reduce_res_103467 = redout_103470;
            defunc_2_reduce_res_103468 = redout_103471;
            ((double *) mem_100535)[i_103317] = defunc_2_reduce_res_103467;
            ((double *) mem_100538)[i_103317] = defunc_2_reduce_res_103468;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100566.mem + gtid_95436 * n_m_92409 * (int64_t) 8,
                    mem_100535 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100570.mem + gtid_95436 * n_m_92409 * (int64_t) 8,
                    mem_100538 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100460);
    free(mem_100475);
    free(mem_100478);
    free(mem_100505);
    free(mem_100520);
    free(mem_100535);
    free(mem_100538);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109835_end -
                 futhark_mc_segmap_parloop_109835_start;
        
        ctx->futhark_mc_segmap_parloop_109835_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109835_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109835_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109833(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_95435 = tid;
    int num_tasks_103284 = info.nsubtasks;
    struct futhark_mc_task_109832 *futhark_mc_task_109832 =
                                  (struct futhark_mc_task_109832 *) args;
    struct futhark_context *ctx = futhark_mc_task_109832->ctx;
    uint64_t futhark_mc_segmap_task_109833_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109833_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109832->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109832->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109832->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109832->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109832->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109832->free_i_92415;
    bool x_92416 = futhark_mc_task_109832->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109832->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109832->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109832->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109832->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100438 = futhark_mc_task_109832->free_bytes_100438;
    int64_t bytes_100450 = futhark_mc_task_109832->free_bytes_100450;
    int64_t bytes_100453 = futhark_mc_task_109832->free_bytes_100453;
    struct memblock mem_100566 = {.desc ="mem_100566", .mem =
                                  futhark_mc_task_109832->free_mem_100566,
                                  .size =0, .references =NULL};
    struct memblock mem_100570 = {.desc ="mem_100570", .mem =
                                  futhark_mc_task_109832->free_mem_100570,
                                  .size =0, .references =NULL};
    int64_t iter_103285;
    struct futhark_mc_segmap_parloop_struct_109834
    futhark_mc_segmap_parloop_struct_109834;
    
    futhark_mc_segmap_parloop_struct_109834.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109834.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109834.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109834.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109834.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109834.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109834.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109834.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109834.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109834.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109834.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109834.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109834.free_bytes_100438 = bytes_100438;
    futhark_mc_segmap_parloop_struct_109834.free_bytes_100450 = bytes_100450;
    futhark_mc_segmap_parloop_struct_109834.free_bytes_100453 = bytes_100453;
    futhark_mc_segmap_parloop_struct_109834.free_mem_100566 = mem_100566.mem;
    futhark_mc_segmap_parloop_struct_109834.free_mem_100570 = mem_100570.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109835_task;
    
    futhark_mc_segmap_parloop_109835_task.name =
        "futhark_mc_segmap_parloop_109835";
    futhark_mc_segmap_parloop_109835_task.fn = futhark_mc_segmap_parloop_109835;
    futhark_mc_segmap_parloop_109835_task.args =
        &futhark_mc_segmap_parloop_struct_109834;
    futhark_mc_segmap_parloop_109835_task.iterations = iterations;
    futhark_mc_segmap_parloop_109835_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109835_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109835_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109835_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109835_task);
    
    if (futhark_mc_segmap_parloop_109835_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109835_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109835_total_end -
                 futhark_mc_segmap_parloop_109835_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109835_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109835_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109835_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109833_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109833_end -
                 futhark_mc_segmap_task_109833_start;
        
        ctx->futhark_mc_segmap_task_109833_runs[tid]++;
        ctx->futhark_mc_segmap_task_109833_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109833_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109844 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100438;
    int64_t free_bytes_100450;
    int64_t free_bytes_100453;
    unsigned char *free_mem_100566;
    unsigned char *free_mem_100570;
};
struct futhark_mc_task_109853 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95657;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100439;
};
struct futhark_mc_scan_stage_1_parloop_struct_109856 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95657;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100439;
};
static int futhark_mc_scan_stage_1_parloop_109857(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_103536, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_109856
    *futhark_mc_scan_stage_1_parloop_struct_109856 =
    (struct futhark_mc_scan_stage_1_parloop_struct_109856 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_109856->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_109857_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109857_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_109856->free_n_92399;
    int64_t gtid_95657 =
            futhark_mc_scan_stage_1_parloop_struct_109856->free_gtid_95657;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_109856->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100439 = {.desc ="mem_100439", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_109856->free_mem_100439,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103951 = start;
    int64_t x_103538;
    int64_t x_103539;
    
    x_103538 = (int64_t) 0;
    for (; iter_103951 < end; iter_103951++) {
        int64_t gtid_103537 = iter_103951;
        
        // stage 1 scan body
        {
            double x_103541;
            
            x_103541 = ((double *) Y_mem_100186.mem)[gtid_95657 * n_92399 +
                                                     gtid_103537];
            
            bool isnan_res_103542;
            
            isnan_res_103542 = futrts_isnan64(x_103541);
            
            bool defunc_0_p_res_103543 = !isnan_res_103542;
            int64_t defunc_0_f_res_103544 =
                    btoi_bool_i64(defunc_0_p_res_103543);
            
            // write mapped values results to memory
            { }
            x_103538 = x_103538;
            // Read next values
            {
                x_103539 = defunc_0_f_res_103544;
            }
            
            int64_t defunc_1_op_res_103540 = add64(x_103538, x_103539);
            
            ((int64_t *) mem_100439.mem)[gtid_103537] = defunc_1_op_res_103540;
            x_103538 = defunc_1_op_res_103540;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109857_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109857_end -
                 futhark_mc_scan_stage_1_parloop_109857_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_109857_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_109857_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_109857_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_109858 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95657;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100439;
};
static int futhark_mc_scan_stage_3_parloop_109859(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_103536, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_109858
    *futhark_mc_scan_stage_3_parloop_struct_109858 =
    (struct futhark_mc_scan_stage_3_parloop_struct_109858 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_109858->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_109859_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_109859_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_109858->free_n_92399;
    int64_t gtid_95657 =
            futhark_mc_scan_stage_3_parloop_struct_109858->free_gtid_95657;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_109858->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100439 = {.desc ="mem_100439", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_109858->free_mem_100439,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103963 = start;
    int64_t x_103960;
    int64_t x_103961;
    
    if (iter_103963 == (int64_t) 0) {
        x_103960 = (int64_t) 0;
    } else {
        x_103960 = ((int64_t *) mem_100439.mem)[iter_103963 - (int64_t) 1];
    }
    for (; iter_103963 < end; iter_103963++) {
        int64_t gtid_103537 = iter_103963;
        
        // stage 3 scan body
        {
            double x_103541;
            
            x_103541 = ((double *) Y_mem_100186.mem)[gtid_95657 * n_92399 +
                                                     gtid_103537];
            
            bool isnan_res_103542;
            
            isnan_res_103542 = futrts_isnan64(x_103541);
            
            bool defunc_0_p_res_103543 = !isnan_res_103542;
            int64_t defunc_0_f_res_103544 =
                    btoi_bool_i64(defunc_0_p_res_103543);
            
            x_103960 = x_103960;
            x_103961 = defunc_0_f_res_103544;
            
            int64_t defunc_1_op_res_103962 = add64(x_103960, x_103961);
            
            ((int64_t *) mem_100439.mem)[gtid_103537] = defunc_1_op_res_103962;
            x_103960 = defunc_1_op_res_103962;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_109859_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_109859_end -
                 futhark_mc_scan_stage_3_parloop_109859_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_109859_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_109859_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_109859_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_109854(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103536 = tid;
    int num_tasks_103950 = info.nsubtasks;
    struct futhark_mc_task_109853 *futhark_mc_task_109853 =
                                  (struct futhark_mc_task_109853 *) args;
    struct futhark_context *ctx = futhark_mc_task_109853->ctx;
    uint64_t futhark_mc_segscan_task_109854_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_109854_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109853->free_n_92399;
    int64_t gtid_95657 = futhark_mc_task_109853->free_gtid_95657;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109853->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100439 = {.desc ="mem_100439", .mem =
                                  futhark_mc_task_109853->free_mem_100439,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_103957_cached_sizze_109855 = 0;
    unsigned char *scan_stage_2_accum_mem_103957 = NULL;
    int64_t iter_103951;
    struct futhark_mc_scan_stage_1_parloop_struct_109856
    futhark_mc_scan_stage_1_parloop_struct_109856;
    
    futhark_mc_scan_stage_1_parloop_struct_109856.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_109856.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_109856.free_gtid_95657 = gtid_95657;
    futhark_mc_scan_stage_1_parloop_struct_109856.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_109856.free_mem_100439 =
        mem_100439.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_109857_task;
    
    futhark_mc_scan_stage_1_parloop_109857_task.name =
        "futhark_mc_scan_stage_1_parloop_109857";
    futhark_mc_scan_stage_1_parloop_109857_task.fn =
        futhark_mc_scan_stage_1_parloop_109857;
    futhark_mc_scan_stage_1_parloop_109857_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_109856;
    futhark_mc_scan_stage_1_parloop_109857_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_109857_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_109857_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109857_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_109857_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_109857_task);
    
    if (futhark_mc_scan_stage_1_parloop_109857_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109857_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109857_total_end -
                 futhark_mc_scan_stage_1_parloop_109857_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109857_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109857_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109857_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_103950)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_103952;
        int64_t x_103953;
        int64_t offset_103955 = (int64_t) 0;
        int64_t offset_index_103956 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_103957_cached_sizze_109855 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_103957 =
                realloc(scan_stage_2_accum_mem_103957, (int64_t) 8);
            scan_stage_2_accum_mem_103957_cached_sizze_109855 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_103957)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_103959 = 0; i_103959 < num_tasks_103950 - 1;
             i_103959++) {
            offset_103955 = squot64(n_92399, sext_i32_i64(num_tasks_103950));
            if (slt64(sext_i32_i64(i_103959), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_103950)))) {
                offset_103955 += (int64_t) 1;
            }
            offset_index_103956 += offset_103955;
            
            int64_t gtid_103537 = offset_index_103956;
            double x_103541;
            
            x_103541 = ((double *) Y_mem_100186.mem)[gtid_95657 * n_92399 +
                                                     gtid_103537];
            
            bool isnan_res_103542;
            
            isnan_res_103542 = futrts_isnan64(x_103541);
            
            bool defunc_0_p_res_103543 = !isnan_res_103542;
            int64_t defunc_0_f_res_103544 =
                    btoi_bool_i64(defunc_0_p_res_103543);
            
            // Read carry in
            {
                x_103952 =
                    ((int64_t *) scan_stage_2_accum_mem_103957)[(int64_t) 0];
            }
            // Read next values
            {
                x_103953 = ((int64_t *) mem_100439.mem)[offset_index_103956 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_103954 = add64(x_103952, x_103953);
            
            ((int64_t *) mem_100439.mem)[offset_index_103956 - (int64_t) 1] =
                defunc_1_op_res_103954;
            ((int64_t *) scan_stage_2_accum_mem_103957)[(int64_t) 0] =
                defunc_1_op_res_103954;
        }
        
        int64_t iter_103963 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_109858
        futhark_mc_scan_stage_3_parloop_struct_109858;
        
        futhark_mc_scan_stage_3_parloop_struct_109858.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_109858.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_109858.free_gtid_95657 =
            gtid_95657;
        futhark_mc_scan_stage_3_parloop_struct_109858.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_109858.free_mem_100439 =
            mem_100439.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_109859_task;
        
        futhark_mc_scan_stage_3_parloop_109859_task.name =
            "futhark_mc_scan_stage_3_parloop_109859";
        futhark_mc_scan_stage_3_parloop_109859_task.fn =
            futhark_mc_scan_stage_3_parloop_109859;
        futhark_mc_scan_stage_3_parloop_109859_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_109858;
        futhark_mc_scan_stage_3_parloop_109859_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_109859_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_109859_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_109859_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_109859_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_109859_task);
        
        if (futhark_mc_scan_stage_3_parloop_109859_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_109859_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_109859_total_end -
                     futhark_mc_scan_stage_3_parloop_109859_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109859_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109859_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109859_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_103957);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_109854_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_109854_end -
                 futhark_mc_segscan_task_109854_start;
        
        ctx->futhark_mc_segscan_task_109854_runs[tid]++;
        ctx->futhark_mc_segscan_task_109854_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_109854_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109860 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95657;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100439;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
};
struct futhark_mc_segmap_parloop_struct_109862 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_95657;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100439;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
};
static int futhark_mc_segmap_parloop_109863(void *args, int64_t start,
                                            int64_t end, int flat_tid_103545,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109862
    *futhark_mc_segmap_parloop_struct_109862 =
    (struct futhark_mc_segmap_parloop_struct_109862 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109862->ctx;
    uint64_t futhark_mc_segmap_parloop_109863_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109863_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109862->free_n_92399;
    int64_t gtid_95657 =
            futhark_mc_segmap_parloop_struct_109862->free_gtid_95657;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109862->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100439 = {.desc ="mem_100439", .mem =
                                  futhark_mc_segmap_parloop_struct_109862->free_mem_100439,
                                  .size =0, .references =NULL};
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_segmap_parloop_struct_109862->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segmap_parloop_struct_109862->free_mem_100445,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103967 = start;
    
    for (; iter_103967 < end; iter_103967++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103970 = n_92399;
        int64_t gtid_103546 = iter_103967;
        int64_t remnant_103971 = iter_103967 - gtid_103546;
        double x_103547;
        
        x_103547 = ((double *) Y_mem_100186.mem)[gtid_95657 * n_92399 +
                                                 gtid_103546];
        
        bool isnan_res_103548;
        
        isnan_res_103548 = futrts_isnan64(x_103547);
        
        bool defunc_0_p_res_103549 = !isnan_res_103548;
        int64_t defunc_1_f_res_103550;
        
        if (defunc_0_p_res_103549) {
            int64_t x_103968;
            
            x_103968 = ((int64_t *) mem_100439.mem)[gtid_103546];
            
            int64_t defunc_1_f_res_t_res_103969 = sub64(x_103968, (int64_t) 1);
            
            defunc_1_f_res_103550 = defunc_1_f_res_t_res_103969;
        } else {
            defunc_1_f_res_103550 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_103550) &&
            slt64(defunc_1_f_res_103550, n_92399)) {
            ((int64_t *) mem_100445.mem)[defunc_1_f_res_103550] = gtid_103546;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_103550) &&
            slt64(defunc_1_f_res_103550, n_92399)) {
            ((double *) mem_100442.mem)[defunc_1_f_res_103550] = x_103547;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109863_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109863_end -
                 futhark_mc_segmap_parloop_109863_start;
        
        ctx->futhark_mc_segmap_parloop_109863_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109863_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109863_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109861(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103545 = tid;
    int num_tasks_103966 = info.nsubtasks;
    struct futhark_mc_task_109860 *futhark_mc_task_109860 =
                                  (struct futhark_mc_task_109860 *) args;
    struct futhark_context *ctx = futhark_mc_task_109860->ctx;
    uint64_t futhark_mc_segmap_task_109861_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109861_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109860->free_n_92399;
    int64_t gtid_95657 = futhark_mc_task_109860->free_gtid_95657;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109860->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100439 = {.desc ="mem_100439", .mem =
                                  futhark_mc_task_109860->free_mem_100439,
                                  .size =0, .references =NULL};
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_task_109860->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109860->free_mem_100445,
                                  .size =0, .references =NULL};
    int64_t iter_103967;
    struct futhark_mc_segmap_parloop_struct_109862
    futhark_mc_segmap_parloop_struct_109862;
    
    futhark_mc_segmap_parloop_struct_109862.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109862.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109862.free_gtid_95657 = gtid_95657;
    futhark_mc_segmap_parloop_struct_109862.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109862.free_mem_100439 = mem_100439.mem;
    futhark_mc_segmap_parloop_struct_109862.free_mem_100442 = mem_100442.mem;
    futhark_mc_segmap_parloop_struct_109862.free_mem_100445 = mem_100445.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109863_task;
    
    futhark_mc_segmap_parloop_109863_task.name =
        "futhark_mc_segmap_parloop_109863";
    futhark_mc_segmap_parloop_109863_task.fn = futhark_mc_segmap_parloop_109863;
    futhark_mc_segmap_parloop_109863_task.args =
        &futhark_mc_segmap_parloop_struct_109862;
    futhark_mc_segmap_parloop_109863_task.iterations = iterations;
    futhark_mc_segmap_parloop_109863_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109863_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109863_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109863_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109863_task);
    
    if (futhark_mc_segmap_parloop_109863_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109863_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109863_total_end -
                 futhark_mc_segmap_parloop_109863_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109863_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109863_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109863_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109861_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109861_end -
                 futhark_mc_segmap_task_109861_start;
        
        ctx->futhark_mc_segmap_task_109861_runs[tid]++;
        ctx->futhark_mc_segmap_task_109861_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109861_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109864 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100448;
};
struct futhark_mc_segmap_parloop_struct_109866 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100448;
};
static int futhark_mc_segmap_parloop_109867(void *args, int64_t start,
                                            int64_t end, int flat_tid_103553,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109866
    *futhark_mc_segmap_parloop_struct_109866 =
    (struct futhark_mc_segmap_parloop_struct_109866 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109866->ctx;
    uint64_t futhark_mc_segmap_parloop_109867_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109867_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109866->free_n_92399;
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segmap_parloop_struct_109866->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_segmap_parloop_struct_109866->free_mem_100448,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103973 = start;
    
    for (; iter_103973 < end; iter_103973++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103974 = n_92399;
        int64_t gtid_103554 = iter_103973;
        int64_t remnant_103975 = iter_103973 - gtid_103554;
        int64_t x_103555;
        
        x_103555 = ((int64_t *) mem_100445.mem)[gtid_103554];
        
        int64_t defunc_0_f_res_103556 = add64((int64_t) 1, x_103555);
        
        ((int64_t *) mem_100448.mem)[gtid_103554] = defunc_0_f_res_103556;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109867_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109867_end -
                 futhark_mc_segmap_parloop_109867_start;
        
        ctx->futhark_mc_segmap_parloop_109867_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109867_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109867_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109865(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103553 = tid;
    int num_tasks_103972 = info.nsubtasks;
    struct futhark_mc_task_109864 *futhark_mc_task_109864 =
                                  (struct futhark_mc_task_109864 *) args;
    struct futhark_context *ctx = futhark_mc_task_109864->ctx;
    uint64_t futhark_mc_segmap_task_109865_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109865_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109864->free_n_92399;
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109864->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_task_109864->free_mem_100448,
                                  .size =0, .references =NULL};
    int64_t iter_103973;
    struct futhark_mc_segmap_parloop_struct_109866
    futhark_mc_segmap_parloop_struct_109866;
    
    futhark_mc_segmap_parloop_struct_109866.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109866.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109866.free_mem_100445 = mem_100445.mem;
    futhark_mc_segmap_parloop_struct_109866.free_mem_100448 = mem_100448.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109867_task;
    
    futhark_mc_segmap_parloop_109867_task.name =
        "futhark_mc_segmap_parloop_109867";
    futhark_mc_segmap_parloop_109867_task.fn = futhark_mc_segmap_parloop_109867;
    futhark_mc_segmap_parloop_109867_task.args =
        &futhark_mc_segmap_parloop_struct_109866;
    futhark_mc_segmap_parloop_109867_task.iterations = iterations;
    futhark_mc_segmap_parloop_109867_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109867_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109867_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109867_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109867_task);
    
    if (futhark_mc_segmap_parloop_109867_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109867_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109867_total_end -
                 futhark_mc_segmap_parloop_109867_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109867_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109867_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109867_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109865_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109865_end -
                 futhark_mc_segmap_task_109865_start;
        
        ctx->futhark_mc_segmap_task_109865_runs[tid]++;
        ctx->futhark_mc_segmap_task_109865_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109865_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109868 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100451;
};
struct futhark_mc_segmap_parloop_struct_109870 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100451;
};
static int futhark_mc_segmap_parloop_109871(void *args, int64_t start,
                                            int64_t end, int flat_tid_103557,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109870
    *futhark_mc_segmap_parloop_struct_109870 =
    (struct futhark_mc_segmap_parloop_struct_109870 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109870->ctx;
    uint64_t futhark_mc_segmap_parloop_109871_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109871_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109870->free_q_92401;
    int64_t last_res_95669 =
            futhark_mc_segmap_parloop_struct_109870->free_last_res_95669;
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_segmap_parloop_struct_109870->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103977 = start;
    
    for (; iter_103977 < end; iter_103977++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103978 = q_92401;
        int64_t gtid_103558 = iter_103977;
        int64_t remnant_103979 = iter_103977 - gtid_103558;
        bool cond_103559 = sle64(last_res_95669, gtid_103558);
        double defunc_0_f_res_103560;
        
        if (cond_103559) {
            defunc_0_f_res_103560 = 0.0;
        } else {
            defunc_0_f_res_103560 = 1.0;
        }
        ((double *) mem_100451.mem)[gtid_103558] = defunc_0_f_res_103560;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109871_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109871_end -
                 futhark_mc_segmap_parloop_109871_start;
        
        ctx->futhark_mc_segmap_parloop_109871_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109871_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109871_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109869(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103557 = tid;
    int num_tasks_103976 = info.nsubtasks;
    struct futhark_mc_task_109868 *futhark_mc_task_109868 =
                                  (struct futhark_mc_task_109868 *) args;
    struct futhark_context *ctx = futhark_mc_task_109868->ctx;
    uint64_t futhark_mc_segmap_task_109869_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109869_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_109868->free_q_92401;
    int64_t last_res_95669 = futhark_mc_task_109868->free_last_res_95669;
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_task_109868->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t iter_103977;
    struct futhark_mc_segmap_parloop_struct_109870
    futhark_mc_segmap_parloop_struct_109870;
    
    futhark_mc_segmap_parloop_struct_109870.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109870.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109870.free_last_res_95669 =
        last_res_95669;
    futhark_mc_segmap_parloop_struct_109870.free_mem_100451 = mem_100451.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109871_task;
    
    futhark_mc_segmap_parloop_109871_task.name =
        "futhark_mc_segmap_parloop_109871";
    futhark_mc_segmap_parloop_109871_task.fn = futhark_mc_segmap_parloop_109871;
    futhark_mc_segmap_parloop_109871_task.args =
        &futhark_mc_segmap_parloop_struct_109870;
    futhark_mc_segmap_parloop_109871_task.iterations = iterations;
    futhark_mc_segmap_parloop_109871_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109871_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109871_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109871_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109871_task);
    
    if (futhark_mc_segmap_parloop_109871_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109871_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109871_total_end -
                 futhark_mc_segmap_parloop_109871_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109871_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109871_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109871_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109869_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109869_end -
                 futhark_mc_segmap_task_109869_start;
        
        ctx->futhark_mc_segmap_task_109869_runs[tid]++;
        ctx->futhark_mc_segmap_task_109869_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109869_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109872 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95669;
    int64_t free_min_arg_95688;
    int64_t free_min_arg_95689;
    int64_t free_min_res_95690;
    double free_max_res_95694;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100448;
    unsigned char *free_mem_100451;
    unsigned char *free_mem_100454;
    unsigned char *free_mem_100457;
};
struct futhark_mc_segmap_parloop_struct_109874 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95669;
    int64_t free_min_arg_95688;
    int64_t free_min_arg_95689;
    int64_t free_min_res_95690;
    double free_max_res_95694;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100448;
    unsigned char *free_mem_100451;
    unsigned char *free_mem_100454;
    unsigned char *free_mem_100457;
};
static int futhark_mc_segmap_parloop_109875(void *args, int64_t start,
                                            int64_t end, int flat_tid_103759,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109874
    *futhark_mc_segmap_parloop_struct_109874 =
    (struct futhark_mc_segmap_parloop_struct_109874 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109874->ctx;
    uint64_t futhark_mc_segmap_parloop_109875_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109875_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109874->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109874->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109874->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109874->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109874->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109874->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109874->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109874->free_loop_cond_92426;
    int64_t last_res_95669 =
            futhark_mc_segmap_parloop_struct_109874->free_last_res_95669;
    int64_t min_arg_95688 =
            futhark_mc_segmap_parloop_struct_109874->free_min_arg_95688;
    int64_t min_arg_95689 =
            futhark_mc_segmap_parloop_struct_109874->free_min_arg_95689;
    int64_t min_res_95690 =
            futhark_mc_segmap_parloop_struct_109874->free_min_res_95690;
    double max_res_95694 =
           futhark_mc_segmap_parloop_struct_109874->free_max_res_95694;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100448,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100451,
                                  .size =0, .references =NULL};
    struct memblock mem_100454 = {.desc ="mem_100454", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100454,
                                  .size =0, .references =NULL};
    struct memblock mem_100457 = {.desc ="mem_100457", .mem =
                                  futhark_mc_segmap_parloop_struct_109874->free_mem_100457,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_103981 = start;
    
    for (; iter_103981 < end; iter_103981++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104106 = n_m_92409;
        int64_t gtid_103760 = iter_103981;
        int64_t remnant_104107 = iter_103981 - gtid_103760;
        int64_t min_arg_103761 = mul64(jump_92403, gtid_103760);
        int64_t min_res_103762 = smin64(i_92415, min_arg_103761);
        int64_t defunc_0_g_res_103763 = add64((int64_t) 1, min_res_103762);
        bool init_idx_103764;
        int64_t init_idx_103765;
        int64_t init_idx_103766;
        bool loop_while_103982;
        int64_t low_103983;
        int64_t high_103984;
        
        loop_while_103982 = x_92416;
        low_103983 = (int64_t) 0;
        high_103984 = i_92415;
        while (loop_while_103982) {
            int64_t x_103985 = add64(low_103983, high_103984);
            int64_t mid_103986 = sdiv64(x_103985, (int64_t) 2);
            bool x_103987 = sle64((int64_t) 0, mid_103986);
            bool y_103988 = slt64(mid_103986, n_92399);
            bool bounds_check_103989 = x_103987 && y_103988;
            bool index_certs_103990;
            
            if (!bounds_check_103989) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_103986,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_103991;
            
            mid_id_103991 = ((int64_t *) mem_100448.mem)[mid_103986];
            
            bool cond_103992 = slt64(mid_id_103991, (int64_t) 0);
            int64_t mid_idx_103993;
            
            if (cond_103992) {
                mid_idx_103993 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_103993 = mid_id_103991;
            }
            
            bool cond_103994 = sle64(defunc_0_g_res_103763, mid_idx_103993);
            int64_t loopres_103995;
            int64_t loopres_103996;
            
            if (cond_103994) {
                int64_t loopres_t_res_103997 = sub64(mid_103986, (int64_t) 1);
                
                loopres_103995 = low_103983;
                loopres_103996 = loopres_t_res_103997;
            } else {
                int64_t loopres_f_res_103998 = add64((int64_t) 1, mid_103986);
                
                loopres_103995 = loopres_f_res_103998;
                loopres_103996 = high_103984;
            }
            
            bool loop_cond_103999 = sle64(loopres_103995, loopres_103996);
            bool loop_while_tmp_104108 = loop_cond_103999;
            int64_t low_tmp_104109 = loopres_103995;
            int64_t high_tmp_104110 = loopres_103996;
            
            loop_while_103982 = loop_while_tmp_104108;
            low_103983 = low_tmp_104109;
            high_103984 = high_tmp_104110;
        }
        init_idx_103764 = loop_while_103982;
        init_idx_103765 = low_103983;
        init_idx_103766 = high_103984;
        
        bool idx_103785;
        int64_t idx_103786;
        int64_t idx_103787;
        int64_t idx_103788;
        bool loop_while_104000;
        int64_t l_idx_104001;
        int64_t r_idx_104002;
        int64_t span_104003;
        
        loop_while_104000 = loop_cond_92426;
        l_idx_104001 = init_idx_103765;
        r_idx_104002 = init_idx_103765;
        span_104003 = (int64_t) 1;
        while (loop_while_104000) {
            int64_t max_arg_104004 = sub64(l_idx_104001, (int64_t) 1);
            int64_t max_res_104005 = smax64((int64_t) 0, max_arg_104004);
            int64_t min_arg_104006 = add64((int64_t) 1, r_idx_104002);
            int64_t min_res_104007 = smin64(min_arg_95688, min_arg_104006);
            bool x_104008 = sle64((int64_t) 0, max_res_104005);
            bool y_104009 = slt64(max_res_104005, n_92399);
            bool bounds_check_104010 = x_104008 && y_104009;
            bool index_certs_104011;
            
            if (!bounds_check_104010) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_104005,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104012;
            
            x_104012 = ((int64_t *) mem_100448.mem)[max_res_104005];
            
            int64_t abs_arg_104013 = sub64(x_104012, defunc_0_g_res_103763);
            int64_t abs_res_104014 = abs64(abs_arg_104013);
            bool x_104015 = sle64((int64_t) 0, min_res_104007);
            bool y_104016 = slt64(min_res_104007, n_92399);
            bool bounds_check_104017 = x_104015 && y_104016;
            bool index_certs_104018;
            
            if (!bounds_check_104017) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_104007,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104019;
            
            x_104019 = ((int64_t *) mem_100448.mem)[min_res_104007];
            
            int64_t abs_arg_104020 = sub64(x_104019, defunc_0_g_res_103763);
            int64_t abs_res_104021 = abs64(abs_arg_104020);
            bool cond_104022 = max_res_104005 == l_idx_104001;
            int64_t loopres_104023;
            int64_t loopres_104024;
            int64_t loopres_104025;
            
            if (cond_104022) {
                loopres_104023 = l_idx_104001;
                loopres_104024 = r_idx_104002;
                loopres_104025 = min_res_92421;
            } else {
                bool cond_104026 = slt64(abs_res_104014, abs_res_104021);
                bool cond_f_res_104027 = min_res_104007 == r_idx_104002;
                bool x_104028 = !cond_104026;
                bool y_104029 = cond_f_res_104027 && x_104028;
                bool cond_104030 = cond_104026 || y_104029;
                int64_t loopres_f_res_104031;
                
                if (cond_104030) {
                    loopres_f_res_104031 = max_res_104005;
                } else {
                    loopres_f_res_104031 = l_idx_104001;
                }
                
                int64_t loopres_f_res_104032;
                
                if (cond_104030) {
                    loopres_f_res_104032 = r_idx_104002;
                } else {
                    loopres_f_res_104032 = min_res_104007;
                }
                
                int64_t loopres_f_res_104033;
                
                if (cond_104030) {
                    int64_t loopres_f_res_t_res_104034 = add64((int64_t) 1,
                                                               span_104003);
                    
                    loopres_f_res_104033 = loopres_f_res_t_res_104034;
                } else {
                    int64_t loopres_f_res_f_res_104035 = add64((int64_t) 1,
                                                               span_104003);
                    
                    loopres_f_res_104033 = loopres_f_res_f_res_104035;
                }
                loopres_104023 = loopres_f_res_104031;
                loopres_104024 = loopres_f_res_104032;
                loopres_104025 = loopres_f_res_104033;
            }
            
            bool loop_cond_104036 = slt64(loopres_104025, min_res_92421);
            bool loop_while_tmp_104111 = loop_cond_104036;
            int64_t l_idx_tmp_104112 = loopres_104023;
            int64_t r_idx_tmp_104113 = loopres_104024;
            int64_t span_tmp_104114 = loopres_104025;
            
            loop_while_104000 = loop_while_tmp_104111;
            l_idx_104001 = l_idx_tmp_104112;
            r_idx_104002 = r_idx_tmp_104113;
            span_104003 = span_tmp_104114;
        }
        idx_103785 = loop_while_104000;
        idx_103786 = l_idx_104001;
        idx_103787 = r_idx_104002;
        idx_103788 = span_104003;
        
        int64_t min_res_103826 = smin64(min_arg_95689, idx_103786);
        int64_t max_res_103827 = smax64((int64_t) 0, min_res_103826);
        int64_t x_103828 = add64(min_res_95690, max_res_103827);
        int64_t r_103829 = sub64(x_103828, (int64_t) 1);
        bool x_103830 = sle64((int64_t) 0, r_103829);
        bool y_103831 = slt64(r_103829, n_92399);
        bool bounds_check_103832 = x_103830 && y_103831;
        bool index_certs_103833;
        
        if (!bounds_check_103832) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_103829,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_103834;
        
        x_103834 = ((int64_t *) mem_100445.mem)[r_103829];
        
        int64_t abs_arg_103835 = sub64(x_103834, min_res_103762);
        int64_t abs_res_103836 = abs64(abs_arg_103835);
        bool x_103837 = sle64((int64_t) 0, max_res_103827);
        bool y_103838 = slt64(max_res_103827, n_92399);
        bool bounds_check_103839 = x_103837 && y_103838;
        bool index_certs_103840;
        
        if (!bounds_check_103839) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_103827,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_103841;
        
        x_103841 = ((int64_t *) mem_100445.mem)[max_res_103827];
        
        int64_t abs_arg_103842 = sub64(x_103841, min_res_103762);
        int64_t abs_res_103843 = abs64(abs_arg_103842);
        int64_t max_res_103844 = smax64(abs_res_103836, abs_res_103843);
        double defunc_0_f_res_103845 = sitofp_i64_f64(max_res_103844);
        double defunc_1_f_res_103846 = max_res_95694 + defunc_0_f_res_103845;
        double defunc_2_reduce_res_103847;
        double defunc_2_reduce_res_103848;
        double defunc_2_reduce_res_103849;
        double defunc_2_reduce_res_103850;
        double defunc_2_reduce_res_103851;
        double redout_104038;
        double redout_104039;
        double redout_104040;
        double redout_104041;
        double redout_104042;
        
        redout_104038 = 0.0;
        redout_104039 = 0.0;
        redout_104040 = 0.0;
        redout_104041 = 0.0;
        redout_104042 = 0.0;
        for (int64_t i_104037 = 0; i_104037 < q_92401; i_104037++) {
            double x_104043;
            
            x_104043 = ((double *) mem_100451.mem)[i_104037];
            
            bool cond_104044 = sle64(last_res_95669, i_104037);
            int64_t defunc_0_f_res_104045;
            
            if (cond_104044) {
                defunc_0_f_res_104045 = (int64_t) 0;
            } else {
                int64_t i_104046 = add64(max_res_103827, i_104037);
                int64_t defunc_0_add_arg_104047;
                
                defunc_0_add_arg_104047 =
                    ((int64_t *) mem_100445.mem)[i_104046];
                
                int64_t defunc_1_add_res_104048 = add64((int64_t) 1,
                                                        defunc_0_add_arg_104047);
                
                defunc_0_f_res_104045 = defunc_1_add_res_104048;
            }
            
            int64_t binop_p_104049 = sub64(defunc_0_f_res_104045,
                                           min_res_103762);
            double defunc_0_f_res_104050 = sitofp_i64_f64(binop_p_104049);
            double abs_res_104051 = fabs(defunc_0_f_res_104050);
            double tmp1_104052 = abs_res_104051 / defunc_1_f_res_103846;
            double x_104053 = tmp1_104052 * tmp1_104052;
            double y_104054 = tmp1_104052 * x_104053;
            double tmp2_104055 = 1.0 - y_104054;
            double x_104056 = tmp2_104055 * tmp2_104055;
            double tmp3_104057 = tmp2_104055 * x_104056;
            double w_j_104058 = x_104043 * tmp3_104057;
            double xw_j_104059 = defunc_0_f_res_104050 * w_j_104058;
            double x2w_j_104060 = defunc_0_f_res_104050 * xw_j_104059;
            double x3w_j_104061 = defunc_0_f_res_104050 * x2w_j_104060;
            double x4w_j_104062 = defunc_0_f_res_104050 * x3w_j_104061;
            double defunc_1_op_res_104063 = w_j_104058 + redout_104038;
            double defunc_1_op_res_104064 = xw_j_104059 + redout_104039;
            double defunc_1_op_res_104065 = x2w_j_104060 + redout_104040;
            double defunc_1_op_res_104066 = x3w_j_104061 + redout_104041;
            double defunc_1_op_res_104067 = x4w_j_104062 + redout_104042;
            double redout_tmp_104115 = defunc_1_op_res_104063;
            double redout_tmp_104116 = defunc_1_op_res_104064;
            double redout_tmp_104117 = defunc_1_op_res_104065;
            double redout_tmp_104118 = defunc_1_op_res_104066;
            double redout_tmp_104119 = defunc_1_op_res_104067;
            
            redout_104038 = redout_tmp_104115;
            redout_104039 = redout_tmp_104116;
            redout_104040 = redout_tmp_104117;
            redout_104041 = redout_tmp_104118;
            redout_104042 = redout_tmp_104119;
        }
        defunc_2_reduce_res_103847 = redout_104038;
        defunc_2_reduce_res_103848 = redout_104039;
        defunc_2_reduce_res_103849 = redout_104040;
        defunc_2_reduce_res_103850 = redout_104041;
        defunc_2_reduce_res_103851 = redout_104042;
        
        double x_103883 = defunc_2_reduce_res_103849 *
               defunc_2_reduce_res_103851;
        double y_103884 = defunc_2_reduce_res_103850 *
               defunc_2_reduce_res_103850;
        double a12_103885 = x_103883 - y_103884;
        double x_103886 = defunc_2_reduce_res_103849 *
               defunc_2_reduce_res_103850;
        double y_103887 = defunc_2_reduce_res_103848 *
               defunc_2_reduce_res_103851;
        double b12_103888 = x_103886 - y_103887;
        double x_103889 = defunc_2_reduce_res_103848 *
               defunc_2_reduce_res_103850;
        double y_103890 = defunc_2_reduce_res_103849 *
               defunc_2_reduce_res_103849;
        double c12_103891 = x_103889 - y_103890;
        double x_103892 = defunc_2_reduce_res_103847 *
               defunc_2_reduce_res_103851;
        double b2_103893 = x_103892 - y_103890;
        double x_103894 = defunc_2_reduce_res_103848 *
               defunc_2_reduce_res_103849;
        double y_103895 = defunc_2_reduce_res_103847 *
               defunc_2_reduce_res_103850;
        double c2_103896 = x_103894 - y_103895;
        double x_103897 = defunc_2_reduce_res_103847 * a12_103885;
        double y_103898 = defunc_2_reduce_res_103848 * b12_103888;
        double x_103899 = x_103897 + y_103898;
        double y_103900 = defunc_2_reduce_res_103849 * c12_103891;
        double y_103901 = x_103899 + y_103900;
        double det_103902 = 1.0 / y_103901;
        double a12_103903 = a12_103885 * det_103902;
        double b12_103904 = b12_103888 * det_103902;
        double c12_103905 = c12_103891 * det_103902;
        double b2_103906 = b2_103893 * det_103902;
        double c2_103907 = c2_103896 * det_103902;
        double defunc_2_reduce_res_103908;
        double defunc_2_reduce_res_103909;
        double redout_104069;
        double redout_104070;
        
        redout_104069 = 0.0;
        redout_104070 = 0.0;
        for (int64_t i_104068 = 0; i_104068 < q_92401; i_104068++) {
            double x_104071;
            
            x_104071 = ((double *) mem_100451.mem)[i_104068];
            
            bool cond_104072 = sle64(last_res_95669, i_104068);
            int64_t defunc_0_f_res_104073;
            
            if (cond_104072) {
                defunc_0_f_res_104073 = (int64_t) 0;
            } else {
                int64_t i_104074 = add64(max_res_103827, i_104068);
                int64_t defunc_0_add_arg_104075;
                
                defunc_0_add_arg_104075 =
                    ((int64_t *) mem_100445.mem)[i_104074];
                
                int64_t defunc_1_add_res_104076 = add64((int64_t) 1,
                                                        defunc_0_add_arg_104075);
                
                defunc_0_f_res_104073 = defunc_1_add_res_104076;
            }
            
            int64_t binop_p_104077 = sub64(defunc_0_f_res_104073,
                                           min_res_103762);
            double defunc_0_f_res_104078 = sitofp_i64_f64(binop_p_104077);
            double abs_res_104079 = fabs(defunc_0_f_res_104078);
            double tmp1_104080 = abs_res_104079 / defunc_1_f_res_103846;
            double x_104081 = tmp1_104080 * tmp1_104080;
            double y_104082 = tmp1_104080 * x_104081;
            double tmp2_104083 = 1.0 - y_104082;
            double x_104084 = tmp2_104083 * tmp2_104083;
            double tmp3_104085 = tmp2_104083 * x_104084;
            double tmp4_104086 = x_104071 * tmp3_104085;
            double defunc_1_f_res_104087 = defunc_0_f_res_104078 * tmp4_104086;
            double defunc_1_f_res_104088 = defunc_0_f_res_104078 *
                   defunc_1_f_res_104087;
            double defunc_0_f_res_104089;
            
            if (cond_104072) {
                defunc_0_f_res_104089 = 0.0;
            } else {
                int64_t i_104090 = add64(max_res_103827, i_104068);
                double defunc_0_add_arg_104091;
                
                defunc_0_add_arg_104091 = ((double *) mem_100442.mem)[i_104090];
                defunc_0_f_res_104089 = defunc_0_add_arg_104091;
            }
            
            double x_104092 = a12_103903 * tmp4_104086;
            double y_104093 = b12_103904 * defunc_1_f_res_104087;
            double x_104094 = x_104092 + y_104093;
            double y_104095 = c12_103905 * defunc_1_f_res_104088;
            double x_104096 = x_104094 + y_104095;
            double defunc_9_fit_fun_res_104097 = defunc_0_f_res_104089 *
                   x_104096;
            double x_104098 = b12_103904 * tmp4_104086;
            double y_104099 = b2_103906 * defunc_1_f_res_104087;
            double x_104100 = x_104098 + y_104099;
            double y_104101 = c2_103907 * defunc_1_f_res_104088;
            double x_104102 = x_104100 + y_104101;
            double defunc_9_slope_fun_res_104103 = defunc_0_f_res_104089 *
                   x_104102;
            double defunc_1_op_res_104104 = defunc_9_fit_fun_res_104097 +
                   redout_104069;
            double defunc_1_op_res_104105 = defunc_9_slope_fun_res_104103 +
                   redout_104070;
            double redout_tmp_104120 = defunc_1_op_res_104104;
            double redout_tmp_104121 = defunc_1_op_res_104105;
            
            redout_104069 = redout_tmp_104120;
            redout_104070 = redout_tmp_104121;
        }
        defunc_2_reduce_res_103908 = redout_104069;
        defunc_2_reduce_res_103909 = redout_104070;
        ((double *) mem_100454.mem)[gtid_103760] = defunc_2_reduce_res_103908;
        ((double *) mem_100457.mem)[gtid_103760] = defunc_2_reduce_res_103909;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109875_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109875_end -
                 futhark_mc_segmap_parloop_109875_start;
        
        ctx->futhark_mc_segmap_parloop_109875_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109875_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109875_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109873(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103759 = tid;
    int num_tasks_103980 = info.nsubtasks;
    struct futhark_mc_task_109872 *futhark_mc_task_109872 =
                                  (struct futhark_mc_task_109872 *) args;
    struct futhark_context *ctx = futhark_mc_task_109872->ctx;
    uint64_t futhark_mc_segmap_task_109873_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109873_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109872->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109872->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109872->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109872->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109872->free_i_92415;
    bool x_92416 = futhark_mc_task_109872->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109872->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109872->free_loop_cond_92426;
    int64_t last_res_95669 = futhark_mc_task_109872->free_last_res_95669;
    int64_t min_arg_95688 = futhark_mc_task_109872->free_min_arg_95688;
    int64_t min_arg_95689 = futhark_mc_task_109872->free_min_arg_95689;
    int64_t min_res_95690 = futhark_mc_task_109872->free_min_res_95690;
    double max_res_95694 = futhark_mc_task_109872->free_max_res_95694;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_task_109872->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109872->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_task_109872->free_mem_100448,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_task_109872->free_mem_100451,
                                  .size =0, .references =NULL};
    struct memblock mem_100454 = {.desc ="mem_100454", .mem =
                                  futhark_mc_task_109872->free_mem_100454,
                                  .size =0, .references =NULL};
    struct memblock mem_100457 = {.desc ="mem_100457", .mem =
                                  futhark_mc_task_109872->free_mem_100457,
                                  .size =0, .references =NULL};
    int64_t iter_103981;
    struct futhark_mc_segmap_parloop_struct_109874
    futhark_mc_segmap_parloop_struct_109874;
    
    futhark_mc_segmap_parloop_struct_109874.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109874.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109874.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109874.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109874.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109874.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109874.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109874.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109874.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109874.free_last_res_95669 =
        last_res_95669;
    futhark_mc_segmap_parloop_struct_109874.free_min_arg_95688 = min_arg_95688;
    futhark_mc_segmap_parloop_struct_109874.free_min_arg_95689 = min_arg_95689;
    futhark_mc_segmap_parloop_struct_109874.free_min_res_95690 = min_res_95690;
    futhark_mc_segmap_parloop_struct_109874.free_max_res_95694 = max_res_95694;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100442 = mem_100442.mem;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100445 = mem_100445.mem;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100448 = mem_100448.mem;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100451 = mem_100451.mem;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100454 = mem_100454.mem;
    futhark_mc_segmap_parloop_struct_109874.free_mem_100457 = mem_100457.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109875_task;
    
    futhark_mc_segmap_parloop_109875_task.name =
        "futhark_mc_segmap_parloop_109875";
    futhark_mc_segmap_parloop_109875_task.fn = futhark_mc_segmap_parloop_109875;
    futhark_mc_segmap_parloop_109875_task.args =
        &futhark_mc_segmap_parloop_struct_109874;
    futhark_mc_segmap_parloop_109875_task.iterations = iterations;
    futhark_mc_segmap_parloop_109875_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109875_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109875_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109875_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109875_task);
    
    if (futhark_mc_segmap_parloop_109875_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109875_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109875_total_end -
                 futhark_mc_segmap_parloop_109875_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109875_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109875_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109875_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109873_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109873_end -
                 futhark_mc_segmap_task_109873_start;
        
        ctx->futhark_mc_segmap_task_109873_runs[tid]++;
        ctx->futhark_mc_segmap_task_109873_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109873_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109877 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_95669;
    int64_t free_min_arg_95688;
    int64_t free_min_arg_95689;
    int64_t free_min_res_95690;
    double free_max_res_95694;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100448;
    unsigned char *free_mem_100451;
    unsigned char *free_mem_100454;
    unsigned char *free_mem_100457;
};
struct futhark_mc_task_109879 {
    struct futhark_context *ctx;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100451;
    int64_t free_min_res_103564;
    int64_t free_max_res_103629;
    double free_defunc_1_f_res_103648;
    double *retval_defunc_2_reduce_res_103649;
    double *retval_defunc_2_reduce_res_103650;
    double *retval_defunc_2_reduce_res_103651;
    double *retval_defunc_2_reduce_res_103652;
    double *retval_defunc_2_reduce_res_103653;
};
struct futhark_mc_segred_stage_1_parloop_struct_109886 {
    struct futhark_context *ctx;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100451;
    int64_t free_min_res_103564;
    int64_t free_max_res_103629;
    double free_defunc_1_f_res_103648;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104266;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104268;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104270;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104272;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104274;
};
static int futhark_mc_segred_stage_1_parloop_109887(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_104178,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109886
    *futhark_mc_segred_stage_1_parloop_struct_109886 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109886 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109886->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109887_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109887_start = get_wall_time();
    
    int64_t last_res_95669 =
            futhark_mc_segred_stage_1_parloop_struct_109886->free_last_res_95669;
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109886->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109886->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t min_res_103564 =
            futhark_mc_segred_stage_1_parloop_struct_109886->free_min_res_103564;
    int64_t max_res_103629 =
            futhark_mc_segred_stage_1_parloop_struct_109886->free_max_res_103629;
    double defunc_1_f_res_103648 =
           futhark_mc_segred_stage_1_parloop_struct_109886->free_defunc_1_f_res_103648;
    struct memblock reduce_stage_1_tid_res_arr_mem_104266 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104266",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109886->free_reduce_stage_1_tid_res_arr_mem_104266,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_104268 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104268",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109886->free_reduce_stage_1_tid_res_arr_mem_104268,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_104270 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104270",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109886->free_reduce_stage_1_tid_res_arr_mem_104270,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_104272 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104272",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109886->free_reduce_stage_1_tid_res_arr_mem_104272,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_104274 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104274",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109886->free_reduce_stage_1_tid_res_arr_mem_104274,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104276 = start;
    double x_104180;
    double x_104181;
    double x_104183;
    double x_104184;
    double x_104186;
    double x_104187;
    double x_104189;
    double x_104190;
    double x_104192;
    double x_104193;
    double local_acc_104277 = 0.0;
    double local_acc_104278 = 0.0;
    double local_acc_104279 = 0.0;
    double local_acc_104280 = 0.0;
    double local_acc_104281 = 0.0;
    
    for (; iter_104276 < end; iter_104276++) {
        int64_t gtid_104179 = iter_104276;
        double x_104195;
        
        x_104195 = ((double *) mem_100451.mem)[gtid_104179];
        
        bool cond_104196 = sle64(last_res_95669, gtid_104179);
        int64_t defunc_0_f_res_104197;
        
        if (cond_104196) {
            defunc_0_f_res_104197 = (int64_t) 0;
        } else {
            int64_t i_104198 = add64(max_res_103629, gtid_104179);
            int64_t defunc_0_add_arg_104199;
            
            defunc_0_add_arg_104199 = ((int64_t *) mem_100445.mem)[i_104198];
            
            int64_t defunc_1_add_res_104200 = add64((int64_t) 1,
                                                    defunc_0_add_arg_104199);
            
            defunc_0_f_res_104197 = defunc_1_add_res_104200;
        }
        
        int64_t binop_p_104201 = sub64(defunc_0_f_res_104197, min_res_103564);
        double defunc_0_f_res_104202 = sitofp_i64_f64(binop_p_104201);
        double abs_res_104203 = fabs(defunc_0_f_res_104202);
        double tmp1_104204 = abs_res_104203 / defunc_1_f_res_103648;
        double x_104205 = tmp1_104204 * tmp1_104204;
        double y_104206 = tmp1_104204 * x_104205;
        double tmp2_104207 = 1.0 - y_104206;
        double x_104208 = tmp2_104207 * tmp2_104207;
        double tmp3_104209 = tmp2_104207 * x_104208;
        double w_j_104210 = x_104195 * tmp3_104209;
        double xw_j_104211 = defunc_0_f_res_104202 * w_j_104210;
        double x2w_j_104212 = defunc_0_f_res_104202 * xw_j_104211;
        double x3w_j_104213 = defunc_0_f_res_104202 * x2w_j_104212;
        double x4w_j_104214 = defunc_0_f_res_104202 * x3w_j_104213;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_104180 = local_acc_104277;
        }
        // Load next params
        {
            x_104181 = w_j_104210;
        }
        // Red body
        {
            double defunc_1_op_res_104182 = x_104180 + x_104181;
            
            local_acc_104277 = defunc_1_op_res_104182;
        }
        // Load accum params
        {
            x_104183 = local_acc_104278;
        }
        // Load next params
        {
            x_104184 = xw_j_104211;
        }
        // Red body
        {
            double defunc_1_op_res_104185 = x_104183 + x_104184;
            
            local_acc_104278 = defunc_1_op_res_104185;
        }
        // Load accum params
        {
            x_104186 = local_acc_104279;
        }
        // Load next params
        {
            x_104187 = x2w_j_104212;
        }
        // Red body
        {
            double defunc_1_op_res_104188 = x_104186 + x_104187;
            
            local_acc_104279 = defunc_1_op_res_104188;
        }
        // Load accum params
        {
            x_104189 = local_acc_104280;
        }
        // Load next params
        {
            x_104190 = x3w_j_104213;
        }
        // Red body
        {
            double defunc_1_op_res_104191 = x_104189 + x_104190;
            
            local_acc_104280 = defunc_1_op_res_104191;
        }
        // Load accum params
        {
            x_104192 = local_acc_104281;
        }
        // Load next params
        {
            x_104193 = x4w_j_104214;
        }
        // Red body
        {
            double defunc_1_op_res_104194 = x_104192 + x_104193;
            
            local_acc_104281 = defunc_1_op_res_104194;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_104266.mem)[flat_tid_104178] =
        local_acc_104277;
    ((double *) reduce_stage_1_tid_res_arr_mem_104268.mem)[flat_tid_104178] =
        local_acc_104278;
    ((double *) reduce_stage_1_tid_res_arr_mem_104270.mem)[flat_tid_104178] =
        local_acc_104279;
    ((double *) reduce_stage_1_tid_res_arr_mem_104272.mem)[flat_tid_104178] =
        local_acc_104280;
    ((double *) reduce_stage_1_tid_res_arr_mem_104274.mem)[flat_tid_104178] =
        local_acc_104281;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109887_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109887_end -
                 futhark_mc_segred_stage_1_parloop_109887_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109887_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109887_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109887_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109880(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104178 = tid;
    int num_tasks_104265 = info.nsubtasks;
    struct futhark_mc_task_109879 *futhark_mc_task_109879 =
                                  (struct futhark_mc_task_109879 *) args;
    struct futhark_context *ctx = futhark_mc_task_109879->ctx;
    uint64_t futhark_mc_segred_task_109880_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109880_start = get_wall_time();
    
    int64_t last_res_95669 = futhark_mc_task_109879->free_last_res_95669;
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109879->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_task_109879->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t min_res_103564 = futhark_mc_task_109879->free_min_res_103564;
    int64_t max_res_103629 = futhark_mc_task_109879->free_max_res_103629;
    double defunc_1_f_res_103648 =
           futhark_mc_task_109879->free_defunc_1_f_res_103648;
    double defunc_2_reduce_res_103649 =
           *futhark_mc_task_109879->retval_defunc_2_reduce_res_103649;
    double defunc_2_reduce_res_103650 =
           *futhark_mc_task_109879->retval_defunc_2_reduce_res_103650;
    double defunc_2_reduce_res_103651 =
           *futhark_mc_task_109879->retval_defunc_2_reduce_res_103651;
    double defunc_2_reduce_res_103652 =
           *futhark_mc_task_109879->retval_defunc_2_reduce_res_103652;
    double defunc_2_reduce_res_103653 =
           *futhark_mc_task_109879->retval_defunc_2_reduce_res_103653;
    size_t reduce_stage_1_tid_res_arr_mem_104266_cached_sizze_109881 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104266 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_104268_cached_sizze_109882 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104268 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_104270_cached_sizze_109883 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104270 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_104272_cached_sizze_109884 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104272 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_104274_cached_sizze_109885 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104274 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_104266_cached_sizze_109881 <
        (size_t) ((int64_t) 8 * num_tasks_104265)) {
        reduce_stage_1_tid_res_arr_mem_104266 =
            realloc(reduce_stage_1_tid_res_arr_mem_104266, (int64_t) 8 *
                    num_tasks_104265);
        reduce_stage_1_tid_res_arr_mem_104266_cached_sizze_109881 =
            (int64_t) 8 * num_tasks_104265;
    }
    if (reduce_stage_1_tid_res_arr_mem_104268_cached_sizze_109882 <
        (size_t) ((int64_t) 8 * num_tasks_104265)) {
        reduce_stage_1_tid_res_arr_mem_104268 =
            realloc(reduce_stage_1_tid_res_arr_mem_104268, (int64_t) 8 *
                    num_tasks_104265);
        reduce_stage_1_tid_res_arr_mem_104268_cached_sizze_109882 =
            (int64_t) 8 * num_tasks_104265;
    }
    if (reduce_stage_1_tid_res_arr_mem_104270_cached_sizze_109883 <
        (size_t) ((int64_t) 8 * num_tasks_104265)) {
        reduce_stage_1_tid_res_arr_mem_104270 =
            realloc(reduce_stage_1_tid_res_arr_mem_104270, (int64_t) 8 *
                    num_tasks_104265);
        reduce_stage_1_tid_res_arr_mem_104270_cached_sizze_109883 =
            (int64_t) 8 * num_tasks_104265;
    }
    if (reduce_stage_1_tid_res_arr_mem_104272_cached_sizze_109884 <
        (size_t) ((int64_t) 8 * num_tasks_104265)) {
        reduce_stage_1_tid_res_arr_mem_104272 =
            realloc(reduce_stage_1_tid_res_arr_mem_104272, (int64_t) 8 *
                    num_tasks_104265);
        reduce_stage_1_tid_res_arr_mem_104272_cached_sizze_109884 =
            (int64_t) 8 * num_tasks_104265;
    }
    if (reduce_stage_1_tid_res_arr_mem_104274_cached_sizze_109885 <
        (size_t) ((int64_t) 8 * num_tasks_104265)) {
        reduce_stage_1_tid_res_arr_mem_104274 =
            realloc(reduce_stage_1_tid_res_arr_mem_104274, (int64_t) 8 *
                    num_tasks_104265);
        reduce_stage_1_tid_res_arr_mem_104274_cached_sizze_109885 =
            (int64_t) 8 * num_tasks_104265;
    }
    
    int64_t iter_104276;
    struct futhark_mc_segred_stage_1_parloop_struct_109886
    futhark_mc_segred_stage_1_parloop_struct_109886;
    
    futhark_mc_segred_stage_1_parloop_struct_109886.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_last_res_95669 =
        last_res_95669;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_mem_100445 =
        mem_100445.mem;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_mem_100451 =
        mem_100451.mem;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_min_res_103564 =
        min_res_103564;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_max_res_103629 =
        max_res_103629;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_defunc_1_f_res_103648 =
        defunc_1_f_res_103648;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_reduce_stage_1_tid_res_arr_mem_104266 =
        reduce_stage_1_tid_res_arr_mem_104266;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_reduce_stage_1_tid_res_arr_mem_104268 =
        reduce_stage_1_tid_res_arr_mem_104268;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_reduce_stage_1_tid_res_arr_mem_104270 =
        reduce_stage_1_tid_res_arr_mem_104270;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_reduce_stage_1_tid_res_arr_mem_104272 =
        reduce_stage_1_tid_res_arr_mem_104272;
    futhark_mc_segred_stage_1_parloop_struct_109886.free_reduce_stage_1_tid_res_arr_mem_104274 =
        reduce_stage_1_tid_res_arr_mem_104274;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109887_task;
    
    futhark_mc_segred_stage_1_parloop_109887_task.name =
        "futhark_mc_segred_stage_1_parloop_109887";
    futhark_mc_segred_stage_1_parloop_109887_task.fn =
        futhark_mc_segred_stage_1_parloop_109887;
    futhark_mc_segred_stage_1_parloop_109887_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109886;
    futhark_mc_segred_stage_1_parloop_109887_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109887_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109887_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109887_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109887_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109887_task);
    
    if (futhark_mc_segred_stage_1_parloop_109887_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109887_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109887_total_end -
                 futhark_mc_segred_stage_1_parloop_109887_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109887_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109887_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109887_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_103649 = 0.0;
        defunc_2_reduce_res_103650 = 0.0;
        defunc_2_reduce_res_103651 = 0.0;
        defunc_2_reduce_res_103652 = 0.0;
        defunc_2_reduce_res_103653 = 0.0;
    }
    
    double x_104282;
    double x_104283;
    double x_104285;
    double x_104286;
    double x_104288;
    double x_104289;
    double x_104291;
    double x_104292;
    double x_104294;
    double x_104295;
    
    for (int32_t i_104297 = 0; i_104297 < num_tasks_104265; i_104297++) {
        flat_tid_104178 = i_104297;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_104282 = defunc_2_reduce_res_103649;
            }
            // load next params
            {
                x_104283 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104266)[flat_tid_104178];
            }
            // red body
            {
                double defunc_1_op_res_104284 = x_104282 + x_104283;
                
                defunc_2_reduce_res_103649 = defunc_1_op_res_104284;
            }
            // load acc params
            {
                x_104285 = defunc_2_reduce_res_103650;
            }
            // load next params
            {
                x_104286 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104268)[flat_tid_104178];
            }
            // red body
            {
                double defunc_1_op_res_104287 = x_104285 + x_104286;
                
                defunc_2_reduce_res_103650 = defunc_1_op_res_104287;
            }
            // load acc params
            {
                x_104288 = defunc_2_reduce_res_103651;
            }
            // load next params
            {
                x_104289 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104270)[flat_tid_104178];
            }
            // red body
            {
                double defunc_1_op_res_104290 = x_104288 + x_104289;
                
                defunc_2_reduce_res_103651 = defunc_1_op_res_104290;
            }
            // load acc params
            {
                x_104291 = defunc_2_reduce_res_103652;
            }
            // load next params
            {
                x_104292 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104272)[flat_tid_104178];
            }
            // red body
            {
                double defunc_1_op_res_104293 = x_104291 + x_104292;
                
                defunc_2_reduce_res_103652 = defunc_1_op_res_104293;
            }
            // load acc params
            {
                x_104294 = defunc_2_reduce_res_103653;
            }
            // load next params
            {
                x_104295 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104274)[flat_tid_104178];
            }
            // red body
            {
                double defunc_1_op_res_104296 = x_104294 + x_104295;
                
                defunc_2_reduce_res_103653 = defunc_1_op_res_104296;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_104266);
        free(reduce_stage_1_tid_res_arr_mem_104268);
        free(reduce_stage_1_tid_res_arr_mem_104270);
        free(reduce_stage_1_tid_res_arr_mem_104272);
        free(reduce_stage_1_tid_res_arr_mem_104274);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109880_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109880_end -
                 futhark_mc_segred_task_109880_start;
        
        ctx->futhark_mc_segred_task_109880_runs[tid]++;
        ctx->futhark_mc_segred_task_109880_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109880_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109879->retval_defunc_2_reduce_res_103649 =
            defunc_2_reduce_res_103649;
        *futhark_mc_task_109879->retval_defunc_2_reduce_res_103650 =
            defunc_2_reduce_res_103650;
        *futhark_mc_task_109879->retval_defunc_2_reduce_res_103651 =
            defunc_2_reduce_res_103651;
        *futhark_mc_task_109879->retval_defunc_2_reduce_res_103652 =
            defunc_2_reduce_res_103652;
        *futhark_mc_task_109879->retval_defunc_2_reduce_res_103653 =
            defunc_2_reduce_res_103653;
    }
    return err;
}
struct futhark_mc_task_109888 {
    struct futhark_context *ctx;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100451;
    int64_t free_min_res_103564;
    int64_t free_max_res_103629;
    double free_defunc_1_f_res_103648;
    double free_a12_103711;
    double free_b12_103712;
    double free_c12_103713;
    double free_b2_103714;
    double free_c2_103715;
    double *retval_defunc_2_reduce_res_103716;
    double *retval_defunc_2_reduce_res_103717;
};
struct futhark_mc_segred_stage_1_parloop_struct_109892 {
    struct futhark_context *ctx;
    int64_t free_last_res_95669;
    unsigned char *free_mem_100442;
    unsigned char *free_mem_100445;
    unsigned char *free_mem_100451;
    int64_t free_min_res_103564;
    int64_t free_max_res_103629;
    double free_defunc_1_f_res_103648;
    double free_a12_103711;
    double free_b12_103712;
    double free_c12_103713;
    double free_b2_103714;
    double free_c2_103715;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104299;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_104301;
};
static int futhark_mc_segred_stage_1_parloop_109893(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_104215,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109892
    *futhark_mc_segred_stage_1_parloop_struct_109892 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109892 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109892->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109893_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109893_start = get_wall_time();
    
    int64_t last_res_95669 =
            futhark_mc_segred_stage_1_parloop_struct_109892->free_last_res_95669;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109892->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109892->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109892->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t min_res_103564 =
            futhark_mc_segred_stage_1_parloop_struct_109892->free_min_res_103564;
    int64_t max_res_103629 =
            futhark_mc_segred_stage_1_parloop_struct_109892->free_max_res_103629;
    double defunc_1_f_res_103648 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_defunc_1_f_res_103648;
    double a12_103711 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_a12_103711;
    double b12_103712 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_b12_103712;
    double c12_103713 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_c12_103713;
    double b2_103714 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_b2_103714;
    double c2_103715 =
           futhark_mc_segred_stage_1_parloop_struct_109892->free_c2_103715;
    struct memblock reduce_stage_1_tid_res_arr_mem_104299 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104299",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109892->free_reduce_stage_1_tid_res_arr_mem_104299,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_104301 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_104301",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109892->free_reduce_stage_1_tid_res_arr_mem_104301,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104303 = start;
    double x_104217;
    double x_104218;
    double x_104220;
    double x_104221;
    double local_acc_104304 = 0.0;
    double local_acc_104305 = 0.0;
    
    for (; iter_104303 < end; iter_104303++) {
        int64_t gtid_104216 = iter_104303;
        double x_104223;
        
        x_104223 = ((double *) mem_100451.mem)[gtid_104216];
        
        bool cond_104224 = sle64(last_res_95669, gtid_104216);
        int64_t defunc_0_f_res_104225;
        
        if (cond_104224) {
            defunc_0_f_res_104225 = (int64_t) 0;
        } else {
            int64_t i_104226 = add64(max_res_103629, gtid_104216);
            int64_t defunc_0_add_arg_104227;
            
            defunc_0_add_arg_104227 = ((int64_t *) mem_100445.mem)[i_104226];
            
            int64_t defunc_1_add_res_104228 = add64((int64_t) 1,
                                                    defunc_0_add_arg_104227);
            
            defunc_0_f_res_104225 = defunc_1_add_res_104228;
        }
        
        int64_t binop_p_104229 = sub64(defunc_0_f_res_104225, min_res_103564);
        double defunc_0_f_res_104230 = sitofp_i64_f64(binop_p_104229);
        double abs_res_104231 = fabs(defunc_0_f_res_104230);
        double tmp1_104232 = abs_res_104231 / defunc_1_f_res_103648;
        double x_104233 = tmp1_104232 * tmp1_104232;
        double y_104234 = tmp1_104232 * x_104233;
        double tmp2_104235 = 1.0 - y_104234;
        double x_104236 = tmp2_104235 * tmp2_104235;
        double tmp3_104237 = tmp2_104235 * x_104236;
        double tmp4_104238 = x_104223 * tmp3_104237;
        double defunc_1_f_res_104239 = defunc_0_f_res_104230 * tmp4_104238;
        double defunc_1_f_res_104240 = defunc_0_f_res_104230 *
               defunc_1_f_res_104239;
        double defunc_0_f_res_104241;
        
        if (cond_104224) {
            defunc_0_f_res_104241 = 0.0;
        } else {
            int64_t i_104242 = add64(max_res_103629, gtid_104216);
            double defunc_0_add_arg_104243;
            
            defunc_0_add_arg_104243 = ((double *) mem_100442.mem)[i_104242];
            defunc_0_f_res_104241 = defunc_0_add_arg_104243;
        }
        
        double x_104244 = a12_103711 * tmp4_104238;
        double y_104245 = b12_103712 * defunc_1_f_res_104239;
        double x_104246 = x_104244 + y_104245;
        double y_104247 = c12_103713 * defunc_1_f_res_104240;
        double x_104248 = x_104246 + y_104247;
        double defunc_9_fit_fun_res_104249 = defunc_0_f_res_104241 * x_104248;
        double x_104250 = b12_103712 * tmp4_104238;
        double y_104251 = b2_103714 * defunc_1_f_res_104239;
        double x_104252 = x_104250 + y_104251;
        double y_104253 = c2_103715 * defunc_1_f_res_104240;
        double x_104254 = x_104252 + y_104253;
        double defunc_9_slope_fun_res_104255 = defunc_0_f_res_104241 * x_104254;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_104217 = local_acc_104304;
        }
        // Load next params
        {
            x_104218 = defunc_9_fit_fun_res_104249;
        }
        // Red body
        {
            double defunc_1_op_res_104219 = x_104217 + x_104218;
            
            local_acc_104304 = defunc_1_op_res_104219;
        }
        // Load accum params
        {
            x_104220 = local_acc_104305;
        }
        // Load next params
        {
            x_104221 = defunc_9_slope_fun_res_104255;
        }
        // Red body
        {
            double defunc_1_op_res_104222 = x_104220 + x_104221;
            
            local_acc_104305 = defunc_1_op_res_104222;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_104299.mem)[flat_tid_104215] =
        local_acc_104304;
    ((double *) reduce_stage_1_tid_res_arr_mem_104301.mem)[flat_tid_104215] =
        local_acc_104305;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109893_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109893_end -
                 futhark_mc_segred_stage_1_parloop_109893_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109893_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109893_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109893_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109889(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104215 = tid;
    int num_tasks_104298 = info.nsubtasks;
    struct futhark_mc_task_109888 *futhark_mc_task_109888 =
                                  (struct futhark_mc_task_109888 *) args;
    struct futhark_context *ctx = futhark_mc_task_109888->ctx;
    uint64_t futhark_mc_segred_task_109889_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109889_start = get_wall_time();
    
    int64_t last_res_95669 = futhark_mc_task_109888->free_last_res_95669;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_task_109888->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109888->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_task_109888->free_mem_100451,
                                  .size =0, .references =NULL};
    int64_t min_res_103564 = futhark_mc_task_109888->free_min_res_103564;
    int64_t max_res_103629 = futhark_mc_task_109888->free_max_res_103629;
    double defunc_1_f_res_103648 =
           futhark_mc_task_109888->free_defunc_1_f_res_103648;
    double a12_103711 = futhark_mc_task_109888->free_a12_103711;
    double b12_103712 = futhark_mc_task_109888->free_b12_103712;
    double c12_103713 = futhark_mc_task_109888->free_c12_103713;
    double b2_103714 = futhark_mc_task_109888->free_b2_103714;
    double c2_103715 = futhark_mc_task_109888->free_c2_103715;
    double defunc_2_reduce_res_103716 =
           *futhark_mc_task_109888->retval_defunc_2_reduce_res_103716;
    double defunc_2_reduce_res_103717 =
           *futhark_mc_task_109888->retval_defunc_2_reduce_res_103717;
    size_t reduce_stage_1_tid_res_arr_mem_104299_cached_sizze_109890 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104299 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_104301_cached_sizze_109891 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_104301 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_104299_cached_sizze_109890 <
        (size_t) ((int64_t) 8 * num_tasks_104298)) {
        reduce_stage_1_tid_res_arr_mem_104299 =
            realloc(reduce_stage_1_tid_res_arr_mem_104299, (int64_t) 8 *
                    num_tasks_104298);
        reduce_stage_1_tid_res_arr_mem_104299_cached_sizze_109890 =
            (int64_t) 8 * num_tasks_104298;
    }
    if (reduce_stage_1_tid_res_arr_mem_104301_cached_sizze_109891 <
        (size_t) ((int64_t) 8 * num_tasks_104298)) {
        reduce_stage_1_tid_res_arr_mem_104301 =
            realloc(reduce_stage_1_tid_res_arr_mem_104301, (int64_t) 8 *
                    num_tasks_104298);
        reduce_stage_1_tid_res_arr_mem_104301_cached_sizze_109891 =
            (int64_t) 8 * num_tasks_104298;
    }
    
    int64_t iter_104303;
    struct futhark_mc_segred_stage_1_parloop_struct_109892
    futhark_mc_segred_stage_1_parloop_struct_109892;
    
    futhark_mc_segred_stage_1_parloop_struct_109892.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_last_res_95669 =
        last_res_95669;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_mem_100442 =
        mem_100442.mem;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_mem_100445 =
        mem_100445.mem;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_mem_100451 =
        mem_100451.mem;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_min_res_103564 =
        min_res_103564;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_max_res_103629 =
        max_res_103629;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_defunc_1_f_res_103648 =
        defunc_1_f_res_103648;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_a12_103711 =
        a12_103711;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_b12_103712 =
        b12_103712;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_c12_103713 =
        c12_103713;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_b2_103714 = b2_103714;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_c2_103715 = c2_103715;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_reduce_stage_1_tid_res_arr_mem_104299 =
        reduce_stage_1_tid_res_arr_mem_104299;
    futhark_mc_segred_stage_1_parloop_struct_109892.free_reduce_stage_1_tid_res_arr_mem_104301 =
        reduce_stage_1_tid_res_arr_mem_104301;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109893_task;
    
    futhark_mc_segred_stage_1_parloop_109893_task.name =
        "futhark_mc_segred_stage_1_parloop_109893";
    futhark_mc_segred_stage_1_parloop_109893_task.fn =
        futhark_mc_segred_stage_1_parloop_109893;
    futhark_mc_segred_stage_1_parloop_109893_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109892;
    futhark_mc_segred_stage_1_parloop_109893_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109893_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109893_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109893_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109893_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109893_task);
    
    if (futhark_mc_segred_stage_1_parloop_109893_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109893_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109893_total_end -
                 futhark_mc_segred_stage_1_parloop_109893_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109893_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109893_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109893_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_103716 = 0.0;
        defunc_2_reduce_res_103717 = 0.0;
    }
    
    double x_104306;
    double x_104307;
    double x_104309;
    double x_104310;
    
    for (int32_t i_104312 = 0; i_104312 < num_tasks_104298; i_104312++) {
        flat_tid_104215 = i_104312;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_104306 = defunc_2_reduce_res_103716;
            }
            // load next params
            {
                x_104307 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104299)[flat_tid_104215];
            }
            // red body
            {
                double defunc_1_op_res_104308 = x_104306 + x_104307;
                
                defunc_2_reduce_res_103716 = defunc_1_op_res_104308;
            }
            // load acc params
            {
                x_104309 = defunc_2_reduce_res_103717;
            }
            // load next params
            {
                x_104310 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_104301)[flat_tid_104215];
            }
            // red body
            {
                double defunc_1_op_res_104311 = x_104309 + x_104310;
                
                defunc_2_reduce_res_103717 = defunc_1_op_res_104311;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_104299);
        free(reduce_stage_1_tid_res_arr_mem_104301);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109889_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109889_end -
                 futhark_mc_segred_task_109889_start;
        
        ctx->futhark_mc_segred_task_109889_runs[tid]++;
        ctx->futhark_mc_segred_task_109889_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109889_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109888->retval_defunc_2_reduce_res_103716 =
            defunc_2_reduce_res_103716;
        *futhark_mc_task_109888->retval_defunc_2_reduce_res_103717 =
            defunc_2_reduce_res_103717;
    }
    return err;
}
static int futhark_mc_segmap_parloop_109878(void *args, int64_t start,
                                            int64_t end, int flat_tid_103561,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109877
    *futhark_mc_segmap_parloop_struct_109877 =
    (struct futhark_mc_segmap_parloop_struct_109877 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109877->ctx;
    uint64_t futhark_mc_segmap_parloop_109878_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109878_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109877->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109877->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109877->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109877->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109877->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109877->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109877->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109877->free_loop_cond_92426;
    int64_t last_res_95669 =
            futhark_mc_segmap_parloop_struct_109877->free_last_res_95669;
    int64_t min_arg_95688 =
            futhark_mc_segmap_parloop_struct_109877->free_min_arg_95688;
    int64_t min_arg_95689 =
            futhark_mc_segmap_parloop_struct_109877->free_min_arg_95689;
    int64_t min_res_95690 =
            futhark_mc_segmap_parloop_struct_109877->free_min_res_95690;
    double max_res_95694 =
           futhark_mc_segmap_parloop_struct_109877->free_max_res_95694;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100448,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100451,
                                  .size =0, .references =NULL};
    struct memblock mem_100454 = {.desc ="mem_100454", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100454,
                                  .size =0, .references =NULL};
    struct memblock mem_100457 = {.desc ="mem_100457", .mem =
                                  futhark_mc_segmap_parloop_struct_109877->free_mem_100457,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104122 = start;
    
    for (; iter_104122 < end; iter_104122++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104256 = n_m_92409;
        int64_t gtid_103562 = iter_104122;
        int64_t remnant_104257 = iter_104122 - gtid_103562;
        int64_t min_arg_103563 = mul64(jump_92403, gtid_103562);
        int64_t min_res_103564 = smin64(i_92415, min_arg_103563);
        int64_t defunc_0_g_res_103565 = add64((int64_t) 1, min_res_103564);
        bool init_idx_103566;
        int64_t init_idx_103567;
        int64_t init_idx_103568;
        bool loop_while_104123;
        int64_t low_104124;
        int64_t high_104125;
        
        loop_while_104123 = x_92416;
        low_104124 = (int64_t) 0;
        high_104125 = i_92415;
        while (loop_while_104123) {
            int64_t x_104126 = add64(low_104124, high_104125);
            int64_t mid_104127 = sdiv64(x_104126, (int64_t) 2);
            bool x_104128 = sle64((int64_t) 0, mid_104127);
            bool y_104129 = slt64(mid_104127, n_92399);
            bool bounds_check_104130 = x_104128 && y_104129;
            bool index_certs_104131;
            
            if (!bounds_check_104130) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_104127,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_104132;
            
            mid_id_104132 = ((int64_t *) mem_100448.mem)[mid_104127];
            
            bool cond_104133 = slt64(mid_id_104132, (int64_t) 0);
            int64_t mid_idx_104134;
            
            if (cond_104133) {
                mid_idx_104134 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_104134 = mid_id_104132;
            }
            
            bool cond_104135 = sle64(defunc_0_g_res_103565, mid_idx_104134);
            int64_t loopres_104136;
            int64_t loopres_104137;
            
            if (cond_104135) {
                int64_t loopres_t_res_104138 = sub64(mid_104127, (int64_t) 1);
                
                loopres_104136 = low_104124;
                loopres_104137 = loopres_t_res_104138;
            } else {
                int64_t loopres_f_res_104139 = add64((int64_t) 1, mid_104127);
                
                loopres_104136 = loopres_f_res_104139;
                loopres_104137 = high_104125;
            }
            
            bool loop_cond_104140 = sle64(loopres_104136, loopres_104137);
            bool loop_while_tmp_104258 = loop_cond_104140;
            int64_t low_tmp_104259 = loopres_104136;
            int64_t high_tmp_104260 = loopres_104137;
            
            loop_while_104123 = loop_while_tmp_104258;
            low_104124 = low_tmp_104259;
            high_104125 = high_tmp_104260;
        }
        init_idx_103566 = loop_while_104123;
        init_idx_103567 = low_104124;
        init_idx_103568 = high_104125;
        
        bool idx_103587;
        int64_t idx_103588;
        int64_t idx_103589;
        int64_t idx_103590;
        bool loop_while_104141;
        int64_t l_idx_104142;
        int64_t r_idx_104143;
        int64_t span_104144;
        
        loop_while_104141 = loop_cond_92426;
        l_idx_104142 = init_idx_103567;
        r_idx_104143 = init_idx_103567;
        span_104144 = (int64_t) 1;
        while (loop_while_104141) {
            int64_t max_arg_104145 = sub64(l_idx_104142, (int64_t) 1);
            int64_t max_res_104146 = smax64((int64_t) 0, max_arg_104145);
            int64_t min_arg_104147 = add64((int64_t) 1, r_idx_104143);
            int64_t min_res_104148 = smin64(min_arg_95688, min_arg_104147);
            bool x_104149 = sle64((int64_t) 0, max_res_104146);
            bool y_104150 = slt64(max_res_104146, n_92399);
            bool bounds_check_104151 = x_104149 && y_104150;
            bool index_certs_104152;
            
            if (!bounds_check_104151) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_104146,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104153;
            
            x_104153 = ((int64_t *) mem_100448.mem)[max_res_104146];
            
            int64_t abs_arg_104154 = sub64(x_104153, defunc_0_g_res_103565);
            int64_t abs_res_104155 = abs64(abs_arg_104154);
            bool x_104156 = sle64((int64_t) 0, min_res_104148);
            bool y_104157 = slt64(min_res_104148, n_92399);
            bool bounds_check_104158 = x_104156 && y_104157;
            bool index_certs_104159;
            
            if (!bounds_check_104158) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_104148,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104160;
            
            x_104160 = ((int64_t *) mem_100448.mem)[min_res_104148];
            
            int64_t abs_arg_104161 = sub64(x_104160, defunc_0_g_res_103565);
            int64_t abs_res_104162 = abs64(abs_arg_104161);
            bool cond_104163 = max_res_104146 == l_idx_104142;
            int64_t loopres_104164;
            int64_t loopres_104165;
            int64_t loopres_104166;
            
            if (cond_104163) {
                loopres_104164 = l_idx_104142;
                loopres_104165 = r_idx_104143;
                loopres_104166 = min_res_92421;
            } else {
                bool cond_104167 = slt64(abs_res_104155, abs_res_104162);
                bool cond_f_res_104168 = min_res_104148 == r_idx_104143;
                bool x_104169 = !cond_104167;
                bool y_104170 = cond_f_res_104168 && x_104169;
                bool cond_104171 = cond_104167 || y_104170;
                int64_t loopres_f_res_104172;
                
                if (cond_104171) {
                    loopres_f_res_104172 = max_res_104146;
                } else {
                    loopres_f_res_104172 = l_idx_104142;
                }
                
                int64_t loopres_f_res_104173;
                
                if (cond_104171) {
                    loopres_f_res_104173 = r_idx_104143;
                } else {
                    loopres_f_res_104173 = min_res_104148;
                }
                
                int64_t loopres_f_res_104174;
                
                if (cond_104171) {
                    int64_t loopres_f_res_t_res_104175 = add64((int64_t) 1,
                                                               span_104144);
                    
                    loopres_f_res_104174 = loopres_f_res_t_res_104175;
                } else {
                    int64_t loopres_f_res_f_res_104176 = add64((int64_t) 1,
                                                               span_104144);
                    
                    loopres_f_res_104174 = loopres_f_res_f_res_104176;
                }
                loopres_104164 = loopres_f_res_104172;
                loopres_104165 = loopres_f_res_104173;
                loopres_104166 = loopres_f_res_104174;
            }
            
            bool loop_cond_104177 = slt64(loopres_104166, min_res_92421);
            bool loop_while_tmp_104261 = loop_cond_104177;
            int64_t l_idx_tmp_104262 = loopres_104164;
            int64_t r_idx_tmp_104263 = loopres_104165;
            int64_t span_tmp_104264 = loopres_104166;
            
            loop_while_104141 = loop_while_tmp_104261;
            l_idx_104142 = l_idx_tmp_104262;
            r_idx_104143 = r_idx_tmp_104263;
            span_104144 = span_tmp_104264;
        }
        idx_103587 = loop_while_104141;
        idx_103588 = l_idx_104142;
        idx_103589 = r_idx_104143;
        idx_103590 = span_104144;
        
        int64_t min_res_103628 = smin64(min_arg_95689, idx_103588);
        int64_t max_res_103629 = smax64((int64_t) 0, min_res_103628);
        int64_t x_103630 = add64(min_res_95690, max_res_103629);
        int64_t r_103631 = sub64(x_103630, (int64_t) 1);
        bool x_103632 = sle64((int64_t) 0, r_103631);
        bool y_103633 = slt64(r_103631, n_92399);
        bool bounds_check_103634 = x_103632 && y_103633;
        bool index_certs_103635;
        
        if (!bounds_check_103634) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_103631,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_103636;
        
        x_103636 = ((int64_t *) mem_100445.mem)[r_103631];
        
        int64_t abs_arg_103637 = sub64(x_103636, min_res_103564);
        int64_t abs_res_103638 = abs64(abs_arg_103637);
        bool x_103639 = sle64((int64_t) 0, max_res_103629);
        bool y_103640 = slt64(max_res_103629, n_92399);
        bool bounds_check_103641 = x_103639 && y_103640;
        bool index_certs_103642;
        
        if (!bounds_check_103641) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_103629,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_103643;
        
        x_103643 = ((int64_t *) mem_100445.mem)[max_res_103629];
        
        int64_t abs_arg_103644 = sub64(x_103643, min_res_103564);
        int64_t abs_res_103645 = abs64(abs_arg_103644);
        int64_t max_res_103646 = smax64(abs_res_103638, abs_res_103645);
        double defunc_0_f_res_103647 = sitofp_i64_f64(max_res_103646);
        double defunc_1_f_res_103648 = max_res_95694 + defunc_0_f_res_103647;
        double defunc_2_reduce_res_103649;
        double defunc_2_reduce_res_103650;
        double defunc_2_reduce_res_103651;
        double defunc_2_reduce_res_103652;
        double defunc_2_reduce_res_103653;
        int64_t flat_tid_104178 = (int64_t) 0;
        int32_t num_tasks_104265;
        
        defunc_2_reduce_res_103649 = 0.0;
        defunc_2_reduce_res_103650 = 0.0;
        defunc_2_reduce_res_103651 = 0.0;
        defunc_2_reduce_res_103652 = 0.0;
        defunc_2_reduce_res_103653 = 0.0;
        
        struct futhark_mc_task_109879 futhark_mc_task_109879;
        
        futhark_mc_task_109879.ctx = ctx;
        futhark_mc_task_109879.free_last_res_95669 = last_res_95669;
        futhark_mc_task_109879.free_mem_100445 = mem_100445.mem;
        futhark_mc_task_109879.free_mem_100451 = mem_100451.mem;
        futhark_mc_task_109879.free_min_res_103564 = min_res_103564;
        futhark_mc_task_109879.free_max_res_103629 = max_res_103629;
        futhark_mc_task_109879.free_defunc_1_f_res_103648 =
            defunc_1_f_res_103648;
        futhark_mc_task_109879.retval_defunc_2_reduce_res_103649 =
            &defunc_2_reduce_res_103649;
        futhark_mc_task_109879.retval_defunc_2_reduce_res_103650 =
            &defunc_2_reduce_res_103650;
        futhark_mc_task_109879.retval_defunc_2_reduce_res_103651 =
            &defunc_2_reduce_res_103651;
        futhark_mc_task_109879.retval_defunc_2_reduce_res_103652 =
            &defunc_2_reduce_res_103652;
        futhark_mc_task_109879.retval_defunc_2_reduce_res_103653 =
            &defunc_2_reduce_res_103653;
        
        struct scheduler_segop futhark_mc_task_109879_task;
        
        futhark_mc_task_109879_task.args = &futhark_mc_task_109879;
        futhark_mc_task_109879_task.top_level_fn =
            futhark_mc_segred_task_109880;
        futhark_mc_task_109879_task.name = "futhark_mc_segred_task_109880";
        futhark_mc_task_109879_task.iterations = q_92401;
        futhark_mc_task_109879_task.task_time =
            &ctx->futhark_mc_segred_task_109880_total_time;
        futhark_mc_task_109879_task.task_iter =
            &ctx->futhark_mc_segred_task_109880_total_iter;
        futhark_mc_task_109879_task.sched = STATIC;
        futhark_mc_task_109879_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109880_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109879_task);
        
        if (futhark_mc_segred_task_109880_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_103691 = defunc_2_reduce_res_103651 *
               defunc_2_reduce_res_103653;
        double y_103692 = defunc_2_reduce_res_103652 *
               defunc_2_reduce_res_103652;
        double a12_103693 = x_103691 - y_103692;
        double x_103694 = defunc_2_reduce_res_103651 *
               defunc_2_reduce_res_103652;
        double y_103695 = defunc_2_reduce_res_103650 *
               defunc_2_reduce_res_103653;
        double b12_103696 = x_103694 - y_103695;
        double x_103697 = defunc_2_reduce_res_103650 *
               defunc_2_reduce_res_103652;
        double y_103698 = defunc_2_reduce_res_103651 *
               defunc_2_reduce_res_103651;
        double c12_103699 = x_103697 - y_103698;
        double x_103700 = defunc_2_reduce_res_103649 *
               defunc_2_reduce_res_103653;
        double b2_103701 = x_103700 - y_103698;
        double x_103702 = defunc_2_reduce_res_103650 *
               defunc_2_reduce_res_103651;
        double y_103703 = defunc_2_reduce_res_103649 *
               defunc_2_reduce_res_103652;
        double c2_103704 = x_103702 - y_103703;
        double x_103705 = defunc_2_reduce_res_103649 * a12_103693;
        double y_103706 = defunc_2_reduce_res_103650 * b12_103696;
        double x_103707 = x_103705 + y_103706;
        double y_103708 = defunc_2_reduce_res_103651 * c12_103699;
        double y_103709 = x_103707 + y_103708;
        double det_103710 = 1.0 / y_103709;
        double a12_103711 = a12_103693 * det_103710;
        double b12_103712 = b12_103696 * det_103710;
        double c12_103713 = c12_103699 * det_103710;
        double b2_103714 = b2_103701 * det_103710;
        double c2_103715 = c2_103704 * det_103710;
        double defunc_2_reduce_res_103716;
        double defunc_2_reduce_res_103717;
        int64_t flat_tid_104215 = (int64_t) 0;
        int32_t num_tasks_104298;
        
        defunc_2_reduce_res_103716 = 0.0;
        defunc_2_reduce_res_103717 = 0.0;
        
        struct futhark_mc_task_109888 futhark_mc_task_109888;
        
        futhark_mc_task_109888.ctx = ctx;
        futhark_mc_task_109888.free_last_res_95669 = last_res_95669;
        futhark_mc_task_109888.free_mem_100442 = mem_100442.mem;
        futhark_mc_task_109888.free_mem_100445 = mem_100445.mem;
        futhark_mc_task_109888.free_mem_100451 = mem_100451.mem;
        futhark_mc_task_109888.free_min_res_103564 = min_res_103564;
        futhark_mc_task_109888.free_max_res_103629 = max_res_103629;
        futhark_mc_task_109888.free_defunc_1_f_res_103648 =
            defunc_1_f_res_103648;
        futhark_mc_task_109888.free_a12_103711 = a12_103711;
        futhark_mc_task_109888.free_b12_103712 = b12_103712;
        futhark_mc_task_109888.free_c12_103713 = c12_103713;
        futhark_mc_task_109888.free_b2_103714 = b2_103714;
        futhark_mc_task_109888.free_c2_103715 = c2_103715;
        futhark_mc_task_109888.retval_defunc_2_reduce_res_103716 =
            &defunc_2_reduce_res_103716;
        futhark_mc_task_109888.retval_defunc_2_reduce_res_103717 =
            &defunc_2_reduce_res_103717;
        
        struct scheduler_segop futhark_mc_task_109888_task;
        
        futhark_mc_task_109888_task.args = &futhark_mc_task_109888;
        futhark_mc_task_109888_task.top_level_fn =
            futhark_mc_segred_task_109889;
        futhark_mc_task_109888_task.name = "futhark_mc_segred_task_109889";
        futhark_mc_task_109888_task.iterations = q_92401;
        futhark_mc_task_109888_task.task_time =
            &ctx->futhark_mc_segred_task_109889_total_time;
        futhark_mc_task_109888_task.task_iter =
            &ctx->futhark_mc_segred_task_109889_total_iter;
        futhark_mc_task_109888_task.sched = STATIC;
        futhark_mc_task_109888_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109889_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109888_task);
        
        if (futhark_mc_segred_task_109889_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_100454.mem)[gtid_103562] = defunc_2_reduce_res_103716;
        ((double *) mem_100457.mem)[gtid_103562] = defunc_2_reduce_res_103717;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109878_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109878_end -
                 futhark_mc_segmap_parloop_109878_start;
        
        ctx->futhark_mc_segmap_parloop_109878_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109878_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109878_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109876(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_103561 = tid;
    int num_tasks_103980 = info.nsubtasks;
    struct futhark_mc_task_109872 *futhark_mc_task_109872 =
                                  (struct futhark_mc_task_109872 *) args;
    struct futhark_context *ctx = futhark_mc_task_109872->ctx;
    uint64_t futhark_mc_segmap_nested_task_109876_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109876_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109872->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109872->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109872->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109872->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109872->free_i_92415;
    bool x_92416 = futhark_mc_task_109872->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109872->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109872->free_loop_cond_92426;
    int64_t last_res_95669 = futhark_mc_task_109872->free_last_res_95669;
    int64_t min_arg_95688 = futhark_mc_task_109872->free_min_arg_95688;
    int64_t min_arg_95689 = futhark_mc_task_109872->free_min_arg_95689;
    int64_t min_res_95690 = futhark_mc_task_109872->free_min_res_95690;
    double max_res_95694 = futhark_mc_task_109872->free_max_res_95694;
    struct memblock mem_100442 = {.desc ="mem_100442", .mem =
                                  futhark_mc_task_109872->free_mem_100442,
                                  .size =0, .references =NULL};
    struct memblock mem_100445 = {.desc ="mem_100445", .mem =
                                  futhark_mc_task_109872->free_mem_100445,
                                  .size =0, .references =NULL};
    struct memblock mem_100448 = {.desc ="mem_100448", .mem =
                                  futhark_mc_task_109872->free_mem_100448,
                                  .size =0, .references =NULL};
    struct memblock mem_100451 = {.desc ="mem_100451", .mem =
                                  futhark_mc_task_109872->free_mem_100451,
                                  .size =0, .references =NULL};
    struct memblock mem_100454 = {.desc ="mem_100454", .mem =
                                  futhark_mc_task_109872->free_mem_100454,
                                  .size =0, .references =NULL};
    struct memblock mem_100457 = {.desc ="mem_100457", .mem =
                                  futhark_mc_task_109872->free_mem_100457,
                                  .size =0, .references =NULL};
    int64_t iter_104122;
    struct futhark_mc_segmap_parloop_struct_109877
    futhark_mc_segmap_parloop_struct_109877;
    
    futhark_mc_segmap_parloop_struct_109877.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109877.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109877.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109877.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109877.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109877.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109877.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109877.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109877.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109877.free_last_res_95669 =
        last_res_95669;
    futhark_mc_segmap_parloop_struct_109877.free_min_arg_95688 = min_arg_95688;
    futhark_mc_segmap_parloop_struct_109877.free_min_arg_95689 = min_arg_95689;
    futhark_mc_segmap_parloop_struct_109877.free_min_res_95690 = min_res_95690;
    futhark_mc_segmap_parloop_struct_109877.free_max_res_95694 = max_res_95694;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100442 = mem_100442.mem;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100445 = mem_100445.mem;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100448 = mem_100448.mem;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100451 = mem_100451.mem;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100454 = mem_100454.mem;
    futhark_mc_segmap_parloop_struct_109877.free_mem_100457 = mem_100457.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109878_task;
    
    futhark_mc_segmap_parloop_109878_task.name =
        "futhark_mc_segmap_parloop_109878";
    futhark_mc_segmap_parloop_109878_task.fn = futhark_mc_segmap_parloop_109878;
    futhark_mc_segmap_parloop_109878_task.args =
        &futhark_mc_segmap_parloop_struct_109877;
    futhark_mc_segmap_parloop_109878_task.iterations = iterations;
    futhark_mc_segmap_parloop_109878_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109878_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109878_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109878_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109878_task);
    
    if (futhark_mc_segmap_parloop_109878_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109878_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109878_total_end -
                 futhark_mc_segmap_parloop_109878_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109878_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109878_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109878_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109876_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109876_end -
                 futhark_mc_segmap_nested_task_109876_start;
        
        ctx->futhark_mc_segmap_nested_task_109876_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109876_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109876_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_109845(void *args, int64_t start,
                                            int64_t end, int flat_tid_95656,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109844
    *futhark_mc_segmap_parloop_struct_109844 =
    (struct futhark_mc_segmap_parloop_struct_109844 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109844->ctx;
    uint64_t futhark_mc_segmap_parloop_109845_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109845_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109844->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109844->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109844->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109844->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109844->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109844->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109844->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109844->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109844->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109844->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109844->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100438 =
            futhark_mc_segmap_parloop_struct_109844->free_bytes_100438;
    int64_t bytes_100450 =
            futhark_mc_segmap_parloop_struct_109844->free_bytes_100450;
    int64_t bytes_100453 =
            futhark_mc_segmap_parloop_struct_109844->free_bytes_100453;
    struct memblock mem_100566 = {.desc ="mem_100566", .mem =
                                  futhark_mc_segmap_parloop_struct_109844->free_mem_100566,
                                  .size =0, .references =NULL};
    struct memblock mem_100570 = {.desc ="mem_100570", .mem =
                                  futhark_mc_segmap_parloop_struct_109844->free_mem_100570,
                                  .size =0, .references =NULL};
    size_t mem_100439_cached_sizze_109846 = 0;
    unsigned char *mem_100439 = NULL;
    size_t mem_100442_cached_sizze_109847 = 0;
    unsigned char *mem_100442 = NULL;
    size_t mem_100445_cached_sizze_109848 = 0;
    unsigned char *mem_100445 = NULL;
    size_t mem_100448_cached_sizze_109849 = 0;
    unsigned char *mem_100448 = NULL;
    size_t mem_100451_cached_sizze_109850 = 0;
    unsigned char *mem_100451 = NULL;
    size_t mem_100454_cached_sizze_109851 = 0;
    unsigned char *mem_100454 = NULL;
    size_t mem_100457_cached_sizze_109852 = 0;
    unsigned char *mem_100457 = NULL;
    int64_t iterations = end - start;
    int64_t iter_103535 = start;
    
    if (mem_100439_cached_sizze_109846 < (size_t) bytes_100438) {
        mem_100439 = realloc(mem_100439, bytes_100438);
        mem_100439_cached_sizze_109846 = bytes_100438;
    }
    if (mem_100442_cached_sizze_109847 < (size_t) bytes_100438) {
        mem_100442 = realloc(mem_100442, bytes_100438);
        mem_100442_cached_sizze_109847 = bytes_100438;
    }
    if (mem_100445_cached_sizze_109848 < (size_t) bytes_100438) {
        mem_100445 = realloc(mem_100445, bytes_100438);
        mem_100445_cached_sizze_109848 = bytes_100438;
    }
    if (mem_100448_cached_sizze_109849 < (size_t) bytes_100438) {
        mem_100448 = realloc(mem_100448, bytes_100438);
        mem_100448_cached_sizze_109849 = bytes_100438;
    }
    if (mem_100451_cached_sizze_109850 < (size_t) bytes_100450) {
        mem_100451 = realloc(mem_100451, bytes_100450);
        mem_100451_cached_sizze_109850 = bytes_100450;
    }
    if (mem_100454_cached_sizze_109851 < (size_t) bytes_100453) {
        mem_100454 = realloc(mem_100454, bytes_100453);
        mem_100454_cached_sizze_109851 = bytes_100453;
    }
    if (mem_100457_cached_sizze_109852 < (size_t) bytes_100453) {
        mem_100457 = realloc(mem_100457, bytes_100453);
        mem_100457_cached_sizze_109852 = bytes_100453;
    }
    for (; iter_103535 < end; iter_103535++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_103948 = m_92398;
        int64_t gtid_95657 = iter_103535;
        int64_t remnant_103949 = iter_103535 - gtid_95657;
        int64_t flat_tid_103536 = (int64_t) 0;
        int32_t num_tasks_103950;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_109853 futhark_mc_task_109853;
        
        futhark_mc_task_109853.ctx = ctx;
        futhark_mc_task_109853.free_n_92399 = n_92399;
        futhark_mc_task_109853.free_gtid_95657 = gtid_95657;
        futhark_mc_task_109853.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109853.free_mem_100439 = mem_100439;
        
        struct scheduler_segop futhark_mc_task_109853_task;
        
        futhark_mc_task_109853_task.args = &futhark_mc_task_109853;
        futhark_mc_task_109853_task.top_level_fn =
            futhark_mc_segscan_task_109854;
        futhark_mc_task_109853_task.name = "futhark_mc_segscan_task_109854";
        futhark_mc_task_109853_task.iterations = n_92399;
        futhark_mc_task_109853_task.task_time =
            &ctx->futhark_mc_segscan_task_109854_total_time;
        futhark_mc_task_109853_task.task_iter =
            &ctx->futhark_mc_segscan_task_109854_total_iter;
        futhark_mc_task_109853_task.sched = STATIC;
        futhark_mc_task_109853_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_109854_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109853_task);
        
        if (futhark_mc_segscan_task_109854_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_95669;
        
        last_res_95669 = ((int64_t *) mem_100439)[i_92415];
        for (int64_t i_103964 = 0; i_103964 < n_92399; i_103964++) {
            ((double *) mem_100442)[i_103964] = 0.0;
        }
        for (int64_t i_103965 = 0; i_103965 < n_92399; i_103965++) {
            ((int64_t *) mem_100445)[i_103965] = (int64_t) -1;
        }
        
        int64_t flat_tid_103545 = (int64_t) 0;
        int32_t num_tasks_103966;
        struct futhark_mc_task_109860 futhark_mc_task_109860;
        
        futhark_mc_task_109860.ctx = ctx;
        futhark_mc_task_109860.free_n_92399 = n_92399;
        futhark_mc_task_109860.free_gtid_95657 = gtid_95657;
        futhark_mc_task_109860.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109860.free_mem_100439 = mem_100439;
        futhark_mc_task_109860.free_mem_100442 = mem_100442;
        futhark_mc_task_109860.free_mem_100445 = mem_100445;
        
        struct scheduler_segop futhark_mc_task_109860_task;
        
        futhark_mc_task_109860_task.args = &futhark_mc_task_109860;
        futhark_mc_task_109860_task.top_level_fn =
            futhark_mc_segmap_task_109861;
        futhark_mc_task_109860_task.name = "futhark_mc_segmap_task_109861";
        futhark_mc_task_109860_task.iterations = n_92399;
        futhark_mc_task_109860_task.task_time =
            &ctx->futhark_mc_segmap_task_109861_total_time;
        futhark_mc_task_109860_task.task_iter =
            &ctx->futhark_mc_segmap_task_109861_total_iter;
        futhark_mc_task_109860_task.sched = STATIC;
        futhark_mc_task_109860_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109861_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109860_task);
        
        if (futhark_mc_segmap_task_109861_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_103553 = (int64_t) 0;
        int32_t num_tasks_103972;
        struct futhark_mc_task_109864 futhark_mc_task_109864;
        
        futhark_mc_task_109864.ctx = ctx;
        futhark_mc_task_109864.free_n_92399 = n_92399;
        futhark_mc_task_109864.free_mem_100445 = mem_100445;
        futhark_mc_task_109864.free_mem_100448 = mem_100448;
        
        struct scheduler_segop futhark_mc_task_109864_task;
        
        futhark_mc_task_109864_task.args = &futhark_mc_task_109864;
        futhark_mc_task_109864_task.top_level_fn =
            futhark_mc_segmap_task_109865;
        futhark_mc_task_109864_task.name = "futhark_mc_segmap_task_109865";
        futhark_mc_task_109864_task.iterations = n_92399;
        futhark_mc_task_109864_task.task_time =
            &ctx->futhark_mc_segmap_task_109865_total_time;
        futhark_mc_task_109864_task.task_iter =
            &ctx->futhark_mc_segmap_task_109865_total_iter;
        futhark_mc_task_109864_task.sched = STATIC;
        futhark_mc_task_109864_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109865_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109864_task);
        
        if (futhark_mc_segmap_task_109865_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_95688 = sub64(last_res_95669, (int64_t) 1);
        int64_t min_arg_95689 = sub64(last_res_95669, min_res_92421);
        int64_t min_res_95690 = smin64(q_92401, last_res_95669);
        double i64_res_95691 = sitofp_i64_f64(last_res_95669);
        double x_95692 = i64_res_92427 - i64_res_95691;
        double max_arg_95693 = x_95692 / 2.0;
        double max_res_95694 = fmax64(0.0, max_arg_95693);
        int64_t flat_tid_103557 = (int64_t) 0;
        int32_t num_tasks_103976;
        struct futhark_mc_task_109868 futhark_mc_task_109868;
        
        futhark_mc_task_109868.ctx = ctx;
        futhark_mc_task_109868.free_q_92401 = q_92401;
        futhark_mc_task_109868.free_last_res_95669 = last_res_95669;
        futhark_mc_task_109868.free_mem_100451 = mem_100451;
        
        struct scheduler_segop futhark_mc_task_109868_task;
        
        futhark_mc_task_109868_task.args = &futhark_mc_task_109868;
        futhark_mc_task_109868_task.top_level_fn =
            futhark_mc_segmap_task_109869;
        futhark_mc_task_109868_task.name = "futhark_mc_segmap_task_109869";
        futhark_mc_task_109868_task.iterations = q_92401;
        futhark_mc_task_109868_task.task_time =
            &ctx->futhark_mc_segmap_task_109869_total_time;
        futhark_mc_task_109868_task.task_iter =
            &ctx->futhark_mc_segmap_task_109869_total_iter;
        futhark_mc_task_109868_task.sched = STATIC;
        futhark_mc_task_109868_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109869_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109868_task);
        
        if (futhark_mc_segmap_task_109869_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_103759 = (int64_t) 0;
        int32_t num_tasks_103980;
        int64_t flat_tid_103561 = (int64_t) 0;
        struct futhark_mc_task_109872 futhark_mc_task_109872;
        
        futhark_mc_task_109872.ctx = ctx;
        futhark_mc_task_109872.free_n_92399 = n_92399;
        futhark_mc_task_109872.free_q_92401 = q_92401;
        futhark_mc_task_109872.free_jump_92403 = jump_92403;
        futhark_mc_task_109872.free_n_m_92409 = n_m_92409;
        futhark_mc_task_109872.free_i_92415 = i_92415;
        futhark_mc_task_109872.free_x_92416 = x_92416;
        futhark_mc_task_109872.free_min_res_92421 = min_res_92421;
        futhark_mc_task_109872.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_109872.free_last_res_95669 = last_res_95669;
        futhark_mc_task_109872.free_min_arg_95688 = min_arg_95688;
        futhark_mc_task_109872.free_min_arg_95689 = min_arg_95689;
        futhark_mc_task_109872.free_min_res_95690 = min_res_95690;
        futhark_mc_task_109872.free_max_res_95694 = max_res_95694;
        futhark_mc_task_109872.free_mem_100442 = mem_100442;
        futhark_mc_task_109872.free_mem_100445 = mem_100445;
        futhark_mc_task_109872.free_mem_100448 = mem_100448;
        futhark_mc_task_109872.free_mem_100451 = mem_100451;
        futhark_mc_task_109872.free_mem_100454 = mem_100454;
        futhark_mc_task_109872.free_mem_100457 = mem_100457;
        
        struct scheduler_segop futhark_mc_task_109872_task;
        
        futhark_mc_task_109872_task.args = &futhark_mc_task_109872;
        futhark_mc_task_109872_task.top_level_fn =
            futhark_mc_segmap_task_109873;
        futhark_mc_task_109872_task.name = "futhark_mc_segmap_task_109873";
        futhark_mc_task_109872_task.iterations = n_m_92409;
        futhark_mc_task_109872_task.task_time =
            &ctx->futhark_mc_segmap_task_109873_total_time;
        futhark_mc_task_109872_task.task_iter =
            &ctx->futhark_mc_segmap_task_109873_total_iter;
        futhark_mc_task_109872_task.sched = DYNAMIC;
        futhark_mc_task_109872_task.nested_fn =
            futhark_mc_segmap_nested_task_109876;
        
        int futhark_mc_segmap_task_109873_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109872_task);
        
        if (futhark_mc_segmap_task_109873_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100566.mem + gtid_95657 * n_m_92409 * (int64_t) 8,
                    mem_100454 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100570.mem + gtid_95657 * n_m_92409 * (int64_t) 8,
                    mem_100457 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100439);
    free(mem_100442);
    free(mem_100445);
    free(mem_100448);
    free(mem_100451);
    free(mem_100454);
    free(mem_100457);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109845_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109845_end -
                 futhark_mc_segmap_parloop_109845_start;
        
        ctx->futhark_mc_segmap_parloop_109845_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109845_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109845_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109843(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_95656 = tid;
    int num_tasks_103284 = info.nsubtasks;
    struct futhark_mc_task_109832 *futhark_mc_task_109832 =
                                  (struct futhark_mc_task_109832 *) args;
    struct futhark_context *ctx = futhark_mc_task_109832->ctx;
    uint64_t futhark_mc_segmap_nested_task_109843_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109843_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109832->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109832->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109832->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109832->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109832->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109832->free_i_92415;
    bool x_92416 = futhark_mc_task_109832->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109832->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109832->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109832->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109832->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100438 = futhark_mc_task_109832->free_bytes_100438;
    int64_t bytes_100450 = futhark_mc_task_109832->free_bytes_100450;
    int64_t bytes_100453 = futhark_mc_task_109832->free_bytes_100453;
    struct memblock mem_100566 = {.desc ="mem_100566", .mem =
                                  futhark_mc_task_109832->free_mem_100566,
                                  .size =0, .references =NULL};
    struct memblock mem_100570 = {.desc ="mem_100570", .mem =
                                  futhark_mc_task_109832->free_mem_100570,
                                  .size =0, .references =NULL};
    int64_t iter_103535;
    struct futhark_mc_segmap_parloop_struct_109844
    futhark_mc_segmap_parloop_struct_109844;
    
    futhark_mc_segmap_parloop_struct_109844.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109844.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109844.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109844.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109844.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109844.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109844.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109844.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109844.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109844.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109844.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109844.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109844.free_bytes_100438 = bytes_100438;
    futhark_mc_segmap_parloop_struct_109844.free_bytes_100450 = bytes_100450;
    futhark_mc_segmap_parloop_struct_109844.free_bytes_100453 = bytes_100453;
    futhark_mc_segmap_parloop_struct_109844.free_mem_100566 = mem_100566.mem;
    futhark_mc_segmap_parloop_struct_109844.free_mem_100570 = mem_100570.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109845_task;
    
    futhark_mc_segmap_parloop_109845_task.name =
        "futhark_mc_segmap_parloop_109845";
    futhark_mc_segmap_parloop_109845_task.fn = futhark_mc_segmap_parloop_109845;
    futhark_mc_segmap_parloop_109845_task.args =
        &futhark_mc_segmap_parloop_struct_109844;
    futhark_mc_segmap_parloop_109845_task.iterations = iterations;
    futhark_mc_segmap_parloop_109845_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109845_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109845_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109845_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109845_task);
    
    if (futhark_mc_segmap_parloop_109845_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109845_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109845_total_end -
                 futhark_mc_segmap_parloop_109845_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109845_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109845_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109845_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109843_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109843_end -
                 futhark_mc_segmap_nested_task_109843_start;
        
        ctx->futhark_mc_segmap_nested_task_109843_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109843_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109843_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109894 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100580;
    int64_t free_bytes_100592;
    int64_t free_bytes_100613;
    unsigned char *free_mem_100723;
};
struct futhark_mc_segmap_parloop_struct_109896 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100580;
    int64_t free_bytes_100592;
    int64_t free_bytes_100613;
    unsigned char *free_mem_100723;
};
static int futhark_mc_segmap_parloop_109897(void *args, int64_t start,
                                            int64_t end, int flat_tid_96101,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109896
    *futhark_mc_segmap_parloop_struct_109896 =
    (struct futhark_mc_segmap_parloop_struct_109896 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109896->ctx;
    uint64_t futhark_mc_segmap_parloop_109897_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109897_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109896->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109896->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109896->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109896->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109896->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109896->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109896->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109896->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109896->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109896->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109896->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100580 =
            futhark_mc_segmap_parloop_struct_109896->free_bytes_100580;
    int64_t bytes_100592 =
            futhark_mc_segmap_parloop_struct_109896->free_bytes_100592;
    int64_t bytes_100613 =
            futhark_mc_segmap_parloop_struct_109896->free_bytes_100613;
    struct memblock mem_100723 = {.desc ="mem_100723", .mem =
                                  futhark_mc_segmap_parloop_struct_109896->free_mem_100723,
                                  .size =0, .references =NULL};
    size_t mem_100617_cached_sizze_109898 = 0;
    unsigned char *mem_100617 = NULL;
    size_t mem_100632_cached_sizze_109899 = 0;
    unsigned char *mem_100632 = NULL;
    size_t mem_100635_cached_sizze_109900 = 0;
    unsigned char *mem_100635 = NULL;
    size_t mem_100662_cached_sizze_109901 = 0;
    unsigned char *mem_100662 = NULL;
    size_t mem_100677_cached_sizze_109902 = 0;
    unsigned char *mem_100677 = NULL;
    size_t mem_100692_cached_sizze_109903 = 0;
    unsigned char *mem_100692 = NULL;
    size_t mem_100702_cached_sizze_109904 = 0;
    unsigned char *mem_100702 = NULL;
    int64_t iterations = end - start;
    int64_t iter_104316 = start;
    
    if (mem_100617_cached_sizze_109898 < (size_t) bytes_100580) {
        mem_100617 = realloc(mem_100617, bytes_100580);
        mem_100617_cached_sizze_109898 = bytes_100580;
    }
    if (mem_100632_cached_sizze_109899 < (size_t) bytes_100580) {
        mem_100632 = realloc(mem_100632, bytes_100580);
        mem_100632_cached_sizze_109899 = bytes_100580;
    }
    if (mem_100635_cached_sizze_109900 < (size_t) bytes_100580) {
        mem_100635 = realloc(mem_100635, bytes_100580);
        mem_100635_cached_sizze_109900 = bytes_100580;
    }
    if (mem_100662_cached_sizze_109901 < (size_t) bytes_100580) {
        mem_100662 = realloc(mem_100662, bytes_100580);
        mem_100662_cached_sizze_109901 = bytes_100580;
    }
    if (mem_100677_cached_sizze_109902 < (size_t) bytes_100592) {
        mem_100677 = realloc(mem_100677, bytes_100592);
        mem_100677_cached_sizze_109902 = bytes_100592;
    }
    if (mem_100692_cached_sizze_109903 < (size_t) bytes_100613) {
        mem_100692 = realloc(mem_100692, bytes_100613);
        mem_100692_cached_sizze_109903 = bytes_100613;
    }
    if (mem_100702_cached_sizze_109904 < (size_t) bytes_100592) {
        mem_100702 = realloc(mem_100702, bytes_100592);
        mem_100702_cached_sizze_109904 = bytes_100592;
    }
    for (; iter_104316 < end; iter_104316++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104473 = m_92398;
        int64_t gtid_96102 = iter_104316;
        int64_t remnant_104474 = iter_104316 - gtid_96102;
        int64_t discard_99756;
        int64_t scanacc_104318 = (int64_t) 0;
        
        for (int64_t i_104317 = 0; i_104317 < n_92399; i_104317++) {
            double x_104320;
            
            x_104320 = ((double *) Y_mem_100186.mem)[gtid_96102 * n_92399 +
                                                     i_104317];
            
            bool isnan_res_104321;
            
            isnan_res_104321 = futrts_isnan64(x_104320);
            
            bool defunc_0_p_res_104322 = !isnan_res_104321;
            int64_t defunc_0_f_res_104323 =
                    btoi_bool_i64(defunc_0_p_res_104322);
            int64_t defunc_1_op_res_104324 = add64(defunc_0_f_res_104323,
                                                   scanacc_104318);
            
            ((int64_t *) mem_100617)[i_104317] = defunc_1_op_res_104324;
            
            int64_t scanacc_tmp_104475 = defunc_1_op_res_104324;
            
            scanacc_104318 = scanacc_tmp_104475;
        }
        discard_99756 = scanacc_104318;
        
        int64_t last_res_93081;
        
        last_res_93081 = ((int64_t *) mem_100617)[i_92415];
        for (int64_t i_104477 = 0; i_104477 < n_92399; i_104477++) {
            ((double *) mem_100632)[i_104477] = 0.0;
        }
        for (int64_t i_104478 = 0; i_104478 < n_92399; i_104478++) {
            ((int64_t *) mem_100635)[i_104478] = (int64_t) -1;
        }
        for (int64_t write_iter_104326 = 0; write_iter_104326 < n_92399;
             write_iter_104326++) {
            double write_iv_104329;
            
            write_iv_104329 = ((double *) Y_mem_100186.mem)[gtid_96102 *
                                                            n_92399 +
                                                            write_iter_104326];
            
            bool isnan_res_104330;
            
            isnan_res_104330 = futrts_isnan64(write_iv_104329);
            
            bool defunc_0_p_res_104331 = !isnan_res_104330;
            int64_t defunc_1_f_res_104332;
            
            if (defunc_0_p_res_104331) {
                int64_t write_iv_104333;
                
                write_iv_104333 = ((int64_t *) mem_100617)[write_iter_104326];
                
                int64_t defunc_1_f_res_t_res_104334 = sub64(write_iv_104333,
                                                            (int64_t) 1);
                
                defunc_1_f_res_104332 = defunc_1_f_res_t_res_104334;
            } else {
                defunc_1_f_res_104332 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_104332) &&
                slt64(defunc_1_f_res_104332, n_92399)) {
                ((int64_t *) mem_100635)[defunc_1_f_res_104332] =
                    write_iter_104326;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_104332) &&
                slt64(defunc_1_f_res_104332, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_100632 + defunc_1_f_res_104332 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_96102 * n_92399 +
                                                write_iter_104326) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_104338 = 0; i_104338 < n_92399; i_104338++) {
            int64_t x_104340;
            
            x_104340 = ((int64_t *) mem_100635)[i_104338];
            
            int64_t defunc_0_f_res_104341 = add64((int64_t) 1, x_104340);
            
            ((int64_t *) mem_100662)[i_104338] = defunc_0_f_res_104341;
        }
        
        int64_t min_arg_93096 = sub64(last_res_93081, (int64_t) 1);
        int64_t min_arg_93097 = sub64(last_res_93081, min_res_92421);
        int64_t min_res_93098 = smin64(q_92401, last_res_93081);
        double i64_res_93099 = sitofp_i64_f64(last_res_93081);
        double x_93100 = i64_res_92427 - i64_res_93099;
        double max_arg_93101 = x_93100 / 2.0;
        double max_res_93102 = fmax64(0.0, max_arg_93101);
        
        for (int64_t i_104343 = 0; i_104343 < q_92401; i_104343++) {
            bool cond_104345 = sle64(last_res_93081, i_104343);
            double defunc_0_f_res_104346;
            
            if (cond_104345) {
                defunc_0_f_res_104346 = 0.0;
            } else {
                defunc_0_f_res_104346 = 1.0;
            }
            ((double *) mem_100677)[i_104343] = defunc_0_f_res_104346;
        }
        for (int64_t i_104348 = 0; i_104348 < n_m_92409; i_104348++) {
            int64_t min_arg_104350 = mul64(jump_92403, i_104348);
            int64_t min_res_104351 = smin64(i_92415, min_arg_104350);
            int64_t defunc_0_g_res_104352 = add64((int64_t) 1, min_res_104351);
            bool init_idx_104353;
            int64_t init_idx_104354;
            int64_t init_idx_104355;
            bool loop_while_104356;
            int64_t low_104357;
            int64_t high_104358;
            
            loop_while_104356 = x_92416;
            low_104357 = (int64_t) 0;
            high_104358 = i_92415;
            while (loop_while_104356) {
                int64_t x_104359 = add64(low_104357, high_104358);
                int64_t mid_104360 = sdiv64(x_104359, (int64_t) 2);
                bool x_104361 = sle64((int64_t) 0, mid_104360);
                bool y_104362 = slt64(mid_104360, n_92399);
                bool bounds_check_104363 = x_104361 && y_104362;
                bool index_certs_104364;
                
                if (!bounds_check_104363) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_104360,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_104365;
                
                mid_id_104365 = ((int64_t *) mem_100662)[mid_104360];
                
                bool cond_104366 = slt64(mid_id_104365, (int64_t) 0);
                int64_t mid_idx_104367;
                
                if (cond_104366) {
                    mid_idx_104367 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_104367 = mid_id_104365;
                }
                
                bool cond_104368 = sle64(defunc_0_g_res_104352, mid_idx_104367);
                int64_t loopres_104369;
                int64_t loopres_104370;
                
                if (cond_104368) {
                    int64_t loopres_t_res_104371 = sub64(mid_104360,
                                                         (int64_t) 1);
                    
                    loopres_104369 = low_104357;
                    loopres_104370 = loopres_t_res_104371;
                } else {
                    int64_t loopres_f_res_104372 = add64((int64_t) 1,
                                                         mid_104360);
                    
                    loopres_104369 = loopres_f_res_104372;
                    loopres_104370 = high_104358;
                }
                
                bool loop_cond_104373 = sle64(loopres_104369, loopres_104370);
                bool loop_while_tmp_104484 = loop_cond_104373;
                int64_t low_tmp_104485 = loopres_104369;
                int64_t high_tmp_104486 = loopres_104370;
                
                loop_while_104356 = loop_while_tmp_104484;
                low_104357 = low_tmp_104485;
                high_104358 = high_tmp_104486;
            }
            init_idx_104353 = loop_while_104356;
            init_idx_104354 = low_104357;
            init_idx_104355 = high_104358;
            
            bool idx_104374;
            int64_t idx_104375;
            int64_t idx_104376;
            int64_t idx_104377;
            bool loop_while_104378;
            int64_t l_idx_104379;
            int64_t r_idx_104380;
            int64_t span_104381;
            
            loop_while_104378 = loop_cond_92426;
            l_idx_104379 = init_idx_104354;
            r_idx_104380 = init_idx_104354;
            span_104381 = (int64_t) 1;
            while (loop_while_104378) {
                int64_t max_arg_104382 = sub64(l_idx_104379, (int64_t) 1);
                int64_t max_res_104383 = smax64((int64_t) 0, max_arg_104382);
                int64_t min_arg_104384 = add64((int64_t) 1, r_idx_104380);
                int64_t min_res_104385 = smin64(min_arg_93096, min_arg_104384);
                bool x_104386 = sle64((int64_t) 0, max_res_104383);
                bool y_104387 = slt64(max_res_104383, n_92399);
                bool bounds_check_104388 = x_104386 && y_104387;
                bool index_certs_104389;
                
                if (!bounds_check_104388) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_104383,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_104390;
                
                x_104390 = ((int64_t *) mem_100662)[max_res_104383];
                
                int64_t abs_arg_104391 = sub64(x_104390, defunc_0_g_res_104352);
                int64_t abs_res_104392 = abs64(abs_arg_104391);
                bool x_104393 = sle64((int64_t) 0, min_res_104385);
                bool y_104394 = slt64(min_res_104385, n_92399);
                bool bounds_check_104395 = x_104393 && y_104394;
                bool index_certs_104396;
                
                if (!bounds_check_104395) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_104385,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_104397;
                
                x_104397 = ((int64_t *) mem_100662)[min_res_104385];
                
                int64_t abs_arg_104398 = sub64(x_104397, defunc_0_g_res_104352);
                int64_t abs_res_104399 = abs64(abs_arg_104398);
                bool cond_104400 = max_res_104383 == l_idx_104379;
                int64_t loopres_104401;
                int64_t loopres_104402;
                int64_t loopres_104403;
                
                if (cond_104400) {
                    loopres_104401 = l_idx_104379;
                    loopres_104402 = r_idx_104380;
                    loopres_104403 = min_res_92421;
                } else {
                    bool cond_104404 = slt64(abs_res_104392, abs_res_104399);
                    bool cond_f_res_104405 = min_res_104385 == r_idx_104380;
                    bool x_104406 = !cond_104404;
                    bool y_104407 = cond_f_res_104405 && x_104406;
                    bool cond_104408 = cond_104404 || y_104407;
                    int64_t loopres_f_res_104409;
                    
                    if (cond_104408) {
                        loopres_f_res_104409 = max_res_104383;
                    } else {
                        loopres_f_res_104409 = l_idx_104379;
                    }
                    
                    int64_t loopres_f_res_104410;
                    
                    if (cond_104408) {
                        loopres_f_res_104410 = r_idx_104380;
                    } else {
                        loopres_f_res_104410 = min_res_104385;
                    }
                    
                    int64_t loopres_f_res_104411;
                    
                    if (cond_104408) {
                        int64_t loopres_f_res_t_res_104412 = add64((int64_t) 1,
                                                                   span_104381);
                        
                        loopres_f_res_104411 = loopres_f_res_t_res_104412;
                    } else {
                        int64_t loopres_f_res_f_res_104413 = add64((int64_t) 1,
                                                                   span_104381);
                        
                        loopres_f_res_104411 = loopres_f_res_f_res_104413;
                    }
                    loopres_104401 = loopres_f_res_104409;
                    loopres_104402 = loopres_f_res_104410;
                    loopres_104403 = loopres_f_res_104411;
                }
                
                bool loop_cond_104414 = slt64(loopres_104403, min_res_92421);
                bool loop_while_tmp_104487 = loop_cond_104414;
                int64_t l_idx_tmp_104488 = loopres_104401;
                int64_t r_idx_tmp_104489 = loopres_104402;
                int64_t span_tmp_104490 = loopres_104403;
                
                loop_while_104378 = loop_while_tmp_104487;
                l_idx_104379 = l_idx_tmp_104488;
                r_idx_104380 = r_idx_tmp_104489;
                span_104381 = span_tmp_104490;
            }
            idx_104374 = loop_while_104378;
            idx_104375 = l_idx_104379;
            idx_104376 = r_idx_104380;
            idx_104377 = span_104381;
            
            int64_t min_res_104415 = smin64(min_arg_93097, idx_104375);
            int64_t max_res_104416 = smax64((int64_t) 0, min_res_104415);
            int64_t x_104417 = add64(min_res_93098, max_res_104416);
            int64_t r_104418 = sub64(x_104417, (int64_t) 1);
            bool x_104419 = sle64((int64_t) 0, r_104418);
            bool y_104420 = slt64(r_104418, n_92399);
            bool bounds_check_104421 = x_104419 && y_104420;
            bool index_certs_104422;
            
            if (!bounds_check_104421) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_104418,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104423;
            
            x_104423 = ((int64_t *) mem_100635)[r_104418];
            
            int64_t abs_arg_104424 = sub64(x_104423, min_res_104351);
            int64_t abs_res_104425 = abs64(abs_arg_104424);
            bool x_104426 = sle64((int64_t) 0, max_res_104416);
            bool y_104427 = slt64(max_res_104416, n_92399);
            bool bounds_check_104428 = x_104426 && y_104427;
            bool index_certs_104429;
            
            if (!bounds_check_104428) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_104416,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104430;
            
            x_104430 = ((int64_t *) mem_100635)[max_res_104416];
            
            int64_t abs_arg_104431 = sub64(x_104430, min_res_104351);
            int64_t abs_res_104432 = abs64(abs_arg_104431);
            int64_t max_res_104433 = smax64(abs_res_104425, abs_res_104432);
            double defunc_0_f_res_104434 = sitofp_i64_f64(max_res_104433);
            double defunc_1_f_res_104435 = max_res_93102 +
                   defunc_0_f_res_104434;
            double defunc_2_reduce_res_104437;
            double redout_104440 = 0.0;
            
            for (int64_t i_104439 = 0; i_104439 < q_92401; i_104439++) {
                double x_104442;
                
                x_104442 = ((double *) mem_100677)[i_104439];
                
                bool cond_104443 = sle64(last_res_93081, i_104439);
                int64_t defunc_0_f_res_104444;
                
                if (cond_104443) {
                    defunc_0_f_res_104444 = (int64_t) 0;
                } else {
                    int64_t i_104445 = add64(max_res_104416, i_104439);
                    int64_t defunc_0_add_arg_104446;
                    
                    defunc_0_add_arg_104446 =
                        ((int64_t *) mem_100635)[i_104445];
                    
                    int64_t defunc_1_add_res_104447 = add64((int64_t) 1,
                                                            defunc_0_add_arg_104446);
                    
                    defunc_0_f_res_104444 = defunc_1_add_res_104447;
                }
                
                int64_t binop_p_104448 = sub64(defunc_0_f_res_104444,
                                               min_res_104351);
                double defunc_0_f_res_104449 = sitofp_i64_f64(binop_p_104448);
                double abs_res_104450 = fabs(defunc_0_f_res_104449);
                double tmp1_104451 = abs_res_104450 / defunc_1_f_res_104435;
                double x_104452 = tmp1_104451 * tmp1_104451;
                double y_104453 = tmp1_104451 * x_104452;
                double tmp2_104454 = 1.0 - y_104453;
                double x_104455 = tmp2_104454 * tmp2_104454;
                double tmp3_104456 = tmp2_104454 * x_104455;
                double tmp4_104457 = x_104442 * tmp3_104456;
                double defunc_1_op_res_104458 = tmp4_104457 + redout_104440;
                
                ((double *) mem_100702)[i_104439] = tmp4_104457;
                
                double redout_tmp_104491 = defunc_1_op_res_104458;
                
                redout_104440 = redout_tmp_104491;
            }
            defunc_2_reduce_res_104437 = redout_104440;
            
            double a0_104460 = 1.0 / defunc_2_reduce_res_104437;
            double defunc_2_reduce_res_104461;
            double redout_104463 = 0.0;
            
            for (int64_t i_104462 = 0; i_104462 < q_92401; i_104462++) {
                double x_104464;
                
                x_104464 = ((double *) mem_100702)[i_104462];
                
                bool cond_104465 = sle64(last_res_93081, i_104462);
                double defunc_0_f_res_104466;
                
                if (cond_104465) {
                    defunc_0_f_res_104466 = 0.0;
                } else {
                    int64_t i_104467 = add64(max_res_104416, i_104462);
                    double defunc_0_add_arg_104468;
                    
                    defunc_0_add_arg_104468 = ((double *) mem_100632)[i_104467];
                    defunc_0_f_res_104466 = defunc_0_add_arg_104468;
                }
                
                double x_104469 = a0_104460 * x_104464;
                double defunc_9_fit_fun_res_104470 = defunc_0_f_res_104466 *
                       x_104469;
                double defunc_1_op_res_104471 = defunc_9_fit_fun_res_104470 +
                       redout_104463;
                double redout_tmp_104493 = defunc_1_op_res_104471;
                
                redout_104463 = redout_tmp_104493;
            }
            defunc_2_reduce_res_104461 = redout_104463;
            ((double *) mem_100692)[i_104348] = defunc_2_reduce_res_104461;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100723.mem + gtid_96102 * n_m_92409 * (int64_t) 8,
                    mem_100692 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100617);
    free(mem_100632);
    free(mem_100635);
    free(mem_100662);
    free(mem_100677);
    free(mem_100692);
    free(mem_100702);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109897_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109897_end -
                 futhark_mc_segmap_parloop_109897_start;
        
        ctx->futhark_mc_segmap_parloop_109897_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109897_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109897_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109895(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_96101 = tid;
    int num_tasks_104315 = info.nsubtasks;
    struct futhark_mc_task_109894 *futhark_mc_task_109894 =
                                  (struct futhark_mc_task_109894 *) args;
    struct futhark_context *ctx = futhark_mc_task_109894->ctx;
    uint64_t futhark_mc_segmap_task_109895_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109895_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109894->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109894->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109894->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109894->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109894->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109894->free_i_92415;
    bool x_92416 = futhark_mc_task_109894->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109894->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109894->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109894->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109894->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100580 = futhark_mc_task_109894->free_bytes_100580;
    int64_t bytes_100592 = futhark_mc_task_109894->free_bytes_100592;
    int64_t bytes_100613 = futhark_mc_task_109894->free_bytes_100613;
    struct memblock mem_100723 = {.desc ="mem_100723", .mem =
                                  futhark_mc_task_109894->free_mem_100723,
                                  .size =0, .references =NULL};
    int64_t iter_104316;
    struct futhark_mc_segmap_parloop_struct_109896
    futhark_mc_segmap_parloop_struct_109896;
    
    futhark_mc_segmap_parloop_struct_109896.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109896.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109896.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109896.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109896.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109896.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109896.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109896.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109896.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109896.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109896.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109896.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109896.free_bytes_100580 = bytes_100580;
    futhark_mc_segmap_parloop_struct_109896.free_bytes_100592 = bytes_100592;
    futhark_mc_segmap_parloop_struct_109896.free_bytes_100613 = bytes_100613;
    futhark_mc_segmap_parloop_struct_109896.free_mem_100723 = mem_100723.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109897_task;
    
    futhark_mc_segmap_parloop_109897_task.name =
        "futhark_mc_segmap_parloop_109897";
    futhark_mc_segmap_parloop_109897_task.fn = futhark_mc_segmap_parloop_109897;
    futhark_mc_segmap_parloop_109897_task.args =
        &futhark_mc_segmap_parloop_struct_109896;
    futhark_mc_segmap_parloop_109897_task.iterations = iterations;
    futhark_mc_segmap_parloop_109897_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109897_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109897_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109897_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109897_task);
    
    if (futhark_mc_segmap_parloop_109897_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109897_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109897_total_end -
                 futhark_mc_segmap_parloop_109897_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109897_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109897_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109897_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109895_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109895_end -
                 futhark_mc_segmap_task_109895_start;
        
        ctx->futhark_mc_segmap_task_109895_runs[tid]++;
        ctx->futhark_mc_segmap_task_109895_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109895_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109906 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100580;
    int64_t free_bytes_100592;
    int64_t free_bytes_100613;
    unsigned char *free_mem_100723;
};
struct futhark_mc_task_109914 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96250;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100581;
};
struct futhark_mc_scan_stage_1_parloop_struct_109917 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96250;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100581;
};
static int futhark_mc_scan_stage_1_parloop_109918(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_104495, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_109917
    *futhark_mc_scan_stage_1_parloop_struct_109917 =
    (struct futhark_mc_scan_stage_1_parloop_struct_109917 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_109917->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_109918_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109918_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_109917->free_n_92399;
    int64_t gtid_96250 =
            futhark_mc_scan_stage_1_parloop_struct_109917->free_gtid_96250;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_109917->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100581 = {.desc ="mem_100581", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_109917->free_mem_100581,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104774 = start;
    int64_t x_104497;
    int64_t x_104498;
    
    x_104497 = (int64_t) 0;
    for (; iter_104774 < end; iter_104774++) {
        int64_t gtid_104496 = iter_104774;
        
        // stage 1 scan body
        {
            double x_104500;
            
            x_104500 = ((double *) Y_mem_100186.mem)[gtid_96250 * n_92399 +
                                                     gtid_104496];
            
            bool isnan_res_104501;
            
            isnan_res_104501 = futrts_isnan64(x_104500);
            
            bool defunc_0_p_res_104502 = !isnan_res_104501;
            int64_t defunc_0_f_res_104503 =
                    btoi_bool_i64(defunc_0_p_res_104502);
            
            // write mapped values results to memory
            { }
            x_104497 = x_104497;
            // Read next values
            {
                x_104498 = defunc_0_f_res_104503;
            }
            
            int64_t defunc_1_op_res_104499 = add64(x_104497, x_104498);
            
            ((int64_t *) mem_100581.mem)[gtid_104496] = defunc_1_op_res_104499;
            x_104497 = defunc_1_op_res_104499;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109918_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109918_end -
                 futhark_mc_scan_stage_1_parloop_109918_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_109918_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_109918_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_109918_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_109919 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96250;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100581;
};
static int futhark_mc_scan_stage_3_parloop_109920(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_104495, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_109919
    *futhark_mc_scan_stage_3_parloop_struct_109919 =
    (struct futhark_mc_scan_stage_3_parloop_struct_109919 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_109919->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_109920_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_109920_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_109919->free_n_92399;
    int64_t gtid_96250 =
            futhark_mc_scan_stage_3_parloop_struct_109919->free_gtid_96250;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_109919->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100581 = {.desc ="mem_100581", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_109919->free_mem_100581,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104786 = start;
    int64_t x_104783;
    int64_t x_104784;
    
    if (iter_104786 == (int64_t) 0) {
        x_104783 = (int64_t) 0;
    } else {
        x_104783 = ((int64_t *) mem_100581.mem)[iter_104786 - (int64_t) 1];
    }
    for (; iter_104786 < end; iter_104786++) {
        int64_t gtid_104496 = iter_104786;
        
        // stage 3 scan body
        {
            double x_104500;
            
            x_104500 = ((double *) Y_mem_100186.mem)[gtid_96250 * n_92399 +
                                                     gtid_104496];
            
            bool isnan_res_104501;
            
            isnan_res_104501 = futrts_isnan64(x_104500);
            
            bool defunc_0_p_res_104502 = !isnan_res_104501;
            int64_t defunc_0_f_res_104503 =
                    btoi_bool_i64(defunc_0_p_res_104502);
            
            x_104783 = x_104783;
            x_104784 = defunc_0_f_res_104503;
            
            int64_t defunc_1_op_res_104785 = add64(x_104783, x_104784);
            
            ((int64_t *) mem_100581.mem)[gtid_104496] = defunc_1_op_res_104785;
            x_104783 = defunc_1_op_res_104785;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_109920_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_109920_end -
                 futhark_mc_scan_stage_3_parloop_109920_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_109920_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_109920_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_109920_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_109915(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104495 = tid;
    int num_tasks_104773 = info.nsubtasks;
    struct futhark_mc_task_109914 *futhark_mc_task_109914 =
                                  (struct futhark_mc_task_109914 *) args;
    struct futhark_context *ctx = futhark_mc_task_109914->ctx;
    uint64_t futhark_mc_segscan_task_109915_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_109915_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109914->free_n_92399;
    int64_t gtid_96250 = futhark_mc_task_109914->free_gtid_96250;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109914->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100581 = {.desc ="mem_100581", .mem =
                                  futhark_mc_task_109914->free_mem_100581,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_104780_cached_sizze_109916 = 0;
    unsigned char *scan_stage_2_accum_mem_104780 = NULL;
    int64_t iter_104774;
    struct futhark_mc_scan_stage_1_parloop_struct_109917
    futhark_mc_scan_stage_1_parloop_struct_109917;
    
    futhark_mc_scan_stage_1_parloop_struct_109917.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_109917.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_109917.free_gtid_96250 = gtid_96250;
    futhark_mc_scan_stage_1_parloop_struct_109917.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_109917.free_mem_100581 =
        mem_100581.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_109918_task;
    
    futhark_mc_scan_stage_1_parloop_109918_task.name =
        "futhark_mc_scan_stage_1_parloop_109918";
    futhark_mc_scan_stage_1_parloop_109918_task.fn =
        futhark_mc_scan_stage_1_parloop_109918;
    futhark_mc_scan_stage_1_parloop_109918_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_109917;
    futhark_mc_scan_stage_1_parloop_109918_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_109918_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_109918_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109918_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_109918_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_109918_task);
    
    if (futhark_mc_scan_stage_1_parloop_109918_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109918_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109918_total_end -
                 futhark_mc_scan_stage_1_parloop_109918_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109918_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109918_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109918_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_104773)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_104775;
        int64_t x_104776;
        int64_t offset_104778 = (int64_t) 0;
        int64_t offset_index_104779 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_104780_cached_sizze_109916 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_104780 =
                realloc(scan_stage_2_accum_mem_104780, (int64_t) 8);
            scan_stage_2_accum_mem_104780_cached_sizze_109916 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_104780)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_104782 = 0; i_104782 < num_tasks_104773 - 1;
             i_104782++) {
            offset_104778 = squot64(n_92399, sext_i32_i64(num_tasks_104773));
            if (slt64(sext_i32_i64(i_104782), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_104773)))) {
                offset_104778 += (int64_t) 1;
            }
            offset_index_104779 += offset_104778;
            
            int64_t gtid_104496 = offset_index_104779;
            double x_104500;
            
            x_104500 = ((double *) Y_mem_100186.mem)[gtid_96250 * n_92399 +
                                                     gtid_104496];
            
            bool isnan_res_104501;
            
            isnan_res_104501 = futrts_isnan64(x_104500);
            
            bool defunc_0_p_res_104502 = !isnan_res_104501;
            int64_t defunc_0_f_res_104503 =
                    btoi_bool_i64(defunc_0_p_res_104502);
            
            // Read carry in
            {
                x_104775 =
                    ((int64_t *) scan_stage_2_accum_mem_104780)[(int64_t) 0];
            }
            // Read next values
            {
                x_104776 = ((int64_t *) mem_100581.mem)[offset_index_104779 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_104777 = add64(x_104775, x_104776);
            
            ((int64_t *) mem_100581.mem)[offset_index_104779 - (int64_t) 1] =
                defunc_1_op_res_104777;
            ((int64_t *) scan_stage_2_accum_mem_104780)[(int64_t) 0] =
                defunc_1_op_res_104777;
        }
        
        int64_t iter_104786 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_109919
        futhark_mc_scan_stage_3_parloop_struct_109919;
        
        futhark_mc_scan_stage_3_parloop_struct_109919.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_109919.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_109919.free_gtid_96250 =
            gtid_96250;
        futhark_mc_scan_stage_3_parloop_struct_109919.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_109919.free_mem_100581 =
            mem_100581.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_109920_task;
        
        futhark_mc_scan_stage_3_parloop_109920_task.name =
            "futhark_mc_scan_stage_3_parloop_109920";
        futhark_mc_scan_stage_3_parloop_109920_task.fn =
            futhark_mc_scan_stage_3_parloop_109920;
        futhark_mc_scan_stage_3_parloop_109920_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_109919;
        futhark_mc_scan_stage_3_parloop_109920_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_109920_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_109920_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_109920_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_109920_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_109920_task);
        
        if (futhark_mc_scan_stage_3_parloop_109920_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_109920_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_109920_total_end -
                     futhark_mc_scan_stage_3_parloop_109920_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109920_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109920_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109920_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_104780);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_109915_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_109915_end -
                 futhark_mc_segscan_task_109915_start;
        
        ctx->futhark_mc_segscan_task_109915_runs[tid]++;
        ctx->futhark_mc_segscan_task_109915_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_109915_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109921 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96250;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100581;
    unsigned char *free_mem_100584;
    unsigned char *free_mem_100587;
};
struct futhark_mc_segmap_parloop_struct_109923 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96250;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100581;
    unsigned char *free_mem_100584;
    unsigned char *free_mem_100587;
};
static int futhark_mc_segmap_parloop_109924(void *args, int64_t start,
                                            int64_t end, int flat_tid_104504,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109923
    *futhark_mc_segmap_parloop_struct_109923 =
    (struct futhark_mc_segmap_parloop_struct_109923 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109923->ctx;
    uint64_t futhark_mc_segmap_parloop_109924_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109924_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109923->free_n_92399;
    int64_t gtid_96250 =
            futhark_mc_segmap_parloop_struct_109923->free_gtid_96250;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109923->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100581 = {.desc ="mem_100581", .mem =
                                  futhark_mc_segmap_parloop_struct_109923->free_mem_100581,
                                  .size =0, .references =NULL};
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_segmap_parloop_struct_109923->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_segmap_parloop_struct_109923->free_mem_100587,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104790 = start;
    
    for (; iter_104790 < end; iter_104790++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104793 = n_92399;
        int64_t gtid_104505 = iter_104790;
        int64_t remnant_104794 = iter_104790 - gtid_104505;
        double x_104506;
        
        x_104506 = ((double *) Y_mem_100186.mem)[gtid_96250 * n_92399 +
                                                 gtid_104505];
        
        bool isnan_res_104507;
        
        isnan_res_104507 = futrts_isnan64(x_104506);
        
        bool defunc_0_p_res_104508 = !isnan_res_104507;
        int64_t defunc_1_f_res_104509;
        
        if (defunc_0_p_res_104508) {
            int64_t x_104791;
            
            x_104791 = ((int64_t *) mem_100581.mem)[gtid_104505];
            
            int64_t defunc_1_f_res_t_res_104792 = sub64(x_104791, (int64_t) 1);
            
            defunc_1_f_res_104509 = defunc_1_f_res_t_res_104792;
        } else {
            defunc_1_f_res_104509 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_104509) &&
            slt64(defunc_1_f_res_104509, n_92399)) {
            ((int64_t *) mem_100587.mem)[defunc_1_f_res_104509] = gtid_104505;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_104509) &&
            slt64(defunc_1_f_res_104509, n_92399)) {
            ((double *) mem_100584.mem)[defunc_1_f_res_104509] = x_104506;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109924_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109924_end -
                 futhark_mc_segmap_parloop_109924_start;
        
        ctx->futhark_mc_segmap_parloop_109924_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109924_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109924_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109922(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104504 = tid;
    int num_tasks_104789 = info.nsubtasks;
    struct futhark_mc_task_109921 *futhark_mc_task_109921 =
                                  (struct futhark_mc_task_109921 *) args;
    struct futhark_context *ctx = futhark_mc_task_109921->ctx;
    uint64_t futhark_mc_segmap_task_109922_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109922_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109921->free_n_92399;
    int64_t gtid_96250 = futhark_mc_task_109921->free_gtid_96250;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109921->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100581 = {.desc ="mem_100581", .mem =
                                  futhark_mc_task_109921->free_mem_100581,
                                  .size =0, .references =NULL};
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_task_109921->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_task_109921->free_mem_100587,
                                  .size =0, .references =NULL};
    int64_t iter_104790;
    struct futhark_mc_segmap_parloop_struct_109923
    futhark_mc_segmap_parloop_struct_109923;
    
    futhark_mc_segmap_parloop_struct_109923.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109923.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109923.free_gtid_96250 = gtid_96250;
    futhark_mc_segmap_parloop_struct_109923.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109923.free_mem_100581 = mem_100581.mem;
    futhark_mc_segmap_parloop_struct_109923.free_mem_100584 = mem_100584.mem;
    futhark_mc_segmap_parloop_struct_109923.free_mem_100587 = mem_100587.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109924_task;
    
    futhark_mc_segmap_parloop_109924_task.name =
        "futhark_mc_segmap_parloop_109924";
    futhark_mc_segmap_parloop_109924_task.fn = futhark_mc_segmap_parloop_109924;
    futhark_mc_segmap_parloop_109924_task.args =
        &futhark_mc_segmap_parloop_struct_109923;
    futhark_mc_segmap_parloop_109924_task.iterations = iterations;
    futhark_mc_segmap_parloop_109924_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109924_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109924_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109924_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109924_task);
    
    if (futhark_mc_segmap_parloop_109924_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109924_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109924_total_end -
                 futhark_mc_segmap_parloop_109924_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109924_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109924_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109924_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109922_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109922_end -
                 futhark_mc_segmap_task_109922_start;
        
        ctx->futhark_mc_segmap_task_109922_runs[tid]++;
        ctx->futhark_mc_segmap_task_109922_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109922_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109925 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100590;
};
struct futhark_mc_segmap_parloop_struct_109927 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100590;
};
static int futhark_mc_segmap_parloop_109928(void *args, int64_t start,
                                            int64_t end, int flat_tid_104512,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109927
    *futhark_mc_segmap_parloop_struct_109927 =
    (struct futhark_mc_segmap_parloop_struct_109927 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109927->ctx;
    uint64_t futhark_mc_segmap_parloop_109928_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109928_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109927->free_n_92399;
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_segmap_parloop_struct_109927->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_segmap_parloop_struct_109927->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104796 = start;
    
    for (; iter_104796 < end; iter_104796++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104797 = n_92399;
        int64_t gtid_104513 = iter_104796;
        int64_t remnant_104798 = iter_104796 - gtid_104513;
        int64_t x_104514;
        
        x_104514 = ((int64_t *) mem_100587.mem)[gtid_104513];
        
        int64_t defunc_0_f_res_104515 = add64((int64_t) 1, x_104514);
        
        ((int64_t *) mem_100590.mem)[gtid_104513] = defunc_0_f_res_104515;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109928_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109928_end -
                 futhark_mc_segmap_parloop_109928_start;
        
        ctx->futhark_mc_segmap_parloop_109928_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109928_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109928_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109926(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104512 = tid;
    int num_tasks_104795 = info.nsubtasks;
    struct futhark_mc_task_109925 *futhark_mc_task_109925 =
                                  (struct futhark_mc_task_109925 *) args;
    struct futhark_context *ctx = futhark_mc_task_109925->ctx;
    uint64_t futhark_mc_segmap_task_109926_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109926_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109925->free_n_92399;
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_task_109925->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_task_109925->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t iter_104796;
    struct futhark_mc_segmap_parloop_struct_109927
    futhark_mc_segmap_parloop_struct_109927;
    
    futhark_mc_segmap_parloop_struct_109927.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109927.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109927.free_mem_100587 = mem_100587.mem;
    futhark_mc_segmap_parloop_struct_109927.free_mem_100590 = mem_100590.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109928_task;
    
    futhark_mc_segmap_parloop_109928_task.name =
        "futhark_mc_segmap_parloop_109928";
    futhark_mc_segmap_parloop_109928_task.fn = futhark_mc_segmap_parloop_109928;
    futhark_mc_segmap_parloop_109928_task.args =
        &futhark_mc_segmap_parloop_struct_109927;
    futhark_mc_segmap_parloop_109928_task.iterations = iterations;
    futhark_mc_segmap_parloop_109928_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109928_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109928_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109928_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109928_task);
    
    if (futhark_mc_segmap_parloop_109928_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109928_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109928_total_end -
                 futhark_mc_segmap_parloop_109928_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109928_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109928_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109928_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109926_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109926_end -
                 futhark_mc_segmap_task_109926_start;
        
        ctx->futhark_mc_segmap_task_109926_runs[tid]++;
        ctx->futhark_mc_segmap_task_109926_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109926_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109929 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100593;
};
struct futhark_mc_segmap_parloop_struct_109931 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100593;
};
static int futhark_mc_segmap_parloop_109932(void *args, int64_t start,
                                            int64_t end, int flat_tid_104516,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109931
    *futhark_mc_segmap_parloop_struct_109931 =
    (struct futhark_mc_segmap_parloop_struct_109931 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109931->ctx;
    uint64_t futhark_mc_segmap_parloop_109932_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109932_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109931->free_q_92401;
    int64_t last_res_96262 =
            futhark_mc_segmap_parloop_struct_109931->free_last_res_96262;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_segmap_parloop_struct_109931->free_mem_100593,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_104800 = start;
    
    for (; iter_104800 < end; iter_104800++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104801 = q_92401;
        int64_t gtid_104517 = iter_104800;
        int64_t remnant_104802 = iter_104800 - gtid_104517;
        bool cond_104518 = sle64(last_res_96262, gtid_104517);
        double defunc_0_f_res_104519;
        
        if (cond_104518) {
            defunc_0_f_res_104519 = 0.0;
        } else {
            defunc_0_f_res_104519 = 1.0;
        }
        ((double *) mem_100593.mem)[gtid_104517] = defunc_0_f_res_104519;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109932_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109932_end -
                 futhark_mc_segmap_parloop_109932_start;
        
        ctx->futhark_mc_segmap_parloop_109932_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109932_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109932_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109930(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104516 = tid;
    int num_tasks_104799 = info.nsubtasks;
    struct futhark_mc_task_109929 *futhark_mc_task_109929 =
                                  (struct futhark_mc_task_109929 *) args;
    struct futhark_context *ctx = futhark_mc_task_109929->ctx;
    uint64_t futhark_mc_segmap_task_109930_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109930_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_109929->free_q_92401;
    int64_t last_res_96262 = futhark_mc_task_109929->free_last_res_96262;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_task_109929->free_mem_100593,
                                  .size =0, .references =NULL};
    int64_t iter_104800;
    struct futhark_mc_segmap_parloop_struct_109931
    futhark_mc_segmap_parloop_struct_109931;
    
    futhark_mc_segmap_parloop_struct_109931.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109931.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109931.free_last_res_96262 =
        last_res_96262;
    futhark_mc_segmap_parloop_struct_109931.free_mem_100593 = mem_100593.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109932_task;
    
    futhark_mc_segmap_parloop_109932_task.name =
        "futhark_mc_segmap_parloop_109932";
    futhark_mc_segmap_parloop_109932_task.fn = futhark_mc_segmap_parloop_109932;
    futhark_mc_segmap_parloop_109932_task.args =
        &futhark_mc_segmap_parloop_struct_109931;
    futhark_mc_segmap_parloop_109932_task.iterations = iterations;
    futhark_mc_segmap_parloop_109932_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109932_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109932_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109932_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109932_task);
    
    if (futhark_mc_segmap_parloop_109932_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109932_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109932_total_end -
                 futhark_mc_segmap_parloop_109932_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109932_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109932_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109932_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109930_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109930_end -
                 futhark_mc_segmap_task_109930_start;
        
        ctx->futhark_mc_segmap_task_109930_runs[tid]++;
        ctx->futhark_mc_segmap_task_109930_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109930_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109933 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96262;
    int64_t free_min_arg_96281;
    int64_t free_min_arg_96282;
    int64_t free_min_res_96283;
    double free_max_res_96287;
    unsigned char *free_mem_100584;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100590;
    int64_t free_bytes_100592;
    unsigned char *free_mem_100593;
    unsigned char *free_mem_100614;
};
struct futhark_mc_segmap_parloop_struct_109935 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96262;
    int64_t free_min_arg_96281;
    int64_t free_min_arg_96282;
    int64_t free_min_res_96283;
    double free_max_res_96287;
    unsigned char *free_mem_100584;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100590;
    int64_t free_bytes_100592;
    unsigned char *free_mem_100593;
    unsigned char *free_mem_100614;
};
static int futhark_mc_segmap_parloop_109936(void *args, int64_t start,
                                            int64_t end, int flat_tid_104646,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109935
    *futhark_mc_segmap_parloop_struct_109935 =
    (struct futhark_mc_segmap_parloop_struct_109935 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109935->ctx;
    uint64_t futhark_mc_segmap_parloop_109936_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109936_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109935->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109935->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109935->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109935->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109935->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109935->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109935->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109935->free_loop_cond_92426;
    int64_t last_res_96262 =
            futhark_mc_segmap_parloop_struct_109935->free_last_res_96262;
    int64_t min_arg_96281 =
            futhark_mc_segmap_parloop_struct_109935->free_min_arg_96281;
    int64_t min_arg_96282 =
            futhark_mc_segmap_parloop_struct_109935->free_min_arg_96282;
    int64_t min_res_96283 =
            futhark_mc_segmap_parloop_struct_109935->free_min_res_96283;
    double max_res_96287 =
           futhark_mc_segmap_parloop_struct_109935->free_max_res_96287;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_segmap_parloop_struct_109935->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_segmap_parloop_struct_109935->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_segmap_parloop_struct_109935->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t bytes_100592 =
            futhark_mc_segmap_parloop_struct_109935->free_bytes_100592;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_segmap_parloop_struct_109935->free_mem_100593,
                                  .size =0, .references =NULL};
    struct memblock mem_100614 = {.desc ="mem_100614", .mem =
                                  futhark_mc_segmap_parloop_struct_109935->free_mem_100614,
                                  .size =0, .references =NULL};
    size_t mem_104734_cached_sizze_109937 = 0;
    unsigned char *mem_104734 = NULL;
    int64_t iterations = end - start;
    int64_t iter_104804 = start;
    
    if (mem_104734_cached_sizze_109937 < (size_t) bytes_100592) {
        mem_104734 = realloc(mem_104734, bytes_100592);
        mem_104734_cached_sizze_109937 = bytes_100592;
    }
    for (; iter_104804 < end; iter_104804++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104891 = n_m_92409;
        int64_t gtid_104647 = iter_104804;
        int64_t remnant_104892 = iter_104804 - gtid_104647;
        int64_t min_arg_104648 = mul64(jump_92403, gtid_104647);
        int64_t min_res_104649 = smin64(i_92415, min_arg_104648);
        int64_t defunc_0_g_res_104650 = add64((int64_t) 1, min_res_104649);
        bool init_idx_104651;
        int64_t init_idx_104652;
        int64_t init_idx_104653;
        bool loop_while_104805;
        int64_t low_104806;
        int64_t high_104807;
        
        loop_while_104805 = x_92416;
        low_104806 = (int64_t) 0;
        high_104807 = i_92415;
        while (loop_while_104805) {
            int64_t x_104808 = add64(low_104806, high_104807);
            int64_t mid_104809 = sdiv64(x_104808, (int64_t) 2);
            bool x_104810 = sle64((int64_t) 0, mid_104809);
            bool y_104811 = slt64(mid_104809, n_92399);
            bool bounds_check_104812 = x_104810 && y_104811;
            bool index_certs_104813;
            
            if (!bounds_check_104812) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_104809,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_104814;
            
            mid_id_104814 = ((int64_t *) mem_100590.mem)[mid_104809];
            
            bool cond_104815 = slt64(mid_id_104814, (int64_t) 0);
            int64_t mid_idx_104816;
            
            if (cond_104815) {
                mid_idx_104816 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_104816 = mid_id_104814;
            }
            
            bool cond_104817 = sle64(defunc_0_g_res_104650, mid_idx_104816);
            int64_t loopres_104818;
            int64_t loopres_104819;
            
            if (cond_104817) {
                int64_t loopres_t_res_104820 = sub64(mid_104809, (int64_t) 1);
                
                loopres_104818 = low_104806;
                loopres_104819 = loopres_t_res_104820;
            } else {
                int64_t loopres_f_res_104821 = add64((int64_t) 1, mid_104809);
                
                loopres_104818 = loopres_f_res_104821;
                loopres_104819 = high_104807;
            }
            
            bool loop_cond_104822 = sle64(loopres_104818, loopres_104819);
            bool loop_while_tmp_104893 = loop_cond_104822;
            int64_t low_tmp_104894 = loopres_104818;
            int64_t high_tmp_104895 = loopres_104819;
            
            loop_while_104805 = loop_while_tmp_104893;
            low_104806 = low_tmp_104894;
            high_104807 = high_tmp_104895;
        }
        init_idx_104651 = loop_while_104805;
        init_idx_104652 = low_104806;
        init_idx_104653 = high_104807;
        
        bool idx_104672;
        int64_t idx_104673;
        int64_t idx_104674;
        int64_t idx_104675;
        bool loop_while_104823;
        int64_t l_idx_104824;
        int64_t r_idx_104825;
        int64_t span_104826;
        
        loop_while_104823 = loop_cond_92426;
        l_idx_104824 = init_idx_104652;
        r_idx_104825 = init_idx_104652;
        span_104826 = (int64_t) 1;
        while (loop_while_104823) {
            int64_t max_arg_104827 = sub64(l_idx_104824, (int64_t) 1);
            int64_t max_res_104828 = smax64((int64_t) 0, max_arg_104827);
            int64_t min_arg_104829 = add64((int64_t) 1, r_idx_104825);
            int64_t min_res_104830 = smin64(min_arg_96281, min_arg_104829);
            bool x_104831 = sle64((int64_t) 0, max_res_104828);
            bool y_104832 = slt64(max_res_104828, n_92399);
            bool bounds_check_104833 = x_104831 && y_104832;
            bool index_certs_104834;
            
            if (!bounds_check_104833) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_104828,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104835;
            
            x_104835 = ((int64_t *) mem_100590.mem)[max_res_104828];
            
            int64_t abs_arg_104836 = sub64(x_104835, defunc_0_g_res_104650);
            int64_t abs_res_104837 = abs64(abs_arg_104836);
            bool x_104838 = sle64((int64_t) 0, min_res_104830);
            bool y_104839 = slt64(min_res_104830, n_92399);
            bool bounds_check_104840 = x_104838 && y_104839;
            bool index_certs_104841;
            
            if (!bounds_check_104840) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_104830,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104842;
            
            x_104842 = ((int64_t *) mem_100590.mem)[min_res_104830];
            
            int64_t abs_arg_104843 = sub64(x_104842, defunc_0_g_res_104650);
            int64_t abs_res_104844 = abs64(abs_arg_104843);
            bool cond_104845 = max_res_104828 == l_idx_104824;
            int64_t loopres_104846;
            int64_t loopres_104847;
            int64_t loopres_104848;
            
            if (cond_104845) {
                loopres_104846 = l_idx_104824;
                loopres_104847 = r_idx_104825;
                loopres_104848 = min_res_92421;
            } else {
                bool cond_104849 = slt64(abs_res_104837, abs_res_104844);
                bool cond_f_res_104850 = min_res_104830 == r_idx_104825;
                bool x_104851 = !cond_104849;
                bool y_104852 = cond_f_res_104850 && x_104851;
                bool cond_104853 = cond_104849 || y_104852;
                int64_t loopres_f_res_104854;
                
                if (cond_104853) {
                    loopres_f_res_104854 = max_res_104828;
                } else {
                    loopres_f_res_104854 = l_idx_104824;
                }
                
                int64_t loopres_f_res_104855;
                
                if (cond_104853) {
                    loopres_f_res_104855 = r_idx_104825;
                } else {
                    loopres_f_res_104855 = min_res_104830;
                }
                
                int64_t loopres_f_res_104856;
                
                if (cond_104853) {
                    int64_t loopres_f_res_t_res_104857 = add64((int64_t) 1,
                                                               span_104826);
                    
                    loopres_f_res_104856 = loopres_f_res_t_res_104857;
                } else {
                    int64_t loopres_f_res_f_res_104858 = add64((int64_t) 1,
                                                               span_104826);
                    
                    loopres_f_res_104856 = loopres_f_res_f_res_104858;
                }
                loopres_104846 = loopres_f_res_104854;
                loopres_104847 = loopres_f_res_104855;
                loopres_104848 = loopres_f_res_104856;
            }
            
            bool loop_cond_104859 = slt64(loopres_104848, min_res_92421);
            bool loop_while_tmp_104896 = loop_cond_104859;
            int64_t l_idx_tmp_104897 = loopres_104846;
            int64_t r_idx_tmp_104898 = loopres_104847;
            int64_t span_tmp_104899 = loopres_104848;
            
            loop_while_104823 = loop_while_tmp_104896;
            l_idx_104824 = l_idx_tmp_104897;
            r_idx_104825 = r_idx_tmp_104898;
            span_104826 = span_tmp_104899;
        }
        idx_104672 = loop_while_104823;
        idx_104673 = l_idx_104824;
        idx_104674 = r_idx_104825;
        idx_104675 = span_104826;
        
        int64_t min_res_104713 = smin64(min_arg_96282, idx_104673);
        int64_t max_res_104714 = smax64((int64_t) 0, min_res_104713);
        int64_t x_104715 = add64(min_res_96283, max_res_104714);
        int64_t r_104716 = sub64(x_104715, (int64_t) 1);
        bool x_104717 = sle64((int64_t) 0, r_104716);
        bool y_104718 = slt64(r_104716, n_92399);
        bool bounds_check_104719 = x_104717 && y_104718;
        bool index_certs_104720;
        
        if (!bounds_check_104719) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_104716,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_104721;
        
        x_104721 = ((int64_t *) mem_100587.mem)[r_104716];
        
        int64_t abs_arg_104722 = sub64(x_104721, min_res_104649);
        int64_t abs_res_104723 = abs64(abs_arg_104722);
        bool x_104724 = sle64((int64_t) 0, max_res_104714);
        bool y_104725 = slt64(max_res_104714, n_92399);
        bool bounds_check_104726 = x_104724 && y_104725;
        bool index_certs_104727;
        
        if (!bounds_check_104726) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_104714,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_104728;
        
        x_104728 = ((int64_t *) mem_100587.mem)[max_res_104714];
        
        int64_t abs_arg_104729 = sub64(x_104728, min_res_104649);
        int64_t abs_res_104730 = abs64(abs_arg_104729);
        int64_t max_res_104731 = smax64(abs_res_104723, abs_res_104730);
        double defunc_0_f_res_104732 = sitofp_i64_f64(max_res_104731);
        double defunc_1_f_res_104733 = max_res_96287 + defunc_0_f_res_104732;
        double defunc_2_reduce_res_104736;
        double redout_104861 = 0.0;
        
        for (int64_t i_104860 = 0; i_104860 < q_92401; i_104860++) {
            double x_104863;
            
            x_104863 = ((double *) mem_100593.mem)[i_104860];
            
            bool cond_104864 = sle64(last_res_96262, i_104860);
            int64_t defunc_0_f_res_104865;
            
            if (cond_104864) {
                defunc_0_f_res_104865 = (int64_t) 0;
            } else {
                int64_t i_104866 = add64(max_res_104714, i_104860);
                int64_t defunc_0_add_arg_104867;
                
                defunc_0_add_arg_104867 =
                    ((int64_t *) mem_100587.mem)[i_104866];
                
                int64_t defunc_1_add_res_104868 = add64((int64_t) 1,
                                                        defunc_0_add_arg_104867);
                
                defunc_0_f_res_104865 = defunc_1_add_res_104868;
            }
            
            int64_t binop_p_104869 = sub64(defunc_0_f_res_104865,
                                           min_res_104649);
            double defunc_0_f_res_104870 = sitofp_i64_f64(binop_p_104869);
            double abs_res_104871 = fabs(defunc_0_f_res_104870);
            double tmp1_104872 = abs_res_104871 / defunc_1_f_res_104733;
            double x_104873 = tmp1_104872 * tmp1_104872;
            double y_104874 = tmp1_104872 * x_104873;
            double tmp2_104875 = 1.0 - y_104874;
            double x_104876 = tmp2_104875 * tmp2_104875;
            double tmp3_104877 = tmp2_104875 * x_104876;
            double tmp4_104878 = x_104863 * tmp3_104877;
            double defunc_1_op_res_104879 = tmp4_104878 + redout_104861;
            
            ((double *) mem_104734)[i_104860] = tmp4_104878;
            
            double redout_tmp_104900 = defunc_1_op_res_104879;
            
            redout_104861 = redout_tmp_104900;
        }
        defunc_2_reduce_res_104736 = redout_104861;
        
        double a0_104759 = 1.0 / defunc_2_reduce_res_104736;
        double defunc_2_reduce_res_104760;
        double redout_104882 = 0.0;
        
        for (int64_t i_104881 = 0; i_104881 < q_92401; i_104881++) {
            double x_104883;
            
            x_104883 = ((double *) mem_104734)[i_104881];
            
            bool cond_104884 = sle64(last_res_96262, i_104881);
            double defunc_0_f_res_104885;
            
            if (cond_104884) {
                defunc_0_f_res_104885 = 0.0;
            } else {
                int64_t i_104886 = add64(max_res_104714, i_104881);
                double defunc_0_add_arg_104887;
                
                defunc_0_add_arg_104887 = ((double *) mem_100584.mem)[i_104886];
                defunc_0_f_res_104885 = defunc_0_add_arg_104887;
            }
            
            double x_104888 = a0_104759 * x_104883;
            double defunc_9_fit_fun_res_104889 = defunc_0_f_res_104885 *
                   x_104888;
            double defunc_1_op_res_104890 = defunc_9_fit_fun_res_104889 +
                   redout_104882;
            double redout_tmp_104902 = defunc_1_op_res_104890;
            
            redout_104882 = redout_tmp_104902;
        }
        defunc_2_reduce_res_104760 = redout_104882;
        ((double *) mem_100614.mem)[gtid_104647] = defunc_2_reduce_res_104760;
    }
    
  cleanup:
    { }
    free(mem_104734);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109936_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109936_end -
                 futhark_mc_segmap_parloop_109936_start;
        
        ctx->futhark_mc_segmap_parloop_109936_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109936_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109936_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109934(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104646 = tid;
    int num_tasks_104803 = info.nsubtasks;
    struct futhark_mc_task_109933 *futhark_mc_task_109933 =
                                  (struct futhark_mc_task_109933 *) args;
    struct futhark_context *ctx = futhark_mc_task_109933->ctx;
    uint64_t futhark_mc_segmap_task_109934_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109934_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109933->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109933->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109933->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109933->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109933->free_i_92415;
    bool x_92416 = futhark_mc_task_109933->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109933->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109933->free_loop_cond_92426;
    int64_t last_res_96262 = futhark_mc_task_109933->free_last_res_96262;
    int64_t min_arg_96281 = futhark_mc_task_109933->free_min_arg_96281;
    int64_t min_arg_96282 = futhark_mc_task_109933->free_min_arg_96282;
    int64_t min_res_96283 = futhark_mc_task_109933->free_min_res_96283;
    double max_res_96287 = futhark_mc_task_109933->free_max_res_96287;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_task_109933->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_task_109933->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_task_109933->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t bytes_100592 = futhark_mc_task_109933->free_bytes_100592;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_task_109933->free_mem_100593,
                                  .size =0, .references =NULL};
    struct memblock mem_100614 = {.desc ="mem_100614", .mem =
                                  futhark_mc_task_109933->free_mem_100614,
                                  .size =0, .references =NULL};
    int64_t iter_104804;
    struct futhark_mc_segmap_parloop_struct_109935
    futhark_mc_segmap_parloop_struct_109935;
    
    futhark_mc_segmap_parloop_struct_109935.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109935.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109935.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109935.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109935.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109935.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109935.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109935.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109935.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109935.free_last_res_96262 =
        last_res_96262;
    futhark_mc_segmap_parloop_struct_109935.free_min_arg_96281 = min_arg_96281;
    futhark_mc_segmap_parloop_struct_109935.free_min_arg_96282 = min_arg_96282;
    futhark_mc_segmap_parloop_struct_109935.free_min_res_96283 = min_res_96283;
    futhark_mc_segmap_parloop_struct_109935.free_max_res_96287 = max_res_96287;
    futhark_mc_segmap_parloop_struct_109935.free_mem_100584 = mem_100584.mem;
    futhark_mc_segmap_parloop_struct_109935.free_mem_100587 = mem_100587.mem;
    futhark_mc_segmap_parloop_struct_109935.free_mem_100590 = mem_100590.mem;
    futhark_mc_segmap_parloop_struct_109935.free_bytes_100592 = bytes_100592;
    futhark_mc_segmap_parloop_struct_109935.free_mem_100593 = mem_100593.mem;
    futhark_mc_segmap_parloop_struct_109935.free_mem_100614 = mem_100614.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109936_task;
    
    futhark_mc_segmap_parloop_109936_task.name =
        "futhark_mc_segmap_parloop_109936";
    futhark_mc_segmap_parloop_109936_task.fn = futhark_mc_segmap_parloop_109936;
    futhark_mc_segmap_parloop_109936_task.args =
        &futhark_mc_segmap_parloop_struct_109935;
    futhark_mc_segmap_parloop_109936_task.iterations = iterations;
    futhark_mc_segmap_parloop_109936_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109936_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109936_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109936_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109936_task);
    
    if (futhark_mc_segmap_parloop_109936_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109936_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109936_total_end -
                 futhark_mc_segmap_parloop_109936_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109936_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109936_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109936_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109934_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109934_end -
                 futhark_mc_segmap_task_109934_start;
        
        ctx->futhark_mc_segmap_task_109934_runs[tid]++;
        ctx->futhark_mc_segmap_task_109934_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109934_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109939 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96262;
    int64_t free_min_arg_96281;
    int64_t free_min_arg_96282;
    int64_t free_min_res_96283;
    double free_max_res_96287;
    unsigned char *free_mem_100584;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100590;
    int64_t free_bytes_100592;
    unsigned char *free_mem_100593;
    unsigned char *free_mem_100614;
};
struct futhark_mc_task_109942 {
    struct futhark_context *ctx;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100593;
    int64_t free_min_res_104523;
    int64_t free_max_res_104588;
    double free_defunc_1_f_res_104607;
    double *retval_defunc_2_reduce_res_104609;
    unsigned char *retval_mem_104608;
};
struct futhark_mc_segred_stage_1_parloop_struct_109945 {
    struct futhark_context *ctx;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100587;
    unsigned char *free_mem_100593;
    int64_t free_min_res_104523;
    int64_t free_max_res_104588;
    double free_defunc_1_f_res_104607;
    unsigned char *free_mem_104608;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105002;
};
static int futhark_mc_segred_stage_1_parloop_109946(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_104959,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109945
    *futhark_mc_segred_stage_1_parloop_struct_109945 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109945 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109945->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109946_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109946_start = get_wall_time();
    
    int64_t last_res_96262 =
            futhark_mc_segred_stage_1_parloop_struct_109945->free_last_res_96262;
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109945->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109945->free_mem_100593,
                                  .size =0, .references =NULL};
    int64_t min_res_104523 =
            futhark_mc_segred_stage_1_parloop_struct_109945->free_min_res_104523;
    int64_t max_res_104588 =
            futhark_mc_segred_stage_1_parloop_struct_109945->free_max_res_104588;
    double defunc_1_f_res_104607 =
           futhark_mc_segred_stage_1_parloop_struct_109945->free_defunc_1_f_res_104607;
    struct memblock mem_104608 = {.desc ="mem_104608", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109945->free_mem_104608,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_105002 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105002",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109945->free_reduce_stage_1_tid_res_arr_mem_105002,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105004 = start;
    double x_104961;
    double x_104962;
    double local_acc_105005 = 0.0;
    
    for (; iter_105004 < end; iter_105004++) {
        int64_t gtid_104960 = iter_105004;
        double x_104964;
        
        x_104964 = ((double *) mem_100593.mem)[gtid_104960];
        
        bool cond_104965 = sle64(last_res_96262, gtid_104960);
        int64_t defunc_0_f_res_104966;
        
        if (cond_104965) {
            defunc_0_f_res_104966 = (int64_t) 0;
        } else {
            int64_t i_104967 = add64(max_res_104588, gtid_104960);
            int64_t defunc_0_add_arg_104968;
            
            defunc_0_add_arg_104968 = ((int64_t *) mem_100587.mem)[i_104967];
            
            int64_t defunc_1_add_res_104969 = add64((int64_t) 1,
                                                    defunc_0_add_arg_104968);
            
            defunc_0_f_res_104966 = defunc_1_add_res_104969;
        }
        
        int64_t binop_p_104970 = sub64(defunc_0_f_res_104966, min_res_104523);
        double defunc_0_f_res_104971 = sitofp_i64_f64(binop_p_104970);
        double abs_res_104972 = fabs(defunc_0_f_res_104971);
        double tmp1_104973 = abs_res_104972 / defunc_1_f_res_104607;
        double x_104974 = tmp1_104973 * tmp1_104973;
        double y_104975 = tmp1_104973 * x_104974;
        double tmp2_104976 = 1.0 - y_104975;
        double x_104977 = tmp2_104976 * tmp2_104976;
        double tmp3_104978 = tmp2_104976 * x_104977;
        double tmp4_104979 = x_104964 * tmp3_104978;
        
        // save map-out results
        {
            ((double *) mem_104608.mem)[gtid_104960] = tmp4_104979;
        }
        // Load accum params
        {
            x_104961 = local_acc_105005;
        }
        // Load next params
        {
            x_104962 = tmp4_104979;
        }
        // Red body
        {
            double defunc_1_op_res_104963 = x_104961 + x_104962;
            
            local_acc_105005 = defunc_1_op_res_104963;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_105002.mem)[flat_tid_104959] =
        local_acc_105005;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109946_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109946_end -
                 futhark_mc_segred_stage_1_parloop_109946_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109946_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109946_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109946_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109943(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104959 = tid;
    int num_tasks_105001 = info.nsubtasks;
    struct futhark_mc_task_109942 *futhark_mc_task_109942 =
                                  (struct futhark_mc_task_109942 *) args;
    struct futhark_context *ctx = futhark_mc_task_109942->ctx;
    uint64_t futhark_mc_segred_task_109943_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109943_start = get_wall_time();
    
    int64_t last_res_96262 = futhark_mc_task_109942->free_last_res_96262;
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_task_109942->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_task_109942->free_mem_100593,
                                  .size =0, .references =NULL};
    int64_t min_res_104523 = futhark_mc_task_109942->free_min_res_104523;
    int64_t max_res_104588 = futhark_mc_task_109942->free_max_res_104588;
    double defunc_1_f_res_104607 =
           futhark_mc_task_109942->free_defunc_1_f_res_104607;
    double defunc_2_reduce_res_104609 =
           *futhark_mc_task_109942->retval_defunc_2_reduce_res_104609;
    struct memblock mem_104608 = {.desc ="mem_104608", .mem =
                                  futhark_mc_task_109942->retval_mem_104608,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_105002_cached_sizze_109944 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105002 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_105002_cached_sizze_109944 <
        (size_t) ((int64_t) 8 * num_tasks_105001)) {
        reduce_stage_1_tid_res_arr_mem_105002 =
            realloc(reduce_stage_1_tid_res_arr_mem_105002, (int64_t) 8 *
                    num_tasks_105001);
        reduce_stage_1_tid_res_arr_mem_105002_cached_sizze_109944 =
            (int64_t) 8 * num_tasks_105001;
    }
    
    int64_t iter_105004;
    struct futhark_mc_segred_stage_1_parloop_struct_109945
    futhark_mc_segred_stage_1_parloop_struct_109945;
    
    futhark_mc_segred_stage_1_parloop_struct_109945.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_last_res_96262 =
        last_res_96262;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_mem_100587 =
        mem_100587.mem;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_mem_100593 =
        mem_100593.mem;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_min_res_104523 =
        min_res_104523;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_max_res_104588 =
        max_res_104588;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_defunc_1_f_res_104607 =
        defunc_1_f_res_104607;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_mem_104608 =
        mem_104608.mem;
    futhark_mc_segred_stage_1_parloop_struct_109945.free_reduce_stage_1_tid_res_arr_mem_105002 =
        reduce_stage_1_tid_res_arr_mem_105002;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109946_task;
    
    futhark_mc_segred_stage_1_parloop_109946_task.name =
        "futhark_mc_segred_stage_1_parloop_109946";
    futhark_mc_segred_stage_1_parloop_109946_task.fn =
        futhark_mc_segred_stage_1_parloop_109946;
    futhark_mc_segred_stage_1_parloop_109946_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109945;
    futhark_mc_segred_stage_1_parloop_109946_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109946_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109946_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109946_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109946_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109946_task);
    
    if (futhark_mc_segred_stage_1_parloop_109946_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109946_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109946_total_end -
                 futhark_mc_segred_stage_1_parloop_109946_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109946_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109946_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109946_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_104609 = 0.0;
    }
    
    double x_105006;
    double x_105007;
    
    for (int32_t i_105009 = 0; i_105009 < num_tasks_105001; i_105009++) {
        flat_tid_104959 = i_105009;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_105006 = defunc_2_reduce_res_104609;
            }
            // load next params
            {
                x_105007 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105002)[flat_tid_104959];
            }
            // red body
            {
                double defunc_1_op_res_105008 = x_105006 + x_105007;
                
                defunc_2_reduce_res_104609 = defunc_1_op_res_105008;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_105002);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109943_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109943_end -
                 futhark_mc_segred_task_109943_start;
        
        ctx->futhark_mc_segred_task_109943_runs[tid]++;
        ctx->futhark_mc_segred_task_109943_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109943_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109942->retval_defunc_2_reduce_res_104609 =
            defunc_2_reduce_res_104609;
        futhark_mc_task_109942->retval_mem_104608 = mem_104608.mem;
    }
    return err;
}
struct futhark_mc_task_109947 {
    struct futhark_context *ctx;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100584;
    int64_t free_max_res_104588;
    unsigned char *free_mem_104608;
    double free_a0_104632;
    double *retval_defunc_2_reduce_res_104633;
};
struct futhark_mc_segred_stage_1_parloop_struct_109950 {
    struct futhark_context *ctx;
    int64_t free_last_res_96262;
    unsigned char *free_mem_100584;
    int64_t free_max_res_104588;
    unsigned char *free_mem_104608;
    double free_a0_104632;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105011;
};
static int futhark_mc_segred_stage_1_parloop_109951(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_104980,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_109950
    *futhark_mc_segred_stage_1_parloop_struct_109950 =
    (struct futhark_mc_segred_stage_1_parloop_struct_109950 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_109950->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_109951_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109951_start = get_wall_time();
    
    int64_t last_res_96262 =
            futhark_mc_segred_stage_1_parloop_struct_109950->free_last_res_96262;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109950->free_mem_100584,
                                  .size =0, .references =NULL};
    int64_t max_res_104588 =
            futhark_mc_segred_stage_1_parloop_struct_109950->free_max_res_104588;
    struct memblock mem_104608 = {.desc ="mem_104608", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_109950->free_mem_104608,
                                  .size =0, .references =NULL};
    double a0_104632 =
           futhark_mc_segred_stage_1_parloop_struct_109950->free_a0_104632;
    struct memblock reduce_stage_1_tid_res_arr_mem_105011 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105011",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_109950->free_reduce_stage_1_tid_res_arr_mem_105011,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105013 = start;
    double x_104982;
    double x_104983;
    double local_acc_105014 = 0.0;
    
    for (; iter_105013 < end; iter_105013++) {
        int64_t gtid_104981 = iter_105013;
        double x_104985;
        
        x_104985 = ((double *) mem_104608.mem)[gtid_104981];
        
        bool cond_104986 = sle64(last_res_96262, gtid_104981);
        double defunc_0_f_res_104987;
        
        if (cond_104986) {
            defunc_0_f_res_104987 = 0.0;
        } else {
            int64_t i_104988 = add64(max_res_104588, gtid_104981);
            double defunc_0_add_arg_104989;
            
            defunc_0_add_arg_104989 = ((double *) mem_100584.mem)[i_104988];
            defunc_0_f_res_104987 = defunc_0_add_arg_104989;
        }
        
        double x_104990 = a0_104632 * x_104985;
        double defunc_9_fit_fun_res_104991 = defunc_0_f_res_104987 * x_104990;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_104982 = local_acc_105014;
        }
        // Load next params
        {
            x_104983 = defunc_9_fit_fun_res_104991;
        }
        // Red body
        {
            double defunc_1_op_res_104984 = x_104982 + x_104983;
            
            local_acc_105014 = defunc_1_op_res_104984;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_105011.mem)[flat_tid_104980] =
        local_acc_105014;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109951_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109951_end -
                 futhark_mc_segred_stage_1_parloop_109951_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_109951_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_109951_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_109951_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_109948(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104980 = tid;
    int num_tasks_105010 = info.nsubtasks;
    struct futhark_mc_task_109947 *futhark_mc_task_109947 =
                                  (struct futhark_mc_task_109947 *) args;
    struct futhark_context *ctx = futhark_mc_task_109947->ctx;
    uint64_t futhark_mc_segred_task_109948_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_109948_start = get_wall_time();
    
    int64_t last_res_96262 = futhark_mc_task_109947->free_last_res_96262;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_task_109947->free_mem_100584,
                                  .size =0, .references =NULL};
    int64_t max_res_104588 = futhark_mc_task_109947->free_max_res_104588;
    struct memblock mem_104608 = {.desc ="mem_104608", .mem =
                                  futhark_mc_task_109947->free_mem_104608,
                                  .size =0, .references =NULL};
    double a0_104632 = futhark_mc_task_109947->free_a0_104632;
    double defunc_2_reduce_res_104633 =
           *futhark_mc_task_109947->retval_defunc_2_reduce_res_104633;
    size_t reduce_stage_1_tid_res_arr_mem_105011_cached_sizze_109949 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105011 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_105011_cached_sizze_109949 <
        (size_t) ((int64_t) 8 * num_tasks_105010)) {
        reduce_stage_1_tid_res_arr_mem_105011 =
            realloc(reduce_stage_1_tid_res_arr_mem_105011, (int64_t) 8 *
                    num_tasks_105010);
        reduce_stage_1_tid_res_arr_mem_105011_cached_sizze_109949 =
            (int64_t) 8 * num_tasks_105010;
    }
    
    int64_t iter_105013;
    struct futhark_mc_segred_stage_1_parloop_struct_109950
    futhark_mc_segred_stage_1_parloop_struct_109950;
    
    futhark_mc_segred_stage_1_parloop_struct_109950.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_last_res_96262 =
        last_res_96262;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_mem_100584 =
        mem_100584.mem;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_max_res_104588 =
        max_res_104588;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_mem_104608 =
        mem_104608.mem;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_a0_104632 = a0_104632;
    futhark_mc_segred_stage_1_parloop_struct_109950.free_reduce_stage_1_tid_res_arr_mem_105011 =
        reduce_stage_1_tid_res_arr_mem_105011;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_109951_task;
    
    futhark_mc_segred_stage_1_parloop_109951_task.name =
        "futhark_mc_segred_stage_1_parloop_109951";
    futhark_mc_segred_stage_1_parloop_109951_task.fn =
        futhark_mc_segred_stage_1_parloop_109951;
    futhark_mc_segred_stage_1_parloop_109951_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_109950;
    futhark_mc_segred_stage_1_parloop_109951_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_109951_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_109951_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_109951_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_109951_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_109951_task);
    
    if (futhark_mc_segred_stage_1_parloop_109951_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_109951_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_109951_total_end -
                 futhark_mc_segred_stage_1_parloop_109951_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109951_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109951_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_109951_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_104633 = 0.0;
    }
    
    double x_105015;
    double x_105016;
    
    for (int32_t i_105018 = 0; i_105018 < num_tasks_105010; i_105018++) {
        flat_tid_104980 = i_105018;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_105015 = defunc_2_reduce_res_104633;
            }
            // load next params
            {
                x_105016 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105011)[flat_tid_104980];
            }
            // red body
            {
                double defunc_1_op_res_105017 = x_105015 + x_105016;
                
                defunc_2_reduce_res_104633 = defunc_1_op_res_105017;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_105011);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_109948_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_109948_end -
                 futhark_mc_segred_task_109948_start;
        
        ctx->futhark_mc_segred_task_109948_runs[tid]++;
        ctx->futhark_mc_segred_task_109948_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_109948_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_109947->retval_defunc_2_reduce_res_104633 =
            defunc_2_reduce_res_104633;
    }
    return err;
}
static int futhark_mc_segmap_parloop_109940(void *args, int64_t start,
                                            int64_t end, int flat_tid_104520,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109939
    *futhark_mc_segmap_parloop_struct_109939 =
    (struct futhark_mc_segmap_parloop_struct_109939 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109939->ctx;
    uint64_t futhark_mc_segmap_parloop_109940_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109940_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109939->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109939->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109939->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109939->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109939->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109939->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109939->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109939->free_loop_cond_92426;
    int64_t last_res_96262 =
            futhark_mc_segmap_parloop_struct_109939->free_last_res_96262;
    int64_t min_arg_96281 =
            futhark_mc_segmap_parloop_struct_109939->free_min_arg_96281;
    int64_t min_arg_96282 =
            futhark_mc_segmap_parloop_struct_109939->free_min_arg_96282;
    int64_t min_res_96283 =
            futhark_mc_segmap_parloop_struct_109939->free_min_res_96283;
    double max_res_96287 =
           futhark_mc_segmap_parloop_struct_109939->free_max_res_96287;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_segmap_parloop_struct_109939->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_segmap_parloop_struct_109939->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_segmap_parloop_struct_109939->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t bytes_100592 =
            futhark_mc_segmap_parloop_struct_109939->free_bytes_100592;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_segmap_parloop_struct_109939->free_mem_100593,
                                  .size =0, .references =NULL};
    struct memblock mem_100614 = {.desc ="mem_100614", .mem =
                                  futhark_mc_segmap_parloop_struct_109939->free_mem_100614,
                                  .size =0, .references =NULL};
    size_t mem_104608_cached_sizze_109941 = 0;
    unsigned char *mem_104608 = NULL;
    int64_t iterations = end - start;
    int64_t iter_104903 = start;
    
    if (mem_104608_cached_sizze_109941 < (size_t) bytes_100592) {
        mem_104608 = realloc(mem_104608, bytes_100592);
        mem_104608_cached_sizze_109941 = bytes_100592;
    }
    for (; iter_104903 < end; iter_104903++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104992 = n_m_92409;
        int64_t gtid_104521 = iter_104903;
        int64_t remnant_104993 = iter_104903 - gtid_104521;
        int64_t min_arg_104522 = mul64(jump_92403, gtid_104521);
        int64_t min_res_104523 = smin64(i_92415, min_arg_104522);
        int64_t defunc_0_g_res_104524 = add64((int64_t) 1, min_res_104523);
        bool init_idx_104525;
        int64_t init_idx_104526;
        int64_t init_idx_104527;
        bool loop_while_104904;
        int64_t low_104905;
        int64_t high_104906;
        
        loop_while_104904 = x_92416;
        low_104905 = (int64_t) 0;
        high_104906 = i_92415;
        while (loop_while_104904) {
            int64_t x_104907 = add64(low_104905, high_104906);
            int64_t mid_104908 = sdiv64(x_104907, (int64_t) 2);
            bool x_104909 = sle64((int64_t) 0, mid_104908);
            bool y_104910 = slt64(mid_104908, n_92399);
            bool bounds_check_104911 = x_104909 && y_104910;
            bool index_certs_104912;
            
            if (!bounds_check_104911) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_104908,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_104913;
            
            mid_id_104913 = ((int64_t *) mem_100590.mem)[mid_104908];
            
            bool cond_104914 = slt64(mid_id_104913, (int64_t) 0);
            int64_t mid_idx_104915;
            
            if (cond_104914) {
                mid_idx_104915 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_104915 = mid_id_104913;
            }
            
            bool cond_104916 = sle64(defunc_0_g_res_104524, mid_idx_104915);
            int64_t loopres_104917;
            int64_t loopres_104918;
            
            if (cond_104916) {
                int64_t loopres_t_res_104919 = sub64(mid_104908, (int64_t) 1);
                
                loopres_104917 = low_104905;
                loopres_104918 = loopres_t_res_104919;
            } else {
                int64_t loopres_f_res_104920 = add64((int64_t) 1, mid_104908);
                
                loopres_104917 = loopres_f_res_104920;
                loopres_104918 = high_104906;
            }
            
            bool loop_cond_104921 = sle64(loopres_104917, loopres_104918);
            bool loop_while_tmp_104994 = loop_cond_104921;
            int64_t low_tmp_104995 = loopres_104917;
            int64_t high_tmp_104996 = loopres_104918;
            
            loop_while_104904 = loop_while_tmp_104994;
            low_104905 = low_tmp_104995;
            high_104906 = high_tmp_104996;
        }
        init_idx_104525 = loop_while_104904;
        init_idx_104526 = low_104905;
        init_idx_104527 = high_104906;
        
        bool idx_104546;
        int64_t idx_104547;
        int64_t idx_104548;
        int64_t idx_104549;
        bool loop_while_104922;
        int64_t l_idx_104923;
        int64_t r_idx_104924;
        int64_t span_104925;
        
        loop_while_104922 = loop_cond_92426;
        l_idx_104923 = init_idx_104526;
        r_idx_104924 = init_idx_104526;
        span_104925 = (int64_t) 1;
        while (loop_while_104922) {
            int64_t max_arg_104926 = sub64(l_idx_104923, (int64_t) 1);
            int64_t max_res_104927 = smax64((int64_t) 0, max_arg_104926);
            int64_t min_arg_104928 = add64((int64_t) 1, r_idx_104924);
            int64_t min_res_104929 = smin64(min_arg_96281, min_arg_104928);
            bool x_104930 = sle64((int64_t) 0, max_res_104927);
            bool y_104931 = slt64(max_res_104927, n_92399);
            bool bounds_check_104932 = x_104930 && y_104931;
            bool index_certs_104933;
            
            if (!bounds_check_104932) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_104927,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104934;
            
            x_104934 = ((int64_t *) mem_100590.mem)[max_res_104927];
            
            int64_t abs_arg_104935 = sub64(x_104934, defunc_0_g_res_104524);
            int64_t abs_res_104936 = abs64(abs_arg_104935);
            bool x_104937 = sle64((int64_t) 0, min_res_104929);
            bool y_104938 = slt64(min_res_104929, n_92399);
            bool bounds_check_104939 = x_104937 && y_104938;
            bool index_certs_104940;
            
            if (!bounds_check_104939) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_104929,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_104941;
            
            x_104941 = ((int64_t *) mem_100590.mem)[min_res_104929];
            
            int64_t abs_arg_104942 = sub64(x_104941, defunc_0_g_res_104524);
            int64_t abs_res_104943 = abs64(abs_arg_104942);
            bool cond_104944 = max_res_104927 == l_idx_104923;
            int64_t loopres_104945;
            int64_t loopres_104946;
            int64_t loopres_104947;
            
            if (cond_104944) {
                loopres_104945 = l_idx_104923;
                loopres_104946 = r_idx_104924;
                loopres_104947 = min_res_92421;
            } else {
                bool cond_104948 = slt64(abs_res_104936, abs_res_104943);
                bool cond_f_res_104949 = min_res_104929 == r_idx_104924;
                bool x_104950 = !cond_104948;
                bool y_104951 = cond_f_res_104949 && x_104950;
                bool cond_104952 = cond_104948 || y_104951;
                int64_t loopres_f_res_104953;
                
                if (cond_104952) {
                    loopres_f_res_104953 = max_res_104927;
                } else {
                    loopres_f_res_104953 = l_idx_104923;
                }
                
                int64_t loopres_f_res_104954;
                
                if (cond_104952) {
                    loopres_f_res_104954 = r_idx_104924;
                } else {
                    loopres_f_res_104954 = min_res_104929;
                }
                
                int64_t loopres_f_res_104955;
                
                if (cond_104952) {
                    int64_t loopres_f_res_t_res_104956 = add64((int64_t) 1,
                                                               span_104925);
                    
                    loopres_f_res_104955 = loopres_f_res_t_res_104956;
                } else {
                    int64_t loopres_f_res_f_res_104957 = add64((int64_t) 1,
                                                               span_104925);
                    
                    loopres_f_res_104955 = loopres_f_res_f_res_104957;
                }
                loopres_104945 = loopres_f_res_104953;
                loopres_104946 = loopres_f_res_104954;
                loopres_104947 = loopres_f_res_104955;
            }
            
            bool loop_cond_104958 = slt64(loopres_104947, min_res_92421);
            bool loop_while_tmp_104997 = loop_cond_104958;
            int64_t l_idx_tmp_104998 = loopres_104945;
            int64_t r_idx_tmp_104999 = loopres_104946;
            int64_t span_tmp_105000 = loopres_104947;
            
            loop_while_104922 = loop_while_tmp_104997;
            l_idx_104923 = l_idx_tmp_104998;
            r_idx_104924 = r_idx_tmp_104999;
            span_104925 = span_tmp_105000;
        }
        idx_104546 = loop_while_104922;
        idx_104547 = l_idx_104923;
        idx_104548 = r_idx_104924;
        idx_104549 = span_104925;
        
        int64_t min_res_104587 = smin64(min_arg_96282, idx_104547);
        int64_t max_res_104588 = smax64((int64_t) 0, min_res_104587);
        int64_t x_104589 = add64(min_res_96283, max_res_104588);
        int64_t r_104590 = sub64(x_104589, (int64_t) 1);
        bool x_104591 = sle64((int64_t) 0, r_104590);
        bool y_104592 = slt64(r_104590, n_92399);
        bool bounds_check_104593 = x_104591 && y_104592;
        bool index_certs_104594;
        
        if (!bounds_check_104593) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_104590,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_104595;
        
        x_104595 = ((int64_t *) mem_100587.mem)[r_104590];
        
        int64_t abs_arg_104596 = sub64(x_104595, min_res_104523);
        int64_t abs_res_104597 = abs64(abs_arg_104596);
        bool x_104598 = sle64((int64_t) 0, max_res_104588);
        bool y_104599 = slt64(max_res_104588, n_92399);
        bool bounds_check_104600 = x_104598 && y_104599;
        bool index_certs_104601;
        
        if (!bounds_check_104600) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_104588,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_104602;
        
        x_104602 = ((int64_t *) mem_100587.mem)[max_res_104588];
        
        int64_t abs_arg_104603 = sub64(x_104602, min_res_104523);
        int64_t abs_res_104604 = abs64(abs_arg_104603);
        int64_t max_res_104605 = smax64(abs_res_104597, abs_res_104604);
        double defunc_0_f_res_104606 = sitofp_i64_f64(max_res_104605);
        double defunc_1_f_res_104607 = max_res_96287 + defunc_0_f_res_104606;
        double defunc_2_reduce_res_104609;
        int64_t flat_tid_104959 = (int64_t) 0;
        int32_t num_tasks_105001;
        
        defunc_2_reduce_res_104609 = 0.0;
        
        struct futhark_mc_task_109942 futhark_mc_task_109942;
        
        futhark_mc_task_109942.ctx = ctx;
        futhark_mc_task_109942.free_last_res_96262 = last_res_96262;
        futhark_mc_task_109942.free_mem_100587 = mem_100587.mem;
        futhark_mc_task_109942.free_mem_100593 = mem_100593.mem;
        futhark_mc_task_109942.free_min_res_104523 = min_res_104523;
        futhark_mc_task_109942.free_max_res_104588 = max_res_104588;
        futhark_mc_task_109942.free_defunc_1_f_res_104607 =
            defunc_1_f_res_104607;
        futhark_mc_task_109942.retval_defunc_2_reduce_res_104609 =
            &defunc_2_reduce_res_104609;
        futhark_mc_task_109942.retval_mem_104608 = mem_104608;
        
        struct scheduler_segop futhark_mc_task_109942_task;
        
        futhark_mc_task_109942_task.args = &futhark_mc_task_109942;
        futhark_mc_task_109942_task.top_level_fn =
            futhark_mc_segred_task_109943;
        futhark_mc_task_109942_task.name = "futhark_mc_segred_task_109943";
        futhark_mc_task_109942_task.iterations = q_92401;
        futhark_mc_task_109942_task.task_time =
            &ctx->futhark_mc_segred_task_109943_total_time;
        futhark_mc_task_109942_task.task_iter =
            &ctx->futhark_mc_segred_task_109943_total_iter;
        futhark_mc_task_109942_task.sched = STATIC;
        futhark_mc_task_109942_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109943_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109942_task);
        
        if (futhark_mc_segred_task_109943_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double a0_104632 = 1.0 / defunc_2_reduce_res_104609;
        double defunc_2_reduce_res_104633;
        int64_t flat_tid_104980 = (int64_t) 0;
        int32_t num_tasks_105010;
        
        defunc_2_reduce_res_104633 = 0.0;
        
        struct futhark_mc_task_109947 futhark_mc_task_109947;
        
        futhark_mc_task_109947.ctx = ctx;
        futhark_mc_task_109947.free_last_res_96262 = last_res_96262;
        futhark_mc_task_109947.free_mem_100584 = mem_100584.mem;
        futhark_mc_task_109947.free_max_res_104588 = max_res_104588;
        futhark_mc_task_109947.free_mem_104608 = mem_104608;
        futhark_mc_task_109947.free_a0_104632 = a0_104632;
        futhark_mc_task_109947.retval_defunc_2_reduce_res_104633 =
            &defunc_2_reduce_res_104633;
        
        struct scheduler_segop futhark_mc_task_109947_task;
        
        futhark_mc_task_109947_task.args = &futhark_mc_task_109947;
        futhark_mc_task_109947_task.top_level_fn =
            futhark_mc_segred_task_109948;
        futhark_mc_task_109947_task.name = "futhark_mc_segred_task_109948";
        futhark_mc_task_109947_task.iterations = q_92401;
        futhark_mc_task_109947_task.task_time =
            &ctx->futhark_mc_segred_task_109948_total_time;
        futhark_mc_task_109947_task.task_iter =
            &ctx->futhark_mc_segred_task_109948_total_iter;
        futhark_mc_task_109947_task.sched = STATIC;
        futhark_mc_task_109947_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_109948_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109947_task);
        
        if (futhark_mc_segred_task_109948_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_100614.mem)[gtid_104521] = defunc_2_reduce_res_104633;
    }
    
  cleanup:
    { }
    free(mem_104608);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109940_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109940_end -
                 futhark_mc_segmap_parloop_109940_start;
        
        ctx->futhark_mc_segmap_parloop_109940_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109940_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109940_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109938(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_104520 = tid;
    int num_tasks_104803 = info.nsubtasks;
    struct futhark_mc_task_109933 *futhark_mc_task_109933 =
                                  (struct futhark_mc_task_109933 *) args;
    struct futhark_context *ctx = futhark_mc_task_109933->ctx;
    uint64_t futhark_mc_segmap_nested_task_109938_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109938_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109933->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109933->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109933->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109933->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109933->free_i_92415;
    bool x_92416 = futhark_mc_task_109933->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109933->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109933->free_loop_cond_92426;
    int64_t last_res_96262 = futhark_mc_task_109933->free_last_res_96262;
    int64_t min_arg_96281 = futhark_mc_task_109933->free_min_arg_96281;
    int64_t min_arg_96282 = futhark_mc_task_109933->free_min_arg_96282;
    int64_t min_res_96283 = futhark_mc_task_109933->free_min_res_96283;
    double max_res_96287 = futhark_mc_task_109933->free_max_res_96287;
    struct memblock mem_100584 = {.desc ="mem_100584", .mem =
                                  futhark_mc_task_109933->free_mem_100584,
                                  .size =0, .references =NULL};
    struct memblock mem_100587 = {.desc ="mem_100587", .mem =
                                  futhark_mc_task_109933->free_mem_100587,
                                  .size =0, .references =NULL};
    struct memblock mem_100590 = {.desc ="mem_100590", .mem =
                                  futhark_mc_task_109933->free_mem_100590,
                                  .size =0, .references =NULL};
    int64_t bytes_100592 = futhark_mc_task_109933->free_bytes_100592;
    struct memblock mem_100593 = {.desc ="mem_100593", .mem =
                                  futhark_mc_task_109933->free_mem_100593,
                                  .size =0, .references =NULL};
    struct memblock mem_100614 = {.desc ="mem_100614", .mem =
                                  futhark_mc_task_109933->free_mem_100614,
                                  .size =0, .references =NULL};
    int64_t iter_104903;
    struct futhark_mc_segmap_parloop_struct_109939
    futhark_mc_segmap_parloop_struct_109939;
    
    futhark_mc_segmap_parloop_struct_109939.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109939.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109939.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109939.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109939.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109939.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109939.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109939.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109939.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109939.free_last_res_96262 =
        last_res_96262;
    futhark_mc_segmap_parloop_struct_109939.free_min_arg_96281 = min_arg_96281;
    futhark_mc_segmap_parloop_struct_109939.free_min_arg_96282 = min_arg_96282;
    futhark_mc_segmap_parloop_struct_109939.free_min_res_96283 = min_res_96283;
    futhark_mc_segmap_parloop_struct_109939.free_max_res_96287 = max_res_96287;
    futhark_mc_segmap_parloop_struct_109939.free_mem_100584 = mem_100584.mem;
    futhark_mc_segmap_parloop_struct_109939.free_mem_100587 = mem_100587.mem;
    futhark_mc_segmap_parloop_struct_109939.free_mem_100590 = mem_100590.mem;
    futhark_mc_segmap_parloop_struct_109939.free_bytes_100592 = bytes_100592;
    futhark_mc_segmap_parloop_struct_109939.free_mem_100593 = mem_100593.mem;
    futhark_mc_segmap_parloop_struct_109939.free_mem_100614 = mem_100614.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109940_task;
    
    futhark_mc_segmap_parloop_109940_task.name =
        "futhark_mc_segmap_parloop_109940";
    futhark_mc_segmap_parloop_109940_task.fn = futhark_mc_segmap_parloop_109940;
    futhark_mc_segmap_parloop_109940_task.args =
        &futhark_mc_segmap_parloop_struct_109939;
    futhark_mc_segmap_parloop_109940_task.iterations = iterations;
    futhark_mc_segmap_parloop_109940_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109940_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109940_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109940_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109940_task);
    
    if (futhark_mc_segmap_parloop_109940_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109940_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109940_total_end -
                 futhark_mc_segmap_parloop_109940_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109940_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109940_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109940_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109938_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109938_end -
                 futhark_mc_segmap_nested_task_109938_start;
        
        ctx->futhark_mc_segmap_nested_task_109938_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109938_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109938_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_109907(void *args, int64_t start,
                                            int64_t end, int flat_tid_96249,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109906
    *futhark_mc_segmap_parloop_struct_109906 =
    (struct futhark_mc_segmap_parloop_struct_109906 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109906->ctx;
    uint64_t futhark_mc_segmap_parloop_109907_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109907_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109906->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109906->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109906->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109906->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109906->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109906->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109906->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109906->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109906->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109906->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109906->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100580 =
            futhark_mc_segmap_parloop_struct_109906->free_bytes_100580;
    int64_t bytes_100592 =
            futhark_mc_segmap_parloop_struct_109906->free_bytes_100592;
    int64_t bytes_100613 =
            futhark_mc_segmap_parloop_struct_109906->free_bytes_100613;
    struct memblock mem_100723 = {.desc ="mem_100723", .mem =
                                  futhark_mc_segmap_parloop_struct_109906->free_mem_100723,
                                  .size =0, .references =NULL};
    size_t mem_100581_cached_sizze_109908 = 0;
    unsigned char *mem_100581 = NULL;
    size_t mem_100584_cached_sizze_109909 = 0;
    unsigned char *mem_100584 = NULL;
    size_t mem_100587_cached_sizze_109910 = 0;
    unsigned char *mem_100587 = NULL;
    size_t mem_100590_cached_sizze_109911 = 0;
    unsigned char *mem_100590 = NULL;
    size_t mem_100593_cached_sizze_109912 = 0;
    unsigned char *mem_100593 = NULL;
    size_t mem_100614_cached_sizze_109913 = 0;
    unsigned char *mem_100614 = NULL;
    int64_t iterations = end - start;
    int64_t iter_104494 = start;
    
    if (mem_100581_cached_sizze_109908 < (size_t) bytes_100580) {
        mem_100581 = realloc(mem_100581, bytes_100580);
        mem_100581_cached_sizze_109908 = bytes_100580;
    }
    if (mem_100584_cached_sizze_109909 < (size_t) bytes_100580) {
        mem_100584 = realloc(mem_100584, bytes_100580);
        mem_100584_cached_sizze_109909 = bytes_100580;
    }
    if (mem_100587_cached_sizze_109910 < (size_t) bytes_100580) {
        mem_100587 = realloc(mem_100587, bytes_100580);
        mem_100587_cached_sizze_109910 = bytes_100580;
    }
    if (mem_100590_cached_sizze_109911 < (size_t) bytes_100580) {
        mem_100590 = realloc(mem_100590, bytes_100580);
        mem_100590_cached_sizze_109911 = bytes_100580;
    }
    if (mem_100593_cached_sizze_109912 < (size_t) bytes_100592) {
        mem_100593 = realloc(mem_100593, bytes_100592);
        mem_100593_cached_sizze_109912 = bytes_100592;
    }
    if (mem_100614_cached_sizze_109913 < (size_t) bytes_100613) {
        mem_100614 = realloc(mem_100614, bytes_100613);
        mem_100614_cached_sizze_109913 = bytes_100613;
    }
    for (; iter_104494 < end; iter_104494++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_104771 = m_92398;
        int64_t gtid_96250 = iter_104494;
        int64_t remnant_104772 = iter_104494 - gtid_96250;
        int64_t flat_tid_104495 = (int64_t) 0;
        int32_t num_tasks_104773;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_109914 futhark_mc_task_109914;
        
        futhark_mc_task_109914.ctx = ctx;
        futhark_mc_task_109914.free_n_92399 = n_92399;
        futhark_mc_task_109914.free_gtid_96250 = gtid_96250;
        futhark_mc_task_109914.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109914.free_mem_100581 = mem_100581;
        
        struct scheduler_segop futhark_mc_task_109914_task;
        
        futhark_mc_task_109914_task.args = &futhark_mc_task_109914;
        futhark_mc_task_109914_task.top_level_fn =
            futhark_mc_segscan_task_109915;
        futhark_mc_task_109914_task.name = "futhark_mc_segscan_task_109915";
        futhark_mc_task_109914_task.iterations = n_92399;
        futhark_mc_task_109914_task.task_time =
            &ctx->futhark_mc_segscan_task_109915_total_time;
        futhark_mc_task_109914_task.task_iter =
            &ctx->futhark_mc_segscan_task_109915_total_iter;
        futhark_mc_task_109914_task.sched = STATIC;
        futhark_mc_task_109914_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_109915_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109914_task);
        
        if (futhark_mc_segscan_task_109915_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_96262;
        
        last_res_96262 = ((int64_t *) mem_100581)[i_92415];
        for (int64_t i_104787 = 0; i_104787 < n_92399; i_104787++) {
            ((double *) mem_100584)[i_104787] = 0.0;
        }
        for (int64_t i_104788 = 0; i_104788 < n_92399; i_104788++) {
            ((int64_t *) mem_100587)[i_104788] = (int64_t) -1;
        }
        
        int64_t flat_tid_104504 = (int64_t) 0;
        int32_t num_tasks_104789;
        struct futhark_mc_task_109921 futhark_mc_task_109921;
        
        futhark_mc_task_109921.ctx = ctx;
        futhark_mc_task_109921.free_n_92399 = n_92399;
        futhark_mc_task_109921.free_gtid_96250 = gtid_96250;
        futhark_mc_task_109921.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109921.free_mem_100581 = mem_100581;
        futhark_mc_task_109921.free_mem_100584 = mem_100584;
        futhark_mc_task_109921.free_mem_100587 = mem_100587;
        
        struct scheduler_segop futhark_mc_task_109921_task;
        
        futhark_mc_task_109921_task.args = &futhark_mc_task_109921;
        futhark_mc_task_109921_task.top_level_fn =
            futhark_mc_segmap_task_109922;
        futhark_mc_task_109921_task.name = "futhark_mc_segmap_task_109922";
        futhark_mc_task_109921_task.iterations = n_92399;
        futhark_mc_task_109921_task.task_time =
            &ctx->futhark_mc_segmap_task_109922_total_time;
        futhark_mc_task_109921_task.task_iter =
            &ctx->futhark_mc_segmap_task_109922_total_iter;
        futhark_mc_task_109921_task.sched = STATIC;
        futhark_mc_task_109921_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109922_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109921_task);
        
        if (futhark_mc_segmap_task_109922_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_104512 = (int64_t) 0;
        int32_t num_tasks_104795;
        struct futhark_mc_task_109925 futhark_mc_task_109925;
        
        futhark_mc_task_109925.ctx = ctx;
        futhark_mc_task_109925.free_n_92399 = n_92399;
        futhark_mc_task_109925.free_mem_100587 = mem_100587;
        futhark_mc_task_109925.free_mem_100590 = mem_100590;
        
        struct scheduler_segop futhark_mc_task_109925_task;
        
        futhark_mc_task_109925_task.args = &futhark_mc_task_109925;
        futhark_mc_task_109925_task.top_level_fn =
            futhark_mc_segmap_task_109926;
        futhark_mc_task_109925_task.name = "futhark_mc_segmap_task_109926";
        futhark_mc_task_109925_task.iterations = n_92399;
        futhark_mc_task_109925_task.task_time =
            &ctx->futhark_mc_segmap_task_109926_total_time;
        futhark_mc_task_109925_task.task_iter =
            &ctx->futhark_mc_segmap_task_109926_total_iter;
        futhark_mc_task_109925_task.sched = STATIC;
        futhark_mc_task_109925_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109926_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109925_task);
        
        if (futhark_mc_segmap_task_109926_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_96281 = sub64(last_res_96262, (int64_t) 1);
        int64_t min_arg_96282 = sub64(last_res_96262, min_res_92421);
        int64_t min_res_96283 = smin64(q_92401, last_res_96262);
        double i64_res_96284 = sitofp_i64_f64(last_res_96262);
        double x_96285 = i64_res_92427 - i64_res_96284;
        double max_arg_96286 = x_96285 / 2.0;
        double max_res_96287 = fmax64(0.0, max_arg_96286);
        int64_t flat_tid_104516 = (int64_t) 0;
        int32_t num_tasks_104799;
        struct futhark_mc_task_109929 futhark_mc_task_109929;
        
        futhark_mc_task_109929.ctx = ctx;
        futhark_mc_task_109929.free_q_92401 = q_92401;
        futhark_mc_task_109929.free_last_res_96262 = last_res_96262;
        futhark_mc_task_109929.free_mem_100593 = mem_100593;
        
        struct scheduler_segop futhark_mc_task_109929_task;
        
        futhark_mc_task_109929_task.args = &futhark_mc_task_109929;
        futhark_mc_task_109929_task.top_level_fn =
            futhark_mc_segmap_task_109930;
        futhark_mc_task_109929_task.name = "futhark_mc_segmap_task_109930";
        futhark_mc_task_109929_task.iterations = q_92401;
        futhark_mc_task_109929_task.task_time =
            &ctx->futhark_mc_segmap_task_109930_total_time;
        futhark_mc_task_109929_task.task_iter =
            &ctx->futhark_mc_segmap_task_109930_total_iter;
        futhark_mc_task_109929_task.sched = STATIC;
        futhark_mc_task_109929_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109930_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109929_task);
        
        if (futhark_mc_segmap_task_109930_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_104646 = (int64_t) 0;
        int32_t num_tasks_104803;
        int64_t flat_tid_104520 = (int64_t) 0;
        struct futhark_mc_task_109933 futhark_mc_task_109933;
        
        futhark_mc_task_109933.ctx = ctx;
        futhark_mc_task_109933.free_n_92399 = n_92399;
        futhark_mc_task_109933.free_q_92401 = q_92401;
        futhark_mc_task_109933.free_jump_92403 = jump_92403;
        futhark_mc_task_109933.free_n_m_92409 = n_m_92409;
        futhark_mc_task_109933.free_i_92415 = i_92415;
        futhark_mc_task_109933.free_x_92416 = x_92416;
        futhark_mc_task_109933.free_min_res_92421 = min_res_92421;
        futhark_mc_task_109933.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_109933.free_last_res_96262 = last_res_96262;
        futhark_mc_task_109933.free_min_arg_96281 = min_arg_96281;
        futhark_mc_task_109933.free_min_arg_96282 = min_arg_96282;
        futhark_mc_task_109933.free_min_res_96283 = min_res_96283;
        futhark_mc_task_109933.free_max_res_96287 = max_res_96287;
        futhark_mc_task_109933.free_mem_100584 = mem_100584;
        futhark_mc_task_109933.free_mem_100587 = mem_100587;
        futhark_mc_task_109933.free_mem_100590 = mem_100590;
        futhark_mc_task_109933.free_bytes_100592 = bytes_100592;
        futhark_mc_task_109933.free_mem_100593 = mem_100593;
        futhark_mc_task_109933.free_mem_100614 = mem_100614;
        
        struct scheduler_segop futhark_mc_task_109933_task;
        
        futhark_mc_task_109933_task.args = &futhark_mc_task_109933;
        futhark_mc_task_109933_task.top_level_fn =
            futhark_mc_segmap_task_109934;
        futhark_mc_task_109933_task.name = "futhark_mc_segmap_task_109934";
        futhark_mc_task_109933_task.iterations = n_m_92409;
        futhark_mc_task_109933_task.task_time =
            &ctx->futhark_mc_segmap_task_109934_total_time;
        futhark_mc_task_109933_task.task_iter =
            &ctx->futhark_mc_segmap_task_109934_total_iter;
        futhark_mc_task_109933_task.sched = DYNAMIC;
        futhark_mc_task_109933_task.nested_fn =
            futhark_mc_segmap_nested_task_109938;
        
        int futhark_mc_segmap_task_109934_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109933_task);
        
        if (futhark_mc_segmap_task_109934_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100723.mem + gtid_96250 * n_m_92409 * (int64_t) 8,
                    mem_100614 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100581);
    free(mem_100584);
    free(mem_100587);
    free(mem_100590);
    free(mem_100593);
    free(mem_100614);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109907_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109907_end -
                 futhark_mc_segmap_parloop_109907_start;
        
        ctx->futhark_mc_segmap_parloop_109907_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109907_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109907_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109905(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_96249 = tid;
    int num_tasks_104315 = info.nsubtasks;
    struct futhark_mc_task_109894 *futhark_mc_task_109894 =
                                  (struct futhark_mc_task_109894 *) args;
    struct futhark_context *ctx = futhark_mc_task_109894->ctx;
    uint64_t futhark_mc_segmap_nested_task_109905_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109905_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109894->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109894->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109894->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109894->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109894->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109894->free_i_92415;
    bool x_92416 = futhark_mc_task_109894->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109894->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109894->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109894->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109894->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100580 = futhark_mc_task_109894->free_bytes_100580;
    int64_t bytes_100592 = futhark_mc_task_109894->free_bytes_100592;
    int64_t bytes_100613 = futhark_mc_task_109894->free_bytes_100613;
    struct memblock mem_100723 = {.desc ="mem_100723", .mem =
                                  futhark_mc_task_109894->free_mem_100723,
                                  .size =0, .references =NULL};
    int64_t iter_104494;
    struct futhark_mc_segmap_parloop_struct_109906
    futhark_mc_segmap_parloop_struct_109906;
    
    futhark_mc_segmap_parloop_struct_109906.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109906.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109906.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109906.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109906.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109906.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109906.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109906.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109906.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109906.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109906.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109906.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109906.free_bytes_100580 = bytes_100580;
    futhark_mc_segmap_parloop_struct_109906.free_bytes_100592 = bytes_100592;
    futhark_mc_segmap_parloop_struct_109906.free_bytes_100613 = bytes_100613;
    futhark_mc_segmap_parloop_struct_109906.free_mem_100723 = mem_100723.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109907_task;
    
    futhark_mc_segmap_parloop_109907_task.name =
        "futhark_mc_segmap_parloop_109907";
    futhark_mc_segmap_parloop_109907_task.fn = futhark_mc_segmap_parloop_109907;
    futhark_mc_segmap_parloop_109907_task.args =
        &futhark_mc_segmap_parloop_struct_109906;
    futhark_mc_segmap_parloop_109907_task.iterations = iterations;
    futhark_mc_segmap_parloop_109907_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109907_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109907_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109907_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109907_task);
    
    if (futhark_mc_segmap_parloop_109907_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109907_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109907_total_end -
                 futhark_mc_segmap_parloop_109907_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109907_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109907_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109907_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109905_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109905_end -
                 futhark_mc_segmap_nested_task_109905_start;
        
        ctx->futhark_mc_segmap_nested_task_109905_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109905_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109905_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109952 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100725;
    int64_t free_bytes_100737;
    int64_t free_bytes_100776;
    unsigned char *free_mem_100919;
    unsigned char *free_mem_100923;
};
struct futhark_mc_segmap_parloop_struct_109954 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100725;
    int64_t free_bytes_100737;
    int64_t free_bytes_100776;
    unsigned char *free_mem_100919;
    unsigned char *free_mem_100923;
};
static int futhark_mc_segmap_parloop_109955(void *args, int64_t start,
                                            int64_t end, int flat_tid_96547,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109954
    *futhark_mc_segmap_parloop_struct_109954 =
    (struct futhark_mc_segmap_parloop_struct_109954 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109954->ctx;
    uint64_t futhark_mc_segmap_parloop_109955_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109955_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109954->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109954->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109954->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109954->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109954->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109954->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109954->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109954->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109954->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109954->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109954->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100725 =
            futhark_mc_segmap_parloop_struct_109954->free_bytes_100725;
    int64_t bytes_100737 =
            futhark_mc_segmap_parloop_struct_109954->free_bytes_100737;
    int64_t bytes_100776 =
            futhark_mc_segmap_parloop_struct_109954->free_bytes_100776;
    struct memblock mem_100919 = {.desc ="mem_100919", .mem =
                                  futhark_mc_segmap_parloop_struct_109954->free_mem_100919,
                                  .size =0, .references =NULL};
    struct memblock mem_100923 = {.desc ="mem_100923", .mem =
                                  futhark_mc_segmap_parloop_struct_109954->free_mem_100923,
                                  .size =0, .references =NULL};
    size_t mem_100783_cached_sizze_109956 = 0;
    unsigned char *mem_100783 = NULL;
    size_t mem_100798_cached_sizze_109957 = 0;
    unsigned char *mem_100798 = NULL;
    size_t mem_100801_cached_sizze_109958 = 0;
    unsigned char *mem_100801 = NULL;
    size_t mem_100828_cached_sizze_109959 = 0;
    unsigned char *mem_100828 = NULL;
    size_t mem_100843_cached_sizze_109960 = 0;
    unsigned char *mem_100843 = NULL;
    size_t mem_100858_cached_sizze_109961 = 0;
    unsigned char *mem_100858 = NULL;
    size_t mem_100861_cached_sizze_109962 = 0;
    unsigned char *mem_100861 = NULL;
    size_t mem_100878_cached_sizze_109963 = 0;
    unsigned char *mem_100878 = NULL;
    size_t mem_100881_cached_sizze_109964 = 0;
    unsigned char *mem_100881 = NULL;
    int64_t iterations = end - start;
    int64_t iter_105020 = start;
    
    if (mem_100783_cached_sizze_109956 < (size_t) bytes_100725) {
        mem_100783 = realloc(mem_100783, bytes_100725);
        mem_100783_cached_sizze_109956 = bytes_100725;
    }
    if (mem_100798_cached_sizze_109957 < (size_t) bytes_100725) {
        mem_100798 = realloc(mem_100798, bytes_100725);
        mem_100798_cached_sizze_109957 = bytes_100725;
    }
    if (mem_100801_cached_sizze_109958 < (size_t) bytes_100725) {
        mem_100801 = realloc(mem_100801, bytes_100725);
        mem_100801_cached_sizze_109958 = bytes_100725;
    }
    if (mem_100828_cached_sizze_109959 < (size_t) bytes_100725) {
        mem_100828 = realloc(mem_100828, bytes_100725);
        mem_100828_cached_sizze_109959 = bytes_100725;
    }
    if (mem_100843_cached_sizze_109960 < (size_t) bytes_100737) {
        mem_100843 = realloc(mem_100843, bytes_100737);
        mem_100843_cached_sizze_109960 = bytes_100737;
    }
    if (mem_100858_cached_sizze_109961 < (size_t) bytes_100776) {
        mem_100858 = realloc(mem_100858, bytes_100776);
        mem_100858_cached_sizze_109961 = bytes_100776;
    }
    if (mem_100861_cached_sizze_109962 < (size_t) bytes_100776) {
        mem_100861 = realloc(mem_100861, bytes_100776);
        mem_100861_cached_sizze_109962 = bytes_100776;
    }
    if (mem_100878_cached_sizze_109963 < (size_t) bytes_100737) {
        mem_100878 = realloc(mem_100878, bytes_100737);
        mem_100878_cached_sizze_109963 = bytes_100737;
    }
    if (mem_100881_cached_sizze_109964 < (size_t) bytes_100737) {
        mem_100881 = realloc(mem_100881, bytes_100737);
        mem_100881_cached_sizze_109964 = bytes_100737;
    }
    for (; iter_105020 < end; iter_105020++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105208 = m_92398;
        int64_t gtid_96548 = iter_105020;
        int64_t remnant_105209 = iter_105020 - gtid_96548;
        int64_t discard_99802;
        int64_t scanacc_105022 = (int64_t) 0;
        
        for (int64_t i_105021 = 0; i_105021 < n_92399; i_105021++) {
            double x_105024;
            
            x_105024 = ((double *) Y_mem_100186.mem)[gtid_96548 * n_92399 +
                                                     i_105021];
            
            bool isnan_res_105025;
            
            isnan_res_105025 = futrts_isnan64(x_105024);
            
            bool defunc_0_p_res_105026 = !isnan_res_105025;
            int64_t defunc_0_f_res_105027 =
                    btoi_bool_i64(defunc_0_p_res_105026);
            int64_t defunc_1_op_res_105028 = add64(defunc_0_f_res_105027,
                                                   scanacc_105022);
            
            ((int64_t *) mem_100783)[i_105021] = defunc_1_op_res_105028;
            
            int64_t scanacc_tmp_105210 = defunc_1_op_res_105028;
            
            scanacc_105022 = scanacc_tmp_105210;
        }
        discard_99802 = scanacc_105022;
        
        int64_t last_res_93247;
        
        last_res_93247 = ((int64_t *) mem_100783)[i_92415];
        for (int64_t i_105212 = 0; i_105212 < n_92399; i_105212++) {
            ((double *) mem_100798)[i_105212] = 0.0;
        }
        for (int64_t i_105213 = 0; i_105213 < n_92399; i_105213++) {
            ((int64_t *) mem_100801)[i_105213] = (int64_t) -1;
        }
        for (int64_t write_iter_105030 = 0; write_iter_105030 < n_92399;
             write_iter_105030++) {
            double write_iv_105033;
            
            write_iv_105033 = ((double *) Y_mem_100186.mem)[gtid_96548 *
                                                            n_92399 +
                                                            write_iter_105030];
            
            bool isnan_res_105034;
            
            isnan_res_105034 = futrts_isnan64(write_iv_105033);
            
            bool defunc_0_p_res_105035 = !isnan_res_105034;
            int64_t defunc_1_f_res_105036;
            
            if (defunc_0_p_res_105035) {
                int64_t write_iv_105037;
                
                write_iv_105037 = ((int64_t *) mem_100783)[write_iter_105030];
                
                int64_t defunc_1_f_res_t_res_105038 = sub64(write_iv_105037,
                                                            (int64_t) 1);
                
                defunc_1_f_res_105036 = defunc_1_f_res_t_res_105038;
            } else {
                defunc_1_f_res_105036 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_105036) &&
                slt64(defunc_1_f_res_105036, n_92399)) {
                ((int64_t *) mem_100801)[defunc_1_f_res_105036] =
                    write_iter_105030;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_105036) &&
                slt64(defunc_1_f_res_105036, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_100798 + defunc_1_f_res_105036 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_96548 * n_92399 +
                                                write_iter_105030) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_105042 = 0; i_105042 < n_92399; i_105042++) {
            int64_t x_105044;
            
            x_105044 = ((int64_t *) mem_100801)[i_105042];
            
            int64_t defunc_0_f_res_105045 = add64((int64_t) 1, x_105044);
            
            ((int64_t *) mem_100828)[i_105042] = defunc_0_f_res_105045;
        }
        
        int64_t min_arg_93262 = sub64(last_res_93247, (int64_t) 1);
        int64_t min_arg_93263 = sub64(last_res_93247, min_res_92421);
        int64_t min_res_93264 = smin64(q_92401, last_res_93247);
        double i64_res_93265 = sitofp_i64_f64(last_res_93247);
        double x_93266 = i64_res_92427 - i64_res_93265;
        double max_arg_93267 = x_93266 / 2.0;
        double max_res_93268 = fmax64(0.0, max_arg_93267);
        
        for (int64_t i_105047 = 0; i_105047 < q_92401; i_105047++) {
            bool cond_105049 = sle64(last_res_93247, i_105047);
            double defunc_0_f_res_105050;
            
            if (cond_105049) {
                defunc_0_f_res_105050 = 0.0;
            } else {
                defunc_0_f_res_105050 = 1.0;
            }
            ((double *) mem_100843)[i_105047] = defunc_0_f_res_105050;
        }
        for (int64_t i_105052 = 0; i_105052 < n_m_92409; i_105052++) {
            int64_t min_arg_105055 = mul64(jump_92403, i_105052);
            int64_t min_res_105056 = smin64(i_92415, min_arg_105055);
            int64_t defunc_0_g_res_105057 = add64((int64_t) 1, min_res_105056);
            bool init_idx_105058;
            int64_t init_idx_105059;
            int64_t init_idx_105060;
            bool loop_while_105061;
            int64_t low_105062;
            int64_t high_105063;
            
            loop_while_105061 = x_92416;
            low_105062 = (int64_t) 0;
            high_105063 = i_92415;
            while (loop_while_105061) {
                int64_t x_105064 = add64(low_105062, high_105063);
                int64_t mid_105065 = sdiv64(x_105064, (int64_t) 2);
                bool x_105066 = sle64((int64_t) 0, mid_105065);
                bool y_105067 = slt64(mid_105065, n_92399);
                bool bounds_check_105068 = x_105066 && y_105067;
                bool index_certs_105069;
                
                if (!bounds_check_105068) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_105065,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_105070;
                
                mid_id_105070 = ((int64_t *) mem_100828)[mid_105065];
                
                bool cond_105071 = slt64(mid_id_105070, (int64_t) 0);
                int64_t mid_idx_105072;
                
                if (cond_105071) {
                    mid_idx_105072 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_105072 = mid_id_105070;
                }
                
                bool cond_105073 = sle64(defunc_0_g_res_105057, mid_idx_105072);
                int64_t loopres_105074;
                int64_t loopres_105075;
                
                if (cond_105073) {
                    int64_t loopres_t_res_105076 = sub64(mid_105065,
                                                         (int64_t) 1);
                    
                    loopres_105074 = low_105062;
                    loopres_105075 = loopres_t_res_105076;
                } else {
                    int64_t loopres_f_res_105077 = add64((int64_t) 1,
                                                         mid_105065);
                    
                    loopres_105074 = loopres_f_res_105077;
                    loopres_105075 = high_105063;
                }
                
                bool loop_cond_105078 = sle64(loopres_105074, loopres_105075);
                bool loop_while_tmp_105220 = loop_cond_105078;
                int64_t low_tmp_105221 = loopres_105074;
                int64_t high_tmp_105222 = loopres_105075;
                
                loop_while_105061 = loop_while_tmp_105220;
                low_105062 = low_tmp_105221;
                high_105063 = high_tmp_105222;
            }
            init_idx_105058 = loop_while_105061;
            init_idx_105059 = low_105062;
            init_idx_105060 = high_105063;
            
            bool idx_105079;
            int64_t idx_105080;
            int64_t idx_105081;
            int64_t idx_105082;
            bool loop_while_105083;
            int64_t l_idx_105084;
            int64_t r_idx_105085;
            int64_t span_105086;
            
            loop_while_105083 = loop_cond_92426;
            l_idx_105084 = init_idx_105059;
            r_idx_105085 = init_idx_105059;
            span_105086 = (int64_t) 1;
            while (loop_while_105083) {
                int64_t max_arg_105087 = sub64(l_idx_105084, (int64_t) 1);
                int64_t max_res_105088 = smax64((int64_t) 0, max_arg_105087);
                int64_t min_arg_105089 = add64((int64_t) 1, r_idx_105085);
                int64_t min_res_105090 = smin64(min_arg_93262, min_arg_105089);
                bool x_105091 = sle64((int64_t) 0, max_res_105088);
                bool y_105092 = slt64(max_res_105088, n_92399);
                bool bounds_check_105093 = x_105091 && y_105092;
                bool index_certs_105094;
                
                if (!bounds_check_105093) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_105088,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_105095;
                
                x_105095 = ((int64_t *) mem_100828)[max_res_105088];
                
                int64_t abs_arg_105096 = sub64(x_105095, defunc_0_g_res_105057);
                int64_t abs_res_105097 = abs64(abs_arg_105096);
                bool x_105098 = sle64((int64_t) 0, min_res_105090);
                bool y_105099 = slt64(min_res_105090, n_92399);
                bool bounds_check_105100 = x_105098 && y_105099;
                bool index_certs_105101;
                
                if (!bounds_check_105100) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_105090,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_105102;
                
                x_105102 = ((int64_t *) mem_100828)[min_res_105090];
                
                int64_t abs_arg_105103 = sub64(x_105102, defunc_0_g_res_105057);
                int64_t abs_res_105104 = abs64(abs_arg_105103);
                bool cond_105105 = max_res_105088 == l_idx_105084;
                int64_t loopres_105106;
                int64_t loopres_105107;
                int64_t loopres_105108;
                
                if (cond_105105) {
                    loopres_105106 = l_idx_105084;
                    loopres_105107 = r_idx_105085;
                    loopres_105108 = min_res_92421;
                } else {
                    bool cond_105109 = slt64(abs_res_105097, abs_res_105104);
                    bool cond_f_res_105110 = min_res_105090 == r_idx_105085;
                    bool x_105111 = !cond_105109;
                    bool y_105112 = cond_f_res_105110 && x_105111;
                    bool cond_105113 = cond_105109 || y_105112;
                    int64_t loopres_f_res_105114;
                    
                    if (cond_105113) {
                        loopres_f_res_105114 = max_res_105088;
                    } else {
                        loopres_f_res_105114 = l_idx_105084;
                    }
                    
                    int64_t loopres_f_res_105115;
                    
                    if (cond_105113) {
                        loopres_f_res_105115 = r_idx_105085;
                    } else {
                        loopres_f_res_105115 = min_res_105090;
                    }
                    
                    int64_t loopres_f_res_105116;
                    
                    if (cond_105113) {
                        int64_t loopres_f_res_t_res_105117 = add64((int64_t) 1,
                                                                   span_105086);
                        
                        loopres_f_res_105116 = loopres_f_res_t_res_105117;
                    } else {
                        int64_t loopres_f_res_f_res_105118 = add64((int64_t) 1,
                                                                   span_105086);
                        
                        loopres_f_res_105116 = loopres_f_res_f_res_105118;
                    }
                    loopres_105106 = loopres_f_res_105114;
                    loopres_105107 = loopres_f_res_105115;
                    loopres_105108 = loopres_f_res_105116;
                }
                
                bool loop_cond_105119 = slt64(loopres_105108, min_res_92421);
                bool loop_while_tmp_105223 = loop_cond_105119;
                int64_t l_idx_tmp_105224 = loopres_105106;
                int64_t r_idx_tmp_105225 = loopres_105107;
                int64_t span_tmp_105226 = loopres_105108;
                
                loop_while_105083 = loop_while_tmp_105223;
                l_idx_105084 = l_idx_tmp_105224;
                r_idx_105085 = r_idx_tmp_105225;
                span_105086 = span_tmp_105226;
            }
            idx_105079 = loop_while_105083;
            idx_105080 = l_idx_105084;
            idx_105081 = r_idx_105085;
            idx_105082 = span_105086;
            
            int64_t min_res_105120 = smin64(min_arg_93263, idx_105080);
            int64_t max_res_105121 = smax64((int64_t) 0, min_res_105120);
            int64_t x_105122 = add64(min_res_93264, max_res_105121);
            int64_t r_105123 = sub64(x_105122, (int64_t) 1);
            bool x_105124 = sle64((int64_t) 0, r_105123);
            bool y_105125 = slt64(r_105123, n_92399);
            bool bounds_check_105126 = x_105124 && y_105125;
            bool index_certs_105127;
            
            if (!bounds_check_105126) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_105123,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105128;
            
            x_105128 = ((int64_t *) mem_100801)[r_105123];
            
            int64_t abs_arg_105129 = sub64(x_105128, min_res_105056);
            int64_t abs_res_105130 = abs64(abs_arg_105129);
            bool x_105131 = sle64((int64_t) 0, max_res_105121);
            bool y_105132 = slt64(max_res_105121, n_92399);
            bool bounds_check_105133 = x_105131 && y_105132;
            bool index_certs_105134;
            
            if (!bounds_check_105133) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_105121,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105135;
            
            x_105135 = ((int64_t *) mem_100801)[max_res_105121];
            
            int64_t abs_arg_105136 = sub64(x_105135, min_res_105056);
            int64_t abs_res_105137 = abs64(abs_arg_105136);
            int64_t max_res_105138 = smax64(abs_res_105130, abs_res_105137);
            double defunc_0_f_res_105139 = sitofp_i64_f64(max_res_105138);
            double defunc_1_f_res_105140 = max_res_93268 +
                   defunc_0_f_res_105139;
            double defunc_2_reduce_res_105143;
            double defunc_2_reduce_res_105144;
            double defunc_2_reduce_res_105145;
            double redout_105149;
            double redout_105150;
            double redout_105151;
            
            redout_105149 = 0.0;
            redout_105150 = 0.0;
            redout_105151 = 0.0;
            for (int64_t i_105148 = 0; i_105148 < q_92401; i_105148++) {
                double x_105154;
                
                x_105154 = ((double *) mem_100843)[i_105148];
                
                bool cond_105155 = sle64(last_res_93247, i_105148);
                int64_t defunc_0_f_res_105156;
                
                if (cond_105155) {
                    defunc_0_f_res_105156 = (int64_t) 0;
                } else {
                    int64_t i_105157 = add64(max_res_105121, i_105148);
                    int64_t defunc_0_add_arg_105158;
                    
                    defunc_0_add_arg_105158 =
                        ((int64_t *) mem_100801)[i_105157];
                    
                    int64_t defunc_1_add_res_105159 = add64((int64_t) 1,
                                                            defunc_0_add_arg_105158);
                    
                    defunc_0_f_res_105156 = defunc_1_add_res_105159;
                }
                
                int64_t binop_p_105160 = sub64(defunc_0_f_res_105156,
                                               min_res_105056);
                double defunc_0_f_res_105161 = sitofp_i64_f64(binop_p_105160);
                double abs_res_105162 = fabs(defunc_0_f_res_105161);
                double tmp1_105163 = abs_res_105162 / defunc_1_f_res_105140;
                double x_105164 = tmp1_105163 * tmp1_105163;
                double y_105165 = tmp1_105163 * x_105164;
                double tmp2_105166 = 1.0 - y_105165;
                double x_105167 = tmp2_105166 * tmp2_105166;
                double tmp3_105168 = tmp2_105166 * x_105167;
                double tmp4_105169 = x_105154 * tmp3_105168;
                double defunc_1_f_res_105170 = defunc_0_f_res_105161 *
                       tmp4_105169;
                double defunc_1_f_res_105171 = defunc_0_f_res_105161 *
                       defunc_1_f_res_105170;
                double defunc_1_op_res_105172 = tmp4_105169 + redout_105149;
                double defunc_1_op_res_105173 = defunc_1_f_res_105170 +
                       redout_105150;
                double defunc_1_op_res_105174 = defunc_1_f_res_105171 +
                       redout_105151;
                
                ((double *) mem_100878)[i_105148] = defunc_1_f_res_105170;
                ((double *) mem_100881)[i_105148] = tmp4_105169;
                
                double redout_tmp_105227 = defunc_1_op_res_105172;
                double redout_tmp_105228 = defunc_1_op_res_105173;
                double redout_tmp_105229 = defunc_1_op_res_105174;
                
                redout_105149 = redout_tmp_105227;
                redout_105150 = redout_tmp_105228;
                redout_105151 = redout_tmp_105229;
            }
            defunc_2_reduce_res_105143 = redout_105149;
            defunc_2_reduce_res_105144 = redout_105150;
            defunc_2_reduce_res_105145 = redout_105151;
            
            double x_105177 = defunc_2_reduce_res_105143 *
                   defunc_2_reduce_res_105145;
            double y_105178 = defunc_2_reduce_res_105144 *
                   defunc_2_reduce_res_105144;
            double y_105179 = x_105177 - y_105178;
            double det1_105180 = 1.0 / y_105179;
            double a11_105181 = defunc_2_reduce_res_105145 * det1_105180;
            double x_105182 = 0.0 - defunc_2_reduce_res_105144;
            double b11_105183 = det1_105180 * x_105182;
            double c11_105184 = defunc_2_reduce_res_105143 * det1_105180;
            double defunc_2_reduce_res_105185;
            double defunc_2_reduce_res_105186;
            double redout_105188;
            double redout_105189;
            
            redout_105188 = 0.0;
            redout_105189 = 0.0;
            for (int64_t i_105187 = 0; i_105187 < q_92401; i_105187++) {
                double x_105190;
                
                x_105190 = ((double *) mem_100881)[i_105187];
                
                double x_105191;
                
                x_105191 = ((double *) mem_100878)[i_105187];
                
                bool cond_105192 = sle64(last_res_93247, i_105187);
                double defunc_0_f_res_105193;
                
                if (cond_105192) {
                    defunc_0_f_res_105193 = 0.0;
                } else {
                    int64_t i_105194 = add64(max_res_105121, i_105187);
                    double defunc_0_add_arg_105195;
                    
                    defunc_0_add_arg_105195 = ((double *) mem_100798)[i_105194];
                    defunc_0_f_res_105193 = defunc_0_add_arg_105195;
                }
                
                double x_105196 = a11_105181 * x_105190;
                double y_105197 = b11_105183 * x_105191;
                double x_105198 = x_105196 + y_105197;
                double defunc_9_fit_fun_res_105199 = defunc_0_f_res_105193 *
                       x_105198;
                double x_105200 = b11_105183 * x_105190;
                double y_105201 = c11_105184 * x_105191;
                double x_105202 = x_105200 + y_105201;
                double defunc_9_slope_fun_res_105203 = defunc_0_f_res_105193 *
                       x_105202;
                double defunc_1_op_res_105204 = defunc_9_fit_fun_res_105199 +
                       redout_105188;
                double defunc_1_op_res_105205 = defunc_9_slope_fun_res_105203 +
                       redout_105189;
                double redout_tmp_105232 = defunc_1_op_res_105204;
                double redout_tmp_105233 = defunc_1_op_res_105205;
                
                redout_105188 = redout_tmp_105232;
                redout_105189 = redout_tmp_105233;
            }
            defunc_2_reduce_res_105185 = redout_105188;
            defunc_2_reduce_res_105186 = redout_105189;
            ((double *) mem_100858)[i_105052] = defunc_2_reduce_res_105185;
            ((double *) mem_100861)[i_105052] = defunc_2_reduce_res_105186;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100919.mem + gtid_96548 * n_m_92409 * (int64_t) 8,
                    mem_100858 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100923.mem + gtid_96548 * n_m_92409 * (int64_t) 8,
                    mem_100861 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100783);
    free(mem_100798);
    free(mem_100801);
    free(mem_100828);
    free(mem_100843);
    free(mem_100858);
    free(mem_100861);
    free(mem_100878);
    free(mem_100881);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109955_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109955_end -
                 futhark_mc_segmap_parloop_109955_start;
        
        ctx->futhark_mc_segmap_parloop_109955_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109955_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109955_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109953(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_96547 = tid;
    int num_tasks_105019 = info.nsubtasks;
    struct futhark_mc_task_109952 *futhark_mc_task_109952 =
                                  (struct futhark_mc_task_109952 *) args;
    struct futhark_context *ctx = futhark_mc_task_109952->ctx;
    uint64_t futhark_mc_segmap_task_109953_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109953_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109952->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109952->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109952->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109952->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109952->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109952->free_i_92415;
    bool x_92416 = futhark_mc_task_109952->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109952->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109952->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109952->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109952->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100725 = futhark_mc_task_109952->free_bytes_100725;
    int64_t bytes_100737 = futhark_mc_task_109952->free_bytes_100737;
    int64_t bytes_100776 = futhark_mc_task_109952->free_bytes_100776;
    struct memblock mem_100919 = {.desc ="mem_100919", .mem =
                                  futhark_mc_task_109952->free_mem_100919,
                                  .size =0, .references =NULL};
    struct memblock mem_100923 = {.desc ="mem_100923", .mem =
                                  futhark_mc_task_109952->free_mem_100923,
                                  .size =0, .references =NULL};
    int64_t iter_105020;
    struct futhark_mc_segmap_parloop_struct_109954
    futhark_mc_segmap_parloop_struct_109954;
    
    futhark_mc_segmap_parloop_struct_109954.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109954.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109954.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109954.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109954.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109954.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109954.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109954.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109954.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109954.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109954.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109954.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109954.free_bytes_100725 = bytes_100725;
    futhark_mc_segmap_parloop_struct_109954.free_bytes_100737 = bytes_100737;
    futhark_mc_segmap_parloop_struct_109954.free_bytes_100776 = bytes_100776;
    futhark_mc_segmap_parloop_struct_109954.free_mem_100919 = mem_100919.mem;
    futhark_mc_segmap_parloop_struct_109954.free_mem_100923 = mem_100923.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109955_task;
    
    futhark_mc_segmap_parloop_109955_task.name =
        "futhark_mc_segmap_parloop_109955";
    futhark_mc_segmap_parloop_109955_task.fn = futhark_mc_segmap_parloop_109955;
    futhark_mc_segmap_parloop_109955_task.args =
        &futhark_mc_segmap_parloop_struct_109954;
    futhark_mc_segmap_parloop_109955_task.iterations = iterations;
    futhark_mc_segmap_parloop_109955_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109955_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109955_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109955_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109955_task);
    
    if (futhark_mc_segmap_parloop_109955_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109955_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109955_total_end -
                 futhark_mc_segmap_parloop_109955_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109955_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109955_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109955_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109953_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109953_end -
                 futhark_mc_segmap_task_109953_start;
        
        ctx->futhark_mc_segmap_task_109953_runs[tid]++;
        ctx->futhark_mc_segmap_task_109953_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109953_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_109966 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100725;
    int64_t free_bytes_100737;
    int64_t free_bytes_100776;
    unsigned char *free_mem_100919;
    unsigned char *free_mem_100923;
};
struct futhark_mc_task_109975 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96725;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100726;
};
struct futhark_mc_scan_stage_1_parloop_struct_109978 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96725;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100726;
};
static int futhark_mc_scan_stage_1_parloop_109979(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_105235, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_109978
    *futhark_mc_scan_stage_1_parloop_struct_109978 =
    (struct futhark_mc_scan_stage_1_parloop_struct_109978 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_109978->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_109979_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109979_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_109978->free_n_92399;
    int64_t gtid_96725 =
            futhark_mc_scan_stage_1_parloop_struct_109978->free_gtid_96725;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_109978->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100726 = {.desc ="mem_100726", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_109978->free_mem_100726,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105574 = start;
    int64_t x_105237;
    int64_t x_105238;
    
    x_105237 = (int64_t) 0;
    for (; iter_105574 < end; iter_105574++) {
        int64_t gtid_105236 = iter_105574;
        
        // stage 1 scan body
        {
            double x_105240;
            
            x_105240 = ((double *) Y_mem_100186.mem)[gtid_96725 * n_92399 +
                                                     gtid_105236];
            
            bool isnan_res_105241;
            
            isnan_res_105241 = futrts_isnan64(x_105240);
            
            bool defunc_0_p_res_105242 = !isnan_res_105241;
            int64_t defunc_0_f_res_105243 =
                    btoi_bool_i64(defunc_0_p_res_105242);
            
            // write mapped values results to memory
            { }
            x_105237 = x_105237;
            // Read next values
            {
                x_105238 = defunc_0_f_res_105243;
            }
            
            int64_t defunc_1_op_res_105239 = add64(x_105237, x_105238);
            
            ((int64_t *) mem_100726.mem)[gtid_105236] = defunc_1_op_res_105239;
            x_105237 = defunc_1_op_res_105239;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109979_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109979_end -
                 futhark_mc_scan_stage_1_parloop_109979_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_109979_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_109979_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_109979_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_109980 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96725;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100726;
};
static int futhark_mc_scan_stage_3_parloop_109981(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_105235, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_109980
    *futhark_mc_scan_stage_3_parloop_struct_109980 =
    (struct futhark_mc_scan_stage_3_parloop_struct_109980 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_109980->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_109981_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_109981_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_109980->free_n_92399;
    int64_t gtid_96725 =
            futhark_mc_scan_stage_3_parloop_struct_109980->free_gtid_96725;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_109980->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100726 = {.desc ="mem_100726", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_109980->free_mem_100726,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105586 = start;
    int64_t x_105583;
    int64_t x_105584;
    
    if (iter_105586 == (int64_t) 0) {
        x_105583 = (int64_t) 0;
    } else {
        x_105583 = ((int64_t *) mem_100726.mem)[iter_105586 - (int64_t) 1];
    }
    for (; iter_105586 < end; iter_105586++) {
        int64_t gtid_105236 = iter_105586;
        
        // stage 3 scan body
        {
            double x_105240;
            
            x_105240 = ((double *) Y_mem_100186.mem)[gtid_96725 * n_92399 +
                                                     gtid_105236];
            
            bool isnan_res_105241;
            
            isnan_res_105241 = futrts_isnan64(x_105240);
            
            bool defunc_0_p_res_105242 = !isnan_res_105241;
            int64_t defunc_0_f_res_105243 =
                    btoi_bool_i64(defunc_0_p_res_105242);
            
            x_105583 = x_105583;
            x_105584 = defunc_0_f_res_105243;
            
            int64_t defunc_1_op_res_105585 = add64(x_105583, x_105584);
            
            ((int64_t *) mem_100726.mem)[gtid_105236] = defunc_1_op_res_105585;
            x_105583 = defunc_1_op_res_105585;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_109981_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_109981_end -
                 futhark_mc_scan_stage_3_parloop_109981_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_109981_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_109981_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_109981_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_109976(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105235 = tid;
    int num_tasks_105573 = info.nsubtasks;
    struct futhark_mc_task_109975 *futhark_mc_task_109975 =
                                  (struct futhark_mc_task_109975 *) args;
    struct futhark_context *ctx = futhark_mc_task_109975->ctx;
    uint64_t futhark_mc_segscan_task_109976_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_109976_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109975->free_n_92399;
    int64_t gtid_96725 = futhark_mc_task_109975->free_gtid_96725;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109975->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100726 = {.desc ="mem_100726", .mem =
                                  futhark_mc_task_109975->free_mem_100726,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_105580_cached_sizze_109977 = 0;
    unsigned char *scan_stage_2_accum_mem_105580 = NULL;
    int64_t iter_105574;
    struct futhark_mc_scan_stage_1_parloop_struct_109978
    futhark_mc_scan_stage_1_parloop_struct_109978;
    
    futhark_mc_scan_stage_1_parloop_struct_109978.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_109978.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_109978.free_gtid_96725 = gtid_96725;
    futhark_mc_scan_stage_1_parloop_struct_109978.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_109978.free_mem_100726 =
        mem_100726.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_109979_task;
    
    futhark_mc_scan_stage_1_parloop_109979_task.name =
        "futhark_mc_scan_stage_1_parloop_109979";
    futhark_mc_scan_stage_1_parloop_109979_task.fn =
        futhark_mc_scan_stage_1_parloop_109979;
    futhark_mc_scan_stage_1_parloop_109979_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_109978;
    futhark_mc_scan_stage_1_parloop_109979_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_109979_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_109979_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_109979_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_109979_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_109979_task);
    
    if (futhark_mc_scan_stage_1_parloop_109979_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_109979_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_109979_total_end -
                 futhark_mc_scan_stage_1_parloop_109979_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109979_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109979_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_109979_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_105573)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_105575;
        int64_t x_105576;
        int64_t offset_105578 = (int64_t) 0;
        int64_t offset_index_105579 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_105580_cached_sizze_109977 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_105580 =
                realloc(scan_stage_2_accum_mem_105580, (int64_t) 8);
            scan_stage_2_accum_mem_105580_cached_sizze_109977 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_105580)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_105582 = 0; i_105582 < num_tasks_105573 - 1;
             i_105582++) {
            offset_105578 = squot64(n_92399, sext_i32_i64(num_tasks_105573));
            if (slt64(sext_i32_i64(i_105582), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_105573)))) {
                offset_105578 += (int64_t) 1;
            }
            offset_index_105579 += offset_105578;
            
            int64_t gtid_105236 = offset_index_105579;
            double x_105240;
            
            x_105240 = ((double *) Y_mem_100186.mem)[gtid_96725 * n_92399 +
                                                     gtid_105236];
            
            bool isnan_res_105241;
            
            isnan_res_105241 = futrts_isnan64(x_105240);
            
            bool defunc_0_p_res_105242 = !isnan_res_105241;
            int64_t defunc_0_f_res_105243 =
                    btoi_bool_i64(defunc_0_p_res_105242);
            
            // Read carry in
            {
                x_105575 =
                    ((int64_t *) scan_stage_2_accum_mem_105580)[(int64_t) 0];
            }
            // Read next values
            {
                x_105576 = ((int64_t *) mem_100726.mem)[offset_index_105579 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_105577 = add64(x_105575, x_105576);
            
            ((int64_t *) mem_100726.mem)[offset_index_105579 - (int64_t) 1] =
                defunc_1_op_res_105577;
            ((int64_t *) scan_stage_2_accum_mem_105580)[(int64_t) 0] =
                defunc_1_op_res_105577;
        }
        
        int64_t iter_105586 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_109980
        futhark_mc_scan_stage_3_parloop_struct_109980;
        
        futhark_mc_scan_stage_3_parloop_struct_109980.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_109980.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_109980.free_gtid_96725 =
            gtid_96725;
        futhark_mc_scan_stage_3_parloop_struct_109980.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_109980.free_mem_100726 =
            mem_100726.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_109981_task;
        
        futhark_mc_scan_stage_3_parloop_109981_task.name =
            "futhark_mc_scan_stage_3_parloop_109981";
        futhark_mc_scan_stage_3_parloop_109981_task.fn =
            futhark_mc_scan_stage_3_parloop_109981;
        futhark_mc_scan_stage_3_parloop_109981_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_109980;
        futhark_mc_scan_stage_3_parloop_109981_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_109981_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_109981_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_109981_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_109981_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_109981_task);
        
        if (futhark_mc_scan_stage_3_parloop_109981_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_109981_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_109981_total_end -
                     futhark_mc_scan_stage_3_parloop_109981_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109981_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109981_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_109981_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_105580);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_109976_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_109976_end -
                 futhark_mc_segscan_task_109976_start;
        
        ctx->futhark_mc_segscan_task_109976_runs[tid]++;
        ctx->futhark_mc_segscan_task_109976_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_109976_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109982 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96725;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100726;
    unsigned char *free_mem_100729;
    unsigned char *free_mem_100732;
};
struct futhark_mc_segmap_parloop_struct_109984 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_96725;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100726;
    unsigned char *free_mem_100729;
    unsigned char *free_mem_100732;
};
static int futhark_mc_segmap_parloop_109985(void *args, int64_t start,
                                            int64_t end, int flat_tid_105244,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109984
    *futhark_mc_segmap_parloop_struct_109984 =
    (struct futhark_mc_segmap_parloop_struct_109984 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109984->ctx;
    uint64_t futhark_mc_segmap_parloop_109985_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109985_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109984->free_n_92399;
    int64_t gtid_96725 =
            futhark_mc_segmap_parloop_struct_109984->free_gtid_96725;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109984->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100726 = {.desc ="mem_100726", .mem =
                                  futhark_mc_segmap_parloop_struct_109984->free_mem_100726,
                                  .size =0, .references =NULL};
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_segmap_parloop_struct_109984->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_segmap_parloop_struct_109984->free_mem_100732,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105590 = start;
    
    for (; iter_105590 < end; iter_105590++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105593 = n_92399;
        int64_t gtid_105245 = iter_105590;
        int64_t remnant_105594 = iter_105590 - gtid_105245;
        double x_105246;
        
        x_105246 = ((double *) Y_mem_100186.mem)[gtid_96725 * n_92399 +
                                                 gtid_105245];
        
        bool isnan_res_105247;
        
        isnan_res_105247 = futrts_isnan64(x_105246);
        
        bool defunc_0_p_res_105248 = !isnan_res_105247;
        int64_t defunc_1_f_res_105249;
        
        if (defunc_0_p_res_105248) {
            int64_t x_105591;
            
            x_105591 = ((int64_t *) mem_100726.mem)[gtid_105245];
            
            int64_t defunc_1_f_res_t_res_105592 = sub64(x_105591, (int64_t) 1);
            
            defunc_1_f_res_105249 = defunc_1_f_res_t_res_105592;
        } else {
            defunc_1_f_res_105249 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_105249) &&
            slt64(defunc_1_f_res_105249, n_92399)) {
            ((int64_t *) mem_100732.mem)[defunc_1_f_res_105249] = gtid_105245;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_105249) &&
            slt64(defunc_1_f_res_105249, n_92399)) {
            ((double *) mem_100729.mem)[defunc_1_f_res_105249] = x_105246;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109985_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109985_end -
                 futhark_mc_segmap_parloop_109985_start;
        
        ctx->futhark_mc_segmap_parloop_109985_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109985_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109985_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109983(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105244 = tid;
    int num_tasks_105589 = info.nsubtasks;
    struct futhark_mc_task_109982 *futhark_mc_task_109982 =
                                  (struct futhark_mc_task_109982 *) args;
    struct futhark_context *ctx = futhark_mc_task_109982->ctx;
    uint64_t futhark_mc_segmap_task_109983_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109983_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109982->free_n_92399;
    int64_t gtid_96725 = futhark_mc_task_109982->free_gtid_96725;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109982->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100726 = {.desc ="mem_100726", .mem =
                                  futhark_mc_task_109982->free_mem_100726,
                                  .size =0, .references =NULL};
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_task_109982->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_task_109982->free_mem_100732,
                                  .size =0, .references =NULL};
    int64_t iter_105590;
    struct futhark_mc_segmap_parloop_struct_109984
    futhark_mc_segmap_parloop_struct_109984;
    
    futhark_mc_segmap_parloop_struct_109984.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109984.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109984.free_gtid_96725 = gtid_96725;
    futhark_mc_segmap_parloop_struct_109984.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109984.free_mem_100726 = mem_100726.mem;
    futhark_mc_segmap_parloop_struct_109984.free_mem_100729 = mem_100729.mem;
    futhark_mc_segmap_parloop_struct_109984.free_mem_100732 = mem_100732.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109985_task;
    
    futhark_mc_segmap_parloop_109985_task.name =
        "futhark_mc_segmap_parloop_109985";
    futhark_mc_segmap_parloop_109985_task.fn = futhark_mc_segmap_parloop_109985;
    futhark_mc_segmap_parloop_109985_task.args =
        &futhark_mc_segmap_parloop_struct_109984;
    futhark_mc_segmap_parloop_109985_task.iterations = iterations;
    futhark_mc_segmap_parloop_109985_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109985_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109985_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109985_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109985_task);
    
    if (futhark_mc_segmap_parloop_109985_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109985_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109985_total_end -
                 futhark_mc_segmap_parloop_109985_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109985_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109985_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109985_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109983_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109983_end -
                 futhark_mc_segmap_task_109983_start;
        
        ctx->futhark_mc_segmap_task_109983_runs[tid]++;
        ctx->futhark_mc_segmap_task_109983_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109983_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109986 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100735;
};
struct futhark_mc_segmap_parloop_struct_109988 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100735;
};
static int futhark_mc_segmap_parloop_109989(void *args, int64_t start,
                                            int64_t end, int flat_tid_105252,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109988
    *futhark_mc_segmap_parloop_struct_109988 =
    (struct futhark_mc_segmap_parloop_struct_109988 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109988->ctx;
    uint64_t futhark_mc_segmap_parloop_109989_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109989_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109988->free_n_92399;
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_segmap_parloop_struct_109988->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_segmap_parloop_struct_109988->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105596 = start;
    
    for (; iter_105596 < end; iter_105596++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105597 = n_92399;
        int64_t gtid_105253 = iter_105596;
        int64_t remnant_105598 = iter_105596 - gtid_105253;
        int64_t x_105254;
        
        x_105254 = ((int64_t *) mem_100732.mem)[gtid_105253];
        
        int64_t defunc_0_f_res_105255 = add64((int64_t) 1, x_105254);
        
        ((int64_t *) mem_100735.mem)[gtid_105253] = defunc_0_f_res_105255;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109989_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109989_end -
                 futhark_mc_segmap_parloop_109989_start;
        
        ctx->futhark_mc_segmap_parloop_109989_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109989_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109989_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109987(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105252 = tid;
    int num_tasks_105595 = info.nsubtasks;
    struct futhark_mc_task_109986 *futhark_mc_task_109986 =
                                  (struct futhark_mc_task_109986 *) args;
    struct futhark_context *ctx = futhark_mc_task_109986->ctx;
    uint64_t futhark_mc_segmap_task_109987_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109987_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109986->free_n_92399;
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_task_109986->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_task_109986->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t iter_105596;
    struct futhark_mc_segmap_parloop_struct_109988
    futhark_mc_segmap_parloop_struct_109988;
    
    futhark_mc_segmap_parloop_struct_109988.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109988.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109988.free_mem_100732 = mem_100732.mem;
    futhark_mc_segmap_parloop_struct_109988.free_mem_100735 = mem_100735.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109989_task;
    
    futhark_mc_segmap_parloop_109989_task.name =
        "futhark_mc_segmap_parloop_109989";
    futhark_mc_segmap_parloop_109989_task.fn = futhark_mc_segmap_parloop_109989;
    futhark_mc_segmap_parloop_109989_task.args =
        &futhark_mc_segmap_parloop_struct_109988;
    futhark_mc_segmap_parloop_109989_task.iterations = iterations;
    futhark_mc_segmap_parloop_109989_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109989_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109989_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109989_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109989_task);
    
    if (futhark_mc_segmap_parloop_109989_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109989_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109989_total_end -
                 futhark_mc_segmap_parloop_109989_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109989_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109989_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109989_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109987_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109987_end -
                 futhark_mc_segmap_task_109987_start;
        
        ctx->futhark_mc_segmap_task_109987_runs[tid]++;
        ctx->futhark_mc_segmap_task_109987_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109987_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109990 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100738;
};
struct futhark_mc_segmap_parloop_struct_109992 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100738;
};
static int futhark_mc_segmap_parloop_109993(void *args, int64_t start,
                                            int64_t end, int flat_tid_105256,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109992
    *futhark_mc_segmap_parloop_struct_109992 =
    (struct futhark_mc_segmap_parloop_struct_109992 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109992->ctx;
    uint64_t futhark_mc_segmap_parloop_109993_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109993_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109992->free_q_92401;
    int64_t last_res_96737 =
            futhark_mc_segmap_parloop_struct_109992->free_last_res_96737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_segmap_parloop_struct_109992->free_mem_100738,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105600 = start;
    
    for (; iter_105600 < end; iter_105600++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105601 = q_92401;
        int64_t gtid_105257 = iter_105600;
        int64_t remnant_105602 = iter_105600 - gtid_105257;
        bool cond_105258 = sle64(last_res_96737, gtid_105257);
        double defunc_0_f_res_105259;
        
        if (cond_105258) {
            defunc_0_f_res_105259 = 0.0;
        } else {
            defunc_0_f_res_105259 = 1.0;
        }
        ((double *) mem_100738.mem)[gtid_105257] = defunc_0_f_res_105259;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109993_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109993_end -
                 futhark_mc_segmap_parloop_109993_start;
        
        ctx->futhark_mc_segmap_parloop_109993_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109993_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109993_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109991(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105256 = tid;
    int num_tasks_105599 = info.nsubtasks;
    struct futhark_mc_task_109990 *futhark_mc_task_109990 =
                                  (struct futhark_mc_task_109990 *) args;
    struct futhark_context *ctx = futhark_mc_task_109990->ctx;
    uint64_t futhark_mc_segmap_task_109991_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109991_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_109990->free_q_92401;
    int64_t last_res_96737 = futhark_mc_task_109990->free_last_res_96737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_task_109990->free_mem_100738,
                                  .size =0, .references =NULL};
    int64_t iter_105600;
    struct futhark_mc_segmap_parloop_struct_109992
    futhark_mc_segmap_parloop_struct_109992;
    
    futhark_mc_segmap_parloop_struct_109992.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109992.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109992.free_last_res_96737 =
        last_res_96737;
    futhark_mc_segmap_parloop_struct_109992.free_mem_100738 = mem_100738.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109993_task;
    
    futhark_mc_segmap_parloop_109993_task.name =
        "futhark_mc_segmap_parloop_109993";
    futhark_mc_segmap_parloop_109993_task.fn = futhark_mc_segmap_parloop_109993;
    futhark_mc_segmap_parloop_109993_task.args =
        &futhark_mc_segmap_parloop_struct_109992;
    futhark_mc_segmap_parloop_109993_task.iterations = iterations;
    futhark_mc_segmap_parloop_109993_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109993_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109993_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109993_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109993_task);
    
    if (futhark_mc_segmap_parloop_109993_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109993_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109993_total_end -
                 futhark_mc_segmap_parloop_109993_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109993_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109993_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109993_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109991_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109991_end -
                 futhark_mc_segmap_task_109991_start;
        
        ctx->futhark_mc_segmap_task_109991_runs[tid]++;
        ctx->futhark_mc_segmap_task_109991_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109991_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_109994 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96737;
    int64_t free_min_arg_96756;
    int64_t free_min_arg_96757;
    int64_t free_min_res_96758;
    double free_max_res_96762;
    unsigned char *free_mem_100729;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100735;
    int64_t free_bytes_100737;
    unsigned char *free_mem_100738;
    unsigned char *free_mem_100777;
    unsigned char *free_mem_100780;
};
struct futhark_mc_segmap_parloop_struct_109996 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96737;
    int64_t free_min_arg_96756;
    int64_t free_min_arg_96757;
    int64_t free_min_res_96758;
    double free_max_res_96762;
    unsigned char *free_mem_100729;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100735;
    int64_t free_bytes_100737;
    unsigned char *free_mem_100738;
    unsigned char *free_mem_100777;
    unsigned char *free_mem_100780;
};
static int futhark_mc_segmap_parloop_109997(void *args, int64_t start,
                                            int64_t end, int flat_tid_105416,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109996
    *futhark_mc_segmap_parloop_struct_109996 =
    (struct futhark_mc_segmap_parloop_struct_109996 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109996->ctx;
    uint64_t futhark_mc_segmap_parloop_109997_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109997_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109996->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109996->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109996->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109996->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109996->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109996->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109996->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109996->free_loop_cond_92426;
    int64_t last_res_96737 =
            futhark_mc_segmap_parloop_struct_109996->free_last_res_96737;
    int64_t min_arg_96756 =
            futhark_mc_segmap_parloop_struct_109996->free_min_arg_96756;
    int64_t min_arg_96757 =
            futhark_mc_segmap_parloop_struct_109996->free_min_arg_96757;
    int64_t min_res_96758 =
            futhark_mc_segmap_parloop_struct_109996->free_min_res_96758;
    double max_res_96762 =
           futhark_mc_segmap_parloop_struct_109996->free_max_res_96762;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t bytes_100737 =
            futhark_mc_segmap_parloop_struct_109996->free_bytes_100737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100738,
                                  .size =0, .references =NULL};
    struct memblock mem_100777 = {.desc ="mem_100777", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100777,
                                  .size =0, .references =NULL};
    struct memblock mem_100780 = {.desc ="mem_100780", .mem =
                                  futhark_mc_segmap_parloop_struct_109996->free_mem_100780,
                                  .size =0, .references =NULL};
    size_t mem_105504_cached_sizze_109998 = 0;
    unsigned char *mem_105504 = NULL;
    size_t mem_105506_cached_sizze_109999 = 0;
    unsigned char *mem_105506 = NULL;
    int64_t iterations = end - start;
    int64_t iter_105604 = start;
    
    if (mem_105504_cached_sizze_109998 < (size_t) bytes_100737) {
        mem_105504 = realloc(mem_105504, bytes_100737);
        mem_105504_cached_sizze_109998 = bytes_100737;
    }
    if (mem_105506_cached_sizze_109999 < (size_t) bytes_100737) {
        mem_105506 = realloc(mem_105506, bytes_100737);
        mem_105506_cached_sizze_109999 = bytes_100737;
    }
    for (; iter_105604 < end; iter_105604++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105708 = n_m_92409;
        int64_t gtid_105417 = iter_105604;
        int64_t remnant_105709 = iter_105604 - gtid_105417;
        int64_t min_arg_105418 = mul64(jump_92403, gtid_105417);
        int64_t min_res_105419 = smin64(i_92415, min_arg_105418);
        int64_t defunc_0_g_res_105420 = add64((int64_t) 1, min_res_105419);
        bool init_idx_105421;
        int64_t init_idx_105422;
        int64_t init_idx_105423;
        bool loop_while_105605;
        int64_t low_105606;
        int64_t high_105607;
        
        loop_while_105605 = x_92416;
        low_105606 = (int64_t) 0;
        high_105607 = i_92415;
        while (loop_while_105605) {
            int64_t x_105608 = add64(low_105606, high_105607);
            int64_t mid_105609 = sdiv64(x_105608, (int64_t) 2);
            bool x_105610 = sle64((int64_t) 0, mid_105609);
            bool y_105611 = slt64(mid_105609, n_92399);
            bool bounds_check_105612 = x_105610 && y_105611;
            bool index_certs_105613;
            
            if (!bounds_check_105612) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_105609,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_105614;
            
            mid_id_105614 = ((int64_t *) mem_100735.mem)[mid_105609];
            
            bool cond_105615 = slt64(mid_id_105614, (int64_t) 0);
            int64_t mid_idx_105616;
            
            if (cond_105615) {
                mid_idx_105616 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_105616 = mid_id_105614;
            }
            
            bool cond_105617 = sle64(defunc_0_g_res_105420, mid_idx_105616);
            int64_t loopres_105618;
            int64_t loopres_105619;
            
            if (cond_105617) {
                int64_t loopres_t_res_105620 = sub64(mid_105609, (int64_t) 1);
                
                loopres_105618 = low_105606;
                loopres_105619 = loopres_t_res_105620;
            } else {
                int64_t loopres_f_res_105621 = add64((int64_t) 1, mid_105609);
                
                loopres_105618 = loopres_f_res_105621;
                loopres_105619 = high_105607;
            }
            
            bool loop_cond_105622 = sle64(loopres_105618, loopres_105619);
            bool loop_while_tmp_105710 = loop_cond_105622;
            int64_t low_tmp_105711 = loopres_105618;
            int64_t high_tmp_105712 = loopres_105619;
            
            loop_while_105605 = loop_while_tmp_105710;
            low_105606 = low_tmp_105711;
            high_105607 = high_tmp_105712;
        }
        init_idx_105421 = loop_while_105605;
        init_idx_105422 = low_105606;
        init_idx_105423 = high_105607;
        
        bool idx_105442;
        int64_t idx_105443;
        int64_t idx_105444;
        int64_t idx_105445;
        bool loop_while_105623;
        int64_t l_idx_105624;
        int64_t r_idx_105625;
        int64_t span_105626;
        
        loop_while_105623 = loop_cond_92426;
        l_idx_105624 = init_idx_105422;
        r_idx_105625 = init_idx_105422;
        span_105626 = (int64_t) 1;
        while (loop_while_105623) {
            int64_t max_arg_105627 = sub64(l_idx_105624, (int64_t) 1);
            int64_t max_res_105628 = smax64((int64_t) 0, max_arg_105627);
            int64_t min_arg_105629 = add64((int64_t) 1, r_idx_105625);
            int64_t min_res_105630 = smin64(min_arg_96756, min_arg_105629);
            bool x_105631 = sle64((int64_t) 0, max_res_105628);
            bool y_105632 = slt64(max_res_105628, n_92399);
            bool bounds_check_105633 = x_105631 && y_105632;
            bool index_certs_105634;
            
            if (!bounds_check_105633) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_105628,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105635;
            
            x_105635 = ((int64_t *) mem_100735.mem)[max_res_105628];
            
            int64_t abs_arg_105636 = sub64(x_105635, defunc_0_g_res_105420);
            int64_t abs_res_105637 = abs64(abs_arg_105636);
            bool x_105638 = sle64((int64_t) 0, min_res_105630);
            bool y_105639 = slt64(min_res_105630, n_92399);
            bool bounds_check_105640 = x_105638 && y_105639;
            bool index_certs_105641;
            
            if (!bounds_check_105640) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_105630,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105642;
            
            x_105642 = ((int64_t *) mem_100735.mem)[min_res_105630];
            
            int64_t abs_arg_105643 = sub64(x_105642, defunc_0_g_res_105420);
            int64_t abs_res_105644 = abs64(abs_arg_105643);
            bool cond_105645 = max_res_105628 == l_idx_105624;
            int64_t loopres_105646;
            int64_t loopres_105647;
            int64_t loopres_105648;
            
            if (cond_105645) {
                loopres_105646 = l_idx_105624;
                loopres_105647 = r_idx_105625;
                loopres_105648 = min_res_92421;
            } else {
                bool cond_105649 = slt64(abs_res_105637, abs_res_105644);
                bool cond_f_res_105650 = min_res_105630 == r_idx_105625;
                bool x_105651 = !cond_105649;
                bool y_105652 = cond_f_res_105650 && x_105651;
                bool cond_105653 = cond_105649 || y_105652;
                int64_t loopres_f_res_105654;
                
                if (cond_105653) {
                    loopres_f_res_105654 = max_res_105628;
                } else {
                    loopres_f_res_105654 = l_idx_105624;
                }
                
                int64_t loopres_f_res_105655;
                
                if (cond_105653) {
                    loopres_f_res_105655 = r_idx_105625;
                } else {
                    loopres_f_res_105655 = min_res_105630;
                }
                
                int64_t loopres_f_res_105656;
                
                if (cond_105653) {
                    int64_t loopres_f_res_t_res_105657 = add64((int64_t) 1,
                                                               span_105626);
                    
                    loopres_f_res_105656 = loopres_f_res_t_res_105657;
                } else {
                    int64_t loopres_f_res_f_res_105658 = add64((int64_t) 1,
                                                               span_105626);
                    
                    loopres_f_res_105656 = loopres_f_res_f_res_105658;
                }
                loopres_105646 = loopres_f_res_105654;
                loopres_105647 = loopres_f_res_105655;
                loopres_105648 = loopres_f_res_105656;
            }
            
            bool loop_cond_105659 = slt64(loopres_105648, min_res_92421);
            bool loop_while_tmp_105713 = loop_cond_105659;
            int64_t l_idx_tmp_105714 = loopres_105646;
            int64_t r_idx_tmp_105715 = loopres_105647;
            int64_t span_tmp_105716 = loopres_105648;
            
            loop_while_105623 = loop_while_tmp_105713;
            l_idx_105624 = l_idx_tmp_105714;
            r_idx_105625 = r_idx_tmp_105715;
            span_105626 = span_tmp_105716;
        }
        idx_105442 = loop_while_105623;
        idx_105443 = l_idx_105624;
        idx_105444 = r_idx_105625;
        idx_105445 = span_105626;
        
        int64_t min_res_105483 = smin64(min_arg_96757, idx_105443);
        int64_t max_res_105484 = smax64((int64_t) 0, min_res_105483);
        int64_t x_105485 = add64(min_res_96758, max_res_105484);
        int64_t r_105486 = sub64(x_105485, (int64_t) 1);
        bool x_105487 = sle64((int64_t) 0, r_105486);
        bool y_105488 = slt64(r_105486, n_92399);
        bool bounds_check_105489 = x_105487 && y_105488;
        bool index_certs_105490;
        
        if (!bounds_check_105489) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_105486,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_105491;
        
        x_105491 = ((int64_t *) mem_100732.mem)[r_105486];
        
        int64_t abs_arg_105492 = sub64(x_105491, min_res_105419);
        int64_t abs_res_105493 = abs64(abs_arg_105492);
        bool x_105494 = sle64((int64_t) 0, max_res_105484);
        bool y_105495 = slt64(max_res_105484, n_92399);
        bool bounds_check_105496 = x_105494 && y_105495;
        bool index_certs_105497;
        
        if (!bounds_check_105496) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_105484,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_105498;
        
        x_105498 = ((int64_t *) mem_100732.mem)[max_res_105484];
        
        int64_t abs_arg_105499 = sub64(x_105498, min_res_105419);
        int64_t abs_res_105500 = abs64(abs_arg_105499);
        int64_t max_res_105501 = smax64(abs_res_105493, abs_res_105500);
        double defunc_0_f_res_105502 = sitofp_i64_f64(max_res_105501);
        double defunc_1_f_res_105503 = max_res_96762 + defunc_0_f_res_105502;
        double defunc_2_reduce_res_105508;
        double defunc_2_reduce_res_105509;
        double defunc_2_reduce_res_105510;
        double redout_105661;
        double redout_105662;
        double redout_105663;
        
        redout_105661 = 0.0;
        redout_105662 = 0.0;
        redout_105663 = 0.0;
        for (int64_t i_105660 = 0; i_105660 < q_92401; i_105660++) {
            double x_105666;
            
            x_105666 = ((double *) mem_100738.mem)[i_105660];
            
            bool cond_105667 = sle64(last_res_96737, i_105660);
            int64_t defunc_0_f_res_105668;
            
            if (cond_105667) {
                defunc_0_f_res_105668 = (int64_t) 0;
            } else {
                int64_t i_105669 = add64(max_res_105484, i_105660);
                int64_t defunc_0_add_arg_105670;
                
                defunc_0_add_arg_105670 =
                    ((int64_t *) mem_100732.mem)[i_105669];
                
                int64_t defunc_1_add_res_105671 = add64((int64_t) 1,
                                                        defunc_0_add_arg_105670);
                
                defunc_0_f_res_105668 = defunc_1_add_res_105671;
            }
            
            int64_t binop_p_105672 = sub64(defunc_0_f_res_105668,
                                           min_res_105419);
            double defunc_0_f_res_105673 = sitofp_i64_f64(binop_p_105672);
            double abs_res_105674 = fabs(defunc_0_f_res_105673);
            double tmp1_105675 = abs_res_105674 / defunc_1_f_res_105503;
            double x_105676 = tmp1_105675 * tmp1_105675;
            double y_105677 = tmp1_105675 * x_105676;
            double tmp2_105678 = 1.0 - y_105677;
            double x_105679 = tmp2_105678 * tmp2_105678;
            double tmp3_105680 = tmp2_105678 * x_105679;
            double tmp4_105681 = x_105666 * tmp3_105680;
            double defunc_1_f_res_105682 = defunc_0_f_res_105673 * tmp4_105681;
            double defunc_1_f_res_105683 = defunc_0_f_res_105673 *
                   defunc_1_f_res_105682;
            double defunc_1_op_res_105684 = tmp4_105681 + redout_105661;
            double defunc_1_op_res_105685 = defunc_1_f_res_105682 +
                   redout_105662;
            double defunc_1_op_res_105686 = defunc_1_f_res_105683 +
                   redout_105663;
            
            ((double *) mem_105504)[i_105660] = defunc_1_f_res_105682;
            ((double *) mem_105506)[i_105660] = tmp4_105681;
            
            double redout_tmp_105717 = defunc_1_op_res_105684;
            double redout_tmp_105718 = defunc_1_op_res_105685;
            double redout_tmp_105719 = defunc_1_op_res_105686;
            
            redout_105661 = redout_tmp_105717;
            redout_105662 = redout_tmp_105718;
            redout_105663 = redout_tmp_105719;
        }
        defunc_2_reduce_res_105508 = redout_105661;
        defunc_2_reduce_res_105509 = redout_105662;
        defunc_2_reduce_res_105510 = redout_105663;
        
        double x_105542 = defunc_2_reduce_res_105508 *
               defunc_2_reduce_res_105510;
        double y_105543 = defunc_2_reduce_res_105509 *
               defunc_2_reduce_res_105509;
        double y_105544 = x_105542 - y_105543;
        double det1_105545 = 1.0 / y_105544;
        double a11_105546 = defunc_2_reduce_res_105510 * det1_105545;
        double x_105547 = 0.0 - defunc_2_reduce_res_105509;
        double b11_105548 = det1_105545 * x_105547;
        double c11_105549 = defunc_2_reduce_res_105508 * det1_105545;
        double defunc_2_reduce_res_105550;
        double defunc_2_reduce_res_105551;
        double redout_105690;
        double redout_105691;
        
        redout_105690 = 0.0;
        redout_105691 = 0.0;
        for (int64_t i_105689 = 0; i_105689 < q_92401; i_105689++) {
            double x_105692;
            
            x_105692 = ((double *) mem_105506)[i_105689];
            
            double x_105693;
            
            x_105693 = ((double *) mem_105504)[i_105689];
            
            bool cond_105694 = sle64(last_res_96737, i_105689);
            double defunc_0_f_res_105695;
            
            if (cond_105694) {
                defunc_0_f_res_105695 = 0.0;
            } else {
                int64_t i_105696 = add64(max_res_105484, i_105689);
                double defunc_0_add_arg_105697;
                
                defunc_0_add_arg_105697 = ((double *) mem_100729.mem)[i_105696];
                defunc_0_f_res_105695 = defunc_0_add_arg_105697;
            }
            
            double x_105698 = a11_105546 * x_105692;
            double y_105699 = b11_105548 * x_105693;
            double x_105700 = x_105698 + y_105699;
            double defunc_9_fit_fun_res_105701 = defunc_0_f_res_105695 *
                   x_105700;
            double x_105702 = b11_105548 * x_105692;
            double y_105703 = c11_105549 * x_105693;
            double x_105704 = x_105702 + y_105703;
            double defunc_9_slope_fun_res_105705 = defunc_0_f_res_105695 *
                   x_105704;
            double defunc_1_op_res_105706 = defunc_9_fit_fun_res_105701 +
                   redout_105690;
            double defunc_1_op_res_105707 = defunc_9_slope_fun_res_105705 +
                   redout_105691;
            double redout_tmp_105722 = defunc_1_op_res_105706;
            double redout_tmp_105723 = defunc_1_op_res_105707;
            
            redout_105690 = redout_tmp_105722;
            redout_105691 = redout_tmp_105723;
        }
        defunc_2_reduce_res_105550 = redout_105690;
        defunc_2_reduce_res_105551 = redout_105691;
        ((double *) mem_100777.mem)[gtid_105417] = defunc_2_reduce_res_105550;
        ((double *) mem_100780.mem)[gtid_105417] = defunc_2_reduce_res_105551;
    }
    
  cleanup:
    { }
    free(mem_105504);
    free(mem_105506);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109997_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109997_end -
                 futhark_mc_segmap_parloop_109997_start;
        
        ctx->futhark_mc_segmap_parloop_109997_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109997_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109997_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_109995(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105416 = tid;
    int num_tasks_105603 = info.nsubtasks;
    struct futhark_mc_task_109994 *futhark_mc_task_109994 =
                                  (struct futhark_mc_task_109994 *) args;
    struct futhark_context *ctx = futhark_mc_task_109994->ctx;
    uint64_t futhark_mc_segmap_task_109995_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_109995_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109994->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109994->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109994->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109994->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109994->free_i_92415;
    bool x_92416 = futhark_mc_task_109994->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109994->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109994->free_loop_cond_92426;
    int64_t last_res_96737 = futhark_mc_task_109994->free_last_res_96737;
    int64_t min_arg_96756 = futhark_mc_task_109994->free_min_arg_96756;
    int64_t min_arg_96757 = futhark_mc_task_109994->free_min_arg_96757;
    int64_t min_res_96758 = futhark_mc_task_109994->free_min_res_96758;
    double max_res_96762 = futhark_mc_task_109994->free_max_res_96762;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_task_109994->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_task_109994->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_task_109994->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t bytes_100737 = futhark_mc_task_109994->free_bytes_100737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_task_109994->free_mem_100738,
                                  .size =0, .references =NULL};
    struct memblock mem_100777 = {.desc ="mem_100777", .mem =
                                  futhark_mc_task_109994->free_mem_100777,
                                  .size =0, .references =NULL};
    struct memblock mem_100780 = {.desc ="mem_100780", .mem =
                                  futhark_mc_task_109994->free_mem_100780,
                                  .size =0, .references =NULL};
    int64_t iter_105604;
    struct futhark_mc_segmap_parloop_struct_109996
    futhark_mc_segmap_parloop_struct_109996;
    
    futhark_mc_segmap_parloop_struct_109996.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109996.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109996.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109996.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109996.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109996.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109996.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109996.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109996.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109996.free_last_res_96737 =
        last_res_96737;
    futhark_mc_segmap_parloop_struct_109996.free_min_arg_96756 = min_arg_96756;
    futhark_mc_segmap_parloop_struct_109996.free_min_arg_96757 = min_arg_96757;
    futhark_mc_segmap_parloop_struct_109996.free_min_res_96758 = min_res_96758;
    futhark_mc_segmap_parloop_struct_109996.free_max_res_96762 = max_res_96762;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100729 = mem_100729.mem;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100732 = mem_100732.mem;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100735 = mem_100735.mem;
    futhark_mc_segmap_parloop_struct_109996.free_bytes_100737 = bytes_100737;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100738 = mem_100738.mem;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100777 = mem_100777.mem;
    futhark_mc_segmap_parloop_struct_109996.free_mem_100780 = mem_100780.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109997_task;
    
    futhark_mc_segmap_parloop_109997_task.name =
        "futhark_mc_segmap_parloop_109997";
    futhark_mc_segmap_parloop_109997_task.fn = futhark_mc_segmap_parloop_109997;
    futhark_mc_segmap_parloop_109997_task.args =
        &futhark_mc_segmap_parloop_struct_109996;
    futhark_mc_segmap_parloop_109997_task.iterations = iterations;
    futhark_mc_segmap_parloop_109997_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109997_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109997_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109997_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109997_task);
    
    if (futhark_mc_segmap_parloop_109997_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109997_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109997_total_end -
                 futhark_mc_segmap_parloop_109997_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109997_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109997_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109997_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_109995_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_109995_end -
                 futhark_mc_segmap_task_109995_start;
        
        ctx->futhark_mc_segmap_task_109995_runs[tid]++;
        ctx->futhark_mc_segmap_task_109995_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_109995_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110001 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_96737;
    int64_t free_min_arg_96756;
    int64_t free_min_arg_96757;
    int64_t free_min_res_96758;
    double free_max_res_96762;
    unsigned char *free_mem_100729;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100735;
    int64_t free_bytes_100737;
    unsigned char *free_mem_100738;
    unsigned char *free_mem_100777;
    unsigned char *free_mem_100780;
};
struct futhark_mc_task_110005 {
    struct futhark_context *ctx;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100738;
    int64_t free_min_res_105263;
    int64_t free_max_res_105328;
    double free_defunc_1_f_res_105347;
    double *retval_defunc_2_reduce_res_105350;
    double *retval_defunc_2_reduce_res_105351;
    double *retval_defunc_2_reduce_res_105352;
    unsigned char *retval_mem_105348;
    unsigned char *retval_mem_105349;
};
struct futhark_mc_segred_stage_1_parloop_struct_110010 {
    struct futhark_context *ctx;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100732;
    unsigned char *free_mem_100738;
    int64_t free_min_res_105263;
    int64_t free_max_res_105328;
    double free_defunc_1_f_res_105347;
    unsigned char *free_mem_105348;
    unsigned char *free_mem_105349;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105841;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105843;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105845;
};
static int futhark_mc_segred_stage_1_parloop_110011(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_105780,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110010
    *futhark_mc_segred_stage_1_parloop_struct_110010 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110010 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110010->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110011_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110011_start = get_wall_time();
    
    int64_t last_res_96737 =
            futhark_mc_segred_stage_1_parloop_struct_110010->free_last_res_96737;
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110010->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110010->free_mem_100738,
                                  .size =0, .references =NULL};
    int64_t min_res_105263 =
            futhark_mc_segred_stage_1_parloop_struct_110010->free_min_res_105263;
    int64_t max_res_105328 =
            futhark_mc_segred_stage_1_parloop_struct_110010->free_max_res_105328;
    double defunc_1_f_res_105347 =
           futhark_mc_segred_stage_1_parloop_struct_110010->free_defunc_1_f_res_105347;
    struct memblock mem_105348 = {.desc ="mem_105348", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110010->free_mem_105348,
                                  .size =0, .references =NULL};
    struct memblock mem_105349 = {.desc ="mem_105349", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110010->free_mem_105349,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_105841 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105841",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110010->free_reduce_stage_1_tid_res_arr_mem_105841,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_105843 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105843",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110010->free_reduce_stage_1_tid_res_arr_mem_105843,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_105845 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105845",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110010->free_reduce_stage_1_tid_res_arr_mem_105845,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105847 = start;
    double x_105782;
    double x_105783;
    double x_105785;
    double x_105786;
    double x_105788;
    double x_105789;
    double local_acc_105848 = 0.0;
    double local_acc_105849 = 0.0;
    double local_acc_105850 = 0.0;
    
    for (; iter_105847 < end; iter_105847++) {
        int64_t gtid_105781 = iter_105847;
        double x_105791;
        
        x_105791 = ((double *) mem_100738.mem)[gtid_105781];
        
        bool cond_105792 = sle64(last_res_96737, gtid_105781);
        int64_t defunc_0_f_res_105793;
        
        if (cond_105792) {
            defunc_0_f_res_105793 = (int64_t) 0;
        } else {
            int64_t i_105794 = add64(max_res_105328, gtid_105781);
            int64_t defunc_0_add_arg_105795;
            
            defunc_0_add_arg_105795 = ((int64_t *) mem_100732.mem)[i_105794];
            
            int64_t defunc_1_add_res_105796 = add64((int64_t) 1,
                                                    defunc_0_add_arg_105795);
            
            defunc_0_f_res_105793 = defunc_1_add_res_105796;
        }
        
        int64_t binop_p_105797 = sub64(defunc_0_f_res_105793, min_res_105263);
        double defunc_0_f_res_105798 = sitofp_i64_f64(binop_p_105797);
        double abs_res_105799 = fabs(defunc_0_f_res_105798);
        double tmp1_105800 = abs_res_105799 / defunc_1_f_res_105347;
        double x_105801 = tmp1_105800 * tmp1_105800;
        double y_105802 = tmp1_105800 * x_105801;
        double tmp2_105803 = 1.0 - y_105802;
        double x_105804 = tmp2_105803 * tmp2_105803;
        double tmp3_105805 = tmp2_105803 * x_105804;
        double tmp4_105806 = x_105791 * tmp3_105805;
        double defunc_1_f_res_105807 = defunc_0_f_res_105798 * tmp4_105806;
        double defunc_1_f_res_105808 = defunc_0_f_res_105798 *
               defunc_1_f_res_105807;
        
        // save map-out results
        {
            ((double *) mem_105348.mem)[gtid_105781] = defunc_1_f_res_105807;
            ((double *) mem_105349.mem)[gtid_105781] = tmp4_105806;
        }
        // Load accum params
        {
            x_105782 = local_acc_105848;
        }
        // Load next params
        {
            x_105783 = tmp4_105806;
        }
        // Red body
        {
            double defunc_1_op_res_105784 = x_105782 + x_105783;
            
            local_acc_105848 = defunc_1_op_res_105784;
        }
        // Load accum params
        {
            x_105785 = local_acc_105849;
        }
        // Load next params
        {
            x_105786 = defunc_1_f_res_105807;
        }
        // Red body
        {
            double defunc_1_op_res_105787 = x_105785 + x_105786;
            
            local_acc_105849 = defunc_1_op_res_105787;
        }
        // Load accum params
        {
            x_105788 = local_acc_105850;
        }
        // Load next params
        {
            x_105789 = defunc_1_f_res_105808;
        }
        // Red body
        {
            double defunc_1_op_res_105790 = x_105788 + x_105789;
            
            local_acc_105850 = defunc_1_op_res_105790;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_105841.mem)[flat_tid_105780] =
        local_acc_105848;
    ((double *) reduce_stage_1_tid_res_arr_mem_105843.mem)[flat_tid_105780] =
        local_acc_105849;
    ((double *) reduce_stage_1_tid_res_arr_mem_105845.mem)[flat_tid_105780] =
        local_acc_105850;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110011_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110011_end -
                 futhark_mc_segred_stage_1_parloop_110011_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110011_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110011_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110011_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110006(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105780 = tid;
    int num_tasks_105840 = info.nsubtasks;
    struct futhark_mc_task_110005 *futhark_mc_task_110005 =
                                  (struct futhark_mc_task_110005 *) args;
    struct futhark_context *ctx = futhark_mc_task_110005->ctx;
    uint64_t futhark_mc_segred_task_110006_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110006_start = get_wall_time();
    
    int64_t last_res_96737 = futhark_mc_task_110005->free_last_res_96737;
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_task_110005->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_task_110005->free_mem_100738,
                                  .size =0, .references =NULL};
    int64_t min_res_105263 = futhark_mc_task_110005->free_min_res_105263;
    int64_t max_res_105328 = futhark_mc_task_110005->free_max_res_105328;
    double defunc_1_f_res_105347 =
           futhark_mc_task_110005->free_defunc_1_f_res_105347;
    double defunc_2_reduce_res_105350 =
           *futhark_mc_task_110005->retval_defunc_2_reduce_res_105350;
    double defunc_2_reduce_res_105351 =
           *futhark_mc_task_110005->retval_defunc_2_reduce_res_105351;
    double defunc_2_reduce_res_105352 =
           *futhark_mc_task_110005->retval_defunc_2_reduce_res_105352;
    struct memblock mem_105348 = {.desc ="mem_105348", .mem =
                                  futhark_mc_task_110005->retval_mem_105348,
                                  .size =0, .references =NULL};
    struct memblock mem_105349 = {.desc ="mem_105349", .mem =
                                  futhark_mc_task_110005->retval_mem_105349,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_105841_cached_sizze_110007 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105841 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_105843_cached_sizze_110008 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105843 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_105845_cached_sizze_110009 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105845 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_105841_cached_sizze_110007 <
        (size_t) ((int64_t) 8 * num_tasks_105840)) {
        reduce_stage_1_tid_res_arr_mem_105841 =
            realloc(reduce_stage_1_tid_res_arr_mem_105841, (int64_t) 8 *
                    num_tasks_105840);
        reduce_stage_1_tid_res_arr_mem_105841_cached_sizze_110007 =
            (int64_t) 8 * num_tasks_105840;
    }
    if (reduce_stage_1_tid_res_arr_mem_105843_cached_sizze_110008 <
        (size_t) ((int64_t) 8 * num_tasks_105840)) {
        reduce_stage_1_tid_res_arr_mem_105843 =
            realloc(reduce_stage_1_tid_res_arr_mem_105843, (int64_t) 8 *
                    num_tasks_105840);
        reduce_stage_1_tid_res_arr_mem_105843_cached_sizze_110008 =
            (int64_t) 8 * num_tasks_105840;
    }
    if (reduce_stage_1_tid_res_arr_mem_105845_cached_sizze_110009 <
        (size_t) ((int64_t) 8 * num_tasks_105840)) {
        reduce_stage_1_tid_res_arr_mem_105845 =
            realloc(reduce_stage_1_tid_res_arr_mem_105845, (int64_t) 8 *
                    num_tasks_105840);
        reduce_stage_1_tid_res_arr_mem_105845_cached_sizze_110009 =
            (int64_t) 8 * num_tasks_105840;
    }
    
    int64_t iter_105847;
    struct futhark_mc_segred_stage_1_parloop_struct_110010
    futhark_mc_segred_stage_1_parloop_struct_110010;
    
    futhark_mc_segred_stage_1_parloop_struct_110010.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_last_res_96737 =
        last_res_96737;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_mem_100732 =
        mem_100732.mem;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_mem_100738 =
        mem_100738.mem;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_min_res_105263 =
        min_res_105263;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_max_res_105328 =
        max_res_105328;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_defunc_1_f_res_105347 =
        defunc_1_f_res_105347;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_mem_105348 =
        mem_105348.mem;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_mem_105349 =
        mem_105349.mem;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_reduce_stage_1_tid_res_arr_mem_105841 =
        reduce_stage_1_tid_res_arr_mem_105841;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_reduce_stage_1_tid_res_arr_mem_105843 =
        reduce_stage_1_tid_res_arr_mem_105843;
    futhark_mc_segred_stage_1_parloop_struct_110010.free_reduce_stage_1_tid_res_arr_mem_105845 =
        reduce_stage_1_tid_res_arr_mem_105845;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110011_task;
    
    futhark_mc_segred_stage_1_parloop_110011_task.name =
        "futhark_mc_segred_stage_1_parloop_110011";
    futhark_mc_segred_stage_1_parloop_110011_task.fn =
        futhark_mc_segred_stage_1_parloop_110011;
    futhark_mc_segred_stage_1_parloop_110011_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110010;
    futhark_mc_segred_stage_1_parloop_110011_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110011_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110011_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110011_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110011_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110011_task);
    
    if (futhark_mc_segred_stage_1_parloop_110011_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110011_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110011_total_end -
                 futhark_mc_segred_stage_1_parloop_110011_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110011_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110011_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110011_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_105350 = 0.0;
        defunc_2_reduce_res_105351 = 0.0;
        defunc_2_reduce_res_105352 = 0.0;
    }
    
    double x_105851;
    double x_105852;
    double x_105854;
    double x_105855;
    double x_105857;
    double x_105858;
    
    for (int32_t i_105860 = 0; i_105860 < num_tasks_105840; i_105860++) {
        flat_tid_105780 = i_105860;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_105851 = defunc_2_reduce_res_105350;
            }
            // load next params
            {
                x_105852 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105841)[flat_tid_105780];
            }
            // red body
            {
                double defunc_1_op_res_105853 = x_105851 + x_105852;
                
                defunc_2_reduce_res_105350 = defunc_1_op_res_105853;
            }
            // load acc params
            {
                x_105854 = defunc_2_reduce_res_105351;
            }
            // load next params
            {
                x_105855 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105843)[flat_tid_105780];
            }
            // red body
            {
                double defunc_1_op_res_105856 = x_105854 + x_105855;
                
                defunc_2_reduce_res_105351 = defunc_1_op_res_105856;
            }
            // load acc params
            {
                x_105857 = defunc_2_reduce_res_105352;
            }
            // load next params
            {
                x_105858 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105845)[flat_tid_105780];
            }
            // red body
            {
                double defunc_1_op_res_105859 = x_105857 + x_105858;
                
                defunc_2_reduce_res_105352 = defunc_1_op_res_105859;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_105841);
        free(reduce_stage_1_tid_res_arr_mem_105843);
        free(reduce_stage_1_tid_res_arr_mem_105845);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110006_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110006_end -
                 futhark_mc_segred_task_110006_start;
        
        ctx->futhark_mc_segred_task_110006_runs[tid]++;
        ctx->futhark_mc_segred_task_110006_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110006_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110005->retval_defunc_2_reduce_res_105350 =
            defunc_2_reduce_res_105350;
        *futhark_mc_task_110005->retval_defunc_2_reduce_res_105351 =
            defunc_2_reduce_res_105351;
        *futhark_mc_task_110005->retval_defunc_2_reduce_res_105352 =
            defunc_2_reduce_res_105352;
        futhark_mc_task_110005->retval_mem_105348 = mem_105348.mem;
        futhark_mc_task_110005->retval_mem_105349 = mem_105349.mem;
    }
    return err;
}
struct futhark_mc_task_110012 {
    struct futhark_context *ctx;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100729;
    int64_t free_max_res_105328;
    unsigned char *free_mem_105348;
    unsigned char *free_mem_105349;
    double free_a11_105388;
    double free_b11_105390;
    double free_c11_105391;
    double *retval_defunc_2_reduce_res_105392;
    double *retval_defunc_2_reduce_res_105393;
};
struct futhark_mc_segred_stage_1_parloop_struct_110016 {
    struct futhark_context *ctx;
    int64_t free_last_res_96737;
    unsigned char *free_mem_100729;
    int64_t free_max_res_105328;
    unsigned char *free_mem_105348;
    unsigned char *free_mem_105349;
    double free_a11_105388;
    double free_b11_105390;
    double free_c11_105391;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105862;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_105864;
};
static int futhark_mc_segred_stage_1_parloop_110017(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_105809,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110016
    *futhark_mc_segred_stage_1_parloop_struct_110016 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110016 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110016->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110017_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110017_start = get_wall_time();
    
    int64_t last_res_96737 =
            futhark_mc_segred_stage_1_parloop_struct_110016->free_last_res_96737;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110016->free_mem_100729,
                                  .size =0, .references =NULL};
    int64_t max_res_105328 =
            futhark_mc_segred_stage_1_parloop_struct_110016->free_max_res_105328;
    struct memblock mem_105348 = {.desc ="mem_105348", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110016->free_mem_105348,
                                  .size =0, .references =NULL};
    struct memblock mem_105349 = {.desc ="mem_105349", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110016->free_mem_105349,
                                  .size =0, .references =NULL};
    double a11_105388 =
           futhark_mc_segred_stage_1_parloop_struct_110016->free_a11_105388;
    double b11_105390 =
           futhark_mc_segred_stage_1_parloop_struct_110016->free_b11_105390;
    double c11_105391 =
           futhark_mc_segred_stage_1_parloop_struct_110016->free_c11_105391;
    struct memblock reduce_stage_1_tid_res_arr_mem_105862 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105862",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110016->free_reduce_stage_1_tid_res_arr_mem_105862,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_105864 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_105864",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110016->free_reduce_stage_1_tid_res_arr_mem_105864,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_105866 = start;
    double x_105811;
    double x_105812;
    double x_105814;
    double x_105815;
    double local_acc_105867 = 0.0;
    double local_acc_105868 = 0.0;
    
    for (; iter_105866 < end; iter_105866++) {
        int64_t gtid_105810 = iter_105866;
        double x_105817;
        
        x_105817 = ((double *) mem_105349.mem)[gtid_105810];
        
        double x_105818;
        
        x_105818 = ((double *) mem_105348.mem)[gtid_105810];
        
        bool cond_105819 = sle64(last_res_96737, gtid_105810);
        double defunc_0_f_res_105820;
        
        if (cond_105819) {
            defunc_0_f_res_105820 = 0.0;
        } else {
            int64_t i_105821 = add64(max_res_105328, gtid_105810);
            double defunc_0_add_arg_105822;
            
            defunc_0_add_arg_105822 = ((double *) mem_100729.mem)[i_105821];
            defunc_0_f_res_105820 = defunc_0_add_arg_105822;
        }
        
        double x_105823 = a11_105388 * x_105817;
        double y_105824 = b11_105390 * x_105818;
        double x_105825 = x_105823 + y_105824;
        double defunc_9_fit_fun_res_105826 = defunc_0_f_res_105820 * x_105825;
        double x_105827 = b11_105390 * x_105817;
        double y_105828 = c11_105391 * x_105818;
        double x_105829 = x_105827 + y_105828;
        double defunc_9_slope_fun_res_105830 = defunc_0_f_res_105820 * x_105829;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_105811 = local_acc_105867;
        }
        // Load next params
        {
            x_105812 = defunc_9_fit_fun_res_105826;
        }
        // Red body
        {
            double defunc_1_op_res_105813 = x_105811 + x_105812;
            
            local_acc_105867 = defunc_1_op_res_105813;
        }
        // Load accum params
        {
            x_105814 = local_acc_105868;
        }
        // Load next params
        {
            x_105815 = defunc_9_slope_fun_res_105830;
        }
        // Red body
        {
            double defunc_1_op_res_105816 = x_105814 + x_105815;
            
            local_acc_105868 = defunc_1_op_res_105816;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_105862.mem)[flat_tid_105809] =
        local_acc_105867;
    ((double *) reduce_stage_1_tid_res_arr_mem_105864.mem)[flat_tid_105809] =
        local_acc_105868;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110017_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110017_end -
                 futhark_mc_segred_stage_1_parloop_110017_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110017_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110017_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110017_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110013(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105809 = tid;
    int num_tasks_105861 = info.nsubtasks;
    struct futhark_mc_task_110012 *futhark_mc_task_110012 =
                                  (struct futhark_mc_task_110012 *) args;
    struct futhark_context *ctx = futhark_mc_task_110012->ctx;
    uint64_t futhark_mc_segred_task_110013_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110013_start = get_wall_time();
    
    int64_t last_res_96737 = futhark_mc_task_110012->free_last_res_96737;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_task_110012->free_mem_100729,
                                  .size =0, .references =NULL};
    int64_t max_res_105328 = futhark_mc_task_110012->free_max_res_105328;
    struct memblock mem_105348 = {.desc ="mem_105348", .mem =
                                  futhark_mc_task_110012->free_mem_105348,
                                  .size =0, .references =NULL};
    struct memblock mem_105349 = {.desc ="mem_105349", .mem =
                                  futhark_mc_task_110012->free_mem_105349,
                                  .size =0, .references =NULL};
    double a11_105388 = futhark_mc_task_110012->free_a11_105388;
    double b11_105390 = futhark_mc_task_110012->free_b11_105390;
    double c11_105391 = futhark_mc_task_110012->free_c11_105391;
    double defunc_2_reduce_res_105392 =
           *futhark_mc_task_110012->retval_defunc_2_reduce_res_105392;
    double defunc_2_reduce_res_105393 =
           *futhark_mc_task_110012->retval_defunc_2_reduce_res_105393;
    size_t reduce_stage_1_tid_res_arr_mem_105862_cached_sizze_110014 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105862 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_105864_cached_sizze_110015 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_105864 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_105862_cached_sizze_110014 <
        (size_t) ((int64_t) 8 * num_tasks_105861)) {
        reduce_stage_1_tid_res_arr_mem_105862 =
            realloc(reduce_stage_1_tid_res_arr_mem_105862, (int64_t) 8 *
                    num_tasks_105861);
        reduce_stage_1_tid_res_arr_mem_105862_cached_sizze_110014 =
            (int64_t) 8 * num_tasks_105861;
    }
    if (reduce_stage_1_tid_res_arr_mem_105864_cached_sizze_110015 <
        (size_t) ((int64_t) 8 * num_tasks_105861)) {
        reduce_stage_1_tid_res_arr_mem_105864 =
            realloc(reduce_stage_1_tid_res_arr_mem_105864, (int64_t) 8 *
                    num_tasks_105861);
        reduce_stage_1_tid_res_arr_mem_105864_cached_sizze_110015 =
            (int64_t) 8 * num_tasks_105861;
    }
    
    int64_t iter_105866;
    struct futhark_mc_segred_stage_1_parloop_struct_110016
    futhark_mc_segred_stage_1_parloop_struct_110016;
    
    futhark_mc_segred_stage_1_parloop_struct_110016.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_last_res_96737 =
        last_res_96737;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_mem_100729 =
        mem_100729.mem;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_max_res_105328 =
        max_res_105328;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_mem_105348 =
        mem_105348.mem;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_mem_105349 =
        mem_105349.mem;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_a11_105388 =
        a11_105388;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_b11_105390 =
        b11_105390;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_c11_105391 =
        c11_105391;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_reduce_stage_1_tid_res_arr_mem_105862 =
        reduce_stage_1_tid_res_arr_mem_105862;
    futhark_mc_segred_stage_1_parloop_struct_110016.free_reduce_stage_1_tid_res_arr_mem_105864 =
        reduce_stage_1_tid_res_arr_mem_105864;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110017_task;
    
    futhark_mc_segred_stage_1_parloop_110017_task.name =
        "futhark_mc_segred_stage_1_parloop_110017";
    futhark_mc_segred_stage_1_parloop_110017_task.fn =
        futhark_mc_segred_stage_1_parloop_110017;
    futhark_mc_segred_stage_1_parloop_110017_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110016;
    futhark_mc_segred_stage_1_parloop_110017_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110017_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110017_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110017_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110017_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110017_task);
    
    if (futhark_mc_segred_stage_1_parloop_110017_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110017_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110017_total_end -
                 futhark_mc_segred_stage_1_parloop_110017_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110017_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110017_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110017_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_105392 = 0.0;
        defunc_2_reduce_res_105393 = 0.0;
    }
    
    double x_105869;
    double x_105870;
    double x_105872;
    double x_105873;
    
    for (int32_t i_105875 = 0; i_105875 < num_tasks_105861; i_105875++) {
        flat_tid_105809 = i_105875;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_105869 = defunc_2_reduce_res_105392;
            }
            // load next params
            {
                x_105870 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105862)[flat_tid_105809];
            }
            // red body
            {
                double defunc_1_op_res_105871 = x_105869 + x_105870;
                
                defunc_2_reduce_res_105392 = defunc_1_op_res_105871;
            }
            // load acc params
            {
                x_105872 = defunc_2_reduce_res_105393;
            }
            // load next params
            {
                x_105873 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_105864)[flat_tid_105809];
            }
            // red body
            {
                double defunc_1_op_res_105874 = x_105872 + x_105873;
                
                defunc_2_reduce_res_105393 = defunc_1_op_res_105874;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_105862);
        free(reduce_stage_1_tid_res_arr_mem_105864);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110013_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110013_end -
                 futhark_mc_segred_task_110013_start;
        
        ctx->futhark_mc_segred_task_110013_runs[tid]++;
        ctx->futhark_mc_segred_task_110013_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110013_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110012->retval_defunc_2_reduce_res_105392 =
            defunc_2_reduce_res_105392;
        *futhark_mc_task_110012->retval_defunc_2_reduce_res_105393 =
            defunc_2_reduce_res_105393;
    }
    return err;
}
static int futhark_mc_segmap_parloop_110002(void *args, int64_t start,
                                            int64_t end, int flat_tid_105260,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110001
    *futhark_mc_segmap_parloop_struct_110001 =
    (struct futhark_mc_segmap_parloop_struct_110001 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110001->ctx;
    uint64_t futhark_mc_segmap_parloop_110002_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110002_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110001->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110001->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110001->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110001->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110001->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110001->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110001->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110001->free_loop_cond_92426;
    int64_t last_res_96737 =
            futhark_mc_segmap_parloop_struct_110001->free_last_res_96737;
    int64_t min_arg_96756 =
            futhark_mc_segmap_parloop_struct_110001->free_min_arg_96756;
    int64_t min_arg_96757 =
            futhark_mc_segmap_parloop_struct_110001->free_min_arg_96757;
    int64_t min_res_96758 =
            futhark_mc_segmap_parloop_struct_110001->free_min_res_96758;
    double max_res_96762 =
           futhark_mc_segmap_parloop_struct_110001->free_max_res_96762;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t bytes_100737 =
            futhark_mc_segmap_parloop_struct_110001->free_bytes_100737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100738,
                                  .size =0, .references =NULL};
    struct memblock mem_100777 = {.desc ="mem_100777", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100777,
                                  .size =0, .references =NULL};
    struct memblock mem_100780 = {.desc ="mem_100780", .mem =
                                  futhark_mc_segmap_parloop_struct_110001->free_mem_100780,
                                  .size =0, .references =NULL};
    size_t mem_105348_cached_sizze_110003 = 0;
    unsigned char *mem_105348 = NULL;
    size_t mem_105349_cached_sizze_110004 = 0;
    unsigned char *mem_105349 = NULL;
    int64_t iterations = end - start;
    int64_t iter_105724 = start;
    
    if (mem_105348_cached_sizze_110003 < (size_t) bytes_100737) {
        mem_105348 = realloc(mem_105348, bytes_100737);
        mem_105348_cached_sizze_110003 = bytes_100737;
    }
    if (mem_105349_cached_sizze_110004 < (size_t) bytes_100737) {
        mem_105349 = realloc(mem_105349, bytes_100737);
        mem_105349_cached_sizze_110004 = bytes_100737;
    }
    for (; iter_105724 < end; iter_105724++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105831 = n_m_92409;
        int64_t gtid_105261 = iter_105724;
        int64_t remnant_105832 = iter_105724 - gtid_105261;
        int64_t min_arg_105262 = mul64(jump_92403, gtid_105261);
        int64_t min_res_105263 = smin64(i_92415, min_arg_105262);
        int64_t defunc_0_g_res_105264 = add64((int64_t) 1, min_res_105263);
        bool init_idx_105265;
        int64_t init_idx_105266;
        int64_t init_idx_105267;
        bool loop_while_105725;
        int64_t low_105726;
        int64_t high_105727;
        
        loop_while_105725 = x_92416;
        low_105726 = (int64_t) 0;
        high_105727 = i_92415;
        while (loop_while_105725) {
            int64_t x_105728 = add64(low_105726, high_105727);
            int64_t mid_105729 = sdiv64(x_105728, (int64_t) 2);
            bool x_105730 = sle64((int64_t) 0, mid_105729);
            bool y_105731 = slt64(mid_105729, n_92399);
            bool bounds_check_105732 = x_105730 && y_105731;
            bool index_certs_105733;
            
            if (!bounds_check_105732) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_105729,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_105734;
            
            mid_id_105734 = ((int64_t *) mem_100735.mem)[mid_105729];
            
            bool cond_105735 = slt64(mid_id_105734, (int64_t) 0);
            int64_t mid_idx_105736;
            
            if (cond_105735) {
                mid_idx_105736 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_105736 = mid_id_105734;
            }
            
            bool cond_105737 = sle64(defunc_0_g_res_105264, mid_idx_105736);
            int64_t loopres_105738;
            int64_t loopres_105739;
            
            if (cond_105737) {
                int64_t loopres_t_res_105740 = sub64(mid_105729, (int64_t) 1);
                
                loopres_105738 = low_105726;
                loopres_105739 = loopres_t_res_105740;
            } else {
                int64_t loopres_f_res_105741 = add64((int64_t) 1, mid_105729);
                
                loopres_105738 = loopres_f_res_105741;
                loopres_105739 = high_105727;
            }
            
            bool loop_cond_105742 = sle64(loopres_105738, loopres_105739);
            bool loop_while_tmp_105833 = loop_cond_105742;
            int64_t low_tmp_105834 = loopres_105738;
            int64_t high_tmp_105835 = loopres_105739;
            
            loop_while_105725 = loop_while_tmp_105833;
            low_105726 = low_tmp_105834;
            high_105727 = high_tmp_105835;
        }
        init_idx_105265 = loop_while_105725;
        init_idx_105266 = low_105726;
        init_idx_105267 = high_105727;
        
        bool idx_105286;
        int64_t idx_105287;
        int64_t idx_105288;
        int64_t idx_105289;
        bool loop_while_105743;
        int64_t l_idx_105744;
        int64_t r_idx_105745;
        int64_t span_105746;
        
        loop_while_105743 = loop_cond_92426;
        l_idx_105744 = init_idx_105266;
        r_idx_105745 = init_idx_105266;
        span_105746 = (int64_t) 1;
        while (loop_while_105743) {
            int64_t max_arg_105747 = sub64(l_idx_105744, (int64_t) 1);
            int64_t max_res_105748 = smax64((int64_t) 0, max_arg_105747);
            int64_t min_arg_105749 = add64((int64_t) 1, r_idx_105745);
            int64_t min_res_105750 = smin64(min_arg_96756, min_arg_105749);
            bool x_105751 = sle64((int64_t) 0, max_res_105748);
            bool y_105752 = slt64(max_res_105748, n_92399);
            bool bounds_check_105753 = x_105751 && y_105752;
            bool index_certs_105754;
            
            if (!bounds_check_105753) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_105748,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105755;
            
            x_105755 = ((int64_t *) mem_100735.mem)[max_res_105748];
            
            int64_t abs_arg_105756 = sub64(x_105755, defunc_0_g_res_105264);
            int64_t abs_res_105757 = abs64(abs_arg_105756);
            bool x_105758 = sle64((int64_t) 0, min_res_105750);
            bool y_105759 = slt64(min_res_105750, n_92399);
            bool bounds_check_105760 = x_105758 && y_105759;
            bool index_certs_105761;
            
            if (!bounds_check_105760) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_105750,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105762;
            
            x_105762 = ((int64_t *) mem_100735.mem)[min_res_105750];
            
            int64_t abs_arg_105763 = sub64(x_105762, defunc_0_g_res_105264);
            int64_t abs_res_105764 = abs64(abs_arg_105763);
            bool cond_105765 = max_res_105748 == l_idx_105744;
            int64_t loopres_105766;
            int64_t loopres_105767;
            int64_t loopres_105768;
            
            if (cond_105765) {
                loopres_105766 = l_idx_105744;
                loopres_105767 = r_idx_105745;
                loopres_105768 = min_res_92421;
            } else {
                bool cond_105769 = slt64(abs_res_105757, abs_res_105764);
                bool cond_f_res_105770 = min_res_105750 == r_idx_105745;
                bool x_105771 = !cond_105769;
                bool y_105772 = cond_f_res_105770 && x_105771;
                bool cond_105773 = cond_105769 || y_105772;
                int64_t loopres_f_res_105774;
                
                if (cond_105773) {
                    loopres_f_res_105774 = max_res_105748;
                } else {
                    loopres_f_res_105774 = l_idx_105744;
                }
                
                int64_t loopres_f_res_105775;
                
                if (cond_105773) {
                    loopres_f_res_105775 = r_idx_105745;
                } else {
                    loopres_f_res_105775 = min_res_105750;
                }
                
                int64_t loopres_f_res_105776;
                
                if (cond_105773) {
                    int64_t loopres_f_res_t_res_105777 = add64((int64_t) 1,
                                                               span_105746);
                    
                    loopres_f_res_105776 = loopres_f_res_t_res_105777;
                } else {
                    int64_t loopres_f_res_f_res_105778 = add64((int64_t) 1,
                                                               span_105746);
                    
                    loopres_f_res_105776 = loopres_f_res_f_res_105778;
                }
                loopres_105766 = loopres_f_res_105774;
                loopres_105767 = loopres_f_res_105775;
                loopres_105768 = loopres_f_res_105776;
            }
            
            bool loop_cond_105779 = slt64(loopres_105768, min_res_92421);
            bool loop_while_tmp_105836 = loop_cond_105779;
            int64_t l_idx_tmp_105837 = loopres_105766;
            int64_t r_idx_tmp_105838 = loopres_105767;
            int64_t span_tmp_105839 = loopres_105768;
            
            loop_while_105743 = loop_while_tmp_105836;
            l_idx_105744 = l_idx_tmp_105837;
            r_idx_105745 = r_idx_tmp_105838;
            span_105746 = span_tmp_105839;
        }
        idx_105286 = loop_while_105743;
        idx_105287 = l_idx_105744;
        idx_105288 = r_idx_105745;
        idx_105289 = span_105746;
        
        int64_t min_res_105327 = smin64(min_arg_96757, idx_105287);
        int64_t max_res_105328 = smax64((int64_t) 0, min_res_105327);
        int64_t x_105329 = add64(min_res_96758, max_res_105328);
        int64_t r_105330 = sub64(x_105329, (int64_t) 1);
        bool x_105331 = sle64((int64_t) 0, r_105330);
        bool y_105332 = slt64(r_105330, n_92399);
        bool bounds_check_105333 = x_105331 && y_105332;
        bool index_certs_105334;
        
        if (!bounds_check_105333) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_105330,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_105335;
        
        x_105335 = ((int64_t *) mem_100732.mem)[r_105330];
        
        int64_t abs_arg_105336 = sub64(x_105335, min_res_105263);
        int64_t abs_res_105337 = abs64(abs_arg_105336);
        bool x_105338 = sle64((int64_t) 0, max_res_105328);
        bool y_105339 = slt64(max_res_105328, n_92399);
        bool bounds_check_105340 = x_105338 && y_105339;
        bool index_certs_105341;
        
        if (!bounds_check_105340) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_105328,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_105342;
        
        x_105342 = ((int64_t *) mem_100732.mem)[max_res_105328];
        
        int64_t abs_arg_105343 = sub64(x_105342, min_res_105263);
        int64_t abs_res_105344 = abs64(abs_arg_105343);
        int64_t max_res_105345 = smax64(abs_res_105337, abs_res_105344);
        double defunc_0_f_res_105346 = sitofp_i64_f64(max_res_105345);
        double defunc_1_f_res_105347 = max_res_96762 + defunc_0_f_res_105346;
        double defunc_2_reduce_res_105350;
        double defunc_2_reduce_res_105351;
        double defunc_2_reduce_res_105352;
        int64_t flat_tid_105780 = (int64_t) 0;
        int32_t num_tasks_105840;
        
        defunc_2_reduce_res_105350 = 0.0;
        defunc_2_reduce_res_105351 = 0.0;
        defunc_2_reduce_res_105352 = 0.0;
        
        struct futhark_mc_task_110005 futhark_mc_task_110005;
        
        futhark_mc_task_110005.ctx = ctx;
        futhark_mc_task_110005.free_last_res_96737 = last_res_96737;
        futhark_mc_task_110005.free_mem_100732 = mem_100732.mem;
        futhark_mc_task_110005.free_mem_100738 = mem_100738.mem;
        futhark_mc_task_110005.free_min_res_105263 = min_res_105263;
        futhark_mc_task_110005.free_max_res_105328 = max_res_105328;
        futhark_mc_task_110005.free_defunc_1_f_res_105347 =
            defunc_1_f_res_105347;
        futhark_mc_task_110005.retval_defunc_2_reduce_res_105350 =
            &defunc_2_reduce_res_105350;
        futhark_mc_task_110005.retval_defunc_2_reduce_res_105351 =
            &defunc_2_reduce_res_105351;
        futhark_mc_task_110005.retval_defunc_2_reduce_res_105352 =
            &defunc_2_reduce_res_105352;
        futhark_mc_task_110005.retval_mem_105348 = mem_105348;
        futhark_mc_task_110005.retval_mem_105349 = mem_105349;
        
        struct scheduler_segop futhark_mc_task_110005_task;
        
        futhark_mc_task_110005_task.args = &futhark_mc_task_110005;
        futhark_mc_task_110005_task.top_level_fn =
            futhark_mc_segred_task_110006;
        futhark_mc_task_110005_task.name = "futhark_mc_segred_task_110006";
        futhark_mc_task_110005_task.iterations = q_92401;
        futhark_mc_task_110005_task.task_time =
            &ctx->futhark_mc_segred_task_110006_total_time;
        futhark_mc_task_110005_task.task_iter =
            &ctx->futhark_mc_segred_task_110006_total_iter;
        futhark_mc_task_110005_task.sched = STATIC;
        futhark_mc_task_110005_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110006_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110005_task);
        
        if (futhark_mc_segred_task_110006_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_105384 = defunc_2_reduce_res_105350 *
               defunc_2_reduce_res_105352;
        double y_105385 = defunc_2_reduce_res_105351 *
               defunc_2_reduce_res_105351;
        double y_105386 = x_105384 - y_105385;
        double det1_105387 = 1.0 / y_105386;
        double a11_105388 = defunc_2_reduce_res_105352 * det1_105387;
        double x_105389 = 0.0 - defunc_2_reduce_res_105351;
        double b11_105390 = det1_105387 * x_105389;
        double c11_105391 = defunc_2_reduce_res_105350 * det1_105387;
        double defunc_2_reduce_res_105392;
        double defunc_2_reduce_res_105393;
        int64_t flat_tid_105809 = (int64_t) 0;
        int32_t num_tasks_105861;
        
        defunc_2_reduce_res_105392 = 0.0;
        defunc_2_reduce_res_105393 = 0.0;
        
        struct futhark_mc_task_110012 futhark_mc_task_110012;
        
        futhark_mc_task_110012.ctx = ctx;
        futhark_mc_task_110012.free_last_res_96737 = last_res_96737;
        futhark_mc_task_110012.free_mem_100729 = mem_100729.mem;
        futhark_mc_task_110012.free_max_res_105328 = max_res_105328;
        futhark_mc_task_110012.free_mem_105348 = mem_105348;
        futhark_mc_task_110012.free_mem_105349 = mem_105349;
        futhark_mc_task_110012.free_a11_105388 = a11_105388;
        futhark_mc_task_110012.free_b11_105390 = b11_105390;
        futhark_mc_task_110012.free_c11_105391 = c11_105391;
        futhark_mc_task_110012.retval_defunc_2_reduce_res_105392 =
            &defunc_2_reduce_res_105392;
        futhark_mc_task_110012.retval_defunc_2_reduce_res_105393 =
            &defunc_2_reduce_res_105393;
        
        struct scheduler_segop futhark_mc_task_110012_task;
        
        futhark_mc_task_110012_task.args = &futhark_mc_task_110012;
        futhark_mc_task_110012_task.top_level_fn =
            futhark_mc_segred_task_110013;
        futhark_mc_task_110012_task.name = "futhark_mc_segred_task_110013";
        futhark_mc_task_110012_task.iterations = q_92401;
        futhark_mc_task_110012_task.task_time =
            &ctx->futhark_mc_segred_task_110013_total_time;
        futhark_mc_task_110012_task.task_iter =
            &ctx->futhark_mc_segred_task_110013_total_iter;
        futhark_mc_task_110012_task.sched = STATIC;
        futhark_mc_task_110012_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110013_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110012_task);
        
        if (futhark_mc_segred_task_110013_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_100777.mem)[gtid_105261] = defunc_2_reduce_res_105392;
        ((double *) mem_100780.mem)[gtid_105261] = defunc_2_reduce_res_105393;
    }
    
  cleanup:
    { }
    free(mem_105348);
    free(mem_105349);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110002_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110002_end -
                 futhark_mc_segmap_parloop_110002_start;
        
        ctx->futhark_mc_segmap_parloop_110002_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110002_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110002_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110000(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_105260 = tid;
    int num_tasks_105603 = info.nsubtasks;
    struct futhark_mc_task_109994 *futhark_mc_task_109994 =
                                  (struct futhark_mc_task_109994 *) args;
    struct futhark_context *ctx = futhark_mc_task_109994->ctx;
    uint64_t futhark_mc_segmap_nested_task_110000_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110000_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_109994->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109994->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109994->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109994->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109994->free_i_92415;
    bool x_92416 = futhark_mc_task_109994->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109994->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109994->free_loop_cond_92426;
    int64_t last_res_96737 = futhark_mc_task_109994->free_last_res_96737;
    int64_t min_arg_96756 = futhark_mc_task_109994->free_min_arg_96756;
    int64_t min_arg_96757 = futhark_mc_task_109994->free_min_arg_96757;
    int64_t min_res_96758 = futhark_mc_task_109994->free_min_res_96758;
    double max_res_96762 = futhark_mc_task_109994->free_max_res_96762;
    struct memblock mem_100729 = {.desc ="mem_100729", .mem =
                                  futhark_mc_task_109994->free_mem_100729,
                                  .size =0, .references =NULL};
    struct memblock mem_100732 = {.desc ="mem_100732", .mem =
                                  futhark_mc_task_109994->free_mem_100732,
                                  .size =0, .references =NULL};
    struct memblock mem_100735 = {.desc ="mem_100735", .mem =
                                  futhark_mc_task_109994->free_mem_100735,
                                  .size =0, .references =NULL};
    int64_t bytes_100737 = futhark_mc_task_109994->free_bytes_100737;
    struct memblock mem_100738 = {.desc ="mem_100738", .mem =
                                  futhark_mc_task_109994->free_mem_100738,
                                  .size =0, .references =NULL};
    struct memblock mem_100777 = {.desc ="mem_100777", .mem =
                                  futhark_mc_task_109994->free_mem_100777,
                                  .size =0, .references =NULL};
    struct memblock mem_100780 = {.desc ="mem_100780", .mem =
                                  futhark_mc_task_109994->free_mem_100780,
                                  .size =0, .references =NULL};
    int64_t iter_105724;
    struct futhark_mc_segmap_parloop_struct_110001
    futhark_mc_segmap_parloop_struct_110001;
    
    futhark_mc_segmap_parloop_struct_110001.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110001.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110001.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110001.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110001.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110001.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110001.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110001.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110001.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110001.free_last_res_96737 =
        last_res_96737;
    futhark_mc_segmap_parloop_struct_110001.free_min_arg_96756 = min_arg_96756;
    futhark_mc_segmap_parloop_struct_110001.free_min_arg_96757 = min_arg_96757;
    futhark_mc_segmap_parloop_struct_110001.free_min_res_96758 = min_res_96758;
    futhark_mc_segmap_parloop_struct_110001.free_max_res_96762 = max_res_96762;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100729 = mem_100729.mem;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100732 = mem_100732.mem;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100735 = mem_100735.mem;
    futhark_mc_segmap_parloop_struct_110001.free_bytes_100737 = bytes_100737;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100738 = mem_100738.mem;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100777 = mem_100777.mem;
    futhark_mc_segmap_parloop_struct_110001.free_mem_100780 = mem_100780.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110002_task;
    
    futhark_mc_segmap_parloop_110002_task.name =
        "futhark_mc_segmap_parloop_110002";
    futhark_mc_segmap_parloop_110002_task.fn = futhark_mc_segmap_parloop_110002;
    futhark_mc_segmap_parloop_110002_task.args =
        &futhark_mc_segmap_parloop_struct_110001;
    futhark_mc_segmap_parloop_110002_task.iterations = iterations;
    futhark_mc_segmap_parloop_110002_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110002_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110002_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110002_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110002_task);
    
    if (futhark_mc_segmap_parloop_110002_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110002_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110002_total_end -
                 futhark_mc_segmap_parloop_110002_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110002_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110002_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110002_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110000_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110000_end -
                 futhark_mc_segmap_nested_task_110000_start;
        
        ctx->futhark_mc_segmap_nested_task_110000_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110000_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110000_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_109967(void *args, int64_t start,
                                            int64_t end, int flat_tid_96724,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_109966
    *futhark_mc_segmap_parloop_struct_109966 =
    (struct futhark_mc_segmap_parloop_struct_109966 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_109966->ctx;
    uint64_t futhark_mc_segmap_parloop_109967_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109967_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_109966->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_109966->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_109966->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_109966->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_109966->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_109966->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_109966->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_109966->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_109966->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_109966->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_109966->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100725 =
            futhark_mc_segmap_parloop_struct_109966->free_bytes_100725;
    int64_t bytes_100737 =
            futhark_mc_segmap_parloop_struct_109966->free_bytes_100737;
    int64_t bytes_100776 =
            futhark_mc_segmap_parloop_struct_109966->free_bytes_100776;
    struct memblock mem_100919 = {.desc ="mem_100919", .mem =
                                  futhark_mc_segmap_parloop_struct_109966->free_mem_100919,
                                  .size =0, .references =NULL};
    struct memblock mem_100923 = {.desc ="mem_100923", .mem =
                                  futhark_mc_segmap_parloop_struct_109966->free_mem_100923,
                                  .size =0, .references =NULL};
    size_t mem_100726_cached_sizze_109968 = 0;
    unsigned char *mem_100726 = NULL;
    size_t mem_100729_cached_sizze_109969 = 0;
    unsigned char *mem_100729 = NULL;
    size_t mem_100732_cached_sizze_109970 = 0;
    unsigned char *mem_100732 = NULL;
    size_t mem_100735_cached_sizze_109971 = 0;
    unsigned char *mem_100735 = NULL;
    size_t mem_100738_cached_sizze_109972 = 0;
    unsigned char *mem_100738 = NULL;
    size_t mem_100777_cached_sizze_109973 = 0;
    unsigned char *mem_100777 = NULL;
    size_t mem_100780_cached_sizze_109974 = 0;
    unsigned char *mem_100780 = NULL;
    int64_t iterations = end - start;
    int64_t iter_105234 = start;
    
    if (mem_100726_cached_sizze_109968 < (size_t) bytes_100725) {
        mem_100726 = realloc(mem_100726, bytes_100725);
        mem_100726_cached_sizze_109968 = bytes_100725;
    }
    if (mem_100729_cached_sizze_109969 < (size_t) bytes_100725) {
        mem_100729 = realloc(mem_100729, bytes_100725);
        mem_100729_cached_sizze_109969 = bytes_100725;
    }
    if (mem_100732_cached_sizze_109970 < (size_t) bytes_100725) {
        mem_100732 = realloc(mem_100732, bytes_100725);
        mem_100732_cached_sizze_109970 = bytes_100725;
    }
    if (mem_100735_cached_sizze_109971 < (size_t) bytes_100725) {
        mem_100735 = realloc(mem_100735, bytes_100725);
        mem_100735_cached_sizze_109971 = bytes_100725;
    }
    if (mem_100738_cached_sizze_109972 < (size_t) bytes_100737) {
        mem_100738 = realloc(mem_100738, bytes_100737);
        mem_100738_cached_sizze_109972 = bytes_100737;
    }
    if (mem_100777_cached_sizze_109973 < (size_t) bytes_100776) {
        mem_100777 = realloc(mem_100777, bytes_100776);
        mem_100777_cached_sizze_109973 = bytes_100776;
    }
    if (mem_100780_cached_sizze_109974 < (size_t) bytes_100776) {
        mem_100780 = realloc(mem_100780, bytes_100776);
        mem_100780_cached_sizze_109974 = bytes_100776;
    }
    for (; iter_105234 < end; iter_105234++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_105571 = m_92398;
        int64_t gtid_96725 = iter_105234;
        int64_t remnant_105572 = iter_105234 - gtid_96725;
        int64_t flat_tid_105235 = (int64_t) 0;
        int32_t num_tasks_105573;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_109975 futhark_mc_task_109975;
        
        futhark_mc_task_109975.ctx = ctx;
        futhark_mc_task_109975.free_n_92399 = n_92399;
        futhark_mc_task_109975.free_gtid_96725 = gtid_96725;
        futhark_mc_task_109975.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109975.free_mem_100726 = mem_100726;
        
        struct scheduler_segop futhark_mc_task_109975_task;
        
        futhark_mc_task_109975_task.args = &futhark_mc_task_109975;
        futhark_mc_task_109975_task.top_level_fn =
            futhark_mc_segscan_task_109976;
        futhark_mc_task_109975_task.name = "futhark_mc_segscan_task_109976";
        futhark_mc_task_109975_task.iterations = n_92399;
        futhark_mc_task_109975_task.task_time =
            &ctx->futhark_mc_segscan_task_109976_total_time;
        futhark_mc_task_109975_task.task_iter =
            &ctx->futhark_mc_segscan_task_109976_total_iter;
        futhark_mc_task_109975_task.sched = STATIC;
        futhark_mc_task_109975_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_109976_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109975_task);
        
        if (futhark_mc_segscan_task_109976_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_96737;
        
        last_res_96737 = ((int64_t *) mem_100726)[i_92415];
        for (int64_t i_105587 = 0; i_105587 < n_92399; i_105587++) {
            ((double *) mem_100729)[i_105587] = 0.0;
        }
        for (int64_t i_105588 = 0; i_105588 < n_92399; i_105588++) {
            ((int64_t *) mem_100732)[i_105588] = (int64_t) -1;
        }
        
        int64_t flat_tid_105244 = (int64_t) 0;
        int32_t num_tasks_105589;
        struct futhark_mc_task_109982 futhark_mc_task_109982;
        
        futhark_mc_task_109982.ctx = ctx;
        futhark_mc_task_109982.free_n_92399 = n_92399;
        futhark_mc_task_109982.free_gtid_96725 = gtid_96725;
        futhark_mc_task_109982.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_109982.free_mem_100726 = mem_100726;
        futhark_mc_task_109982.free_mem_100729 = mem_100729;
        futhark_mc_task_109982.free_mem_100732 = mem_100732;
        
        struct scheduler_segop futhark_mc_task_109982_task;
        
        futhark_mc_task_109982_task.args = &futhark_mc_task_109982;
        futhark_mc_task_109982_task.top_level_fn =
            futhark_mc_segmap_task_109983;
        futhark_mc_task_109982_task.name = "futhark_mc_segmap_task_109983";
        futhark_mc_task_109982_task.iterations = n_92399;
        futhark_mc_task_109982_task.task_time =
            &ctx->futhark_mc_segmap_task_109983_total_time;
        futhark_mc_task_109982_task.task_iter =
            &ctx->futhark_mc_segmap_task_109983_total_iter;
        futhark_mc_task_109982_task.sched = STATIC;
        futhark_mc_task_109982_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109983_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109982_task);
        
        if (futhark_mc_segmap_task_109983_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_105252 = (int64_t) 0;
        int32_t num_tasks_105595;
        struct futhark_mc_task_109986 futhark_mc_task_109986;
        
        futhark_mc_task_109986.ctx = ctx;
        futhark_mc_task_109986.free_n_92399 = n_92399;
        futhark_mc_task_109986.free_mem_100732 = mem_100732;
        futhark_mc_task_109986.free_mem_100735 = mem_100735;
        
        struct scheduler_segop futhark_mc_task_109986_task;
        
        futhark_mc_task_109986_task.args = &futhark_mc_task_109986;
        futhark_mc_task_109986_task.top_level_fn =
            futhark_mc_segmap_task_109987;
        futhark_mc_task_109986_task.name = "futhark_mc_segmap_task_109987";
        futhark_mc_task_109986_task.iterations = n_92399;
        futhark_mc_task_109986_task.task_time =
            &ctx->futhark_mc_segmap_task_109987_total_time;
        futhark_mc_task_109986_task.task_iter =
            &ctx->futhark_mc_segmap_task_109987_total_iter;
        futhark_mc_task_109986_task.sched = STATIC;
        futhark_mc_task_109986_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109987_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109986_task);
        
        if (futhark_mc_segmap_task_109987_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_96756 = sub64(last_res_96737, (int64_t) 1);
        int64_t min_arg_96757 = sub64(last_res_96737, min_res_92421);
        int64_t min_res_96758 = smin64(q_92401, last_res_96737);
        double i64_res_96759 = sitofp_i64_f64(last_res_96737);
        double x_96760 = i64_res_92427 - i64_res_96759;
        double max_arg_96761 = x_96760 / 2.0;
        double max_res_96762 = fmax64(0.0, max_arg_96761);
        int64_t flat_tid_105256 = (int64_t) 0;
        int32_t num_tasks_105599;
        struct futhark_mc_task_109990 futhark_mc_task_109990;
        
        futhark_mc_task_109990.ctx = ctx;
        futhark_mc_task_109990.free_q_92401 = q_92401;
        futhark_mc_task_109990.free_last_res_96737 = last_res_96737;
        futhark_mc_task_109990.free_mem_100738 = mem_100738;
        
        struct scheduler_segop futhark_mc_task_109990_task;
        
        futhark_mc_task_109990_task.args = &futhark_mc_task_109990;
        futhark_mc_task_109990_task.top_level_fn =
            futhark_mc_segmap_task_109991;
        futhark_mc_task_109990_task.name = "futhark_mc_segmap_task_109991";
        futhark_mc_task_109990_task.iterations = q_92401;
        futhark_mc_task_109990_task.task_time =
            &ctx->futhark_mc_segmap_task_109991_total_time;
        futhark_mc_task_109990_task.task_iter =
            &ctx->futhark_mc_segmap_task_109991_total_iter;
        futhark_mc_task_109990_task.sched = STATIC;
        futhark_mc_task_109990_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_109991_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109990_task);
        
        if (futhark_mc_segmap_task_109991_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_105416 = (int64_t) 0;
        int32_t num_tasks_105603;
        int64_t flat_tid_105260 = (int64_t) 0;
        struct futhark_mc_task_109994 futhark_mc_task_109994;
        
        futhark_mc_task_109994.ctx = ctx;
        futhark_mc_task_109994.free_n_92399 = n_92399;
        futhark_mc_task_109994.free_q_92401 = q_92401;
        futhark_mc_task_109994.free_jump_92403 = jump_92403;
        futhark_mc_task_109994.free_n_m_92409 = n_m_92409;
        futhark_mc_task_109994.free_i_92415 = i_92415;
        futhark_mc_task_109994.free_x_92416 = x_92416;
        futhark_mc_task_109994.free_min_res_92421 = min_res_92421;
        futhark_mc_task_109994.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_109994.free_last_res_96737 = last_res_96737;
        futhark_mc_task_109994.free_min_arg_96756 = min_arg_96756;
        futhark_mc_task_109994.free_min_arg_96757 = min_arg_96757;
        futhark_mc_task_109994.free_min_res_96758 = min_res_96758;
        futhark_mc_task_109994.free_max_res_96762 = max_res_96762;
        futhark_mc_task_109994.free_mem_100729 = mem_100729;
        futhark_mc_task_109994.free_mem_100732 = mem_100732;
        futhark_mc_task_109994.free_mem_100735 = mem_100735;
        futhark_mc_task_109994.free_bytes_100737 = bytes_100737;
        futhark_mc_task_109994.free_mem_100738 = mem_100738;
        futhark_mc_task_109994.free_mem_100777 = mem_100777;
        futhark_mc_task_109994.free_mem_100780 = mem_100780;
        
        struct scheduler_segop futhark_mc_task_109994_task;
        
        futhark_mc_task_109994_task.args = &futhark_mc_task_109994;
        futhark_mc_task_109994_task.top_level_fn =
            futhark_mc_segmap_task_109995;
        futhark_mc_task_109994_task.name = "futhark_mc_segmap_task_109995";
        futhark_mc_task_109994_task.iterations = n_m_92409;
        futhark_mc_task_109994_task.task_time =
            &ctx->futhark_mc_segmap_task_109995_total_time;
        futhark_mc_task_109994_task.task_iter =
            &ctx->futhark_mc_segmap_task_109995_total_iter;
        futhark_mc_task_109994_task.sched = DYNAMIC;
        futhark_mc_task_109994_task.nested_fn =
            futhark_mc_segmap_nested_task_110000;
        
        int futhark_mc_segmap_task_109995_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_109994_task);
        
        if (futhark_mc_segmap_task_109995_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100919.mem + gtid_96725 * n_m_92409 * (int64_t) 8,
                    mem_100777 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_100923.mem + gtid_96725 * n_m_92409 * (int64_t) 8,
                    mem_100780 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100726);
    free(mem_100729);
    free(mem_100732);
    free(mem_100735);
    free(mem_100738);
    free(mem_100777);
    free(mem_100780);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109967_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109967_end -
                 futhark_mc_segmap_parloop_109967_start;
        
        ctx->futhark_mc_segmap_parloop_109967_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_109967_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_109967_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_109965(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_96724 = tid;
    int num_tasks_105019 = info.nsubtasks;
    struct futhark_mc_task_109952 *futhark_mc_task_109952 =
                                  (struct futhark_mc_task_109952 *) args;
    struct futhark_context *ctx = futhark_mc_task_109952->ctx;
    uint64_t futhark_mc_segmap_nested_task_109965_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_109965_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_109952->free_m_92398;
    int64_t n_92399 = futhark_mc_task_109952->free_n_92399;
    int64_t q_92401 = futhark_mc_task_109952->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_109952->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_109952->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_109952->free_i_92415;
    bool x_92416 = futhark_mc_task_109952->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_109952->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_109952->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_109952->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_109952->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100725 = futhark_mc_task_109952->free_bytes_100725;
    int64_t bytes_100737 = futhark_mc_task_109952->free_bytes_100737;
    int64_t bytes_100776 = futhark_mc_task_109952->free_bytes_100776;
    struct memblock mem_100919 = {.desc ="mem_100919", .mem =
                                  futhark_mc_task_109952->free_mem_100919,
                                  .size =0, .references =NULL};
    struct memblock mem_100923 = {.desc ="mem_100923", .mem =
                                  futhark_mc_task_109952->free_mem_100923,
                                  .size =0, .references =NULL};
    int64_t iter_105234;
    struct futhark_mc_segmap_parloop_struct_109966
    futhark_mc_segmap_parloop_struct_109966;
    
    futhark_mc_segmap_parloop_struct_109966.ctx = ctx;
    futhark_mc_segmap_parloop_struct_109966.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_109966.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_109966.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_109966.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_109966.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_109966.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_109966.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_109966.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_109966.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_109966.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_109966.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_109966.free_bytes_100725 = bytes_100725;
    futhark_mc_segmap_parloop_struct_109966.free_bytes_100737 = bytes_100737;
    futhark_mc_segmap_parloop_struct_109966.free_bytes_100776 = bytes_100776;
    futhark_mc_segmap_parloop_struct_109966.free_mem_100919 = mem_100919.mem;
    futhark_mc_segmap_parloop_struct_109966.free_mem_100923 = mem_100923.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_109967_task;
    
    futhark_mc_segmap_parloop_109967_task.name =
        "futhark_mc_segmap_parloop_109967";
    futhark_mc_segmap_parloop_109967_task.fn = futhark_mc_segmap_parloop_109967;
    futhark_mc_segmap_parloop_109967_task.args =
        &futhark_mc_segmap_parloop_struct_109966;
    futhark_mc_segmap_parloop_109967_task.iterations = iterations;
    futhark_mc_segmap_parloop_109967_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_109967_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_109967_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_109967_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_109967_task);
    
    if (futhark_mc_segmap_parloop_109967_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_109967_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_109967_total_end -
                 futhark_mc_segmap_parloop_109967_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109967_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109967_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_109967_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_109965_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_109965_end -
                 futhark_mc_segmap_nested_task_109965_start;
        
        ctx->futhark_mc_segmap_nested_task_109965_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_109965_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_109965_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110018 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100925;
    int64_t free_bytes_100937;
    int64_t free_bytes_101012;
    unsigned char *free_mem_101185;
    unsigned char *free_mem_101189;
};
struct futhark_mc_segmap_parloop_struct_110020 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100925;
    int64_t free_bytes_100937;
    int64_t free_bytes_101012;
    unsigned char *free_mem_101185;
    unsigned char *free_mem_101189;
};
static int futhark_mc_segmap_parloop_110021(void *args, int64_t start,
                                            int64_t end, int flat_tid_97081,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110020
    *futhark_mc_segmap_parloop_struct_110020 =
    (struct futhark_mc_segmap_parloop_struct_110020 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110020->ctx;
    uint64_t futhark_mc_segmap_parloop_110021_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110021_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110020->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110020->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110020->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110020->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110020->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110020->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110020->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110020->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110020->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110020->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110020->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100925 =
            futhark_mc_segmap_parloop_struct_110020->free_bytes_100925;
    int64_t bytes_100937 =
            futhark_mc_segmap_parloop_struct_110020->free_bytes_100937;
    int64_t bytes_101012 =
            futhark_mc_segmap_parloop_struct_110020->free_bytes_101012;
    struct memblock mem_101185 = {.desc ="mem_101185", .mem =
                                  futhark_mc_segmap_parloop_struct_110020->free_mem_101185,
                                  .size =0, .references =NULL};
    struct memblock mem_101189 = {.desc ="mem_101189", .mem =
                                  futhark_mc_segmap_parloop_struct_110020->free_mem_101189,
                                  .size =0, .references =NULL};
    size_t mem_101019_cached_sizze_110022 = 0;
    unsigned char *mem_101019 = NULL;
    size_t mem_101034_cached_sizze_110023 = 0;
    unsigned char *mem_101034 = NULL;
    size_t mem_101037_cached_sizze_110024 = 0;
    unsigned char *mem_101037 = NULL;
    size_t mem_101064_cached_sizze_110025 = 0;
    unsigned char *mem_101064 = NULL;
    size_t mem_101079_cached_sizze_110026 = 0;
    unsigned char *mem_101079 = NULL;
    size_t mem_101094_cached_sizze_110027 = 0;
    unsigned char *mem_101094 = NULL;
    size_t mem_101097_cached_sizze_110028 = 0;
    unsigned char *mem_101097 = NULL;
    size_t mem_101114_cached_sizze_110029 = 0;
    unsigned char *mem_101114 = NULL;
    size_t mem_101117_cached_sizze_110030 = 0;
    unsigned char *mem_101117 = NULL;
    size_t mem_101144_cached_sizze_110031 = 0;
    unsigned char *mem_101144 = NULL;
    size_t mem_101147_cached_sizze_110032 = 0;
    unsigned char *mem_101147 = NULL;
    int64_t iterations = end - start;
    int64_t iter_105877 = start;
    
    if (mem_101019_cached_sizze_110022 < (size_t) bytes_100925) {
        mem_101019 = realloc(mem_101019, bytes_100925);
        mem_101019_cached_sizze_110022 = bytes_100925;
    }
    if (mem_101034_cached_sizze_110023 < (size_t) bytes_100925) {
        mem_101034 = realloc(mem_101034, bytes_100925);
        mem_101034_cached_sizze_110023 = bytes_100925;
    }
    if (mem_101037_cached_sizze_110024 < (size_t) bytes_100925) {
        mem_101037 = realloc(mem_101037, bytes_100925);
        mem_101037_cached_sizze_110024 = bytes_100925;
    }
    if (mem_101064_cached_sizze_110025 < (size_t) bytes_100925) {
        mem_101064 = realloc(mem_101064, bytes_100925);
        mem_101064_cached_sizze_110025 = bytes_100925;
    }
    if (mem_101079_cached_sizze_110026 < (size_t) bytes_100937) {
        mem_101079 = realloc(mem_101079, bytes_100937);
        mem_101079_cached_sizze_110026 = bytes_100937;
    }
    if (mem_101094_cached_sizze_110027 < (size_t) bytes_101012) {
        mem_101094 = realloc(mem_101094, bytes_101012);
        mem_101094_cached_sizze_110027 = bytes_101012;
    }
    if (mem_101097_cached_sizze_110028 < (size_t) bytes_101012) {
        mem_101097 = realloc(mem_101097, bytes_101012);
        mem_101097_cached_sizze_110028 = bytes_101012;
    }
    if (mem_101114_cached_sizze_110029 < (size_t) bytes_100937) {
        mem_101114 = realloc(mem_101114, bytes_100937);
        mem_101114_cached_sizze_110029 = bytes_100937;
    }
    if (mem_101117_cached_sizze_110030 < (size_t) bytes_100937) {
        mem_101117 = realloc(mem_101117, bytes_100937);
        mem_101117_cached_sizze_110030 = bytes_100937;
    }
    if (mem_101144_cached_sizze_110031 < (size_t) bytes_100937) {
        mem_101144 = realloc(mem_101144, bytes_100937);
        mem_101144_cached_sizze_110031 = bytes_100937;
    }
    if (mem_101147_cached_sizze_110032 < (size_t) bytes_100937) {
        mem_101147 = realloc(mem_101147, bytes_100937);
        mem_101147_cached_sizze_110032 = bytes_100937;
    }
    for (; iter_105877 < end; iter_105877++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106106 = m_92398;
        int64_t gtid_97082 = iter_105877;
        int64_t remnant_106107 = iter_105877 - gtid_97082;
        int64_t discard_99866;
        int64_t scanacc_105879 = (int64_t) 0;
        
        for (int64_t i_105878 = 0; i_105878 < n_92399; i_105878++) {
            double x_105881;
            
            x_105881 = ((double *) Y_mem_100186.mem)[gtid_97082 * n_92399 +
                                                     i_105878];
            
            bool isnan_res_105882;
            
            isnan_res_105882 = futrts_isnan64(x_105881);
            
            bool defunc_0_p_res_105883 = !isnan_res_105882;
            int64_t defunc_0_f_res_105884 =
                    btoi_bool_i64(defunc_0_p_res_105883);
            int64_t defunc_1_op_res_105885 = add64(defunc_0_f_res_105884,
                                                   scanacc_105879);
            
            ((int64_t *) mem_101019)[i_105878] = defunc_1_op_res_105885;
            
            int64_t scanacc_tmp_106108 = defunc_1_op_res_105885;
            
            scanacc_105879 = scanacc_tmp_106108;
        }
        discard_99866 = scanacc_105879;
        
        int64_t last_res_93466;
        
        last_res_93466 = ((int64_t *) mem_101019)[i_92415];
        for (int64_t i_106110 = 0; i_106110 < n_92399; i_106110++) {
            ((double *) mem_101034)[i_106110] = 0.0;
        }
        for (int64_t i_106111 = 0; i_106111 < n_92399; i_106111++) {
            ((int64_t *) mem_101037)[i_106111] = (int64_t) -1;
        }
        for (int64_t write_iter_105887 = 0; write_iter_105887 < n_92399;
             write_iter_105887++) {
            double write_iv_105890;
            
            write_iv_105890 = ((double *) Y_mem_100186.mem)[gtid_97082 *
                                                            n_92399 +
                                                            write_iter_105887];
            
            bool isnan_res_105891;
            
            isnan_res_105891 = futrts_isnan64(write_iv_105890);
            
            bool defunc_0_p_res_105892 = !isnan_res_105891;
            int64_t defunc_1_f_res_105893;
            
            if (defunc_0_p_res_105892) {
                int64_t write_iv_105894;
                
                write_iv_105894 = ((int64_t *) mem_101019)[write_iter_105887];
                
                int64_t defunc_1_f_res_t_res_105895 = sub64(write_iv_105894,
                                                            (int64_t) 1);
                
                defunc_1_f_res_105893 = defunc_1_f_res_t_res_105895;
            } else {
                defunc_1_f_res_105893 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_105893) &&
                slt64(defunc_1_f_res_105893, n_92399)) {
                ((int64_t *) mem_101037)[defunc_1_f_res_105893] =
                    write_iter_105887;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_105893) &&
                slt64(defunc_1_f_res_105893, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_101034 + defunc_1_f_res_105893 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_97082 * n_92399 +
                                                write_iter_105887) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_105899 = 0; i_105899 < n_92399; i_105899++) {
            int64_t x_105901;
            
            x_105901 = ((int64_t *) mem_101037)[i_105899];
            
            int64_t defunc_0_f_res_105902 = add64((int64_t) 1, x_105901);
            
            ((int64_t *) mem_101064)[i_105899] = defunc_0_f_res_105902;
        }
        
        int64_t min_arg_93481 = sub64(last_res_93466, (int64_t) 1);
        int64_t min_arg_93482 = sub64(last_res_93466, min_res_92421);
        int64_t min_res_93483 = smin64(q_92401, last_res_93466);
        double i64_res_93484 = sitofp_i64_f64(last_res_93466);
        double x_93485 = i64_res_92427 - i64_res_93484;
        double max_arg_93486 = x_93485 / 2.0;
        double max_res_93487 = fmax64(0.0, max_arg_93486);
        
        for (int64_t i_105904 = 0; i_105904 < q_92401; i_105904++) {
            bool cond_105906 = sle64(last_res_93466, i_105904);
            double defunc_0_f_res_105907;
            
            if (cond_105906) {
                defunc_0_f_res_105907 = 0.0;
            } else {
                defunc_0_f_res_105907 = 1.0;
            }
            ((double *) mem_101079)[i_105904] = defunc_0_f_res_105907;
        }
        for (int64_t i_105909 = 0; i_105909 < n_m_92409; i_105909++) {
            int64_t min_arg_105912 = mul64(jump_92403, i_105909);
            int64_t min_res_105913 = smin64(i_92415, min_arg_105912);
            int64_t defunc_0_g_res_105914 = add64((int64_t) 1, min_res_105913);
            bool init_idx_105915;
            int64_t init_idx_105916;
            int64_t init_idx_105917;
            bool loop_while_105918;
            int64_t low_105919;
            int64_t high_105920;
            
            loop_while_105918 = x_92416;
            low_105919 = (int64_t) 0;
            high_105920 = i_92415;
            while (loop_while_105918) {
                int64_t x_105921 = add64(low_105919, high_105920);
                int64_t mid_105922 = sdiv64(x_105921, (int64_t) 2);
                bool x_105923 = sle64((int64_t) 0, mid_105922);
                bool y_105924 = slt64(mid_105922, n_92399);
                bool bounds_check_105925 = x_105923 && y_105924;
                bool index_certs_105926;
                
                if (!bounds_check_105925) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_105922,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_105927;
                
                mid_id_105927 = ((int64_t *) mem_101064)[mid_105922];
                
                bool cond_105928 = slt64(mid_id_105927, (int64_t) 0);
                int64_t mid_idx_105929;
                
                if (cond_105928) {
                    mid_idx_105929 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_105929 = mid_id_105927;
                }
                
                bool cond_105930 = sle64(defunc_0_g_res_105914, mid_idx_105929);
                int64_t loopres_105931;
                int64_t loopres_105932;
                
                if (cond_105930) {
                    int64_t loopres_t_res_105933 = sub64(mid_105922,
                                                         (int64_t) 1);
                    
                    loopres_105931 = low_105919;
                    loopres_105932 = loopres_t_res_105933;
                } else {
                    int64_t loopres_f_res_105934 = add64((int64_t) 1,
                                                         mid_105922);
                    
                    loopres_105931 = loopres_f_res_105934;
                    loopres_105932 = high_105920;
                }
                
                bool loop_cond_105935 = sle64(loopres_105931, loopres_105932);
                bool loop_while_tmp_106118 = loop_cond_105935;
                int64_t low_tmp_106119 = loopres_105931;
                int64_t high_tmp_106120 = loopres_105932;
                
                loop_while_105918 = loop_while_tmp_106118;
                low_105919 = low_tmp_106119;
                high_105920 = high_tmp_106120;
            }
            init_idx_105915 = loop_while_105918;
            init_idx_105916 = low_105919;
            init_idx_105917 = high_105920;
            
            bool idx_105936;
            int64_t idx_105937;
            int64_t idx_105938;
            int64_t idx_105939;
            bool loop_while_105940;
            int64_t l_idx_105941;
            int64_t r_idx_105942;
            int64_t span_105943;
            
            loop_while_105940 = loop_cond_92426;
            l_idx_105941 = init_idx_105916;
            r_idx_105942 = init_idx_105916;
            span_105943 = (int64_t) 1;
            while (loop_while_105940) {
                int64_t max_arg_105944 = sub64(l_idx_105941, (int64_t) 1);
                int64_t max_res_105945 = smax64((int64_t) 0, max_arg_105944);
                int64_t min_arg_105946 = add64((int64_t) 1, r_idx_105942);
                int64_t min_res_105947 = smin64(min_arg_93481, min_arg_105946);
                bool x_105948 = sle64((int64_t) 0, max_res_105945);
                bool y_105949 = slt64(max_res_105945, n_92399);
                bool bounds_check_105950 = x_105948 && y_105949;
                bool index_certs_105951;
                
                if (!bounds_check_105950) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_105945,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_105952;
                
                x_105952 = ((int64_t *) mem_101064)[max_res_105945];
                
                int64_t abs_arg_105953 = sub64(x_105952, defunc_0_g_res_105914);
                int64_t abs_res_105954 = abs64(abs_arg_105953);
                bool x_105955 = sle64((int64_t) 0, min_res_105947);
                bool y_105956 = slt64(min_res_105947, n_92399);
                bool bounds_check_105957 = x_105955 && y_105956;
                bool index_certs_105958;
                
                if (!bounds_check_105957) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_105947,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_105959;
                
                x_105959 = ((int64_t *) mem_101064)[min_res_105947];
                
                int64_t abs_arg_105960 = sub64(x_105959, defunc_0_g_res_105914);
                int64_t abs_res_105961 = abs64(abs_arg_105960);
                bool cond_105962 = max_res_105945 == l_idx_105941;
                int64_t loopres_105963;
                int64_t loopres_105964;
                int64_t loopres_105965;
                
                if (cond_105962) {
                    loopres_105963 = l_idx_105941;
                    loopres_105964 = r_idx_105942;
                    loopres_105965 = min_res_92421;
                } else {
                    bool cond_105966 = slt64(abs_res_105954, abs_res_105961);
                    bool cond_f_res_105967 = min_res_105947 == r_idx_105942;
                    bool x_105968 = !cond_105966;
                    bool y_105969 = cond_f_res_105967 && x_105968;
                    bool cond_105970 = cond_105966 || y_105969;
                    int64_t loopres_f_res_105971;
                    
                    if (cond_105970) {
                        loopres_f_res_105971 = max_res_105945;
                    } else {
                        loopres_f_res_105971 = l_idx_105941;
                    }
                    
                    int64_t loopres_f_res_105972;
                    
                    if (cond_105970) {
                        loopres_f_res_105972 = r_idx_105942;
                    } else {
                        loopres_f_res_105972 = min_res_105947;
                    }
                    
                    int64_t loopres_f_res_105973;
                    
                    if (cond_105970) {
                        int64_t loopres_f_res_t_res_105974 = add64((int64_t) 1,
                                                                   span_105943);
                        
                        loopres_f_res_105973 = loopres_f_res_t_res_105974;
                    } else {
                        int64_t loopres_f_res_f_res_105975 = add64((int64_t) 1,
                                                                   span_105943);
                        
                        loopres_f_res_105973 = loopres_f_res_f_res_105975;
                    }
                    loopres_105963 = loopres_f_res_105971;
                    loopres_105964 = loopres_f_res_105972;
                    loopres_105965 = loopres_f_res_105973;
                }
                
                bool loop_cond_105976 = slt64(loopres_105965, min_res_92421);
                bool loop_while_tmp_106121 = loop_cond_105976;
                int64_t l_idx_tmp_106122 = loopres_105963;
                int64_t r_idx_tmp_106123 = loopres_105964;
                int64_t span_tmp_106124 = loopres_105965;
                
                loop_while_105940 = loop_while_tmp_106121;
                l_idx_105941 = l_idx_tmp_106122;
                r_idx_105942 = r_idx_tmp_106123;
                span_105943 = span_tmp_106124;
            }
            idx_105936 = loop_while_105940;
            idx_105937 = l_idx_105941;
            idx_105938 = r_idx_105942;
            idx_105939 = span_105943;
            
            int64_t min_res_105977 = smin64(min_arg_93482, idx_105937);
            int64_t max_res_105978 = smax64((int64_t) 0, min_res_105977);
            int64_t x_105979 = add64(min_res_93483, max_res_105978);
            int64_t r_105980 = sub64(x_105979, (int64_t) 1);
            bool x_105981 = sle64((int64_t) 0, r_105980);
            bool y_105982 = slt64(r_105980, n_92399);
            bool bounds_check_105983 = x_105981 && y_105982;
            bool index_certs_105984;
            
            if (!bounds_check_105983) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_105980,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105985;
            
            x_105985 = ((int64_t *) mem_101037)[r_105980];
            
            int64_t abs_arg_105986 = sub64(x_105985, min_res_105913);
            int64_t abs_res_105987 = abs64(abs_arg_105986);
            bool x_105988 = sle64((int64_t) 0, max_res_105978);
            bool y_105989 = slt64(max_res_105978, n_92399);
            bool bounds_check_105990 = x_105988 && y_105989;
            bool index_certs_105991;
            
            if (!bounds_check_105990) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_105978,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_105992;
            
            x_105992 = ((int64_t *) mem_101037)[max_res_105978];
            
            int64_t abs_arg_105993 = sub64(x_105992, min_res_105913);
            int64_t abs_res_105994 = abs64(abs_arg_105993);
            int64_t max_res_105995 = smax64(abs_res_105987, abs_res_105994);
            double defunc_0_f_res_105996 = sitofp_i64_f64(max_res_105995);
            double defunc_1_f_res_105997 = max_res_93487 +
                   defunc_0_f_res_105996;
            
            for (int64_t i_106002 = 0; i_106002 < q_92401; i_106002++) {
                double x_106005;
                
                x_106005 = ((double *) mem_101079)[i_106002];
                
                bool cond_106006 = sle64(last_res_93466, i_106002);
                int64_t defunc_0_f_res_106007;
                
                if (cond_106006) {
                    defunc_0_f_res_106007 = (int64_t) 0;
                } else {
                    int64_t i_106008 = add64(max_res_105978, i_106002);
                    int64_t defunc_0_add_arg_106009;
                    
                    defunc_0_add_arg_106009 =
                        ((int64_t *) mem_101037)[i_106008];
                    
                    int64_t defunc_1_add_res_106010 = add64((int64_t) 1,
                                                            defunc_0_add_arg_106009);
                    
                    defunc_0_f_res_106007 = defunc_1_add_res_106010;
                }
                
                int64_t binop_p_106011 = sub64(defunc_0_f_res_106007,
                                               min_res_105913);
                double defunc_0_f_res_106012 = sitofp_i64_f64(binop_p_106011);
                double abs_res_106013 = fabs(defunc_0_f_res_106012);
                double tmp1_106014 = abs_res_106013 / defunc_1_f_res_105997;
                double x_106015 = tmp1_106014 * tmp1_106014;
                double y_106016 = tmp1_106014 * x_106015;
                double tmp2_106017 = 1.0 - y_106016;
                double x_106018 = tmp2_106017 * tmp2_106017;
                double tmp3_106019 = tmp2_106017 * x_106018;
                double tmp4_106020 = x_106005 * tmp3_106019;
                
                ((double *) mem_101114)[i_106002] = defunc_0_f_res_106012;
                ((double *) mem_101117)[i_106002] = tmp4_106020;
            }
            
            double defunc_2_reduce_res_106025;
            double defunc_2_reduce_res_106026;
            double defunc_2_reduce_res_106027;
            double defunc_2_reduce_res_106028;
            double defunc_2_reduce_res_106029;
            double redout_106033;
            double redout_106034;
            double redout_106035;
            double redout_106036;
            double redout_106037;
            
            redout_106033 = 0.0;
            redout_106034 = 0.0;
            redout_106035 = 0.0;
            redout_106036 = 0.0;
            redout_106037 = 0.0;
            for (int64_t i_106032 = 0; i_106032 < q_92401; i_106032++) {
                double x_106040;
                
                x_106040 = ((double *) mem_101114)[i_106032];
                
                double x_106041;
                
                x_106041 = ((double *) mem_101117)[i_106032];
                
                double defunc_1_f_res_106042 = x_106040 * x_106041;
                double defunc_1_f_res_106043 = x_106040 * defunc_1_f_res_106042;
                double defunc_1_f_res_106044 = x_106040 * defunc_1_f_res_106043;
                double defunc_1_f_res_106045 = x_106040 * defunc_1_f_res_106044;
                double defunc_1_op_res_106046 = x_106041 + redout_106033;
                double defunc_1_op_res_106047 = defunc_1_f_res_106042 +
                       redout_106034;
                double defunc_1_op_res_106048 = defunc_1_f_res_106043 +
                       redout_106035;
                double defunc_1_op_res_106049 = defunc_1_f_res_106044 +
                       redout_106036;
                double defunc_1_op_res_106050 = defunc_1_f_res_106045 +
                       redout_106037;
                
                ((double *) mem_101144)[i_106032] = defunc_1_f_res_106043;
                ((double *) mem_101147)[i_106032] = defunc_1_f_res_106042;
                
                double redout_tmp_106127 = defunc_1_op_res_106046;
                double redout_tmp_106128 = defunc_1_op_res_106047;
                double redout_tmp_106129 = defunc_1_op_res_106048;
                double redout_tmp_106130 = defunc_1_op_res_106049;
                double redout_tmp_106131 = defunc_1_op_res_106050;
                
                redout_106033 = redout_tmp_106127;
                redout_106034 = redout_tmp_106128;
                redout_106035 = redout_tmp_106129;
                redout_106036 = redout_tmp_106130;
                redout_106037 = redout_tmp_106131;
            }
            defunc_2_reduce_res_106025 = redout_106033;
            defunc_2_reduce_res_106026 = redout_106034;
            defunc_2_reduce_res_106027 = redout_106035;
            defunc_2_reduce_res_106028 = redout_106036;
            defunc_2_reduce_res_106029 = redout_106037;
            
            double x_106053 = defunc_2_reduce_res_106027 *
                   defunc_2_reduce_res_106029;
            double y_106054 = defunc_2_reduce_res_106028 *
                   defunc_2_reduce_res_106028;
            double a12_106055 = x_106053 - y_106054;
            double x_106056 = defunc_2_reduce_res_106027 *
                   defunc_2_reduce_res_106028;
            double y_106057 = defunc_2_reduce_res_106026 *
                   defunc_2_reduce_res_106029;
            double b12_106058 = x_106056 - y_106057;
            double x_106059 = defunc_2_reduce_res_106026 *
                   defunc_2_reduce_res_106028;
            double y_106060 = defunc_2_reduce_res_106027 *
                   defunc_2_reduce_res_106027;
            double c12_106061 = x_106059 - y_106060;
            double x_106062 = defunc_2_reduce_res_106025 *
                   defunc_2_reduce_res_106029;
            double b2_106063 = x_106062 - y_106060;
            double x_106064 = defunc_2_reduce_res_106026 *
                   defunc_2_reduce_res_106027;
            double y_106065 = defunc_2_reduce_res_106025 *
                   defunc_2_reduce_res_106028;
            double c2_106066 = x_106064 - y_106065;
            double x_106067 = defunc_2_reduce_res_106025 * a12_106055;
            double y_106068 = defunc_2_reduce_res_106026 * b12_106058;
            double x_106069 = x_106067 + y_106068;
            double y_106070 = defunc_2_reduce_res_106027 * c12_106061;
            double y_106071 = x_106069 + y_106070;
            double det_106072 = 1.0 / y_106071;
            double a12_106073 = a12_106055 * det_106072;
            double b12_106074 = b12_106058 * det_106072;
            double c12_106075 = c12_106061 * det_106072;
            double b2_106076 = b2_106063 * det_106072;
            double c2_106077 = c2_106066 * det_106072;
            double defunc_2_reduce_res_106078;
            double defunc_2_reduce_res_106079;
            double redout_106081;
            double redout_106082;
            
            redout_106081 = 0.0;
            redout_106082 = 0.0;
            for (int64_t i_106080 = 0; i_106080 < q_92401; i_106080++) {
                double x_106083;
                
                x_106083 = ((double *) mem_101117)[i_106080];
                
                double x_106084;
                
                x_106084 = ((double *) mem_101147)[i_106080];
                
                double x_106085;
                
                x_106085 = ((double *) mem_101144)[i_106080];
                
                bool cond_106086 = sle64(last_res_93466, i_106080);
                double defunc_0_f_res_106087;
                
                if (cond_106086) {
                    defunc_0_f_res_106087 = 0.0;
                } else {
                    int64_t i_106088 = add64(max_res_105978, i_106080);
                    double defunc_0_add_arg_106089;
                    
                    defunc_0_add_arg_106089 = ((double *) mem_101034)[i_106088];
                    defunc_0_f_res_106087 = defunc_0_add_arg_106089;
                }
                
                double x_106090 = a12_106073 * x_106083;
                double y_106091 = b12_106074 * x_106084;
                double x_106092 = x_106090 + y_106091;
                double y_106093 = c12_106075 * x_106085;
                double x_106094 = x_106092 + y_106093;
                double defunc_9_fit_fun_res_106095 = defunc_0_f_res_106087 *
                       x_106094;
                double x_106096 = b12_106074 * x_106083;
                double y_106097 = b2_106076 * x_106084;
                double x_106098 = x_106096 + y_106097;
                double y_106099 = c2_106077 * x_106085;
                double x_106100 = x_106098 + y_106099;
                double defunc_9_slope_fun_res_106101 = defunc_0_f_res_106087 *
                       x_106100;
                double defunc_1_op_res_106102 = defunc_9_fit_fun_res_106095 +
                       redout_106081;
                double defunc_1_op_res_106103 = defunc_9_slope_fun_res_106101 +
                       redout_106082;
                double redout_tmp_106134 = defunc_1_op_res_106102;
                double redout_tmp_106135 = defunc_1_op_res_106103;
                
                redout_106081 = redout_tmp_106134;
                redout_106082 = redout_tmp_106135;
            }
            defunc_2_reduce_res_106078 = redout_106081;
            defunc_2_reduce_res_106079 = redout_106082;
            ((double *) mem_101094)[i_105909] = defunc_2_reduce_res_106078;
            ((double *) mem_101097)[i_105909] = defunc_2_reduce_res_106079;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101185.mem + gtid_97082 * n_m_92409 * (int64_t) 8,
                    mem_101094 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101189.mem + gtid_97082 * n_m_92409 * (int64_t) 8,
                    mem_101097 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101019);
    free(mem_101034);
    free(mem_101037);
    free(mem_101064);
    free(mem_101079);
    free(mem_101094);
    free(mem_101097);
    free(mem_101114);
    free(mem_101117);
    free(mem_101144);
    free(mem_101147);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110021_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110021_end -
                 futhark_mc_segmap_parloop_110021_start;
        
        ctx->futhark_mc_segmap_parloop_110021_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110021_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110021_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110019(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_97081 = tid;
    int num_tasks_105876 = info.nsubtasks;
    struct futhark_mc_task_110018 *futhark_mc_task_110018 =
                                  (struct futhark_mc_task_110018 *) args;
    struct futhark_context *ctx = futhark_mc_task_110018->ctx;
    uint64_t futhark_mc_segmap_task_110019_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110019_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110018->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110018->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110018->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110018->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110018->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110018->free_i_92415;
    bool x_92416 = futhark_mc_task_110018->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110018->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110018->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110018->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110018->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100925 = futhark_mc_task_110018->free_bytes_100925;
    int64_t bytes_100937 = futhark_mc_task_110018->free_bytes_100937;
    int64_t bytes_101012 = futhark_mc_task_110018->free_bytes_101012;
    struct memblock mem_101185 = {.desc ="mem_101185", .mem =
                                  futhark_mc_task_110018->free_mem_101185,
                                  .size =0, .references =NULL};
    struct memblock mem_101189 = {.desc ="mem_101189", .mem =
                                  futhark_mc_task_110018->free_mem_101189,
                                  .size =0, .references =NULL};
    int64_t iter_105877;
    struct futhark_mc_segmap_parloop_struct_110020
    futhark_mc_segmap_parloop_struct_110020;
    
    futhark_mc_segmap_parloop_struct_110020.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110020.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110020.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110020.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110020.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110020.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110020.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110020.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110020.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110020.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110020.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110020.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110020.free_bytes_100925 = bytes_100925;
    futhark_mc_segmap_parloop_struct_110020.free_bytes_100937 = bytes_100937;
    futhark_mc_segmap_parloop_struct_110020.free_bytes_101012 = bytes_101012;
    futhark_mc_segmap_parloop_struct_110020.free_mem_101185 = mem_101185.mem;
    futhark_mc_segmap_parloop_struct_110020.free_mem_101189 = mem_101189.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110021_task;
    
    futhark_mc_segmap_parloop_110021_task.name =
        "futhark_mc_segmap_parloop_110021";
    futhark_mc_segmap_parloop_110021_task.fn = futhark_mc_segmap_parloop_110021;
    futhark_mc_segmap_parloop_110021_task.args =
        &futhark_mc_segmap_parloop_struct_110020;
    futhark_mc_segmap_parloop_110021_task.iterations = iterations;
    futhark_mc_segmap_parloop_110021_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110021_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110021_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110021_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110021_task);
    
    if (futhark_mc_segmap_parloop_110021_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110021_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110021_total_end -
                 futhark_mc_segmap_parloop_110021_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110021_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110021_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110021_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110019_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110019_end -
                 futhark_mc_segmap_task_110019_start;
        
        ctx->futhark_mc_segmap_task_110019_runs[tid]++;
        ctx->futhark_mc_segmap_task_110019_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110019_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110034 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_100925;
    int64_t free_bytes_100937;
    int64_t free_bytes_101012;
    unsigned char *free_mem_101185;
    unsigned char *free_mem_101189;
};
struct futhark_mc_task_110043 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97299;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100926;
};
struct futhark_mc_scan_stage_1_parloop_struct_110046 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97299;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100926;
};
static int futhark_mc_scan_stage_1_parloop_110047(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_106137, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_110046
    *futhark_mc_scan_stage_1_parloop_struct_110046 =
    (struct futhark_mc_scan_stage_1_parloop_struct_110046 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_110046->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_110047_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110047_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_110046->free_n_92399;
    int64_t gtid_97299 =
            futhark_mc_scan_stage_1_parloop_struct_110046->free_gtid_97299;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_110046->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100926 = {.desc ="mem_100926", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_110046->free_mem_100926,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106559 = start;
    int64_t x_106139;
    int64_t x_106140;
    
    x_106139 = (int64_t) 0;
    for (; iter_106559 < end; iter_106559++) {
        int64_t gtid_106138 = iter_106559;
        
        // stage 1 scan body
        {
            double x_106142;
            
            x_106142 = ((double *) Y_mem_100186.mem)[gtid_97299 * n_92399 +
                                                     gtid_106138];
            
            bool isnan_res_106143;
            
            isnan_res_106143 = futrts_isnan64(x_106142);
            
            bool defunc_0_p_res_106144 = !isnan_res_106143;
            int64_t defunc_0_f_res_106145 =
                    btoi_bool_i64(defunc_0_p_res_106144);
            
            // write mapped values results to memory
            { }
            x_106139 = x_106139;
            // Read next values
            {
                x_106140 = defunc_0_f_res_106145;
            }
            
            int64_t defunc_1_op_res_106141 = add64(x_106139, x_106140);
            
            ((int64_t *) mem_100926.mem)[gtid_106138] = defunc_1_op_res_106141;
            x_106139 = defunc_1_op_res_106141;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110047_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110047_end -
                 futhark_mc_scan_stage_1_parloop_110047_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_110047_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_110047_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_110047_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_110048 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97299;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100926;
};
static int futhark_mc_scan_stage_3_parloop_110049(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_106137, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_110048
    *futhark_mc_scan_stage_3_parloop_struct_110048 =
    (struct futhark_mc_scan_stage_3_parloop_struct_110048 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_110048->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_110049_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_110049_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_110048->free_n_92399;
    int64_t gtid_97299 =
            futhark_mc_scan_stage_3_parloop_struct_110048->free_gtid_97299;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_110048->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100926 = {.desc ="mem_100926", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_110048->free_mem_100926,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106571 = start;
    int64_t x_106568;
    int64_t x_106569;
    
    if (iter_106571 == (int64_t) 0) {
        x_106568 = (int64_t) 0;
    } else {
        x_106568 = ((int64_t *) mem_100926.mem)[iter_106571 - (int64_t) 1];
    }
    for (; iter_106571 < end; iter_106571++) {
        int64_t gtid_106138 = iter_106571;
        
        // stage 3 scan body
        {
            double x_106142;
            
            x_106142 = ((double *) Y_mem_100186.mem)[gtid_97299 * n_92399 +
                                                     gtid_106138];
            
            bool isnan_res_106143;
            
            isnan_res_106143 = futrts_isnan64(x_106142);
            
            bool defunc_0_p_res_106144 = !isnan_res_106143;
            int64_t defunc_0_f_res_106145 =
                    btoi_bool_i64(defunc_0_p_res_106144);
            
            x_106568 = x_106568;
            x_106569 = defunc_0_f_res_106145;
            
            int64_t defunc_1_op_res_106570 = add64(x_106568, x_106569);
            
            ((int64_t *) mem_100926.mem)[gtid_106138] = defunc_1_op_res_106570;
            x_106568 = defunc_1_op_res_106570;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_110049_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_110049_end -
                 futhark_mc_scan_stage_3_parloop_110049_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_110049_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_110049_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_110049_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_110044(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106137 = tid;
    int num_tasks_106558 = info.nsubtasks;
    struct futhark_mc_task_110043 *futhark_mc_task_110043 =
                                  (struct futhark_mc_task_110043 *) args;
    struct futhark_context *ctx = futhark_mc_task_110043->ctx;
    uint64_t futhark_mc_segscan_task_110044_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_110044_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110043->free_n_92399;
    int64_t gtid_97299 = futhark_mc_task_110043->free_gtid_97299;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110043->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100926 = {.desc ="mem_100926", .mem =
                                  futhark_mc_task_110043->free_mem_100926,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_106565_cached_sizze_110045 = 0;
    unsigned char *scan_stage_2_accum_mem_106565 = NULL;
    int64_t iter_106559;
    struct futhark_mc_scan_stage_1_parloop_struct_110046
    futhark_mc_scan_stage_1_parloop_struct_110046;
    
    futhark_mc_scan_stage_1_parloop_struct_110046.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_110046.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_110046.free_gtid_97299 = gtid_97299;
    futhark_mc_scan_stage_1_parloop_struct_110046.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_110046.free_mem_100926 =
        mem_100926.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_110047_task;
    
    futhark_mc_scan_stage_1_parloop_110047_task.name =
        "futhark_mc_scan_stage_1_parloop_110047";
    futhark_mc_scan_stage_1_parloop_110047_task.fn =
        futhark_mc_scan_stage_1_parloop_110047;
    futhark_mc_scan_stage_1_parloop_110047_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_110046;
    futhark_mc_scan_stage_1_parloop_110047_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_110047_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_110047_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110047_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_110047_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_110047_task);
    
    if (futhark_mc_scan_stage_1_parloop_110047_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110047_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110047_total_end -
                 futhark_mc_scan_stage_1_parloop_110047_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110047_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110047_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110047_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_106558)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_106560;
        int64_t x_106561;
        int64_t offset_106563 = (int64_t) 0;
        int64_t offset_index_106564 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_106565_cached_sizze_110045 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_106565 =
                realloc(scan_stage_2_accum_mem_106565, (int64_t) 8);
            scan_stage_2_accum_mem_106565_cached_sizze_110045 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_106565)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_106567 = 0; i_106567 < num_tasks_106558 - 1;
             i_106567++) {
            offset_106563 = squot64(n_92399, sext_i32_i64(num_tasks_106558));
            if (slt64(sext_i32_i64(i_106567), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_106558)))) {
                offset_106563 += (int64_t) 1;
            }
            offset_index_106564 += offset_106563;
            
            int64_t gtid_106138 = offset_index_106564;
            double x_106142;
            
            x_106142 = ((double *) Y_mem_100186.mem)[gtid_97299 * n_92399 +
                                                     gtid_106138];
            
            bool isnan_res_106143;
            
            isnan_res_106143 = futrts_isnan64(x_106142);
            
            bool defunc_0_p_res_106144 = !isnan_res_106143;
            int64_t defunc_0_f_res_106145 =
                    btoi_bool_i64(defunc_0_p_res_106144);
            
            // Read carry in
            {
                x_106560 =
                    ((int64_t *) scan_stage_2_accum_mem_106565)[(int64_t) 0];
            }
            // Read next values
            {
                x_106561 = ((int64_t *) mem_100926.mem)[offset_index_106564 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_106562 = add64(x_106560, x_106561);
            
            ((int64_t *) mem_100926.mem)[offset_index_106564 - (int64_t) 1] =
                defunc_1_op_res_106562;
            ((int64_t *) scan_stage_2_accum_mem_106565)[(int64_t) 0] =
                defunc_1_op_res_106562;
        }
        
        int64_t iter_106571 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_110048
        futhark_mc_scan_stage_3_parloop_struct_110048;
        
        futhark_mc_scan_stage_3_parloop_struct_110048.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_110048.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_110048.free_gtid_97299 =
            gtid_97299;
        futhark_mc_scan_stage_3_parloop_struct_110048.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_110048.free_mem_100926 =
            mem_100926.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_110049_task;
        
        futhark_mc_scan_stage_3_parloop_110049_task.name =
            "futhark_mc_scan_stage_3_parloop_110049";
        futhark_mc_scan_stage_3_parloop_110049_task.fn =
            futhark_mc_scan_stage_3_parloop_110049;
        futhark_mc_scan_stage_3_parloop_110049_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_110048;
        futhark_mc_scan_stage_3_parloop_110049_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_110049_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_110049_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_110049_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_110049_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_110049_task);
        
        if (futhark_mc_scan_stage_3_parloop_110049_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_110049_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_110049_total_end -
                     futhark_mc_scan_stage_3_parloop_110049_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110049_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110049_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110049_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_106565);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_110044_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_110044_end -
                 futhark_mc_segscan_task_110044_start;
        
        ctx->futhark_mc_segscan_task_110044_runs[tid]++;
        ctx->futhark_mc_segscan_task_110044_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_110044_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110050 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97299;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100926;
    unsigned char *free_mem_100929;
    unsigned char *free_mem_100932;
};
struct futhark_mc_segmap_parloop_struct_110052 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97299;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_100926;
    unsigned char *free_mem_100929;
    unsigned char *free_mem_100932;
};
static int futhark_mc_segmap_parloop_110053(void *args, int64_t start,
                                            int64_t end, int flat_tid_106146,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110052
    *futhark_mc_segmap_parloop_struct_110052 =
    (struct futhark_mc_segmap_parloop_struct_110052 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110052->ctx;
    uint64_t futhark_mc_segmap_parloop_110053_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110053_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110052->free_n_92399;
    int64_t gtid_97299 =
            futhark_mc_segmap_parloop_struct_110052->free_gtid_97299;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110052->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100926 = {.desc ="mem_100926", .mem =
                                  futhark_mc_segmap_parloop_struct_110052->free_mem_100926,
                                  .size =0, .references =NULL};
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_segmap_parloop_struct_110052->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_segmap_parloop_struct_110052->free_mem_100932,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106575 = start;
    
    for (; iter_106575 < end; iter_106575++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106578 = n_92399;
        int64_t gtid_106147 = iter_106575;
        int64_t remnant_106579 = iter_106575 - gtid_106147;
        double x_106148;
        
        x_106148 = ((double *) Y_mem_100186.mem)[gtid_97299 * n_92399 +
                                                 gtid_106147];
        
        bool isnan_res_106149;
        
        isnan_res_106149 = futrts_isnan64(x_106148);
        
        bool defunc_0_p_res_106150 = !isnan_res_106149;
        int64_t defunc_1_f_res_106151;
        
        if (defunc_0_p_res_106150) {
            int64_t x_106576;
            
            x_106576 = ((int64_t *) mem_100926.mem)[gtid_106147];
            
            int64_t defunc_1_f_res_t_res_106577 = sub64(x_106576, (int64_t) 1);
            
            defunc_1_f_res_106151 = defunc_1_f_res_t_res_106577;
        } else {
            defunc_1_f_res_106151 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_106151) &&
            slt64(defunc_1_f_res_106151, n_92399)) {
            ((int64_t *) mem_100932.mem)[defunc_1_f_res_106151] = gtid_106147;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_106151) &&
            slt64(defunc_1_f_res_106151, n_92399)) {
            ((double *) mem_100929.mem)[defunc_1_f_res_106151] = x_106148;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110053_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110053_end -
                 futhark_mc_segmap_parloop_110053_start;
        
        ctx->futhark_mc_segmap_parloop_110053_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110053_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110053_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110051(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106146 = tid;
    int num_tasks_106574 = info.nsubtasks;
    struct futhark_mc_task_110050 *futhark_mc_task_110050 =
                                  (struct futhark_mc_task_110050 *) args;
    struct futhark_context *ctx = futhark_mc_task_110050->ctx;
    uint64_t futhark_mc_segmap_task_110051_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110051_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110050->free_n_92399;
    int64_t gtid_97299 = futhark_mc_task_110050->free_gtid_97299;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110050->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_100926 = {.desc ="mem_100926", .mem =
                                  futhark_mc_task_110050->free_mem_100926,
                                  .size =0, .references =NULL};
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_task_110050->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_task_110050->free_mem_100932,
                                  .size =0, .references =NULL};
    int64_t iter_106575;
    struct futhark_mc_segmap_parloop_struct_110052
    futhark_mc_segmap_parloop_struct_110052;
    
    futhark_mc_segmap_parloop_struct_110052.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110052.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110052.free_gtid_97299 = gtid_97299;
    futhark_mc_segmap_parloop_struct_110052.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110052.free_mem_100926 = mem_100926.mem;
    futhark_mc_segmap_parloop_struct_110052.free_mem_100929 = mem_100929.mem;
    futhark_mc_segmap_parloop_struct_110052.free_mem_100932 = mem_100932.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110053_task;
    
    futhark_mc_segmap_parloop_110053_task.name =
        "futhark_mc_segmap_parloop_110053";
    futhark_mc_segmap_parloop_110053_task.fn = futhark_mc_segmap_parloop_110053;
    futhark_mc_segmap_parloop_110053_task.args =
        &futhark_mc_segmap_parloop_struct_110052;
    futhark_mc_segmap_parloop_110053_task.iterations = iterations;
    futhark_mc_segmap_parloop_110053_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110053_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110053_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110053_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110053_task);
    
    if (futhark_mc_segmap_parloop_110053_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110053_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110053_total_end -
                 futhark_mc_segmap_parloop_110053_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110053_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110053_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110053_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110051_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110051_end -
                 futhark_mc_segmap_task_110051_start;
        
        ctx->futhark_mc_segmap_task_110051_runs[tid]++;
        ctx->futhark_mc_segmap_task_110051_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110051_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110054 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100935;
};
struct futhark_mc_segmap_parloop_struct_110056 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100935;
};
static int futhark_mc_segmap_parloop_110057(void *args, int64_t start,
                                            int64_t end, int flat_tid_106154,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110056
    *futhark_mc_segmap_parloop_struct_110056 =
    (struct futhark_mc_segmap_parloop_struct_110056 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110056->ctx;
    uint64_t futhark_mc_segmap_parloop_110057_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110057_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110056->free_n_92399;
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_segmap_parloop_struct_110056->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_segmap_parloop_struct_110056->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106581 = start;
    
    for (; iter_106581 < end; iter_106581++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106582 = n_92399;
        int64_t gtid_106155 = iter_106581;
        int64_t remnant_106583 = iter_106581 - gtid_106155;
        int64_t x_106156;
        
        x_106156 = ((int64_t *) mem_100932.mem)[gtid_106155];
        
        int64_t defunc_0_f_res_106157 = add64((int64_t) 1, x_106156);
        
        ((int64_t *) mem_100935.mem)[gtid_106155] = defunc_0_f_res_106157;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110057_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110057_end -
                 futhark_mc_segmap_parloop_110057_start;
        
        ctx->futhark_mc_segmap_parloop_110057_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110057_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110057_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110055(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106154 = tid;
    int num_tasks_106580 = info.nsubtasks;
    struct futhark_mc_task_110054 *futhark_mc_task_110054 =
                                  (struct futhark_mc_task_110054 *) args;
    struct futhark_context *ctx = futhark_mc_task_110054->ctx;
    uint64_t futhark_mc_segmap_task_110055_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110055_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110054->free_n_92399;
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_task_110054->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_task_110054->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t iter_106581;
    struct futhark_mc_segmap_parloop_struct_110056
    futhark_mc_segmap_parloop_struct_110056;
    
    futhark_mc_segmap_parloop_struct_110056.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110056.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110056.free_mem_100932 = mem_100932.mem;
    futhark_mc_segmap_parloop_struct_110056.free_mem_100935 = mem_100935.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110057_task;
    
    futhark_mc_segmap_parloop_110057_task.name =
        "futhark_mc_segmap_parloop_110057";
    futhark_mc_segmap_parloop_110057_task.fn = futhark_mc_segmap_parloop_110057;
    futhark_mc_segmap_parloop_110057_task.args =
        &futhark_mc_segmap_parloop_struct_110056;
    futhark_mc_segmap_parloop_110057_task.iterations = iterations;
    futhark_mc_segmap_parloop_110057_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110057_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110057_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110057_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110057_task);
    
    if (futhark_mc_segmap_parloop_110057_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110057_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110057_total_end -
                 futhark_mc_segmap_parloop_110057_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110057_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110057_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110057_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110055_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110055_end -
                 futhark_mc_segmap_task_110055_start;
        
        ctx->futhark_mc_segmap_task_110055_runs[tid]++;
        ctx->futhark_mc_segmap_task_110055_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110055_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110058 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100938;
};
struct futhark_mc_segmap_parloop_struct_110060 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100938;
};
static int futhark_mc_segmap_parloop_110061(void *args, int64_t start,
                                            int64_t end, int flat_tid_106158,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110060
    *futhark_mc_segmap_parloop_struct_110060 =
    (struct futhark_mc_segmap_parloop_struct_110060 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110060->ctx;
    uint64_t futhark_mc_segmap_parloop_110061_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110061_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110060->free_q_92401;
    int64_t last_res_97311 =
            futhark_mc_segmap_parloop_struct_110060->free_last_res_97311;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_segmap_parloop_struct_110060->free_mem_100938,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106585 = start;
    
    for (; iter_106585 < end; iter_106585++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106586 = q_92401;
        int64_t gtid_106159 = iter_106585;
        int64_t remnant_106587 = iter_106585 - gtid_106159;
        bool cond_106160 = sle64(last_res_97311, gtid_106159);
        double defunc_0_f_res_106161;
        
        if (cond_106160) {
            defunc_0_f_res_106161 = 0.0;
        } else {
            defunc_0_f_res_106161 = 1.0;
        }
        ((double *) mem_100938.mem)[gtid_106159] = defunc_0_f_res_106161;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110061_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110061_end -
                 futhark_mc_segmap_parloop_110061_start;
        
        ctx->futhark_mc_segmap_parloop_110061_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110061_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110061_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110059(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106158 = tid;
    int num_tasks_106584 = info.nsubtasks;
    struct futhark_mc_task_110058 *futhark_mc_task_110058 =
                                  (struct futhark_mc_task_110058 *) args;
    struct futhark_context *ctx = futhark_mc_task_110058->ctx;
    uint64_t futhark_mc_segmap_task_110059_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110059_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_110058->free_q_92401;
    int64_t last_res_97311 = futhark_mc_task_110058->free_last_res_97311;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_task_110058->free_mem_100938,
                                  .size =0, .references =NULL};
    int64_t iter_106585;
    struct futhark_mc_segmap_parloop_struct_110060
    futhark_mc_segmap_parloop_struct_110060;
    
    futhark_mc_segmap_parloop_struct_110060.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110060.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110060.free_last_res_97311 =
        last_res_97311;
    futhark_mc_segmap_parloop_struct_110060.free_mem_100938 = mem_100938.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110061_task;
    
    futhark_mc_segmap_parloop_110061_task.name =
        "futhark_mc_segmap_parloop_110061";
    futhark_mc_segmap_parloop_110061_task.fn = futhark_mc_segmap_parloop_110061;
    futhark_mc_segmap_parloop_110061_task.args =
        &futhark_mc_segmap_parloop_struct_110060;
    futhark_mc_segmap_parloop_110061_task.iterations = iterations;
    futhark_mc_segmap_parloop_110061_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110061_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110061_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110061_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110061_task);
    
    if (futhark_mc_segmap_parloop_110061_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110061_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110061_total_end -
                 futhark_mc_segmap_parloop_110061_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110061_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110061_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110061_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110059_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110059_end -
                 futhark_mc_segmap_task_110059_start;
        
        ctx->futhark_mc_segmap_task_110059_runs[tid]++;
        ctx->futhark_mc_segmap_task_110059_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110059_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110062 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97311;
    int64_t free_min_arg_97330;
    int64_t free_min_arg_97331;
    int64_t free_min_res_97332;
    double free_max_res_97336;
    unsigned char *free_mem_100929;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100935;
    int64_t free_bytes_100937;
    unsigned char *free_mem_100938;
    unsigned char *free_mem_101013;
    unsigned char *free_mem_101016;
};
struct futhark_mc_segmap_parloop_struct_110064 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97311;
    int64_t free_min_arg_97330;
    int64_t free_min_arg_97331;
    int64_t free_min_res_97332;
    double free_max_res_97336;
    unsigned char *free_mem_100929;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100935;
    int64_t free_bytes_100937;
    unsigned char *free_mem_100938;
    unsigned char *free_mem_101013;
    unsigned char *free_mem_101016;
};
static int futhark_mc_segmap_parloop_110065(void *args, int64_t start,
                                            int64_t end, int flat_tid_106358,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110064
    *futhark_mc_segmap_parloop_struct_110064 =
    (struct futhark_mc_segmap_parloop_struct_110064 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110064->ctx;
    uint64_t futhark_mc_segmap_parloop_110065_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110065_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110064->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110064->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110064->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110064->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110064->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110064->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110064->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110064->free_loop_cond_92426;
    int64_t last_res_97311 =
            futhark_mc_segmap_parloop_struct_110064->free_last_res_97311;
    int64_t min_arg_97330 =
            futhark_mc_segmap_parloop_struct_110064->free_min_arg_97330;
    int64_t min_arg_97331 =
            futhark_mc_segmap_parloop_struct_110064->free_min_arg_97331;
    int64_t min_res_97332 =
            futhark_mc_segmap_parloop_struct_110064->free_min_res_97332;
    double max_res_97336 =
           futhark_mc_segmap_parloop_struct_110064->free_max_res_97336;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t bytes_100937 =
            futhark_mc_segmap_parloop_struct_110064->free_bytes_100937;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_100938,
                                  .size =0, .references =NULL};
    struct memblock mem_101013 = {.desc ="mem_101013", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_101013,
                                  .size =0, .references =NULL};
    struct memblock mem_101016 = {.desc ="mem_101016", .mem =
                                  futhark_mc_segmap_parloop_struct_110064->free_mem_101016,
                                  .size =0, .references =NULL};
    size_t mem_106446_cached_sizze_110066 = 0;
    unsigned char *mem_106446 = NULL;
    size_t mem_106448_cached_sizze_110067 = 0;
    unsigned char *mem_106448 = NULL;
    size_t mem_106473_cached_sizze_110068 = 0;
    unsigned char *mem_106473 = NULL;
    size_t mem_106475_cached_sizze_110069 = 0;
    unsigned char *mem_106475 = NULL;
    int64_t iterations = end - start;
    int64_t iter_106589 = start;
    
    if (mem_106446_cached_sizze_110066 < (size_t) bytes_100937) {
        mem_106446 = realloc(mem_106446, bytes_100937);
        mem_106446_cached_sizze_110066 = bytes_100937;
    }
    if (mem_106448_cached_sizze_110067 < (size_t) bytes_100937) {
        mem_106448 = realloc(mem_106448, bytes_100937);
        mem_106448_cached_sizze_110067 = bytes_100937;
    }
    if (mem_106473_cached_sizze_110068 < (size_t) bytes_100937) {
        mem_106473 = realloc(mem_106473, bytes_100937);
        mem_106473_cached_sizze_110068 = bytes_100937;
    }
    if (mem_106475_cached_sizze_110069 < (size_t) bytes_100937) {
        mem_106475 = realloc(mem_106475, bytes_100937);
        mem_106475_cached_sizze_110069 = bytes_100937;
    }
    for (; iter_106589 < end; iter_106589++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106711 = n_m_92409;
        int64_t gtid_106359 = iter_106589;
        int64_t remnant_106712 = iter_106589 - gtid_106359;
        int64_t min_arg_106360 = mul64(jump_92403, gtid_106359);
        int64_t min_res_106361 = smin64(i_92415, min_arg_106360);
        int64_t defunc_0_g_res_106362 = add64((int64_t) 1, min_res_106361);
        bool init_idx_106363;
        int64_t init_idx_106364;
        int64_t init_idx_106365;
        bool loop_while_106590;
        int64_t low_106591;
        int64_t high_106592;
        
        loop_while_106590 = x_92416;
        low_106591 = (int64_t) 0;
        high_106592 = i_92415;
        while (loop_while_106590) {
            int64_t x_106593 = add64(low_106591, high_106592);
            int64_t mid_106594 = sdiv64(x_106593, (int64_t) 2);
            bool x_106595 = sle64((int64_t) 0, mid_106594);
            bool y_106596 = slt64(mid_106594, n_92399);
            bool bounds_check_106597 = x_106595 && y_106596;
            bool index_certs_106598;
            
            if (!bounds_check_106597) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_106594,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_106599;
            
            mid_id_106599 = ((int64_t *) mem_100935.mem)[mid_106594];
            
            bool cond_106600 = slt64(mid_id_106599, (int64_t) 0);
            int64_t mid_idx_106601;
            
            if (cond_106600) {
                mid_idx_106601 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_106601 = mid_id_106599;
            }
            
            bool cond_106602 = sle64(defunc_0_g_res_106362, mid_idx_106601);
            int64_t loopres_106603;
            int64_t loopres_106604;
            
            if (cond_106602) {
                int64_t loopres_t_res_106605 = sub64(mid_106594, (int64_t) 1);
                
                loopres_106603 = low_106591;
                loopres_106604 = loopres_t_res_106605;
            } else {
                int64_t loopres_f_res_106606 = add64((int64_t) 1, mid_106594);
                
                loopres_106603 = loopres_f_res_106606;
                loopres_106604 = high_106592;
            }
            
            bool loop_cond_106607 = sle64(loopres_106603, loopres_106604);
            bool loop_while_tmp_106713 = loop_cond_106607;
            int64_t low_tmp_106714 = loopres_106603;
            int64_t high_tmp_106715 = loopres_106604;
            
            loop_while_106590 = loop_while_tmp_106713;
            low_106591 = low_tmp_106714;
            high_106592 = high_tmp_106715;
        }
        init_idx_106363 = loop_while_106590;
        init_idx_106364 = low_106591;
        init_idx_106365 = high_106592;
        
        bool idx_106384;
        int64_t idx_106385;
        int64_t idx_106386;
        int64_t idx_106387;
        bool loop_while_106608;
        int64_t l_idx_106609;
        int64_t r_idx_106610;
        int64_t span_106611;
        
        loop_while_106608 = loop_cond_92426;
        l_idx_106609 = init_idx_106364;
        r_idx_106610 = init_idx_106364;
        span_106611 = (int64_t) 1;
        while (loop_while_106608) {
            int64_t max_arg_106612 = sub64(l_idx_106609, (int64_t) 1);
            int64_t max_res_106613 = smax64((int64_t) 0, max_arg_106612);
            int64_t min_arg_106614 = add64((int64_t) 1, r_idx_106610);
            int64_t min_res_106615 = smin64(min_arg_97330, min_arg_106614);
            bool x_106616 = sle64((int64_t) 0, max_res_106613);
            bool y_106617 = slt64(max_res_106613, n_92399);
            bool bounds_check_106618 = x_106616 && y_106617;
            bool index_certs_106619;
            
            if (!bounds_check_106618) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_106613,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_106620;
            
            x_106620 = ((int64_t *) mem_100935.mem)[max_res_106613];
            
            int64_t abs_arg_106621 = sub64(x_106620, defunc_0_g_res_106362);
            int64_t abs_res_106622 = abs64(abs_arg_106621);
            bool x_106623 = sle64((int64_t) 0, min_res_106615);
            bool y_106624 = slt64(min_res_106615, n_92399);
            bool bounds_check_106625 = x_106623 && y_106624;
            bool index_certs_106626;
            
            if (!bounds_check_106625) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_106615,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_106627;
            
            x_106627 = ((int64_t *) mem_100935.mem)[min_res_106615];
            
            int64_t abs_arg_106628 = sub64(x_106627, defunc_0_g_res_106362);
            int64_t abs_res_106629 = abs64(abs_arg_106628);
            bool cond_106630 = max_res_106613 == l_idx_106609;
            int64_t loopres_106631;
            int64_t loopres_106632;
            int64_t loopres_106633;
            
            if (cond_106630) {
                loopres_106631 = l_idx_106609;
                loopres_106632 = r_idx_106610;
                loopres_106633 = min_res_92421;
            } else {
                bool cond_106634 = slt64(abs_res_106622, abs_res_106629);
                bool cond_f_res_106635 = min_res_106615 == r_idx_106610;
                bool x_106636 = !cond_106634;
                bool y_106637 = cond_f_res_106635 && x_106636;
                bool cond_106638 = cond_106634 || y_106637;
                int64_t loopres_f_res_106639;
                
                if (cond_106638) {
                    loopres_f_res_106639 = max_res_106613;
                } else {
                    loopres_f_res_106639 = l_idx_106609;
                }
                
                int64_t loopres_f_res_106640;
                
                if (cond_106638) {
                    loopres_f_res_106640 = r_idx_106610;
                } else {
                    loopres_f_res_106640 = min_res_106615;
                }
                
                int64_t loopres_f_res_106641;
                
                if (cond_106638) {
                    int64_t loopres_f_res_t_res_106642 = add64((int64_t) 1,
                                                               span_106611);
                    
                    loopres_f_res_106641 = loopres_f_res_t_res_106642;
                } else {
                    int64_t loopres_f_res_f_res_106643 = add64((int64_t) 1,
                                                               span_106611);
                    
                    loopres_f_res_106641 = loopres_f_res_f_res_106643;
                }
                loopres_106631 = loopres_f_res_106639;
                loopres_106632 = loopres_f_res_106640;
                loopres_106633 = loopres_f_res_106641;
            }
            
            bool loop_cond_106644 = slt64(loopres_106633, min_res_92421);
            bool loop_while_tmp_106716 = loop_cond_106644;
            int64_t l_idx_tmp_106717 = loopres_106631;
            int64_t r_idx_tmp_106718 = loopres_106632;
            int64_t span_tmp_106719 = loopres_106633;
            
            loop_while_106608 = loop_while_tmp_106716;
            l_idx_106609 = l_idx_tmp_106717;
            r_idx_106610 = r_idx_tmp_106718;
            span_106611 = span_tmp_106719;
        }
        idx_106384 = loop_while_106608;
        idx_106385 = l_idx_106609;
        idx_106386 = r_idx_106610;
        idx_106387 = span_106611;
        
        int64_t min_res_106425 = smin64(min_arg_97331, idx_106385);
        int64_t max_res_106426 = smax64((int64_t) 0, min_res_106425);
        int64_t x_106427 = add64(min_res_97332, max_res_106426);
        int64_t r_106428 = sub64(x_106427, (int64_t) 1);
        bool x_106429 = sle64((int64_t) 0, r_106428);
        bool y_106430 = slt64(r_106428, n_92399);
        bool bounds_check_106431 = x_106429 && y_106430;
        bool index_certs_106432;
        
        if (!bounds_check_106431) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_106428,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_106433;
        
        x_106433 = ((int64_t *) mem_100932.mem)[r_106428];
        
        int64_t abs_arg_106434 = sub64(x_106433, min_res_106361);
        int64_t abs_res_106435 = abs64(abs_arg_106434);
        bool x_106436 = sle64((int64_t) 0, max_res_106426);
        bool y_106437 = slt64(max_res_106426, n_92399);
        bool bounds_check_106438 = x_106436 && y_106437;
        bool index_certs_106439;
        
        if (!bounds_check_106438) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_106426,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_106440;
        
        x_106440 = ((int64_t *) mem_100932.mem)[max_res_106426];
        
        int64_t abs_arg_106441 = sub64(x_106440, min_res_106361);
        int64_t abs_res_106442 = abs64(abs_arg_106441);
        int64_t max_res_106443 = smax64(abs_res_106435, abs_res_106442);
        double defunc_0_f_res_106444 = sitofp_i64_f64(max_res_106443);
        double defunc_1_f_res_106445 = max_res_97336 + defunc_0_f_res_106444;
        
        for (int64_t i_106645 = 0; i_106645 < q_92401; i_106645++) {
            double x_106648;
            
            x_106648 = ((double *) mem_100938.mem)[i_106645];
            
            bool cond_106649 = sle64(last_res_97311, i_106645);
            int64_t defunc_0_f_res_106650;
            
            if (cond_106649) {
                defunc_0_f_res_106650 = (int64_t) 0;
            } else {
                int64_t i_106651 = add64(max_res_106426, i_106645);
                int64_t defunc_0_add_arg_106652;
                
                defunc_0_add_arg_106652 =
                    ((int64_t *) mem_100932.mem)[i_106651];
                
                int64_t defunc_1_add_res_106653 = add64((int64_t) 1,
                                                        defunc_0_add_arg_106652);
                
                defunc_0_f_res_106650 = defunc_1_add_res_106653;
            }
            
            int64_t binop_p_106654 = sub64(defunc_0_f_res_106650,
                                           min_res_106361);
            double defunc_0_f_res_106655 = sitofp_i64_f64(binop_p_106654);
            double abs_res_106656 = fabs(defunc_0_f_res_106655);
            double tmp1_106657 = abs_res_106656 / defunc_1_f_res_106445;
            double x_106658 = tmp1_106657 * tmp1_106657;
            double y_106659 = tmp1_106657 * x_106658;
            double tmp2_106660 = 1.0 - y_106659;
            double x_106661 = tmp2_106660 * tmp2_106660;
            double tmp3_106662 = tmp2_106660 * x_106661;
            double tmp4_106663 = x_106648 * tmp3_106662;
            
            ((double *) mem_106446)[i_106645] = defunc_0_f_res_106655;
            ((double *) mem_106448)[i_106645] = tmp4_106663;
        }
        
        double defunc_2_reduce_res_106477;
        double defunc_2_reduce_res_106478;
        double defunc_2_reduce_res_106479;
        double defunc_2_reduce_res_106480;
        double defunc_2_reduce_res_106481;
        double redout_106667;
        double redout_106668;
        double redout_106669;
        double redout_106670;
        double redout_106671;
        
        redout_106667 = 0.0;
        redout_106668 = 0.0;
        redout_106669 = 0.0;
        redout_106670 = 0.0;
        redout_106671 = 0.0;
        for (int64_t i_106666 = 0; i_106666 < q_92401; i_106666++) {
            double x_106674;
            
            x_106674 = ((double *) mem_106446)[i_106666];
            
            double x_106675;
            
            x_106675 = ((double *) mem_106448)[i_106666];
            
            double defunc_1_f_res_106676 = x_106674 * x_106675;
            double defunc_1_f_res_106677 = x_106674 * defunc_1_f_res_106676;
            double defunc_1_f_res_106678 = x_106674 * defunc_1_f_res_106677;
            double defunc_1_f_res_106679 = x_106674 * defunc_1_f_res_106678;
            double defunc_1_op_res_106680 = x_106675 + redout_106667;
            double defunc_1_op_res_106681 = defunc_1_f_res_106676 +
                   redout_106668;
            double defunc_1_op_res_106682 = defunc_1_f_res_106677 +
                   redout_106669;
            double defunc_1_op_res_106683 = defunc_1_f_res_106678 +
                   redout_106670;
            double defunc_1_op_res_106684 = defunc_1_f_res_106679 +
                   redout_106671;
            
            ((double *) mem_106473)[i_106666] = defunc_1_f_res_106677;
            ((double *) mem_106475)[i_106666] = defunc_1_f_res_106676;
            
            double redout_tmp_106722 = defunc_1_op_res_106680;
            double redout_tmp_106723 = defunc_1_op_res_106681;
            double redout_tmp_106724 = defunc_1_op_res_106682;
            double redout_tmp_106725 = defunc_1_op_res_106683;
            double redout_tmp_106726 = defunc_1_op_res_106684;
            
            redout_106667 = redout_tmp_106722;
            redout_106668 = redout_tmp_106723;
            redout_106669 = redout_tmp_106724;
            redout_106670 = redout_tmp_106725;
            redout_106671 = redout_tmp_106726;
        }
        defunc_2_reduce_res_106477 = redout_106667;
        defunc_2_reduce_res_106478 = redout_106668;
        defunc_2_reduce_res_106479 = redout_106669;
        defunc_2_reduce_res_106480 = redout_106670;
        defunc_2_reduce_res_106481 = redout_106671;
        
        double x_106505 = defunc_2_reduce_res_106479 *
               defunc_2_reduce_res_106481;
        double y_106506 = defunc_2_reduce_res_106480 *
               defunc_2_reduce_res_106480;
        double a12_106507 = x_106505 - y_106506;
        double x_106508 = defunc_2_reduce_res_106479 *
               defunc_2_reduce_res_106480;
        double y_106509 = defunc_2_reduce_res_106478 *
               defunc_2_reduce_res_106481;
        double b12_106510 = x_106508 - y_106509;
        double x_106511 = defunc_2_reduce_res_106478 *
               defunc_2_reduce_res_106480;
        double y_106512 = defunc_2_reduce_res_106479 *
               defunc_2_reduce_res_106479;
        double c12_106513 = x_106511 - y_106512;
        double x_106514 = defunc_2_reduce_res_106477 *
               defunc_2_reduce_res_106481;
        double b2_106515 = x_106514 - y_106512;
        double x_106516 = defunc_2_reduce_res_106478 *
               defunc_2_reduce_res_106479;
        double y_106517 = defunc_2_reduce_res_106477 *
               defunc_2_reduce_res_106480;
        double c2_106518 = x_106516 - y_106517;
        double x_106519 = defunc_2_reduce_res_106477 * a12_106507;
        double y_106520 = defunc_2_reduce_res_106478 * b12_106510;
        double x_106521 = x_106519 + y_106520;
        double y_106522 = defunc_2_reduce_res_106479 * c12_106513;
        double y_106523 = x_106521 + y_106522;
        double det_106524 = 1.0 / y_106523;
        double a12_106525 = a12_106507 * det_106524;
        double b12_106526 = b12_106510 * det_106524;
        double c12_106527 = c12_106513 * det_106524;
        double b2_106528 = b2_106515 * det_106524;
        double c2_106529 = c2_106518 * det_106524;
        double defunc_2_reduce_res_106530;
        double defunc_2_reduce_res_106531;
        double redout_106688;
        double redout_106689;
        
        redout_106688 = 0.0;
        redout_106689 = 0.0;
        for (int64_t i_106687 = 0; i_106687 < q_92401; i_106687++) {
            double x_106690;
            
            x_106690 = ((double *) mem_106448)[i_106687];
            
            double x_106691;
            
            x_106691 = ((double *) mem_106475)[i_106687];
            
            double x_106692;
            
            x_106692 = ((double *) mem_106473)[i_106687];
            
            bool cond_106693 = sle64(last_res_97311, i_106687);
            double defunc_0_f_res_106694;
            
            if (cond_106693) {
                defunc_0_f_res_106694 = 0.0;
            } else {
                int64_t i_106695 = add64(max_res_106426, i_106687);
                double defunc_0_add_arg_106696;
                
                defunc_0_add_arg_106696 = ((double *) mem_100929.mem)[i_106695];
                defunc_0_f_res_106694 = defunc_0_add_arg_106696;
            }
            
            double x_106697 = a12_106525 * x_106690;
            double y_106698 = b12_106526 * x_106691;
            double x_106699 = x_106697 + y_106698;
            double y_106700 = c12_106527 * x_106692;
            double x_106701 = x_106699 + y_106700;
            double defunc_9_fit_fun_res_106702 = defunc_0_f_res_106694 *
                   x_106701;
            double x_106703 = b12_106526 * x_106690;
            double y_106704 = b2_106528 * x_106691;
            double x_106705 = x_106703 + y_106704;
            double y_106706 = c2_106529 * x_106692;
            double x_106707 = x_106705 + y_106706;
            double defunc_9_slope_fun_res_106708 = defunc_0_f_res_106694 *
                   x_106707;
            double defunc_1_op_res_106709 = defunc_9_fit_fun_res_106702 +
                   redout_106688;
            double defunc_1_op_res_106710 = defunc_9_slope_fun_res_106708 +
                   redout_106689;
            double redout_tmp_106729 = defunc_1_op_res_106709;
            double redout_tmp_106730 = defunc_1_op_res_106710;
            
            redout_106688 = redout_tmp_106729;
            redout_106689 = redout_tmp_106730;
        }
        defunc_2_reduce_res_106530 = redout_106688;
        defunc_2_reduce_res_106531 = redout_106689;
        ((double *) mem_101013.mem)[gtid_106359] = defunc_2_reduce_res_106530;
        ((double *) mem_101016.mem)[gtid_106359] = defunc_2_reduce_res_106531;
    }
    
  cleanup:
    { }
    free(mem_106446);
    free(mem_106448);
    free(mem_106473);
    free(mem_106475);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110065_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110065_end -
                 futhark_mc_segmap_parloop_110065_start;
        
        ctx->futhark_mc_segmap_parloop_110065_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110065_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110065_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110063(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106358 = tid;
    int num_tasks_106588 = info.nsubtasks;
    struct futhark_mc_task_110062 *futhark_mc_task_110062 =
                                  (struct futhark_mc_task_110062 *) args;
    struct futhark_context *ctx = futhark_mc_task_110062->ctx;
    uint64_t futhark_mc_segmap_task_110063_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110063_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110062->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110062->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110062->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110062->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110062->free_i_92415;
    bool x_92416 = futhark_mc_task_110062->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110062->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110062->free_loop_cond_92426;
    int64_t last_res_97311 = futhark_mc_task_110062->free_last_res_97311;
    int64_t min_arg_97330 = futhark_mc_task_110062->free_min_arg_97330;
    int64_t min_arg_97331 = futhark_mc_task_110062->free_min_arg_97331;
    int64_t min_res_97332 = futhark_mc_task_110062->free_min_res_97332;
    double max_res_97336 = futhark_mc_task_110062->free_max_res_97336;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_task_110062->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_task_110062->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_task_110062->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t bytes_100937 = futhark_mc_task_110062->free_bytes_100937;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_task_110062->free_mem_100938,
                                  .size =0, .references =NULL};
    struct memblock mem_101013 = {.desc ="mem_101013", .mem =
                                  futhark_mc_task_110062->free_mem_101013,
                                  .size =0, .references =NULL};
    struct memblock mem_101016 = {.desc ="mem_101016", .mem =
                                  futhark_mc_task_110062->free_mem_101016,
                                  .size =0, .references =NULL};
    int64_t iter_106589;
    struct futhark_mc_segmap_parloop_struct_110064
    futhark_mc_segmap_parloop_struct_110064;
    
    futhark_mc_segmap_parloop_struct_110064.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110064.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110064.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110064.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110064.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110064.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110064.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110064.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110064.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110064.free_last_res_97311 =
        last_res_97311;
    futhark_mc_segmap_parloop_struct_110064.free_min_arg_97330 = min_arg_97330;
    futhark_mc_segmap_parloop_struct_110064.free_min_arg_97331 = min_arg_97331;
    futhark_mc_segmap_parloop_struct_110064.free_min_res_97332 = min_res_97332;
    futhark_mc_segmap_parloop_struct_110064.free_max_res_97336 = max_res_97336;
    futhark_mc_segmap_parloop_struct_110064.free_mem_100929 = mem_100929.mem;
    futhark_mc_segmap_parloop_struct_110064.free_mem_100932 = mem_100932.mem;
    futhark_mc_segmap_parloop_struct_110064.free_mem_100935 = mem_100935.mem;
    futhark_mc_segmap_parloop_struct_110064.free_bytes_100937 = bytes_100937;
    futhark_mc_segmap_parloop_struct_110064.free_mem_100938 = mem_100938.mem;
    futhark_mc_segmap_parloop_struct_110064.free_mem_101013 = mem_101013.mem;
    futhark_mc_segmap_parloop_struct_110064.free_mem_101016 = mem_101016.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110065_task;
    
    futhark_mc_segmap_parloop_110065_task.name =
        "futhark_mc_segmap_parloop_110065";
    futhark_mc_segmap_parloop_110065_task.fn = futhark_mc_segmap_parloop_110065;
    futhark_mc_segmap_parloop_110065_task.args =
        &futhark_mc_segmap_parloop_struct_110064;
    futhark_mc_segmap_parloop_110065_task.iterations = iterations;
    futhark_mc_segmap_parloop_110065_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110065_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110065_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110065_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110065_task);
    
    if (futhark_mc_segmap_parloop_110065_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110065_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110065_total_end -
                 futhark_mc_segmap_parloop_110065_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110065_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110065_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110065_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110063_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110063_end -
                 futhark_mc_segmap_task_110063_start;
        
        ctx->futhark_mc_segmap_task_110063_runs[tid]++;
        ctx->futhark_mc_segmap_task_110063_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110063_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110071 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97311;
    int64_t free_min_arg_97330;
    int64_t free_min_arg_97331;
    int64_t free_min_res_97332;
    double free_max_res_97336;
    unsigned char *free_mem_100929;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100935;
    int64_t free_bytes_100937;
    unsigned char *free_mem_100938;
    unsigned char *free_mem_101013;
    unsigned char *free_mem_101016;
};
struct futhark_mc_task_110077 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100938;
    int64_t free_min_res_106165;
    int64_t free_max_res_106230;
    double free_defunc_1_f_res_106249;
    unsigned char *free_mem_106250;
    unsigned char *free_mem_106251;
};
struct futhark_mc_segmap_parloop_struct_110079 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100932;
    unsigned char *free_mem_100938;
    int64_t free_min_res_106165;
    int64_t free_max_res_106230;
    double free_defunc_1_f_res_106249;
    unsigned char *free_mem_106250;
    unsigned char *free_mem_106251;
};
static int futhark_mc_segmap_parloop_110080(void *args, int64_t start,
                                            int64_t end, int flat_tid_106787,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110079
    *futhark_mc_segmap_parloop_struct_110079 =
    (struct futhark_mc_segmap_parloop_struct_110079 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110079->ctx;
    uint64_t futhark_mc_segmap_parloop_110080_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110080_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110079->free_q_92401;
    int64_t last_res_97311 =
            futhark_mc_segmap_parloop_struct_110079->free_last_res_97311;
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_segmap_parloop_struct_110079->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_segmap_parloop_struct_110079->free_mem_100938,
                                  .size =0, .references =NULL};
    int64_t min_res_106165 =
            futhark_mc_segmap_parloop_struct_110079->free_min_res_106165;
    int64_t max_res_106230 =
            futhark_mc_segmap_parloop_struct_110079->free_max_res_106230;
    double defunc_1_f_res_106249 =
           futhark_mc_segmap_parloop_struct_110079->free_defunc_1_f_res_106249;
    struct memblock mem_106250 = {.desc ="mem_106250", .mem =
                                  futhark_mc_segmap_parloop_struct_110079->free_mem_106250,
                                  .size =0, .references =NULL};
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_segmap_parloop_struct_110079->free_mem_106251,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106865 = start;
    
    for (; iter_106865 < end; iter_106865++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106869 = q_92401;
        int64_t gtid_106788 = iter_106865;
        int64_t remnant_106870 = iter_106865 - gtid_106788;
        double x_106789;
        
        x_106789 = ((double *) mem_100938.mem)[gtid_106788];
        
        bool cond_106790 = sle64(last_res_97311, gtid_106788);
        int64_t defunc_0_f_res_106791;
        
        if (cond_106790) {
            defunc_0_f_res_106791 = (int64_t) 0;
        } else {
            int64_t i_106866 = add64(max_res_106230, gtid_106788);
            int64_t defunc_0_add_arg_106867;
            
            defunc_0_add_arg_106867 = ((int64_t *) mem_100932.mem)[i_106866];
            
            int64_t defunc_1_add_res_106868 = add64((int64_t) 1,
                                                    defunc_0_add_arg_106867);
            
            defunc_0_f_res_106791 = defunc_1_add_res_106868;
        }
        
        int64_t binop_p_106795 = sub64(defunc_0_f_res_106791, min_res_106165);
        double defunc_0_f_res_106796 = sitofp_i64_f64(binop_p_106795);
        double abs_res_106797 = fabs(defunc_0_f_res_106796);
        double tmp1_106798 = abs_res_106797 / defunc_1_f_res_106249;
        double x_106799 = tmp1_106798 * tmp1_106798;
        double y_106800 = tmp1_106798 * x_106799;
        double tmp2_106801 = 1.0 - y_106800;
        double x_106802 = tmp2_106801 * tmp2_106801;
        double tmp3_106803 = tmp2_106801 * x_106802;
        double tmp4_106804 = x_106789 * tmp3_106803;
        
        ((double *) mem_106250.mem)[gtid_106788] = defunc_0_f_res_106796;
        ((double *) mem_106251.mem)[gtid_106788] = tmp4_106804;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110080_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110080_end -
                 futhark_mc_segmap_parloop_110080_start;
        
        ctx->futhark_mc_segmap_parloop_110080_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110080_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110080_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110078(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106787 = tid;
    int num_tasks_106864 = info.nsubtasks;
    struct futhark_mc_task_110077 *futhark_mc_task_110077 =
                                  (struct futhark_mc_task_110077 *) args;
    struct futhark_context *ctx = futhark_mc_task_110077->ctx;
    uint64_t futhark_mc_segmap_task_110078_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110078_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_110077->free_q_92401;
    int64_t last_res_97311 = futhark_mc_task_110077->free_last_res_97311;
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_task_110077->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_task_110077->free_mem_100938,
                                  .size =0, .references =NULL};
    int64_t min_res_106165 = futhark_mc_task_110077->free_min_res_106165;
    int64_t max_res_106230 = futhark_mc_task_110077->free_max_res_106230;
    double defunc_1_f_res_106249 =
           futhark_mc_task_110077->free_defunc_1_f_res_106249;
    struct memblock mem_106250 = {.desc ="mem_106250", .mem =
                                  futhark_mc_task_110077->free_mem_106250,
                                  .size =0, .references =NULL};
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_task_110077->free_mem_106251,
                                  .size =0, .references =NULL};
    int64_t iter_106865;
    struct futhark_mc_segmap_parloop_struct_110079
    futhark_mc_segmap_parloop_struct_110079;
    
    futhark_mc_segmap_parloop_struct_110079.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110079.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110079.free_last_res_97311 =
        last_res_97311;
    futhark_mc_segmap_parloop_struct_110079.free_mem_100932 = mem_100932.mem;
    futhark_mc_segmap_parloop_struct_110079.free_mem_100938 = mem_100938.mem;
    futhark_mc_segmap_parloop_struct_110079.free_min_res_106165 =
        min_res_106165;
    futhark_mc_segmap_parloop_struct_110079.free_max_res_106230 =
        max_res_106230;
    futhark_mc_segmap_parloop_struct_110079.free_defunc_1_f_res_106249 =
        defunc_1_f_res_106249;
    futhark_mc_segmap_parloop_struct_110079.free_mem_106250 = mem_106250.mem;
    futhark_mc_segmap_parloop_struct_110079.free_mem_106251 = mem_106251.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110080_task;
    
    futhark_mc_segmap_parloop_110080_task.name =
        "futhark_mc_segmap_parloop_110080";
    futhark_mc_segmap_parloop_110080_task.fn = futhark_mc_segmap_parloop_110080;
    futhark_mc_segmap_parloop_110080_task.args =
        &futhark_mc_segmap_parloop_struct_110079;
    futhark_mc_segmap_parloop_110080_task.iterations = iterations;
    futhark_mc_segmap_parloop_110080_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110080_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110080_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110080_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110080_task);
    
    if (futhark_mc_segmap_parloop_110080_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110080_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110080_total_end -
                 futhark_mc_segmap_parloop_110080_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110080_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110080_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110080_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110078_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110078_end -
                 futhark_mc_segmap_task_110078_start;
        
        ctx->futhark_mc_segmap_task_110078_runs[tid]++;
        ctx->futhark_mc_segmap_task_110078_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110078_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110081 {
    struct futhark_context *ctx;
    unsigned char *free_mem_106250;
    unsigned char *free_mem_106251;
    double *retval_defunc_2_reduce_res_106274;
    double *retval_defunc_2_reduce_res_106275;
    double *retval_defunc_2_reduce_res_106276;
    double *retval_defunc_2_reduce_res_106277;
    double *retval_defunc_2_reduce_res_106278;
    unsigned char *retval_mem_106272;
    unsigned char *retval_mem_106273;
};
struct futhark_mc_segred_stage_1_parloop_struct_110088 {
    struct futhark_context *ctx;
    unsigned char *free_mem_106250;
    unsigned char *free_mem_106251;
    unsigned char *free_mem_106272;
    unsigned char *free_mem_106273;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106872;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106874;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106876;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106878;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106880;
};
static int futhark_mc_segred_stage_1_parloop_110089(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_106805,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110088
    *futhark_mc_segred_stage_1_parloop_struct_110088 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110088 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110088->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110089_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110089_start = get_wall_time();
    
    struct memblock mem_106250 = {.desc ="mem_106250", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110088->free_mem_106250,
                                  .size =0, .references =NULL};
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110088->free_mem_106251,
                                  .size =0, .references =NULL};
    struct memblock mem_106272 = {.desc ="mem_106272", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110088->free_mem_106272,
                                  .size =0, .references =NULL};
    struct memblock mem_106273 = {.desc ="mem_106273", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110088->free_mem_106273,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106872 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106872",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110088->free_reduce_stage_1_tid_res_arr_mem_106872,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106874 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106874",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110088->free_reduce_stage_1_tid_res_arr_mem_106874,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106876 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106876",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110088->free_reduce_stage_1_tid_res_arr_mem_106876,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106878 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106878",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110088->free_reduce_stage_1_tid_res_arr_mem_106878,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106880 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106880",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110088->free_reduce_stage_1_tid_res_arr_mem_106880,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106882 = start;
    double x_106807;
    double x_106808;
    double x_106810;
    double x_106811;
    double x_106813;
    double x_106814;
    double x_106816;
    double x_106817;
    double x_106819;
    double x_106820;
    double local_acc_106883 = 0.0;
    double local_acc_106884 = 0.0;
    double local_acc_106885 = 0.0;
    double local_acc_106886 = 0.0;
    double local_acc_106887 = 0.0;
    
    for (; iter_106882 < end; iter_106882++) {
        int64_t gtid_106806 = iter_106882;
        double x_106822;
        
        x_106822 = ((double *) mem_106250.mem)[gtid_106806];
        
        double x_106823;
        
        x_106823 = ((double *) mem_106251.mem)[gtid_106806];
        
        double defunc_1_f_res_106824 = x_106822 * x_106823;
        double defunc_1_f_res_106825 = x_106822 * defunc_1_f_res_106824;
        double defunc_1_f_res_106826 = x_106822 * defunc_1_f_res_106825;
        double defunc_1_f_res_106827 = x_106822 * defunc_1_f_res_106826;
        
        // save map-out results
        {
            ((double *) mem_106272.mem)[gtid_106806] = defunc_1_f_res_106825;
            ((double *) mem_106273.mem)[gtid_106806] = defunc_1_f_res_106824;
        }
        // Load accum params
        {
            x_106807 = local_acc_106883;
        }
        // Load next params
        {
            x_106808 = x_106823;
        }
        // Red body
        {
            double defunc_1_op_res_106809 = x_106807 + x_106808;
            
            local_acc_106883 = defunc_1_op_res_106809;
        }
        // Load accum params
        {
            x_106810 = local_acc_106884;
        }
        // Load next params
        {
            x_106811 = defunc_1_f_res_106824;
        }
        // Red body
        {
            double defunc_1_op_res_106812 = x_106810 + x_106811;
            
            local_acc_106884 = defunc_1_op_res_106812;
        }
        // Load accum params
        {
            x_106813 = local_acc_106885;
        }
        // Load next params
        {
            x_106814 = defunc_1_f_res_106825;
        }
        // Red body
        {
            double defunc_1_op_res_106815 = x_106813 + x_106814;
            
            local_acc_106885 = defunc_1_op_res_106815;
        }
        // Load accum params
        {
            x_106816 = local_acc_106886;
        }
        // Load next params
        {
            x_106817 = defunc_1_f_res_106826;
        }
        // Red body
        {
            double defunc_1_op_res_106818 = x_106816 + x_106817;
            
            local_acc_106886 = defunc_1_op_res_106818;
        }
        // Load accum params
        {
            x_106819 = local_acc_106887;
        }
        // Load next params
        {
            x_106820 = defunc_1_f_res_106827;
        }
        // Red body
        {
            double defunc_1_op_res_106821 = x_106819 + x_106820;
            
            local_acc_106887 = defunc_1_op_res_106821;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_106872.mem)[flat_tid_106805] =
        local_acc_106883;
    ((double *) reduce_stage_1_tid_res_arr_mem_106874.mem)[flat_tid_106805] =
        local_acc_106884;
    ((double *) reduce_stage_1_tid_res_arr_mem_106876.mem)[flat_tid_106805] =
        local_acc_106885;
    ((double *) reduce_stage_1_tid_res_arr_mem_106878.mem)[flat_tid_106805] =
        local_acc_106886;
    ((double *) reduce_stage_1_tid_res_arr_mem_106880.mem)[flat_tid_106805] =
        local_acc_106887;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110089_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110089_end -
                 futhark_mc_segred_stage_1_parloop_110089_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110089_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110089_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110089_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110082(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106805 = tid;
    int num_tasks_106871 = info.nsubtasks;
    struct futhark_mc_task_110081 *futhark_mc_task_110081 =
                                  (struct futhark_mc_task_110081 *) args;
    struct futhark_context *ctx = futhark_mc_task_110081->ctx;
    uint64_t futhark_mc_segred_task_110082_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110082_start = get_wall_time();
    
    struct memblock mem_106250 = {.desc ="mem_106250", .mem =
                                  futhark_mc_task_110081->free_mem_106250,
                                  .size =0, .references =NULL};
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_task_110081->free_mem_106251,
                                  .size =0, .references =NULL};
    double defunc_2_reduce_res_106274 =
           *futhark_mc_task_110081->retval_defunc_2_reduce_res_106274;
    double defunc_2_reduce_res_106275 =
           *futhark_mc_task_110081->retval_defunc_2_reduce_res_106275;
    double defunc_2_reduce_res_106276 =
           *futhark_mc_task_110081->retval_defunc_2_reduce_res_106276;
    double defunc_2_reduce_res_106277 =
           *futhark_mc_task_110081->retval_defunc_2_reduce_res_106277;
    double defunc_2_reduce_res_106278 =
           *futhark_mc_task_110081->retval_defunc_2_reduce_res_106278;
    struct memblock mem_106272 = {.desc ="mem_106272", .mem =
                                  futhark_mc_task_110081->retval_mem_106272,
                                  .size =0, .references =NULL};
    struct memblock mem_106273 = {.desc ="mem_106273", .mem =
                                  futhark_mc_task_110081->retval_mem_106273,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_106872_cached_sizze_110083 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106872 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_106874_cached_sizze_110084 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106874 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_106876_cached_sizze_110085 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106876 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_106878_cached_sizze_110086 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106878 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_106880_cached_sizze_110087 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106880 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_106872_cached_sizze_110083 <
        (size_t) ((int64_t) 8 * num_tasks_106871)) {
        reduce_stage_1_tid_res_arr_mem_106872 =
            realloc(reduce_stage_1_tid_res_arr_mem_106872, (int64_t) 8 *
                    num_tasks_106871);
        reduce_stage_1_tid_res_arr_mem_106872_cached_sizze_110083 =
            (int64_t) 8 * num_tasks_106871;
    }
    if (reduce_stage_1_tid_res_arr_mem_106874_cached_sizze_110084 <
        (size_t) ((int64_t) 8 * num_tasks_106871)) {
        reduce_stage_1_tid_res_arr_mem_106874 =
            realloc(reduce_stage_1_tid_res_arr_mem_106874, (int64_t) 8 *
                    num_tasks_106871);
        reduce_stage_1_tid_res_arr_mem_106874_cached_sizze_110084 =
            (int64_t) 8 * num_tasks_106871;
    }
    if (reduce_stage_1_tid_res_arr_mem_106876_cached_sizze_110085 <
        (size_t) ((int64_t) 8 * num_tasks_106871)) {
        reduce_stage_1_tid_res_arr_mem_106876 =
            realloc(reduce_stage_1_tid_res_arr_mem_106876, (int64_t) 8 *
                    num_tasks_106871);
        reduce_stage_1_tid_res_arr_mem_106876_cached_sizze_110085 =
            (int64_t) 8 * num_tasks_106871;
    }
    if (reduce_stage_1_tid_res_arr_mem_106878_cached_sizze_110086 <
        (size_t) ((int64_t) 8 * num_tasks_106871)) {
        reduce_stage_1_tid_res_arr_mem_106878 =
            realloc(reduce_stage_1_tid_res_arr_mem_106878, (int64_t) 8 *
                    num_tasks_106871);
        reduce_stage_1_tid_res_arr_mem_106878_cached_sizze_110086 =
            (int64_t) 8 * num_tasks_106871;
    }
    if (reduce_stage_1_tid_res_arr_mem_106880_cached_sizze_110087 <
        (size_t) ((int64_t) 8 * num_tasks_106871)) {
        reduce_stage_1_tid_res_arr_mem_106880 =
            realloc(reduce_stage_1_tid_res_arr_mem_106880, (int64_t) 8 *
                    num_tasks_106871);
        reduce_stage_1_tid_res_arr_mem_106880_cached_sizze_110087 =
            (int64_t) 8 * num_tasks_106871;
    }
    
    int64_t iter_106882;
    struct futhark_mc_segred_stage_1_parloop_struct_110088
    futhark_mc_segred_stage_1_parloop_struct_110088;
    
    futhark_mc_segred_stage_1_parloop_struct_110088.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_mem_106250 =
        mem_106250.mem;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_mem_106251 =
        mem_106251.mem;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_mem_106272 =
        mem_106272.mem;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_mem_106273 =
        mem_106273.mem;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_reduce_stage_1_tid_res_arr_mem_106872 =
        reduce_stage_1_tid_res_arr_mem_106872;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_reduce_stage_1_tid_res_arr_mem_106874 =
        reduce_stage_1_tid_res_arr_mem_106874;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_reduce_stage_1_tid_res_arr_mem_106876 =
        reduce_stage_1_tid_res_arr_mem_106876;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_reduce_stage_1_tid_res_arr_mem_106878 =
        reduce_stage_1_tid_res_arr_mem_106878;
    futhark_mc_segred_stage_1_parloop_struct_110088.free_reduce_stage_1_tid_res_arr_mem_106880 =
        reduce_stage_1_tid_res_arr_mem_106880;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110089_task;
    
    futhark_mc_segred_stage_1_parloop_110089_task.name =
        "futhark_mc_segred_stage_1_parloop_110089";
    futhark_mc_segred_stage_1_parloop_110089_task.fn =
        futhark_mc_segred_stage_1_parloop_110089;
    futhark_mc_segred_stage_1_parloop_110089_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110088;
    futhark_mc_segred_stage_1_parloop_110089_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110089_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110089_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110089_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110089_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110089_task);
    
    if (futhark_mc_segred_stage_1_parloop_110089_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110089_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110089_total_end -
                 futhark_mc_segred_stage_1_parloop_110089_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110089_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110089_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110089_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_106274 = 0.0;
        defunc_2_reduce_res_106275 = 0.0;
        defunc_2_reduce_res_106276 = 0.0;
        defunc_2_reduce_res_106277 = 0.0;
        defunc_2_reduce_res_106278 = 0.0;
    }
    
    double x_106888;
    double x_106889;
    double x_106891;
    double x_106892;
    double x_106894;
    double x_106895;
    double x_106897;
    double x_106898;
    double x_106900;
    double x_106901;
    
    for (int32_t i_106903 = 0; i_106903 < num_tasks_106871; i_106903++) {
        flat_tid_106805 = i_106903;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_106888 = defunc_2_reduce_res_106274;
            }
            // load next params
            {
                x_106889 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106872)[flat_tid_106805];
            }
            // red body
            {
                double defunc_1_op_res_106890 = x_106888 + x_106889;
                
                defunc_2_reduce_res_106274 = defunc_1_op_res_106890;
            }
            // load acc params
            {
                x_106891 = defunc_2_reduce_res_106275;
            }
            // load next params
            {
                x_106892 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106874)[flat_tid_106805];
            }
            // red body
            {
                double defunc_1_op_res_106893 = x_106891 + x_106892;
                
                defunc_2_reduce_res_106275 = defunc_1_op_res_106893;
            }
            // load acc params
            {
                x_106894 = defunc_2_reduce_res_106276;
            }
            // load next params
            {
                x_106895 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106876)[flat_tid_106805];
            }
            // red body
            {
                double defunc_1_op_res_106896 = x_106894 + x_106895;
                
                defunc_2_reduce_res_106276 = defunc_1_op_res_106896;
            }
            // load acc params
            {
                x_106897 = defunc_2_reduce_res_106277;
            }
            // load next params
            {
                x_106898 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106878)[flat_tid_106805];
            }
            // red body
            {
                double defunc_1_op_res_106899 = x_106897 + x_106898;
                
                defunc_2_reduce_res_106277 = defunc_1_op_res_106899;
            }
            // load acc params
            {
                x_106900 = defunc_2_reduce_res_106278;
            }
            // load next params
            {
                x_106901 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106880)[flat_tid_106805];
            }
            // red body
            {
                double defunc_1_op_res_106902 = x_106900 + x_106901;
                
                defunc_2_reduce_res_106278 = defunc_1_op_res_106902;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_106872);
        free(reduce_stage_1_tid_res_arr_mem_106874);
        free(reduce_stage_1_tid_res_arr_mem_106876);
        free(reduce_stage_1_tid_res_arr_mem_106878);
        free(reduce_stage_1_tid_res_arr_mem_106880);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110082_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110082_end -
                 futhark_mc_segred_task_110082_start;
        
        ctx->futhark_mc_segred_task_110082_runs[tid]++;
        ctx->futhark_mc_segred_task_110082_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110082_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110081->retval_defunc_2_reduce_res_106274 =
            defunc_2_reduce_res_106274;
        *futhark_mc_task_110081->retval_defunc_2_reduce_res_106275 =
            defunc_2_reduce_res_106275;
        *futhark_mc_task_110081->retval_defunc_2_reduce_res_106276 =
            defunc_2_reduce_res_106276;
        *futhark_mc_task_110081->retval_defunc_2_reduce_res_106277 =
            defunc_2_reduce_res_106277;
        *futhark_mc_task_110081->retval_defunc_2_reduce_res_106278 =
            defunc_2_reduce_res_106278;
        futhark_mc_task_110081->retval_mem_106272 = mem_106272.mem;
        futhark_mc_task_110081->retval_mem_106273 = mem_106273.mem;
    }
    return err;
}
struct futhark_mc_task_110090 {
    struct futhark_context *ctx;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100929;
    int64_t free_max_res_106230;
    unsigned char *free_mem_106251;
    unsigned char *free_mem_106272;
    unsigned char *free_mem_106273;
    double free_a12_106324;
    double free_b12_106325;
    double free_c12_106326;
    double free_b2_106327;
    double free_c2_106328;
    double *retval_defunc_2_reduce_res_106329;
    double *retval_defunc_2_reduce_res_106330;
};
struct futhark_mc_segred_stage_1_parloop_struct_110094 {
    struct futhark_context *ctx;
    int64_t free_last_res_97311;
    unsigned char *free_mem_100929;
    int64_t free_max_res_106230;
    unsigned char *free_mem_106251;
    unsigned char *free_mem_106272;
    unsigned char *free_mem_106273;
    double free_a12_106324;
    double free_b12_106325;
    double free_c12_106326;
    double free_b2_106327;
    double free_c2_106328;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106905;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_106907;
};
static int futhark_mc_segred_stage_1_parloop_110095(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_106828,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110094
    *futhark_mc_segred_stage_1_parloop_struct_110094 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110094 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110094->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110095_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110095_start = get_wall_time();
    
    int64_t last_res_97311 =
            futhark_mc_segred_stage_1_parloop_struct_110094->free_last_res_97311;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110094->free_mem_100929,
                                  .size =0, .references =NULL};
    int64_t max_res_106230 =
            futhark_mc_segred_stage_1_parloop_struct_110094->free_max_res_106230;
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110094->free_mem_106251,
                                  .size =0, .references =NULL};
    struct memblock mem_106272 = {.desc ="mem_106272", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110094->free_mem_106272,
                                  .size =0, .references =NULL};
    struct memblock mem_106273 = {.desc ="mem_106273", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110094->free_mem_106273,
                                  .size =0, .references =NULL};
    double a12_106324 =
           futhark_mc_segred_stage_1_parloop_struct_110094->free_a12_106324;
    double b12_106325 =
           futhark_mc_segred_stage_1_parloop_struct_110094->free_b12_106325;
    double c12_106326 =
           futhark_mc_segred_stage_1_parloop_struct_110094->free_c12_106326;
    double b2_106327 =
           futhark_mc_segred_stage_1_parloop_struct_110094->free_b2_106327;
    double c2_106328 =
           futhark_mc_segred_stage_1_parloop_struct_110094->free_c2_106328;
    struct memblock reduce_stage_1_tid_res_arr_mem_106905 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106905",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110094->free_reduce_stage_1_tid_res_arr_mem_106905,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_106907 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_106907",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110094->free_reduce_stage_1_tid_res_arr_mem_106907,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_106909 = start;
    double x_106830;
    double x_106831;
    double x_106833;
    double x_106834;
    double local_acc_106910 = 0.0;
    double local_acc_106911 = 0.0;
    
    for (; iter_106909 < end; iter_106909++) {
        int64_t gtid_106829 = iter_106909;
        double x_106836;
        
        x_106836 = ((double *) mem_106251.mem)[gtid_106829];
        
        double x_106837;
        
        x_106837 = ((double *) mem_106273.mem)[gtid_106829];
        
        double x_106838;
        
        x_106838 = ((double *) mem_106272.mem)[gtid_106829];
        
        bool cond_106839 = sle64(last_res_97311, gtid_106829);
        double defunc_0_f_res_106840;
        
        if (cond_106839) {
            defunc_0_f_res_106840 = 0.0;
        } else {
            int64_t i_106841 = add64(max_res_106230, gtid_106829);
            double defunc_0_add_arg_106842;
            
            defunc_0_add_arg_106842 = ((double *) mem_100929.mem)[i_106841];
            defunc_0_f_res_106840 = defunc_0_add_arg_106842;
        }
        
        double x_106843 = a12_106324 * x_106836;
        double y_106844 = b12_106325 * x_106837;
        double x_106845 = x_106843 + y_106844;
        double y_106846 = c12_106326 * x_106838;
        double x_106847 = x_106845 + y_106846;
        double defunc_9_fit_fun_res_106848 = defunc_0_f_res_106840 * x_106847;
        double x_106849 = b12_106325 * x_106836;
        double y_106850 = b2_106327 * x_106837;
        double x_106851 = x_106849 + y_106850;
        double y_106852 = c2_106328 * x_106838;
        double x_106853 = x_106851 + y_106852;
        double defunc_9_slope_fun_res_106854 = defunc_0_f_res_106840 * x_106853;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_106830 = local_acc_106910;
        }
        // Load next params
        {
            x_106831 = defunc_9_fit_fun_res_106848;
        }
        // Red body
        {
            double defunc_1_op_res_106832 = x_106830 + x_106831;
            
            local_acc_106910 = defunc_1_op_res_106832;
        }
        // Load accum params
        {
            x_106833 = local_acc_106911;
        }
        // Load next params
        {
            x_106834 = defunc_9_slope_fun_res_106854;
        }
        // Red body
        {
            double defunc_1_op_res_106835 = x_106833 + x_106834;
            
            local_acc_106911 = defunc_1_op_res_106835;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_106905.mem)[flat_tid_106828] =
        local_acc_106910;
    ((double *) reduce_stage_1_tid_res_arr_mem_106907.mem)[flat_tid_106828] =
        local_acc_106911;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110095_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110095_end -
                 futhark_mc_segred_stage_1_parloop_110095_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110095_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110095_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110095_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110091(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106828 = tid;
    int num_tasks_106904 = info.nsubtasks;
    struct futhark_mc_task_110090 *futhark_mc_task_110090 =
                                  (struct futhark_mc_task_110090 *) args;
    struct futhark_context *ctx = futhark_mc_task_110090->ctx;
    uint64_t futhark_mc_segred_task_110091_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110091_start = get_wall_time();
    
    int64_t last_res_97311 = futhark_mc_task_110090->free_last_res_97311;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_task_110090->free_mem_100929,
                                  .size =0, .references =NULL};
    int64_t max_res_106230 = futhark_mc_task_110090->free_max_res_106230;
    struct memblock mem_106251 = {.desc ="mem_106251", .mem =
                                  futhark_mc_task_110090->free_mem_106251,
                                  .size =0, .references =NULL};
    struct memblock mem_106272 = {.desc ="mem_106272", .mem =
                                  futhark_mc_task_110090->free_mem_106272,
                                  .size =0, .references =NULL};
    struct memblock mem_106273 = {.desc ="mem_106273", .mem =
                                  futhark_mc_task_110090->free_mem_106273,
                                  .size =0, .references =NULL};
    double a12_106324 = futhark_mc_task_110090->free_a12_106324;
    double b12_106325 = futhark_mc_task_110090->free_b12_106325;
    double c12_106326 = futhark_mc_task_110090->free_c12_106326;
    double b2_106327 = futhark_mc_task_110090->free_b2_106327;
    double c2_106328 = futhark_mc_task_110090->free_c2_106328;
    double defunc_2_reduce_res_106329 =
           *futhark_mc_task_110090->retval_defunc_2_reduce_res_106329;
    double defunc_2_reduce_res_106330 =
           *futhark_mc_task_110090->retval_defunc_2_reduce_res_106330;
    size_t reduce_stage_1_tid_res_arr_mem_106905_cached_sizze_110092 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106905 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_106907_cached_sizze_110093 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_106907 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_106905_cached_sizze_110092 <
        (size_t) ((int64_t) 8 * num_tasks_106904)) {
        reduce_stage_1_tid_res_arr_mem_106905 =
            realloc(reduce_stage_1_tid_res_arr_mem_106905, (int64_t) 8 *
                    num_tasks_106904);
        reduce_stage_1_tid_res_arr_mem_106905_cached_sizze_110092 =
            (int64_t) 8 * num_tasks_106904;
    }
    if (reduce_stage_1_tid_res_arr_mem_106907_cached_sizze_110093 <
        (size_t) ((int64_t) 8 * num_tasks_106904)) {
        reduce_stage_1_tid_res_arr_mem_106907 =
            realloc(reduce_stage_1_tid_res_arr_mem_106907, (int64_t) 8 *
                    num_tasks_106904);
        reduce_stage_1_tid_res_arr_mem_106907_cached_sizze_110093 =
            (int64_t) 8 * num_tasks_106904;
    }
    
    int64_t iter_106909;
    struct futhark_mc_segred_stage_1_parloop_struct_110094
    futhark_mc_segred_stage_1_parloop_struct_110094;
    
    futhark_mc_segred_stage_1_parloop_struct_110094.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_last_res_97311 =
        last_res_97311;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_mem_100929 =
        mem_100929.mem;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_max_res_106230 =
        max_res_106230;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_mem_106251 =
        mem_106251.mem;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_mem_106272 =
        mem_106272.mem;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_mem_106273 =
        mem_106273.mem;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_a12_106324 =
        a12_106324;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_b12_106325 =
        b12_106325;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_c12_106326 =
        c12_106326;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_b2_106327 = b2_106327;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_c2_106328 = c2_106328;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_reduce_stage_1_tid_res_arr_mem_106905 =
        reduce_stage_1_tid_res_arr_mem_106905;
    futhark_mc_segred_stage_1_parloop_struct_110094.free_reduce_stage_1_tid_res_arr_mem_106907 =
        reduce_stage_1_tid_res_arr_mem_106907;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110095_task;
    
    futhark_mc_segred_stage_1_parloop_110095_task.name =
        "futhark_mc_segred_stage_1_parloop_110095";
    futhark_mc_segred_stage_1_parloop_110095_task.fn =
        futhark_mc_segred_stage_1_parloop_110095;
    futhark_mc_segred_stage_1_parloop_110095_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110094;
    futhark_mc_segred_stage_1_parloop_110095_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110095_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110095_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110095_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110095_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110095_task);
    
    if (futhark_mc_segred_stage_1_parloop_110095_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110095_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110095_total_end -
                 futhark_mc_segred_stage_1_parloop_110095_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110095_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110095_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110095_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_106329 = 0.0;
        defunc_2_reduce_res_106330 = 0.0;
    }
    
    double x_106912;
    double x_106913;
    double x_106915;
    double x_106916;
    
    for (int32_t i_106918 = 0; i_106918 < num_tasks_106904; i_106918++) {
        flat_tid_106828 = i_106918;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_106912 = defunc_2_reduce_res_106329;
            }
            // load next params
            {
                x_106913 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106905)[flat_tid_106828];
            }
            // red body
            {
                double defunc_1_op_res_106914 = x_106912 + x_106913;
                
                defunc_2_reduce_res_106329 = defunc_1_op_res_106914;
            }
            // load acc params
            {
                x_106915 = defunc_2_reduce_res_106330;
            }
            // load next params
            {
                x_106916 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_106907)[flat_tid_106828];
            }
            // red body
            {
                double defunc_1_op_res_106917 = x_106915 + x_106916;
                
                defunc_2_reduce_res_106330 = defunc_1_op_res_106917;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_106905);
        free(reduce_stage_1_tid_res_arr_mem_106907);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110091_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110091_end -
                 futhark_mc_segred_task_110091_start;
        
        ctx->futhark_mc_segred_task_110091_runs[tid]++;
        ctx->futhark_mc_segred_task_110091_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110091_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110090->retval_defunc_2_reduce_res_106329 =
            defunc_2_reduce_res_106329;
        *futhark_mc_task_110090->retval_defunc_2_reduce_res_106330 =
            defunc_2_reduce_res_106330;
    }
    return err;
}
static int futhark_mc_segmap_parloop_110072(void *args, int64_t start,
                                            int64_t end, int flat_tid_106162,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110071
    *futhark_mc_segmap_parloop_struct_110071 =
    (struct futhark_mc_segmap_parloop_struct_110071 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110071->ctx;
    uint64_t futhark_mc_segmap_parloop_110072_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110072_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110071->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110071->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110071->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110071->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110071->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110071->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110071->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110071->free_loop_cond_92426;
    int64_t last_res_97311 =
            futhark_mc_segmap_parloop_struct_110071->free_last_res_97311;
    int64_t min_arg_97330 =
            futhark_mc_segmap_parloop_struct_110071->free_min_arg_97330;
    int64_t min_arg_97331 =
            futhark_mc_segmap_parloop_struct_110071->free_min_arg_97331;
    int64_t min_res_97332 =
            futhark_mc_segmap_parloop_struct_110071->free_min_res_97332;
    double max_res_97336 =
           futhark_mc_segmap_parloop_struct_110071->free_max_res_97336;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t bytes_100937 =
            futhark_mc_segmap_parloop_struct_110071->free_bytes_100937;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_100938,
                                  .size =0, .references =NULL};
    struct memblock mem_101013 = {.desc ="mem_101013", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_101013,
                                  .size =0, .references =NULL};
    struct memblock mem_101016 = {.desc ="mem_101016", .mem =
                                  futhark_mc_segmap_parloop_struct_110071->free_mem_101016,
                                  .size =0, .references =NULL};
    size_t mem_106250_cached_sizze_110073 = 0;
    unsigned char *mem_106250 = NULL;
    size_t mem_106251_cached_sizze_110074 = 0;
    unsigned char *mem_106251 = NULL;
    size_t mem_106272_cached_sizze_110075 = 0;
    unsigned char *mem_106272 = NULL;
    size_t mem_106273_cached_sizze_110076 = 0;
    unsigned char *mem_106273 = NULL;
    int64_t iterations = end - start;
    int64_t iter_106731 = start;
    
    if (mem_106250_cached_sizze_110073 < (size_t) bytes_100937) {
        mem_106250 = realloc(mem_106250, bytes_100937);
        mem_106250_cached_sizze_110073 = bytes_100937;
    }
    if (mem_106251_cached_sizze_110074 < (size_t) bytes_100937) {
        mem_106251 = realloc(mem_106251, bytes_100937);
        mem_106251_cached_sizze_110074 = bytes_100937;
    }
    if (mem_106272_cached_sizze_110075 < (size_t) bytes_100937) {
        mem_106272 = realloc(mem_106272, bytes_100937);
        mem_106272_cached_sizze_110075 = bytes_100937;
    }
    if (mem_106273_cached_sizze_110076 < (size_t) bytes_100937) {
        mem_106273 = realloc(mem_106273, bytes_100937);
        mem_106273_cached_sizze_110076 = bytes_100937;
    }
    for (; iter_106731 < end; iter_106731++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106855 = n_m_92409;
        int64_t gtid_106163 = iter_106731;
        int64_t remnant_106856 = iter_106731 - gtid_106163;
        int64_t min_arg_106164 = mul64(jump_92403, gtid_106163);
        int64_t min_res_106165 = smin64(i_92415, min_arg_106164);
        int64_t defunc_0_g_res_106166 = add64((int64_t) 1, min_res_106165);
        bool init_idx_106167;
        int64_t init_idx_106168;
        int64_t init_idx_106169;
        bool loop_while_106732;
        int64_t low_106733;
        int64_t high_106734;
        
        loop_while_106732 = x_92416;
        low_106733 = (int64_t) 0;
        high_106734 = i_92415;
        while (loop_while_106732) {
            int64_t x_106735 = add64(low_106733, high_106734);
            int64_t mid_106736 = sdiv64(x_106735, (int64_t) 2);
            bool x_106737 = sle64((int64_t) 0, mid_106736);
            bool y_106738 = slt64(mid_106736, n_92399);
            bool bounds_check_106739 = x_106737 && y_106738;
            bool index_certs_106740;
            
            if (!bounds_check_106739) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_106736,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_106741;
            
            mid_id_106741 = ((int64_t *) mem_100935.mem)[mid_106736];
            
            bool cond_106742 = slt64(mid_id_106741, (int64_t) 0);
            int64_t mid_idx_106743;
            
            if (cond_106742) {
                mid_idx_106743 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_106743 = mid_id_106741;
            }
            
            bool cond_106744 = sle64(defunc_0_g_res_106166, mid_idx_106743);
            int64_t loopres_106745;
            int64_t loopres_106746;
            
            if (cond_106744) {
                int64_t loopres_t_res_106747 = sub64(mid_106736, (int64_t) 1);
                
                loopres_106745 = low_106733;
                loopres_106746 = loopres_t_res_106747;
            } else {
                int64_t loopres_f_res_106748 = add64((int64_t) 1, mid_106736);
                
                loopres_106745 = loopres_f_res_106748;
                loopres_106746 = high_106734;
            }
            
            bool loop_cond_106749 = sle64(loopres_106745, loopres_106746);
            bool loop_while_tmp_106857 = loop_cond_106749;
            int64_t low_tmp_106858 = loopres_106745;
            int64_t high_tmp_106859 = loopres_106746;
            
            loop_while_106732 = loop_while_tmp_106857;
            low_106733 = low_tmp_106858;
            high_106734 = high_tmp_106859;
        }
        init_idx_106167 = loop_while_106732;
        init_idx_106168 = low_106733;
        init_idx_106169 = high_106734;
        
        bool idx_106188;
        int64_t idx_106189;
        int64_t idx_106190;
        int64_t idx_106191;
        bool loop_while_106750;
        int64_t l_idx_106751;
        int64_t r_idx_106752;
        int64_t span_106753;
        
        loop_while_106750 = loop_cond_92426;
        l_idx_106751 = init_idx_106168;
        r_idx_106752 = init_idx_106168;
        span_106753 = (int64_t) 1;
        while (loop_while_106750) {
            int64_t max_arg_106754 = sub64(l_idx_106751, (int64_t) 1);
            int64_t max_res_106755 = smax64((int64_t) 0, max_arg_106754);
            int64_t min_arg_106756 = add64((int64_t) 1, r_idx_106752);
            int64_t min_res_106757 = smin64(min_arg_97330, min_arg_106756);
            bool x_106758 = sle64((int64_t) 0, max_res_106755);
            bool y_106759 = slt64(max_res_106755, n_92399);
            bool bounds_check_106760 = x_106758 && y_106759;
            bool index_certs_106761;
            
            if (!bounds_check_106760) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_106755,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_106762;
            
            x_106762 = ((int64_t *) mem_100935.mem)[max_res_106755];
            
            int64_t abs_arg_106763 = sub64(x_106762, defunc_0_g_res_106166);
            int64_t abs_res_106764 = abs64(abs_arg_106763);
            bool x_106765 = sle64((int64_t) 0, min_res_106757);
            bool y_106766 = slt64(min_res_106757, n_92399);
            bool bounds_check_106767 = x_106765 && y_106766;
            bool index_certs_106768;
            
            if (!bounds_check_106767) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_106757,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_106769;
            
            x_106769 = ((int64_t *) mem_100935.mem)[min_res_106757];
            
            int64_t abs_arg_106770 = sub64(x_106769, defunc_0_g_res_106166);
            int64_t abs_res_106771 = abs64(abs_arg_106770);
            bool cond_106772 = max_res_106755 == l_idx_106751;
            int64_t loopres_106773;
            int64_t loopres_106774;
            int64_t loopres_106775;
            
            if (cond_106772) {
                loopres_106773 = l_idx_106751;
                loopres_106774 = r_idx_106752;
                loopres_106775 = min_res_92421;
            } else {
                bool cond_106776 = slt64(abs_res_106764, abs_res_106771);
                bool cond_f_res_106777 = min_res_106757 == r_idx_106752;
                bool x_106778 = !cond_106776;
                bool y_106779 = cond_f_res_106777 && x_106778;
                bool cond_106780 = cond_106776 || y_106779;
                int64_t loopres_f_res_106781;
                
                if (cond_106780) {
                    loopres_f_res_106781 = max_res_106755;
                } else {
                    loopres_f_res_106781 = l_idx_106751;
                }
                
                int64_t loopres_f_res_106782;
                
                if (cond_106780) {
                    loopres_f_res_106782 = r_idx_106752;
                } else {
                    loopres_f_res_106782 = min_res_106757;
                }
                
                int64_t loopres_f_res_106783;
                
                if (cond_106780) {
                    int64_t loopres_f_res_t_res_106784 = add64((int64_t) 1,
                                                               span_106753);
                    
                    loopres_f_res_106783 = loopres_f_res_t_res_106784;
                } else {
                    int64_t loopres_f_res_f_res_106785 = add64((int64_t) 1,
                                                               span_106753);
                    
                    loopres_f_res_106783 = loopres_f_res_f_res_106785;
                }
                loopres_106773 = loopres_f_res_106781;
                loopres_106774 = loopres_f_res_106782;
                loopres_106775 = loopres_f_res_106783;
            }
            
            bool loop_cond_106786 = slt64(loopres_106775, min_res_92421);
            bool loop_while_tmp_106860 = loop_cond_106786;
            int64_t l_idx_tmp_106861 = loopres_106773;
            int64_t r_idx_tmp_106862 = loopres_106774;
            int64_t span_tmp_106863 = loopres_106775;
            
            loop_while_106750 = loop_while_tmp_106860;
            l_idx_106751 = l_idx_tmp_106861;
            r_idx_106752 = r_idx_tmp_106862;
            span_106753 = span_tmp_106863;
        }
        idx_106188 = loop_while_106750;
        idx_106189 = l_idx_106751;
        idx_106190 = r_idx_106752;
        idx_106191 = span_106753;
        
        int64_t min_res_106229 = smin64(min_arg_97331, idx_106189);
        int64_t max_res_106230 = smax64((int64_t) 0, min_res_106229);
        int64_t x_106231 = add64(min_res_97332, max_res_106230);
        int64_t r_106232 = sub64(x_106231, (int64_t) 1);
        bool x_106233 = sle64((int64_t) 0, r_106232);
        bool y_106234 = slt64(r_106232, n_92399);
        bool bounds_check_106235 = x_106233 && y_106234;
        bool index_certs_106236;
        
        if (!bounds_check_106235) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_106232,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_106237;
        
        x_106237 = ((int64_t *) mem_100932.mem)[r_106232];
        
        int64_t abs_arg_106238 = sub64(x_106237, min_res_106165);
        int64_t abs_res_106239 = abs64(abs_arg_106238);
        bool x_106240 = sle64((int64_t) 0, max_res_106230);
        bool y_106241 = slt64(max_res_106230, n_92399);
        bool bounds_check_106242 = x_106240 && y_106241;
        bool index_certs_106243;
        
        if (!bounds_check_106242) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_106230,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_106244;
        
        x_106244 = ((int64_t *) mem_100932.mem)[max_res_106230];
        
        int64_t abs_arg_106245 = sub64(x_106244, min_res_106165);
        int64_t abs_res_106246 = abs64(abs_arg_106245);
        int64_t max_res_106247 = smax64(abs_res_106239, abs_res_106246);
        double defunc_0_f_res_106248 = sitofp_i64_f64(max_res_106247);
        double defunc_1_f_res_106249 = max_res_97336 + defunc_0_f_res_106248;
        int64_t flat_tid_106787 = (int64_t) 0;
        int32_t num_tasks_106864;
        struct futhark_mc_task_110077 futhark_mc_task_110077;
        
        futhark_mc_task_110077.ctx = ctx;
        futhark_mc_task_110077.free_q_92401 = q_92401;
        futhark_mc_task_110077.free_last_res_97311 = last_res_97311;
        futhark_mc_task_110077.free_mem_100932 = mem_100932.mem;
        futhark_mc_task_110077.free_mem_100938 = mem_100938.mem;
        futhark_mc_task_110077.free_min_res_106165 = min_res_106165;
        futhark_mc_task_110077.free_max_res_106230 = max_res_106230;
        futhark_mc_task_110077.free_defunc_1_f_res_106249 =
            defunc_1_f_res_106249;
        futhark_mc_task_110077.free_mem_106250 = mem_106250;
        futhark_mc_task_110077.free_mem_106251 = mem_106251;
        
        struct scheduler_segop futhark_mc_task_110077_task;
        
        futhark_mc_task_110077_task.args = &futhark_mc_task_110077;
        futhark_mc_task_110077_task.top_level_fn =
            futhark_mc_segmap_task_110078;
        futhark_mc_task_110077_task.name = "futhark_mc_segmap_task_110078";
        futhark_mc_task_110077_task.iterations = q_92401;
        futhark_mc_task_110077_task.task_time =
            &ctx->futhark_mc_segmap_task_110078_total_time;
        futhark_mc_task_110077_task.task_iter =
            &ctx->futhark_mc_segmap_task_110078_total_iter;
        futhark_mc_task_110077_task.sched = STATIC;
        futhark_mc_task_110077_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110078_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110077_task);
        
        if (futhark_mc_segmap_task_110078_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double defunc_2_reduce_res_106274;
        double defunc_2_reduce_res_106275;
        double defunc_2_reduce_res_106276;
        double defunc_2_reduce_res_106277;
        double defunc_2_reduce_res_106278;
        int64_t flat_tid_106805 = (int64_t) 0;
        int32_t num_tasks_106871;
        
        defunc_2_reduce_res_106274 = 0.0;
        defunc_2_reduce_res_106275 = 0.0;
        defunc_2_reduce_res_106276 = 0.0;
        defunc_2_reduce_res_106277 = 0.0;
        defunc_2_reduce_res_106278 = 0.0;
        
        struct futhark_mc_task_110081 futhark_mc_task_110081;
        
        futhark_mc_task_110081.ctx = ctx;
        futhark_mc_task_110081.free_mem_106250 = mem_106250;
        futhark_mc_task_110081.free_mem_106251 = mem_106251;
        futhark_mc_task_110081.retval_defunc_2_reduce_res_106274 =
            &defunc_2_reduce_res_106274;
        futhark_mc_task_110081.retval_defunc_2_reduce_res_106275 =
            &defunc_2_reduce_res_106275;
        futhark_mc_task_110081.retval_defunc_2_reduce_res_106276 =
            &defunc_2_reduce_res_106276;
        futhark_mc_task_110081.retval_defunc_2_reduce_res_106277 =
            &defunc_2_reduce_res_106277;
        futhark_mc_task_110081.retval_defunc_2_reduce_res_106278 =
            &defunc_2_reduce_res_106278;
        futhark_mc_task_110081.retval_mem_106272 = mem_106272;
        futhark_mc_task_110081.retval_mem_106273 = mem_106273;
        
        struct scheduler_segop futhark_mc_task_110081_task;
        
        futhark_mc_task_110081_task.args = &futhark_mc_task_110081;
        futhark_mc_task_110081_task.top_level_fn =
            futhark_mc_segred_task_110082;
        futhark_mc_task_110081_task.name = "futhark_mc_segred_task_110082";
        futhark_mc_task_110081_task.iterations = q_92401;
        futhark_mc_task_110081_task.task_time =
            &ctx->futhark_mc_segred_task_110082_total_time;
        futhark_mc_task_110081_task.task_iter =
            &ctx->futhark_mc_segred_task_110082_total_iter;
        futhark_mc_task_110081_task.sched = STATIC;
        futhark_mc_task_110081_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110082_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110081_task);
        
        if (futhark_mc_segred_task_110082_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_106304 = defunc_2_reduce_res_106276 *
               defunc_2_reduce_res_106278;
        double y_106305 = defunc_2_reduce_res_106277 *
               defunc_2_reduce_res_106277;
        double a12_106306 = x_106304 - y_106305;
        double x_106307 = defunc_2_reduce_res_106276 *
               defunc_2_reduce_res_106277;
        double y_106308 = defunc_2_reduce_res_106275 *
               defunc_2_reduce_res_106278;
        double b12_106309 = x_106307 - y_106308;
        double x_106310 = defunc_2_reduce_res_106275 *
               defunc_2_reduce_res_106277;
        double y_106311 = defunc_2_reduce_res_106276 *
               defunc_2_reduce_res_106276;
        double c12_106312 = x_106310 - y_106311;
        double x_106313 = defunc_2_reduce_res_106274 *
               defunc_2_reduce_res_106278;
        double b2_106314 = x_106313 - y_106311;
        double x_106315 = defunc_2_reduce_res_106275 *
               defunc_2_reduce_res_106276;
        double y_106316 = defunc_2_reduce_res_106274 *
               defunc_2_reduce_res_106277;
        double c2_106317 = x_106315 - y_106316;
        double x_106318 = defunc_2_reduce_res_106274 * a12_106306;
        double y_106319 = defunc_2_reduce_res_106275 * b12_106309;
        double x_106320 = x_106318 + y_106319;
        double y_106321 = defunc_2_reduce_res_106276 * c12_106312;
        double y_106322 = x_106320 + y_106321;
        double det_106323 = 1.0 / y_106322;
        double a12_106324 = a12_106306 * det_106323;
        double b12_106325 = b12_106309 * det_106323;
        double c12_106326 = c12_106312 * det_106323;
        double b2_106327 = b2_106314 * det_106323;
        double c2_106328 = c2_106317 * det_106323;
        double defunc_2_reduce_res_106329;
        double defunc_2_reduce_res_106330;
        int64_t flat_tid_106828 = (int64_t) 0;
        int32_t num_tasks_106904;
        
        defunc_2_reduce_res_106329 = 0.0;
        defunc_2_reduce_res_106330 = 0.0;
        
        struct futhark_mc_task_110090 futhark_mc_task_110090;
        
        futhark_mc_task_110090.ctx = ctx;
        futhark_mc_task_110090.free_last_res_97311 = last_res_97311;
        futhark_mc_task_110090.free_mem_100929 = mem_100929.mem;
        futhark_mc_task_110090.free_max_res_106230 = max_res_106230;
        futhark_mc_task_110090.free_mem_106251 = mem_106251;
        futhark_mc_task_110090.free_mem_106272 = mem_106272;
        futhark_mc_task_110090.free_mem_106273 = mem_106273;
        futhark_mc_task_110090.free_a12_106324 = a12_106324;
        futhark_mc_task_110090.free_b12_106325 = b12_106325;
        futhark_mc_task_110090.free_c12_106326 = c12_106326;
        futhark_mc_task_110090.free_b2_106327 = b2_106327;
        futhark_mc_task_110090.free_c2_106328 = c2_106328;
        futhark_mc_task_110090.retval_defunc_2_reduce_res_106329 =
            &defunc_2_reduce_res_106329;
        futhark_mc_task_110090.retval_defunc_2_reduce_res_106330 =
            &defunc_2_reduce_res_106330;
        
        struct scheduler_segop futhark_mc_task_110090_task;
        
        futhark_mc_task_110090_task.args = &futhark_mc_task_110090;
        futhark_mc_task_110090_task.top_level_fn =
            futhark_mc_segred_task_110091;
        futhark_mc_task_110090_task.name = "futhark_mc_segred_task_110091";
        futhark_mc_task_110090_task.iterations = q_92401;
        futhark_mc_task_110090_task.task_time =
            &ctx->futhark_mc_segred_task_110091_total_time;
        futhark_mc_task_110090_task.task_iter =
            &ctx->futhark_mc_segred_task_110091_total_iter;
        futhark_mc_task_110090_task.sched = STATIC;
        futhark_mc_task_110090_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110091_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110090_task);
        
        if (futhark_mc_segred_task_110091_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_101013.mem)[gtid_106163] = defunc_2_reduce_res_106329;
        ((double *) mem_101016.mem)[gtid_106163] = defunc_2_reduce_res_106330;
    }
    
  cleanup:
    { }
    free(mem_106250);
    free(mem_106251);
    free(mem_106272);
    free(mem_106273);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110072_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110072_end -
                 futhark_mc_segmap_parloop_110072_start;
        
        ctx->futhark_mc_segmap_parloop_110072_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110072_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110072_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110070(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_106162 = tid;
    int num_tasks_106588 = info.nsubtasks;
    struct futhark_mc_task_110062 *futhark_mc_task_110062 =
                                  (struct futhark_mc_task_110062 *) args;
    struct futhark_context *ctx = futhark_mc_task_110062->ctx;
    uint64_t futhark_mc_segmap_nested_task_110070_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110070_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110062->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110062->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110062->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110062->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110062->free_i_92415;
    bool x_92416 = futhark_mc_task_110062->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110062->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110062->free_loop_cond_92426;
    int64_t last_res_97311 = futhark_mc_task_110062->free_last_res_97311;
    int64_t min_arg_97330 = futhark_mc_task_110062->free_min_arg_97330;
    int64_t min_arg_97331 = futhark_mc_task_110062->free_min_arg_97331;
    int64_t min_res_97332 = futhark_mc_task_110062->free_min_res_97332;
    double max_res_97336 = futhark_mc_task_110062->free_max_res_97336;
    struct memblock mem_100929 = {.desc ="mem_100929", .mem =
                                  futhark_mc_task_110062->free_mem_100929,
                                  .size =0, .references =NULL};
    struct memblock mem_100932 = {.desc ="mem_100932", .mem =
                                  futhark_mc_task_110062->free_mem_100932,
                                  .size =0, .references =NULL};
    struct memblock mem_100935 = {.desc ="mem_100935", .mem =
                                  futhark_mc_task_110062->free_mem_100935,
                                  .size =0, .references =NULL};
    int64_t bytes_100937 = futhark_mc_task_110062->free_bytes_100937;
    struct memblock mem_100938 = {.desc ="mem_100938", .mem =
                                  futhark_mc_task_110062->free_mem_100938,
                                  .size =0, .references =NULL};
    struct memblock mem_101013 = {.desc ="mem_101013", .mem =
                                  futhark_mc_task_110062->free_mem_101013,
                                  .size =0, .references =NULL};
    struct memblock mem_101016 = {.desc ="mem_101016", .mem =
                                  futhark_mc_task_110062->free_mem_101016,
                                  .size =0, .references =NULL};
    int64_t iter_106731;
    struct futhark_mc_segmap_parloop_struct_110071
    futhark_mc_segmap_parloop_struct_110071;
    
    futhark_mc_segmap_parloop_struct_110071.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110071.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110071.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110071.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110071.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110071.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110071.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110071.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110071.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110071.free_last_res_97311 =
        last_res_97311;
    futhark_mc_segmap_parloop_struct_110071.free_min_arg_97330 = min_arg_97330;
    futhark_mc_segmap_parloop_struct_110071.free_min_arg_97331 = min_arg_97331;
    futhark_mc_segmap_parloop_struct_110071.free_min_res_97332 = min_res_97332;
    futhark_mc_segmap_parloop_struct_110071.free_max_res_97336 = max_res_97336;
    futhark_mc_segmap_parloop_struct_110071.free_mem_100929 = mem_100929.mem;
    futhark_mc_segmap_parloop_struct_110071.free_mem_100932 = mem_100932.mem;
    futhark_mc_segmap_parloop_struct_110071.free_mem_100935 = mem_100935.mem;
    futhark_mc_segmap_parloop_struct_110071.free_bytes_100937 = bytes_100937;
    futhark_mc_segmap_parloop_struct_110071.free_mem_100938 = mem_100938.mem;
    futhark_mc_segmap_parloop_struct_110071.free_mem_101013 = mem_101013.mem;
    futhark_mc_segmap_parloop_struct_110071.free_mem_101016 = mem_101016.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110072_task;
    
    futhark_mc_segmap_parloop_110072_task.name =
        "futhark_mc_segmap_parloop_110072";
    futhark_mc_segmap_parloop_110072_task.fn = futhark_mc_segmap_parloop_110072;
    futhark_mc_segmap_parloop_110072_task.args =
        &futhark_mc_segmap_parloop_struct_110071;
    futhark_mc_segmap_parloop_110072_task.iterations = iterations;
    futhark_mc_segmap_parloop_110072_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110072_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110072_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110072_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110072_task);
    
    if (futhark_mc_segmap_parloop_110072_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110072_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110072_total_end -
                 futhark_mc_segmap_parloop_110072_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110072_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110072_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110072_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110070_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110070_end -
                 futhark_mc_segmap_nested_task_110070_start;
        
        ctx->futhark_mc_segmap_nested_task_110070_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110070_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110070_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_110035(void *args, int64_t start,
                                            int64_t end, int flat_tid_97298,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110034
    *futhark_mc_segmap_parloop_struct_110034 =
    (struct futhark_mc_segmap_parloop_struct_110034 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110034->ctx;
    uint64_t futhark_mc_segmap_parloop_110035_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110035_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110034->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110034->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110034->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110034->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110034->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110034->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110034->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110034->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110034->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110034->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110034->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100925 =
            futhark_mc_segmap_parloop_struct_110034->free_bytes_100925;
    int64_t bytes_100937 =
            futhark_mc_segmap_parloop_struct_110034->free_bytes_100937;
    int64_t bytes_101012 =
            futhark_mc_segmap_parloop_struct_110034->free_bytes_101012;
    struct memblock mem_101185 = {.desc ="mem_101185", .mem =
                                  futhark_mc_segmap_parloop_struct_110034->free_mem_101185,
                                  .size =0, .references =NULL};
    struct memblock mem_101189 = {.desc ="mem_101189", .mem =
                                  futhark_mc_segmap_parloop_struct_110034->free_mem_101189,
                                  .size =0, .references =NULL};
    size_t mem_100926_cached_sizze_110036 = 0;
    unsigned char *mem_100926 = NULL;
    size_t mem_100929_cached_sizze_110037 = 0;
    unsigned char *mem_100929 = NULL;
    size_t mem_100932_cached_sizze_110038 = 0;
    unsigned char *mem_100932 = NULL;
    size_t mem_100935_cached_sizze_110039 = 0;
    unsigned char *mem_100935 = NULL;
    size_t mem_100938_cached_sizze_110040 = 0;
    unsigned char *mem_100938 = NULL;
    size_t mem_101013_cached_sizze_110041 = 0;
    unsigned char *mem_101013 = NULL;
    size_t mem_101016_cached_sizze_110042 = 0;
    unsigned char *mem_101016 = NULL;
    int64_t iterations = end - start;
    int64_t iter_106136 = start;
    
    if (mem_100926_cached_sizze_110036 < (size_t) bytes_100925) {
        mem_100926 = realloc(mem_100926, bytes_100925);
        mem_100926_cached_sizze_110036 = bytes_100925;
    }
    if (mem_100929_cached_sizze_110037 < (size_t) bytes_100925) {
        mem_100929 = realloc(mem_100929, bytes_100925);
        mem_100929_cached_sizze_110037 = bytes_100925;
    }
    if (mem_100932_cached_sizze_110038 < (size_t) bytes_100925) {
        mem_100932 = realloc(mem_100932, bytes_100925);
        mem_100932_cached_sizze_110038 = bytes_100925;
    }
    if (mem_100935_cached_sizze_110039 < (size_t) bytes_100925) {
        mem_100935 = realloc(mem_100935, bytes_100925);
        mem_100935_cached_sizze_110039 = bytes_100925;
    }
    if (mem_100938_cached_sizze_110040 < (size_t) bytes_100937) {
        mem_100938 = realloc(mem_100938, bytes_100937);
        mem_100938_cached_sizze_110040 = bytes_100937;
    }
    if (mem_101013_cached_sizze_110041 < (size_t) bytes_101012) {
        mem_101013 = realloc(mem_101013, bytes_101012);
        mem_101013_cached_sizze_110041 = bytes_101012;
    }
    if (mem_101016_cached_sizze_110042 < (size_t) bytes_101012) {
        mem_101016 = realloc(mem_101016, bytes_101012);
        mem_101016_cached_sizze_110042 = bytes_101012;
    }
    for (; iter_106136 < end; iter_106136++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_106556 = m_92398;
        int64_t gtid_97299 = iter_106136;
        int64_t remnant_106557 = iter_106136 - gtid_97299;
        int64_t flat_tid_106137 = (int64_t) 0;
        int32_t num_tasks_106558;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_110043 futhark_mc_task_110043;
        
        futhark_mc_task_110043.ctx = ctx;
        futhark_mc_task_110043.free_n_92399 = n_92399;
        futhark_mc_task_110043.free_gtid_97299 = gtid_97299;
        futhark_mc_task_110043.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110043.free_mem_100926 = mem_100926;
        
        struct scheduler_segop futhark_mc_task_110043_task;
        
        futhark_mc_task_110043_task.args = &futhark_mc_task_110043;
        futhark_mc_task_110043_task.top_level_fn =
            futhark_mc_segscan_task_110044;
        futhark_mc_task_110043_task.name = "futhark_mc_segscan_task_110044";
        futhark_mc_task_110043_task.iterations = n_92399;
        futhark_mc_task_110043_task.task_time =
            &ctx->futhark_mc_segscan_task_110044_total_time;
        futhark_mc_task_110043_task.task_iter =
            &ctx->futhark_mc_segscan_task_110044_total_iter;
        futhark_mc_task_110043_task.sched = STATIC;
        futhark_mc_task_110043_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_110044_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110043_task);
        
        if (futhark_mc_segscan_task_110044_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_97311;
        
        last_res_97311 = ((int64_t *) mem_100926)[i_92415];
        for (int64_t i_106572 = 0; i_106572 < n_92399; i_106572++) {
            ((double *) mem_100929)[i_106572] = 0.0;
        }
        for (int64_t i_106573 = 0; i_106573 < n_92399; i_106573++) {
            ((int64_t *) mem_100932)[i_106573] = (int64_t) -1;
        }
        
        int64_t flat_tid_106146 = (int64_t) 0;
        int32_t num_tasks_106574;
        struct futhark_mc_task_110050 futhark_mc_task_110050;
        
        futhark_mc_task_110050.ctx = ctx;
        futhark_mc_task_110050.free_n_92399 = n_92399;
        futhark_mc_task_110050.free_gtid_97299 = gtid_97299;
        futhark_mc_task_110050.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110050.free_mem_100926 = mem_100926;
        futhark_mc_task_110050.free_mem_100929 = mem_100929;
        futhark_mc_task_110050.free_mem_100932 = mem_100932;
        
        struct scheduler_segop futhark_mc_task_110050_task;
        
        futhark_mc_task_110050_task.args = &futhark_mc_task_110050;
        futhark_mc_task_110050_task.top_level_fn =
            futhark_mc_segmap_task_110051;
        futhark_mc_task_110050_task.name = "futhark_mc_segmap_task_110051";
        futhark_mc_task_110050_task.iterations = n_92399;
        futhark_mc_task_110050_task.task_time =
            &ctx->futhark_mc_segmap_task_110051_total_time;
        futhark_mc_task_110050_task.task_iter =
            &ctx->futhark_mc_segmap_task_110051_total_iter;
        futhark_mc_task_110050_task.sched = STATIC;
        futhark_mc_task_110050_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110051_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110050_task);
        
        if (futhark_mc_segmap_task_110051_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_106154 = (int64_t) 0;
        int32_t num_tasks_106580;
        struct futhark_mc_task_110054 futhark_mc_task_110054;
        
        futhark_mc_task_110054.ctx = ctx;
        futhark_mc_task_110054.free_n_92399 = n_92399;
        futhark_mc_task_110054.free_mem_100932 = mem_100932;
        futhark_mc_task_110054.free_mem_100935 = mem_100935;
        
        struct scheduler_segop futhark_mc_task_110054_task;
        
        futhark_mc_task_110054_task.args = &futhark_mc_task_110054;
        futhark_mc_task_110054_task.top_level_fn =
            futhark_mc_segmap_task_110055;
        futhark_mc_task_110054_task.name = "futhark_mc_segmap_task_110055";
        futhark_mc_task_110054_task.iterations = n_92399;
        futhark_mc_task_110054_task.task_time =
            &ctx->futhark_mc_segmap_task_110055_total_time;
        futhark_mc_task_110054_task.task_iter =
            &ctx->futhark_mc_segmap_task_110055_total_iter;
        futhark_mc_task_110054_task.sched = STATIC;
        futhark_mc_task_110054_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110055_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110054_task);
        
        if (futhark_mc_segmap_task_110055_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_97330 = sub64(last_res_97311, (int64_t) 1);
        int64_t min_arg_97331 = sub64(last_res_97311, min_res_92421);
        int64_t min_res_97332 = smin64(q_92401, last_res_97311);
        double i64_res_97333 = sitofp_i64_f64(last_res_97311);
        double x_97334 = i64_res_92427 - i64_res_97333;
        double max_arg_97335 = x_97334 / 2.0;
        double max_res_97336 = fmax64(0.0, max_arg_97335);
        int64_t flat_tid_106158 = (int64_t) 0;
        int32_t num_tasks_106584;
        struct futhark_mc_task_110058 futhark_mc_task_110058;
        
        futhark_mc_task_110058.ctx = ctx;
        futhark_mc_task_110058.free_q_92401 = q_92401;
        futhark_mc_task_110058.free_last_res_97311 = last_res_97311;
        futhark_mc_task_110058.free_mem_100938 = mem_100938;
        
        struct scheduler_segop futhark_mc_task_110058_task;
        
        futhark_mc_task_110058_task.args = &futhark_mc_task_110058;
        futhark_mc_task_110058_task.top_level_fn =
            futhark_mc_segmap_task_110059;
        futhark_mc_task_110058_task.name = "futhark_mc_segmap_task_110059";
        futhark_mc_task_110058_task.iterations = q_92401;
        futhark_mc_task_110058_task.task_time =
            &ctx->futhark_mc_segmap_task_110059_total_time;
        futhark_mc_task_110058_task.task_iter =
            &ctx->futhark_mc_segmap_task_110059_total_iter;
        futhark_mc_task_110058_task.sched = STATIC;
        futhark_mc_task_110058_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110059_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110058_task);
        
        if (futhark_mc_segmap_task_110059_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_106358 = (int64_t) 0;
        int32_t num_tasks_106588;
        int64_t flat_tid_106162 = (int64_t) 0;
        struct futhark_mc_task_110062 futhark_mc_task_110062;
        
        futhark_mc_task_110062.ctx = ctx;
        futhark_mc_task_110062.free_n_92399 = n_92399;
        futhark_mc_task_110062.free_q_92401 = q_92401;
        futhark_mc_task_110062.free_jump_92403 = jump_92403;
        futhark_mc_task_110062.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110062.free_i_92415 = i_92415;
        futhark_mc_task_110062.free_x_92416 = x_92416;
        futhark_mc_task_110062.free_min_res_92421 = min_res_92421;
        futhark_mc_task_110062.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_110062.free_last_res_97311 = last_res_97311;
        futhark_mc_task_110062.free_min_arg_97330 = min_arg_97330;
        futhark_mc_task_110062.free_min_arg_97331 = min_arg_97331;
        futhark_mc_task_110062.free_min_res_97332 = min_res_97332;
        futhark_mc_task_110062.free_max_res_97336 = max_res_97336;
        futhark_mc_task_110062.free_mem_100929 = mem_100929;
        futhark_mc_task_110062.free_mem_100932 = mem_100932;
        futhark_mc_task_110062.free_mem_100935 = mem_100935;
        futhark_mc_task_110062.free_bytes_100937 = bytes_100937;
        futhark_mc_task_110062.free_mem_100938 = mem_100938;
        futhark_mc_task_110062.free_mem_101013 = mem_101013;
        futhark_mc_task_110062.free_mem_101016 = mem_101016;
        
        struct scheduler_segop futhark_mc_task_110062_task;
        
        futhark_mc_task_110062_task.args = &futhark_mc_task_110062;
        futhark_mc_task_110062_task.top_level_fn =
            futhark_mc_segmap_task_110063;
        futhark_mc_task_110062_task.name = "futhark_mc_segmap_task_110063";
        futhark_mc_task_110062_task.iterations = n_m_92409;
        futhark_mc_task_110062_task.task_time =
            &ctx->futhark_mc_segmap_task_110063_total_time;
        futhark_mc_task_110062_task.task_iter =
            &ctx->futhark_mc_segmap_task_110063_total_iter;
        futhark_mc_task_110062_task.sched = DYNAMIC;
        futhark_mc_task_110062_task.nested_fn =
            futhark_mc_segmap_nested_task_110070;
        
        int futhark_mc_segmap_task_110063_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110062_task);
        
        if (futhark_mc_segmap_task_110063_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101185.mem + gtid_97299 * n_m_92409 * (int64_t) 8,
                    mem_101013 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101189.mem + gtid_97299 * n_m_92409 * (int64_t) 8,
                    mem_101016 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_100926);
    free(mem_100929);
    free(mem_100932);
    free(mem_100935);
    free(mem_100938);
    free(mem_101013);
    free(mem_101016);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110035_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110035_end -
                 futhark_mc_segmap_parloop_110035_start;
        
        ctx->futhark_mc_segmap_parloop_110035_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110035_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110035_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110033(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_97298 = tid;
    int num_tasks_105876 = info.nsubtasks;
    struct futhark_mc_task_110018 *futhark_mc_task_110018 =
                                  (struct futhark_mc_task_110018 *) args;
    struct futhark_context *ctx = futhark_mc_task_110018->ctx;
    uint64_t futhark_mc_segmap_nested_task_110033_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110033_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110018->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110018->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110018->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110018->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110018->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110018->free_i_92415;
    bool x_92416 = futhark_mc_task_110018->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110018->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110018->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110018->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110018->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_100925 = futhark_mc_task_110018->free_bytes_100925;
    int64_t bytes_100937 = futhark_mc_task_110018->free_bytes_100937;
    int64_t bytes_101012 = futhark_mc_task_110018->free_bytes_101012;
    struct memblock mem_101185 = {.desc ="mem_101185", .mem =
                                  futhark_mc_task_110018->free_mem_101185,
                                  .size =0, .references =NULL};
    struct memblock mem_101189 = {.desc ="mem_101189", .mem =
                                  futhark_mc_task_110018->free_mem_101189,
                                  .size =0, .references =NULL};
    int64_t iter_106136;
    struct futhark_mc_segmap_parloop_struct_110034
    futhark_mc_segmap_parloop_struct_110034;
    
    futhark_mc_segmap_parloop_struct_110034.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110034.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110034.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110034.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110034.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110034.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110034.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110034.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110034.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110034.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110034.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110034.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110034.free_bytes_100925 = bytes_100925;
    futhark_mc_segmap_parloop_struct_110034.free_bytes_100937 = bytes_100937;
    futhark_mc_segmap_parloop_struct_110034.free_bytes_101012 = bytes_101012;
    futhark_mc_segmap_parloop_struct_110034.free_mem_101185 = mem_101185.mem;
    futhark_mc_segmap_parloop_struct_110034.free_mem_101189 = mem_101189.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110035_task;
    
    futhark_mc_segmap_parloop_110035_task.name =
        "futhark_mc_segmap_parloop_110035";
    futhark_mc_segmap_parloop_110035_task.fn = futhark_mc_segmap_parloop_110035;
    futhark_mc_segmap_parloop_110035_task.args =
        &futhark_mc_segmap_parloop_struct_110034;
    futhark_mc_segmap_parloop_110035_task.iterations = iterations;
    futhark_mc_segmap_parloop_110035_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110035_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110035_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110035_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110035_task);
    
    if (futhark_mc_segmap_parloop_110035_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110035_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110035_total_end -
                 futhark_mc_segmap_parloop_110035_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110035_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110035_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110035_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110033_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110033_end -
                 futhark_mc_segmap_nested_task_110033_start;
        
        ctx->futhark_mc_segmap_nested_task_110033_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110033_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110033_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110096 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101199;
    int64_t free_bytes_101211;
    int64_t free_bytes_101214;
    unsigned char *free_mem_101309;
};
struct futhark_mc_segmap_parloop_struct_110098 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101199;
    int64_t free_bytes_101211;
    int64_t free_bytes_101214;
    unsigned char *free_mem_101309;
};
static int futhark_mc_segmap_parloop_110099(void *args, int64_t start,
                                            int64_t end, int flat_tid_97729,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110098
    *futhark_mc_segmap_parloop_struct_110098 =
    (struct futhark_mc_segmap_parloop_struct_110098 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110098->ctx;
    uint64_t futhark_mc_segmap_parloop_110099_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110099_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110098->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110098->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110098->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110098->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110098->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110098->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110098->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110098->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110098->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110098->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110098->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101199 =
            futhark_mc_segmap_parloop_struct_110098->free_bytes_101199;
    int64_t bytes_101211 =
            futhark_mc_segmap_parloop_struct_110098->free_bytes_101211;
    int64_t bytes_101214 =
            futhark_mc_segmap_parloop_struct_110098->free_bytes_101214;
    struct memblock mem_101309 = {.desc ="mem_101309", .mem =
                                  futhark_mc_segmap_parloop_struct_110098->free_mem_101309,
                                  .size =0, .references =NULL};
    size_t mem_101218_cached_sizze_110100 = 0;
    unsigned char *mem_101218 = NULL;
    size_t mem_101233_cached_sizze_110101 = 0;
    unsigned char *mem_101233 = NULL;
    size_t mem_101236_cached_sizze_110102 = 0;
    unsigned char *mem_101236 = NULL;
    size_t mem_101263_cached_sizze_110103 = 0;
    unsigned char *mem_101263 = NULL;
    size_t mem_101278_cached_sizze_110104 = 0;
    unsigned char *mem_101278 = NULL;
    size_t mem_101293_cached_sizze_110105 = 0;
    unsigned char *mem_101293 = NULL;
    int64_t iterations = end - start;
    int64_t iter_106922 = start;
    
    if (mem_101218_cached_sizze_110100 < (size_t) bytes_101199) {
        mem_101218 = realloc(mem_101218, bytes_101199);
        mem_101218_cached_sizze_110100 = bytes_101199;
    }
    if (mem_101233_cached_sizze_110101 < (size_t) bytes_101199) {
        mem_101233 = realloc(mem_101233, bytes_101199);
        mem_101233_cached_sizze_110101 = bytes_101199;
    }
    if (mem_101236_cached_sizze_110102 < (size_t) bytes_101199) {
        mem_101236 = realloc(mem_101236, bytes_101199);
        mem_101236_cached_sizze_110102 = bytes_101199;
    }
    if (mem_101263_cached_sizze_110103 < (size_t) bytes_101199) {
        mem_101263 = realloc(mem_101263, bytes_101199);
        mem_101263_cached_sizze_110103 = bytes_101199;
    }
    if (mem_101278_cached_sizze_110104 < (size_t) bytes_101211) {
        mem_101278 = realloc(mem_101278, bytes_101211);
        mem_101278_cached_sizze_110104 = bytes_101211;
    }
    if (mem_101293_cached_sizze_110105 < (size_t) bytes_101214) {
        mem_101293 = realloc(mem_101293, bytes_101214);
        mem_101293_cached_sizze_110105 = bytes_101214;
    }
    for (; iter_106922 < end; iter_106922++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107089 = m_92398;
        int64_t gtid_97730 = iter_106922;
        int64_t remnant_107090 = iter_106922 - gtid_97730;
        int64_t discard_99921;
        int64_t scanacc_106924 = (int64_t) 0;
        
        for (int64_t i_106923 = 0; i_106923 < n_92399; i_106923++) {
            double x_106926;
            
            x_106926 = ((double *) Y_mem_100186.mem)[gtid_97730 * n_92399 +
                                                     i_106923];
            
            bool isnan_res_106927;
            
            isnan_res_106927 = futrts_isnan64(x_106926);
            
            bool defunc_0_p_res_106928 = !isnan_res_106927;
            int64_t defunc_0_f_res_106929 =
                    btoi_bool_i64(defunc_0_p_res_106928);
            int64_t defunc_1_op_res_106930 = add64(defunc_0_f_res_106929,
                                                   scanacc_106924);
            
            ((int64_t *) mem_101218)[i_106923] = defunc_1_op_res_106930;
            
            int64_t scanacc_tmp_107091 = defunc_1_op_res_106930;
            
            scanacc_106924 = scanacc_tmp_107091;
        }
        discard_99921 = scanacc_106924;
        
        int64_t last_res_93711;
        
        last_res_93711 = ((int64_t *) mem_101218)[i_92415];
        for (int64_t i_107093 = 0; i_107093 < n_92399; i_107093++) {
            ((double *) mem_101233)[i_107093] = 0.0;
        }
        for (int64_t i_107094 = 0; i_107094 < n_92399; i_107094++) {
            ((int64_t *) mem_101236)[i_107094] = (int64_t) -1;
        }
        for (int64_t write_iter_106932 = 0; write_iter_106932 < n_92399;
             write_iter_106932++) {
            double write_iv_106935;
            
            write_iv_106935 = ((double *) Y_mem_100186.mem)[gtid_97730 *
                                                            n_92399 +
                                                            write_iter_106932];
            
            bool isnan_res_106936;
            
            isnan_res_106936 = futrts_isnan64(write_iv_106935);
            
            bool defunc_0_p_res_106937 = !isnan_res_106936;
            int64_t defunc_1_f_res_106938;
            
            if (defunc_0_p_res_106937) {
                int64_t write_iv_106939;
                
                write_iv_106939 = ((int64_t *) mem_101218)[write_iter_106932];
                
                int64_t defunc_1_f_res_t_res_106940 = sub64(write_iv_106939,
                                                            (int64_t) 1);
                
                defunc_1_f_res_106938 = defunc_1_f_res_t_res_106940;
            } else {
                defunc_1_f_res_106938 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_106938) &&
                slt64(defunc_1_f_res_106938, n_92399)) {
                ((int64_t *) mem_101236)[defunc_1_f_res_106938] =
                    write_iter_106932;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_106938) &&
                slt64(defunc_1_f_res_106938, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_101233 + defunc_1_f_res_106938 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_97730 * n_92399 +
                                                write_iter_106932) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_106944 = 0; i_106944 < n_92399; i_106944++) {
            int64_t x_106946;
            
            x_106946 = ((int64_t *) mem_101236)[i_106944];
            
            int64_t defunc_0_f_res_106947 = add64((int64_t) 1, x_106946);
            
            ((int64_t *) mem_101263)[i_106944] = defunc_0_f_res_106947;
        }
        
        int64_t min_arg_93726 = sub64(last_res_93711, (int64_t) 1);
        int64_t min_arg_93727 = sub64(last_res_93711, min_res_92421);
        int64_t min_res_93728 = smin64(q_92401, last_res_93711);
        double i64_res_93729 = sitofp_i64_f64(last_res_93711);
        double x_93730 = i64_res_92427 - i64_res_93729;
        double max_arg_93731 = x_93730 / 2.0;
        double max_res_93732 = fmax64(0.0, max_arg_93731);
        
        for (int64_t i_106949 = 0; i_106949 < q_92401; i_106949++) {
            bool cond_106951 = sle64(last_res_93711, i_106949);
            double defunc_0_f_res_106952;
            
            if (cond_106951) {
                defunc_0_f_res_106952 = 0.0;
            } else {
                defunc_0_f_res_106952 = 1.0;
            }
            ((double *) mem_101278)[i_106949] = defunc_0_f_res_106952;
        }
        for (int64_t i_106954 = 0; i_106954 < n_m_92409; i_106954++) {
            int64_t min_arg_106956 = mul64(jump_92403, i_106954);
            int64_t min_res_106957 = smin64(i_92415, min_arg_106956);
            int64_t defunc_0_g_res_106958 = add64((int64_t) 1, min_res_106957);
            bool init_idx_106959;
            int64_t init_idx_106960;
            int64_t init_idx_106961;
            bool loop_while_106962;
            int64_t low_106963;
            int64_t high_106964;
            
            loop_while_106962 = x_92416;
            low_106963 = (int64_t) 0;
            high_106964 = i_92415;
            while (loop_while_106962) {
                int64_t x_106965 = add64(low_106963, high_106964);
                int64_t mid_106966 = sdiv64(x_106965, (int64_t) 2);
                bool x_106967 = sle64((int64_t) 0, mid_106966);
                bool y_106968 = slt64(mid_106966, n_92399);
                bool bounds_check_106969 = x_106967 && y_106968;
                bool index_certs_106970;
                
                if (!bounds_check_106969) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_106966,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_106971;
                
                mid_id_106971 = ((int64_t *) mem_101263)[mid_106966];
                
                bool cond_106972 = slt64(mid_id_106971, (int64_t) 0);
                int64_t mid_idx_106973;
                
                if (cond_106972) {
                    mid_idx_106973 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_106973 = mid_id_106971;
                }
                
                bool cond_106974 = sle64(defunc_0_g_res_106958, mid_idx_106973);
                int64_t loopres_106975;
                int64_t loopres_106976;
                
                if (cond_106974) {
                    int64_t loopres_t_res_106977 = sub64(mid_106966,
                                                         (int64_t) 1);
                    
                    loopres_106975 = low_106963;
                    loopres_106976 = loopres_t_res_106977;
                } else {
                    int64_t loopres_f_res_106978 = add64((int64_t) 1,
                                                         mid_106966);
                    
                    loopres_106975 = loopres_f_res_106978;
                    loopres_106976 = high_106964;
                }
                
                bool loop_cond_106979 = sle64(loopres_106975, loopres_106976);
                bool loop_while_tmp_107100 = loop_cond_106979;
                int64_t low_tmp_107101 = loopres_106975;
                int64_t high_tmp_107102 = loopres_106976;
                
                loop_while_106962 = loop_while_tmp_107100;
                low_106963 = low_tmp_107101;
                high_106964 = high_tmp_107102;
            }
            init_idx_106959 = loop_while_106962;
            init_idx_106960 = low_106963;
            init_idx_106961 = high_106964;
            
            bool idx_106980;
            int64_t idx_106981;
            int64_t idx_106982;
            int64_t idx_106983;
            bool loop_while_106984;
            int64_t l_idx_106985;
            int64_t r_idx_106986;
            int64_t span_106987;
            
            loop_while_106984 = loop_cond_92426;
            l_idx_106985 = init_idx_106960;
            r_idx_106986 = init_idx_106960;
            span_106987 = (int64_t) 1;
            while (loop_while_106984) {
                int64_t max_arg_106988 = sub64(l_idx_106985, (int64_t) 1);
                int64_t max_res_106989 = smax64((int64_t) 0, max_arg_106988);
                int64_t min_arg_106990 = add64((int64_t) 1, r_idx_106986);
                int64_t min_res_106991 = smin64(min_arg_93726, min_arg_106990);
                bool x_106992 = sle64((int64_t) 0, max_res_106989);
                bool y_106993 = slt64(max_res_106989, n_92399);
                bool bounds_check_106994 = x_106992 && y_106993;
                bool index_certs_106995;
                
                if (!bounds_check_106994) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_106989,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_106996;
                
                x_106996 = ((int64_t *) mem_101263)[max_res_106989];
                
                int64_t abs_arg_106997 = sub64(x_106996, defunc_0_g_res_106958);
                int64_t abs_res_106998 = abs64(abs_arg_106997);
                bool x_106999 = sle64((int64_t) 0, min_res_106991);
                bool y_107000 = slt64(min_res_106991, n_92399);
                bool bounds_check_107001 = x_106999 && y_107000;
                bool index_certs_107002;
                
                if (!bounds_check_107001) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_106991,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_107003;
                
                x_107003 = ((int64_t *) mem_101263)[min_res_106991];
                
                int64_t abs_arg_107004 = sub64(x_107003, defunc_0_g_res_106958);
                int64_t abs_res_107005 = abs64(abs_arg_107004);
                bool cond_107006 = max_res_106989 == l_idx_106985;
                int64_t loopres_107007;
                int64_t loopres_107008;
                int64_t loopres_107009;
                
                if (cond_107006) {
                    loopres_107007 = l_idx_106985;
                    loopres_107008 = r_idx_106986;
                    loopres_107009 = min_res_92421;
                } else {
                    bool cond_107010 = slt64(abs_res_106998, abs_res_107005);
                    bool cond_f_res_107011 = min_res_106991 == r_idx_106986;
                    bool x_107012 = !cond_107010;
                    bool y_107013 = cond_f_res_107011 && x_107012;
                    bool cond_107014 = cond_107010 || y_107013;
                    int64_t loopres_f_res_107015;
                    
                    if (cond_107014) {
                        loopres_f_res_107015 = max_res_106989;
                    } else {
                        loopres_f_res_107015 = l_idx_106985;
                    }
                    
                    int64_t loopres_f_res_107016;
                    
                    if (cond_107014) {
                        loopres_f_res_107016 = r_idx_106986;
                    } else {
                        loopres_f_res_107016 = min_res_106991;
                    }
                    
                    int64_t loopres_f_res_107017;
                    
                    if (cond_107014) {
                        int64_t loopres_f_res_t_res_107018 = add64((int64_t) 1,
                                                                   span_106987);
                        
                        loopres_f_res_107017 = loopres_f_res_t_res_107018;
                    } else {
                        int64_t loopres_f_res_f_res_107019 = add64((int64_t) 1,
                                                                   span_106987);
                        
                        loopres_f_res_107017 = loopres_f_res_f_res_107019;
                    }
                    loopres_107007 = loopres_f_res_107015;
                    loopres_107008 = loopres_f_res_107016;
                    loopres_107009 = loopres_f_res_107017;
                }
                
                bool loop_cond_107020 = slt64(loopres_107009, min_res_92421);
                bool loop_while_tmp_107103 = loop_cond_107020;
                int64_t l_idx_tmp_107104 = loopres_107007;
                int64_t r_idx_tmp_107105 = loopres_107008;
                int64_t span_tmp_107106 = loopres_107009;
                
                loop_while_106984 = loop_while_tmp_107103;
                l_idx_106985 = l_idx_tmp_107104;
                r_idx_106986 = r_idx_tmp_107105;
                span_106987 = span_tmp_107106;
            }
            idx_106980 = loop_while_106984;
            idx_106981 = l_idx_106985;
            idx_106982 = r_idx_106986;
            idx_106983 = span_106987;
            
            int64_t min_res_107021 = smin64(min_arg_93727, idx_106981);
            int64_t max_res_107022 = smax64((int64_t) 0, min_res_107021);
            int64_t x_107023 = add64(min_res_93728, max_res_107022);
            int64_t r_107024 = sub64(x_107023, (int64_t) 1);
            bool x_107025 = sle64((int64_t) 0, r_107024);
            bool y_107026 = slt64(r_107024, n_92399);
            bool bounds_check_107027 = x_107025 && y_107026;
            bool index_certs_107028;
            
            if (!bounds_check_107027) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_107024,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107029;
            
            x_107029 = ((int64_t *) mem_101236)[r_107024];
            
            int64_t abs_arg_107030 = sub64(x_107029, min_res_106957);
            int64_t abs_res_107031 = abs64(abs_arg_107030);
            bool x_107032 = sle64((int64_t) 0, max_res_107022);
            bool y_107033 = slt64(max_res_107022, n_92399);
            bool bounds_check_107034 = x_107032 && y_107033;
            bool index_certs_107035;
            
            if (!bounds_check_107034) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_107022,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107036;
            
            x_107036 = ((int64_t *) mem_101236)[max_res_107022];
            
            int64_t abs_arg_107037 = sub64(x_107036, min_res_106957);
            int64_t abs_res_107038 = abs64(abs_arg_107037);
            int64_t max_res_107039 = smax64(abs_res_107031, abs_res_107038);
            double defunc_0_f_res_107040 = sitofp_i64_f64(max_res_107039);
            double defunc_1_f_res_107041 = max_res_93732 +
                   defunc_0_f_res_107040;
            double defunc_2_reduce_res_107042;
            double redout_107044 = 0.0;
            
            for (int64_t i_107043 = 0; i_107043 < q_92401; i_107043++) {
                double x_107045;
                
                x_107045 = ((double *) mem_101278)[i_107043];
                
                bool cond_107046 = sle64(last_res_93711, i_107043);
                int64_t defunc_0_f_res_107047;
                
                if (cond_107046) {
                    defunc_0_f_res_107047 = (int64_t) 0;
                } else {
                    int64_t i_107048 = add64(max_res_107022, i_107043);
                    int64_t defunc_0_add_arg_107049;
                    
                    defunc_0_add_arg_107049 =
                        ((int64_t *) mem_101236)[i_107048];
                    
                    int64_t defunc_1_add_res_107050 = add64((int64_t) 1,
                                                            defunc_0_add_arg_107049);
                    
                    defunc_0_f_res_107047 = defunc_1_add_res_107050;
                }
                
                int64_t binop_p_107051 = sub64(defunc_0_f_res_107047,
                                               min_res_106957);
                double defunc_0_f_res_107052 = sitofp_i64_f64(binop_p_107051);
                double abs_res_107053 = fabs(defunc_0_f_res_107052);
                double tmp1_107054 = abs_res_107053 / defunc_1_f_res_107041;
                double x_107055 = tmp1_107054 * tmp1_107054;
                double y_107056 = tmp1_107054 * x_107055;
                double tmp2_107057 = 1.0 - y_107056;
                double x_107058 = tmp2_107057 * tmp2_107057;
                double tmp3_107059 = tmp2_107057 * x_107058;
                double w_j_107060 = x_107045 * tmp3_107059;
                double defunc_1_op_res_107061 = w_j_107060 + redout_107044;
                double redout_tmp_107107 = defunc_1_op_res_107061;
                
                redout_107044 = redout_tmp_107107;
            }
            defunc_2_reduce_res_107042 = redout_107044;
            
            double a0_107062 = 1.0 / defunc_2_reduce_res_107042;
            double defunc_2_reduce_res_107063;
            double redout_107065 = 0.0;
            
            for (int64_t i_107064 = 0; i_107064 < q_92401; i_107064++) {
                double x_107066;
                
                x_107066 = ((double *) mem_101278)[i_107064];
                
                bool cond_107067 = sle64(last_res_93711, i_107064);
                int64_t defunc_0_f_res_107068;
                
                if (cond_107067) {
                    defunc_0_f_res_107068 = (int64_t) 0;
                } else {
                    int64_t i_107069 = add64(max_res_107022, i_107064);
                    int64_t defunc_0_add_arg_107070;
                    
                    defunc_0_add_arg_107070 =
                        ((int64_t *) mem_101236)[i_107069];
                    
                    int64_t defunc_1_add_res_107071 = add64((int64_t) 1,
                                                            defunc_0_add_arg_107070);
                    
                    defunc_0_f_res_107068 = defunc_1_add_res_107071;
                }
                
                int64_t binop_p_107072 = sub64(defunc_0_f_res_107068,
                                               min_res_106957);
                double defunc_0_f_res_107073 = sitofp_i64_f64(binop_p_107072);
                double abs_res_107074 = fabs(defunc_0_f_res_107073);
                double tmp1_107075 = abs_res_107074 / defunc_1_f_res_107041;
                double x_107076 = tmp1_107075 * tmp1_107075;
                double y_107077 = tmp1_107075 * x_107076;
                double tmp2_107078 = 1.0 - y_107077;
                double x_107079 = tmp2_107078 * tmp2_107078;
                double tmp3_107080 = tmp2_107078 * x_107079;
                double tmp4_107081 = x_107066 * tmp3_107080;
                double defunc_0_f_res_107082;
                
                if (cond_107067) {
                    defunc_0_f_res_107082 = 0.0;
                } else {
                    int64_t i_107083 = add64(max_res_107022, i_107064);
                    double defunc_0_add_arg_107084;
                    
                    defunc_0_add_arg_107084 = ((double *) mem_101233)[i_107083];
                    defunc_0_f_res_107082 = defunc_0_add_arg_107084;
                }
                
                double x_107085 = a0_107062 * tmp4_107081;
                double defunc_9_fit_fun_res_107086 = defunc_0_f_res_107082 *
                       x_107085;
                double defunc_1_op_res_107087 = defunc_9_fit_fun_res_107086 +
                       redout_107065;
                double redout_tmp_107108 = defunc_1_op_res_107087;
                
                redout_107065 = redout_tmp_107108;
            }
            defunc_2_reduce_res_107063 = redout_107065;
            ((double *) mem_101293)[i_106954] = defunc_2_reduce_res_107063;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101309.mem + gtid_97730 * n_m_92409 * (int64_t) 8,
                    mem_101293 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101218);
    free(mem_101233);
    free(mem_101236);
    free(mem_101263);
    free(mem_101278);
    free(mem_101293);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110099_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110099_end -
                 futhark_mc_segmap_parloop_110099_start;
        
        ctx->futhark_mc_segmap_parloop_110099_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110099_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110099_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110097(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_97729 = tid;
    int num_tasks_106921 = info.nsubtasks;
    struct futhark_mc_task_110096 *futhark_mc_task_110096 =
                                  (struct futhark_mc_task_110096 *) args;
    struct futhark_context *ctx = futhark_mc_task_110096->ctx;
    uint64_t futhark_mc_segmap_task_110097_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110097_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110096->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110096->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110096->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110096->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110096->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110096->free_i_92415;
    bool x_92416 = futhark_mc_task_110096->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110096->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110096->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110096->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110096->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101199 = futhark_mc_task_110096->free_bytes_101199;
    int64_t bytes_101211 = futhark_mc_task_110096->free_bytes_101211;
    int64_t bytes_101214 = futhark_mc_task_110096->free_bytes_101214;
    struct memblock mem_101309 = {.desc ="mem_101309", .mem =
                                  futhark_mc_task_110096->free_mem_101309,
                                  .size =0, .references =NULL};
    int64_t iter_106922;
    struct futhark_mc_segmap_parloop_struct_110098
    futhark_mc_segmap_parloop_struct_110098;
    
    futhark_mc_segmap_parloop_struct_110098.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110098.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110098.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110098.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110098.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110098.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110098.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110098.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110098.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110098.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110098.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110098.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110098.free_bytes_101199 = bytes_101199;
    futhark_mc_segmap_parloop_struct_110098.free_bytes_101211 = bytes_101211;
    futhark_mc_segmap_parloop_struct_110098.free_bytes_101214 = bytes_101214;
    futhark_mc_segmap_parloop_struct_110098.free_mem_101309 = mem_101309.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110099_task;
    
    futhark_mc_segmap_parloop_110099_task.name =
        "futhark_mc_segmap_parloop_110099";
    futhark_mc_segmap_parloop_110099_task.fn = futhark_mc_segmap_parloop_110099;
    futhark_mc_segmap_parloop_110099_task.args =
        &futhark_mc_segmap_parloop_struct_110098;
    futhark_mc_segmap_parloop_110099_task.iterations = iterations;
    futhark_mc_segmap_parloop_110099_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110099_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110099_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110099_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110099_task);
    
    if (futhark_mc_segmap_parloop_110099_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110099_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110099_total_end -
                 futhark_mc_segmap_parloop_110099_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110099_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110099_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110099_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110097_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110097_end -
                 futhark_mc_segmap_task_110097_start;
        
        ctx->futhark_mc_segmap_task_110097_runs[tid]++;
        ctx->futhark_mc_segmap_task_110097_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110097_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110107 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101199;
    int64_t free_bytes_101211;
    int64_t free_bytes_101214;
    unsigned char *free_mem_101309;
};
struct futhark_mc_task_110115 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97891;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101200;
};
struct futhark_mc_scan_stage_1_parloop_struct_110118 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97891;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101200;
};
static int futhark_mc_scan_stage_1_parloop_110119(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_107110, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_110118
    *futhark_mc_scan_stage_1_parloop_struct_110118 =
    (struct futhark_mc_scan_stage_1_parloop_struct_110118 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_110118->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_110119_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110119_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_110118->free_n_92399;
    int64_t gtid_97891 =
            futhark_mc_scan_stage_1_parloop_struct_110118->free_gtid_97891;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_110118->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101200 = {.desc ="mem_101200", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_110118->free_mem_101200,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107410 = start;
    int64_t x_107112;
    int64_t x_107113;
    
    x_107112 = (int64_t) 0;
    for (; iter_107410 < end; iter_107410++) {
        int64_t gtid_107111 = iter_107410;
        
        // stage 1 scan body
        {
            double x_107115;
            
            x_107115 = ((double *) Y_mem_100186.mem)[gtid_97891 * n_92399 +
                                                     gtid_107111];
            
            bool isnan_res_107116;
            
            isnan_res_107116 = futrts_isnan64(x_107115);
            
            bool defunc_0_p_res_107117 = !isnan_res_107116;
            int64_t defunc_0_f_res_107118 =
                    btoi_bool_i64(defunc_0_p_res_107117);
            
            // write mapped values results to memory
            { }
            x_107112 = x_107112;
            // Read next values
            {
                x_107113 = defunc_0_f_res_107118;
            }
            
            int64_t defunc_1_op_res_107114 = add64(x_107112, x_107113);
            
            ((int64_t *) mem_101200.mem)[gtid_107111] = defunc_1_op_res_107114;
            x_107112 = defunc_1_op_res_107114;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110119_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110119_end -
                 futhark_mc_scan_stage_1_parloop_110119_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_110119_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_110119_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_110119_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_110120 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97891;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101200;
};
static int futhark_mc_scan_stage_3_parloop_110121(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_107110, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_110120
    *futhark_mc_scan_stage_3_parloop_struct_110120 =
    (struct futhark_mc_scan_stage_3_parloop_struct_110120 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_110120->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_110121_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_110121_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_110120->free_n_92399;
    int64_t gtid_97891 =
            futhark_mc_scan_stage_3_parloop_struct_110120->free_gtid_97891;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_110120->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101200 = {.desc ="mem_101200", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_110120->free_mem_101200,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107422 = start;
    int64_t x_107419;
    int64_t x_107420;
    
    if (iter_107422 == (int64_t) 0) {
        x_107419 = (int64_t) 0;
    } else {
        x_107419 = ((int64_t *) mem_101200.mem)[iter_107422 - (int64_t) 1];
    }
    for (; iter_107422 < end; iter_107422++) {
        int64_t gtid_107111 = iter_107422;
        
        // stage 3 scan body
        {
            double x_107115;
            
            x_107115 = ((double *) Y_mem_100186.mem)[gtid_97891 * n_92399 +
                                                     gtid_107111];
            
            bool isnan_res_107116;
            
            isnan_res_107116 = futrts_isnan64(x_107115);
            
            bool defunc_0_p_res_107117 = !isnan_res_107116;
            int64_t defunc_0_f_res_107118 =
                    btoi_bool_i64(defunc_0_p_res_107117);
            
            x_107419 = x_107419;
            x_107420 = defunc_0_f_res_107118;
            
            int64_t defunc_1_op_res_107421 = add64(x_107419, x_107420);
            
            ((int64_t *) mem_101200.mem)[gtid_107111] = defunc_1_op_res_107421;
            x_107419 = defunc_1_op_res_107421;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_110121_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_110121_end -
                 futhark_mc_scan_stage_3_parloop_110121_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_110121_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_110121_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_110121_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_110116(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107110 = tid;
    int num_tasks_107409 = info.nsubtasks;
    struct futhark_mc_task_110115 *futhark_mc_task_110115 =
                                  (struct futhark_mc_task_110115 *) args;
    struct futhark_context *ctx = futhark_mc_task_110115->ctx;
    uint64_t futhark_mc_segscan_task_110116_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_110116_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110115->free_n_92399;
    int64_t gtid_97891 = futhark_mc_task_110115->free_gtid_97891;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110115->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101200 = {.desc ="mem_101200", .mem =
                                  futhark_mc_task_110115->free_mem_101200,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_107416_cached_sizze_110117 = 0;
    unsigned char *scan_stage_2_accum_mem_107416 = NULL;
    int64_t iter_107410;
    struct futhark_mc_scan_stage_1_parloop_struct_110118
    futhark_mc_scan_stage_1_parloop_struct_110118;
    
    futhark_mc_scan_stage_1_parloop_struct_110118.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_110118.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_110118.free_gtid_97891 = gtid_97891;
    futhark_mc_scan_stage_1_parloop_struct_110118.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_110118.free_mem_101200 =
        mem_101200.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_110119_task;
    
    futhark_mc_scan_stage_1_parloop_110119_task.name =
        "futhark_mc_scan_stage_1_parloop_110119";
    futhark_mc_scan_stage_1_parloop_110119_task.fn =
        futhark_mc_scan_stage_1_parloop_110119;
    futhark_mc_scan_stage_1_parloop_110119_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_110118;
    futhark_mc_scan_stage_1_parloop_110119_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_110119_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_110119_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110119_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_110119_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_110119_task);
    
    if (futhark_mc_scan_stage_1_parloop_110119_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110119_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110119_total_end -
                 futhark_mc_scan_stage_1_parloop_110119_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110119_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110119_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110119_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_107409)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_107411;
        int64_t x_107412;
        int64_t offset_107414 = (int64_t) 0;
        int64_t offset_index_107415 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_107416_cached_sizze_110117 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_107416 =
                realloc(scan_stage_2_accum_mem_107416, (int64_t) 8);
            scan_stage_2_accum_mem_107416_cached_sizze_110117 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_107416)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_107418 = 0; i_107418 < num_tasks_107409 - 1;
             i_107418++) {
            offset_107414 = squot64(n_92399, sext_i32_i64(num_tasks_107409));
            if (slt64(sext_i32_i64(i_107418), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_107409)))) {
                offset_107414 += (int64_t) 1;
            }
            offset_index_107415 += offset_107414;
            
            int64_t gtid_107111 = offset_index_107415;
            double x_107115;
            
            x_107115 = ((double *) Y_mem_100186.mem)[gtid_97891 * n_92399 +
                                                     gtid_107111];
            
            bool isnan_res_107116;
            
            isnan_res_107116 = futrts_isnan64(x_107115);
            
            bool defunc_0_p_res_107117 = !isnan_res_107116;
            int64_t defunc_0_f_res_107118 =
                    btoi_bool_i64(defunc_0_p_res_107117);
            
            // Read carry in
            {
                x_107411 =
                    ((int64_t *) scan_stage_2_accum_mem_107416)[(int64_t) 0];
            }
            // Read next values
            {
                x_107412 = ((int64_t *) mem_101200.mem)[offset_index_107415 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_107413 = add64(x_107411, x_107412);
            
            ((int64_t *) mem_101200.mem)[offset_index_107415 - (int64_t) 1] =
                defunc_1_op_res_107413;
            ((int64_t *) scan_stage_2_accum_mem_107416)[(int64_t) 0] =
                defunc_1_op_res_107413;
        }
        
        int64_t iter_107422 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_110120
        futhark_mc_scan_stage_3_parloop_struct_110120;
        
        futhark_mc_scan_stage_3_parloop_struct_110120.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_110120.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_110120.free_gtid_97891 =
            gtid_97891;
        futhark_mc_scan_stage_3_parloop_struct_110120.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_110120.free_mem_101200 =
            mem_101200.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_110121_task;
        
        futhark_mc_scan_stage_3_parloop_110121_task.name =
            "futhark_mc_scan_stage_3_parloop_110121";
        futhark_mc_scan_stage_3_parloop_110121_task.fn =
            futhark_mc_scan_stage_3_parloop_110121;
        futhark_mc_scan_stage_3_parloop_110121_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_110120;
        futhark_mc_scan_stage_3_parloop_110121_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_110121_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_110121_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_110121_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_110121_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_110121_task);
        
        if (futhark_mc_scan_stage_3_parloop_110121_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_110121_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_110121_total_end -
                     futhark_mc_scan_stage_3_parloop_110121_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110121_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110121_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110121_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_107416);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_110116_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_110116_end -
                 futhark_mc_segscan_task_110116_start;
        
        ctx->futhark_mc_segscan_task_110116_runs[tid]++;
        ctx->futhark_mc_segscan_task_110116_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_110116_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110122 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97891;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101200;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
};
struct futhark_mc_segmap_parloop_struct_110124 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_97891;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101200;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
};
static int futhark_mc_segmap_parloop_110125(void *args, int64_t start,
                                            int64_t end, int flat_tid_107119,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110124
    *futhark_mc_segmap_parloop_struct_110124 =
    (struct futhark_mc_segmap_parloop_struct_110124 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110124->ctx;
    uint64_t futhark_mc_segmap_parloop_110125_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110125_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110124->free_n_92399;
    int64_t gtid_97891 =
            futhark_mc_segmap_parloop_struct_110124->free_gtid_97891;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110124->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101200 = {.desc ="mem_101200", .mem =
                                  futhark_mc_segmap_parloop_struct_110124->free_mem_101200,
                                  .size =0, .references =NULL};
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_segmap_parloop_struct_110124->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segmap_parloop_struct_110124->free_mem_101206,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107426 = start;
    
    for (; iter_107426 < end; iter_107426++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107429 = n_92399;
        int64_t gtid_107120 = iter_107426;
        int64_t remnant_107430 = iter_107426 - gtid_107120;
        double x_107121;
        
        x_107121 = ((double *) Y_mem_100186.mem)[gtid_97891 * n_92399 +
                                                 gtid_107120];
        
        bool isnan_res_107122;
        
        isnan_res_107122 = futrts_isnan64(x_107121);
        
        bool defunc_0_p_res_107123 = !isnan_res_107122;
        int64_t defunc_1_f_res_107124;
        
        if (defunc_0_p_res_107123) {
            int64_t x_107427;
            
            x_107427 = ((int64_t *) mem_101200.mem)[gtid_107120];
            
            int64_t defunc_1_f_res_t_res_107428 = sub64(x_107427, (int64_t) 1);
            
            defunc_1_f_res_107124 = defunc_1_f_res_t_res_107428;
        } else {
            defunc_1_f_res_107124 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_107124) &&
            slt64(defunc_1_f_res_107124, n_92399)) {
            ((int64_t *) mem_101206.mem)[defunc_1_f_res_107124] = gtid_107120;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_107124) &&
            slt64(defunc_1_f_res_107124, n_92399)) {
            ((double *) mem_101203.mem)[defunc_1_f_res_107124] = x_107121;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110125_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110125_end -
                 futhark_mc_segmap_parloop_110125_start;
        
        ctx->futhark_mc_segmap_parloop_110125_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110125_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110125_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110123(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107119 = tid;
    int num_tasks_107425 = info.nsubtasks;
    struct futhark_mc_task_110122 *futhark_mc_task_110122 =
                                  (struct futhark_mc_task_110122 *) args;
    struct futhark_context *ctx = futhark_mc_task_110122->ctx;
    uint64_t futhark_mc_segmap_task_110123_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110123_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110122->free_n_92399;
    int64_t gtid_97891 = futhark_mc_task_110122->free_gtid_97891;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110122->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101200 = {.desc ="mem_101200", .mem =
                                  futhark_mc_task_110122->free_mem_101200,
                                  .size =0, .references =NULL};
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_task_110122->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110122->free_mem_101206,
                                  .size =0, .references =NULL};
    int64_t iter_107426;
    struct futhark_mc_segmap_parloop_struct_110124
    futhark_mc_segmap_parloop_struct_110124;
    
    futhark_mc_segmap_parloop_struct_110124.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110124.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110124.free_gtid_97891 = gtid_97891;
    futhark_mc_segmap_parloop_struct_110124.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110124.free_mem_101200 = mem_101200.mem;
    futhark_mc_segmap_parloop_struct_110124.free_mem_101203 = mem_101203.mem;
    futhark_mc_segmap_parloop_struct_110124.free_mem_101206 = mem_101206.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110125_task;
    
    futhark_mc_segmap_parloop_110125_task.name =
        "futhark_mc_segmap_parloop_110125";
    futhark_mc_segmap_parloop_110125_task.fn = futhark_mc_segmap_parloop_110125;
    futhark_mc_segmap_parloop_110125_task.args =
        &futhark_mc_segmap_parloop_struct_110124;
    futhark_mc_segmap_parloop_110125_task.iterations = iterations;
    futhark_mc_segmap_parloop_110125_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110125_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110125_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110125_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110125_task);
    
    if (futhark_mc_segmap_parloop_110125_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110125_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110125_total_end -
                 futhark_mc_segmap_parloop_110125_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110125_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110125_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110125_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110123_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110123_end -
                 futhark_mc_segmap_task_110123_start;
        
        ctx->futhark_mc_segmap_task_110123_runs[tid]++;
        ctx->futhark_mc_segmap_task_110123_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110123_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110126 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101209;
};
struct futhark_mc_segmap_parloop_struct_110128 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101209;
};
static int futhark_mc_segmap_parloop_110129(void *args, int64_t start,
                                            int64_t end, int flat_tid_107127,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110128
    *futhark_mc_segmap_parloop_struct_110128 =
    (struct futhark_mc_segmap_parloop_struct_110128 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110128->ctx;
    uint64_t futhark_mc_segmap_parloop_110129_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110129_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110128->free_n_92399;
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segmap_parloop_struct_110128->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_segmap_parloop_struct_110128->free_mem_101209,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107432 = start;
    
    for (; iter_107432 < end; iter_107432++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107433 = n_92399;
        int64_t gtid_107128 = iter_107432;
        int64_t remnant_107434 = iter_107432 - gtid_107128;
        int64_t x_107129;
        
        x_107129 = ((int64_t *) mem_101206.mem)[gtid_107128];
        
        int64_t defunc_0_f_res_107130 = add64((int64_t) 1, x_107129);
        
        ((int64_t *) mem_101209.mem)[gtid_107128] = defunc_0_f_res_107130;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110129_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110129_end -
                 futhark_mc_segmap_parloop_110129_start;
        
        ctx->futhark_mc_segmap_parloop_110129_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110129_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110129_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110127(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107127 = tid;
    int num_tasks_107431 = info.nsubtasks;
    struct futhark_mc_task_110126 *futhark_mc_task_110126 =
                                  (struct futhark_mc_task_110126 *) args;
    struct futhark_context *ctx = futhark_mc_task_110126->ctx;
    uint64_t futhark_mc_segmap_task_110127_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110127_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110126->free_n_92399;
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110126->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_task_110126->free_mem_101209,
                                  .size =0, .references =NULL};
    int64_t iter_107432;
    struct futhark_mc_segmap_parloop_struct_110128
    futhark_mc_segmap_parloop_struct_110128;
    
    futhark_mc_segmap_parloop_struct_110128.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110128.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110128.free_mem_101206 = mem_101206.mem;
    futhark_mc_segmap_parloop_struct_110128.free_mem_101209 = mem_101209.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110129_task;
    
    futhark_mc_segmap_parloop_110129_task.name =
        "futhark_mc_segmap_parloop_110129";
    futhark_mc_segmap_parloop_110129_task.fn = futhark_mc_segmap_parloop_110129;
    futhark_mc_segmap_parloop_110129_task.args =
        &futhark_mc_segmap_parloop_struct_110128;
    futhark_mc_segmap_parloop_110129_task.iterations = iterations;
    futhark_mc_segmap_parloop_110129_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110129_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110129_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110129_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110129_task);
    
    if (futhark_mc_segmap_parloop_110129_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110129_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110129_total_end -
                 futhark_mc_segmap_parloop_110129_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110129_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110129_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110129_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110127_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110127_end -
                 futhark_mc_segmap_task_110127_start;
        
        ctx->futhark_mc_segmap_task_110127_runs[tid]++;
        ctx->futhark_mc_segmap_task_110127_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110127_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110130 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101212;
};
struct futhark_mc_segmap_parloop_struct_110132 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101212;
};
static int futhark_mc_segmap_parloop_110133(void *args, int64_t start,
                                            int64_t end, int flat_tid_107131,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110132
    *futhark_mc_segmap_parloop_struct_110132 =
    (struct futhark_mc_segmap_parloop_struct_110132 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110132->ctx;
    uint64_t futhark_mc_segmap_parloop_110133_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110133_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110132->free_q_92401;
    int64_t last_res_97903 =
            futhark_mc_segmap_parloop_struct_110132->free_last_res_97903;
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_segmap_parloop_struct_110132->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107436 = start;
    
    for (; iter_107436 < end; iter_107436++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107437 = q_92401;
        int64_t gtid_107132 = iter_107436;
        int64_t remnant_107438 = iter_107436 - gtid_107132;
        bool cond_107133 = sle64(last_res_97903, gtid_107132);
        double defunc_0_f_res_107134;
        
        if (cond_107133) {
            defunc_0_f_res_107134 = 0.0;
        } else {
            defunc_0_f_res_107134 = 1.0;
        }
        ((double *) mem_101212.mem)[gtid_107132] = defunc_0_f_res_107134;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110133_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110133_end -
                 futhark_mc_segmap_parloop_110133_start;
        
        ctx->futhark_mc_segmap_parloop_110133_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110133_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110133_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110131(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107131 = tid;
    int num_tasks_107435 = info.nsubtasks;
    struct futhark_mc_task_110130 *futhark_mc_task_110130 =
                                  (struct futhark_mc_task_110130 *) args;
    struct futhark_context *ctx = futhark_mc_task_110130->ctx;
    uint64_t futhark_mc_segmap_task_110131_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110131_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_110130->free_q_92401;
    int64_t last_res_97903 = futhark_mc_task_110130->free_last_res_97903;
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_task_110130->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t iter_107436;
    struct futhark_mc_segmap_parloop_struct_110132
    futhark_mc_segmap_parloop_struct_110132;
    
    futhark_mc_segmap_parloop_struct_110132.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110132.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110132.free_last_res_97903 =
        last_res_97903;
    futhark_mc_segmap_parloop_struct_110132.free_mem_101212 = mem_101212.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110133_task;
    
    futhark_mc_segmap_parloop_110133_task.name =
        "futhark_mc_segmap_parloop_110133";
    futhark_mc_segmap_parloop_110133_task.fn = futhark_mc_segmap_parloop_110133;
    futhark_mc_segmap_parloop_110133_task.args =
        &futhark_mc_segmap_parloop_struct_110132;
    futhark_mc_segmap_parloop_110133_task.iterations = iterations;
    futhark_mc_segmap_parloop_110133_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110133_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110133_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110133_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110133_task);
    
    if (futhark_mc_segmap_parloop_110133_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110133_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110133_total_end -
                 futhark_mc_segmap_parloop_110133_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110133_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110133_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110133_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110131_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110131_end -
                 futhark_mc_segmap_task_110131_start;
        
        ctx->futhark_mc_segmap_task_110131_runs[tid]++;
        ctx->futhark_mc_segmap_task_110131_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110131_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110134 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97903;
    int64_t free_min_arg_97922;
    int64_t free_min_arg_97923;
    int64_t free_min_res_97924;
    double free_max_res_97928;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101209;
    unsigned char *free_mem_101212;
    unsigned char *free_mem_101215;
};
struct futhark_mc_segmap_parloop_struct_110136 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97903;
    int64_t free_min_arg_97922;
    int64_t free_min_arg_97923;
    int64_t free_min_res_97924;
    double free_max_res_97928;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101209;
    unsigned char *free_mem_101212;
    unsigned char *free_mem_101215;
};
static int futhark_mc_segmap_parloop_110137(void *args, int64_t start,
                                            int64_t end, int flat_tid_107273,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110136
    *futhark_mc_segmap_parloop_struct_110136 =
    (struct futhark_mc_segmap_parloop_struct_110136 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110136->ctx;
    uint64_t futhark_mc_segmap_parloop_110137_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110137_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110136->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110136->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110136->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110136->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110136->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110136->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110136->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110136->free_loop_cond_92426;
    int64_t last_res_97903 =
            futhark_mc_segmap_parloop_struct_110136->free_last_res_97903;
    int64_t min_arg_97922 =
            futhark_mc_segmap_parloop_struct_110136->free_min_arg_97922;
    int64_t min_arg_97923 =
            futhark_mc_segmap_parloop_struct_110136->free_min_arg_97923;
    int64_t min_res_97924 =
            futhark_mc_segmap_parloop_struct_110136->free_min_res_97924;
    double max_res_97928 =
           futhark_mc_segmap_parloop_struct_110136->free_max_res_97928;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_segmap_parloop_struct_110136->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segmap_parloop_struct_110136->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_segmap_parloop_struct_110136->free_mem_101209,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_segmap_parloop_struct_110136->free_mem_101212,
                                  .size =0, .references =NULL};
    struct memblock mem_101215 = {.desc ="mem_101215", .mem =
                                  futhark_mc_segmap_parloop_struct_110136->free_mem_101215,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107440 = start;
    
    for (; iter_107440 < end; iter_107440++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107539 = n_m_92409;
        int64_t gtid_107274 = iter_107440;
        int64_t remnant_107540 = iter_107440 - gtid_107274;
        int64_t min_arg_107275 = mul64(jump_92403, gtid_107274);
        int64_t min_res_107276 = smin64(i_92415, min_arg_107275);
        int64_t defunc_0_g_res_107277 = add64((int64_t) 1, min_res_107276);
        bool init_idx_107278;
        int64_t init_idx_107279;
        int64_t init_idx_107280;
        bool loop_while_107441;
        int64_t low_107442;
        int64_t high_107443;
        
        loop_while_107441 = x_92416;
        low_107442 = (int64_t) 0;
        high_107443 = i_92415;
        while (loop_while_107441) {
            int64_t x_107444 = add64(low_107442, high_107443);
            int64_t mid_107445 = sdiv64(x_107444, (int64_t) 2);
            bool x_107446 = sle64((int64_t) 0, mid_107445);
            bool y_107447 = slt64(mid_107445, n_92399);
            bool bounds_check_107448 = x_107446 && y_107447;
            bool index_certs_107449;
            
            if (!bounds_check_107448) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_107445,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_107450;
            
            mid_id_107450 = ((int64_t *) mem_101209.mem)[mid_107445];
            
            bool cond_107451 = slt64(mid_id_107450, (int64_t) 0);
            int64_t mid_idx_107452;
            
            if (cond_107451) {
                mid_idx_107452 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_107452 = mid_id_107450;
            }
            
            bool cond_107453 = sle64(defunc_0_g_res_107277, mid_idx_107452);
            int64_t loopres_107454;
            int64_t loopres_107455;
            
            if (cond_107453) {
                int64_t loopres_t_res_107456 = sub64(mid_107445, (int64_t) 1);
                
                loopres_107454 = low_107442;
                loopres_107455 = loopres_t_res_107456;
            } else {
                int64_t loopres_f_res_107457 = add64((int64_t) 1, mid_107445);
                
                loopres_107454 = loopres_f_res_107457;
                loopres_107455 = high_107443;
            }
            
            bool loop_cond_107458 = sle64(loopres_107454, loopres_107455);
            bool loop_while_tmp_107541 = loop_cond_107458;
            int64_t low_tmp_107542 = loopres_107454;
            int64_t high_tmp_107543 = loopres_107455;
            
            loop_while_107441 = loop_while_tmp_107541;
            low_107442 = low_tmp_107542;
            high_107443 = high_tmp_107543;
        }
        init_idx_107278 = loop_while_107441;
        init_idx_107279 = low_107442;
        init_idx_107280 = high_107443;
        
        bool idx_107299;
        int64_t idx_107300;
        int64_t idx_107301;
        int64_t idx_107302;
        bool loop_while_107459;
        int64_t l_idx_107460;
        int64_t r_idx_107461;
        int64_t span_107462;
        
        loop_while_107459 = loop_cond_92426;
        l_idx_107460 = init_idx_107279;
        r_idx_107461 = init_idx_107279;
        span_107462 = (int64_t) 1;
        while (loop_while_107459) {
            int64_t max_arg_107463 = sub64(l_idx_107460, (int64_t) 1);
            int64_t max_res_107464 = smax64((int64_t) 0, max_arg_107463);
            int64_t min_arg_107465 = add64((int64_t) 1, r_idx_107461);
            int64_t min_res_107466 = smin64(min_arg_97922, min_arg_107465);
            bool x_107467 = sle64((int64_t) 0, max_res_107464);
            bool y_107468 = slt64(max_res_107464, n_92399);
            bool bounds_check_107469 = x_107467 && y_107468;
            bool index_certs_107470;
            
            if (!bounds_check_107469) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_107464,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107471;
            
            x_107471 = ((int64_t *) mem_101209.mem)[max_res_107464];
            
            int64_t abs_arg_107472 = sub64(x_107471, defunc_0_g_res_107277);
            int64_t abs_res_107473 = abs64(abs_arg_107472);
            bool x_107474 = sle64((int64_t) 0, min_res_107466);
            bool y_107475 = slt64(min_res_107466, n_92399);
            bool bounds_check_107476 = x_107474 && y_107475;
            bool index_certs_107477;
            
            if (!bounds_check_107476) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_107466,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107478;
            
            x_107478 = ((int64_t *) mem_101209.mem)[min_res_107466];
            
            int64_t abs_arg_107479 = sub64(x_107478, defunc_0_g_res_107277);
            int64_t abs_res_107480 = abs64(abs_arg_107479);
            bool cond_107481 = max_res_107464 == l_idx_107460;
            int64_t loopres_107482;
            int64_t loopres_107483;
            int64_t loopres_107484;
            
            if (cond_107481) {
                loopres_107482 = l_idx_107460;
                loopres_107483 = r_idx_107461;
                loopres_107484 = min_res_92421;
            } else {
                bool cond_107485 = slt64(abs_res_107473, abs_res_107480);
                bool cond_f_res_107486 = min_res_107466 == r_idx_107461;
                bool x_107487 = !cond_107485;
                bool y_107488 = cond_f_res_107486 && x_107487;
                bool cond_107489 = cond_107485 || y_107488;
                int64_t loopres_f_res_107490;
                
                if (cond_107489) {
                    loopres_f_res_107490 = max_res_107464;
                } else {
                    loopres_f_res_107490 = l_idx_107460;
                }
                
                int64_t loopres_f_res_107491;
                
                if (cond_107489) {
                    loopres_f_res_107491 = r_idx_107461;
                } else {
                    loopres_f_res_107491 = min_res_107466;
                }
                
                int64_t loopres_f_res_107492;
                
                if (cond_107489) {
                    int64_t loopres_f_res_t_res_107493 = add64((int64_t) 1,
                                                               span_107462);
                    
                    loopres_f_res_107492 = loopres_f_res_t_res_107493;
                } else {
                    int64_t loopres_f_res_f_res_107494 = add64((int64_t) 1,
                                                               span_107462);
                    
                    loopres_f_res_107492 = loopres_f_res_f_res_107494;
                }
                loopres_107482 = loopres_f_res_107490;
                loopres_107483 = loopres_f_res_107491;
                loopres_107484 = loopres_f_res_107492;
            }
            
            bool loop_cond_107495 = slt64(loopres_107484, min_res_92421);
            bool loop_while_tmp_107544 = loop_cond_107495;
            int64_t l_idx_tmp_107545 = loopres_107482;
            int64_t r_idx_tmp_107546 = loopres_107483;
            int64_t span_tmp_107547 = loopres_107484;
            
            loop_while_107459 = loop_while_tmp_107544;
            l_idx_107460 = l_idx_tmp_107545;
            r_idx_107461 = r_idx_tmp_107546;
            span_107462 = span_tmp_107547;
        }
        idx_107299 = loop_while_107459;
        idx_107300 = l_idx_107460;
        idx_107301 = r_idx_107461;
        idx_107302 = span_107462;
        
        int64_t min_res_107340 = smin64(min_arg_97923, idx_107300);
        int64_t max_res_107341 = smax64((int64_t) 0, min_res_107340);
        int64_t x_107342 = add64(min_res_97924, max_res_107341);
        int64_t r_107343 = sub64(x_107342, (int64_t) 1);
        bool x_107344 = sle64((int64_t) 0, r_107343);
        bool y_107345 = slt64(r_107343, n_92399);
        bool bounds_check_107346 = x_107344 && y_107345;
        bool index_certs_107347;
        
        if (!bounds_check_107346) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_107343,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_107348;
        
        x_107348 = ((int64_t *) mem_101206.mem)[r_107343];
        
        int64_t abs_arg_107349 = sub64(x_107348, min_res_107276);
        int64_t abs_res_107350 = abs64(abs_arg_107349);
        bool x_107351 = sle64((int64_t) 0, max_res_107341);
        bool y_107352 = slt64(max_res_107341, n_92399);
        bool bounds_check_107353 = x_107351 && y_107352;
        bool index_certs_107354;
        
        if (!bounds_check_107353) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_107341,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_107355;
        
        x_107355 = ((int64_t *) mem_101206.mem)[max_res_107341];
        
        int64_t abs_arg_107356 = sub64(x_107355, min_res_107276);
        int64_t abs_res_107357 = abs64(abs_arg_107356);
        int64_t max_res_107358 = smax64(abs_res_107350, abs_res_107357);
        double defunc_0_f_res_107359 = sitofp_i64_f64(max_res_107358);
        double defunc_1_f_res_107360 = max_res_97928 + defunc_0_f_res_107359;
        double defunc_2_reduce_res_107361;
        double redout_107497 = 0.0;
        
        for (int64_t i_107496 = 0; i_107496 < q_92401; i_107496++) {
            double x_107498;
            
            x_107498 = ((double *) mem_101212.mem)[i_107496];
            
            bool cond_107499 = sle64(last_res_97903, i_107496);
            int64_t defunc_0_f_res_107500;
            
            if (cond_107499) {
                defunc_0_f_res_107500 = (int64_t) 0;
            } else {
                int64_t i_107501 = add64(max_res_107341, i_107496);
                int64_t defunc_0_add_arg_107502;
                
                defunc_0_add_arg_107502 =
                    ((int64_t *) mem_101206.mem)[i_107501];
                
                int64_t defunc_1_add_res_107503 = add64((int64_t) 1,
                                                        defunc_0_add_arg_107502);
                
                defunc_0_f_res_107500 = defunc_1_add_res_107503;
            }
            
            int64_t binop_p_107504 = sub64(defunc_0_f_res_107500,
                                           min_res_107276);
            double defunc_0_f_res_107505 = sitofp_i64_f64(binop_p_107504);
            double abs_res_107506 = fabs(defunc_0_f_res_107505);
            double tmp1_107507 = abs_res_107506 / defunc_1_f_res_107360;
            double x_107508 = tmp1_107507 * tmp1_107507;
            double y_107509 = tmp1_107507 * x_107508;
            double tmp2_107510 = 1.0 - y_107509;
            double x_107511 = tmp2_107510 * tmp2_107510;
            double tmp3_107512 = tmp2_107510 * x_107511;
            double w_j_107513 = x_107498 * tmp3_107512;
            double defunc_1_op_res_107514 = w_j_107513 + redout_107497;
            double redout_tmp_107548 = defunc_1_op_res_107514;
            
            redout_107497 = redout_tmp_107548;
        }
        defunc_2_reduce_res_107361 = redout_107497;
        
        double a0_107381 = 1.0 / defunc_2_reduce_res_107361;
        double defunc_2_reduce_res_107382;
        double redout_107516 = 0.0;
        
        for (int64_t i_107515 = 0; i_107515 < q_92401; i_107515++) {
            double x_107517;
            
            x_107517 = ((double *) mem_101212.mem)[i_107515];
            
            bool cond_107518 = sle64(last_res_97903, i_107515);
            int64_t defunc_0_f_res_107519;
            
            if (cond_107518) {
                defunc_0_f_res_107519 = (int64_t) 0;
            } else {
                int64_t i_107520 = add64(max_res_107341, i_107515);
                int64_t defunc_0_add_arg_107521;
                
                defunc_0_add_arg_107521 =
                    ((int64_t *) mem_101206.mem)[i_107520];
                
                int64_t defunc_1_add_res_107522 = add64((int64_t) 1,
                                                        defunc_0_add_arg_107521);
                
                defunc_0_f_res_107519 = defunc_1_add_res_107522;
            }
            
            int64_t binop_p_107523 = sub64(defunc_0_f_res_107519,
                                           min_res_107276);
            double defunc_0_f_res_107524 = sitofp_i64_f64(binop_p_107523);
            double abs_res_107525 = fabs(defunc_0_f_res_107524);
            double tmp1_107526 = abs_res_107525 / defunc_1_f_res_107360;
            double x_107527 = tmp1_107526 * tmp1_107526;
            double y_107528 = tmp1_107526 * x_107527;
            double tmp2_107529 = 1.0 - y_107528;
            double x_107530 = tmp2_107529 * tmp2_107529;
            double tmp3_107531 = tmp2_107529 * x_107530;
            double tmp4_107532 = x_107517 * tmp3_107531;
            double defunc_0_f_res_107533;
            
            if (cond_107518) {
                defunc_0_f_res_107533 = 0.0;
            } else {
                int64_t i_107534 = add64(max_res_107341, i_107515);
                double defunc_0_add_arg_107535;
                
                defunc_0_add_arg_107535 = ((double *) mem_101203.mem)[i_107534];
                defunc_0_f_res_107533 = defunc_0_add_arg_107535;
            }
            
            double x_107536 = a0_107381 * tmp4_107532;
            double defunc_9_fit_fun_res_107537 = defunc_0_f_res_107533 *
                   x_107536;
            double defunc_1_op_res_107538 = defunc_9_fit_fun_res_107537 +
                   redout_107516;
            double redout_tmp_107549 = defunc_1_op_res_107538;
            
            redout_107516 = redout_tmp_107549;
        }
        defunc_2_reduce_res_107382 = redout_107516;
        ((double *) mem_101215.mem)[gtid_107274] = defunc_2_reduce_res_107382;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110137_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110137_end -
                 futhark_mc_segmap_parloop_110137_start;
        
        ctx->futhark_mc_segmap_parloop_110137_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110137_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110137_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110135(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107273 = tid;
    int num_tasks_107439 = info.nsubtasks;
    struct futhark_mc_task_110134 *futhark_mc_task_110134 =
                                  (struct futhark_mc_task_110134 *) args;
    struct futhark_context *ctx = futhark_mc_task_110134->ctx;
    uint64_t futhark_mc_segmap_task_110135_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110135_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110134->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110134->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110134->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110134->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110134->free_i_92415;
    bool x_92416 = futhark_mc_task_110134->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110134->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110134->free_loop_cond_92426;
    int64_t last_res_97903 = futhark_mc_task_110134->free_last_res_97903;
    int64_t min_arg_97922 = futhark_mc_task_110134->free_min_arg_97922;
    int64_t min_arg_97923 = futhark_mc_task_110134->free_min_arg_97923;
    int64_t min_res_97924 = futhark_mc_task_110134->free_min_res_97924;
    double max_res_97928 = futhark_mc_task_110134->free_max_res_97928;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_task_110134->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110134->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_task_110134->free_mem_101209,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_task_110134->free_mem_101212,
                                  .size =0, .references =NULL};
    struct memblock mem_101215 = {.desc ="mem_101215", .mem =
                                  futhark_mc_task_110134->free_mem_101215,
                                  .size =0, .references =NULL};
    int64_t iter_107440;
    struct futhark_mc_segmap_parloop_struct_110136
    futhark_mc_segmap_parloop_struct_110136;
    
    futhark_mc_segmap_parloop_struct_110136.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110136.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110136.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110136.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110136.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110136.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110136.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110136.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110136.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110136.free_last_res_97903 =
        last_res_97903;
    futhark_mc_segmap_parloop_struct_110136.free_min_arg_97922 = min_arg_97922;
    futhark_mc_segmap_parloop_struct_110136.free_min_arg_97923 = min_arg_97923;
    futhark_mc_segmap_parloop_struct_110136.free_min_res_97924 = min_res_97924;
    futhark_mc_segmap_parloop_struct_110136.free_max_res_97928 = max_res_97928;
    futhark_mc_segmap_parloop_struct_110136.free_mem_101203 = mem_101203.mem;
    futhark_mc_segmap_parloop_struct_110136.free_mem_101206 = mem_101206.mem;
    futhark_mc_segmap_parloop_struct_110136.free_mem_101209 = mem_101209.mem;
    futhark_mc_segmap_parloop_struct_110136.free_mem_101212 = mem_101212.mem;
    futhark_mc_segmap_parloop_struct_110136.free_mem_101215 = mem_101215.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110137_task;
    
    futhark_mc_segmap_parloop_110137_task.name =
        "futhark_mc_segmap_parloop_110137";
    futhark_mc_segmap_parloop_110137_task.fn = futhark_mc_segmap_parloop_110137;
    futhark_mc_segmap_parloop_110137_task.args =
        &futhark_mc_segmap_parloop_struct_110136;
    futhark_mc_segmap_parloop_110137_task.iterations = iterations;
    futhark_mc_segmap_parloop_110137_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110137_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110137_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110137_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110137_task);
    
    if (futhark_mc_segmap_parloop_110137_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110137_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110137_total_end -
                 futhark_mc_segmap_parloop_110137_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110137_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110137_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110137_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110135_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110135_end -
                 futhark_mc_segmap_task_110135_start;
        
        ctx->futhark_mc_segmap_task_110135_runs[tid]++;
        ctx->futhark_mc_segmap_task_110135_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110135_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110139 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_97903;
    int64_t free_min_arg_97922;
    int64_t free_min_arg_97923;
    int64_t free_min_res_97924;
    double free_max_res_97928;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101209;
    unsigned char *free_mem_101212;
    unsigned char *free_mem_101215;
};
struct futhark_mc_task_110141 {
    struct futhark_context *ctx;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101212;
    int64_t free_min_res_107138;
    int64_t free_max_res_107203;
    double free_defunc_1_f_res_107222;
    double *retval_defunc_2_reduce_res_107223;
};
struct futhark_mc_segred_stage_1_parloop_struct_110144 {
    struct futhark_context *ctx;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101212;
    int64_t free_min_res_107138;
    int64_t free_max_res_107203;
    double free_defunc_1_f_res_107222;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_107663;
};
static int futhark_mc_segred_stage_1_parloop_110145(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_107606,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110144
    *futhark_mc_segred_stage_1_parloop_struct_110144 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110144 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110144->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110145_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110145_start = get_wall_time();
    
    int64_t last_res_97903 =
            futhark_mc_segred_stage_1_parloop_struct_110144->free_last_res_97903;
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110144->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110144->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t min_res_107138 =
            futhark_mc_segred_stage_1_parloop_struct_110144->free_min_res_107138;
    int64_t max_res_107203 =
            futhark_mc_segred_stage_1_parloop_struct_110144->free_max_res_107203;
    double defunc_1_f_res_107222 =
           futhark_mc_segred_stage_1_parloop_struct_110144->free_defunc_1_f_res_107222;
    struct memblock reduce_stage_1_tid_res_arr_mem_107663 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_107663",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110144->free_reduce_stage_1_tid_res_arr_mem_107663,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107665 = start;
    double x_107608;
    double x_107609;
    double local_acc_107666 = 0.0;
    
    for (; iter_107665 < end; iter_107665++) {
        int64_t gtid_107607 = iter_107665;
        double x_107611;
        
        x_107611 = ((double *) mem_101212.mem)[gtid_107607];
        
        bool cond_107612 = sle64(last_res_97903, gtid_107607);
        int64_t defunc_0_f_res_107613;
        
        if (cond_107612) {
            defunc_0_f_res_107613 = (int64_t) 0;
        } else {
            int64_t i_107614 = add64(max_res_107203, gtid_107607);
            int64_t defunc_0_add_arg_107615;
            
            defunc_0_add_arg_107615 = ((int64_t *) mem_101206.mem)[i_107614];
            
            int64_t defunc_1_add_res_107616 = add64((int64_t) 1,
                                                    defunc_0_add_arg_107615);
            
            defunc_0_f_res_107613 = defunc_1_add_res_107616;
        }
        
        int64_t binop_p_107617 = sub64(defunc_0_f_res_107613, min_res_107138);
        double defunc_0_f_res_107618 = sitofp_i64_f64(binop_p_107617);
        double abs_res_107619 = fabs(defunc_0_f_res_107618);
        double tmp1_107620 = abs_res_107619 / defunc_1_f_res_107222;
        double x_107621 = tmp1_107620 * tmp1_107620;
        double y_107622 = tmp1_107620 * x_107621;
        double tmp2_107623 = 1.0 - y_107622;
        double x_107624 = tmp2_107623 * tmp2_107623;
        double tmp3_107625 = tmp2_107623 * x_107624;
        double w_j_107626 = x_107611 * tmp3_107625;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_107608 = local_acc_107666;
        }
        // Load next params
        {
            x_107609 = w_j_107626;
        }
        // Red body
        {
            double defunc_1_op_res_107610 = x_107608 + x_107609;
            
            local_acc_107666 = defunc_1_op_res_107610;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_107663.mem)[flat_tid_107606] =
        local_acc_107666;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110145_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110145_end -
                 futhark_mc_segred_stage_1_parloop_110145_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110145_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110145_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110145_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110142(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107606 = tid;
    int num_tasks_107662 = info.nsubtasks;
    struct futhark_mc_task_110141 *futhark_mc_task_110141 =
                                  (struct futhark_mc_task_110141 *) args;
    struct futhark_context *ctx = futhark_mc_task_110141->ctx;
    uint64_t futhark_mc_segred_task_110142_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110142_start = get_wall_time();
    
    int64_t last_res_97903 = futhark_mc_task_110141->free_last_res_97903;
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110141->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_task_110141->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t min_res_107138 = futhark_mc_task_110141->free_min_res_107138;
    int64_t max_res_107203 = futhark_mc_task_110141->free_max_res_107203;
    double defunc_1_f_res_107222 =
           futhark_mc_task_110141->free_defunc_1_f_res_107222;
    double defunc_2_reduce_res_107223 =
           *futhark_mc_task_110141->retval_defunc_2_reduce_res_107223;
    size_t reduce_stage_1_tid_res_arr_mem_107663_cached_sizze_110143 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_107663 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_107663_cached_sizze_110143 <
        (size_t) ((int64_t) 8 * num_tasks_107662)) {
        reduce_stage_1_tid_res_arr_mem_107663 =
            realloc(reduce_stage_1_tid_res_arr_mem_107663, (int64_t) 8 *
                    num_tasks_107662);
        reduce_stage_1_tid_res_arr_mem_107663_cached_sizze_110143 =
            (int64_t) 8 * num_tasks_107662;
    }
    
    int64_t iter_107665;
    struct futhark_mc_segred_stage_1_parloop_struct_110144
    futhark_mc_segred_stage_1_parloop_struct_110144;
    
    futhark_mc_segred_stage_1_parloop_struct_110144.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_last_res_97903 =
        last_res_97903;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_mem_101206 =
        mem_101206.mem;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_mem_101212 =
        mem_101212.mem;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_min_res_107138 =
        min_res_107138;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_max_res_107203 =
        max_res_107203;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_defunc_1_f_res_107222 =
        defunc_1_f_res_107222;
    futhark_mc_segred_stage_1_parloop_struct_110144.free_reduce_stage_1_tid_res_arr_mem_107663 =
        reduce_stage_1_tid_res_arr_mem_107663;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110145_task;
    
    futhark_mc_segred_stage_1_parloop_110145_task.name =
        "futhark_mc_segred_stage_1_parloop_110145";
    futhark_mc_segred_stage_1_parloop_110145_task.fn =
        futhark_mc_segred_stage_1_parloop_110145;
    futhark_mc_segred_stage_1_parloop_110145_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110144;
    futhark_mc_segred_stage_1_parloop_110145_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110145_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110145_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110145_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110145_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110145_task);
    
    if (futhark_mc_segred_stage_1_parloop_110145_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110145_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110145_total_end -
                 futhark_mc_segred_stage_1_parloop_110145_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110145_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110145_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110145_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_107223 = 0.0;
    }
    
    double x_107667;
    double x_107668;
    
    for (int32_t i_107670 = 0; i_107670 < num_tasks_107662; i_107670++) {
        flat_tid_107606 = i_107670;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_107667 = defunc_2_reduce_res_107223;
            }
            // load next params
            {
                x_107668 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_107663)[flat_tid_107606];
            }
            // red body
            {
                double defunc_1_op_res_107669 = x_107667 + x_107668;
                
                defunc_2_reduce_res_107223 = defunc_1_op_res_107669;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_107663);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110142_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110142_end -
                 futhark_mc_segred_task_110142_start;
        
        ctx->futhark_mc_segred_task_110142_runs[tid]++;
        ctx->futhark_mc_segred_task_110142_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110142_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110141->retval_defunc_2_reduce_res_107223 =
            defunc_2_reduce_res_107223;
    }
    return err;
}
struct futhark_mc_task_110146 {
    struct futhark_context *ctx;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101212;
    int64_t free_min_res_107138;
    int64_t free_max_res_107203;
    double free_defunc_1_f_res_107222;
    double free_a0_107245;
    double *retval_defunc_2_reduce_res_107246;
};
struct futhark_mc_segred_stage_1_parloop_struct_110149 {
    struct futhark_context *ctx;
    int64_t free_last_res_97903;
    unsigned char *free_mem_101203;
    unsigned char *free_mem_101206;
    unsigned char *free_mem_101212;
    int64_t free_min_res_107138;
    int64_t free_max_res_107203;
    double free_defunc_1_f_res_107222;
    double free_a0_107245;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_107672;
};
static int futhark_mc_segred_stage_1_parloop_110150(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_107627,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110149
    *futhark_mc_segred_stage_1_parloop_struct_110149 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110149 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110149->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110150_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110150_start = get_wall_time();
    
    int64_t last_res_97903 =
            futhark_mc_segred_stage_1_parloop_struct_110149->free_last_res_97903;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110149->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110149->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110149->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t min_res_107138 =
            futhark_mc_segred_stage_1_parloop_struct_110149->free_min_res_107138;
    int64_t max_res_107203 =
            futhark_mc_segred_stage_1_parloop_struct_110149->free_max_res_107203;
    double defunc_1_f_res_107222 =
           futhark_mc_segred_stage_1_parloop_struct_110149->free_defunc_1_f_res_107222;
    double a0_107245 =
           futhark_mc_segred_stage_1_parloop_struct_110149->free_a0_107245;
    struct memblock reduce_stage_1_tid_res_arr_mem_107672 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_107672",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110149->free_reduce_stage_1_tid_res_arr_mem_107672,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107674 = start;
    double x_107629;
    double x_107630;
    double local_acc_107675 = 0.0;
    
    for (; iter_107674 < end; iter_107674++) {
        int64_t gtid_107628 = iter_107674;
        double x_107632;
        
        x_107632 = ((double *) mem_101212.mem)[gtid_107628];
        
        bool cond_107633 = sle64(last_res_97903, gtid_107628);
        int64_t defunc_0_f_res_107634;
        
        if (cond_107633) {
            defunc_0_f_res_107634 = (int64_t) 0;
        } else {
            int64_t i_107635 = add64(max_res_107203, gtid_107628);
            int64_t defunc_0_add_arg_107636;
            
            defunc_0_add_arg_107636 = ((int64_t *) mem_101206.mem)[i_107635];
            
            int64_t defunc_1_add_res_107637 = add64((int64_t) 1,
                                                    defunc_0_add_arg_107636);
            
            defunc_0_f_res_107634 = defunc_1_add_res_107637;
        }
        
        int64_t binop_p_107638 = sub64(defunc_0_f_res_107634, min_res_107138);
        double defunc_0_f_res_107639 = sitofp_i64_f64(binop_p_107638);
        double abs_res_107640 = fabs(defunc_0_f_res_107639);
        double tmp1_107641 = abs_res_107640 / defunc_1_f_res_107222;
        double x_107642 = tmp1_107641 * tmp1_107641;
        double y_107643 = tmp1_107641 * x_107642;
        double tmp2_107644 = 1.0 - y_107643;
        double x_107645 = tmp2_107644 * tmp2_107644;
        double tmp3_107646 = tmp2_107644 * x_107645;
        double tmp4_107647 = x_107632 * tmp3_107646;
        double defunc_0_f_res_107648;
        
        if (cond_107633) {
            defunc_0_f_res_107648 = 0.0;
        } else {
            int64_t i_107649 = add64(max_res_107203, gtid_107628);
            double defunc_0_add_arg_107650;
            
            defunc_0_add_arg_107650 = ((double *) mem_101203.mem)[i_107649];
            defunc_0_f_res_107648 = defunc_0_add_arg_107650;
        }
        
        double x_107651 = a0_107245 * tmp4_107647;
        double defunc_9_fit_fun_res_107652 = defunc_0_f_res_107648 * x_107651;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_107629 = local_acc_107675;
        }
        // Load next params
        {
            x_107630 = defunc_9_fit_fun_res_107652;
        }
        // Red body
        {
            double defunc_1_op_res_107631 = x_107629 + x_107630;
            
            local_acc_107675 = defunc_1_op_res_107631;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_107672.mem)[flat_tid_107627] =
        local_acc_107675;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110150_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110150_end -
                 futhark_mc_segred_stage_1_parloop_110150_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110150_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110150_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110150_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110147(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107627 = tid;
    int num_tasks_107671 = info.nsubtasks;
    struct futhark_mc_task_110146 *futhark_mc_task_110146 =
                                  (struct futhark_mc_task_110146 *) args;
    struct futhark_context *ctx = futhark_mc_task_110146->ctx;
    uint64_t futhark_mc_segred_task_110147_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110147_start = get_wall_time();
    
    int64_t last_res_97903 = futhark_mc_task_110146->free_last_res_97903;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_task_110146->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110146->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_task_110146->free_mem_101212,
                                  .size =0, .references =NULL};
    int64_t min_res_107138 = futhark_mc_task_110146->free_min_res_107138;
    int64_t max_res_107203 = futhark_mc_task_110146->free_max_res_107203;
    double defunc_1_f_res_107222 =
           futhark_mc_task_110146->free_defunc_1_f_res_107222;
    double a0_107245 = futhark_mc_task_110146->free_a0_107245;
    double defunc_2_reduce_res_107246 =
           *futhark_mc_task_110146->retval_defunc_2_reduce_res_107246;
    size_t reduce_stage_1_tid_res_arr_mem_107672_cached_sizze_110148 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_107672 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_107672_cached_sizze_110148 <
        (size_t) ((int64_t) 8 * num_tasks_107671)) {
        reduce_stage_1_tid_res_arr_mem_107672 =
            realloc(reduce_stage_1_tid_res_arr_mem_107672, (int64_t) 8 *
                    num_tasks_107671);
        reduce_stage_1_tid_res_arr_mem_107672_cached_sizze_110148 =
            (int64_t) 8 * num_tasks_107671;
    }
    
    int64_t iter_107674;
    struct futhark_mc_segred_stage_1_parloop_struct_110149
    futhark_mc_segred_stage_1_parloop_struct_110149;
    
    futhark_mc_segred_stage_1_parloop_struct_110149.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_last_res_97903 =
        last_res_97903;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_mem_101203 =
        mem_101203.mem;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_mem_101206 =
        mem_101206.mem;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_mem_101212 =
        mem_101212.mem;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_min_res_107138 =
        min_res_107138;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_max_res_107203 =
        max_res_107203;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_defunc_1_f_res_107222 =
        defunc_1_f_res_107222;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_a0_107245 = a0_107245;
    futhark_mc_segred_stage_1_parloop_struct_110149.free_reduce_stage_1_tid_res_arr_mem_107672 =
        reduce_stage_1_tid_res_arr_mem_107672;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110150_task;
    
    futhark_mc_segred_stage_1_parloop_110150_task.name =
        "futhark_mc_segred_stage_1_parloop_110150";
    futhark_mc_segred_stage_1_parloop_110150_task.fn =
        futhark_mc_segred_stage_1_parloop_110150;
    futhark_mc_segred_stage_1_parloop_110150_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110149;
    futhark_mc_segred_stage_1_parloop_110150_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110150_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110150_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110150_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110150_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110150_task);
    
    if (futhark_mc_segred_stage_1_parloop_110150_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110150_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110150_total_end -
                 futhark_mc_segred_stage_1_parloop_110150_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110150_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110150_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110150_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_107246 = 0.0;
    }
    
    double x_107676;
    double x_107677;
    
    for (int32_t i_107679 = 0; i_107679 < num_tasks_107671; i_107679++) {
        flat_tid_107627 = i_107679;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_107676 = defunc_2_reduce_res_107246;
            }
            // load next params
            {
                x_107677 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_107672)[flat_tid_107627];
            }
            // red body
            {
                double defunc_1_op_res_107678 = x_107676 + x_107677;
                
                defunc_2_reduce_res_107246 = defunc_1_op_res_107678;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_107672);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110147_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110147_end -
                 futhark_mc_segred_task_110147_start;
        
        ctx->futhark_mc_segred_task_110147_runs[tid]++;
        ctx->futhark_mc_segred_task_110147_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110147_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110146->retval_defunc_2_reduce_res_107246 =
            defunc_2_reduce_res_107246;
    }
    return err;
}
static int futhark_mc_segmap_parloop_110140(void *args, int64_t start,
                                            int64_t end, int flat_tid_107135,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110139
    *futhark_mc_segmap_parloop_struct_110139 =
    (struct futhark_mc_segmap_parloop_struct_110139 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110139->ctx;
    uint64_t futhark_mc_segmap_parloop_110140_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110140_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110139->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110139->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110139->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110139->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110139->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110139->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110139->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110139->free_loop_cond_92426;
    int64_t last_res_97903 =
            futhark_mc_segmap_parloop_struct_110139->free_last_res_97903;
    int64_t min_arg_97922 =
            futhark_mc_segmap_parloop_struct_110139->free_min_arg_97922;
    int64_t min_arg_97923 =
            futhark_mc_segmap_parloop_struct_110139->free_min_arg_97923;
    int64_t min_res_97924 =
            futhark_mc_segmap_parloop_struct_110139->free_min_res_97924;
    double max_res_97928 =
           futhark_mc_segmap_parloop_struct_110139->free_max_res_97928;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_segmap_parloop_struct_110139->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_segmap_parloop_struct_110139->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_segmap_parloop_struct_110139->free_mem_101209,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_segmap_parloop_struct_110139->free_mem_101212,
                                  .size =0, .references =NULL};
    struct memblock mem_101215 = {.desc ="mem_101215", .mem =
                                  futhark_mc_segmap_parloop_struct_110139->free_mem_101215,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_107550 = start;
    
    for (; iter_107550 < end; iter_107550++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107653 = n_m_92409;
        int64_t gtid_107136 = iter_107550;
        int64_t remnant_107654 = iter_107550 - gtid_107136;
        int64_t min_arg_107137 = mul64(jump_92403, gtid_107136);
        int64_t min_res_107138 = smin64(i_92415, min_arg_107137);
        int64_t defunc_0_g_res_107139 = add64((int64_t) 1, min_res_107138);
        bool init_idx_107140;
        int64_t init_idx_107141;
        int64_t init_idx_107142;
        bool loop_while_107551;
        int64_t low_107552;
        int64_t high_107553;
        
        loop_while_107551 = x_92416;
        low_107552 = (int64_t) 0;
        high_107553 = i_92415;
        while (loop_while_107551) {
            int64_t x_107554 = add64(low_107552, high_107553);
            int64_t mid_107555 = sdiv64(x_107554, (int64_t) 2);
            bool x_107556 = sle64((int64_t) 0, mid_107555);
            bool y_107557 = slt64(mid_107555, n_92399);
            bool bounds_check_107558 = x_107556 && y_107557;
            bool index_certs_107559;
            
            if (!bounds_check_107558) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_107555,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_107560;
            
            mid_id_107560 = ((int64_t *) mem_101209.mem)[mid_107555];
            
            bool cond_107561 = slt64(mid_id_107560, (int64_t) 0);
            int64_t mid_idx_107562;
            
            if (cond_107561) {
                mid_idx_107562 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_107562 = mid_id_107560;
            }
            
            bool cond_107563 = sle64(defunc_0_g_res_107139, mid_idx_107562);
            int64_t loopres_107564;
            int64_t loopres_107565;
            
            if (cond_107563) {
                int64_t loopres_t_res_107566 = sub64(mid_107555, (int64_t) 1);
                
                loopres_107564 = low_107552;
                loopres_107565 = loopres_t_res_107566;
            } else {
                int64_t loopres_f_res_107567 = add64((int64_t) 1, mid_107555);
                
                loopres_107564 = loopres_f_res_107567;
                loopres_107565 = high_107553;
            }
            
            bool loop_cond_107568 = sle64(loopres_107564, loopres_107565);
            bool loop_while_tmp_107655 = loop_cond_107568;
            int64_t low_tmp_107656 = loopres_107564;
            int64_t high_tmp_107657 = loopres_107565;
            
            loop_while_107551 = loop_while_tmp_107655;
            low_107552 = low_tmp_107656;
            high_107553 = high_tmp_107657;
        }
        init_idx_107140 = loop_while_107551;
        init_idx_107141 = low_107552;
        init_idx_107142 = high_107553;
        
        bool idx_107161;
        int64_t idx_107162;
        int64_t idx_107163;
        int64_t idx_107164;
        bool loop_while_107569;
        int64_t l_idx_107570;
        int64_t r_idx_107571;
        int64_t span_107572;
        
        loop_while_107569 = loop_cond_92426;
        l_idx_107570 = init_idx_107141;
        r_idx_107571 = init_idx_107141;
        span_107572 = (int64_t) 1;
        while (loop_while_107569) {
            int64_t max_arg_107573 = sub64(l_idx_107570, (int64_t) 1);
            int64_t max_res_107574 = smax64((int64_t) 0, max_arg_107573);
            int64_t min_arg_107575 = add64((int64_t) 1, r_idx_107571);
            int64_t min_res_107576 = smin64(min_arg_97922, min_arg_107575);
            bool x_107577 = sle64((int64_t) 0, max_res_107574);
            bool y_107578 = slt64(max_res_107574, n_92399);
            bool bounds_check_107579 = x_107577 && y_107578;
            bool index_certs_107580;
            
            if (!bounds_check_107579) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_107574,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107581;
            
            x_107581 = ((int64_t *) mem_101209.mem)[max_res_107574];
            
            int64_t abs_arg_107582 = sub64(x_107581, defunc_0_g_res_107139);
            int64_t abs_res_107583 = abs64(abs_arg_107582);
            bool x_107584 = sle64((int64_t) 0, min_res_107576);
            bool y_107585 = slt64(min_res_107576, n_92399);
            bool bounds_check_107586 = x_107584 && y_107585;
            bool index_certs_107587;
            
            if (!bounds_check_107586) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_107576,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107588;
            
            x_107588 = ((int64_t *) mem_101209.mem)[min_res_107576];
            
            int64_t abs_arg_107589 = sub64(x_107588, defunc_0_g_res_107139);
            int64_t abs_res_107590 = abs64(abs_arg_107589);
            bool cond_107591 = max_res_107574 == l_idx_107570;
            int64_t loopres_107592;
            int64_t loopres_107593;
            int64_t loopres_107594;
            
            if (cond_107591) {
                loopres_107592 = l_idx_107570;
                loopres_107593 = r_idx_107571;
                loopres_107594 = min_res_92421;
            } else {
                bool cond_107595 = slt64(abs_res_107583, abs_res_107590);
                bool cond_f_res_107596 = min_res_107576 == r_idx_107571;
                bool x_107597 = !cond_107595;
                bool y_107598 = cond_f_res_107596 && x_107597;
                bool cond_107599 = cond_107595 || y_107598;
                int64_t loopres_f_res_107600;
                
                if (cond_107599) {
                    loopres_f_res_107600 = max_res_107574;
                } else {
                    loopres_f_res_107600 = l_idx_107570;
                }
                
                int64_t loopres_f_res_107601;
                
                if (cond_107599) {
                    loopres_f_res_107601 = r_idx_107571;
                } else {
                    loopres_f_res_107601 = min_res_107576;
                }
                
                int64_t loopres_f_res_107602;
                
                if (cond_107599) {
                    int64_t loopres_f_res_t_res_107603 = add64((int64_t) 1,
                                                               span_107572);
                    
                    loopres_f_res_107602 = loopres_f_res_t_res_107603;
                } else {
                    int64_t loopres_f_res_f_res_107604 = add64((int64_t) 1,
                                                               span_107572);
                    
                    loopres_f_res_107602 = loopres_f_res_f_res_107604;
                }
                loopres_107592 = loopres_f_res_107600;
                loopres_107593 = loopres_f_res_107601;
                loopres_107594 = loopres_f_res_107602;
            }
            
            bool loop_cond_107605 = slt64(loopres_107594, min_res_92421);
            bool loop_while_tmp_107658 = loop_cond_107605;
            int64_t l_idx_tmp_107659 = loopres_107592;
            int64_t r_idx_tmp_107660 = loopres_107593;
            int64_t span_tmp_107661 = loopres_107594;
            
            loop_while_107569 = loop_while_tmp_107658;
            l_idx_107570 = l_idx_tmp_107659;
            r_idx_107571 = r_idx_tmp_107660;
            span_107572 = span_tmp_107661;
        }
        idx_107161 = loop_while_107569;
        idx_107162 = l_idx_107570;
        idx_107163 = r_idx_107571;
        idx_107164 = span_107572;
        
        int64_t min_res_107202 = smin64(min_arg_97923, idx_107162);
        int64_t max_res_107203 = smax64((int64_t) 0, min_res_107202);
        int64_t x_107204 = add64(min_res_97924, max_res_107203);
        int64_t r_107205 = sub64(x_107204, (int64_t) 1);
        bool x_107206 = sle64((int64_t) 0, r_107205);
        bool y_107207 = slt64(r_107205, n_92399);
        bool bounds_check_107208 = x_107206 && y_107207;
        bool index_certs_107209;
        
        if (!bounds_check_107208) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_107205,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_107210;
        
        x_107210 = ((int64_t *) mem_101206.mem)[r_107205];
        
        int64_t abs_arg_107211 = sub64(x_107210, min_res_107138);
        int64_t abs_res_107212 = abs64(abs_arg_107211);
        bool x_107213 = sle64((int64_t) 0, max_res_107203);
        bool y_107214 = slt64(max_res_107203, n_92399);
        bool bounds_check_107215 = x_107213 && y_107214;
        bool index_certs_107216;
        
        if (!bounds_check_107215) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_107203,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_107217;
        
        x_107217 = ((int64_t *) mem_101206.mem)[max_res_107203];
        
        int64_t abs_arg_107218 = sub64(x_107217, min_res_107138);
        int64_t abs_res_107219 = abs64(abs_arg_107218);
        int64_t max_res_107220 = smax64(abs_res_107212, abs_res_107219);
        double defunc_0_f_res_107221 = sitofp_i64_f64(max_res_107220);
        double defunc_1_f_res_107222 = max_res_97928 + defunc_0_f_res_107221;
        double defunc_2_reduce_res_107223;
        int64_t flat_tid_107606 = (int64_t) 0;
        int32_t num_tasks_107662;
        
        defunc_2_reduce_res_107223 = 0.0;
        
        struct futhark_mc_task_110141 futhark_mc_task_110141;
        
        futhark_mc_task_110141.ctx = ctx;
        futhark_mc_task_110141.free_last_res_97903 = last_res_97903;
        futhark_mc_task_110141.free_mem_101206 = mem_101206.mem;
        futhark_mc_task_110141.free_mem_101212 = mem_101212.mem;
        futhark_mc_task_110141.free_min_res_107138 = min_res_107138;
        futhark_mc_task_110141.free_max_res_107203 = max_res_107203;
        futhark_mc_task_110141.free_defunc_1_f_res_107222 =
            defunc_1_f_res_107222;
        futhark_mc_task_110141.retval_defunc_2_reduce_res_107223 =
            &defunc_2_reduce_res_107223;
        
        struct scheduler_segop futhark_mc_task_110141_task;
        
        futhark_mc_task_110141_task.args = &futhark_mc_task_110141;
        futhark_mc_task_110141_task.top_level_fn =
            futhark_mc_segred_task_110142;
        futhark_mc_task_110141_task.name = "futhark_mc_segred_task_110142";
        futhark_mc_task_110141_task.iterations = q_92401;
        futhark_mc_task_110141_task.task_time =
            &ctx->futhark_mc_segred_task_110142_total_time;
        futhark_mc_task_110141_task.task_iter =
            &ctx->futhark_mc_segred_task_110142_total_iter;
        futhark_mc_task_110141_task.sched = STATIC;
        futhark_mc_task_110141_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110142_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110141_task);
        
        if (futhark_mc_segred_task_110142_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double a0_107245 = 1.0 / defunc_2_reduce_res_107223;
        double defunc_2_reduce_res_107246;
        int64_t flat_tid_107627 = (int64_t) 0;
        int32_t num_tasks_107671;
        
        defunc_2_reduce_res_107246 = 0.0;
        
        struct futhark_mc_task_110146 futhark_mc_task_110146;
        
        futhark_mc_task_110146.ctx = ctx;
        futhark_mc_task_110146.free_last_res_97903 = last_res_97903;
        futhark_mc_task_110146.free_mem_101203 = mem_101203.mem;
        futhark_mc_task_110146.free_mem_101206 = mem_101206.mem;
        futhark_mc_task_110146.free_mem_101212 = mem_101212.mem;
        futhark_mc_task_110146.free_min_res_107138 = min_res_107138;
        futhark_mc_task_110146.free_max_res_107203 = max_res_107203;
        futhark_mc_task_110146.free_defunc_1_f_res_107222 =
            defunc_1_f_res_107222;
        futhark_mc_task_110146.free_a0_107245 = a0_107245;
        futhark_mc_task_110146.retval_defunc_2_reduce_res_107246 =
            &defunc_2_reduce_res_107246;
        
        struct scheduler_segop futhark_mc_task_110146_task;
        
        futhark_mc_task_110146_task.args = &futhark_mc_task_110146;
        futhark_mc_task_110146_task.top_level_fn =
            futhark_mc_segred_task_110147;
        futhark_mc_task_110146_task.name = "futhark_mc_segred_task_110147";
        futhark_mc_task_110146_task.iterations = q_92401;
        futhark_mc_task_110146_task.task_time =
            &ctx->futhark_mc_segred_task_110147_total_time;
        futhark_mc_task_110146_task.task_iter =
            &ctx->futhark_mc_segred_task_110147_total_iter;
        futhark_mc_task_110146_task.sched = STATIC;
        futhark_mc_task_110146_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110147_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110146_task);
        
        if (futhark_mc_segred_task_110147_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_101215.mem)[gtid_107136] = defunc_2_reduce_res_107246;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110140_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110140_end -
                 futhark_mc_segmap_parloop_110140_start;
        
        ctx->futhark_mc_segmap_parloop_110140_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110140_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110140_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110138(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107135 = tid;
    int num_tasks_107439 = info.nsubtasks;
    struct futhark_mc_task_110134 *futhark_mc_task_110134 =
                                  (struct futhark_mc_task_110134 *) args;
    struct futhark_context *ctx = futhark_mc_task_110134->ctx;
    uint64_t futhark_mc_segmap_nested_task_110138_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110138_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110134->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110134->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110134->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110134->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110134->free_i_92415;
    bool x_92416 = futhark_mc_task_110134->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110134->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110134->free_loop_cond_92426;
    int64_t last_res_97903 = futhark_mc_task_110134->free_last_res_97903;
    int64_t min_arg_97922 = futhark_mc_task_110134->free_min_arg_97922;
    int64_t min_arg_97923 = futhark_mc_task_110134->free_min_arg_97923;
    int64_t min_res_97924 = futhark_mc_task_110134->free_min_res_97924;
    double max_res_97928 = futhark_mc_task_110134->free_max_res_97928;
    struct memblock mem_101203 = {.desc ="mem_101203", .mem =
                                  futhark_mc_task_110134->free_mem_101203,
                                  .size =0, .references =NULL};
    struct memblock mem_101206 = {.desc ="mem_101206", .mem =
                                  futhark_mc_task_110134->free_mem_101206,
                                  .size =0, .references =NULL};
    struct memblock mem_101209 = {.desc ="mem_101209", .mem =
                                  futhark_mc_task_110134->free_mem_101209,
                                  .size =0, .references =NULL};
    struct memblock mem_101212 = {.desc ="mem_101212", .mem =
                                  futhark_mc_task_110134->free_mem_101212,
                                  .size =0, .references =NULL};
    struct memblock mem_101215 = {.desc ="mem_101215", .mem =
                                  futhark_mc_task_110134->free_mem_101215,
                                  .size =0, .references =NULL};
    int64_t iter_107550;
    struct futhark_mc_segmap_parloop_struct_110139
    futhark_mc_segmap_parloop_struct_110139;
    
    futhark_mc_segmap_parloop_struct_110139.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110139.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110139.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110139.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110139.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110139.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110139.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110139.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110139.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110139.free_last_res_97903 =
        last_res_97903;
    futhark_mc_segmap_parloop_struct_110139.free_min_arg_97922 = min_arg_97922;
    futhark_mc_segmap_parloop_struct_110139.free_min_arg_97923 = min_arg_97923;
    futhark_mc_segmap_parloop_struct_110139.free_min_res_97924 = min_res_97924;
    futhark_mc_segmap_parloop_struct_110139.free_max_res_97928 = max_res_97928;
    futhark_mc_segmap_parloop_struct_110139.free_mem_101203 = mem_101203.mem;
    futhark_mc_segmap_parloop_struct_110139.free_mem_101206 = mem_101206.mem;
    futhark_mc_segmap_parloop_struct_110139.free_mem_101209 = mem_101209.mem;
    futhark_mc_segmap_parloop_struct_110139.free_mem_101212 = mem_101212.mem;
    futhark_mc_segmap_parloop_struct_110139.free_mem_101215 = mem_101215.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110140_task;
    
    futhark_mc_segmap_parloop_110140_task.name =
        "futhark_mc_segmap_parloop_110140";
    futhark_mc_segmap_parloop_110140_task.fn = futhark_mc_segmap_parloop_110140;
    futhark_mc_segmap_parloop_110140_task.args =
        &futhark_mc_segmap_parloop_struct_110139;
    futhark_mc_segmap_parloop_110140_task.iterations = iterations;
    futhark_mc_segmap_parloop_110140_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110140_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110140_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110140_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110140_task);
    
    if (futhark_mc_segmap_parloop_110140_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110140_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110140_total_end -
                 futhark_mc_segmap_parloop_110140_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110140_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110140_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110140_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110138_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110138_end -
                 futhark_mc_segmap_nested_task_110138_start;
        
        ctx->futhark_mc_segmap_nested_task_110138_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110138_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110138_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_110108(void *args, int64_t start,
                                            int64_t end, int flat_tid_97890,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110107
    *futhark_mc_segmap_parloop_struct_110107 =
    (struct futhark_mc_segmap_parloop_struct_110107 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110107->ctx;
    uint64_t futhark_mc_segmap_parloop_110108_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110108_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110107->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110107->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110107->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110107->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110107->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110107->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110107->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110107->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110107->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110107->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110107->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101199 =
            futhark_mc_segmap_parloop_struct_110107->free_bytes_101199;
    int64_t bytes_101211 =
            futhark_mc_segmap_parloop_struct_110107->free_bytes_101211;
    int64_t bytes_101214 =
            futhark_mc_segmap_parloop_struct_110107->free_bytes_101214;
    struct memblock mem_101309 = {.desc ="mem_101309", .mem =
                                  futhark_mc_segmap_parloop_struct_110107->free_mem_101309,
                                  .size =0, .references =NULL};
    size_t mem_101200_cached_sizze_110109 = 0;
    unsigned char *mem_101200 = NULL;
    size_t mem_101203_cached_sizze_110110 = 0;
    unsigned char *mem_101203 = NULL;
    size_t mem_101206_cached_sizze_110111 = 0;
    unsigned char *mem_101206 = NULL;
    size_t mem_101209_cached_sizze_110112 = 0;
    unsigned char *mem_101209 = NULL;
    size_t mem_101212_cached_sizze_110113 = 0;
    unsigned char *mem_101212 = NULL;
    size_t mem_101215_cached_sizze_110114 = 0;
    unsigned char *mem_101215 = NULL;
    int64_t iterations = end - start;
    int64_t iter_107109 = start;
    
    if (mem_101200_cached_sizze_110109 < (size_t) bytes_101199) {
        mem_101200 = realloc(mem_101200, bytes_101199);
        mem_101200_cached_sizze_110109 = bytes_101199;
    }
    if (mem_101203_cached_sizze_110110 < (size_t) bytes_101199) {
        mem_101203 = realloc(mem_101203, bytes_101199);
        mem_101203_cached_sizze_110110 = bytes_101199;
    }
    if (mem_101206_cached_sizze_110111 < (size_t) bytes_101199) {
        mem_101206 = realloc(mem_101206, bytes_101199);
        mem_101206_cached_sizze_110111 = bytes_101199;
    }
    if (mem_101209_cached_sizze_110112 < (size_t) bytes_101199) {
        mem_101209 = realloc(mem_101209, bytes_101199);
        mem_101209_cached_sizze_110112 = bytes_101199;
    }
    if (mem_101212_cached_sizze_110113 < (size_t) bytes_101211) {
        mem_101212 = realloc(mem_101212, bytes_101211);
        mem_101212_cached_sizze_110113 = bytes_101211;
    }
    if (mem_101215_cached_sizze_110114 < (size_t) bytes_101214) {
        mem_101215 = realloc(mem_101215, bytes_101214);
        mem_101215_cached_sizze_110114 = bytes_101214;
    }
    for (; iter_107109 < end; iter_107109++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107407 = m_92398;
        int64_t gtid_97891 = iter_107109;
        int64_t remnant_107408 = iter_107109 - gtid_97891;
        int64_t flat_tid_107110 = (int64_t) 0;
        int32_t num_tasks_107409;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_110115 futhark_mc_task_110115;
        
        futhark_mc_task_110115.ctx = ctx;
        futhark_mc_task_110115.free_n_92399 = n_92399;
        futhark_mc_task_110115.free_gtid_97891 = gtid_97891;
        futhark_mc_task_110115.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110115.free_mem_101200 = mem_101200;
        
        struct scheduler_segop futhark_mc_task_110115_task;
        
        futhark_mc_task_110115_task.args = &futhark_mc_task_110115;
        futhark_mc_task_110115_task.top_level_fn =
            futhark_mc_segscan_task_110116;
        futhark_mc_task_110115_task.name = "futhark_mc_segscan_task_110116";
        futhark_mc_task_110115_task.iterations = n_92399;
        futhark_mc_task_110115_task.task_time =
            &ctx->futhark_mc_segscan_task_110116_total_time;
        futhark_mc_task_110115_task.task_iter =
            &ctx->futhark_mc_segscan_task_110116_total_iter;
        futhark_mc_task_110115_task.sched = STATIC;
        futhark_mc_task_110115_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_110116_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110115_task);
        
        if (futhark_mc_segscan_task_110116_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_97903;
        
        last_res_97903 = ((int64_t *) mem_101200)[i_92415];
        for (int64_t i_107423 = 0; i_107423 < n_92399; i_107423++) {
            ((double *) mem_101203)[i_107423] = 0.0;
        }
        for (int64_t i_107424 = 0; i_107424 < n_92399; i_107424++) {
            ((int64_t *) mem_101206)[i_107424] = (int64_t) -1;
        }
        
        int64_t flat_tid_107119 = (int64_t) 0;
        int32_t num_tasks_107425;
        struct futhark_mc_task_110122 futhark_mc_task_110122;
        
        futhark_mc_task_110122.ctx = ctx;
        futhark_mc_task_110122.free_n_92399 = n_92399;
        futhark_mc_task_110122.free_gtid_97891 = gtid_97891;
        futhark_mc_task_110122.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110122.free_mem_101200 = mem_101200;
        futhark_mc_task_110122.free_mem_101203 = mem_101203;
        futhark_mc_task_110122.free_mem_101206 = mem_101206;
        
        struct scheduler_segop futhark_mc_task_110122_task;
        
        futhark_mc_task_110122_task.args = &futhark_mc_task_110122;
        futhark_mc_task_110122_task.top_level_fn =
            futhark_mc_segmap_task_110123;
        futhark_mc_task_110122_task.name = "futhark_mc_segmap_task_110123";
        futhark_mc_task_110122_task.iterations = n_92399;
        futhark_mc_task_110122_task.task_time =
            &ctx->futhark_mc_segmap_task_110123_total_time;
        futhark_mc_task_110122_task.task_iter =
            &ctx->futhark_mc_segmap_task_110123_total_iter;
        futhark_mc_task_110122_task.sched = STATIC;
        futhark_mc_task_110122_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110123_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110122_task);
        
        if (futhark_mc_segmap_task_110123_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_107127 = (int64_t) 0;
        int32_t num_tasks_107431;
        struct futhark_mc_task_110126 futhark_mc_task_110126;
        
        futhark_mc_task_110126.ctx = ctx;
        futhark_mc_task_110126.free_n_92399 = n_92399;
        futhark_mc_task_110126.free_mem_101206 = mem_101206;
        futhark_mc_task_110126.free_mem_101209 = mem_101209;
        
        struct scheduler_segop futhark_mc_task_110126_task;
        
        futhark_mc_task_110126_task.args = &futhark_mc_task_110126;
        futhark_mc_task_110126_task.top_level_fn =
            futhark_mc_segmap_task_110127;
        futhark_mc_task_110126_task.name = "futhark_mc_segmap_task_110127";
        futhark_mc_task_110126_task.iterations = n_92399;
        futhark_mc_task_110126_task.task_time =
            &ctx->futhark_mc_segmap_task_110127_total_time;
        futhark_mc_task_110126_task.task_iter =
            &ctx->futhark_mc_segmap_task_110127_total_iter;
        futhark_mc_task_110126_task.sched = STATIC;
        futhark_mc_task_110126_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110127_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110126_task);
        
        if (futhark_mc_segmap_task_110127_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_97922 = sub64(last_res_97903, (int64_t) 1);
        int64_t min_arg_97923 = sub64(last_res_97903, min_res_92421);
        int64_t min_res_97924 = smin64(q_92401, last_res_97903);
        double i64_res_97925 = sitofp_i64_f64(last_res_97903);
        double x_97926 = i64_res_92427 - i64_res_97925;
        double max_arg_97927 = x_97926 / 2.0;
        double max_res_97928 = fmax64(0.0, max_arg_97927);
        int64_t flat_tid_107131 = (int64_t) 0;
        int32_t num_tasks_107435;
        struct futhark_mc_task_110130 futhark_mc_task_110130;
        
        futhark_mc_task_110130.ctx = ctx;
        futhark_mc_task_110130.free_q_92401 = q_92401;
        futhark_mc_task_110130.free_last_res_97903 = last_res_97903;
        futhark_mc_task_110130.free_mem_101212 = mem_101212;
        
        struct scheduler_segop futhark_mc_task_110130_task;
        
        futhark_mc_task_110130_task.args = &futhark_mc_task_110130;
        futhark_mc_task_110130_task.top_level_fn =
            futhark_mc_segmap_task_110131;
        futhark_mc_task_110130_task.name = "futhark_mc_segmap_task_110131";
        futhark_mc_task_110130_task.iterations = q_92401;
        futhark_mc_task_110130_task.task_time =
            &ctx->futhark_mc_segmap_task_110131_total_time;
        futhark_mc_task_110130_task.task_iter =
            &ctx->futhark_mc_segmap_task_110131_total_iter;
        futhark_mc_task_110130_task.sched = STATIC;
        futhark_mc_task_110130_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110131_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110130_task);
        
        if (futhark_mc_segmap_task_110131_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_107273 = (int64_t) 0;
        int32_t num_tasks_107439;
        int64_t flat_tid_107135 = (int64_t) 0;
        struct futhark_mc_task_110134 futhark_mc_task_110134;
        
        futhark_mc_task_110134.ctx = ctx;
        futhark_mc_task_110134.free_n_92399 = n_92399;
        futhark_mc_task_110134.free_q_92401 = q_92401;
        futhark_mc_task_110134.free_jump_92403 = jump_92403;
        futhark_mc_task_110134.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110134.free_i_92415 = i_92415;
        futhark_mc_task_110134.free_x_92416 = x_92416;
        futhark_mc_task_110134.free_min_res_92421 = min_res_92421;
        futhark_mc_task_110134.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_110134.free_last_res_97903 = last_res_97903;
        futhark_mc_task_110134.free_min_arg_97922 = min_arg_97922;
        futhark_mc_task_110134.free_min_arg_97923 = min_arg_97923;
        futhark_mc_task_110134.free_min_res_97924 = min_res_97924;
        futhark_mc_task_110134.free_max_res_97928 = max_res_97928;
        futhark_mc_task_110134.free_mem_101203 = mem_101203;
        futhark_mc_task_110134.free_mem_101206 = mem_101206;
        futhark_mc_task_110134.free_mem_101209 = mem_101209;
        futhark_mc_task_110134.free_mem_101212 = mem_101212;
        futhark_mc_task_110134.free_mem_101215 = mem_101215;
        
        struct scheduler_segop futhark_mc_task_110134_task;
        
        futhark_mc_task_110134_task.args = &futhark_mc_task_110134;
        futhark_mc_task_110134_task.top_level_fn =
            futhark_mc_segmap_task_110135;
        futhark_mc_task_110134_task.name = "futhark_mc_segmap_task_110135";
        futhark_mc_task_110134_task.iterations = n_m_92409;
        futhark_mc_task_110134_task.task_time =
            &ctx->futhark_mc_segmap_task_110135_total_time;
        futhark_mc_task_110134_task.task_iter =
            &ctx->futhark_mc_segmap_task_110135_total_iter;
        futhark_mc_task_110134_task.sched = DYNAMIC;
        futhark_mc_task_110134_task.nested_fn =
            futhark_mc_segmap_nested_task_110138;
        
        int futhark_mc_segmap_task_110135_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110134_task);
        
        if (futhark_mc_segmap_task_110135_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101309.mem + gtid_97891 * n_m_92409 * (int64_t) 8,
                    mem_101215 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101200);
    free(mem_101203);
    free(mem_101206);
    free(mem_101209);
    free(mem_101212);
    free(mem_101215);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110108_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110108_end -
                 futhark_mc_segmap_parloop_110108_start;
        
        ctx->futhark_mc_segmap_parloop_110108_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110108_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110108_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110106(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_97890 = tid;
    int num_tasks_106921 = info.nsubtasks;
    struct futhark_mc_task_110096 *futhark_mc_task_110096 =
                                  (struct futhark_mc_task_110096 *) args;
    struct futhark_context *ctx = futhark_mc_task_110096->ctx;
    uint64_t futhark_mc_segmap_nested_task_110106_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110106_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110096->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110096->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110096->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110096->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110096->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110096->free_i_92415;
    bool x_92416 = futhark_mc_task_110096->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110096->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110096->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110096->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110096->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101199 = futhark_mc_task_110096->free_bytes_101199;
    int64_t bytes_101211 = futhark_mc_task_110096->free_bytes_101211;
    int64_t bytes_101214 = futhark_mc_task_110096->free_bytes_101214;
    struct memblock mem_101309 = {.desc ="mem_101309", .mem =
                                  futhark_mc_task_110096->free_mem_101309,
                                  .size =0, .references =NULL};
    int64_t iter_107109;
    struct futhark_mc_segmap_parloop_struct_110107
    futhark_mc_segmap_parloop_struct_110107;
    
    futhark_mc_segmap_parloop_struct_110107.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110107.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110107.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110107.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110107.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110107.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110107.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110107.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110107.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110107.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110107.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110107.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110107.free_bytes_101199 = bytes_101199;
    futhark_mc_segmap_parloop_struct_110107.free_bytes_101211 = bytes_101211;
    futhark_mc_segmap_parloop_struct_110107.free_bytes_101214 = bytes_101214;
    futhark_mc_segmap_parloop_struct_110107.free_mem_101309 = mem_101309.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110108_task;
    
    futhark_mc_segmap_parloop_110108_task.name =
        "futhark_mc_segmap_parloop_110108";
    futhark_mc_segmap_parloop_110108_task.fn = futhark_mc_segmap_parloop_110108;
    futhark_mc_segmap_parloop_110108_task.args =
        &futhark_mc_segmap_parloop_struct_110107;
    futhark_mc_segmap_parloop_110108_task.iterations = iterations;
    futhark_mc_segmap_parloop_110108_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110108_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110108_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110108_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110108_task);
    
    if (futhark_mc_segmap_parloop_110108_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110108_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110108_total_end -
                 futhark_mc_segmap_parloop_110108_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110108_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110108_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110108_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110106_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110106_end -
                 futhark_mc_segmap_nested_task_110106_start;
        
        ctx->futhark_mc_segmap_nested_task_110106_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110106_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110106_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110151 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101311;
    int64_t free_bytes_101323;
    int64_t free_bytes_101326;
    unsigned char *free_mem_101439;
    unsigned char *free_mem_101443;
};
struct futhark_mc_segmap_parloop_struct_110153 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101311;
    int64_t free_bytes_101323;
    int64_t free_bytes_101326;
    unsigned char *free_mem_101439;
    unsigned char *free_mem_101443;
};
static int futhark_mc_segmap_parloop_110154(void *args, int64_t start,
                                            int64_t end, int flat_tid_98214,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110153
    *futhark_mc_segmap_parloop_struct_110153 =
    (struct futhark_mc_segmap_parloop_struct_110153 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110153->ctx;
    uint64_t futhark_mc_segmap_parloop_110154_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110154_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110153->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110153->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110153->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110153->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110153->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110153->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110153->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110153->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110153->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110153->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110153->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101311 =
            futhark_mc_segmap_parloop_struct_110153->free_bytes_101311;
    int64_t bytes_101323 =
            futhark_mc_segmap_parloop_struct_110153->free_bytes_101323;
    int64_t bytes_101326 =
            futhark_mc_segmap_parloop_struct_110153->free_bytes_101326;
    struct memblock mem_101439 = {.desc ="mem_101439", .mem =
                                  futhark_mc_segmap_parloop_struct_110153->free_mem_101439,
                                  .size =0, .references =NULL};
    struct memblock mem_101443 = {.desc ="mem_101443", .mem =
                                  futhark_mc_segmap_parloop_struct_110153->free_mem_101443,
                                  .size =0, .references =NULL};
    size_t mem_101333_cached_sizze_110155 = 0;
    unsigned char *mem_101333 = NULL;
    size_t mem_101348_cached_sizze_110156 = 0;
    unsigned char *mem_101348 = NULL;
    size_t mem_101351_cached_sizze_110157 = 0;
    unsigned char *mem_101351 = NULL;
    size_t mem_101378_cached_sizze_110158 = 0;
    unsigned char *mem_101378 = NULL;
    size_t mem_101393_cached_sizze_110159 = 0;
    unsigned char *mem_101393 = NULL;
    size_t mem_101408_cached_sizze_110160 = 0;
    unsigned char *mem_101408 = NULL;
    size_t mem_101411_cached_sizze_110161 = 0;
    unsigned char *mem_101411 = NULL;
    int64_t iterations = end - start;
    int64_t iter_107681 = start;
    
    if (mem_101333_cached_sizze_110155 < (size_t) bytes_101311) {
        mem_101333 = realloc(mem_101333, bytes_101311);
        mem_101333_cached_sizze_110155 = bytes_101311;
    }
    if (mem_101348_cached_sizze_110156 < (size_t) bytes_101311) {
        mem_101348 = realloc(mem_101348, bytes_101311);
        mem_101348_cached_sizze_110156 = bytes_101311;
    }
    if (mem_101351_cached_sizze_110157 < (size_t) bytes_101311) {
        mem_101351 = realloc(mem_101351, bytes_101311);
        mem_101351_cached_sizze_110157 = bytes_101311;
    }
    if (mem_101378_cached_sizze_110158 < (size_t) bytes_101311) {
        mem_101378 = realloc(mem_101378, bytes_101311);
        mem_101378_cached_sizze_110158 = bytes_101311;
    }
    if (mem_101393_cached_sizze_110159 < (size_t) bytes_101323) {
        mem_101393 = realloc(mem_101393, bytes_101323);
        mem_101393_cached_sizze_110159 = bytes_101323;
    }
    if (mem_101408_cached_sizze_110160 < (size_t) bytes_101326) {
        mem_101408 = realloc(mem_101408, bytes_101326);
        mem_101408_cached_sizze_110160 = bytes_101326;
    }
    if (mem_101411_cached_sizze_110161 < (size_t) bytes_101326) {
        mem_101411 = realloc(mem_101411, bytes_101326);
        mem_101411_cached_sizze_110161 = bytes_101326;
    }
    for (; iter_107681 < end; iter_107681++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_107875 = m_92398;
        int64_t gtid_98215 = iter_107681;
        int64_t remnant_107876 = iter_107681 - gtid_98215;
        int64_t discard_99958;
        int64_t scanacc_107683 = (int64_t) 0;
        
        for (int64_t i_107682 = 0; i_107682 < n_92399; i_107682++) {
            double x_107685;
            
            x_107685 = ((double *) Y_mem_100186.mem)[gtid_98215 * n_92399 +
                                                     i_107682];
            
            bool isnan_res_107686;
            
            isnan_res_107686 = futrts_isnan64(x_107685);
            
            bool defunc_0_p_res_107687 = !isnan_res_107686;
            int64_t defunc_0_f_res_107688 =
                    btoi_bool_i64(defunc_0_p_res_107687);
            int64_t defunc_1_op_res_107689 = add64(defunc_0_f_res_107688,
                                                   scanacc_107683);
            
            ((int64_t *) mem_101333)[i_107682] = defunc_1_op_res_107689;
            
            int64_t scanacc_tmp_107877 = defunc_1_op_res_107689;
            
            scanacc_107683 = scanacc_tmp_107877;
        }
        discard_99958 = scanacc_107683;
        
        int64_t last_res_93890;
        
        last_res_93890 = ((int64_t *) mem_101333)[i_92415];
        for (int64_t i_107879 = 0; i_107879 < n_92399; i_107879++) {
            ((double *) mem_101348)[i_107879] = 0.0;
        }
        for (int64_t i_107880 = 0; i_107880 < n_92399; i_107880++) {
            ((int64_t *) mem_101351)[i_107880] = (int64_t) -1;
        }
        for (int64_t write_iter_107691 = 0; write_iter_107691 < n_92399;
             write_iter_107691++) {
            double write_iv_107694;
            
            write_iv_107694 = ((double *) Y_mem_100186.mem)[gtid_98215 *
                                                            n_92399 +
                                                            write_iter_107691];
            
            bool isnan_res_107695;
            
            isnan_res_107695 = futrts_isnan64(write_iv_107694);
            
            bool defunc_0_p_res_107696 = !isnan_res_107695;
            int64_t defunc_1_f_res_107697;
            
            if (defunc_0_p_res_107696) {
                int64_t write_iv_107698;
                
                write_iv_107698 = ((int64_t *) mem_101333)[write_iter_107691];
                
                int64_t defunc_1_f_res_t_res_107699 = sub64(write_iv_107698,
                                                            (int64_t) 1);
                
                defunc_1_f_res_107697 = defunc_1_f_res_t_res_107699;
            } else {
                defunc_1_f_res_107697 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_107697) &&
                slt64(defunc_1_f_res_107697, n_92399)) {
                ((int64_t *) mem_101351)[defunc_1_f_res_107697] =
                    write_iter_107691;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_107697) &&
                slt64(defunc_1_f_res_107697, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_101348 + defunc_1_f_res_107697 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_98215 * n_92399 +
                                                write_iter_107691) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_107703 = 0; i_107703 < n_92399; i_107703++) {
            int64_t x_107705;
            
            x_107705 = ((int64_t *) mem_101351)[i_107703];
            
            int64_t defunc_0_f_res_107706 = add64((int64_t) 1, x_107705);
            
            ((int64_t *) mem_101378)[i_107703] = defunc_0_f_res_107706;
        }
        
        int64_t min_arg_93905 = sub64(last_res_93890, (int64_t) 1);
        int64_t min_arg_93906 = sub64(last_res_93890, min_res_92421);
        int64_t min_res_93907 = smin64(q_92401, last_res_93890);
        double i64_res_93908 = sitofp_i64_f64(last_res_93890);
        double x_93909 = i64_res_92427 - i64_res_93908;
        double max_arg_93910 = x_93909 / 2.0;
        double max_res_93911 = fmax64(0.0, max_arg_93910);
        
        for (int64_t i_107708 = 0; i_107708 < q_92401; i_107708++) {
            bool cond_107710 = sle64(last_res_93890, i_107708);
            double defunc_0_f_res_107711;
            
            if (cond_107710) {
                defunc_0_f_res_107711 = 0.0;
            } else {
                defunc_0_f_res_107711 = 1.0;
            }
            ((double *) mem_101393)[i_107708] = defunc_0_f_res_107711;
        }
        for (int64_t i_107713 = 0; i_107713 < n_m_92409; i_107713++) {
            int64_t min_arg_107716 = mul64(jump_92403, i_107713);
            int64_t min_res_107717 = smin64(i_92415, min_arg_107716);
            int64_t defunc_0_g_res_107718 = add64((int64_t) 1, min_res_107717);
            bool init_idx_107719;
            int64_t init_idx_107720;
            int64_t init_idx_107721;
            bool loop_while_107722;
            int64_t low_107723;
            int64_t high_107724;
            
            loop_while_107722 = x_92416;
            low_107723 = (int64_t) 0;
            high_107724 = i_92415;
            while (loop_while_107722) {
                int64_t x_107725 = add64(low_107723, high_107724);
                int64_t mid_107726 = sdiv64(x_107725, (int64_t) 2);
                bool x_107727 = sle64((int64_t) 0, mid_107726);
                bool y_107728 = slt64(mid_107726, n_92399);
                bool bounds_check_107729 = x_107727 && y_107728;
                bool index_certs_107730;
                
                if (!bounds_check_107729) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_107726,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_107731;
                
                mid_id_107731 = ((int64_t *) mem_101378)[mid_107726];
                
                bool cond_107732 = slt64(mid_id_107731, (int64_t) 0);
                int64_t mid_idx_107733;
                
                if (cond_107732) {
                    mid_idx_107733 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_107733 = mid_id_107731;
                }
                
                bool cond_107734 = sle64(defunc_0_g_res_107718, mid_idx_107733);
                int64_t loopres_107735;
                int64_t loopres_107736;
                
                if (cond_107734) {
                    int64_t loopres_t_res_107737 = sub64(mid_107726,
                                                         (int64_t) 1);
                    
                    loopres_107735 = low_107723;
                    loopres_107736 = loopres_t_res_107737;
                } else {
                    int64_t loopres_f_res_107738 = add64((int64_t) 1,
                                                         mid_107726);
                    
                    loopres_107735 = loopres_f_res_107738;
                    loopres_107736 = high_107724;
                }
                
                bool loop_cond_107739 = sle64(loopres_107735, loopres_107736);
                bool loop_while_tmp_107887 = loop_cond_107739;
                int64_t low_tmp_107888 = loopres_107735;
                int64_t high_tmp_107889 = loopres_107736;
                
                loop_while_107722 = loop_while_tmp_107887;
                low_107723 = low_tmp_107888;
                high_107724 = high_tmp_107889;
            }
            init_idx_107719 = loop_while_107722;
            init_idx_107720 = low_107723;
            init_idx_107721 = high_107724;
            
            bool idx_107740;
            int64_t idx_107741;
            int64_t idx_107742;
            int64_t idx_107743;
            bool loop_while_107744;
            int64_t l_idx_107745;
            int64_t r_idx_107746;
            int64_t span_107747;
            
            loop_while_107744 = loop_cond_92426;
            l_idx_107745 = init_idx_107720;
            r_idx_107746 = init_idx_107720;
            span_107747 = (int64_t) 1;
            while (loop_while_107744) {
                int64_t max_arg_107748 = sub64(l_idx_107745, (int64_t) 1);
                int64_t max_res_107749 = smax64((int64_t) 0, max_arg_107748);
                int64_t min_arg_107750 = add64((int64_t) 1, r_idx_107746);
                int64_t min_res_107751 = smin64(min_arg_93905, min_arg_107750);
                bool x_107752 = sle64((int64_t) 0, max_res_107749);
                bool y_107753 = slt64(max_res_107749, n_92399);
                bool bounds_check_107754 = x_107752 && y_107753;
                bool index_certs_107755;
                
                if (!bounds_check_107754) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_107749,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_107756;
                
                x_107756 = ((int64_t *) mem_101378)[max_res_107749];
                
                int64_t abs_arg_107757 = sub64(x_107756, defunc_0_g_res_107718);
                int64_t abs_res_107758 = abs64(abs_arg_107757);
                bool x_107759 = sle64((int64_t) 0, min_res_107751);
                bool y_107760 = slt64(min_res_107751, n_92399);
                bool bounds_check_107761 = x_107759 && y_107760;
                bool index_certs_107762;
                
                if (!bounds_check_107761) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_107751,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_107763;
                
                x_107763 = ((int64_t *) mem_101378)[min_res_107751];
                
                int64_t abs_arg_107764 = sub64(x_107763, defunc_0_g_res_107718);
                int64_t abs_res_107765 = abs64(abs_arg_107764);
                bool cond_107766 = max_res_107749 == l_idx_107745;
                int64_t loopres_107767;
                int64_t loopres_107768;
                int64_t loopres_107769;
                
                if (cond_107766) {
                    loopres_107767 = l_idx_107745;
                    loopres_107768 = r_idx_107746;
                    loopres_107769 = min_res_92421;
                } else {
                    bool cond_107770 = slt64(abs_res_107758, abs_res_107765);
                    bool cond_f_res_107771 = min_res_107751 == r_idx_107746;
                    bool x_107772 = !cond_107770;
                    bool y_107773 = cond_f_res_107771 && x_107772;
                    bool cond_107774 = cond_107770 || y_107773;
                    int64_t loopres_f_res_107775;
                    
                    if (cond_107774) {
                        loopres_f_res_107775 = max_res_107749;
                    } else {
                        loopres_f_res_107775 = l_idx_107745;
                    }
                    
                    int64_t loopres_f_res_107776;
                    
                    if (cond_107774) {
                        loopres_f_res_107776 = r_idx_107746;
                    } else {
                        loopres_f_res_107776 = min_res_107751;
                    }
                    
                    int64_t loopres_f_res_107777;
                    
                    if (cond_107774) {
                        int64_t loopres_f_res_t_res_107778 = add64((int64_t) 1,
                                                                   span_107747);
                        
                        loopres_f_res_107777 = loopres_f_res_t_res_107778;
                    } else {
                        int64_t loopres_f_res_f_res_107779 = add64((int64_t) 1,
                                                                   span_107747);
                        
                        loopres_f_res_107777 = loopres_f_res_f_res_107779;
                    }
                    loopres_107767 = loopres_f_res_107775;
                    loopres_107768 = loopres_f_res_107776;
                    loopres_107769 = loopres_f_res_107777;
                }
                
                bool loop_cond_107780 = slt64(loopres_107769, min_res_92421);
                bool loop_while_tmp_107890 = loop_cond_107780;
                int64_t l_idx_tmp_107891 = loopres_107767;
                int64_t r_idx_tmp_107892 = loopres_107768;
                int64_t span_tmp_107893 = loopres_107769;
                
                loop_while_107744 = loop_while_tmp_107890;
                l_idx_107745 = l_idx_tmp_107891;
                r_idx_107746 = r_idx_tmp_107892;
                span_107747 = span_tmp_107893;
            }
            idx_107740 = loop_while_107744;
            idx_107741 = l_idx_107745;
            idx_107742 = r_idx_107746;
            idx_107743 = span_107747;
            
            int64_t min_res_107781 = smin64(min_arg_93906, idx_107741);
            int64_t max_res_107782 = smax64((int64_t) 0, min_res_107781);
            int64_t x_107783 = add64(min_res_93907, max_res_107782);
            int64_t r_107784 = sub64(x_107783, (int64_t) 1);
            bool x_107785 = sle64((int64_t) 0, r_107784);
            bool y_107786 = slt64(r_107784, n_92399);
            bool bounds_check_107787 = x_107785 && y_107786;
            bool index_certs_107788;
            
            if (!bounds_check_107787) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_107784,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107789;
            
            x_107789 = ((int64_t *) mem_101351)[r_107784];
            
            int64_t abs_arg_107790 = sub64(x_107789, min_res_107717);
            int64_t abs_res_107791 = abs64(abs_arg_107790);
            bool x_107792 = sle64((int64_t) 0, max_res_107782);
            bool y_107793 = slt64(max_res_107782, n_92399);
            bool bounds_check_107794 = x_107792 && y_107793;
            bool index_certs_107795;
            
            if (!bounds_check_107794) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_107782,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_107796;
            
            x_107796 = ((int64_t *) mem_101351)[max_res_107782];
            
            int64_t abs_arg_107797 = sub64(x_107796, min_res_107717);
            int64_t abs_res_107798 = abs64(abs_arg_107797);
            int64_t max_res_107799 = smax64(abs_res_107791, abs_res_107798);
            double defunc_0_f_res_107800 = sitofp_i64_f64(max_res_107799);
            double defunc_1_f_res_107801 = max_res_93911 +
                   defunc_0_f_res_107800;
            double defunc_2_reduce_res_107802;
            double defunc_2_reduce_res_107803;
            double defunc_2_reduce_res_107804;
            double redout_107806;
            double redout_107807;
            double redout_107808;
            
            redout_107806 = 0.0;
            redout_107807 = 0.0;
            redout_107808 = 0.0;
            for (int64_t i_107805 = 0; i_107805 < q_92401; i_107805++) {
                double x_107809;
                
                x_107809 = ((double *) mem_101393)[i_107805];
                
                bool cond_107810 = sle64(last_res_93890, i_107805);
                int64_t defunc_0_f_res_107811;
                
                if (cond_107810) {
                    defunc_0_f_res_107811 = (int64_t) 0;
                } else {
                    int64_t i_107812 = add64(max_res_107782, i_107805);
                    int64_t defunc_0_add_arg_107813;
                    
                    defunc_0_add_arg_107813 =
                        ((int64_t *) mem_101351)[i_107812];
                    
                    int64_t defunc_1_add_res_107814 = add64((int64_t) 1,
                                                            defunc_0_add_arg_107813);
                    
                    defunc_0_f_res_107811 = defunc_1_add_res_107814;
                }
                
                int64_t binop_p_107815 = sub64(defunc_0_f_res_107811,
                                               min_res_107717);
                double defunc_0_f_res_107816 = sitofp_i64_f64(binop_p_107815);
                double abs_res_107817 = fabs(defunc_0_f_res_107816);
                double tmp1_107818 = abs_res_107817 / defunc_1_f_res_107801;
                double x_107819 = tmp1_107818 * tmp1_107818;
                double y_107820 = tmp1_107818 * x_107819;
                double tmp2_107821 = 1.0 - y_107820;
                double x_107822 = tmp2_107821 * tmp2_107821;
                double tmp3_107823 = tmp2_107821 * x_107822;
                double w_j_107824 = x_107809 * tmp3_107823;
                double xw_j_107825 = defunc_0_f_res_107816 * w_j_107824;
                double x2w_j_107826 = defunc_0_f_res_107816 * xw_j_107825;
                double defunc_1_op_res_107827 = w_j_107824 + redout_107806;
                double defunc_1_op_res_107828 = xw_j_107825 + redout_107807;
                double defunc_1_op_res_107829 = x2w_j_107826 + redout_107808;
                double redout_tmp_107894 = defunc_1_op_res_107827;
                double redout_tmp_107895 = defunc_1_op_res_107828;
                double redout_tmp_107896 = defunc_1_op_res_107829;
                
                redout_107806 = redout_tmp_107894;
                redout_107807 = redout_tmp_107895;
                redout_107808 = redout_tmp_107896;
            }
            defunc_2_reduce_res_107802 = redout_107806;
            defunc_2_reduce_res_107803 = redout_107807;
            defunc_2_reduce_res_107804 = redout_107808;
            
            double x_107830 = defunc_2_reduce_res_107802 *
                   defunc_2_reduce_res_107804;
            double y_107831 = defunc_2_reduce_res_107803 *
                   defunc_2_reduce_res_107803;
            double y_107832 = x_107830 - y_107831;
            double det1_107833 = 1.0 / y_107832;
            double a11_107834 = defunc_2_reduce_res_107804 * det1_107833;
            double x_107835 = 0.0 - defunc_2_reduce_res_107803;
            double b11_107836 = det1_107833 * x_107835;
            double c11_107837 = defunc_2_reduce_res_107802 * det1_107833;
            double defunc_2_reduce_res_107838;
            double defunc_2_reduce_res_107839;
            double redout_107841;
            double redout_107842;
            
            redout_107841 = 0.0;
            redout_107842 = 0.0;
            for (int64_t i_107840 = 0; i_107840 < q_92401; i_107840++) {
                double x_107843;
                
                x_107843 = ((double *) mem_101393)[i_107840];
                
                bool cond_107844 = sle64(last_res_93890, i_107840);
                int64_t defunc_0_f_res_107845;
                
                if (cond_107844) {
                    defunc_0_f_res_107845 = (int64_t) 0;
                } else {
                    int64_t i_107846 = add64(max_res_107782, i_107840);
                    int64_t defunc_0_add_arg_107847;
                    
                    defunc_0_add_arg_107847 =
                        ((int64_t *) mem_101351)[i_107846];
                    
                    int64_t defunc_1_add_res_107848 = add64((int64_t) 1,
                                                            defunc_0_add_arg_107847);
                    
                    defunc_0_f_res_107845 = defunc_1_add_res_107848;
                }
                
                int64_t binop_p_107849 = sub64(defunc_0_f_res_107845,
                                               min_res_107717);
                double defunc_0_f_res_107850 = sitofp_i64_f64(binop_p_107849);
                double abs_res_107851 = fabs(defunc_0_f_res_107850);
                double tmp1_107852 = abs_res_107851 / defunc_1_f_res_107801;
                double x_107853 = tmp1_107852 * tmp1_107852;
                double y_107854 = tmp1_107852 * x_107853;
                double tmp2_107855 = 1.0 - y_107854;
                double x_107856 = tmp2_107855 * tmp2_107855;
                double tmp3_107857 = tmp2_107855 * x_107856;
                double tmp4_107858 = x_107843 * tmp3_107857;
                double defunc_1_f_res_107859 = defunc_0_f_res_107850 *
                       tmp4_107858;
                double defunc_0_f_res_107860;
                
                if (cond_107844) {
                    defunc_0_f_res_107860 = 0.0;
                } else {
                    int64_t i_107861 = add64(max_res_107782, i_107840);
                    double defunc_0_add_arg_107862;
                    
                    defunc_0_add_arg_107862 = ((double *) mem_101348)[i_107861];
                    defunc_0_f_res_107860 = defunc_0_add_arg_107862;
                }
                
                double x_107863 = a11_107834 * tmp4_107858;
                double y_107864 = b11_107836 * defunc_1_f_res_107859;
                double x_107865 = x_107863 + y_107864;
                double defunc_9_fit_fun_res_107866 = defunc_0_f_res_107860 *
                       x_107865;
                double x_107867 = b11_107836 * tmp4_107858;
                double y_107868 = c11_107837 * defunc_1_f_res_107859;
                double x_107869 = x_107867 + y_107868;
                double defunc_9_slope_fun_res_107870 = defunc_0_f_res_107860 *
                       x_107869;
                double defunc_1_op_res_107871 = defunc_9_fit_fun_res_107866 +
                       redout_107841;
                double defunc_1_op_res_107872 = defunc_9_slope_fun_res_107870 +
                       redout_107842;
                double redout_tmp_107897 = defunc_1_op_res_107871;
                double redout_tmp_107898 = defunc_1_op_res_107872;
                
                redout_107841 = redout_tmp_107897;
                redout_107842 = redout_tmp_107898;
            }
            defunc_2_reduce_res_107838 = redout_107841;
            defunc_2_reduce_res_107839 = redout_107842;
            ((double *) mem_101408)[i_107713] = defunc_2_reduce_res_107838;
            ((double *) mem_101411)[i_107713] = defunc_2_reduce_res_107839;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101439.mem + gtid_98215 * n_m_92409 * (int64_t) 8,
                    mem_101408 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101443.mem + gtid_98215 * n_m_92409 * (int64_t) 8,
                    mem_101411 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101333);
    free(mem_101348);
    free(mem_101351);
    free(mem_101378);
    free(mem_101393);
    free(mem_101408);
    free(mem_101411);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110154_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110154_end -
                 futhark_mc_segmap_parloop_110154_start;
        
        ctx->futhark_mc_segmap_parloop_110154_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110154_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110154_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110152(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_98214 = tid;
    int num_tasks_107680 = info.nsubtasks;
    struct futhark_mc_task_110151 *futhark_mc_task_110151 =
                                  (struct futhark_mc_task_110151 *) args;
    struct futhark_context *ctx = futhark_mc_task_110151->ctx;
    uint64_t futhark_mc_segmap_task_110152_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110152_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110151->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110151->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110151->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110151->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110151->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110151->free_i_92415;
    bool x_92416 = futhark_mc_task_110151->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110151->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110151->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110151->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110151->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101311 = futhark_mc_task_110151->free_bytes_101311;
    int64_t bytes_101323 = futhark_mc_task_110151->free_bytes_101323;
    int64_t bytes_101326 = futhark_mc_task_110151->free_bytes_101326;
    struct memblock mem_101439 = {.desc ="mem_101439", .mem =
                                  futhark_mc_task_110151->free_mem_101439,
                                  .size =0, .references =NULL};
    struct memblock mem_101443 = {.desc ="mem_101443", .mem =
                                  futhark_mc_task_110151->free_mem_101443,
                                  .size =0, .references =NULL};
    int64_t iter_107681;
    struct futhark_mc_segmap_parloop_struct_110153
    futhark_mc_segmap_parloop_struct_110153;
    
    futhark_mc_segmap_parloop_struct_110153.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110153.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110153.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110153.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110153.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110153.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110153.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110153.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110153.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110153.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110153.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110153.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110153.free_bytes_101311 = bytes_101311;
    futhark_mc_segmap_parloop_struct_110153.free_bytes_101323 = bytes_101323;
    futhark_mc_segmap_parloop_struct_110153.free_bytes_101326 = bytes_101326;
    futhark_mc_segmap_parloop_struct_110153.free_mem_101439 = mem_101439.mem;
    futhark_mc_segmap_parloop_struct_110153.free_mem_101443 = mem_101443.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110154_task;
    
    futhark_mc_segmap_parloop_110154_task.name =
        "futhark_mc_segmap_parloop_110154";
    futhark_mc_segmap_parloop_110154_task.fn = futhark_mc_segmap_parloop_110154;
    futhark_mc_segmap_parloop_110154_task.args =
        &futhark_mc_segmap_parloop_struct_110153;
    futhark_mc_segmap_parloop_110154_task.iterations = iterations;
    futhark_mc_segmap_parloop_110154_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110154_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110154_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110154_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110154_task);
    
    if (futhark_mc_segmap_parloop_110154_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110154_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110154_total_end -
                 futhark_mc_segmap_parloop_110154_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110154_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110154_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110154_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110152_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110152_end -
                 futhark_mc_segmap_task_110152_start;
        
        ctx->futhark_mc_segmap_task_110152_runs[tid]++;
        ctx->futhark_mc_segmap_task_110152_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110152_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110163 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101311;
    int64_t free_bytes_101323;
    int64_t free_bytes_101326;
    unsigned char *free_mem_101439;
    unsigned char *free_mem_101443;
};
struct futhark_mc_task_110172 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_98404;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101312;
};
struct futhark_mc_scan_stage_1_parloop_struct_110175 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_98404;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101312;
};
static int futhark_mc_scan_stage_1_parloop_110176(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_107900, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_110175
    *futhark_mc_scan_stage_1_parloop_struct_110175 =
    (struct futhark_mc_scan_stage_1_parloop_struct_110175 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_110175->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_110176_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110176_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_110175->free_n_92399;
    int64_t gtid_98404 =
            futhark_mc_scan_stage_1_parloop_struct_110175->free_gtid_98404;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_110175->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101312 = {.desc ="mem_101312", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_110175->free_mem_101312,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108253 = start;
    int64_t x_107902;
    int64_t x_107903;
    
    x_107902 = (int64_t) 0;
    for (; iter_108253 < end; iter_108253++) {
        int64_t gtid_107901 = iter_108253;
        
        // stage 1 scan body
        {
            double x_107905;
            
            x_107905 = ((double *) Y_mem_100186.mem)[gtid_98404 * n_92399 +
                                                     gtid_107901];
            
            bool isnan_res_107906;
            
            isnan_res_107906 = futrts_isnan64(x_107905);
            
            bool defunc_0_p_res_107907 = !isnan_res_107906;
            int64_t defunc_0_f_res_107908 =
                    btoi_bool_i64(defunc_0_p_res_107907);
            
            // write mapped values results to memory
            { }
            x_107902 = x_107902;
            // Read next values
            {
                x_107903 = defunc_0_f_res_107908;
            }
            
            int64_t defunc_1_op_res_107904 = add64(x_107902, x_107903);
            
            ((int64_t *) mem_101312.mem)[gtid_107901] = defunc_1_op_res_107904;
            x_107902 = defunc_1_op_res_107904;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110176_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110176_end -
                 futhark_mc_scan_stage_1_parloop_110176_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_110176_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_110176_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_110176_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_110177 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_98404;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101312;
};
static int futhark_mc_scan_stage_3_parloop_110178(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_107900, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_110177
    *futhark_mc_scan_stage_3_parloop_struct_110177 =
    (struct futhark_mc_scan_stage_3_parloop_struct_110177 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_110177->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_110178_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_110178_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_110177->free_n_92399;
    int64_t gtid_98404 =
            futhark_mc_scan_stage_3_parloop_struct_110177->free_gtid_98404;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_110177->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101312 = {.desc ="mem_101312", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_110177->free_mem_101312,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108265 = start;
    int64_t x_108262;
    int64_t x_108263;
    
    if (iter_108265 == (int64_t) 0) {
        x_108262 = (int64_t) 0;
    } else {
        x_108262 = ((int64_t *) mem_101312.mem)[iter_108265 - (int64_t) 1];
    }
    for (; iter_108265 < end; iter_108265++) {
        int64_t gtid_107901 = iter_108265;
        
        // stage 3 scan body
        {
            double x_107905;
            
            x_107905 = ((double *) Y_mem_100186.mem)[gtid_98404 * n_92399 +
                                                     gtid_107901];
            
            bool isnan_res_107906;
            
            isnan_res_107906 = futrts_isnan64(x_107905);
            
            bool defunc_0_p_res_107907 = !isnan_res_107906;
            int64_t defunc_0_f_res_107908 =
                    btoi_bool_i64(defunc_0_p_res_107907);
            
            x_108262 = x_108262;
            x_108263 = defunc_0_f_res_107908;
            
            int64_t defunc_1_op_res_108264 = add64(x_108262, x_108263);
            
            ((int64_t *) mem_101312.mem)[gtid_107901] = defunc_1_op_res_108264;
            x_108262 = defunc_1_op_res_108264;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_110178_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_110178_end -
                 futhark_mc_scan_stage_3_parloop_110178_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_110178_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_110178_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_110178_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_110173(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107900 = tid;
    int num_tasks_108252 = info.nsubtasks;
    struct futhark_mc_task_110172 *futhark_mc_task_110172 =
                                  (struct futhark_mc_task_110172 *) args;
    struct futhark_context *ctx = futhark_mc_task_110172->ctx;
    uint64_t futhark_mc_segscan_task_110173_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_110173_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110172->free_n_92399;
    int64_t gtid_98404 = futhark_mc_task_110172->free_gtid_98404;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110172->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101312 = {.desc ="mem_101312", .mem =
                                  futhark_mc_task_110172->free_mem_101312,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_108259_cached_sizze_110174 = 0;
    unsigned char *scan_stage_2_accum_mem_108259 = NULL;
    int64_t iter_108253;
    struct futhark_mc_scan_stage_1_parloop_struct_110175
    futhark_mc_scan_stage_1_parloop_struct_110175;
    
    futhark_mc_scan_stage_1_parloop_struct_110175.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_110175.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_110175.free_gtid_98404 = gtid_98404;
    futhark_mc_scan_stage_1_parloop_struct_110175.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_110175.free_mem_101312 =
        mem_101312.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_110176_task;
    
    futhark_mc_scan_stage_1_parloop_110176_task.name =
        "futhark_mc_scan_stage_1_parloop_110176";
    futhark_mc_scan_stage_1_parloop_110176_task.fn =
        futhark_mc_scan_stage_1_parloop_110176;
    futhark_mc_scan_stage_1_parloop_110176_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_110175;
    futhark_mc_scan_stage_1_parloop_110176_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_110176_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_110176_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110176_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_110176_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_110176_task);
    
    if (futhark_mc_scan_stage_1_parloop_110176_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110176_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110176_total_end -
                 futhark_mc_scan_stage_1_parloop_110176_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110176_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110176_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110176_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_108252)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_108254;
        int64_t x_108255;
        int64_t offset_108257 = (int64_t) 0;
        int64_t offset_index_108258 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_108259_cached_sizze_110174 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_108259 =
                realloc(scan_stage_2_accum_mem_108259, (int64_t) 8);
            scan_stage_2_accum_mem_108259_cached_sizze_110174 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_108259)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_108261 = 0; i_108261 < num_tasks_108252 - 1;
             i_108261++) {
            offset_108257 = squot64(n_92399, sext_i32_i64(num_tasks_108252));
            if (slt64(sext_i32_i64(i_108261), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_108252)))) {
                offset_108257 += (int64_t) 1;
            }
            offset_index_108258 += offset_108257;
            
            int64_t gtid_107901 = offset_index_108258;
            double x_107905;
            
            x_107905 = ((double *) Y_mem_100186.mem)[gtid_98404 * n_92399 +
                                                     gtid_107901];
            
            bool isnan_res_107906;
            
            isnan_res_107906 = futrts_isnan64(x_107905);
            
            bool defunc_0_p_res_107907 = !isnan_res_107906;
            int64_t defunc_0_f_res_107908 =
                    btoi_bool_i64(defunc_0_p_res_107907);
            
            // Read carry in
            {
                x_108254 =
                    ((int64_t *) scan_stage_2_accum_mem_108259)[(int64_t) 0];
            }
            // Read next values
            {
                x_108255 = ((int64_t *) mem_101312.mem)[offset_index_108258 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_108256 = add64(x_108254, x_108255);
            
            ((int64_t *) mem_101312.mem)[offset_index_108258 - (int64_t) 1] =
                defunc_1_op_res_108256;
            ((int64_t *) scan_stage_2_accum_mem_108259)[(int64_t) 0] =
                defunc_1_op_res_108256;
        }
        
        int64_t iter_108265 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_110177
        futhark_mc_scan_stage_3_parloop_struct_110177;
        
        futhark_mc_scan_stage_3_parloop_struct_110177.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_110177.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_110177.free_gtid_98404 =
            gtid_98404;
        futhark_mc_scan_stage_3_parloop_struct_110177.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_110177.free_mem_101312 =
            mem_101312.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_110178_task;
        
        futhark_mc_scan_stage_3_parloop_110178_task.name =
            "futhark_mc_scan_stage_3_parloop_110178";
        futhark_mc_scan_stage_3_parloop_110178_task.fn =
            futhark_mc_scan_stage_3_parloop_110178;
        futhark_mc_scan_stage_3_parloop_110178_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_110177;
        futhark_mc_scan_stage_3_parloop_110178_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_110178_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_110178_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_110178_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_110178_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_110178_task);
        
        if (futhark_mc_scan_stage_3_parloop_110178_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_110178_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_110178_total_end -
                     futhark_mc_scan_stage_3_parloop_110178_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110178_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110178_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110178_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_108259);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_110173_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_110173_end -
                 futhark_mc_segscan_task_110173_start;
        
        ctx->futhark_mc_segscan_task_110173_runs[tid]++;
        ctx->futhark_mc_segscan_task_110173_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_110173_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110179 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_98404;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101312;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
};
struct futhark_mc_segmap_parloop_struct_110181 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_98404;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101312;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
};
static int futhark_mc_segmap_parloop_110182(void *args, int64_t start,
                                            int64_t end, int flat_tid_107909,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110181
    *futhark_mc_segmap_parloop_struct_110181 =
    (struct futhark_mc_segmap_parloop_struct_110181 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110181->ctx;
    uint64_t futhark_mc_segmap_parloop_110182_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110182_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110181->free_n_92399;
    int64_t gtid_98404 =
            futhark_mc_segmap_parloop_struct_110181->free_gtid_98404;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110181->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101312 = {.desc ="mem_101312", .mem =
                                  futhark_mc_segmap_parloop_struct_110181->free_mem_101312,
                                  .size =0, .references =NULL};
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_segmap_parloop_struct_110181->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segmap_parloop_struct_110181->free_mem_101318,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108269 = start;
    
    for (; iter_108269 < end; iter_108269++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108272 = n_92399;
        int64_t gtid_107910 = iter_108269;
        int64_t remnant_108273 = iter_108269 - gtid_107910;
        double x_107911;
        
        x_107911 = ((double *) Y_mem_100186.mem)[gtid_98404 * n_92399 +
                                                 gtid_107910];
        
        bool isnan_res_107912;
        
        isnan_res_107912 = futrts_isnan64(x_107911);
        
        bool defunc_0_p_res_107913 = !isnan_res_107912;
        int64_t defunc_1_f_res_107914;
        
        if (defunc_0_p_res_107913) {
            int64_t x_108270;
            
            x_108270 = ((int64_t *) mem_101312.mem)[gtid_107910];
            
            int64_t defunc_1_f_res_t_res_108271 = sub64(x_108270, (int64_t) 1);
            
            defunc_1_f_res_107914 = defunc_1_f_res_t_res_108271;
        } else {
            defunc_1_f_res_107914 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_107914) &&
            slt64(defunc_1_f_res_107914, n_92399)) {
            ((int64_t *) mem_101318.mem)[defunc_1_f_res_107914] = gtid_107910;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_107914) &&
            slt64(defunc_1_f_res_107914, n_92399)) {
            ((double *) mem_101315.mem)[defunc_1_f_res_107914] = x_107911;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110182_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110182_end -
                 futhark_mc_segmap_parloop_110182_start;
        
        ctx->futhark_mc_segmap_parloop_110182_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110182_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110182_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110180(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107909 = tid;
    int num_tasks_108268 = info.nsubtasks;
    struct futhark_mc_task_110179 *futhark_mc_task_110179 =
                                  (struct futhark_mc_task_110179 *) args;
    struct futhark_context *ctx = futhark_mc_task_110179->ctx;
    uint64_t futhark_mc_segmap_task_110180_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110180_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110179->free_n_92399;
    int64_t gtid_98404 = futhark_mc_task_110179->free_gtid_98404;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110179->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101312 = {.desc ="mem_101312", .mem =
                                  futhark_mc_task_110179->free_mem_101312,
                                  .size =0, .references =NULL};
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_task_110179->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110179->free_mem_101318,
                                  .size =0, .references =NULL};
    int64_t iter_108269;
    struct futhark_mc_segmap_parloop_struct_110181
    futhark_mc_segmap_parloop_struct_110181;
    
    futhark_mc_segmap_parloop_struct_110181.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110181.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110181.free_gtid_98404 = gtid_98404;
    futhark_mc_segmap_parloop_struct_110181.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110181.free_mem_101312 = mem_101312.mem;
    futhark_mc_segmap_parloop_struct_110181.free_mem_101315 = mem_101315.mem;
    futhark_mc_segmap_parloop_struct_110181.free_mem_101318 = mem_101318.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110182_task;
    
    futhark_mc_segmap_parloop_110182_task.name =
        "futhark_mc_segmap_parloop_110182";
    futhark_mc_segmap_parloop_110182_task.fn = futhark_mc_segmap_parloop_110182;
    futhark_mc_segmap_parloop_110182_task.args =
        &futhark_mc_segmap_parloop_struct_110181;
    futhark_mc_segmap_parloop_110182_task.iterations = iterations;
    futhark_mc_segmap_parloop_110182_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110182_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110182_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110182_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110182_task);
    
    if (futhark_mc_segmap_parloop_110182_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110182_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110182_total_end -
                 futhark_mc_segmap_parloop_110182_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110182_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110182_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110182_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110180_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110180_end -
                 futhark_mc_segmap_task_110180_start;
        
        ctx->futhark_mc_segmap_task_110180_runs[tid]++;
        ctx->futhark_mc_segmap_task_110180_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110180_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110183 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101321;
};
struct futhark_mc_segmap_parloop_struct_110185 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101321;
};
static int futhark_mc_segmap_parloop_110186(void *args, int64_t start,
                                            int64_t end, int flat_tid_107917,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110185
    *futhark_mc_segmap_parloop_struct_110185 =
    (struct futhark_mc_segmap_parloop_struct_110185 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110185->ctx;
    uint64_t futhark_mc_segmap_parloop_110186_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110186_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110185->free_n_92399;
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segmap_parloop_struct_110185->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_segmap_parloop_struct_110185->free_mem_101321,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108275 = start;
    
    for (; iter_108275 < end; iter_108275++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108276 = n_92399;
        int64_t gtid_107918 = iter_108275;
        int64_t remnant_108277 = iter_108275 - gtid_107918;
        int64_t x_107919;
        
        x_107919 = ((int64_t *) mem_101318.mem)[gtid_107918];
        
        int64_t defunc_0_f_res_107920 = add64((int64_t) 1, x_107919);
        
        ((int64_t *) mem_101321.mem)[gtid_107918] = defunc_0_f_res_107920;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110186_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110186_end -
                 futhark_mc_segmap_parloop_110186_start;
        
        ctx->futhark_mc_segmap_parloop_110186_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110186_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110186_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110184(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107917 = tid;
    int num_tasks_108274 = info.nsubtasks;
    struct futhark_mc_task_110183 *futhark_mc_task_110183 =
                                  (struct futhark_mc_task_110183 *) args;
    struct futhark_context *ctx = futhark_mc_task_110183->ctx;
    uint64_t futhark_mc_segmap_task_110184_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110184_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110183->free_n_92399;
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110183->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_task_110183->free_mem_101321,
                                  .size =0, .references =NULL};
    int64_t iter_108275;
    struct futhark_mc_segmap_parloop_struct_110185
    futhark_mc_segmap_parloop_struct_110185;
    
    futhark_mc_segmap_parloop_struct_110185.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110185.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110185.free_mem_101318 = mem_101318.mem;
    futhark_mc_segmap_parloop_struct_110185.free_mem_101321 = mem_101321.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110186_task;
    
    futhark_mc_segmap_parloop_110186_task.name =
        "futhark_mc_segmap_parloop_110186";
    futhark_mc_segmap_parloop_110186_task.fn = futhark_mc_segmap_parloop_110186;
    futhark_mc_segmap_parloop_110186_task.args =
        &futhark_mc_segmap_parloop_struct_110185;
    futhark_mc_segmap_parloop_110186_task.iterations = iterations;
    futhark_mc_segmap_parloop_110186_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110186_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110186_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110186_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110186_task);
    
    if (futhark_mc_segmap_parloop_110186_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110186_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110186_total_end -
                 futhark_mc_segmap_parloop_110186_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110186_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110186_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110186_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110184_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110184_end -
                 futhark_mc_segmap_task_110184_start;
        
        ctx->futhark_mc_segmap_task_110184_runs[tid]++;
        ctx->futhark_mc_segmap_task_110184_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110184_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110187 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101324;
};
struct futhark_mc_segmap_parloop_struct_110189 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101324;
};
static int futhark_mc_segmap_parloop_110190(void *args, int64_t start,
                                            int64_t end, int flat_tid_107921,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110189
    *futhark_mc_segmap_parloop_struct_110189 =
    (struct futhark_mc_segmap_parloop_struct_110189 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110189->ctx;
    uint64_t futhark_mc_segmap_parloop_110190_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110190_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110189->free_q_92401;
    int64_t last_res_98416 =
            futhark_mc_segmap_parloop_struct_110189->free_last_res_98416;
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_segmap_parloop_struct_110189->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108279 = start;
    
    for (; iter_108279 < end; iter_108279++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108280 = q_92401;
        int64_t gtid_107922 = iter_108279;
        int64_t remnant_108281 = iter_108279 - gtid_107922;
        bool cond_107923 = sle64(last_res_98416, gtid_107922);
        double defunc_0_f_res_107924;
        
        if (cond_107923) {
            defunc_0_f_res_107924 = 0.0;
        } else {
            defunc_0_f_res_107924 = 1.0;
        }
        ((double *) mem_101324.mem)[gtid_107922] = defunc_0_f_res_107924;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110190_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110190_end -
                 futhark_mc_segmap_parloop_110190_start;
        
        ctx->futhark_mc_segmap_parloop_110190_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110190_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110190_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110188(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107921 = tid;
    int num_tasks_108278 = info.nsubtasks;
    struct futhark_mc_task_110187 *futhark_mc_task_110187 =
                                  (struct futhark_mc_task_110187 *) args;
    struct futhark_context *ctx = futhark_mc_task_110187->ctx;
    uint64_t futhark_mc_segmap_task_110188_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110188_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_110187->free_q_92401;
    int64_t last_res_98416 = futhark_mc_task_110187->free_last_res_98416;
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_task_110187->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t iter_108279;
    struct futhark_mc_segmap_parloop_struct_110189
    futhark_mc_segmap_parloop_struct_110189;
    
    futhark_mc_segmap_parloop_struct_110189.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110189.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110189.free_last_res_98416 =
        last_res_98416;
    futhark_mc_segmap_parloop_struct_110189.free_mem_101324 = mem_101324.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110190_task;
    
    futhark_mc_segmap_parloop_110190_task.name =
        "futhark_mc_segmap_parloop_110190";
    futhark_mc_segmap_parloop_110190_task.fn = futhark_mc_segmap_parloop_110190;
    futhark_mc_segmap_parloop_110190_task.args =
        &futhark_mc_segmap_parloop_struct_110189;
    futhark_mc_segmap_parloop_110190_task.iterations = iterations;
    futhark_mc_segmap_parloop_110190_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110190_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110190_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110190_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110190_task);
    
    if (futhark_mc_segmap_parloop_110190_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110190_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110190_total_end -
                 futhark_mc_segmap_parloop_110190_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110190_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110190_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110190_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110188_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110188_end -
                 futhark_mc_segmap_task_110188_start;
        
        ctx->futhark_mc_segmap_task_110188_runs[tid]++;
        ctx->futhark_mc_segmap_task_110188_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110188_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110191 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_98416;
    int64_t free_min_arg_98435;
    int64_t free_min_arg_98436;
    int64_t free_min_res_98437;
    double free_max_res_98441;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101321;
    unsigned char *free_mem_101324;
    unsigned char *free_mem_101327;
    unsigned char *free_mem_101330;
};
struct futhark_mc_segmap_parloop_struct_110193 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_98416;
    int64_t free_min_arg_98435;
    int64_t free_min_arg_98436;
    int64_t free_min_res_98437;
    double free_max_res_98441;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101321;
    unsigned char *free_mem_101324;
    unsigned char *free_mem_101327;
    unsigned char *free_mem_101330;
};
static int futhark_mc_segmap_parloop_110194(void *args, int64_t start,
                                            int64_t end, int flat_tid_108091,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110193
    *futhark_mc_segmap_parloop_struct_110193 =
    (struct futhark_mc_segmap_parloop_struct_110193 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110193->ctx;
    uint64_t futhark_mc_segmap_parloop_110194_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110194_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110193->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110193->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110193->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110193->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110193->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110193->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110193->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110193->free_loop_cond_92426;
    int64_t last_res_98416 =
            futhark_mc_segmap_parloop_struct_110193->free_last_res_98416;
    int64_t min_arg_98435 =
            futhark_mc_segmap_parloop_struct_110193->free_min_arg_98435;
    int64_t min_arg_98436 =
            futhark_mc_segmap_parloop_struct_110193->free_min_arg_98436;
    int64_t min_res_98437 =
            futhark_mc_segmap_parloop_struct_110193->free_min_res_98437;
    double max_res_98441 =
           futhark_mc_segmap_parloop_struct_110193->free_max_res_98441;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101321,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101324,
                                  .size =0, .references =NULL};
    struct memblock mem_101327 = {.desc ="mem_101327", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101327,
                                  .size =0, .references =NULL};
    struct memblock mem_101330 = {.desc ="mem_101330", .mem =
                                  futhark_mc_segmap_parloop_struct_110193->free_mem_101330,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108283 = start;
    
    for (; iter_108283 < end; iter_108283++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108397 = n_m_92409;
        int64_t gtid_108092 = iter_108283;
        int64_t remnant_108398 = iter_108283 - gtid_108092;
        int64_t min_arg_108093 = mul64(jump_92403, gtid_108092);
        int64_t min_res_108094 = smin64(i_92415, min_arg_108093);
        int64_t defunc_0_g_res_108095 = add64((int64_t) 1, min_res_108094);
        bool init_idx_108096;
        int64_t init_idx_108097;
        int64_t init_idx_108098;
        bool loop_while_108284;
        int64_t low_108285;
        int64_t high_108286;
        
        loop_while_108284 = x_92416;
        low_108285 = (int64_t) 0;
        high_108286 = i_92415;
        while (loop_while_108284) {
            int64_t x_108287 = add64(low_108285, high_108286);
            int64_t mid_108288 = sdiv64(x_108287, (int64_t) 2);
            bool x_108289 = sle64((int64_t) 0, mid_108288);
            bool y_108290 = slt64(mid_108288, n_92399);
            bool bounds_check_108291 = x_108289 && y_108290;
            bool index_certs_108292;
            
            if (!bounds_check_108291) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_108288,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_108293;
            
            mid_id_108293 = ((int64_t *) mem_101321.mem)[mid_108288];
            
            bool cond_108294 = slt64(mid_id_108293, (int64_t) 0);
            int64_t mid_idx_108295;
            
            if (cond_108294) {
                mid_idx_108295 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_108295 = mid_id_108293;
            }
            
            bool cond_108296 = sle64(defunc_0_g_res_108095, mid_idx_108295);
            int64_t loopres_108297;
            int64_t loopres_108298;
            
            if (cond_108296) {
                int64_t loopres_t_res_108299 = sub64(mid_108288, (int64_t) 1);
                
                loopres_108297 = low_108285;
                loopres_108298 = loopres_t_res_108299;
            } else {
                int64_t loopres_f_res_108300 = add64((int64_t) 1, mid_108288);
                
                loopres_108297 = loopres_f_res_108300;
                loopres_108298 = high_108286;
            }
            
            bool loop_cond_108301 = sle64(loopres_108297, loopres_108298);
            bool loop_while_tmp_108399 = loop_cond_108301;
            int64_t low_tmp_108400 = loopres_108297;
            int64_t high_tmp_108401 = loopres_108298;
            
            loop_while_108284 = loop_while_tmp_108399;
            low_108285 = low_tmp_108400;
            high_108286 = high_tmp_108401;
        }
        init_idx_108096 = loop_while_108284;
        init_idx_108097 = low_108285;
        init_idx_108098 = high_108286;
        
        bool idx_108117;
        int64_t idx_108118;
        int64_t idx_108119;
        int64_t idx_108120;
        bool loop_while_108302;
        int64_t l_idx_108303;
        int64_t r_idx_108304;
        int64_t span_108305;
        
        loop_while_108302 = loop_cond_92426;
        l_idx_108303 = init_idx_108097;
        r_idx_108304 = init_idx_108097;
        span_108305 = (int64_t) 1;
        while (loop_while_108302) {
            int64_t max_arg_108306 = sub64(l_idx_108303, (int64_t) 1);
            int64_t max_res_108307 = smax64((int64_t) 0, max_arg_108306);
            int64_t min_arg_108308 = add64((int64_t) 1, r_idx_108304);
            int64_t min_res_108309 = smin64(min_arg_98435, min_arg_108308);
            bool x_108310 = sle64((int64_t) 0, max_res_108307);
            bool y_108311 = slt64(max_res_108307, n_92399);
            bool bounds_check_108312 = x_108310 && y_108311;
            bool index_certs_108313;
            
            if (!bounds_check_108312) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_108307,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108314;
            
            x_108314 = ((int64_t *) mem_101321.mem)[max_res_108307];
            
            int64_t abs_arg_108315 = sub64(x_108314, defunc_0_g_res_108095);
            int64_t abs_res_108316 = abs64(abs_arg_108315);
            bool x_108317 = sle64((int64_t) 0, min_res_108309);
            bool y_108318 = slt64(min_res_108309, n_92399);
            bool bounds_check_108319 = x_108317 && y_108318;
            bool index_certs_108320;
            
            if (!bounds_check_108319) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_108309,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108321;
            
            x_108321 = ((int64_t *) mem_101321.mem)[min_res_108309];
            
            int64_t abs_arg_108322 = sub64(x_108321, defunc_0_g_res_108095);
            int64_t abs_res_108323 = abs64(abs_arg_108322);
            bool cond_108324 = max_res_108307 == l_idx_108303;
            int64_t loopres_108325;
            int64_t loopres_108326;
            int64_t loopres_108327;
            
            if (cond_108324) {
                loopres_108325 = l_idx_108303;
                loopres_108326 = r_idx_108304;
                loopres_108327 = min_res_92421;
            } else {
                bool cond_108328 = slt64(abs_res_108316, abs_res_108323);
                bool cond_f_res_108329 = min_res_108309 == r_idx_108304;
                bool x_108330 = !cond_108328;
                bool y_108331 = cond_f_res_108329 && x_108330;
                bool cond_108332 = cond_108328 || y_108331;
                int64_t loopres_f_res_108333;
                
                if (cond_108332) {
                    loopres_f_res_108333 = max_res_108307;
                } else {
                    loopres_f_res_108333 = l_idx_108303;
                }
                
                int64_t loopres_f_res_108334;
                
                if (cond_108332) {
                    loopres_f_res_108334 = r_idx_108304;
                } else {
                    loopres_f_res_108334 = min_res_108309;
                }
                
                int64_t loopres_f_res_108335;
                
                if (cond_108332) {
                    int64_t loopres_f_res_t_res_108336 = add64((int64_t) 1,
                                                               span_108305);
                    
                    loopres_f_res_108335 = loopres_f_res_t_res_108336;
                } else {
                    int64_t loopres_f_res_f_res_108337 = add64((int64_t) 1,
                                                               span_108305);
                    
                    loopres_f_res_108335 = loopres_f_res_f_res_108337;
                }
                loopres_108325 = loopres_f_res_108333;
                loopres_108326 = loopres_f_res_108334;
                loopres_108327 = loopres_f_res_108335;
            }
            
            bool loop_cond_108338 = slt64(loopres_108327, min_res_92421);
            bool loop_while_tmp_108402 = loop_cond_108338;
            int64_t l_idx_tmp_108403 = loopres_108325;
            int64_t r_idx_tmp_108404 = loopres_108326;
            int64_t span_tmp_108405 = loopres_108327;
            
            loop_while_108302 = loop_while_tmp_108402;
            l_idx_108303 = l_idx_tmp_108403;
            r_idx_108304 = r_idx_tmp_108404;
            span_108305 = span_tmp_108405;
        }
        idx_108117 = loop_while_108302;
        idx_108118 = l_idx_108303;
        idx_108119 = r_idx_108304;
        idx_108120 = span_108305;
        
        int64_t min_res_108158 = smin64(min_arg_98436, idx_108118);
        int64_t max_res_108159 = smax64((int64_t) 0, min_res_108158);
        int64_t x_108160 = add64(min_res_98437, max_res_108159);
        int64_t r_108161 = sub64(x_108160, (int64_t) 1);
        bool x_108162 = sle64((int64_t) 0, r_108161);
        bool y_108163 = slt64(r_108161, n_92399);
        bool bounds_check_108164 = x_108162 && y_108163;
        bool index_certs_108165;
        
        if (!bounds_check_108164) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_108161,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108166;
        
        x_108166 = ((int64_t *) mem_101318.mem)[r_108161];
        
        int64_t abs_arg_108167 = sub64(x_108166, min_res_108094);
        int64_t abs_res_108168 = abs64(abs_arg_108167);
        bool x_108169 = sle64((int64_t) 0, max_res_108159);
        bool y_108170 = slt64(max_res_108159, n_92399);
        bool bounds_check_108171 = x_108169 && y_108170;
        bool index_certs_108172;
        
        if (!bounds_check_108171) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_108159,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108173;
        
        x_108173 = ((int64_t *) mem_101318.mem)[max_res_108159];
        
        int64_t abs_arg_108174 = sub64(x_108173, min_res_108094);
        int64_t abs_res_108175 = abs64(abs_arg_108174);
        int64_t max_res_108176 = smax64(abs_res_108168, abs_res_108175);
        double defunc_0_f_res_108177 = sitofp_i64_f64(max_res_108176);
        double defunc_1_f_res_108178 = max_res_98441 + defunc_0_f_res_108177;
        double defunc_2_reduce_res_108179;
        double defunc_2_reduce_res_108180;
        double defunc_2_reduce_res_108181;
        double redout_108340;
        double redout_108341;
        double redout_108342;
        
        redout_108340 = 0.0;
        redout_108341 = 0.0;
        redout_108342 = 0.0;
        for (int64_t i_108339 = 0; i_108339 < q_92401; i_108339++) {
            double x_108343;
            
            x_108343 = ((double *) mem_101324.mem)[i_108339];
            
            bool cond_108344 = sle64(last_res_98416, i_108339);
            int64_t defunc_0_f_res_108345;
            
            if (cond_108344) {
                defunc_0_f_res_108345 = (int64_t) 0;
            } else {
                int64_t i_108346 = add64(max_res_108159, i_108339);
                int64_t defunc_0_add_arg_108347;
                
                defunc_0_add_arg_108347 =
                    ((int64_t *) mem_101318.mem)[i_108346];
                
                int64_t defunc_1_add_res_108348 = add64((int64_t) 1,
                                                        defunc_0_add_arg_108347);
                
                defunc_0_f_res_108345 = defunc_1_add_res_108348;
            }
            
            int64_t binop_p_108349 = sub64(defunc_0_f_res_108345,
                                           min_res_108094);
            double defunc_0_f_res_108350 = sitofp_i64_f64(binop_p_108349);
            double abs_res_108351 = fabs(defunc_0_f_res_108350);
            double tmp1_108352 = abs_res_108351 / defunc_1_f_res_108178;
            double x_108353 = tmp1_108352 * tmp1_108352;
            double y_108354 = tmp1_108352 * x_108353;
            double tmp2_108355 = 1.0 - y_108354;
            double x_108356 = tmp2_108355 * tmp2_108355;
            double tmp3_108357 = tmp2_108355 * x_108356;
            double w_j_108358 = x_108343 * tmp3_108357;
            double xw_j_108359 = defunc_0_f_res_108350 * w_j_108358;
            double x2w_j_108360 = defunc_0_f_res_108350 * xw_j_108359;
            double defunc_1_op_res_108361 = w_j_108358 + redout_108340;
            double defunc_1_op_res_108362 = xw_j_108359 + redout_108341;
            double defunc_1_op_res_108363 = x2w_j_108360 + redout_108342;
            double redout_tmp_108406 = defunc_1_op_res_108361;
            double redout_tmp_108407 = defunc_1_op_res_108362;
            double redout_tmp_108408 = defunc_1_op_res_108363;
            
            redout_108340 = redout_tmp_108406;
            redout_108341 = redout_tmp_108407;
            redout_108342 = redout_tmp_108408;
        }
        defunc_2_reduce_res_108179 = redout_108340;
        defunc_2_reduce_res_108180 = redout_108341;
        defunc_2_reduce_res_108181 = redout_108342;
        
        double x_108207 = defunc_2_reduce_res_108179 *
               defunc_2_reduce_res_108181;
        double y_108208 = defunc_2_reduce_res_108180 *
               defunc_2_reduce_res_108180;
        double y_108209 = x_108207 - y_108208;
        double det1_108210 = 1.0 / y_108209;
        double a11_108211 = defunc_2_reduce_res_108181 * det1_108210;
        double x_108212 = 0.0 - defunc_2_reduce_res_108180;
        double b11_108213 = det1_108210 * x_108212;
        double c11_108214 = defunc_2_reduce_res_108179 * det1_108210;
        double defunc_2_reduce_res_108215;
        double defunc_2_reduce_res_108216;
        double redout_108365;
        double redout_108366;
        
        redout_108365 = 0.0;
        redout_108366 = 0.0;
        for (int64_t i_108364 = 0; i_108364 < q_92401; i_108364++) {
            double x_108367;
            
            x_108367 = ((double *) mem_101324.mem)[i_108364];
            
            bool cond_108368 = sle64(last_res_98416, i_108364);
            int64_t defunc_0_f_res_108369;
            
            if (cond_108368) {
                defunc_0_f_res_108369 = (int64_t) 0;
            } else {
                int64_t i_108370 = add64(max_res_108159, i_108364);
                int64_t defunc_0_add_arg_108371;
                
                defunc_0_add_arg_108371 =
                    ((int64_t *) mem_101318.mem)[i_108370];
                
                int64_t defunc_1_add_res_108372 = add64((int64_t) 1,
                                                        defunc_0_add_arg_108371);
                
                defunc_0_f_res_108369 = defunc_1_add_res_108372;
            }
            
            int64_t binop_p_108373 = sub64(defunc_0_f_res_108369,
                                           min_res_108094);
            double defunc_0_f_res_108374 = sitofp_i64_f64(binop_p_108373);
            double abs_res_108375 = fabs(defunc_0_f_res_108374);
            double tmp1_108376 = abs_res_108375 / defunc_1_f_res_108178;
            double x_108377 = tmp1_108376 * tmp1_108376;
            double y_108378 = tmp1_108376 * x_108377;
            double tmp2_108379 = 1.0 - y_108378;
            double x_108380 = tmp2_108379 * tmp2_108379;
            double tmp3_108381 = tmp2_108379 * x_108380;
            double tmp4_108382 = x_108367 * tmp3_108381;
            double defunc_1_f_res_108383 = defunc_0_f_res_108374 * tmp4_108382;
            double defunc_0_f_res_108384;
            
            if (cond_108368) {
                defunc_0_f_res_108384 = 0.0;
            } else {
                int64_t i_108385 = add64(max_res_108159, i_108364);
                double defunc_0_add_arg_108386;
                
                defunc_0_add_arg_108386 = ((double *) mem_101315.mem)[i_108385];
                defunc_0_f_res_108384 = defunc_0_add_arg_108386;
            }
            
            double x_108387 = a11_108211 * tmp4_108382;
            double y_108388 = b11_108213 * defunc_1_f_res_108383;
            double x_108389 = x_108387 + y_108388;
            double defunc_9_fit_fun_res_108390 = defunc_0_f_res_108384 *
                   x_108389;
            double x_108391 = b11_108213 * tmp4_108382;
            double y_108392 = c11_108214 * defunc_1_f_res_108383;
            double x_108393 = x_108391 + y_108392;
            double defunc_9_slope_fun_res_108394 = defunc_0_f_res_108384 *
                   x_108393;
            double defunc_1_op_res_108395 = defunc_9_fit_fun_res_108390 +
                   redout_108365;
            double defunc_1_op_res_108396 = defunc_9_slope_fun_res_108394 +
                   redout_108366;
            double redout_tmp_108409 = defunc_1_op_res_108395;
            double redout_tmp_108410 = defunc_1_op_res_108396;
            
            redout_108365 = redout_tmp_108409;
            redout_108366 = redout_tmp_108410;
        }
        defunc_2_reduce_res_108215 = redout_108365;
        defunc_2_reduce_res_108216 = redout_108366;
        ((double *) mem_101327.mem)[gtid_108092] = defunc_2_reduce_res_108215;
        ((double *) mem_101330.mem)[gtid_108092] = defunc_2_reduce_res_108216;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110194_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110194_end -
                 futhark_mc_segmap_parloop_110194_start;
        
        ctx->futhark_mc_segmap_parloop_110194_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110194_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110194_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110192(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108091 = tid;
    int num_tasks_108282 = info.nsubtasks;
    struct futhark_mc_task_110191 *futhark_mc_task_110191 =
                                  (struct futhark_mc_task_110191 *) args;
    struct futhark_context *ctx = futhark_mc_task_110191->ctx;
    uint64_t futhark_mc_segmap_task_110192_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110192_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110191->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110191->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110191->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110191->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110191->free_i_92415;
    bool x_92416 = futhark_mc_task_110191->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110191->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110191->free_loop_cond_92426;
    int64_t last_res_98416 = futhark_mc_task_110191->free_last_res_98416;
    int64_t min_arg_98435 = futhark_mc_task_110191->free_min_arg_98435;
    int64_t min_arg_98436 = futhark_mc_task_110191->free_min_arg_98436;
    int64_t min_res_98437 = futhark_mc_task_110191->free_min_res_98437;
    double max_res_98441 = futhark_mc_task_110191->free_max_res_98441;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_task_110191->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110191->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_task_110191->free_mem_101321,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_task_110191->free_mem_101324,
                                  .size =0, .references =NULL};
    struct memblock mem_101327 = {.desc ="mem_101327", .mem =
                                  futhark_mc_task_110191->free_mem_101327,
                                  .size =0, .references =NULL};
    struct memblock mem_101330 = {.desc ="mem_101330", .mem =
                                  futhark_mc_task_110191->free_mem_101330,
                                  .size =0, .references =NULL};
    int64_t iter_108283;
    struct futhark_mc_segmap_parloop_struct_110193
    futhark_mc_segmap_parloop_struct_110193;
    
    futhark_mc_segmap_parloop_struct_110193.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110193.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110193.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110193.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110193.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110193.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110193.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110193.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110193.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110193.free_last_res_98416 =
        last_res_98416;
    futhark_mc_segmap_parloop_struct_110193.free_min_arg_98435 = min_arg_98435;
    futhark_mc_segmap_parloop_struct_110193.free_min_arg_98436 = min_arg_98436;
    futhark_mc_segmap_parloop_struct_110193.free_min_res_98437 = min_res_98437;
    futhark_mc_segmap_parloop_struct_110193.free_max_res_98441 = max_res_98441;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101315 = mem_101315.mem;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101318 = mem_101318.mem;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101321 = mem_101321.mem;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101324 = mem_101324.mem;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101327 = mem_101327.mem;
    futhark_mc_segmap_parloop_struct_110193.free_mem_101330 = mem_101330.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110194_task;
    
    futhark_mc_segmap_parloop_110194_task.name =
        "futhark_mc_segmap_parloop_110194";
    futhark_mc_segmap_parloop_110194_task.fn = futhark_mc_segmap_parloop_110194;
    futhark_mc_segmap_parloop_110194_task.args =
        &futhark_mc_segmap_parloop_struct_110193;
    futhark_mc_segmap_parloop_110194_task.iterations = iterations;
    futhark_mc_segmap_parloop_110194_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110194_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110194_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110194_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110194_task);
    
    if (futhark_mc_segmap_parloop_110194_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110194_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110194_total_end -
                 futhark_mc_segmap_parloop_110194_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110194_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110194_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110194_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110192_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110192_end -
                 futhark_mc_segmap_task_110192_start;
        
        ctx->futhark_mc_segmap_task_110192_runs[tid]++;
        ctx->futhark_mc_segmap_task_110192_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110192_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110196 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_98416;
    int64_t free_min_arg_98435;
    int64_t free_min_arg_98436;
    int64_t free_min_res_98437;
    double free_max_res_98441;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101321;
    unsigned char *free_mem_101324;
    unsigned char *free_mem_101327;
    unsigned char *free_mem_101330;
};
struct futhark_mc_task_110198 {
    struct futhark_context *ctx;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101324;
    int64_t free_min_res_107928;
    int64_t free_max_res_107993;
    double free_defunc_1_f_res_108012;
    double *retval_defunc_2_reduce_res_108013;
    double *retval_defunc_2_reduce_res_108014;
    double *retval_defunc_2_reduce_res_108015;
};
struct futhark_mc_segred_stage_1_parloop_struct_110203 {
    struct futhark_context *ctx;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101324;
    int64_t free_min_res_107928;
    int64_t free_max_res_107993;
    double free_defunc_1_f_res_108012;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_108542;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_108544;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_108546;
};
static int futhark_mc_segred_stage_1_parloop_110204(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_108467,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110203
    *futhark_mc_segred_stage_1_parloop_struct_110203 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110203 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110203->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110204_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110204_start = get_wall_time();
    
    int64_t last_res_98416 =
            futhark_mc_segred_stage_1_parloop_struct_110203->free_last_res_98416;
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110203->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110203->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t min_res_107928 =
            futhark_mc_segred_stage_1_parloop_struct_110203->free_min_res_107928;
    int64_t max_res_107993 =
            futhark_mc_segred_stage_1_parloop_struct_110203->free_max_res_107993;
    double defunc_1_f_res_108012 =
           futhark_mc_segred_stage_1_parloop_struct_110203->free_defunc_1_f_res_108012;
    struct memblock reduce_stage_1_tid_res_arr_mem_108542 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_108542",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110203->free_reduce_stage_1_tid_res_arr_mem_108542,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_108544 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_108544",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110203->free_reduce_stage_1_tid_res_arr_mem_108544,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_108546 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_108546",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110203->free_reduce_stage_1_tid_res_arr_mem_108546,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108548 = start;
    double x_108469;
    double x_108470;
    double x_108472;
    double x_108473;
    double x_108475;
    double x_108476;
    double local_acc_108549 = 0.0;
    double local_acc_108550 = 0.0;
    double local_acc_108551 = 0.0;
    
    for (; iter_108548 < end; iter_108548++) {
        int64_t gtid_108468 = iter_108548;
        double x_108478;
        
        x_108478 = ((double *) mem_101324.mem)[gtid_108468];
        
        bool cond_108479 = sle64(last_res_98416, gtid_108468);
        int64_t defunc_0_f_res_108480;
        
        if (cond_108479) {
            defunc_0_f_res_108480 = (int64_t) 0;
        } else {
            int64_t i_108481 = add64(max_res_107993, gtid_108468);
            int64_t defunc_0_add_arg_108482;
            
            defunc_0_add_arg_108482 = ((int64_t *) mem_101318.mem)[i_108481];
            
            int64_t defunc_1_add_res_108483 = add64((int64_t) 1,
                                                    defunc_0_add_arg_108482);
            
            defunc_0_f_res_108480 = defunc_1_add_res_108483;
        }
        
        int64_t binop_p_108484 = sub64(defunc_0_f_res_108480, min_res_107928);
        double defunc_0_f_res_108485 = sitofp_i64_f64(binop_p_108484);
        double abs_res_108486 = fabs(defunc_0_f_res_108485);
        double tmp1_108487 = abs_res_108486 / defunc_1_f_res_108012;
        double x_108488 = tmp1_108487 * tmp1_108487;
        double y_108489 = tmp1_108487 * x_108488;
        double tmp2_108490 = 1.0 - y_108489;
        double x_108491 = tmp2_108490 * tmp2_108490;
        double tmp3_108492 = tmp2_108490 * x_108491;
        double w_j_108493 = x_108478 * tmp3_108492;
        double xw_j_108494 = defunc_0_f_res_108485 * w_j_108493;
        double x2w_j_108495 = defunc_0_f_res_108485 * xw_j_108494;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_108469 = local_acc_108549;
        }
        // Load next params
        {
            x_108470 = w_j_108493;
        }
        // Red body
        {
            double defunc_1_op_res_108471 = x_108469 + x_108470;
            
            local_acc_108549 = defunc_1_op_res_108471;
        }
        // Load accum params
        {
            x_108472 = local_acc_108550;
        }
        // Load next params
        {
            x_108473 = xw_j_108494;
        }
        // Red body
        {
            double defunc_1_op_res_108474 = x_108472 + x_108473;
            
            local_acc_108550 = defunc_1_op_res_108474;
        }
        // Load accum params
        {
            x_108475 = local_acc_108551;
        }
        // Load next params
        {
            x_108476 = x2w_j_108495;
        }
        // Red body
        {
            double defunc_1_op_res_108477 = x_108475 + x_108476;
            
            local_acc_108551 = defunc_1_op_res_108477;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_108542.mem)[flat_tid_108467] =
        local_acc_108549;
    ((double *) reduce_stage_1_tid_res_arr_mem_108544.mem)[flat_tid_108467] =
        local_acc_108550;
    ((double *) reduce_stage_1_tid_res_arr_mem_108546.mem)[flat_tid_108467] =
        local_acc_108551;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110204_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110204_end -
                 futhark_mc_segred_stage_1_parloop_110204_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110204_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110204_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110204_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110199(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108467 = tid;
    int num_tasks_108541 = info.nsubtasks;
    struct futhark_mc_task_110198 *futhark_mc_task_110198 =
                                  (struct futhark_mc_task_110198 *) args;
    struct futhark_context *ctx = futhark_mc_task_110198->ctx;
    uint64_t futhark_mc_segred_task_110199_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110199_start = get_wall_time();
    
    int64_t last_res_98416 = futhark_mc_task_110198->free_last_res_98416;
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110198->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_task_110198->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t min_res_107928 = futhark_mc_task_110198->free_min_res_107928;
    int64_t max_res_107993 = futhark_mc_task_110198->free_max_res_107993;
    double defunc_1_f_res_108012 =
           futhark_mc_task_110198->free_defunc_1_f_res_108012;
    double defunc_2_reduce_res_108013 =
           *futhark_mc_task_110198->retval_defunc_2_reduce_res_108013;
    double defunc_2_reduce_res_108014 =
           *futhark_mc_task_110198->retval_defunc_2_reduce_res_108014;
    double defunc_2_reduce_res_108015 =
           *futhark_mc_task_110198->retval_defunc_2_reduce_res_108015;
    size_t reduce_stage_1_tid_res_arr_mem_108542_cached_sizze_110200 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_108542 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_108544_cached_sizze_110201 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_108544 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_108546_cached_sizze_110202 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_108546 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_108542_cached_sizze_110200 <
        (size_t) ((int64_t) 8 * num_tasks_108541)) {
        reduce_stage_1_tid_res_arr_mem_108542 =
            realloc(reduce_stage_1_tid_res_arr_mem_108542, (int64_t) 8 *
                    num_tasks_108541);
        reduce_stage_1_tid_res_arr_mem_108542_cached_sizze_110200 =
            (int64_t) 8 * num_tasks_108541;
    }
    if (reduce_stage_1_tid_res_arr_mem_108544_cached_sizze_110201 <
        (size_t) ((int64_t) 8 * num_tasks_108541)) {
        reduce_stage_1_tid_res_arr_mem_108544 =
            realloc(reduce_stage_1_tid_res_arr_mem_108544, (int64_t) 8 *
                    num_tasks_108541);
        reduce_stage_1_tid_res_arr_mem_108544_cached_sizze_110201 =
            (int64_t) 8 * num_tasks_108541;
    }
    if (reduce_stage_1_tid_res_arr_mem_108546_cached_sizze_110202 <
        (size_t) ((int64_t) 8 * num_tasks_108541)) {
        reduce_stage_1_tid_res_arr_mem_108546 =
            realloc(reduce_stage_1_tid_res_arr_mem_108546, (int64_t) 8 *
                    num_tasks_108541);
        reduce_stage_1_tid_res_arr_mem_108546_cached_sizze_110202 =
            (int64_t) 8 * num_tasks_108541;
    }
    
    int64_t iter_108548;
    struct futhark_mc_segred_stage_1_parloop_struct_110203
    futhark_mc_segred_stage_1_parloop_struct_110203;
    
    futhark_mc_segred_stage_1_parloop_struct_110203.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_last_res_98416 =
        last_res_98416;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_mem_101318 =
        mem_101318.mem;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_mem_101324 =
        mem_101324.mem;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_min_res_107928 =
        min_res_107928;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_max_res_107993 =
        max_res_107993;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_defunc_1_f_res_108012 =
        defunc_1_f_res_108012;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_reduce_stage_1_tid_res_arr_mem_108542 =
        reduce_stage_1_tid_res_arr_mem_108542;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_reduce_stage_1_tid_res_arr_mem_108544 =
        reduce_stage_1_tid_res_arr_mem_108544;
    futhark_mc_segred_stage_1_parloop_struct_110203.free_reduce_stage_1_tid_res_arr_mem_108546 =
        reduce_stage_1_tid_res_arr_mem_108546;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110204_task;
    
    futhark_mc_segred_stage_1_parloop_110204_task.name =
        "futhark_mc_segred_stage_1_parloop_110204";
    futhark_mc_segred_stage_1_parloop_110204_task.fn =
        futhark_mc_segred_stage_1_parloop_110204;
    futhark_mc_segred_stage_1_parloop_110204_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110203;
    futhark_mc_segred_stage_1_parloop_110204_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110204_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110204_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110204_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110204_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110204_task);
    
    if (futhark_mc_segred_stage_1_parloop_110204_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110204_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110204_total_end -
                 futhark_mc_segred_stage_1_parloop_110204_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110204_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110204_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110204_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_108013 = 0.0;
        defunc_2_reduce_res_108014 = 0.0;
        defunc_2_reduce_res_108015 = 0.0;
    }
    
    double x_108552;
    double x_108553;
    double x_108555;
    double x_108556;
    double x_108558;
    double x_108559;
    
    for (int32_t i_108561 = 0; i_108561 < num_tasks_108541; i_108561++) {
        flat_tid_108467 = i_108561;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_108552 = defunc_2_reduce_res_108013;
            }
            // load next params
            {
                x_108553 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_108542)[flat_tid_108467];
            }
            // red body
            {
                double defunc_1_op_res_108554 = x_108552 + x_108553;
                
                defunc_2_reduce_res_108013 = defunc_1_op_res_108554;
            }
            // load acc params
            {
                x_108555 = defunc_2_reduce_res_108014;
            }
            // load next params
            {
                x_108556 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_108544)[flat_tid_108467];
            }
            // red body
            {
                double defunc_1_op_res_108557 = x_108555 + x_108556;
                
                defunc_2_reduce_res_108014 = defunc_1_op_res_108557;
            }
            // load acc params
            {
                x_108558 = defunc_2_reduce_res_108015;
            }
            // load next params
            {
                x_108559 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_108546)[flat_tid_108467];
            }
            // red body
            {
                double defunc_1_op_res_108560 = x_108558 + x_108559;
                
                defunc_2_reduce_res_108015 = defunc_1_op_res_108560;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_108542);
        free(reduce_stage_1_tid_res_arr_mem_108544);
        free(reduce_stage_1_tid_res_arr_mem_108546);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110199_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110199_end -
                 futhark_mc_segred_task_110199_start;
        
        ctx->futhark_mc_segred_task_110199_runs[tid]++;
        ctx->futhark_mc_segred_task_110199_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110199_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110198->retval_defunc_2_reduce_res_108013 =
            defunc_2_reduce_res_108013;
        *futhark_mc_task_110198->retval_defunc_2_reduce_res_108014 =
            defunc_2_reduce_res_108014;
        *futhark_mc_task_110198->retval_defunc_2_reduce_res_108015 =
            defunc_2_reduce_res_108015;
    }
    return err;
}
struct futhark_mc_task_110205 {
    struct futhark_context *ctx;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101324;
    int64_t free_min_res_107928;
    int64_t free_max_res_107993;
    double free_defunc_1_f_res_108012;
    double free_a11_108049;
    double free_b11_108051;
    double free_c11_108052;
    double *retval_defunc_2_reduce_res_108053;
    double *retval_defunc_2_reduce_res_108054;
};
struct futhark_mc_segred_stage_1_parloop_struct_110209 {
    struct futhark_context *ctx;
    int64_t free_last_res_98416;
    unsigned char *free_mem_101315;
    unsigned char *free_mem_101318;
    unsigned char *free_mem_101324;
    int64_t free_min_res_107928;
    int64_t free_max_res_107993;
    double free_defunc_1_f_res_108012;
    double free_a11_108049;
    double free_b11_108051;
    double free_c11_108052;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_108563;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_108565;
};
static int futhark_mc_segred_stage_1_parloop_110210(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_108496,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110209
    *futhark_mc_segred_stage_1_parloop_struct_110209 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110209 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110209->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110210_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110210_start = get_wall_time();
    
    int64_t last_res_98416 =
            futhark_mc_segred_stage_1_parloop_struct_110209->free_last_res_98416;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110209->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110209->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110209->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t min_res_107928 =
            futhark_mc_segred_stage_1_parloop_struct_110209->free_min_res_107928;
    int64_t max_res_107993 =
            futhark_mc_segred_stage_1_parloop_struct_110209->free_max_res_107993;
    double defunc_1_f_res_108012 =
           futhark_mc_segred_stage_1_parloop_struct_110209->free_defunc_1_f_res_108012;
    double a11_108049 =
           futhark_mc_segred_stage_1_parloop_struct_110209->free_a11_108049;
    double b11_108051 =
           futhark_mc_segred_stage_1_parloop_struct_110209->free_b11_108051;
    double c11_108052 =
           futhark_mc_segred_stage_1_parloop_struct_110209->free_c11_108052;
    struct memblock reduce_stage_1_tid_res_arr_mem_108563 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_108563",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110209->free_reduce_stage_1_tid_res_arr_mem_108563,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_108565 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_108565",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110209->free_reduce_stage_1_tid_res_arr_mem_108565,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108567 = start;
    double x_108498;
    double x_108499;
    double x_108501;
    double x_108502;
    double local_acc_108568 = 0.0;
    double local_acc_108569 = 0.0;
    
    for (; iter_108567 < end; iter_108567++) {
        int64_t gtid_108497 = iter_108567;
        double x_108504;
        
        x_108504 = ((double *) mem_101324.mem)[gtid_108497];
        
        bool cond_108505 = sle64(last_res_98416, gtid_108497);
        int64_t defunc_0_f_res_108506;
        
        if (cond_108505) {
            defunc_0_f_res_108506 = (int64_t) 0;
        } else {
            int64_t i_108507 = add64(max_res_107993, gtid_108497);
            int64_t defunc_0_add_arg_108508;
            
            defunc_0_add_arg_108508 = ((int64_t *) mem_101318.mem)[i_108507];
            
            int64_t defunc_1_add_res_108509 = add64((int64_t) 1,
                                                    defunc_0_add_arg_108508);
            
            defunc_0_f_res_108506 = defunc_1_add_res_108509;
        }
        
        int64_t binop_p_108510 = sub64(defunc_0_f_res_108506, min_res_107928);
        double defunc_0_f_res_108511 = sitofp_i64_f64(binop_p_108510);
        double abs_res_108512 = fabs(defunc_0_f_res_108511);
        double tmp1_108513 = abs_res_108512 / defunc_1_f_res_108012;
        double x_108514 = tmp1_108513 * tmp1_108513;
        double y_108515 = tmp1_108513 * x_108514;
        double tmp2_108516 = 1.0 - y_108515;
        double x_108517 = tmp2_108516 * tmp2_108516;
        double tmp3_108518 = tmp2_108516 * x_108517;
        double tmp4_108519 = x_108504 * tmp3_108518;
        double defunc_1_f_res_108520 = defunc_0_f_res_108511 * tmp4_108519;
        double defunc_0_f_res_108521;
        
        if (cond_108505) {
            defunc_0_f_res_108521 = 0.0;
        } else {
            int64_t i_108522 = add64(max_res_107993, gtid_108497);
            double defunc_0_add_arg_108523;
            
            defunc_0_add_arg_108523 = ((double *) mem_101315.mem)[i_108522];
            defunc_0_f_res_108521 = defunc_0_add_arg_108523;
        }
        
        double x_108524 = a11_108049 * tmp4_108519;
        double y_108525 = b11_108051 * defunc_1_f_res_108520;
        double x_108526 = x_108524 + y_108525;
        double defunc_9_fit_fun_res_108527 = defunc_0_f_res_108521 * x_108526;
        double x_108528 = b11_108051 * tmp4_108519;
        double y_108529 = c11_108052 * defunc_1_f_res_108520;
        double x_108530 = x_108528 + y_108529;
        double defunc_9_slope_fun_res_108531 = defunc_0_f_res_108521 * x_108530;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_108498 = local_acc_108568;
        }
        // Load next params
        {
            x_108499 = defunc_9_fit_fun_res_108527;
        }
        // Red body
        {
            double defunc_1_op_res_108500 = x_108498 + x_108499;
            
            local_acc_108568 = defunc_1_op_res_108500;
        }
        // Load accum params
        {
            x_108501 = local_acc_108569;
        }
        // Load next params
        {
            x_108502 = defunc_9_slope_fun_res_108531;
        }
        // Red body
        {
            double defunc_1_op_res_108503 = x_108501 + x_108502;
            
            local_acc_108569 = defunc_1_op_res_108503;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_108563.mem)[flat_tid_108496] =
        local_acc_108568;
    ((double *) reduce_stage_1_tid_res_arr_mem_108565.mem)[flat_tid_108496] =
        local_acc_108569;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110210_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110210_end -
                 futhark_mc_segred_stage_1_parloop_110210_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110210_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110210_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110210_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110206(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108496 = tid;
    int num_tasks_108562 = info.nsubtasks;
    struct futhark_mc_task_110205 *futhark_mc_task_110205 =
                                  (struct futhark_mc_task_110205 *) args;
    struct futhark_context *ctx = futhark_mc_task_110205->ctx;
    uint64_t futhark_mc_segred_task_110206_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110206_start = get_wall_time();
    
    int64_t last_res_98416 = futhark_mc_task_110205->free_last_res_98416;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_task_110205->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110205->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_task_110205->free_mem_101324,
                                  .size =0, .references =NULL};
    int64_t min_res_107928 = futhark_mc_task_110205->free_min_res_107928;
    int64_t max_res_107993 = futhark_mc_task_110205->free_max_res_107993;
    double defunc_1_f_res_108012 =
           futhark_mc_task_110205->free_defunc_1_f_res_108012;
    double a11_108049 = futhark_mc_task_110205->free_a11_108049;
    double b11_108051 = futhark_mc_task_110205->free_b11_108051;
    double c11_108052 = futhark_mc_task_110205->free_c11_108052;
    double defunc_2_reduce_res_108053 =
           *futhark_mc_task_110205->retval_defunc_2_reduce_res_108053;
    double defunc_2_reduce_res_108054 =
           *futhark_mc_task_110205->retval_defunc_2_reduce_res_108054;
    size_t reduce_stage_1_tid_res_arr_mem_108563_cached_sizze_110207 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_108563 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_108565_cached_sizze_110208 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_108565 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_108563_cached_sizze_110207 <
        (size_t) ((int64_t) 8 * num_tasks_108562)) {
        reduce_stage_1_tid_res_arr_mem_108563 =
            realloc(reduce_stage_1_tid_res_arr_mem_108563, (int64_t) 8 *
                    num_tasks_108562);
        reduce_stage_1_tid_res_arr_mem_108563_cached_sizze_110207 =
            (int64_t) 8 * num_tasks_108562;
    }
    if (reduce_stage_1_tid_res_arr_mem_108565_cached_sizze_110208 <
        (size_t) ((int64_t) 8 * num_tasks_108562)) {
        reduce_stage_1_tid_res_arr_mem_108565 =
            realloc(reduce_stage_1_tid_res_arr_mem_108565, (int64_t) 8 *
                    num_tasks_108562);
        reduce_stage_1_tid_res_arr_mem_108565_cached_sizze_110208 =
            (int64_t) 8 * num_tasks_108562;
    }
    
    int64_t iter_108567;
    struct futhark_mc_segred_stage_1_parloop_struct_110209
    futhark_mc_segred_stage_1_parloop_struct_110209;
    
    futhark_mc_segred_stage_1_parloop_struct_110209.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_last_res_98416 =
        last_res_98416;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_mem_101315 =
        mem_101315.mem;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_mem_101318 =
        mem_101318.mem;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_mem_101324 =
        mem_101324.mem;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_min_res_107928 =
        min_res_107928;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_max_res_107993 =
        max_res_107993;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_defunc_1_f_res_108012 =
        defunc_1_f_res_108012;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_a11_108049 =
        a11_108049;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_b11_108051 =
        b11_108051;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_c11_108052 =
        c11_108052;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_reduce_stage_1_tid_res_arr_mem_108563 =
        reduce_stage_1_tid_res_arr_mem_108563;
    futhark_mc_segred_stage_1_parloop_struct_110209.free_reduce_stage_1_tid_res_arr_mem_108565 =
        reduce_stage_1_tid_res_arr_mem_108565;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110210_task;
    
    futhark_mc_segred_stage_1_parloop_110210_task.name =
        "futhark_mc_segred_stage_1_parloop_110210";
    futhark_mc_segred_stage_1_parloop_110210_task.fn =
        futhark_mc_segred_stage_1_parloop_110210;
    futhark_mc_segred_stage_1_parloop_110210_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110209;
    futhark_mc_segred_stage_1_parloop_110210_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110210_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110210_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110210_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110210_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110210_task);
    
    if (futhark_mc_segred_stage_1_parloop_110210_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110210_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110210_total_end -
                 futhark_mc_segred_stage_1_parloop_110210_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110210_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110210_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110210_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_108053 = 0.0;
        defunc_2_reduce_res_108054 = 0.0;
    }
    
    double x_108570;
    double x_108571;
    double x_108573;
    double x_108574;
    
    for (int32_t i_108576 = 0; i_108576 < num_tasks_108562; i_108576++) {
        flat_tid_108496 = i_108576;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_108570 = defunc_2_reduce_res_108053;
            }
            // load next params
            {
                x_108571 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_108563)[flat_tid_108496];
            }
            // red body
            {
                double defunc_1_op_res_108572 = x_108570 + x_108571;
                
                defunc_2_reduce_res_108053 = defunc_1_op_res_108572;
            }
            // load acc params
            {
                x_108573 = defunc_2_reduce_res_108054;
            }
            // load next params
            {
                x_108574 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_108565)[flat_tid_108496];
            }
            // red body
            {
                double defunc_1_op_res_108575 = x_108573 + x_108574;
                
                defunc_2_reduce_res_108054 = defunc_1_op_res_108575;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_108563);
        free(reduce_stage_1_tid_res_arr_mem_108565);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110206_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110206_end -
                 futhark_mc_segred_task_110206_start;
        
        ctx->futhark_mc_segred_task_110206_runs[tid]++;
        ctx->futhark_mc_segred_task_110206_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110206_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110205->retval_defunc_2_reduce_res_108053 =
            defunc_2_reduce_res_108053;
        *futhark_mc_task_110205->retval_defunc_2_reduce_res_108054 =
            defunc_2_reduce_res_108054;
    }
    return err;
}
static int futhark_mc_segmap_parloop_110197(void *args, int64_t start,
                                            int64_t end, int flat_tid_107925,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110196
    *futhark_mc_segmap_parloop_struct_110196 =
    (struct futhark_mc_segmap_parloop_struct_110196 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110196->ctx;
    uint64_t futhark_mc_segmap_parloop_110197_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110197_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110196->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110196->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110196->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110196->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110196->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110196->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110196->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110196->free_loop_cond_92426;
    int64_t last_res_98416 =
            futhark_mc_segmap_parloop_struct_110196->free_last_res_98416;
    int64_t min_arg_98435 =
            futhark_mc_segmap_parloop_struct_110196->free_min_arg_98435;
    int64_t min_arg_98436 =
            futhark_mc_segmap_parloop_struct_110196->free_min_arg_98436;
    int64_t min_res_98437 =
            futhark_mc_segmap_parloop_struct_110196->free_min_res_98437;
    double max_res_98441 =
           futhark_mc_segmap_parloop_struct_110196->free_max_res_98441;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101321,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101324,
                                  .size =0, .references =NULL};
    struct memblock mem_101327 = {.desc ="mem_101327", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101327,
                                  .size =0, .references =NULL};
    struct memblock mem_101330 = {.desc ="mem_101330", .mem =
                                  futhark_mc_segmap_parloop_struct_110196->free_mem_101330,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_108411 = start;
    
    for (; iter_108411 < end; iter_108411++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108532 = n_m_92409;
        int64_t gtid_107926 = iter_108411;
        int64_t remnant_108533 = iter_108411 - gtid_107926;
        int64_t min_arg_107927 = mul64(jump_92403, gtid_107926);
        int64_t min_res_107928 = smin64(i_92415, min_arg_107927);
        int64_t defunc_0_g_res_107929 = add64((int64_t) 1, min_res_107928);
        bool init_idx_107930;
        int64_t init_idx_107931;
        int64_t init_idx_107932;
        bool loop_while_108412;
        int64_t low_108413;
        int64_t high_108414;
        
        loop_while_108412 = x_92416;
        low_108413 = (int64_t) 0;
        high_108414 = i_92415;
        while (loop_while_108412) {
            int64_t x_108415 = add64(low_108413, high_108414);
            int64_t mid_108416 = sdiv64(x_108415, (int64_t) 2);
            bool x_108417 = sle64((int64_t) 0, mid_108416);
            bool y_108418 = slt64(mid_108416, n_92399);
            bool bounds_check_108419 = x_108417 && y_108418;
            bool index_certs_108420;
            
            if (!bounds_check_108419) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_108416,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_108421;
            
            mid_id_108421 = ((int64_t *) mem_101321.mem)[mid_108416];
            
            bool cond_108422 = slt64(mid_id_108421, (int64_t) 0);
            int64_t mid_idx_108423;
            
            if (cond_108422) {
                mid_idx_108423 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_108423 = mid_id_108421;
            }
            
            bool cond_108424 = sle64(defunc_0_g_res_107929, mid_idx_108423);
            int64_t loopres_108425;
            int64_t loopres_108426;
            
            if (cond_108424) {
                int64_t loopres_t_res_108427 = sub64(mid_108416, (int64_t) 1);
                
                loopres_108425 = low_108413;
                loopres_108426 = loopres_t_res_108427;
            } else {
                int64_t loopres_f_res_108428 = add64((int64_t) 1, mid_108416);
                
                loopres_108425 = loopres_f_res_108428;
                loopres_108426 = high_108414;
            }
            
            bool loop_cond_108429 = sle64(loopres_108425, loopres_108426);
            bool loop_while_tmp_108534 = loop_cond_108429;
            int64_t low_tmp_108535 = loopres_108425;
            int64_t high_tmp_108536 = loopres_108426;
            
            loop_while_108412 = loop_while_tmp_108534;
            low_108413 = low_tmp_108535;
            high_108414 = high_tmp_108536;
        }
        init_idx_107930 = loop_while_108412;
        init_idx_107931 = low_108413;
        init_idx_107932 = high_108414;
        
        bool idx_107951;
        int64_t idx_107952;
        int64_t idx_107953;
        int64_t idx_107954;
        bool loop_while_108430;
        int64_t l_idx_108431;
        int64_t r_idx_108432;
        int64_t span_108433;
        
        loop_while_108430 = loop_cond_92426;
        l_idx_108431 = init_idx_107931;
        r_idx_108432 = init_idx_107931;
        span_108433 = (int64_t) 1;
        while (loop_while_108430) {
            int64_t max_arg_108434 = sub64(l_idx_108431, (int64_t) 1);
            int64_t max_res_108435 = smax64((int64_t) 0, max_arg_108434);
            int64_t min_arg_108436 = add64((int64_t) 1, r_idx_108432);
            int64_t min_res_108437 = smin64(min_arg_98435, min_arg_108436);
            bool x_108438 = sle64((int64_t) 0, max_res_108435);
            bool y_108439 = slt64(max_res_108435, n_92399);
            bool bounds_check_108440 = x_108438 && y_108439;
            bool index_certs_108441;
            
            if (!bounds_check_108440) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_108435,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108442;
            
            x_108442 = ((int64_t *) mem_101321.mem)[max_res_108435];
            
            int64_t abs_arg_108443 = sub64(x_108442, defunc_0_g_res_107929);
            int64_t abs_res_108444 = abs64(abs_arg_108443);
            bool x_108445 = sle64((int64_t) 0, min_res_108437);
            bool y_108446 = slt64(min_res_108437, n_92399);
            bool bounds_check_108447 = x_108445 && y_108446;
            bool index_certs_108448;
            
            if (!bounds_check_108447) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_108437,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108449;
            
            x_108449 = ((int64_t *) mem_101321.mem)[min_res_108437];
            
            int64_t abs_arg_108450 = sub64(x_108449, defunc_0_g_res_107929);
            int64_t abs_res_108451 = abs64(abs_arg_108450);
            bool cond_108452 = max_res_108435 == l_idx_108431;
            int64_t loopres_108453;
            int64_t loopres_108454;
            int64_t loopres_108455;
            
            if (cond_108452) {
                loopres_108453 = l_idx_108431;
                loopres_108454 = r_idx_108432;
                loopres_108455 = min_res_92421;
            } else {
                bool cond_108456 = slt64(abs_res_108444, abs_res_108451);
                bool cond_f_res_108457 = min_res_108437 == r_idx_108432;
                bool x_108458 = !cond_108456;
                bool y_108459 = cond_f_res_108457 && x_108458;
                bool cond_108460 = cond_108456 || y_108459;
                int64_t loopres_f_res_108461;
                
                if (cond_108460) {
                    loopres_f_res_108461 = max_res_108435;
                } else {
                    loopres_f_res_108461 = l_idx_108431;
                }
                
                int64_t loopres_f_res_108462;
                
                if (cond_108460) {
                    loopres_f_res_108462 = r_idx_108432;
                } else {
                    loopres_f_res_108462 = min_res_108437;
                }
                
                int64_t loopres_f_res_108463;
                
                if (cond_108460) {
                    int64_t loopres_f_res_t_res_108464 = add64((int64_t) 1,
                                                               span_108433);
                    
                    loopres_f_res_108463 = loopres_f_res_t_res_108464;
                } else {
                    int64_t loopres_f_res_f_res_108465 = add64((int64_t) 1,
                                                               span_108433);
                    
                    loopres_f_res_108463 = loopres_f_res_f_res_108465;
                }
                loopres_108453 = loopres_f_res_108461;
                loopres_108454 = loopres_f_res_108462;
                loopres_108455 = loopres_f_res_108463;
            }
            
            bool loop_cond_108466 = slt64(loopres_108455, min_res_92421);
            bool loop_while_tmp_108537 = loop_cond_108466;
            int64_t l_idx_tmp_108538 = loopres_108453;
            int64_t r_idx_tmp_108539 = loopres_108454;
            int64_t span_tmp_108540 = loopres_108455;
            
            loop_while_108430 = loop_while_tmp_108537;
            l_idx_108431 = l_idx_tmp_108538;
            r_idx_108432 = r_idx_tmp_108539;
            span_108433 = span_tmp_108540;
        }
        idx_107951 = loop_while_108430;
        idx_107952 = l_idx_108431;
        idx_107953 = r_idx_108432;
        idx_107954 = span_108433;
        
        int64_t min_res_107992 = smin64(min_arg_98436, idx_107952);
        int64_t max_res_107993 = smax64((int64_t) 0, min_res_107992);
        int64_t x_107994 = add64(min_res_98437, max_res_107993);
        int64_t r_107995 = sub64(x_107994, (int64_t) 1);
        bool x_107996 = sle64((int64_t) 0, r_107995);
        bool y_107997 = slt64(r_107995, n_92399);
        bool bounds_check_107998 = x_107996 && y_107997;
        bool index_certs_107999;
        
        if (!bounds_check_107998) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_107995,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108000;
        
        x_108000 = ((int64_t *) mem_101318.mem)[r_107995];
        
        int64_t abs_arg_108001 = sub64(x_108000, min_res_107928);
        int64_t abs_res_108002 = abs64(abs_arg_108001);
        bool x_108003 = sle64((int64_t) 0, max_res_107993);
        bool y_108004 = slt64(max_res_107993, n_92399);
        bool bounds_check_108005 = x_108003 && y_108004;
        bool index_certs_108006;
        
        if (!bounds_check_108005) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_107993,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108007;
        
        x_108007 = ((int64_t *) mem_101318.mem)[max_res_107993];
        
        int64_t abs_arg_108008 = sub64(x_108007, min_res_107928);
        int64_t abs_res_108009 = abs64(abs_arg_108008);
        int64_t max_res_108010 = smax64(abs_res_108002, abs_res_108009);
        double defunc_0_f_res_108011 = sitofp_i64_f64(max_res_108010);
        double defunc_1_f_res_108012 = max_res_98441 + defunc_0_f_res_108011;
        double defunc_2_reduce_res_108013;
        double defunc_2_reduce_res_108014;
        double defunc_2_reduce_res_108015;
        int64_t flat_tid_108467 = (int64_t) 0;
        int32_t num_tasks_108541;
        
        defunc_2_reduce_res_108013 = 0.0;
        defunc_2_reduce_res_108014 = 0.0;
        defunc_2_reduce_res_108015 = 0.0;
        
        struct futhark_mc_task_110198 futhark_mc_task_110198;
        
        futhark_mc_task_110198.ctx = ctx;
        futhark_mc_task_110198.free_last_res_98416 = last_res_98416;
        futhark_mc_task_110198.free_mem_101318 = mem_101318.mem;
        futhark_mc_task_110198.free_mem_101324 = mem_101324.mem;
        futhark_mc_task_110198.free_min_res_107928 = min_res_107928;
        futhark_mc_task_110198.free_max_res_107993 = max_res_107993;
        futhark_mc_task_110198.free_defunc_1_f_res_108012 =
            defunc_1_f_res_108012;
        futhark_mc_task_110198.retval_defunc_2_reduce_res_108013 =
            &defunc_2_reduce_res_108013;
        futhark_mc_task_110198.retval_defunc_2_reduce_res_108014 =
            &defunc_2_reduce_res_108014;
        futhark_mc_task_110198.retval_defunc_2_reduce_res_108015 =
            &defunc_2_reduce_res_108015;
        
        struct scheduler_segop futhark_mc_task_110198_task;
        
        futhark_mc_task_110198_task.args = &futhark_mc_task_110198;
        futhark_mc_task_110198_task.top_level_fn =
            futhark_mc_segred_task_110199;
        futhark_mc_task_110198_task.name = "futhark_mc_segred_task_110199";
        futhark_mc_task_110198_task.iterations = q_92401;
        futhark_mc_task_110198_task.task_time =
            &ctx->futhark_mc_segred_task_110199_total_time;
        futhark_mc_task_110198_task.task_iter =
            &ctx->futhark_mc_segred_task_110199_total_iter;
        futhark_mc_task_110198_task.sched = STATIC;
        futhark_mc_task_110198_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110199_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110198_task);
        
        if (futhark_mc_segred_task_110199_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_108045 = defunc_2_reduce_res_108013 *
               defunc_2_reduce_res_108015;
        double y_108046 = defunc_2_reduce_res_108014 *
               defunc_2_reduce_res_108014;
        double y_108047 = x_108045 - y_108046;
        double det1_108048 = 1.0 / y_108047;
        double a11_108049 = defunc_2_reduce_res_108015 * det1_108048;
        double x_108050 = 0.0 - defunc_2_reduce_res_108014;
        double b11_108051 = det1_108048 * x_108050;
        double c11_108052 = defunc_2_reduce_res_108013 * det1_108048;
        double defunc_2_reduce_res_108053;
        double defunc_2_reduce_res_108054;
        int64_t flat_tid_108496 = (int64_t) 0;
        int32_t num_tasks_108562;
        
        defunc_2_reduce_res_108053 = 0.0;
        defunc_2_reduce_res_108054 = 0.0;
        
        struct futhark_mc_task_110205 futhark_mc_task_110205;
        
        futhark_mc_task_110205.ctx = ctx;
        futhark_mc_task_110205.free_last_res_98416 = last_res_98416;
        futhark_mc_task_110205.free_mem_101315 = mem_101315.mem;
        futhark_mc_task_110205.free_mem_101318 = mem_101318.mem;
        futhark_mc_task_110205.free_mem_101324 = mem_101324.mem;
        futhark_mc_task_110205.free_min_res_107928 = min_res_107928;
        futhark_mc_task_110205.free_max_res_107993 = max_res_107993;
        futhark_mc_task_110205.free_defunc_1_f_res_108012 =
            defunc_1_f_res_108012;
        futhark_mc_task_110205.free_a11_108049 = a11_108049;
        futhark_mc_task_110205.free_b11_108051 = b11_108051;
        futhark_mc_task_110205.free_c11_108052 = c11_108052;
        futhark_mc_task_110205.retval_defunc_2_reduce_res_108053 =
            &defunc_2_reduce_res_108053;
        futhark_mc_task_110205.retval_defunc_2_reduce_res_108054 =
            &defunc_2_reduce_res_108054;
        
        struct scheduler_segop futhark_mc_task_110205_task;
        
        futhark_mc_task_110205_task.args = &futhark_mc_task_110205;
        futhark_mc_task_110205_task.top_level_fn =
            futhark_mc_segred_task_110206;
        futhark_mc_task_110205_task.name = "futhark_mc_segred_task_110206";
        futhark_mc_task_110205_task.iterations = q_92401;
        futhark_mc_task_110205_task.task_time =
            &ctx->futhark_mc_segred_task_110206_total_time;
        futhark_mc_task_110205_task.task_iter =
            &ctx->futhark_mc_segred_task_110206_total_iter;
        futhark_mc_task_110205_task.sched = STATIC;
        futhark_mc_task_110205_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110206_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110205_task);
        
        if (futhark_mc_segred_task_110206_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_101327.mem)[gtid_107926] = defunc_2_reduce_res_108053;
        ((double *) mem_101330.mem)[gtid_107926] = defunc_2_reduce_res_108054;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110197_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110197_end -
                 futhark_mc_segmap_parloop_110197_start;
        
        ctx->futhark_mc_segmap_parloop_110197_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110197_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110197_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110195(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_107925 = tid;
    int num_tasks_108282 = info.nsubtasks;
    struct futhark_mc_task_110191 *futhark_mc_task_110191 =
                                  (struct futhark_mc_task_110191 *) args;
    struct futhark_context *ctx = futhark_mc_task_110191->ctx;
    uint64_t futhark_mc_segmap_nested_task_110195_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110195_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110191->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110191->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110191->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110191->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110191->free_i_92415;
    bool x_92416 = futhark_mc_task_110191->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110191->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110191->free_loop_cond_92426;
    int64_t last_res_98416 = futhark_mc_task_110191->free_last_res_98416;
    int64_t min_arg_98435 = futhark_mc_task_110191->free_min_arg_98435;
    int64_t min_arg_98436 = futhark_mc_task_110191->free_min_arg_98436;
    int64_t min_res_98437 = futhark_mc_task_110191->free_min_res_98437;
    double max_res_98441 = futhark_mc_task_110191->free_max_res_98441;
    struct memblock mem_101315 = {.desc ="mem_101315", .mem =
                                  futhark_mc_task_110191->free_mem_101315,
                                  .size =0, .references =NULL};
    struct memblock mem_101318 = {.desc ="mem_101318", .mem =
                                  futhark_mc_task_110191->free_mem_101318,
                                  .size =0, .references =NULL};
    struct memblock mem_101321 = {.desc ="mem_101321", .mem =
                                  futhark_mc_task_110191->free_mem_101321,
                                  .size =0, .references =NULL};
    struct memblock mem_101324 = {.desc ="mem_101324", .mem =
                                  futhark_mc_task_110191->free_mem_101324,
                                  .size =0, .references =NULL};
    struct memblock mem_101327 = {.desc ="mem_101327", .mem =
                                  futhark_mc_task_110191->free_mem_101327,
                                  .size =0, .references =NULL};
    struct memblock mem_101330 = {.desc ="mem_101330", .mem =
                                  futhark_mc_task_110191->free_mem_101330,
                                  .size =0, .references =NULL};
    int64_t iter_108411;
    struct futhark_mc_segmap_parloop_struct_110196
    futhark_mc_segmap_parloop_struct_110196;
    
    futhark_mc_segmap_parloop_struct_110196.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110196.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110196.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110196.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110196.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110196.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110196.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110196.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110196.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110196.free_last_res_98416 =
        last_res_98416;
    futhark_mc_segmap_parloop_struct_110196.free_min_arg_98435 = min_arg_98435;
    futhark_mc_segmap_parloop_struct_110196.free_min_arg_98436 = min_arg_98436;
    futhark_mc_segmap_parloop_struct_110196.free_min_res_98437 = min_res_98437;
    futhark_mc_segmap_parloop_struct_110196.free_max_res_98441 = max_res_98441;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101315 = mem_101315.mem;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101318 = mem_101318.mem;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101321 = mem_101321.mem;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101324 = mem_101324.mem;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101327 = mem_101327.mem;
    futhark_mc_segmap_parloop_struct_110196.free_mem_101330 = mem_101330.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110197_task;
    
    futhark_mc_segmap_parloop_110197_task.name =
        "futhark_mc_segmap_parloop_110197";
    futhark_mc_segmap_parloop_110197_task.fn = futhark_mc_segmap_parloop_110197;
    futhark_mc_segmap_parloop_110197_task.args =
        &futhark_mc_segmap_parloop_struct_110196;
    futhark_mc_segmap_parloop_110197_task.iterations = iterations;
    futhark_mc_segmap_parloop_110197_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110197_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110197_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110197_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110197_task);
    
    if (futhark_mc_segmap_parloop_110197_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110197_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110197_total_end -
                 futhark_mc_segmap_parloop_110197_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110197_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110197_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110197_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110195_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110195_end -
                 futhark_mc_segmap_nested_task_110195_start;
        
        ctx->futhark_mc_segmap_nested_task_110195_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110195_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110195_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_110164(void *args, int64_t start,
                                            int64_t end, int flat_tid_98403,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110163
    *futhark_mc_segmap_parloop_struct_110163 =
    (struct futhark_mc_segmap_parloop_struct_110163 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110163->ctx;
    uint64_t futhark_mc_segmap_parloop_110164_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110164_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110163->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110163->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110163->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110163->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110163->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110163->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110163->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110163->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110163->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110163->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110163->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101311 =
            futhark_mc_segmap_parloop_struct_110163->free_bytes_101311;
    int64_t bytes_101323 =
            futhark_mc_segmap_parloop_struct_110163->free_bytes_101323;
    int64_t bytes_101326 =
            futhark_mc_segmap_parloop_struct_110163->free_bytes_101326;
    struct memblock mem_101439 = {.desc ="mem_101439", .mem =
                                  futhark_mc_segmap_parloop_struct_110163->free_mem_101439,
                                  .size =0, .references =NULL};
    struct memblock mem_101443 = {.desc ="mem_101443", .mem =
                                  futhark_mc_segmap_parloop_struct_110163->free_mem_101443,
                                  .size =0, .references =NULL};
    size_t mem_101312_cached_sizze_110165 = 0;
    unsigned char *mem_101312 = NULL;
    size_t mem_101315_cached_sizze_110166 = 0;
    unsigned char *mem_101315 = NULL;
    size_t mem_101318_cached_sizze_110167 = 0;
    unsigned char *mem_101318 = NULL;
    size_t mem_101321_cached_sizze_110168 = 0;
    unsigned char *mem_101321 = NULL;
    size_t mem_101324_cached_sizze_110169 = 0;
    unsigned char *mem_101324 = NULL;
    size_t mem_101327_cached_sizze_110170 = 0;
    unsigned char *mem_101327 = NULL;
    size_t mem_101330_cached_sizze_110171 = 0;
    unsigned char *mem_101330 = NULL;
    int64_t iterations = end - start;
    int64_t iter_107899 = start;
    
    if (mem_101312_cached_sizze_110165 < (size_t) bytes_101311) {
        mem_101312 = realloc(mem_101312, bytes_101311);
        mem_101312_cached_sizze_110165 = bytes_101311;
    }
    if (mem_101315_cached_sizze_110166 < (size_t) bytes_101311) {
        mem_101315 = realloc(mem_101315, bytes_101311);
        mem_101315_cached_sizze_110166 = bytes_101311;
    }
    if (mem_101318_cached_sizze_110167 < (size_t) bytes_101311) {
        mem_101318 = realloc(mem_101318, bytes_101311);
        mem_101318_cached_sizze_110167 = bytes_101311;
    }
    if (mem_101321_cached_sizze_110168 < (size_t) bytes_101311) {
        mem_101321 = realloc(mem_101321, bytes_101311);
        mem_101321_cached_sizze_110168 = bytes_101311;
    }
    if (mem_101324_cached_sizze_110169 < (size_t) bytes_101323) {
        mem_101324 = realloc(mem_101324, bytes_101323);
        mem_101324_cached_sizze_110169 = bytes_101323;
    }
    if (mem_101327_cached_sizze_110170 < (size_t) bytes_101326) {
        mem_101327 = realloc(mem_101327, bytes_101326);
        mem_101327_cached_sizze_110170 = bytes_101326;
    }
    if (mem_101330_cached_sizze_110171 < (size_t) bytes_101326) {
        mem_101330 = realloc(mem_101330, bytes_101326);
        mem_101330_cached_sizze_110171 = bytes_101326;
    }
    for (; iter_107899 < end; iter_107899++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108250 = m_92398;
        int64_t gtid_98404 = iter_107899;
        int64_t remnant_108251 = iter_107899 - gtid_98404;
        int64_t flat_tid_107900 = (int64_t) 0;
        int32_t num_tasks_108252;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_110172 futhark_mc_task_110172;
        
        futhark_mc_task_110172.ctx = ctx;
        futhark_mc_task_110172.free_n_92399 = n_92399;
        futhark_mc_task_110172.free_gtid_98404 = gtid_98404;
        futhark_mc_task_110172.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110172.free_mem_101312 = mem_101312;
        
        struct scheduler_segop futhark_mc_task_110172_task;
        
        futhark_mc_task_110172_task.args = &futhark_mc_task_110172;
        futhark_mc_task_110172_task.top_level_fn =
            futhark_mc_segscan_task_110173;
        futhark_mc_task_110172_task.name = "futhark_mc_segscan_task_110173";
        futhark_mc_task_110172_task.iterations = n_92399;
        futhark_mc_task_110172_task.task_time =
            &ctx->futhark_mc_segscan_task_110173_total_time;
        futhark_mc_task_110172_task.task_iter =
            &ctx->futhark_mc_segscan_task_110173_total_iter;
        futhark_mc_task_110172_task.sched = STATIC;
        futhark_mc_task_110172_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_110173_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110172_task);
        
        if (futhark_mc_segscan_task_110173_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_98416;
        
        last_res_98416 = ((int64_t *) mem_101312)[i_92415];
        for (int64_t i_108266 = 0; i_108266 < n_92399; i_108266++) {
            ((double *) mem_101315)[i_108266] = 0.0;
        }
        for (int64_t i_108267 = 0; i_108267 < n_92399; i_108267++) {
            ((int64_t *) mem_101318)[i_108267] = (int64_t) -1;
        }
        
        int64_t flat_tid_107909 = (int64_t) 0;
        int32_t num_tasks_108268;
        struct futhark_mc_task_110179 futhark_mc_task_110179;
        
        futhark_mc_task_110179.ctx = ctx;
        futhark_mc_task_110179.free_n_92399 = n_92399;
        futhark_mc_task_110179.free_gtid_98404 = gtid_98404;
        futhark_mc_task_110179.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110179.free_mem_101312 = mem_101312;
        futhark_mc_task_110179.free_mem_101315 = mem_101315;
        futhark_mc_task_110179.free_mem_101318 = mem_101318;
        
        struct scheduler_segop futhark_mc_task_110179_task;
        
        futhark_mc_task_110179_task.args = &futhark_mc_task_110179;
        futhark_mc_task_110179_task.top_level_fn =
            futhark_mc_segmap_task_110180;
        futhark_mc_task_110179_task.name = "futhark_mc_segmap_task_110180";
        futhark_mc_task_110179_task.iterations = n_92399;
        futhark_mc_task_110179_task.task_time =
            &ctx->futhark_mc_segmap_task_110180_total_time;
        futhark_mc_task_110179_task.task_iter =
            &ctx->futhark_mc_segmap_task_110180_total_iter;
        futhark_mc_task_110179_task.sched = STATIC;
        futhark_mc_task_110179_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110180_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110179_task);
        
        if (futhark_mc_segmap_task_110180_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_107917 = (int64_t) 0;
        int32_t num_tasks_108274;
        struct futhark_mc_task_110183 futhark_mc_task_110183;
        
        futhark_mc_task_110183.ctx = ctx;
        futhark_mc_task_110183.free_n_92399 = n_92399;
        futhark_mc_task_110183.free_mem_101318 = mem_101318;
        futhark_mc_task_110183.free_mem_101321 = mem_101321;
        
        struct scheduler_segop futhark_mc_task_110183_task;
        
        futhark_mc_task_110183_task.args = &futhark_mc_task_110183;
        futhark_mc_task_110183_task.top_level_fn =
            futhark_mc_segmap_task_110184;
        futhark_mc_task_110183_task.name = "futhark_mc_segmap_task_110184";
        futhark_mc_task_110183_task.iterations = n_92399;
        futhark_mc_task_110183_task.task_time =
            &ctx->futhark_mc_segmap_task_110184_total_time;
        futhark_mc_task_110183_task.task_iter =
            &ctx->futhark_mc_segmap_task_110184_total_iter;
        futhark_mc_task_110183_task.sched = STATIC;
        futhark_mc_task_110183_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110184_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110183_task);
        
        if (futhark_mc_segmap_task_110184_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_98435 = sub64(last_res_98416, (int64_t) 1);
        int64_t min_arg_98436 = sub64(last_res_98416, min_res_92421);
        int64_t min_res_98437 = smin64(q_92401, last_res_98416);
        double i64_res_98438 = sitofp_i64_f64(last_res_98416);
        double x_98439 = i64_res_92427 - i64_res_98438;
        double max_arg_98440 = x_98439 / 2.0;
        double max_res_98441 = fmax64(0.0, max_arg_98440);
        int64_t flat_tid_107921 = (int64_t) 0;
        int32_t num_tasks_108278;
        struct futhark_mc_task_110187 futhark_mc_task_110187;
        
        futhark_mc_task_110187.ctx = ctx;
        futhark_mc_task_110187.free_q_92401 = q_92401;
        futhark_mc_task_110187.free_last_res_98416 = last_res_98416;
        futhark_mc_task_110187.free_mem_101324 = mem_101324;
        
        struct scheduler_segop futhark_mc_task_110187_task;
        
        futhark_mc_task_110187_task.args = &futhark_mc_task_110187;
        futhark_mc_task_110187_task.top_level_fn =
            futhark_mc_segmap_task_110188;
        futhark_mc_task_110187_task.name = "futhark_mc_segmap_task_110188";
        futhark_mc_task_110187_task.iterations = q_92401;
        futhark_mc_task_110187_task.task_time =
            &ctx->futhark_mc_segmap_task_110188_total_time;
        futhark_mc_task_110187_task.task_iter =
            &ctx->futhark_mc_segmap_task_110188_total_iter;
        futhark_mc_task_110187_task.sched = STATIC;
        futhark_mc_task_110187_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110188_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110187_task);
        
        if (futhark_mc_segmap_task_110188_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_108091 = (int64_t) 0;
        int32_t num_tasks_108282;
        int64_t flat_tid_107925 = (int64_t) 0;
        struct futhark_mc_task_110191 futhark_mc_task_110191;
        
        futhark_mc_task_110191.ctx = ctx;
        futhark_mc_task_110191.free_n_92399 = n_92399;
        futhark_mc_task_110191.free_q_92401 = q_92401;
        futhark_mc_task_110191.free_jump_92403 = jump_92403;
        futhark_mc_task_110191.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110191.free_i_92415 = i_92415;
        futhark_mc_task_110191.free_x_92416 = x_92416;
        futhark_mc_task_110191.free_min_res_92421 = min_res_92421;
        futhark_mc_task_110191.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_110191.free_last_res_98416 = last_res_98416;
        futhark_mc_task_110191.free_min_arg_98435 = min_arg_98435;
        futhark_mc_task_110191.free_min_arg_98436 = min_arg_98436;
        futhark_mc_task_110191.free_min_res_98437 = min_res_98437;
        futhark_mc_task_110191.free_max_res_98441 = max_res_98441;
        futhark_mc_task_110191.free_mem_101315 = mem_101315;
        futhark_mc_task_110191.free_mem_101318 = mem_101318;
        futhark_mc_task_110191.free_mem_101321 = mem_101321;
        futhark_mc_task_110191.free_mem_101324 = mem_101324;
        futhark_mc_task_110191.free_mem_101327 = mem_101327;
        futhark_mc_task_110191.free_mem_101330 = mem_101330;
        
        struct scheduler_segop futhark_mc_task_110191_task;
        
        futhark_mc_task_110191_task.args = &futhark_mc_task_110191;
        futhark_mc_task_110191_task.top_level_fn =
            futhark_mc_segmap_task_110192;
        futhark_mc_task_110191_task.name = "futhark_mc_segmap_task_110192";
        futhark_mc_task_110191_task.iterations = n_m_92409;
        futhark_mc_task_110191_task.task_time =
            &ctx->futhark_mc_segmap_task_110192_total_time;
        futhark_mc_task_110191_task.task_iter =
            &ctx->futhark_mc_segmap_task_110192_total_iter;
        futhark_mc_task_110191_task.sched = DYNAMIC;
        futhark_mc_task_110191_task.nested_fn =
            futhark_mc_segmap_nested_task_110195;
        
        int futhark_mc_segmap_task_110192_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110191_task);
        
        if (futhark_mc_segmap_task_110192_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101439.mem + gtid_98404 * n_m_92409 * (int64_t) 8,
                    mem_101327 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101443.mem + gtid_98404 * n_m_92409 * (int64_t) 8,
                    mem_101330 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101312);
    free(mem_101315);
    free(mem_101318);
    free(mem_101321);
    free(mem_101324);
    free(mem_101327);
    free(mem_101330);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110164_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110164_end -
                 futhark_mc_segmap_parloop_110164_start;
        
        ctx->futhark_mc_segmap_parloop_110164_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110164_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110164_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110162(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_98403 = tid;
    int num_tasks_107680 = info.nsubtasks;
    struct futhark_mc_task_110151 *futhark_mc_task_110151 =
                                  (struct futhark_mc_task_110151 *) args;
    struct futhark_context *ctx = futhark_mc_task_110151->ctx;
    uint64_t futhark_mc_segmap_nested_task_110162_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110162_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110151->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110151->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110151->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110151->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110151->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110151->free_i_92415;
    bool x_92416 = futhark_mc_task_110151->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110151->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110151->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110151->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110151->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101311 = futhark_mc_task_110151->free_bytes_101311;
    int64_t bytes_101323 = futhark_mc_task_110151->free_bytes_101323;
    int64_t bytes_101326 = futhark_mc_task_110151->free_bytes_101326;
    struct memblock mem_101439 = {.desc ="mem_101439", .mem =
                                  futhark_mc_task_110151->free_mem_101439,
                                  .size =0, .references =NULL};
    struct memblock mem_101443 = {.desc ="mem_101443", .mem =
                                  futhark_mc_task_110151->free_mem_101443,
                                  .size =0, .references =NULL};
    int64_t iter_107899;
    struct futhark_mc_segmap_parloop_struct_110163
    futhark_mc_segmap_parloop_struct_110163;
    
    futhark_mc_segmap_parloop_struct_110163.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110163.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110163.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110163.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110163.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110163.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110163.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110163.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110163.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110163.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110163.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110163.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110163.free_bytes_101311 = bytes_101311;
    futhark_mc_segmap_parloop_struct_110163.free_bytes_101323 = bytes_101323;
    futhark_mc_segmap_parloop_struct_110163.free_bytes_101326 = bytes_101326;
    futhark_mc_segmap_parloop_struct_110163.free_mem_101439 = mem_101439.mem;
    futhark_mc_segmap_parloop_struct_110163.free_mem_101443 = mem_101443.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110164_task;
    
    futhark_mc_segmap_parloop_110164_task.name =
        "futhark_mc_segmap_parloop_110164";
    futhark_mc_segmap_parloop_110164_task.fn = futhark_mc_segmap_parloop_110164;
    futhark_mc_segmap_parloop_110164_task.args =
        &futhark_mc_segmap_parloop_struct_110163;
    futhark_mc_segmap_parloop_110164_task.iterations = iterations;
    futhark_mc_segmap_parloop_110164_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110164_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110164_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110164_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110164_task);
    
    if (futhark_mc_segmap_parloop_110164_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110164_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110164_total_end -
                 futhark_mc_segmap_parloop_110164_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110164_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110164_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110164_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110162_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110162_end -
                 futhark_mc_segmap_nested_task_110162_start;
        
        ctx->futhark_mc_segmap_nested_task_110162_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110162_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110162_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110211 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101445;
    int64_t free_bytes_101457;
    int64_t free_bytes_101460;
    unsigned char *free_mem_101573;
    unsigned char *free_mem_101577;
};
struct futhark_mc_segmap_parloop_struct_110213 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101445;
    int64_t free_bytes_101457;
    int64_t free_bytes_101460;
    unsigned char *free_mem_101573;
    unsigned char *free_mem_101577;
};
static int futhark_mc_segmap_parloop_110214(void *args, int64_t start,
                                            int64_t end, int flat_tid_98784,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110213
    *futhark_mc_segmap_parloop_struct_110213 =
    (struct futhark_mc_segmap_parloop_struct_110213 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110213->ctx;
    uint64_t futhark_mc_segmap_parloop_110214_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110214_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110213->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110213->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110213->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110213->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110213->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110213->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110213->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110213->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110213->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110213->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110213->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101445 =
            futhark_mc_segmap_parloop_struct_110213->free_bytes_101445;
    int64_t bytes_101457 =
            futhark_mc_segmap_parloop_struct_110213->free_bytes_101457;
    int64_t bytes_101460 =
            futhark_mc_segmap_parloop_struct_110213->free_bytes_101460;
    struct memblock mem_101573 = {.desc ="mem_101573", .mem =
                                  futhark_mc_segmap_parloop_struct_110213->free_mem_101573,
                                  .size =0, .references =NULL};
    struct memblock mem_101577 = {.desc ="mem_101577", .mem =
                                  futhark_mc_segmap_parloop_struct_110213->free_mem_101577,
                                  .size =0, .references =NULL};
    size_t mem_101467_cached_sizze_110215 = 0;
    unsigned char *mem_101467 = NULL;
    size_t mem_101482_cached_sizze_110216 = 0;
    unsigned char *mem_101482 = NULL;
    size_t mem_101485_cached_sizze_110217 = 0;
    unsigned char *mem_101485 = NULL;
    size_t mem_101512_cached_sizze_110218 = 0;
    unsigned char *mem_101512 = NULL;
    size_t mem_101527_cached_sizze_110219 = 0;
    unsigned char *mem_101527 = NULL;
    size_t mem_101542_cached_sizze_110220 = 0;
    unsigned char *mem_101542 = NULL;
    size_t mem_101545_cached_sizze_110221 = 0;
    unsigned char *mem_101545 = NULL;
    int64_t iterations = end - start;
    int64_t iter_108578 = start;
    
    if (mem_101467_cached_sizze_110215 < (size_t) bytes_101445) {
        mem_101467 = realloc(mem_101467, bytes_101445);
        mem_101467_cached_sizze_110215 = bytes_101445;
    }
    if (mem_101482_cached_sizze_110216 < (size_t) bytes_101445) {
        mem_101482 = realloc(mem_101482, bytes_101445);
        mem_101482_cached_sizze_110216 = bytes_101445;
    }
    if (mem_101485_cached_sizze_110217 < (size_t) bytes_101445) {
        mem_101485 = realloc(mem_101485, bytes_101445);
        mem_101485_cached_sizze_110217 = bytes_101445;
    }
    if (mem_101512_cached_sizze_110218 < (size_t) bytes_101445) {
        mem_101512 = realloc(mem_101512, bytes_101445);
        mem_101512_cached_sizze_110218 = bytes_101445;
    }
    if (mem_101527_cached_sizze_110219 < (size_t) bytes_101457) {
        mem_101527 = realloc(mem_101527, bytes_101457);
        mem_101527_cached_sizze_110219 = bytes_101457;
    }
    if (mem_101542_cached_sizze_110220 < (size_t) bytes_101460) {
        mem_101542 = realloc(mem_101542, bytes_101460);
        mem_101542_cached_sizze_110220 = bytes_101460;
    }
    if (mem_101545_cached_sizze_110221 < (size_t) bytes_101460) {
        mem_101545 = realloc(mem_101545, bytes_101460);
        mem_101545_cached_sizze_110221 = bytes_101460;
    }
    for (; iter_108578 < end; iter_108578++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_108802 = m_92398;
        int64_t gtid_98785 = iter_108578;
        int64_t remnant_108803 = iter_108578 - gtid_98785;
        int64_t discard_100003;
        int64_t scanacc_108580 = (int64_t) 0;
        
        for (int64_t i_108579 = 0; i_108579 < n_92399; i_108579++) {
            double x_108582;
            
            x_108582 = ((double *) Y_mem_100186.mem)[gtid_98785 * n_92399 +
                                                     i_108579];
            
            bool isnan_res_108583;
            
            isnan_res_108583 = futrts_isnan64(x_108582);
            
            bool defunc_0_p_res_108584 = !isnan_res_108583;
            int64_t defunc_0_f_res_108585 =
                    btoi_bool_i64(defunc_0_p_res_108584);
            int64_t defunc_1_op_res_108586 = add64(defunc_0_f_res_108585,
                                                   scanacc_108580);
            
            ((int64_t *) mem_101467)[i_108579] = defunc_1_op_res_108586;
            
            int64_t scanacc_tmp_108804 = defunc_1_op_res_108586;
            
            scanacc_108580 = scanacc_tmp_108804;
        }
        discard_100003 = scanacc_108580;
        
        int64_t last_res_94095;
        
        last_res_94095 = ((int64_t *) mem_101467)[i_92415];
        for (int64_t i_108806 = 0; i_108806 < n_92399; i_108806++) {
            ((double *) mem_101482)[i_108806] = 0.0;
        }
        for (int64_t i_108807 = 0; i_108807 < n_92399; i_108807++) {
            ((int64_t *) mem_101485)[i_108807] = (int64_t) -1;
        }
        for (int64_t write_iter_108588 = 0; write_iter_108588 < n_92399;
             write_iter_108588++) {
            double write_iv_108591;
            
            write_iv_108591 = ((double *) Y_mem_100186.mem)[gtid_98785 *
                                                            n_92399 +
                                                            write_iter_108588];
            
            bool isnan_res_108592;
            
            isnan_res_108592 = futrts_isnan64(write_iv_108591);
            
            bool defunc_0_p_res_108593 = !isnan_res_108592;
            int64_t defunc_1_f_res_108594;
            
            if (defunc_0_p_res_108593) {
                int64_t write_iv_108595;
                
                write_iv_108595 = ((int64_t *) mem_101467)[write_iter_108588];
                
                int64_t defunc_1_f_res_t_res_108596 = sub64(write_iv_108595,
                                                            (int64_t) 1);
                
                defunc_1_f_res_108594 = defunc_1_f_res_t_res_108596;
            } else {
                defunc_1_f_res_108594 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_108594) &&
                slt64(defunc_1_f_res_108594, n_92399)) {
                ((int64_t *) mem_101485)[defunc_1_f_res_108594] =
                    write_iter_108588;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_108594) &&
                slt64(defunc_1_f_res_108594, n_92399)) {
                if ((int64_t) 8 > 0)
                    memmove(mem_101482 + defunc_1_f_res_108594 * (int64_t) 8,
                            Y_mem_100186.mem + (gtid_98785 * n_92399 +
                                                write_iter_108588) *
                            (int64_t) 8, (int64_t) 8);
            }
        }
        for (int64_t i_108600 = 0; i_108600 < n_92399; i_108600++) {
            int64_t x_108602;
            
            x_108602 = ((int64_t *) mem_101485)[i_108600];
            
            int64_t defunc_0_f_res_108603 = add64((int64_t) 1, x_108602);
            
            ((int64_t *) mem_101512)[i_108600] = defunc_0_f_res_108603;
        }
        
        int64_t min_arg_94110 = sub64(last_res_94095, (int64_t) 1);
        int64_t min_arg_94111 = sub64(last_res_94095, min_res_92421);
        int64_t min_res_94112 = smin64(q_92401, last_res_94095);
        double i64_res_94113 = sitofp_i64_f64(last_res_94095);
        double x_94114 = i64_res_92427 - i64_res_94113;
        double max_arg_94115 = x_94114 / 2.0;
        double max_res_94116 = fmax64(0.0, max_arg_94115);
        
        for (int64_t i_108605 = 0; i_108605 < q_92401; i_108605++) {
            bool cond_108607 = sle64(last_res_94095, i_108605);
            double defunc_0_f_res_108608;
            
            if (cond_108607) {
                defunc_0_f_res_108608 = 0.0;
            } else {
                defunc_0_f_res_108608 = 1.0;
            }
            ((double *) mem_101527)[i_108605] = defunc_0_f_res_108608;
        }
        for (int64_t i_108610 = 0; i_108610 < n_m_92409; i_108610++) {
            int64_t min_arg_108613 = mul64(jump_92403, i_108610);
            int64_t min_res_108614 = smin64(i_92415, min_arg_108613);
            int64_t defunc_0_g_res_108615 = add64((int64_t) 1, min_res_108614);
            bool init_idx_108616;
            int64_t init_idx_108617;
            int64_t init_idx_108618;
            bool loop_while_108619;
            int64_t low_108620;
            int64_t high_108621;
            
            loop_while_108619 = x_92416;
            low_108620 = (int64_t) 0;
            high_108621 = i_92415;
            while (loop_while_108619) {
                int64_t x_108622 = add64(low_108620, high_108621);
                int64_t mid_108623 = sdiv64(x_108622, (int64_t) 2);
                bool x_108624 = sle64((int64_t) 0, mid_108623);
                bool y_108625 = slt64(mid_108623, n_92399);
                bool bounds_check_108626 = x_108624 && y_108625;
                bool index_certs_108627;
                
                if (!bounds_check_108626) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_108623,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t mid_id_108628;
                
                mid_id_108628 = ((int64_t *) mem_101512)[mid_108623];
                
                bool cond_108629 = slt64(mid_id_108628, (int64_t) 0);
                int64_t mid_idx_108630;
                
                if (cond_108629) {
                    mid_idx_108630 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_108630 = mid_id_108628;
                }
                
                bool cond_108631 = sle64(defunc_0_g_res_108615, mid_idx_108630);
                int64_t loopres_108632;
                int64_t loopres_108633;
                
                if (cond_108631) {
                    int64_t loopres_t_res_108634 = sub64(mid_108623,
                                                         (int64_t) 1);
                    
                    loopres_108632 = low_108620;
                    loopres_108633 = loopres_t_res_108634;
                } else {
                    int64_t loopres_f_res_108635 = add64((int64_t) 1,
                                                         mid_108623);
                    
                    loopres_108632 = loopres_f_res_108635;
                    loopres_108633 = high_108621;
                }
                
                bool loop_cond_108636 = sle64(loopres_108632, loopres_108633);
                bool loop_while_tmp_108814 = loop_cond_108636;
                int64_t low_tmp_108815 = loopres_108632;
                int64_t high_tmp_108816 = loopres_108633;
                
                loop_while_108619 = loop_while_tmp_108814;
                low_108620 = low_tmp_108815;
                high_108621 = high_tmp_108816;
            }
            init_idx_108616 = loop_while_108619;
            init_idx_108617 = low_108620;
            init_idx_108618 = high_108621;
            
            bool idx_108637;
            int64_t idx_108638;
            int64_t idx_108639;
            int64_t idx_108640;
            bool loop_while_108641;
            int64_t l_idx_108642;
            int64_t r_idx_108643;
            int64_t span_108644;
            
            loop_while_108641 = loop_cond_92426;
            l_idx_108642 = init_idx_108617;
            r_idx_108643 = init_idx_108617;
            span_108644 = (int64_t) 1;
            while (loop_while_108641) {
                int64_t max_arg_108645 = sub64(l_idx_108642, (int64_t) 1);
                int64_t max_res_108646 = smax64((int64_t) 0, max_arg_108645);
                int64_t min_arg_108647 = add64((int64_t) 1, r_idx_108643);
                int64_t min_res_108648 = smin64(min_arg_94110, min_arg_108647);
                bool x_108649 = sle64((int64_t) 0, max_res_108646);
                bool y_108650 = slt64(max_res_108646, n_92399);
                bool bounds_check_108651 = x_108649 && y_108650;
                bool index_certs_108652;
                
                if (!bounds_check_108651) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_108646,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_108653;
                
                x_108653 = ((int64_t *) mem_101512)[max_res_108646];
                
                int64_t abs_arg_108654 = sub64(x_108653, defunc_0_g_res_108615);
                int64_t abs_res_108655 = abs64(abs_arg_108654);
                bool x_108656 = sle64((int64_t) 0, min_res_108648);
                bool y_108657 = slt64(min_res_108648, n_92399);
                bool bounds_check_108658 = x_108656 && y_108657;
                bool index_certs_108659;
                
                if (!bounds_check_108658) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_108648,
                                  "] out of bounds for array of shape [",
                                  (long long) n_92399, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                    err = 1;
                    goto cleanup;
                }
                
                int64_t x_108660;
                
                x_108660 = ((int64_t *) mem_101512)[min_res_108648];
                
                int64_t abs_arg_108661 = sub64(x_108660, defunc_0_g_res_108615);
                int64_t abs_res_108662 = abs64(abs_arg_108661);
                bool cond_108663 = max_res_108646 == l_idx_108642;
                int64_t loopres_108664;
                int64_t loopres_108665;
                int64_t loopres_108666;
                
                if (cond_108663) {
                    loopres_108664 = l_idx_108642;
                    loopres_108665 = r_idx_108643;
                    loopres_108666 = min_res_92421;
                } else {
                    bool cond_108667 = slt64(abs_res_108655, abs_res_108662);
                    bool cond_f_res_108668 = min_res_108648 == r_idx_108643;
                    bool x_108669 = !cond_108667;
                    bool y_108670 = cond_f_res_108668 && x_108669;
                    bool cond_108671 = cond_108667 || y_108670;
                    int64_t loopres_f_res_108672;
                    
                    if (cond_108671) {
                        loopres_f_res_108672 = max_res_108646;
                    } else {
                        loopres_f_res_108672 = l_idx_108642;
                    }
                    
                    int64_t loopres_f_res_108673;
                    
                    if (cond_108671) {
                        loopres_f_res_108673 = r_idx_108643;
                    } else {
                        loopres_f_res_108673 = min_res_108648;
                    }
                    
                    int64_t loopres_f_res_108674;
                    
                    if (cond_108671) {
                        int64_t loopres_f_res_t_res_108675 = add64((int64_t) 1,
                                                                   span_108644);
                        
                        loopres_f_res_108674 = loopres_f_res_t_res_108675;
                    } else {
                        int64_t loopres_f_res_f_res_108676 = add64((int64_t) 1,
                                                                   span_108644);
                        
                        loopres_f_res_108674 = loopres_f_res_f_res_108676;
                    }
                    loopres_108664 = loopres_f_res_108672;
                    loopres_108665 = loopres_f_res_108673;
                    loopres_108666 = loopres_f_res_108674;
                }
                
                bool loop_cond_108677 = slt64(loopres_108666, min_res_92421);
                bool loop_while_tmp_108817 = loop_cond_108677;
                int64_t l_idx_tmp_108818 = loopres_108664;
                int64_t r_idx_tmp_108819 = loopres_108665;
                int64_t span_tmp_108820 = loopres_108666;
                
                loop_while_108641 = loop_while_tmp_108817;
                l_idx_108642 = l_idx_tmp_108818;
                r_idx_108643 = r_idx_tmp_108819;
                span_108644 = span_tmp_108820;
            }
            idx_108637 = loop_while_108641;
            idx_108638 = l_idx_108642;
            idx_108639 = r_idx_108643;
            idx_108640 = span_108644;
            
            int64_t min_res_108678 = smin64(min_arg_94111, idx_108638);
            int64_t max_res_108679 = smax64((int64_t) 0, min_res_108678);
            int64_t x_108680 = add64(min_res_94112, max_res_108679);
            int64_t r_108681 = sub64(x_108680, (int64_t) 1);
            bool x_108682 = sle64((int64_t) 0, r_108681);
            bool y_108683 = slt64(r_108681, n_92399);
            bool bounds_check_108684 = x_108682 && y_108683;
            bool index_certs_108685;
            
            if (!bounds_check_108684) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_108681,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108686;
            
            x_108686 = ((int64_t *) mem_101485)[r_108681];
            
            int64_t abs_arg_108687 = sub64(x_108686, min_res_108614);
            int64_t abs_res_108688 = abs64(abs_arg_108687);
            bool x_108689 = sle64((int64_t) 0, max_res_108679);
            bool y_108690 = slt64(max_res_108679, n_92399);
            bool bounds_check_108691 = x_108689 && y_108690;
            bool index_certs_108692;
            
            if (!bounds_check_108691) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_108679,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_108693;
            
            x_108693 = ((int64_t *) mem_101485)[max_res_108679];
            
            int64_t abs_arg_108694 = sub64(x_108693, min_res_108614);
            int64_t abs_res_108695 = abs64(abs_arg_108694);
            int64_t max_res_108696 = smax64(abs_res_108688, abs_res_108695);
            double defunc_0_f_res_108697 = sitofp_i64_f64(max_res_108696);
            double defunc_1_f_res_108698 = max_res_94116 +
                   defunc_0_f_res_108697;
            double defunc_2_reduce_res_108699;
            double defunc_2_reduce_res_108700;
            double defunc_2_reduce_res_108701;
            double defunc_2_reduce_res_108702;
            double defunc_2_reduce_res_108703;
            double redout_108705;
            double redout_108706;
            double redout_108707;
            double redout_108708;
            double redout_108709;
            
            redout_108705 = 0.0;
            redout_108706 = 0.0;
            redout_108707 = 0.0;
            redout_108708 = 0.0;
            redout_108709 = 0.0;
            for (int64_t i_108704 = 0; i_108704 < q_92401; i_108704++) {
                double x_108710;
                
                x_108710 = ((double *) mem_101527)[i_108704];
                
                bool cond_108711 = sle64(last_res_94095, i_108704);
                int64_t defunc_0_f_res_108712;
                
                if (cond_108711) {
                    defunc_0_f_res_108712 = (int64_t) 0;
                } else {
                    int64_t i_108713 = add64(max_res_108679, i_108704);
                    int64_t defunc_0_add_arg_108714;
                    
                    defunc_0_add_arg_108714 =
                        ((int64_t *) mem_101485)[i_108713];
                    
                    int64_t defunc_1_add_res_108715 = add64((int64_t) 1,
                                                            defunc_0_add_arg_108714);
                    
                    defunc_0_f_res_108712 = defunc_1_add_res_108715;
                }
                
                int64_t binop_p_108716 = sub64(defunc_0_f_res_108712,
                                               min_res_108614);
                double defunc_0_f_res_108717 = sitofp_i64_f64(binop_p_108716);
                double abs_res_108718 = fabs(defunc_0_f_res_108717);
                double tmp1_108719 = abs_res_108718 / defunc_1_f_res_108698;
                double x_108720 = tmp1_108719 * tmp1_108719;
                double y_108721 = tmp1_108719 * x_108720;
                double tmp2_108722 = 1.0 - y_108721;
                double x_108723 = tmp2_108722 * tmp2_108722;
                double tmp3_108724 = tmp2_108722 * x_108723;
                double w_j_108725 = x_108710 * tmp3_108724;
                double xw_j_108726 = defunc_0_f_res_108717 * w_j_108725;
                double x2w_j_108727 = defunc_0_f_res_108717 * xw_j_108726;
                double x3w_j_108728 = defunc_0_f_res_108717 * x2w_j_108727;
                double x4w_j_108729 = defunc_0_f_res_108717 * x3w_j_108728;
                double defunc_1_op_res_108730 = w_j_108725 + redout_108705;
                double defunc_1_op_res_108731 = xw_j_108726 + redout_108706;
                double defunc_1_op_res_108732 = x2w_j_108727 + redout_108707;
                double defunc_1_op_res_108733 = x3w_j_108728 + redout_108708;
                double defunc_1_op_res_108734 = x4w_j_108729 + redout_108709;
                double redout_tmp_108821 = defunc_1_op_res_108730;
                double redout_tmp_108822 = defunc_1_op_res_108731;
                double redout_tmp_108823 = defunc_1_op_res_108732;
                double redout_tmp_108824 = defunc_1_op_res_108733;
                double redout_tmp_108825 = defunc_1_op_res_108734;
                
                redout_108705 = redout_tmp_108821;
                redout_108706 = redout_tmp_108822;
                redout_108707 = redout_tmp_108823;
                redout_108708 = redout_tmp_108824;
                redout_108709 = redout_tmp_108825;
            }
            defunc_2_reduce_res_108699 = redout_108705;
            defunc_2_reduce_res_108700 = redout_108706;
            defunc_2_reduce_res_108701 = redout_108707;
            defunc_2_reduce_res_108702 = redout_108708;
            defunc_2_reduce_res_108703 = redout_108709;
            
            double x_108735 = defunc_2_reduce_res_108701 *
                   defunc_2_reduce_res_108703;
            double y_108736 = defunc_2_reduce_res_108702 *
                   defunc_2_reduce_res_108702;
            double a12_108737 = x_108735 - y_108736;
            double x_108738 = defunc_2_reduce_res_108701 *
                   defunc_2_reduce_res_108702;
            double y_108739 = defunc_2_reduce_res_108700 *
                   defunc_2_reduce_res_108703;
            double b12_108740 = x_108738 - y_108739;
            double x_108741 = defunc_2_reduce_res_108700 *
                   defunc_2_reduce_res_108702;
            double y_108742 = defunc_2_reduce_res_108701 *
                   defunc_2_reduce_res_108701;
            double c12_108743 = x_108741 - y_108742;
            double x_108744 = defunc_2_reduce_res_108699 *
                   defunc_2_reduce_res_108703;
            double b2_108745 = x_108744 - y_108742;
            double x_108746 = defunc_2_reduce_res_108700 *
                   defunc_2_reduce_res_108701;
            double y_108747 = defunc_2_reduce_res_108699 *
                   defunc_2_reduce_res_108702;
            double c2_108748 = x_108746 - y_108747;
            double x_108749 = defunc_2_reduce_res_108699 * a12_108737;
            double y_108750 = defunc_2_reduce_res_108700 * b12_108740;
            double x_108751 = x_108749 + y_108750;
            double y_108752 = defunc_2_reduce_res_108701 * c12_108743;
            double y_108753 = x_108751 + y_108752;
            double det_108754 = 1.0 / y_108753;
            double a12_108755 = a12_108737 * det_108754;
            double b12_108756 = b12_108740 * det_108754;
            double c12_108757 = c12_108743 * det_108754;
            double b2_108758 = b2_108745 * det_108754;
            double c2_108759 = c2_108748 * det_108754;
            double defunc_2_reduce_res_108760;
            double defunc_2_reduce_res_108761;
            double redout_108763;
            double redout_108764;
            
            redout_108763 = 0.0;
            redout_108764 = 0.0;
            for (int64_t i_108762 = 0; i_108762 < q_92401; i_108762++) {
                double x_108765;
                
                x_108765 = ((double *) mem_101527)[i_108762];
                
                bool cond_108766 = sle64(last_res_94095, i_108762);
                int64_t defunc_0_f_res_108767;
                
                if (cond_108766) {
                    defunc_0_f_res_108767 = (int64_t) 0;
                } else {
                    int64_t i_108768 = add64(max_res_108679, i_108762);
                    int64_t defunc_0_add_arg_108769;
                    
                    defunc_0_add_arg_108769 =
                        ((int64_t *) mem_101485)[i_108768];
                    
                    int64_t defunc_1_add_res_108770 = add64((int64_t) 1,
                                                            defunc_0_add_arg_108769);
                    
                    defunc_0_f_res_108767 = defunc_1_add_res_108770;
                }
                
                int64_t binop_p_108771 = sub64(defunc_0_f_res_108767,
                                               min_res_108614);
                double defunc_0_f_res_108772 = sitofp_i64_f64(binop_p_108771);
                double abs_res_108773 = fabs(defunc_0_f_res_108772);
                double tmp1_108774 = abs_res_108773 / defunc_1_f_res_108698;
                double x_108775 = tmp1_108774 * tmp1_108774;
                double y_108776 = tmp1_108774 * x_108775;
                double tmp2_108777 = 1.0 - y_108776;
                double x_108778 = tmp2_108777 * tmp2_108777;
                double tmp3_108779 = tmp2_108777 * x_108778;
                double tmp4_108780 = x_108765 * tmp3_108779;
                double defunc_1_f_res_108781 = defunc_0_f_res_108772 *
                       tmp4_108780;
                double defunc_1_f_res_108782 = defunc_0_f_res_108772 *
                       defunc_1_f_res_108781;
                double defunc_0_f_res_108783;
                
                if (cond_108766) {
                    defunc_0_f_res_108783 = 0.0;
                } else {
                    int64_t i_108784 = add64(max_res_108679, i_108762);
                    double defunc_0_add_arg_108785;
                    
                    defunc_0_add_arg_108785 = ((double *) mem_101482)[i_108784];
                    defunc_0_f_res_108783 = defunc_0_add_arg_108785;
                }
                
                double x_108786 = a12_108755 * tmp4_108780;
                double y_108787 = b12_108756 * defunc_1_f_res_108781;
                double x_108788 = x_108786 + y_108787;
                double y_108789 = c12_108757 * defunc_1_f_res_108782;
                double x_108790 = x_108788 + y_108789;
                double defunc_9_fit_fun_res_108791 = defunc_0_f_res_108783 *
                       x_108790;
                double x_108792 = b12_108756 * tmp4_108780;
                double y_108793 = b2_108758 * defunc_1_f_res_108781;
                double x_108794 = x_108792 + y_108793;
                double y_108795 = c2_108759 * defunc_1_f_res_108782;
                double x_108796 = x_108794 + y_108795;
                double defunc_9_slope_fun_res_108797 = defunc_0_f_res_108783 *
                       x_108796;
                double defunc_1_op_res_108798 = defunc_9_fit_fun_res_108791 +
                       redout_108763;
                double defunc_1_op_res_108799 = defunc_9_slope_fun_res_108797 +
                       redout_108764;
                double redout_tmp_108826 = defunc_1_op_res_108798;
                double redout_tmp_108827 = defunc_1_op_res_108799;
                
                redout_108763 = redout_tmp_108826;
                redout_108764 = redout_tmp_108827;
            }
            defunc_2_reduce_res_108760 = redout_108763;
            defunc_2_reduce_res_108761 = redout_108764;
            ((double *) mem_101542)[i_108610] = defunc_2_reduce_res_108760;
            ((double *) mem_101545)[i_108610] = defunc_2_reduce_res_108761;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101573.mem + gtid_98785 * n_m_92409 * (int64_t) 8,
                    mem_101542 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101577.mem + gtid_98785 * n_m_92409 * (int64_t) 8,
                    mem_101545 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101467);
    free(mem_101482);
    free(mem_101485);
    free(mem_101512);
    free(mem_101527);
    free(mem_101542);
    free(mem_101545);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110214_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110214_end -
                 futhark_mc_segmap_parloop_110214_start;
        
        ctx->futhark_mc_segmap_parloop_110214_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110214_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110214_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110212(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_98784 = tid;
    int num_tasks_108577 = info.nsubtasks;
    struct futhark_mc_task_110211 *futhark_mc_task_110211 =
                                  (struct futhark_mc_task_110211 *) args;
    struct futhark_context *ctx = futhark_mc_task_110211->ctx;
    uint64_t futhark_mc_segmap_task_110212_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110212_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110211->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110211->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110211->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110211->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110211->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110211->free_i_92415;
    bool x_92416 = futhark_mc_task_110211->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110211->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110211->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110211->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110211->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101445 = futhark_mc_task_110211->free_bytes_101445;
    int64_t bytes_101457 = futhark_mc_task_110211->free_bytes_101457;
    int64_t bytes_101460 = futhark_mc_task_110211->free_bytes_101460;
    struct memblock mem_101573 = {.desc ="mem_101573", .mem =
                                  futhark_mc_task_110211->free_mem_101573,
                                  .size =0, .references =NULL};
    struct memblock mem_101577 = {.desc ="mem_101577", .mem =
                                  futhark_mc_task_110211->free_mem_101577,
                                  .size =0, .references =NULL};
    int64_t iter_108578;
    struct futhark_mc_segmap_parloop_struct_110213
    futhark_mc_segmap_parloop_struct_110213;
    
    futhark_mc_segmap_parloop_struct_110213.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110213.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110213.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110213.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110213.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110213.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110213.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110213.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110213.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110213.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110213.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110213.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110213.free_bytes_101445 = bytes_101445;
    futhark_mc_segmap_parloop_struct_110213.free_bytes_101457 = bytes_101457;
    futhark_mc_segmap_parloop_struct_110213.free_bytes_101460 = bytes_101460;
    futhark_mc_segmap_parloop_struct_110213.free_mem_101573 = mem_101573.mem;
    futhark_mc_segmap_parloop_struct_110213.free_mem_101577 = mem_101577.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110214_task;
    
    futhark_mc_segmap_parloop_110214_task.name =
        "futhark_mc_segmap_parloop_110214";
    futhark_mc_segmap_parloop_110214_task.fn = futhark_mc_segmap_parloop_110214;
    futhark_mc_segmap_parloop_110214_task.args =
        &futhark_mc_segmap_parloop_struct_110213;
    futhark_mc_segmap_parloop_110214_task.iterations = iterations;
    futhark_mc_segmap_parloop_110214_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110214_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110214_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110214_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110214_task);
    
    if (futhark_mc_segmap_parloop_110214_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110214_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110214_total_end -
                 futhark_mc_segmap_parloop_110214_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110214_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110214_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110214_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110212_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110212_end -
                 futhark_mc_segmap_task_110212_start;
        
        ctx->futhark_mc_segmap_task_110212_runs[tid]++;
        ctx->futhark_mc_segmap_task_110212_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110212_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110223 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    double free_i64_res_92427;
    unsigned char *free_Y_mem_100186;
    int64_t free_bytes_101445;
    int64_t free_bytes_101457;
    int64_t free_bytes_101460;
    unsigned char *free_mem_101573;
    unsigned char *free_mem_101577;
};
struct futhark_mc_task_110232 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_99006;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101446;
};
struct futhark_mc_scan_stage_1_parloop_struct_110235 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_99006;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101446;
};
static int futhark_mc_scan_stage_1_parloop_110236(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_108829, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_110235
    *futhark_mc_scan_stage_1_parloop_struct_110235 =
    (struct futhark_mc_scan_stage_1_parloop_struct_110235 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_110235->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_110236_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110236_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_1_parloop_struct_110235->free_n_92399;
    int64_t gtid_99006 =
            futhark_mc_scan_stage_1_parloop_struct_110235->free_gtid_99006;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_110235->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101446 = {.desc ="mem_101446", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_110235->free_mem_101446,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109244 = start;
    int64_t x_108831;
    int64_t x_108832;
    
    x_108831 = (int64_t) 0;
    for (; iter_109244 < end; iter_109244++) {
        int64_t gtid_108830 = iter_109244;
        
        // stage 1 scan body
        {
            double x_108834;
            
            x_108834 = ((double *) Y_mem_100186.mem)[gtid_99006 * n_92399 +
                                                     gtid_108830];
            
            bool isnan_res_108835;
            
            isnan_res_108835 = futrts_isnan64(x_108834);
            
            bool defunc_0_p_res_108836 = !isnan_res_108835;
            int64_t defunc_0_f_res_108837 =
                    btoi_bool_i64(defunc_0_p_res_108836);
            
            // write mapped values results to memory
            { }
            x_108831 = x_108831;
            // Read next values
            {
                x_108832 = defunc_0_f_res_108837;
            }
            
            int64_t defunc_1_op_res_108833 = add64(x_108831, x_108832);
            
            ((int64_t *) mem_101446.mem)[gtid_108830] = defunc_1_op_res_108833;
            x_108831 = defunc_1_op_res_108833;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110236_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110236_end -
                 futhark_mc_scan_stage_1_parloop_110236_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_110236_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_110236_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_110236_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_110237 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_99006;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101446;
};
static int futhark_mc_scan_stage_3_parloop_110238(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_108829, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_110237
    *futhark_mc_scan_stage_3_parloop_struct_110237 =
    (struct futhark_mc_scan_stage_3_parloop_struct_110237 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_110237->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_110238_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_110238_start = get_wall_time();
    
    int64_t n_92399 =
            futhark_mc_scan_stage_3_parloop_struct_110237->free_n_92399;
    int64_t gtid_99006 =
            futhark_mc_scan_stage_3_parloop_struct_110237->free_gtid_99006;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_110237->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101446 = {.desc ="mem_101446", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_110237->free_mem_101446,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109256 = start;
    int64_t x_109253;
    int64_t x_109254;
    
    if (iter_109256 == (int64_t) 0) {
        x_109253 = (int64_t) 0;
    } else {
        x_109253 = ((int64_t *) mem_101446.mem)[iter_109256 - (int64_t) 1];
    }
    for (; iter_109256 < end; iter_109256++) {
        int64_t gtid_108830 = iter_109256;
        
        // stage 3 scan body
        {
            double x_108834;
            
            x_108834 = ((double *) Y_mem_100186.mem)[gtid_99006 * n_92399 +
                                                     gtid_108830];
            
            bool isnan_res_108835;
            
            isnan_res_108835 = futrts_isnan64(x_108834);
            
            bool defunc_0_p_res_108836 = !isnan_res_108835;
            int64_t defunc_0_f_res_108837 =
                    btoi_bool_i64(defunc_0_p_res_108836);
            
            x_109253 = x_109253;
            x_109254 = defunc_0_f_res_108837;
            
            int64_t defunc_1_op_res_109255 = add64(x_109253, x_109254);
            
            ((int64_t *) mem_101446.mem)[gtid_108830] = defunc_1_op_res_109255;
            x_109253 = defunc_1_op_res_109255;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_110238_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_110238_end -
                 futhark_mc_scan_stage_3_parloop_110238_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_110238_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_110238_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_110238_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_110233(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108829 = tid;
    int num_tasks_109243 = info.nsubtasks;
    struct futhark_mc_task_110232 *futhark_mc_task_110232 =
                                  (struct futhark_mc_task_110232 *) args;
    struct futhark_context *ctx = futhark_mc_task_110232->ctx;
    uint64_t futhark_mc_segscan_task_110233_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_110233_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110232->free_n_92399;
    int64_t gtid_99006 = futhark_mc_task_110232->free_gtid_99006;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110232->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101446 = {.desc ="mem_101446", .mem =
                                  futhark_mc_task_110232->free_mem_101446,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_109250_cached_sizze_110234 = 0;
    unsigned char *scan_stage_2_accum_mem_109250 = NULL;
    int64_t iter_109244;
    struct futhark_mc_scan_stage_1_parloop_struct_110235
    futhark_mc_scan_stage_1_parloop_struct_110235;
    
    futhark_mc_scan_stage_1_parloop_struct_110235.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_110235.free_n_92399 = n_92399;
    futhark_mc_scan_stage_1_parloop_struct_110235.free_gtid_99006 = gtid_99006;
    futhark_mc_scan_stage_1_parloop_struct_110235.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_scan_stage_1_parloop_struct_110235.free_mem_101446 =
        mem_101446.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_110236_task;
    
    futhark_mc_scan_stage_1_parloop_110236_task.name =
        "futhark_mc_scan_stage_1_parloop_110236";
    futhark_mc_scan_stage_1_parloop_110236_task.fn =
        futhark_mc_scan_stage_1_parloop_110236;
    futhark_mc_scan_stage_1_parloop_110236_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_110235;
    futhark_mc_scan_stage_1_parloop_110236_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_110236_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_110236_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_110236_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_110236_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_110236_task);
    
    if (futhark_mc_scan_stage_1_parloop_110236_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_110236_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_110236_total_end -
                 futhark_mc_scan_stage_1_parloop_110236_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110236_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110236_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_110236_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_109243)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_109245;
        int64_t x_109246;
        int64_t offset_109248 = (int64_t) 0;
        int64_t offset_index_109249 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_109250_cached_sizze_110234 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_109250 =
                realloc(scan_stage_2_accum_mem_109250, (int64_t) 8);
            scan_stage_2_accum_mem_109250_cached_sizze_110234 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_109250)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_109252 = 0; i_109252 < num_tasks_109243 - 1;
             i_109252++) {
            offset_109248 = squot64(n_92399, sext_i32_i64(num_tasks_109243));
            if (slt64(sext_i32_i64(i_109252), srem64(n_92399,
                                                     sext_i32_i64(num_tasks_109243)))) {
                offset_109248 += (int64_t) 1;
            }
            offset_index_109249 += offset_109248;
            
            int64_t gtid_108830 = offset_index_109249;
            double x_108834;
            
            x_108834 = ((double *) Y_mem_100186.mem)[gtid_99006 * n_92399 +
                                                     gtid_108830];
            
            bool isnan_res_108835;
            
            isnan_res_108835 = futrts_isnan64(x_108834);
            
            bool defunc_0_p_res_108836 = !isnan_res_108835;
            int64_t defunc_0_f_res_108837 =
                    btoi_bool_i64(defunc_0_p_res_108836);
            
            // Read carry in
            {
                x_109245 =
                    ((int64_t *) scan_stage_2_accum_mem_109250)[(int64_t) 0];
            }
            // Read next values
            {
                x_109246 = ((int64_t *) mem_101446.mem)[offset_index_109249 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_109247 = add64(x_109245, x_109246);
            
            ((int64_t *) mem_101446.mem)[offset_index_109249 - (int64_t) 1] =
                defunc_1_op_res_109247;
            ((int64_t *) scan_stage_2_accum_mem_109250)[(int64_t) 0] =
                defunc_1_op_res_109247;
        }
        
        int64_t iter_109256 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_110237
        futhark_mc_scan_stage_3_parloop_struct_110237;
        
        futhark_mc_scan_stage_3_parloop_struct_110237.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_110237.free_n_92399 = n_92399;
        futhark_mc_scan_stage_3_parloop_struct_110237.free_gtid_99006 =
            gtid_99006;
        futhark_mc_scan_stage_3_parloop_struct_110237.free_Y_mem_100186 =
            Y_mem_100186.mem;
        futhark_mc_scan_stage_3_parloop_struct_110237.free_mem_101446 =
            mem_101446.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_110238_task;
        
        futhark_mc_scan_stage_3_parloop_110238_task.name =
            "futhark_mc_scan_stage_3_parloop_110238";
        futhark_mc_scan_stage_3_parloop_110238_task.fn =
            futhark_mc_scan_stage_3_parloop_110238;
        futhark_mc_scan_stage_3_parloop_110238_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_110237;
        futhark_mc_scan_stage_3_parloop_110238_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_110238_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_110238_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_110238_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_110238_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_110238_task);
        
        if (futhark_mc_scan_stage_3_parloop_110238_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_110238_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_110238_total_end -
                     futhark_mc_scan_stage_3_parloop_110238_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110238_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110238_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_110238_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    
  cleanup:
    {
        free(scan_stage_2_accum_mem_109250);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_110233_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_110233_end -
                 futhark_mc_segscan_task_110233_start;
        
        ctx->futhark_mc_segscan_task_110233_runs[tid]++;
        ctx->futhark_mc_segscan_task_110233_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_110233_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110239 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_99006;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101446;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
};
struct futhark_mc_segmap_parloop_struct_110241 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_gtid_99006;
    unsigned char *free_Y_mem_100186;
    unsigned char *free_mem_101446;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
};
static int futhark_mc_segmap_parloop_110242(void *args, int64_t start,
                                            int64_t end, int flat_tid_108838,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110241
    *futhark_mc_segmap_parloop_struct_110241 =
    (struct futhark_mc_segmap_parloop_struct_110241 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110241->ctx;
    uint64_t futhark_mc_segmap_parloop_110242_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110242_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110241->free_n_92399;
    int64_t gtid_99006 =
            futhark_mc_segmap_parloop_struct_110241->free_gtid_99006;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110241->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101446 = {.desc ="mem_101446", .mem =
                                  futhark_mc_segmap_parloop_struct_110241->free_mem_101446,
                                  .size =0, .references =NULL};
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_segmap_parloop_struct_110241->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segmap_parloop_struct_110241->free_mem_101452,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109260 = start;
    
    for (; iter_109260 < end; iter_109260++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109263 = n_92399;
        int64_t gtid_108839 = iter_109260;
        int64_t remnant_109264 = iter_109260 - gtid_108839;
        double x_108840;
        
        x_108840 = ((double *) Y_mem_100186.mem)[gtid_99006 * n_92399 +
                                                 gtid_108839];
        
        bool isnan_res_108841;
        
        isnan_res_108841 = futrts_isnan64(x_108840);
        
        bool defunc_0_p_res_108842 = !isnan_res_108841;
        int64_t defunc_1_f_res_108843;
        
        if (defunc_0_p_res_108842) {
            int64_t x_109261;
            
            x_109261 = ((int64_t *) mem_101446.mem)[gtid_108839];
            
            int64_t defunc_1_f_res_t_res_109262 = sub64(x_109261, (int64_t) 1);
            
            defunc_1_f_res_108843 = defunc_1_f_res_t_res_109262;
        } else {
            defunc_1_f_res_108843 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_108843) &&
            slt64(defunc_1_f_res_108843, n_92399)) {
            ((int64_t *) mem_101452.mem)[defunc_1_f_res_108843] = gtid_108839;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_108843) &&
            slt64(defunc_1_f_res_108843, n_92399)) {
            ((double *) mem_101449.mem)[defunc_1_f_res_108843] = x_108840;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110242_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110242_end -
                 futhark_mc_segmap_parloop_110242_start;
        
        ctx->futhark_mc_segmap_parloop_110242_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110242_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110242_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110240(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108838 = tid;
    int num_tasks_109259 = info.nsubtasks;
    struct futhark_mc_task_110239 *futhark_mc_task_110239 =
                                  (struct futhark_mc_task_110239 *) args;
    struct futhark_context *ctx = futhark_mc_task_110239->ctx;
    uint64_t futhark_mc_segmap_task_110240_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110240_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110239->free_n_92399;
    int64_t gtid_99006 = futhark_mc_task_110239->free_gtid_99006;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110239->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    struct memblock mem_101446 = {.desc ="mem_101446", .mem =
                                  futhark_mc_task_110239->free_mem_101446,
                                  .size =0, .references =NULL};
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_task_110239->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110239->free_mem_101452,
                                  .size =0, .references =NULL};
    int64_t iter_109260;
    struct futhark_mc_segmap_parloop_struct_110241
    futhark_mc_segmap_parloop_struct_110241;
    
    futhark_mc_segmap_parloop_struct_110241.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110241.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110241.free_gtid_99006 = gtid_99006;
    futhark_mc_segmap_parloop_struct_110241.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110241.free_mem_101446 = mem_101446.mem;
    futhark_mc_segmap_parloop_struct_110241.free_mem_101449 = mem_101449.mem;
    futhark_mc_segmap_parloop_struct_110241.free_mem_101452 = mem_101452.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110242_task;
    
    futhark_mc_segmap_parloop_110242_task.name =
        "futhark_mc_segmap_parloop_110242";
    futhark_mc_segmap_parloop_110242_task.fn = futhark_mc_segmap_parloop_110242;
    futhark_mc_segmap_parloop_110242_task.args =
        &futhark_mc_segmap_parloop_struct_110241;
    futhark_mc_segmap_parloop_110242_task.iterations = iterations;
    futhark_mc_segmap_parloop_110242_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110242_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110242_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110242_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110242_task);
    
    if (futhark_mc_segmap_parloop_110242_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110242_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110242_total_end -
                 futhark_mc_segmap_parloop_110242_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110242_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110242_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110242_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110240_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110240_end -
                 futhark_mc_segmap_task_110240_start;
        
        ctx->futhark_mc_segmap_task_110240_runs[tid]++;
        ctx->futhark_mc_segmap_task_110240_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110240_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110243 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101455;
};
struct futhark_mc_segmap_parloop_struct_110245 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101455;
};
static int futhark_mc_segmap_parloop_110246(void *args, int64_t start,
                                            int64_t end, int flat_tid_108846,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110245
    *futhark_mc_segmap_parloop_struct_110245 =
    (struct futhark_mc_segmap_parloop_struct_110245 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110245->ctx;
    uint64_t futhark_mc_segmap_parloop_110246_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110246_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110245->free_n_92399;
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segmap_parloop_struct_110245->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_segmap_parloop_struct_110245->free_mem_101455,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109266 = start;
    
    for (; iter_109266 < end; iter_109266++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109267 = n_92399;
        int64_t gtid_108847 = iter_109266;
        int64_t remnant_109268 = iter_109266 - gtid_108847;
        int64_t x_108848;
        
        x_108848 = ((int64_t *) mem_101452.mem)[gtid_108847];
        
        int64_t defunc_0_f_res_108849 = add64((int64_t) 1, x_108848);
        
        ((int64_t *) mem_101455.mem)[gtid_108847] = defunc_0_f_res_108849;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110246_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110246_end -
                 futhark_mc_segmap_parloop_110246_start;
        
        ctx->futhark_mc_segmap_parloop_110246_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110246_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110246_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110244(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108846 = tid;
    int num_tasks_109265 = info.nsubtasks;
    struct futhark_mc_task_110243 *futhark_mc_task_110243 =
                                  (struct futhark_mc_task_110243 *) args;
    struct futhark_context *ctx = futhark_mc_task_110243->ctx;
    uint64_t futhark_mc_segmap_task_110244_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110244_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110243->free_n_92399;
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110243->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_task_110243->free_mem_101455,
                                  .size =0, .references =NULL};
    int64_t iter_109266;
    struct futhark_mc_segmap_parloop_struct_110245
    futhark_mc_segmap_parloop_struct_110245;
    
    futhark_mc_segmap_parloop_struct_110245.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110245.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110245.free_mem_101452 = mem_101452.mem;
    futhark_mc_segmap_parloop_struct_110245.free_mem_101455 = mem_101455.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110246_task;
    
    futhark_mc_segmap_parloop_110246_task.name =
        "futhark_mc_segmap_parloop_110246";
    futhark_mc_segmap_parloop_110246_task.fn = futhark_mc_segmap_parloop_110246;
    futhark_mc_segmap_parloop_110246_task.args =
        &futhark_mc_segmap_parloop_struct_110245;
    futhark_mc_segmap_parloop_110246_task.iterations = iterations;
    futhark_mc_segmap_parloop_110246_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110246_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110246_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110246_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110246_task);
    
    if (futhark_mc_segmap_parloop_110246_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110246_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110246_total_end -
                 futhark_mc_segmap_parloop_110246_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110246_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110246_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110246_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110244_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110244_end -
                 futhark_mc_segmap_task_110244_start;
        
        ctx->futhark_mc_segmap_task_110244_runs[tid]++;
        ctx->futhark_mc_segmap_task_110244_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110244_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110247 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101458;
};
struct futhark_mc_segmap_parloop_struct_110249 {
    struct futhark_context *ctx;
    int64_t free_q_92401;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101458;
};
static int futhark_mc_segmap_parloop_110250(void *args, int64_t start,
                                            int64_t end, int flat_tid_108850,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110249
    *futhark_mc_segmap_parloop_struct_110249 =
    (struct futhark_mc_segmap_parloop_struct_110249 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110249->ctx;
    uint64_t futhark_mc_segmap_parloop_110250_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110250_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110249->free_q_92401;
    int64_t last_res_99018 =
            futhark_mc_segmap_parloop_struct_110249->free_last_res_99018;
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_segmap_parloop_struct_110249->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109270 = start;
    
    for (; iter_109270 < end; iter_109270++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109271 = q_92401;
        int64_t gtid_108851 = iter_109270;
        int64_t remnant_109272 = iter_109270 - gtid_108851;
        bool cond_108852 = sle64(last_res_99018, gtid_108851);
        double defunc_0_f_res_108853;
        
        if (cond_108852) {
            defunc_0_f_res_108853 = 0.0;
        } else {
            defunc_0_f_res_108853 = 1.0;
        }
        ((double *) mem_101458.mem)[gtid_108851] = defunc_0_f_res_108853;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110250_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110250_end -
                 futhark_mc_segmap_parloop_110250_start;
        
        ctx->futhark_mc_segmap_parloop_110250_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110250_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110250_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110248(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108850 = tid;
    int num_tasks_109269 = info.nsubtasks;
    struct futhark_mc_task_110247 *futhark_mc_task_110247 =
                                  (struct futhark_mc_task_110247 *) args;
    struct futhark_context *ctx = futhark_mc_task_110247->ctx;
    uint64_t futhark_mc_segmap_task_110248_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110248_start = get_wall_time();
    
    int64_t q_92401 = futhark_mc_task_110247->free_q_92401;
    int64_t last_res_99018 = futhark_mc_task_110247->free_last_res_99018;
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_task_110247->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t iter_109270;
    struct futhark_mc_segmap_parloop_struct_110249
    futhark_mc_segmap_parloop_struct_110249;
    
    futhark_mc_segmap_parloop_struct_110249.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110249.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110249.free_last_res_99018 =
        last_res_99018;
    futhark_mc_segmap_parloop_struct_110249.free_mem_101458 = mem_101458.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110250_task;
    
    futhark_mc_segmap_parloop_110250_task.name =
        "futhark_mc_segmap_parloop_110250";
    futhark_mc_segmap_parloop_110250_task.fn = futhark_mc_segmap_parloop_110250;
    futhark_mc_segmap_parloop_110250_task.args =
        &futhark_mc_segmap_parloop_struct_110249;
    futhark_mc_segmap_parloop_110250_task.iterations = iterations;
    futhark_mc_segmap_parloop_110250_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110250_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110250_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110250_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110250_task);
    
    if (futhark_mc_segmap_parloop_110250_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110250_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110250_total_end -
                 futhark_mc_segmap_parloop_110250_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110250_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110250_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110250_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110248_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110248_end -
                 futhark_mc_segmap_task_110248_start;
        
        ctx->futhark_mc_segmap_task_110248_runs[tid]++;
        ctx->futhark_mc_segmap_task_110248_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110248_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110251 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_99018;
    int64_t free_min_arg_99037;
    int64_t free_min_arg_99038;
    int64_t free_min_res_99039;
    double free_max_res_99043;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101455;
    unsigned char *free_mem_101458;
    unsigned char *free_mem_101461;
    unsigned char *free_mem_101464;
};
struct futhark_mc_segmap_parloop_struct_110253 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_99018;
    int64_t free_min_arg_99037;
    int64_t free_min_arg_99038;
    int64_t free_min_res_99039;
    double free_max_res_99043;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101455;
    unsigned char *free_mem_101458;
    unsigned char *free_mem_101461;
    unsigned char *free_mem_101464;
};
static int futhark_mc_segmap_parloop_110254(void *args, int64_t start,
                                            int64_t end, int flat_tid_109052,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110253
    *futhark_mc_segmap_parloop_struct_110253 =
    (struct futhark_mc_segmap_parloop_struct_110253 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110253->ctx;
    uint64_t futhark_mc_segmap_parloop_110254_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110254_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110253->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110253->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110253->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110253->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110253->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110253->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110253->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110253->free_loop_cond_92426;
    int64_t last_res_99018 =
            futhark_mc_segmap_parloop_struct_110253->free_last_res_99018;
    int64_t min_arg_99037 =
            futhark_mc_segmap_parloop_struct_110253->free_min_arg_99037;
    int64_t min_arg_99038 =
            futhark_mc_segmap_parloop_struct_110253->free_min_arg_99038;
    int64_t min_res_99039 =
            futhark_mc_segmap_parloop_struct_110253->free_min_res_99039;
    double max_res_99043 =
           futhark_mc_segmap_parloop_struct_110253->free_max_res_99043;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101455,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101458,
                                  .size =0, .references =NULL};
    struct memblock mem_101461 = {.desc ="mem_101461", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101461,
                                  .size =0, .references =NULL};
    struct memblock mem_101464 = {.desc ="mem_101464", .mem =
                                  futhark_mc_segmap_parloop_struct_110253->free_mem_101464,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109274 = start;
    
    for (; iter_109274 < end; iter_109274++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109399 = n_m_92409;
        int64_t gtid_109053 = iter_109274;
        int64_t remnant_109400 = iter_109274 - gtid_109053;
        int64_t min_arg_109054 = mul64(jump_92403, gtid_109053);
        int64_t min_res_109055 = smin64(i_92415, min_arg_109054);
        int64_t defunc_0_g_res_109056 = add64((int64_t) 1, min_res_109055);
        bool init_idx_109057;
        int64_t init_idx_109058;
        int64_t init_idx_109059;
        bool loop_while_109275;
        int64_t low_109276;
        int64_t high_109277;
        
        loop_while_109275 = x_92416;
        low_109276 = (int64_t) 0;
        high_109277 = i_92415;
        while (loop_while_109275) {
            int64_t x_109278 = add64(low_109276, high_109277);
            int64_t mid_109279 = sdiv64(x_109278, (int64_t) 2);
            bool x_109280 = sle64((int64_t) 0, mid_109279);
            bool y_109281 = slt64(mid_109279, n_92399);
            bool bounds_check_109282 = x_109280 && y_109281;
            bool index_certs_109283;
            
            if (!bounds_check_109282) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_109279,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_109284;
            
            mid_id_109284 = ((int64_t *) mem_101455.mem)[mid_109279];
            
            bool cond_109285 = slt64(mid_id_109284, (int64_t) 0);
            int64_t mid_idx_109286;
            
            if (cond_109285) {
                mid_idx_109286 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_109286 = mid_id_109284;
            }
            
            bool cond_109287 = sle64(defunc_0_g_res_109056, mid_idx_109286);
            int64_t loopres_109288;
            int64_t loopres_109289;
            
            if (cond_109287) {
                int64_t loopres_t_res_109290 = sub64(mid_109279, (int64_t) 1);
                
                loopres_109288 = low_109276;
                loopres_109289 = loopres_t_res_109290;
            } else {
                int64_t loopres_f_res_109291 = add64((int64_t) 1, mid_109279);
                
                loopres_109288 = loopres_f_res_109291;
                loopres_109289 = high_109277;
            }
            
            bool loop_cond_109292 = sle64(loopres_109288, loopres_109289);
            bool loop_while_tmp_109401 = loop_cond_109292;
            int64_t low_tmp_109402 = loopres_109288;
            int64_t high_tmp_109403 = loopres_109289;
            
            loop_while_109275 = loop_while_tmp_109401;
            low_109276 = low_tmp_109402;
            high_109277 = high_tmp_109403;
        }
        init_idx_109057 = loop_while_109275;
        init_idx_109058 = low_109276;
        init_idx_109059 = high_109277;
        
        bool idx_109078;
        int64_t idx_109079;
        int64_t idx_109080;
        int64_t idx_109081;
        bool loop_while_109293;
        int64_t l_idx_109294;
        int64_t r_idx_109295;
        int64_t span_109296;
        
        loop_while_109293 = loop_cond_92426;
        l_idx_109294 = init_idx_109058;
        r_idx_109295 = init_idx_109058;
        span_109296 = (int64_t) 1;
        while (loop_while_109293) {
            int64_t max_arg_109297 = sub64(l_idx_109294, (int64_t) 1);
            int64_t max_res_109298 = smax64((int64_t) 0, max_arg_109297);
            int64_t min_arg_109299 = add64((int64_t) 1, r_idx_109295);
            int64_t min_res_109300 = smin64(min_arg_99037, min_arg_109299);
            bool x_109301 = sle64((int64_t) 0, max_res_109298);
            bool y_109302 = slt64(max_res_109298, n_92399);
            bool bounds_check_109303 = x_109301 && y_109302;
            bool index_certs_109304;
            
            if (!bounds_check_109303) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_109298,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_109305;
            
            x_109305 = ((int64_t *) mem_101455.mem)[max_res_109298];
            
            int64_t abs_arg_109306 = sub64(x_109305, defunc_0_g_res_109056);
            int64_t abs_res_109307 = abs64(abs_arg_109306);
            bool x_109308 = sle64((int64_t) 0, min_res_109300);
            bool y_109309 = slt64(min_res_109300, n_92399);
            bool bounds_check_109310 = x_109308 && y_109309;
            bool index_certs_109311;
            
            if (!bounds_check_109310) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_109300,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_109312;
            
            x_109312 = ((int64_t *) mem_101455.mem)[min_res_109300];
            
            int64_t abs_arg_109313 = sub64(x_109312, defunc_0_g_res_109056);
            int64_t abs_res_109314 = abs64(abs_arg_109313);
            bool cond_109315 = max_res_109298 == l_idx_109294;
            int64_t loopres_109316;
            int64_t loopres_109317;
            int64_t loopres_109318;
            
            if (cond_109315) {
                loopres_109316 = l_idx_109294;
                loopres_109317 = r_idx_109295;
                loopres_109318 = min_res_92421;
            } else {
                bool cond_109319 = slt64(abs_res_109307, abs_res_109314);
                bool cond_f_res_109320 = min_res_109300 == r_idx_109295;
                bool x_109321 = !cond_109319;
                bool y_109322 = cond_f_res_109320 && x_109321;
                bool cond_109323 = cond_109319 || y_109322;
                int64_t loopres_f_res_109324;
                
                if (cond_109323) {
                    loopres_f_res_109324 = max_res_109298;
                } else {
                    loopres_f_res_109324 = l_idx_109294;
                }
                
                int64_t loopres_f_res_109325;
                
                if (cond_109323) {
                    loopres_f_res_109325 = r_idx_109295;
                } else {
                    loopres_f_res_109325 = min_res_109300;
                }
                
                int64_t loopres_f_res_109326;
                
                if (cond_109323) {
                    int64_t loopres_f_res_t_res_109327 = add64((int64_t) 1,
                                                               span_109296);
                    
                    loopres_f_res_109326 = loopres_f_res_t_res_109327;
                } else {
                    int64_t loopres_f_res_f_res_109328 = add64((int64_t) 1,
                                                               span_109296);
                    
                    loopres_f_res_109326 = loopres_f_res_f_res_109328;
                }
                loopres_109316 = loopres_f_res_109324;
                loopres_109317 = loopres_f_res_109325;
                loopres_109318 = loopres_f_res_109326;
            }
            
            bool loop_cond_109329 = slt64(loopres_109318, min_res_92421);
            bool loop_while_tmp_109404 = loop_cond_109329;
            int64_t l_idx_tmp_109405 = loopres_109316;
            int64_t r_idx_tmp_109406 = loopres_109317;
            int64_t span_tmp_109407 = loopres_109318;
            
            loop_while_109293 = loop_while_tmp_109404;
            l_idx_109294 = l_idx_tmp_109405;
            r_idx_109295 = r_idx_tmp_109406;
            span_109296 = span_tmp_109407;
        }
        idx_109078 = loop_while_109293;
        idx_109079 = l_idx_109294;
        idx_109080 = r_idx_109295;
        idx_109081 = span_109296;
        
        int64_t min_res_109119 = smin64(min_arg_99038, idx_109079);
        int64_t max_res_109120 = smax64((int64_t) 0, min_res_109119);
        int64_t x_109121 = add64(min_res_99039, max_res_109120);
        int64_t r_109122 = sub64(x_109121, (int64_t) 1);
        bool x_109123 = sle64((int64_t) 0, r_109122);
        bool y_109124 = slt64(r_109122, n_92399);
        bool bounds_check_109125 = x_109123 && y_109124;
        bool index_certs_109126;
        
        if (!bounds_check_109125) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_109122,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_109127;
        
        x_109127 = ((int64_t *) mem_101452.mem)[r_109122];
        
        int64_t abs_arg_109128 = sub64(x_109127, min_res_109055);
        int64_t abs_res_109129 = abs64(abs_arg_109128);
        bool x_109130 = sle64((int64_t) 0, max_res_109120);
        bool y_109131 = slt64(max_res_109120, n_92399);
        bool bounds_check_109132 = x_109130 && y_109131;
        bool index_certs_109133;
        
        if (!bounds_check_109132) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_109120,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_109134;
        
        x_109134 = ((int64_t *) mem_101452.mem)[max_res_109120];
        
        int64_t abs_arg_109135 = sub64(x_109134, min_res_109055);
        int64_t abs_res_109136 = abs64(abs_arg_109135);
        int64_t max_res_109137 = smax64(abs_res_109129, abs_res_109136);
        double defunc_0_f_res_109138 = sitofp_i64_f64(max_res_109137);
        double defunc_1_f_res_109139 = max_res_99043 + defunc_0_f_res_109138;
        double defunc_2_reduce_res_109140;
        double defunc_2_reduce_res_109141;
        double defunc_2_reduce_res_109142;
        double defunc_2_reduce_res_109143;
        double defunc_2_reduce_res_109144;
        double redout_109331;
        double redout_109332;
        double redout_109333;
        double redout_109334;
        double redout_109335;
        
        redout_109331 = 0.0;
        redout_109332 = 0.0;
        redout_109333 = 0.0;
        redout_109334 = 0.0;
        redout_109335 = 0.0;
        for (int64_t i_109330 = 0; i_109330 < q_92401; i_109330++) {
            double x_109336;
            
            x_109336 = ((double *) mem_101458.mem)[i_109330];
            
            bool cond_109337 = sle64(last_res_99018, i_109330);
            int64_t defunc_0_f_res_109338;
            
            if (cond_109337) {
                defunc_0_f_res_109338 = (int64_t) 0;
            } else {
                int64_t i_109339 = add64(max_res_109120, i_109330);
                int64_t defunc_0_add_arg_109340;
                
                defunc_0_add_arg_109340 =
                    ((int64_t *) mem_101452.mem)[i_109339];
                
                int64_t defunc_1_add_res_109341 = add64((int64_t) 1,
                                                        defunc_0_add_arg_109340);
                
                defunc_0_f_res_109338 = defunc_1_add_res_109341;
            }
            
            int64_t binop_p_109342 = sub64(defunc_0_f_res_109338,
                                           min_res_109055);
            double defunc_0_f_res_109343 = sitofp_i64_f64(binop_p_109342);
            double abs_res_109344 = fabs(defunc_0_f_res_109343);
            double tmp1_109345 = abs_res_109344 / defunc_1_f_res_109139;
            double x_109346 = tmp1_109345 * tmp1_109345;
            double y_109347 = tmp1_109345 * x_109346;
            double tmp2_109348 = 1.0 - y_109347;
            double x_109349 = tmp2_109348 * tmp2_109348;
            double tmp3_109350 = tmp2_109348 * x_109349;
            double w_j_109351 = x_109336 * tmp3_109350;
            double xw_j_109352 = defunc_0_f_res_109343 * w_j_109351;
            double x2w_j_109353 = defunc_0_f_res_109343 * xw_j_109352;
            double x3w_j_109354 = defunc_0_f_res_109343 * x2w_j_109353;
            double x4w_j_109355 = defunc_0_f_res_109343 * x3w_j_109354;
            double defunc_1_op_res_109356 = w_j_109351 + redout_109331;
            double defunc_1_op_res_109357 = xw_j_109352 + redout_109332;
            double defunc_1_op_res_109358 = x2w_j_109353 + redout_109333;
            double defunc_1_op_res_109359 = x3w_j_109354 + redout_109334;
            double defunc_1_op_res_109360 = x4w_j_109355 + redout_109335;
            double redout_tmp_109408 = defunc_1_op_res_109356;
            double redout_tmp_109409 = defunc_1_op_res_109357;
            double redout_tmp_109410 = defunc_1_op_res_109358;
            double redout_tmp_109411 = defunc_1_op_res_109359;
            double redout_tmp_109412 = defunc_1_op_res_109360;
            
            redout_109331 = redout_tmp_109408;
            redout_109332 = redout_tmp_109409;
            redout_109333 = redout_tmp_109410;
            redout_109334 = redout_tmp_109411;
            redout_109335 = redout_tmp_109412;
        }
        defunc_2_reduce_res_109140 = redout_109331;
        defunc_2_reduce_res_109141 = redout_109332;
        defunc_2_reduce_res_109142 = redout_109333;
        defunc_2_reduce_res_109143 = redout_109334;
        defunc_2_reduce_res_109144 = redout_109335;
        
        double x_109176 = defunc_2_reduce_res_109142 *
               defunc_2_reduce_res_109144;
        double y_109177 = defunc_2_reduce_res_109143 *
               defunc_2_reduce_res_109143;
        double a12_109178 = x_109176 - y_109177;
        double x_109179 = defunc_2_reduce_res_109142 *
               defunc_2_reduce_res_109143;
        double y_109180 = defunc_2_reduce_res_109141 *
               defunc_2_reduce_res_109144;
        double b12_109181 = x_109179 - y_109180;
        double x_109182 = defunc_2_reduce_res_109141 *
               defunc_2_reduce_res_109143;
        double y_109183 = defunc_2_reduce_res_109142 *
               defunc_2_reduce_res_109142;
        double c12_109184 = x_109182 - y_109183;
        double x_109185 = defunc_2_reduce_res_109140 *
               defunc_2_reduce_res_109144;
        double b2_109186 = x_109185 - y_109183;
        double x_109187 = defunc_2_reduce_res_109141 *
               defunc_2_reduce_res_109142;
        double y_109188 = defunc_2_reduce_res_109140 *
               defunc_2_reduce_res_109143;
        double c2_109189 = x_109187 - y_109188;
        double x_109190 = defunc_2_reduce_res_109140 * a12_109178;
        double y_109191 = defunc_2_reduce_res_109141 * b12_109181;
        double x_109192 = x_109190 + y_109191;
        double y_109193 = defunc_2_reduce_res_109142 * c12_109184;
        double y_109194 = x_109192 + y_109193;
        double det_109195 = 1.0 / y_109194;
        double a12_109196 = a12_109178 * det_109195;
        double b12_109197 = b12_109181 * det_109195;
        double c12_109198 = c12_109184 * det_109195;
        double b2_109199 = b2_109186 * det_109195;
        double c2_109200 = c2_109189 * det_109195;
        double defunc_2_reduce_res_109201;
        double defunc_2_reduce_res_109202;
        double redout_109362;
        double redout_109363;
        
        redout_109362 = 0.0;
        redout_109363 = 0.0;
        for (int64_t i_109361 = 0; i_109361 < q_92401; i_109361++) {
            double x_109364;
            
            x_109364 = ((double *) mem_101458.mem)[i_109361];
            
            bool cond_109365 = sle64(last_res_99018, i_109361);
            int64_t defunc_0_f_res_109366;
            
            if (cond_109365) {
                defunc_0_f_res_109366 = (int64_t) 0;
            } else {
                int64_t i_109367 = add64(max_res_109120, i_109361);
                int64_t defunc_0_add_arg_109368;
                
                defunc_0_add_arg_109368 =
                    ((int64_t *) mem_101452.mem)[i_109367];
                
                int64_t defunc_1_add_res_109369 = add64((int64_t) 1,
                                                        defunc_0_add_arg_109368);
                
                defunc_0_f_res_109366 = defunc_1_add_res_109369;
            }
            
            int64_t binop_p_109370 = sub64(defunc_0_f_res_109366,
                                           min_res_109055);
            double defunc_0_f_res_109371 = sitofp_i64_f64(binop_p_109370);
            double abs_res_109372 = fabs(defunc_0_f_res_109371);
            double tmp1_109373 = abs_res_109372 / defunc_1_f_res_109139;
            double x_109374 = tmp1_109373 * tmp1_109373;
            double y_109375 = tmp1_109373 * x_109374;
            double tmp2_109376 = 1.0 - y_109375;
            double x_109377 = tmp2_109376 * tmp2_109376;
            double tmp3_109378 = tmp2_109376 * x_109377;
            double tmp4_109379 = x_109364 * tmp3_109378;
            double defunc_1_f_res_109380 = defunc_0_f_res_109371 * tmp4_109379;
            double defunc_1_f_res_109381 = defunc_0_f_res_109371 *
                   defunc_1_f_res_109380;
            double defunc_0_f_res_109382;
            
            if (cond_109365) {
                defunc_0_f_res_109382 = 0.0;
            } else {
                int64_t i_109383 = add64(max_res_109120, i_109361);
                double defunc_0_add_arg_109384;
                
                defunc_0_add_arg_109384 = ((double *) mem_101449.mem)[i_109383];
                defunc_0_f_res_109382 = defunc_0_add_arg_109384;
            }
            
            double x_109385 = a12_109196 * tmp4_109379;
            double y_109386 = b12_109197 * defunc_1_f_res_109380;
            double x_109387 = x_109385 + y_109386;
            double y_109388 = c12_109198 * defunc_1_f_res_109381;
            double x_109389 = x_109387 + y_109388;
            double defunc_9_fit_fun_res_109390 = defunc_0_f_res_109382 *
                   x_109389;
            double x_109391 = b12_109197 * tmp4_109379;
            double y_109392 = b2_109199 * defunc_1_f_res_109380;
            double x_109393 = x_109391 + y_109392;
            double y_109394 = c2_109200 * defunc_1_f_res_109381;
            double x_109395 = x_109393 + y_109394;
            double defunc_9_slope_fun_res_109396 = defunc_0_f_res_109382 *
                   x_109395;
            double defunc_1_op_res_109397 = defunc_9_fit_fun_res_109390 +
                   redout_109362;
            double defunc_1_op_res_109398 = defunc_9_slope_fun_res_109396 +
                   redout_109363;
            double redout_tmp_109413 = defunc_1_op_res_109397;
            double redout_tmp_109414 = defunc_1_op_res_109398;
            
            redout_109362 = redout_tmp_109413;
            redout_109363 = redout_tmp_109414;
        }
        defunc_2_reduce_res_109201 = redout_109362;
        defunc_2_reduce_res_109202 = redout_109363;
        ((double *) mem_101461.mem)[gtid_109053] = defunc_2_reduce_res_109201;
        ((double *) mem_101464.mem)[gtid_109053] = defunc_2_reduce_res_109202;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110254_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110254_end -
                 futhark_mc_segmap_parloop_110254_start;
        
        ctx->futhark_mc_segmap_parloop_110254_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110254_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110254_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110252(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_109052 = tid;
    int num_tasks_109273 = info.nsubtasks;
    struct futhark_mc_task_110251 *futhark_mc_task_110251 =
                                  (struct futhark_mc_task_110251 *) args;
    struct futhark_context *ctx = futhark_mc_task_110251->ctx;
    uint64_t futhark_mc_segmap_task_110252_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110252_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110251->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110251->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110251->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110251->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110251->free_i_92415;
    bool x_92416 = futhark_mc_task_110251->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110251->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110251->free_loop_cond_92426;
    int64_t last_res_99018 = futhark_mc_task_110251->free_last_res_99018;
    int64_t min_arg_99037 = futhark_mc_task_110251->free_min_arg_99037;
    int64_t min_arg_99038 = futhark_mc_task_110251->free_min_arg_99038;
    int64_t min_res_99039 = futhark_mc_task_110251->free_min_res_99039;
    double max_res_99043 = futhark_mc_task_110251->free_max_res_99043;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_task_110251->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110251->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_task_110251->free_mem_101455,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_task_110251->free_mem_101458,
                                  .size =0, .references =NULL};
    struct memblock mem_101461 = {.desc ="mem_101461", .mem =
                                  futhark_mc_task_110251->free_mem_101461,
                                  .size =0, .references =NULL};
    struct memblock mem_101464 = {.desc ="mem_101464", .mem =
                                  futhark_mc_task_110251->free_mem_101464,
                                  .size =0, .references =NULL};
    int64_t iter_109274;
    struct futhark_mc_segmap_parloop_struct_110253
    futhark_mc_segmap_parloop_struct_110253;
    
    futhark_mc_segmap_parloop_struct_110253.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110253.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110253.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110253.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110253.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110253.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110253.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110253.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110253.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110253.free_last_res_99018 =
        last_res_99018;
    futhark_mc_segmap_parloop_struct_110253.free_min_arg_99037 = min_arg_99037;
    futhark_mc_segmap_parloop_struct_110253.free_min_arg_99038 = min_arg_99038;
    futhark_mc_segmap_parloop_struct_110253.free_min_res_99039 = min_res_99039;
    futhark_mc_segmap_parloop_struct_110253.free_max_res_99043 = max_res_99043;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101449 = mem_101449.mem;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101452 = mem_101452.mem;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101455 = mem_101455.mem;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101458 = mem_101458.mem;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101461 = mem_101461.mem;
    futhark_mc_segmap_parloop_struct_110253.free_mem_101464 = mem_101464.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110254_task;
    
    futhark_mc_segmap_parloop_110254_task.name =
        "futhark_mc_segmap_parloop_110254";
    futhark_mc_segmap_parloop_110254_task.fn = futhark_mc_segmap_parloop_110254;
    futhark_mc_segmap_parloop_110254_task.args =
        &futhark_mc_segmap_parloop_struct_110253;
    futhark_mc_segmap_parloop_110254_task.iterations = iterations;
    futhark_mc_segmap_parloop_110254_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110254_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110254_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110254_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110254_task);
    
    if (futhark_mc_segmap_parloop_110254_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110254_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110254_total_end -
                 futhark_mc_segmap_parloop_110254_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110254_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110254_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110254_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110252_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110252_end -
                 futhark_mc_segmap_task_110252_start;
        
        ctx->futhark_mc_segmap_task_110252_runs[tid]++;
        ctx->futhark_mc_segmap_task_110252_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110252_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110256 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_q_92401;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    bool free_x_92416;
    int64_t free_min_res_92421;
    bool free_loop_cond_92426;
    int64_t free_last_res_99018;
    int64_t free_min_arg_99037;
    int64_t free_min_arg_99038;
    int64_t free_min_res_99039;
    double free_max_res_99043;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101455;
    unsigned char *free_mem_101458;
    unsigned char *free_mem_101461;
    unsigned char *free_mem_101464;
};
struct futhark_mc_task_110258 {
    struct futhark_context *ctx;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101458;
    int64_t free_min_res_108857;
    int64_t free_max_res_108922;
    double free_defunc_1_f_res_108941;
    double *retval_defunc_2_reduce_res_108942;
    double *retval_defunc_2_reduce_res_108943;
    double *retval_defunc_2_reduce_res_108944;
    double *retval_defunc_2_reduce_res_108945;
    double *retval_defunc_2_reduce_res_108946;
};
struct futhark_mc_segred_stage_1_parloop_struct_110265 {
    struct futhark_context *ctx;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101458;
    int64_t free_min_res_108857;
    int64_t free_max_res_108922;
    double free_defunc_1_f_res_108941;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109559;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109561;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109563;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109565;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109567;
};
static int futhark_mc_segred_stage_1_parloop_110266(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_109471,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110265
    *futhark_mc_segred_stage_1_parloop_struct_110265 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110265 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110265->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110266_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110266_start = get_wall_time();
    
    int64_t last_res_99018 =
            futhark_mc_segred_stage_1_parloop_struct_110265->free_last_res_99018;
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110265->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110265->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t min_res_108857 =
            futhark_mc_segred_stage_1_parloop_struct_110265->free_min_res_108857;
    int64_t max_res_108922 =
            futhark_mc_segred_stage_1_parloop_struct_110265->free_max_res_108922;
    double defunc_1_f_res_108941 =
           futhark_mc_segred_stage_1_parloop_struct_110265->free_defunc_1_f_res_108941;
    struct memblock reduce_stage_1_tid_res_arr_mem_109559 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109559",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110265->free_reduce_stage_1_tid_res_arr_mem_109559,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_109561 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109561",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110265->free_reduce_stage_1_tid_res_arr_mem_109561,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_109563 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109563",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110265->free_reduce_stage_1_tid_res_arr_mem_109563,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_109565 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109565",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110265->free_reduce_stage_1_tid_res_arr_mem_109565,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_109567 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109567",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110265->free_reduce_stage_1_tid_res_arr_mem_109567,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109569 = start;
    double x_109473;
    double x_109474;
    double x_109476;
    double x_109477;
    double x_109479;
    double x_109480;
    double x_109482;
    double x_109483;
    double x_109485;
    double x_109486;
    double local_acc_109570 = 0.0;
    double local_acc_109571 = 0.0;
    double local_acc_109572 = 0.0;
    double local_acc_109573 = 0.0;
    double local_acc_109574 = 0.0;
    
    for (; iter_109569 < end; iter_109569++) {
        int64_t gtid_109472 = iter_109569;
        double x_109488;
        
        x_109488 = ((double *) mem_101458.mem)[gtid_109472];
        
        bool cond_109489 = sle64(last_res_99018, gtid_109472);
        int64_t defunc_0_f_res_109490;
        
        if (cond_109489) {
            defunc_0_f_res_109490 = (int64_t) 0;
        } else {
            int64_t i_109491 = add64(max_res_108922, gtid_109472);
            int64_t defunc_0_add_arg_109492;
            
            defunc_0_add_arg_109492 = ((int64_t *) mem_101452.mem)[i_109491];
            
            int64_t defunc_1_add_res_109493 = add64((int64_t) 1,
                                                    defunc_0_add_arg_109492);
            
            defunc_0_f_res_109490 = defunc_1_add_res_109493;
        }
        
        int64_t binop_p_109494 = sub64(defunc_0_f_res_109490, min_res_108857);
        double defunc_0_f_res_109495 = sitofp_i64_f64(binop_p_109494);
        double abs_res_109496 = fabs(defunc_0_f_res_109495);
        double tmp1_109497 = abs_res_109496 / defunc_1_f_res_108941;
        double x_109498 = tmp1_109497 * tmp1_109497;
        double y_109499 = tmp1_109497 * x_109498;
        double tmp2_109500 = 1.0 - y_109499;
        double x_109501 = tmp2_109500 * tmp2_109500;
        double tmp3_109502 = tmp2_109500 * x_109501;
        double w_j_109503 = x_109488 * tmp3_109502;
        double xw_j_109504 = defunc_0_f_res_109495 * w_j_109503;
        double x2w_j_109505 = defunc_0_f_res_109495 * xw_j_109504;
        double x3w_j_109506 = defunc_0_f_res_109495 * x2w_j_109505;
        double x4w_j_109507 = defunc_0_f_res_109495 * x3w_j_109506;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_109473 = local_acc_109570;
        }
        // Load next params
        {
            x_109474 = w_j_109503;
        }
        // Red body
        {
            double defunc_1_op_res_109475 = x_109473 + x_109474;
            
            local_acc_109570 = defunc_1_op_res_109475;
        }
        // Load accum params
        {
            x_109476 = local_acc_109571;
        }
        // Load next params
        {
            x_109477 = xw_j_109504;
        }
        // Red body
        {
            double defunc_1_op_res_109478 = x_109476 + x_109477;
            
            local_acc_109571 = defunc_1_op_res_109478;
        }
        // Load accum params
        {
            x_109479 = local_acc_109572;
        }
        // Load next params
        {
            x_109480 = x2w_j_109505;
        }
        // Red body
        {
            double defunc_1_op_res_109481 = x_109479 + x_109480;
            
            local_acc_109572 = defunc_1_op_res_109481;
        }
        // Load accum params
        {
            x_109482 = local_acc_109573;
        }
        // Load next params
        {
            x_109483 = x3w_j_109506;
        }
        // Red body
        {
            double defunc_1_op_res_109484 = x_109482 + x_109483;
            
            local_acc_109573 = defunc_1_op_res_109484;
        }
        // Load accum params
        {
            x_109485 = local_acc_109574;
        }
        // Load next params
        {
            x_109486 = x4w_j_109507;
        }
        // Red body
        {
            double defunc_1_op_res_109487 = x_109485 + x_109486;
            
            local_acc_109574 = defunc_1_op_res_109487;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_109559.mem)[flat_tid_109471] =
        local_acc_109570;
    ((double *) reduce_stage_1_tid_res_arr_mem_109561.mem)[flat_tid_109471] =
        local_acc_109571;
    ((double *) reduce_stage_1_tid_res_arr_mem_109563.mem)[flat_tid_109471] =
        local_acc_109572;
    ((double *) reduce_stage_1_tid_res_arr_mem_109565.mem)[flat_tid_109471] =
        local_acc_109573;
    ((double *) reduce_stage_1_tid_res_arr_mem_109567.mem)[flat_tid_109471] =
        local_acc_109574;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110266_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110266_end -
                 futhark_mc_segred_stage_1_parloop_110266_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110266_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110266_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110266_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110259(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_109471 = tid;
    int num_tasks_109558 = info.nsubtasks;
    struct futhark_mc_task_110258 *futhark_mc_task_110258 =
                                  (struct futhark_mc_task_110258 *) args;
    struct futhark_context *ctx = futhark_mc_task_110258->ctx;
    uint64_t futhark_mc_segred_task_110259_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110259_start = get_wall_time();
    
    int64_t last_res_99018 = futhark_mc_task_110258->free_last_res_99018;
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110258->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_task_110258->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t min_res_108857 = futhark_mc_task_110258->free_min_res_108857;
    int64_t max_res_108922 = futhark_mc_task_110258->free_max_res_108922;
    double defunc_1_f_res_108941 =
           futhark_mc_task_110258->free_defunc_1_f_res_108941;
    double defunc_2_reduce_res_108942 =
           *futhark_mc_task_110258->retval_defunc_2_reduce_res_108942;
    double defunc_2_reduce_res_108943 =
           *futhark_mc_task_110258->retval_defunc_2_reduce_res_108943;
    double defunc_2_reduce_res_108944 =
           *futhark_mc_task_110258->retval_defunc_2_reduce_res_108944;
    double defunc_2_reduce_res_108945 =
           *futhark_mc_task_110258->retval_defunc_2_reduce_res_108945;
    double defunc_2_reduce_res_108946 =
           *futhark_mc_task_110258->retval_defunc_2_reduce_res_108946;
    size_t reduce_stage_1_tid_res_arr_mem_109559_cached_sizze_110260 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109559 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_109561_cached_sizze_110261 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109561 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_109563_cached_sizze_110262 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109563 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_109565_cached_sizze_110263 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109565 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_109567_cached_sizze_110264 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109567 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_109559_cached_sizze_110260 <
        (size_t) ((int64_t) 8 * num_tasks_109558)) {
        reduce_stage_1_tid_res_arr_mem_109559 =
            realloc(reduce_stage_1_tid_res_arr_mem_109559, (int64_t) 8 *
                    num_tasks_109558);
        reduce_stage_1_tid_res_arr_mem_109559_cached_sizze_110260 =
            (int64_t) 8 * num_tasks_109558;
    }
    if (reduce_stage_1_tid_res_arr_mem_109561_cached_sizze_110261 <
        (size_t) ((int64_t) 8 * num_tasks_109558)) {
        reduce_stage_1_tid_res_arr_mem_109561 =
            realloc(reduce_stage_1_tid_res_arr_mem_109561, (int64_t) 8 *
                    num_tasks_109558);
        reduce_stage_1_tid_res_arr_mem_109561_cached_sizze_110261 =
            (int64_t) 8 * num_tasks_109558;
    }
    if (reduce_stage_1_tid_res_arr_mem_109563_cached_sizze_110262 <
        (size_t) ((int64_t) 8 * num_tasks_109558)) {
        reduce_stage_1_tid_res_arr_mem_109563 =
            realloc(reduce_stage_1_tid_res_arr_mem_109563, (int64_t) 8 *
                    num_tasks_109558);
        reduce_stage_1_tid_res_arr_mem_109563_cached_sizze_110262 =
            (int64_t) 8 * num_tasks_109558;
    }
    if (reduce_stage_1_tid_res_arr_mem_109565_cached_sizze_110263 <
        (size_t) ((int64_t) 8 * num_tasks_109558)) {
        reduce_stage_1_tid_res_arr_mem_109565 =
            realloc(reduce_stage_1_tid_res_arr_mem_109565, (int64_t) 8 *
                    num_tasks_109558);
        reduce_stage_1_tid_res_arr_mem_109565_cached_sizze_110263 =
            (int64_t) 8 * num_tasks_109558;
    }
    if (reduce_stage_1_tid_res_arr_mem_109567_cached_sizze_110264 <
        (size_t) ((int64_t) 8 * num_tasks_109558)) {
        reduce_stage_1_tid_res_arr_mem_109567 =
            realloc(reduce_stage_1_tid_res_arr_mem_109567, (int64_t) 8 *
                    num_tasks_109558);
        reduce_stage_1_tid_res_arr_mem_109567_cached_sizze_110264 =
            (int64_t) 8 * num_tasks_109558;
    }
    
    int64_t iter_109569;
    struct futhark_mc_segred_stage_1_parloop_struct_110265
    futhark_mc_segred_stage_1_parloop_struct_110265;
    
    futhark_mc_segred_stage_1_parloop_struct_110265.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_last_res_99018 =
        last_res_99018;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_mem_101452 =
        mem_101452.mem;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_mem_101458 =
        mem_101458.mem;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_min_res_108857 =
        min_res_108857;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_max_res_108922 =
        max_res_108922;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_defunc_1_f_res_108941 =
        defunc_1_f_res_108941;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_reduce_stage_1_tid_res_arr_mem_109559 =
        reduce_stage_1_tid_res_arr_mem_109559;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_reduce_stage_1_tid_res_arr_mem_109561 =
        reduce_stage_1_tid_res_arr_mem_109561;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_reduce_stage_1_tid_res_arr_mem_109563 =
        reduce_stage_1_tid_res_arr_mem_109563;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_reduce_stage_1_tid_res_arr_mem_109565 =
        reduce_stage_1_tid_res_arr_mem_109565;
    futhark_mc_segred_stage_1_parloop_struct_110265.free_reduce_stage_1_tid_res_arr_mem_109567 =
        reduce_stage_1_tid_res_arr_mem_109567;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110266_task;
    
    futhark_mc_segred_stage_1_parloop_110266_task.name =
        "futhark_mc_segred_stage_1_parloop_110266";
    futhark_mc_segred_stage_1_parloop_110266_task.fn =
        futhark_mc_segred_stage_1_parloop_110266;
    futhark_mc_segred_stage_1_parloop_110266_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110265;
    futhark_mc_segred_stage_1_parloop_110266_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110266_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110266_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110266_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110266_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110266_task);
    
    if (futhark_mc_segred_stage_1_parloop_110266_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110266_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110266_total_end -
                 futhark_mc_segred_stage_1_parloop_110266_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110266_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110266_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110266_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_108942 = 0.0;
        defunc_2_reduce_res_108943 = 0.0;
        defunc_2_reduce_res_108944 = 0.0;
        defunc_2_reduce_res_108945 = 0.0;
        defunc_2_reduce_res_108946 = 0.0;
    }
    
    double x_109575;
    double x_109576;
    double x_109578;
    double x_109579;
    double x_109581;
    double x_109582;
    double x_109584;
    double x_109585;
    double x_109587;
    double x_109588;
    
    for (int32_t i_109590 = 0; i_109590 < num_tasks_109558; i_109590++) {
        flat_tid_109471 = i_109590;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_109575 = defunc_2_reduce_res_108942;
            }
            // load next params
            {
                x_109576 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109559)[flat_tid_109471];
            }
            // red body
            {
                double defunc_1_op_res_109577 = x_109575 + x_109576;
                
                defunc_2_reduce_res_108942 = defunc_1_op_res_109577;
            }
            // load acc params
            {
                x_109578 = defunc_2_reduce_res_108943;
            }
            // load next params
            {
                x_109579 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109561)[flat_tid_109471];
            }
            // red body
            {
                double defunc_1_op_res_109580 = x_109578 + x_109579;
                
                defunc_2_reduce_res_108943 = defunc_1_op_res_109580;
            }
            // load acc params
            {
                x_109581 = defunc_2_reduce_res_108944;
            }
            // load next params
            {
                x_109582 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109563)[flat_tid_109471];
            }
            // red body
            {
                double defunc_1_op_res_109583 = x_109581 + x_109582;
                
                defunc_2_reduce_res_108944 = defunc_1_op_res_109583;
            }
            // load acc params
            {
                x_109584 = defunc_2_reduce_res_108945;
            }
            // load next params
            {
                x_109585 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109565)[flat_tid_109471];
            }
            // red body
            {
                double defunc_1_op_res_109586 = x_109584 + x_109585;
                
                defunc_2_reduce_res_108945 = defunc_1_op_res_109586;
            }
            // load acc params
            {
                x_109587 = defunc_2_reduce_res_108946;
            }
            // load next params
            {
                x_109588 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109567)[flat_tid_109471];
            }
            // red body
            {
                double defunc_1_op_res_109589 = x_109587 + x_109588;
                
                defunc_2_reduce_res_108946 = defunc_1_op_res_109589;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_109559);
        free(reduce_stage_1_tid_res_arr_mem_109561);
        free(reduce_stage_1_tid_res_arr_mem_109563);
        free(reduce_stage_1_tid_res_arr_mem_109565);
        free(reduce_stage_1_tid_res_arr_mem_109567);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110259_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110259_end -
                 futhark_mc_segred_task_110259_start;
        
        ctx->futhark_mc_segred_task_110259_runs[tid]++;
        ctx->futhark_mc_segred_task_110259_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110259_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110258->retval_defunc_2_reduce_res_108942 =
            defunc_2_reduce_res_108942;
        *futhark_mc_task_110258->retval_defunc_2_reduce_res_108943 =
            defunc_2_reduce_res_108943;
        *futhark_mc_task_110258->retval_defunc_2_reduce_res_108944 =
            defunc_2_reduce_res_108944;
        *futhark_mc_task_110258->retval_defunc_2_reduce_res_108945 =
            defunc_2_reduce_res_108945;
        *futhark_mc_task_110258->retval_defunc_2_reduce_res_108946 =
            defunc_2_reduce_res_108946;
    }
    return err;
}
struct futhark_mc_task_110267 {
    struct futhark_context *ctx;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101458;
    int64_t free_min_res_108857;
    int64_t free_max_res_108922;
    double free_defunc_1_f_res_108941;
    double free_a12_109004;
    double free_b12_109005;
    double free_c12_109006;
    double free_b2_109007;
    double free_c2_109008;
    double *retval_defunc_2_reduce_res_109009;
    double *retval_defunc_2_reduce_res_109010;
};
struct futhark_mc_segred_stage_1_parloop_struct_110271 {
    struct futhark_context *ctx;
    int64_t free_last_res_99018;
    unsigned char *free_mem_101449;
    unsigned char *free_mem_101452;
    unsigned char *free_mem_101458;
    int64_t free_min_res_108857;
    int64_t free_max_res_108922;
    double free_defunc_1_f_res_108941;
    double free_a12_109004;
    double free_b12_109005;
    double free_c12_109006;
    double free_b2_109007;
    double free_c2_109008;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109592;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_109594;
};
static int futhark_mc_segred_stage_1_parloop_110272(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_109508,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_110271
    *futhark_mc_segred_stage_1_parloop_struct_110271 =
    (struct futhark_mc_segred_stage_1_parloop_struct_110271 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_110271->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_110272_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110272_start = get_wall_time();
    
    int64_t last_res_99018 =
            futhark_mc_segred_stage_1_parloop_struct_110271->free_last_res_99018;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110271->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110271->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_110271->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t min_res_108857 =
            futhark_mc_segred_stage_1_parloop_struct_110271->free_min_res_108857;
    int64_t max_res_108922 =
            futhark_mc_segred_stage_1_parloop_struct_110271->free_max_res_108922;
    double defunc_1_f_res_108941 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_defunc_1_f_res_108941;
    double a12_109004 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_a12_109004;
    double b12_109005 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_b12_109005;
    double c12_109006 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_c12_109006;
    double b2_109007 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_b2_109007;
    double c2_109008 =
           futhark_mc_segred_stage_1_parloop_struct_110271->free_c2_109008;
    struct memblock reduce_stage_1_tid_res_arr_mem_109592 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109592",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110271->free_reduce_stage_1_tid_res_arr_mem_109592,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_109594 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_109594",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_110271->free_reduce_stage_1_tid_res_arr_mem_109594,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109596 = start;
    double x_109510;
    double x_109511;
    double x_109513;
    double x_109514;
    double local_acc_109597 = 0.0;
    double local_acc_109598 = 0.0;
    
    for (; iter_109596 < end; iter_109596++) {
        int64_t gtid_109509 = iter_109596;
        double x_109516;
        
        x_109516 = ((double *) mem_101458.mem)[gtid_109509];
        
        bool cond_109517 = sle64(last_res_99018, gtid_109509);
        int64_t defunc_0_f_res_109518;
        
        if (cond_109517) {
            defunc_0_f_res_109518 = (int64_t) 0;
        } else {
            int64_t i_109519 = add64(max_res_108922, gtid_109509);
            int64_t defunc_0_add_arg_109520;
            
            defunc_0_add_arg_109520 = ((int64_t *) mem_101452.mem)[i_109519];
            
            int64_t defunc_1_add_res_109521 = add64((int64_t) 1,
                                                    defunc_0_add_arg_109520);
            
            defunc_0_f_res_109518 = defunc_1_add_res_109521;
        }
        
        int64_t binop_p_109522 = sub64(defunc_0_f_res_109518, min_res_108857);
        double defunc_0_f_res_109523 = sitofp_i64_f64(binop_p_109522);
        double abs_res_109524 = fabs(defunc_0_f_res_109523);
        double tmp1_109525 = abs_res_109524 / defunc_1_f_res_108941;
        double x_109526 = tmp1_109525 * tmp1_109525;
        double y_109527 = tmp1_109525 * x_109526;
        double tmp2_109528 = 1.0 - y_109527;
        double x_109529 = tmp2_109528 * tmp2_109528;
        double tmp3_109530 = tmp2_109528 * x_109529;
        double tmp4_109531 = x_109516 * tmp3_109530;
        double defunc_1_f_res_109532 = defunc_0_f_res_109523 * tmp4_109531;
        double defunc_1_f_res_109533 = defunc_0_f_res_109523 *
               defunc_1_f_res_109532;
        double defunc_0_f_res_109534;
        
        if (cond_109517) {
            defunc_0_f_res_109534 = 0.0;
        } else {
            int64_t i_109535 = add64(max_res_108922, gtid_109509);
            double defunc_0_add_arg_109536;
            
            defunc_0_add_arg_109536 = ((double *) mem_101449.mem)[i_109535];
            defunc_0_f_res_109534 = defunc_0_add_arg_109536;
        }
        
        double x_109537 = a12_109004 * tmp4_109531;
        double y_109538 = b12_109005 * defunc_1_f_res_109532;
        double x_109539 = x_109537 + y_109538;
        double y_109540 = c12_109006 * defunc_1_f_res_109533;
        double x_109541 = x_109539 + y_109540;
        double defunc_9_fit_fun_res_109542 = defunc_0_f_res_109534 * x_109541;
        double x_109543 = b12_109005 * tmp4_109531;
        double y_109544 = b2_109007 * defunc_1_f_res_109532;
        double x_109545 = x_109543 + y_109544;
        double y_109546 = c2_109008 * defunc_1_f_res_109533;
        double x_109547 = x_109545 + y_109546;
        double defunc_9_slope_fun_res_109548 = defunc_0_f_res_109534 * x_109547;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_109510 = local_acc_109597;
        }
        // Load next params
        {
            x_109511 = defunc_9_fit_fun_res_109542;
        }
        // Red body
        {
            double defunc_1_op_res_109512 = x_109510 + x_109511;
            
            local_acc_109597 = defunc_1_op_res_109512;
        }
        // Load accum params
        {
            x_109513 = local_acc_109598;
        }
        // Load next params
        {
            x_109514 = defunc_9_slope_fun_res_109548;
        }
        // Red body
        {
            double defunc_1_op_res_109515 = x_109513 + x_109514;
            
            local_acc_109598 = defunc_1_op_res_109515;
        }
    }
    ((double *) reduce_stage_1_tid_res_arr_mem_109592.mem)[flat_tid_109508] =
        local_acc_109597;
    ((double *) reduce_stage_1_tid_res_arr_mem_109594.mem)[flat_tid_109508] =
        local_acc_109598;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110272_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110272_end -
                 futhark_mc_segred_stage_1_parloop_110272_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_110272_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_110272_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_110272_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_110268(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_109508 = tid;
    int num_tasks_109591 = info.nsubtasks;
    struct futhark_mc_task_110267 *futhark_mc_task_110267 =
                                  (struct futhark_mc_task_110267 *) args;
    struct futhark_context *ctx = futhark_mc_task_110267->ctx;
    uint64_t futhark_mc_segred_task_110268_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_110268_start = get_wall_time();
    
    int64_t last_res_99018 = futhark_mc_task_110267->free_last_res_99018;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_task_110267->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110267->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_task_110267->free_mem_101458,
                                  .size =0, .references =NULL};
    int64_t min_res_108857 = futhark_mc_task_110267->free_min_res_108857;
    int64_t max_res_108922 = futhark_mc_task_110267->free_max_res_108922;
    double defunc_1_f_res_108941 =
           futhark_mc_task_110267->free_defunc_1_f_res_108941;
    double a12_109004 = futhark_mc_task_110267->free_a12_109004;
    double b12_109005 = futhark_mc_task_110267->free_b12_109005;
    double c12_109006 = futhark_mc_task_110267->free_c12_109006;
    double b2_109007 = futhark_mc_task_110267->free_b2_109007;
    double c2_109008 = futhark_mc_task_110267->free_c2_109008;
    double defunc_2_reduce_res_109009 =
           *futhark_mc_task_110267->retval_defunc_2_reduce_res_109009;
    double defunc_2_reduce_res_109010 =
           *futhark_mc_task_110267->retval_defunc_2_reduce_res_109010;
    size_t reduce_stage_1_tid_res_arr_mem_109592_cached_sizze_110269 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109592 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_109594_cached_sizze_110270 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_109594 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_109592_cached_sizze_110269 <
        (size_t) ((int64_t) 8 * num_tasks_109591)) {
        reduce_stage_1_tid_res_arr_mem_109592 =
            realloc(reduce_stage_1_tid_res_arr_mem_109592, (int64_t) 8 *
                    num_tasks_109591);
        reduce_stage_1_tid_res_arr_mem_109592_cached_sizze_110269 =
            (int64_t) 8 * num_tasks_109591;
    }
    if (reduce_stage_1_tid_res_arr_mem_109594_cached_sizze_110270 <
        (size_t) ((int64_t) 8 * num_tasks_109591)) {
        reduce_stage_1_tid_res_arr_mem_109594 =
            realloc(reduce_stage_1_tid_res_arr_mem_109594, (int64_t) 8 *
                    num_tasks_109591);
        reduce_stage_1_tid_res_arr_mem_109594_cached_sizze_110270 =
            (int64_t) 8 * num_tasks_109591;
    }
    
    int64_t iter_109596;
    struct futhark_mc_segred_stage_1_parloop_struct_110271
    futhark_mc_segred_stage_1_parloop_struct_110271;
    
    futhark_mc_segred_stage_1_parloop_struct_110271.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_last_res_99018 =
        last_res_99018;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_mem_101449 =
        mem_101449.mem;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_mem_101452 =
        mem_101452.mem;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_mem_101458 =
        mem_101458.mem;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_min_res_108857 =
        min_res_108857;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_max_res_108922 =
        max_res_108922;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_defunc_1_f_res_108941 =
        defunc_1_f_res_108941;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_a12_109004 =
        a12_109004;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_b12_109005 =
        b12_109005;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_c12_109006 =
        c12_109006;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_b2_109007 = b2_109007;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_c2_109008 = c2_109008;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_reduce_stage_1_tid_res_arr_mem_109592 =
        reduce_stage_1_tid_res_arr_mem_109592;
    futhark_mc_segred_stage_1_parloop_struct_110271.free_reduce_stage_1_tid_res_arr_mem_109594 =
        reduce_stage_1_tid_res_arr_mem_109594;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_110272_task;
    
    futhark_mc_segred_stage_1_parloop_110272_task.name =
        "futhark_mc_segred_stage_1_parloop_110272";
    futhark_mc_segred_stage_1_parloop_110272_task.fn =
        futhark_mc_segred_stage_1_parloop_110272;
    futhark_mc_segred_stage_1_parloop_110272_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_110271;
    futhark_mc_segred_stage_1_parloop_110272_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_110272_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_110272_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_110272_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_110272_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_110272_task);
    
    if (futhark_mc_segred_stage_1_parloop_110272_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_110272_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_110272_total_end -
                 futhark_mc_segred_stage_1_parloop_110272_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110272_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110272_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_110272_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_109009 = 0.0;
        defunc_2_reduce_res_109010 = 0.0;
    }
    
    double x_109599;
    double x_109600;
    double x_109602;
    double x_109603;
    
    for (int32_t i_109605 = 0; i_109605 < num_tasks_109591; i_109605++) {
        flat_tid_109508 = i_109605;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_109599 = defunc_2_reduce_res_109009;
            }
            // load next params
            {
                x_109600 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109592)[flat_tid_109508];
            }
            // red body
            {
                double defunc_1_op_res_109601 = x_109599 + x_109600;
                
                defunc_2_reduce_res_109009 = defunc_1_op_res_109601;
            }
            // load acc params
            {
                x_109602 = defunc_2_reduce_res_109010;
            }
            // load next params
            {
                x_109603 =
                    ((double *) reduce_stage_1_tid_res_arr_mem_109594)[flat_tid_109508];
            }
            // red body
            {
                double defunc_1_op_res_109604 = x_109602 + x_109603;
                
                defunc_2_reduce_res_109010 = defunc_1_op_res_109604;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_109592);
        free(reduce_stage_1_tid_res_arr_mem_109594);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_110268_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_110268_end -
                 futhark_mc_segred_task_110268_start;
        
        ctx->futhark_mc_segred_task_110268_runs[tid]++;
        ctx->futhark_mc_segred_task_110268_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_110268_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_110267->retval_defunc_2_reduce_res_109009 =
            defunc_2_reduce_res_109009;
        *futhark_mc_task_110267->retval_defunc_2_reduce_res_109010 =
            defunc_2_reduce_res_109010;
    }
    return err;
}
static int futhark_mc_segmap_parloop_110257(void *args, int64_t start,
                                            int64_t end, int flat_tid_108854,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110256
    *futhark_mc_segmap_parloop_struct_110256 =
    (struct futhark_mc_segmap_parloop_struct_110256 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110256->ctx;
    uint64_t futhark_mc_segmap_parloop_110257_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110257_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110256->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110256->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110256->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110256->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110256->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110256->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110256->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110256->free_loop_cond_92426;
    int64_t last_res_99018 =
            futhark_mc_segmap_parloop_struct_110256->free_last_res_99018;
    int64_t min_arg_99037 =
            futhark_mc_segmap_parloop_struct_110256->free_min_arg_99037;
    int64_t min_arg_99038 =
            futhark_mc_segmap_parloop_struct_110256->free_min_arg_99038;
    int64_t min_res_99039 =
            futhark_mc_segmap_parloop_struct_110256->free_min_res_99039;
    double max_res_99043 =
           futhark_mc_segmap_parloop_struct_110256->free_max_res_99043;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101455,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101458,
                                  .size =0, .references =NULL};
    struct memblock mem_101461 = {.desc ="mem_101461", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101461,
                                  .size =0, .references =NULL};
    struct memblock mem_101464 = {.desc ="mem_101464", .mem =
                                  futhark_mc_segmap_parloop_struct_110256->free_mem_101464,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109415 = start;
    
    for (; iter_109415 < end; iter_109415++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109549 = n_m_92409;
        int64_t gtid_108855 = iter_109415;
        int64_t remnant_109550 = iter_109415 - gtid_108855;
        int64_t min_arg_108856 = mul64(jump_92403, gtid_108855);
        int64_t min_res_108857 = smin64(i_92415, min_arg_108856);
        int64_t defunc_0_g_res_108858 = add64((int64_t) 1, min_res_108857);
        bool init_idx_108859;
        int64_t init_idx_108860;
        int64_t init_idx_108861;
        bool loop_while_109416;
        int64_t low_109417;
        int64_t high_109418;
        
        loop_while_109416 = x_92416;
        low_109417 = (int64_t) 0;
        high_109418 = i_92415;
        while (loop_while_109416) {
            int64_t x_109419 = add64(low_109417, high_109418);
            int64_t mid_109420 = sdiv64(x_109419, (int64_t) 2);
            bool x_109421 = sle64((int64_t) 0, mid_109420);
            bool y_109422 = slt64(mid_109420, n_92399);
            bool bounds_check_109423 = x_109421 && y_109422;
            bool index_certs_109424;
            
            if (!bounds_check_109423) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_109420,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t mid_id_109425;
            
            mid_id_109425 = ((int64_t *) mem_101455.mem)[mid_109420];
            
            bool cond_109426 = slt64(mid_id_109425, (int64_t) 0);
            int64_t mid_idx_109427;
            
            if (cond_109426) {
                mid_idx_109427 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_109427 = mid_id_109425;
            }
            
            bool cond_109428 = sle64(defunc_0_g_res_108858, mid_idx_109427);
            int64_t loopres_109429;
            int64_t loopres_109430;
            
            if (cond_109428) {
                int64_t loopres_t_res_109431 = sub64(mid_109420, (int64_t) 1);
                
                loopres_109429 = low_109417;
                loopres_109430 = loopres_t_res_109431;
            } else {
                int64_t loopres_f_res_109432 = add64((int64_t) 1, mid_109420);
                
                loopres_109429 = loopres_f_res_109432;
                loopres_109430 = high_109418;
            }
            
            bool loop_cond_109433 = sle64(loopres_109429, loopres_109430);
            bool loop_while_tmp_109551 = loop_cond_109433;
            int64_t low_tmp_109552 = loopres_109429;
            int64_t high_tmp_109553 = loopres_109430;
            
            loop_while_109416 = loop_while_tmp_109551;
            low_109417 = low_tmp_109552;
            high_109418 = high_tmp_109553;
        }
        init_idx_108859 = loop_while_109416;
        init_idx_108860 = low_109417;
        init_idx_108861 = high_109418;
        
        bool idx_108880;
        int64_t idx_108881;
        int64_t idx_108882;
        int64_t idx_108883;
        bool loop_while_109434;
        int64_t l_idx_109435;
        int64_t r_idx_109436;
        int64_t span_109437;
        
        loop_while_109434 = loop_cond_92426;
        l_idx_109435 = init_idx_108860;
        r_idx_109436 = init_idx_108860;
        span_109437 = (int64_t) 1;
        while (loop_while_109434) {
            int64_t max_arg_109438 = sub64(l_idx_109435, (int64_t) 1);
            int64_t max_res_109439 = smax64((int64_t) 0, max_arg_109438);
            int64_t min_arg_109440 = add64((int64_t) 1, r_idx_109436);
            int64_t min_res_109441 = smin64(min_arg_99037, min_arg_109440);
            bool x_109442 = sle64((int64_t) 0, max_res_109439);
            bool y_109443 = slt64(max_res_109439, n_92399);
            bool bounds_check_109444 = x_109442 && y_109443;
            bool index_certs_109445;
            
            if (!bounds_check_109444) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_109439,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_109446;
            
            x_109446 = ((int64_t *) mem_101455.mem)[max_res_109439];
            
            int64_t abs_arg_109447 = sub64(x_109446, defunc_0_g_res_108858);
            int64_t abs_res_109448 = abs64(abs_arg_109447);
            bool x_109449 = sle64((int64_t) 0, min_res_109441);
            bool y_109450 = slt64(min_res_109441, n_92399);
            bool bounds_check_109451 = x_109449 && y_109450;
            bool index_certs_109452;
            
            if (!bounds_check_109451) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_109441,
                              "] out of bounds for array of shape [",
                              (long long) n_92399, "].",
                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            int64_t x_109453;
            
            x_109453 = ((int64_t *) mem_101455.mem)[min_res_109441];
            
            int64_t abs_arg_109454 = sub64(x_109453, defunc_0_g_res_108858);
            int64_t abs_res_109455 = abs64(abs_arg_109454);
            bool cond_109456 = max_res_109439 == l_idx_109435;
            int64_t loopres_109457;
            int64_t loopres_109458;
            int64_t loopres_109459;
            
            if (cond_109456) {
                loopres_109457 = l_idx_109435;
                loopres_109458 = r_idx_109436;
                loopres_109459 = min_res_92421;
            } else {
                bool cond_109460 = slt64(abs_res_109448, abs_res_109455);
                bool cond_f_res_109461 = min_res_109441 == r_idx_109436;
                bool x_109462 = !cond_109460;
                bool y_109463 = cond_f_res_109461 && x_109462;
                bool cond_109464 = cond_109460 || y_109463;
                int64_t loopres_f_res_109465;
                
                if (cond_109464) {
                    loopres_f_res_109465 = max_res_109439;
                } else {
                    loopres_f_res_109465 = l_idx_109435;
                }
                
                int64_t loopres_f_res_109466;
                
                if (cond_109464) {
                    loopres_f_res_109466 = r_idx_109436;
                } else {
                    loopres_f_res_109466 = min_res_109441;
                }
                
                int64_t loopres_f_res_109467;
                
                if (cond_109464) {
                    int64_t loopres_f_res_t_res_109468 = add64((int64_t) 1,
                                                               span_109437);
                    
                    loopres_f_res_109467 = loopres_f_res_t_res_109468;
                } else {
                    int64_t loopres_f_res_f_res_109469 = add64((int64_t) 1,
                                                               span_109437);
                    
                    loopres_f_res_109467 = loopres_f_res_f_res_109469;
                }
                loopres_109457 = loopres_f_res_109465;
                loopres_109458 = loopres_f_res_109466;
                loopres_109459 = loopres_f_res_109467;
            }
            
            bool loop_cond_109470 = slt64(loopres_109459, min_res_92421);
            bool loop_while_tmp_109554 = loop_cond_109470;
            int64_t l_idx_tmp_109555 = loopres_109457;
            int64_t r_idx_tmp_109556 = loopres_109458;
            int64_t span_tmp_109557 = loopres_109459;
            
            loop_while_109434 = loop_while_tmp_109554;
            l_idx_109435 = l_idx_tmp_109555;
            r_idx_109436 = r_idx_tmp_109556;
            span_109437 = span_tmp_109557;
        }
        idx_108880 = loop_while_109434;
        idx_108881 = l_idx_109435;
        idx_108882 = r_idx_109436;
        idx_108883 = span_109437;
        
        int64_t min_res_108921 = smin64(min_arg_99038, idx_108881);
        int64_t max_res_108922 = smax64((int64_t) 0, min_res_108921);
        int64_t x_108923 = add64(min_res_99039, max_res_108922);
        int64_t r_108924 = sub64(x_108923, (int64_t) 1);
        bool x_108925 = sle64((int64_t) 0, r_108924);
        bool y_108926 = slt64(r_108924, n_92399);
        bool bounds_check_108927 = x_108925 && y_108926;
        bool index_certs_108928;
        
        if (!bounds_check_108927) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_108924,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108929;
        
        x_108929 = ((int64_t *) mem_101452.mem)[r_108924];
        
        int64_t abs_arg_108930 = sub64(x_108929, min_res_108857);
        int64_t abs_res_108931 = abs64(abs_arg_108930);
        bool x_108932 = sle64((int64_t) 0, max_res_108922);
        bool y_108933 = slt64(max_res_108922, n_92399);
        bool bounds_check_108934 = x_108932 && y_108933;
        bool index_certs_108935;
        
        if (!bounds_check_108934) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_108922,
                                   "] out of bounds for array of shape [",
                                   (long long) n_92399, "].",
                                   "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        int64_t x_108936;
        
        x_108936 = ((int64_t *) mem_101452.mem)[max_res_108922];
        
        int64_t abs_arg_108937 = sub64(x_108936, min_res_108857);
        int64_t abs_res_108938 = abs64(abs_arg_108937);
        int64_t max_res_108939 = smax64(abs_res_108931, abs_res_108938);
        double defunc_0_f_res_108940 = sitofp_i64_f64(max_res_108939);
        double defunc_1_f_res_108941 = max_res_99043 + defunc_0_f_res_108940;
        double defunc_2_reduce_res_108942;
        double defunc_2_reduce_res_108943;
        double defunc_2_reduce_res_108944;
        double defunc_2_reduce_res_108945;
        double defunc_2_reduce_res_108946;
        int64_t flat_tid_109471 = (int64_t) 0;
        int32_t num_tasks_109558;
        
        defunc_2_reduce_res_108942 = 0.0;
        defunc_2_reduce_res_108943 = 0.0;
        defunc_2_reduce_res_108944 = 0.0;
        defunc_2_reduce_res_108945 = 0.0;
        defunc_2_reduce_res_108946 = 0.0;
        
        struct futhark_mc_task_110258 futhark_mc_task_110258;
        
        futhark_mc_task_110258.ctx = ctx;
        futhark_mc_task_110258.free_last_res_99018 = last_res_99018;
        futhark_mc_task_110258.free_mem_101452 = mem_101452.mem;
        futhark_mc_task_110258.free_mem_101458 = mem_101458.mem;
        futhark_mc_task_110258.free_min_res_108857 = min_res_108857;
        futhark_mc_task_110258.free_max_res_108922 = max_res_108922;
        futhark_mc_task_110258.free_defunc_1_f_res_108941 =
            defunc_1_f_res_108941;
        futhark_mc_task_110258.retval_defunc_2_reduce_res_108942 =
            &defunc_2_reduce_res_108942;
        futhark_mc_task_110258.retval_defunc_2_reduce_res_108943 =
            &defunc_2_reduce_res_108943;
        futhark_mc_task_110258.retval_defunc_2_reduce_res_108944 =
            &defunc_2_reduce_res_108944;
        futhark_mc_task_110258.retval_defunc_2_reduce_res_108945 =
            &defunc_2_reduce_res_108945;
        futhark_mc_task_110258.retval_defunc_2_reduce_res_108946 =
            &defunc_2_reduce_res_108946;
        
        struct scheduler_segop futhark_mc_task_110258_task;
        
        futhark_mc_task_110258_task.args = &futhark_mc_task_110258;
        futhark_mc_task_110258_task.top_level_fn =
            futhark_mc_segred_task_110259;
        futhark_mc_task_110258_task.name = "futhark_mc_segred_task_110259";
        futhark_mc_task_110258_task.iterations = q_92401;
        futhark_mc_task_110258_task.task_time =
            &ctx->futhark_mc_segred_task_110259_total_time;
        futhark_mc_task_110258_task.task_iter =
            &ctx->futhark_mc_segred_task_110259_total_iter;
        futhark_mc_task_110258_task.sched = STATIC;
        futhark_mc_task_110258_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110259_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110258_task);
        
        if (futhark_mc_segred_task_110259_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        double x_108984 = defunc_2_reduce_res_108944 *
               defunc_2_reduce_res_108946;
        double y_108985 = defunc_2_reduce_res_108945 *
               defunc_2_reduce_res_108945;
        double a12_108986 = x_108984 - y_108985;
        double x_108987 = defunc_2_reduce_res_108944 *
               defunc_2_reduce_res_108945;
        double y_108988 = defunc_2_reduce_res_108943 *
               defunc_2_reduce_res_108946;
        double b12_108989 = x_108987 - y_108988;
        double x_108990 = defunc_2_reduce_res_108943 *
               defunc_2_reduce_res_108945;
        double y_108991 = defunc_2_reduce_res_108944 *
               defunc_2_reduce_res_108944;
        double c12_108992 = x_108990 - y_108991;
        double x_108993 = defunc_2_reduce_res_108942 *
               defunc_2_reduce_res_108946;
        double b2_108994 = x_108993 - y_108991;
        double x_108995 = defunc_2_reduce_res_108943 *
               defunc_2_reduce_res_108944;
        double y_108996 = defunc_2_reduce_res_108942 *
               defunc_2_reduce_res_108945;
        double c2_108997 = x_108995 - y_108996;
        double x_108998 = defunc_2_reduce_res_108942 * a12_108986;
        double y_108999 = defunc_2_reduce_res_108943 * b12_108989;
        double x_109000 = x_108998 + y_108999;
        double y_109001 = defunc_2_reduce_res_108944 * c12_108992;
        double y_109002 = x_109000 + y_109001;
        double det_109003 = 1.0 / y_109002;
        double a12_109004 = a12_108986 * det_109003;
        double b12_109005 = b12_108989 * det_109003;
        double c12_109006 = c12_108992 * det_109003;
        double b2_109007 = b2_108994 * det_109003;
        double c2_109008 = c2_108997 * det_109003;
        double defunc_2_reduce_res_109009;
        double defunc_2_reduce_res_109010;
        int64_t flat_tid_109508 = (int64_t) 0;
        int32_t num_tasks_109591;
        
        defunc_2_reduce_res_109009 = 0.0;
        defunc_2_reduce_res_109010 = 0.0;
        
        struct futhark_mc_task_110267 futhark_mc_task_110267;
        
        futhark_mc_task_110267.ctx = ctx;
        futhark_mc_task_110267.free_last_res_99018 = last_res_99018;
        futhark_mc_task_110267.free_mem_101449 = mem_101449.mem;
        futhark_mc_task_110267.free_mem_101452 = mem_101452.mem;
        futhark_mc_task_110267.free_mem_101458 = mem_101458.mem;
        futhark_mc_task_110267.free_min_res_108857 = min_res_108857;
        futhark_mc_task_110267.free_max_res_108922 = max_res_108922;
        futhark_mc_task_110267.free_defunc_1_f_res_108941 =
            defunc_1_f_res_108941;
        futhark_mc_task_110267.free_a12_109004 = a12_109004;
        futhark_mc_task_110267.free_b12_109005 = b12_109005;
        futhark_mc_task_110267.free_c12_109006 = c12_109006;
        futhark_mc_task_110267.free_b2_109007 = b2_109007;
        futhark_mc_task_110267.free_c2_109008 = c2_109008;
        futhark_mc_task_110267.retval_defunc_2_reduce_res_109009 =
            &defunc_2_reduce_res_109009;
        futhark_mc_task_110267.retval_defunc_2_reduce_res_109010 =
            &defunc_2_reduce_res_109010;
        
        struct scheduler_segop futhark_mc_task_110267_task;
        
        futhark_mc_task_110267_task.args = &futhark_mc_task_110267;
        futhark_mc_task_110267_task.top_level_fn =
            futhark_mc_segred_task_110268;
        futhark_mc_task_110267_task.name = "futhark_mc_segred_task_110268";
        futhark_mc_task_110267_task.iterations = q_92401;
        futhark_mc_task_110267_task.task_time =
            &ctx->futhark_mc_segred_task_110268_total_time;
        futhark_mc_task_110267_task.task_iter =
            &ctx->futhark_mc_segred_task_110268_total_iter;
        futhark_mc_task_110267_task.sched = STATIC;
        futhark_mc_task_110267_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_110268_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110267_task);
        
        if (futhark_mc_segred_task_110268_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        ((double *) mem_101461.mem)[gtid_108855] = defunc_2_reduce_res_109009;
        ((double *) mem_101464.mem)[gtid_108855] = defunc_2_reduce_res_109010;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110257_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110257_end -
                 futhark_mc_segmap_parloop_110257_start;
        
        ctx->futhark_mc_segmap_parloop_110257_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110257_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110257_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110255(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_108854 = tid;
    int num_tasks_109273 = info.nsubtasks;
    struct futhark_mc_task_110251 *futhark_mc_task_110251 =
                                  (struct futhark_mc_task_110251 *) args;
    struct futhark_context *ctx = futhark_mc_task_110251->ctx;
    uint64_t futhark_mc_segmap_nested_task_110255_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110255_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110251->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110251->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110251->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110251->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110251->free_i_92415;
    bool x_92416 = futhark_mc_task_110251->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110251->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110251->free_loop_cond_92426;
    int64_t last_res_99018 = futhark_mc_task_110251->free_last_res_99018;
    int64_t min_arg_99037 = futhark_mc_task_110251->free_min_arg_99037;
    int64_t min_arg_99038 = futhark_mc_task_110251->free_min_arg_99038;
    int64_t min_res_99039 = futhark_mc_task_110251->free_min_res_99039;
    double max_res_99043 = futhark_mc_task_110251->free_max_res_99043;
    struct memblock mem_101449 = {.desc ="mem_101449", .mem =
                                  futhark_mc_task_110251->free_mem_101449,
                                  .size =0, .references =NULL};
    struct memblock mem_101452 = {.desc ="mem_101452", .mem =
                                  futhark_mc_task_110251->free_mem_101452,
                                  .size =0, .references =NULL};
    struct memblock mem_101455 = {.desc ="mem_101455", .mem =
                                  futhark_mc_task_110251->free_mem_101455,
                                  .size =0, .references =NULL};
    struct memblock mem_101458 = {.desc ="mem_101458", .mem =
                                  futhark_mc_task_110251->free_mem_101458,
                                  .size =0, .references =NULL};
    struct memblock mem_101461 = {.desc ="mem_101461", .mem =
                                  futhark_mc_task_110251->free_mem_101461,
                                  .size =0, .references =NULL};
    struct memblock mem_101464 = {.desc ="mem_101464", .mem =
                                  futhark_mc_task_110251->free_mem_101464,
                                  .size =0, .references =NULL};
    int64_t iter_109415;
    struct futhark_mc_segmap_parloop_struct_110256
    futhark_mc_segmap_parloop_struct_110256;
    
    futhark_mc_segmap_parloop_struct_110256.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110256.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110256.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110256.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110256.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110256.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110256.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110256.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110256.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110256.free_last_res_99018 =
        last_res_99018;
    futhark_mc_segmap_parloop_struct_110256.free_min_arg_99037 = min_arg_99037;
    futhark_mc_segmap_parloop_struct_110256.free_min_arg_99038 = min_arg_99038;
    futhark_mc_segmap_parloop_struct_110256.free_min_res_99039 = min_res_99039;
    futhark_mc_segmap_parloop_struct_110256.free_max_res_99043 = max_res_99043;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101449 = mem_101449.mem;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101452 = mem_101452.mem;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101455 = mem_101455.mem;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101458 = mem_101458.mem;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101461 = mem_101461.mem;
    futhark_mc_segmap_parloop_struct_110256.free_mem_101464 = mem_101464.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110257_task;
    
    futhark_mc_segmap_parloop_110257_task.name =
        "futhark_mc_segmap_parloop_110257";
    futhark_mc_segmap_parloop_110257_task.fn = futhark_mc_segmap_parloop_110257;
    futhark_mc_segmap_parloop_110257_task.args =
        &futhark_mc_segmap_parloop_struct_110256;
    futhark_mc_segmap_parloop_110257_task.iterations = iterations;
    futhark_mc_segmap_parloop_110257_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110257_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110257_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110257_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110257_task);
    
    if (futhark_mc_segmap_parloop_110257_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110257_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110257_total_end -
                 futhark_mc_segmap_parloop_110257_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110257_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110257_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110257_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110255_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110255_end -
                 futhark_mc_segmap_nested_task_110255_start;
        
        ctx->futhark_mc_segmap_nested_task_110255_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110255_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110255_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_110224(void *args, int64_t start,
                                            int64_t end, int flat_tid_99005,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110223
    *futhark_mc_segmap_parloop_struct_110223 =
    (struct futhark_mc_segmap_parloop_struct_110223 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110223->ctx;
    uint64_t futhark_mc_segmap_parloop_110224_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110224_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110223->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110223->free_n_92399;
    int64_t q_92401 = futhark_mc_segmap_parloop_struct_110223->free_q_92401;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110223->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110223->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110223->free_i_92415;
    bool x_92416 = futhark_mc_segmap_parloop_struct_110223->free_x_92416;
    int64_t min_res_92421 =
            futhark_mc_segmap_parloop_struct_110223->free_min_res_92421;
    bool loop_cond_92426 =
         futhark_mc_segmap_parloop_struct_110223->free_loop_cond_92426;
    double i64_res_92427 =
           futhark_mc_segmap_parloop_struct_110223->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_segmap_parloop_struct_110223->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101445 =
            futhark_mc_segmap_parloop_struct_110223->free_bytes_101445;
    int64_t bytes_101457 =
            futhark_mc_segmap_parloop_struct_110223->free_bytes_101457;
    int64_t bytes_101460 =
            futhark_mc_segmap_parloop_struct_110223->free_bytes_101460;
    struct memblock mem_101573 = {.desc ="mem_101573", .mem =
                                  futhark_mc_segmap_parloop_struct_110223->free_mem_101573,
                                  .size =0, .references =NULL};
    struct memblock mem_101577 = {.desc ="mem_101577", .mem =
                                  futhark_mc_segmap_parloop_struct_110223->free_mem_101577,
                                  .size =0, .references =NULL};
    size_t mem_101446_cached_sizze_110225 = 0;
    unsigned char *mem_101446 = NULL;
    size_t mem_101449_cached_sizze_110226 = 0;
    unsigned char *mem_101449 = NULL;
    size_t mem_101452_cached_sizze_110227 = 0;
    unsigned char *mem_101452 = NULL;
    size_t mem_101455_cached_sizze_110228 = 0;
    unsigned char *mem_101455 = NULL;
    size_t mem_101458_cached_sizze_110229 = 0;
    unsigned char *mem_101458 = NULL;
    size_t mem_101461_cached_sizze_110230 = 0;
    unsigned char *mem_101461 = NULL;
    size_t mem_101464_cached_sizze_110231 = 0;
    unsigned char *mem_101464 = NULL;
    int64_t iterations = end - start;
    int64_t iter_108828 = start;
    
    if (mem_101446_cached_sizze_110225 < (size_t) bytes_101445) {
        mem_101446 = realloc(mem_101446, bytes_101445);
        mem_101446_cached_sizze_110225 = bytes_101445;
    }
    if (mem_101449_cached_sizze_110226 < (size_t) bytes_101445) {
        mem_101449 = realloc(mem_101449, bytes_101445);
        mem_101449_cached_sizze_110226 = bytes_101445;
    }
    if (mem_101452_cached_sizze_110227 < (size_t) bytes_101445) {
        mem_101452 = realloc(mem_101452, bytes_101445);
        mem_101452_cached_sizze_110227 = bytes_101445;
    }
    if (mem_101455_cached_sizze_110228 < (size_t) bytes_101445) {
        mem_101455 = realloc(mem_101455, bytes_101445);
        mem_101455_cached_sizze_110228 = bytes_101445;
    }
    if (mem_101458_cached_sizze_110229 < (size_t) bytes_101457) {
        mem_101458 = realloc(mem_101458, bytes_101457);
        mem_101458_cached_sizze_110229 = bytes_101457;
    }
    if (mem_101461_cached_sizze_110230 < (size_t) bytes_101460) {
        mem_101461 = realloc(mem_101461, bytes_101460);
        mem_101461_cached_sizze_110230 = bytes_101460;
    }
    if (mem_101464_cached_sizze_110231 < (size_t) bytes_101460) {
        mem_101464 = realloc(mem_101464, bytes_101460);
        mem_101464_cached_sizze_110231 = bytes_101460;
    }
    for (; iter_108828 < end; iter_108828++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109241 = m_92398;
        int64_t gtid_99006 = iter_108828;
        int64_t remnant_109242 = iter_108828 - gtid_99006;
        int64_t flat_tid_108829 = (int64_t) 0;
        int32_t num_tasks_109243;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_110232 futhark_mc_task_110232;
        
        futhark_mc_task_110232.ctx = ctx;
        futhark_mc_task_110232.free_n_92399 = n_92399;
        futhark_mc_task_110232.free_gtid_99006 = gtid_99006;
        futhark_mc_task_110232.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110232.free_mem_101446 = mem_101446;
        
        struct scheduler_segop futhark_mc_task_110232_task;
        
        futhark_mc_task_110232_task.args = &futhark_mc_task_110232;
        futhark_mc_task_110232_task.top_level_fn =
            futhark_mc_segscan_task_110233;
        futhark_mc_task_110232_task.name = "futhark_mc_segscan_task_110233";
        futhark_mc_task_110232_task.iterations = n_92399;
        futhark_mc_task_110232_task.task_time =
            &ctx->futhark_mc_segscan_task_110233_total_time;
        futhark_mc_task_110232_task.task_iter =
            &ctx->futhark_mc_segscan_task_110233_total_iter;
        futhark_mc_task_110232_task.sched = STATIC;
        futhark_mc_task_110232_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_110233_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110232_task);
        
        if (futhark_mc_segscan_task_110233_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_99018;
        
        last_res_99018 = ((int64_t *) mem_101446)[i_92415];
        for (int64_t i_109257 = 0; i_109257 < n_92399; i_109257++) {
            ((double *) mem_101449)[i_109257] = 0.0;
        }
        for (int64_t i_109258 = 0; i_109258 < n_92399; i_109258++) {
            ((int64_t *) mem_101452)[i_109258] = (int64_t) -1;
        }
        
        int64_t flat_tid_108838 = (int64_t) 0;
        int32_t num_tasks_109259;
        struct futhark_mc_task_110239 futhark_mc_task_110239;
        
        futhark_mc_task_110239.ctx = ctx;
        futhark_mc_task_110239.free_n_92399 = n_92399;
        futhark_mc_task_110239.free_gtid_99006 = gtid_99006;
        futhark_mc_task_110239.free_Y_mem_100186 = Y_mem_100186.mem;
        futhark_mc_task_110239.free_mem_101446 = mem_101446;
        futhark_mc_task_110239.free_mem_101449 = mem_101449;
        futhark_mc_task_110239.free_mem_101452 = mem_101452;
        
        struct scheduler_segop futhark_mc_task_110239_task;
        
        futhark_mc_task_110239_task.args = &futhark_mc_task_110239;
        futhark_mc_task_110239_task.top_level_fn =
            futhark_mc_segmap_task_110240;
        futhark_mc_task_110239_task.name = "futhark_mc_segmap_task_110240";
        futhark_mc_task_110239_task.iterations = n_92399;
        futhark_mc_task_110239_task.task_time =
            &ctx->futhark_mc_segmap_task_110240_total_time;
        futhark_mc_task_110239_task.task_iter =
            &ctx->futhark_mc_segmap_task_110240_total_iter;
        futhark_mc_task_110239_task.sched = STATIC;
        futhark_mc_task_110239_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110240_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110239_task);
        
        if (futhark_mc_segmap_task_110240_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_108846 = (int64_t) 0;
        int32_t num_tasks_109265;
        struct futhark_mc_task_110243 futhark_mc_task_110243;
        
        futhark_mc_task_110243.ctx = ctx;
        futhark_mc_task_110243.free_n_92399 = n_92399;
        futhark_mc_task_110243.free_mem_101452 = mem_101452;
        futhark_mc_task_110243.free_mem_101455 = mem_101455;
        
        struct scheduler_segop futhark_mc_task_110243_task;
        
        futhark_mc_task_110243_task.args = &futhark_mc_task_110243;
        futhark_mc_task_110243_task.top_level_fn =
            futhark_mc_segmap_task_110244;
        futhark_mc_task_110243_task.name = "futhark_mc_segmap_task_110244";
        futhark_mc_task_110243_task.iterations = n_92399;
        futhark_mc_task_110243_task.task_time =
            &ctx->futhark_mc_segmap_task_110244_total_time;
        futhark_mc_task_110243_task.task_iter =
            &ctx->futhark_mc_segmap_task_110244_total_iter;
        futhark_mc_task_110243_task.sched = STATIC;
        futhark_mc_task_110243_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110244_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110243_task);
        
        if (futhark_mc_segmap_task_110244_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_99037 = sub64(last_res_99018, (int64_t) 1);
        int64_t min_arg_99038 = sub64(last_res_99018, min_res_92421);
        int64_t min_res_99039 = smin64(q_92401, last_res_99018);
        double i64_res_99040 = sitofp_i64_f64(last_res_99018);
        double x_99041 = i64_res_92427 - i64_res_99040;
        double max_arg_99042 = x_99041 / 2.0;
        double max_res_99043 = fmax64(0.0, max_arg_99042);
        int64_t flat_tid_108850 = (int64_t) 0;
        int32_t num_tasks_109269;
        struct futhark_mc_task_110247 futhark_mc_task_110247;
        
        futhark_mc_task_110247.ctx = ctx;
        futhark_mc_task_110247.free_q_92401 = q_92401;
        futhark_mc_task_110247.free_last_res_99018 = last_res_99018;
        futhark_mc_task_110247.free_mem_101458 = mem_101458;
        
        struct scheduler_segop futhark_mc_task_110247_task;
        
        futhark_mc_task_110247_task.args = &futhark_mc_task_110247;
        futhark_mc_task_110247_task.top_level_fn =
            futhark_mc_segmap_task_110248;
        futhark_mc_task_110247_task.name = "futhark_mc_segmap_task_110248";
        futhark_mc_task_110247_task.iterations = q_92401;
        futhark_mc_task_110247_task.task_time =
            &ctx->futhark_mc_segmap_task_110248_total_time;
        futhark_mc_task_110247_task.task_iter =
            &ctx->futhark_mc_segmap_task_110248_total_iter;
        futhark_mc_task_110247_task.sched = STATIC;
        futhark_mc_task_110247_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110248_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110247_task);
        
        if (futhark_mc_segmap_task_110248_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_109052 = (int64_t) 0;
        int32_t num_tasks_109273;
        int64_t flat_tid_108854 = (int64_t) 0;
        struct futhark_mc_task_110251 futhark_mc_task_110251;
        
        futhark_mc_task_110251.ctx = ctx;
        futhark_mc_task_110251.free_n_92399 = n_92399;
        futhark_mc_task_110251.free_q_92401 = q_92401;
        futhark_mc_task_110251.free_jump_92403 = jump_92403;
        futhark_mc_task_110251.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110251.free_i_92415 = i_92415;
        futhark_mc_task_110251.free_x_92416 = x_92416;
        futhark_mc_task_110251.free_min_res_92421 = min_res_92421;
        futhark_mc_task_110251.free_loop_cond_92426 = loop_cond_92426;
        futhark_mc_task_110251.free_last_res_99018 = last_res_99018;
        futhark_mc_task_110251.free_min_arg_99037 = min_arg_99037;
        futhark_mc_task_110251.free_min_arg_99038 = min_arg_99038;
        futhark_mc_task_110251.free_min_res_99039 = min_res_99039;
        futhark_mc_task_110251.free_max_res_99043 = max_res_99043;
        futhark_mc_task_110251.free_mem_101449 = mem_101449;
        futhark_mc_task_110251.free_mem_101452 = mem_101452;
        futhark_mc_task_110251.free_mem_101455 = mem_101455;
        futhark_mc_task_110251.free_mem_101458 = mem_101458;
        futhark_mc_task_110251.free_mem_101461 = mem_101461;
        futhark_mc_task_110251.free_mem_101464 = mem_101464;
        
        struct scheduler_segop futhark_mc_task_110251_task;
        
        futhark_mc_task_110251_task.args = &futhark_mc_task_110251;
        futhark_mc_task_110251_task.top_level_fn =
            futhark_mc_segmap_task_110252;
        futhark_mc_task_110251_task.name = "futhark_mc_segmap_task_110252";
        futhark_mc_task_110251_task.iterations = n_m_92409;
        futhark_mc_task_110251_task.task_time =
            &ctx->futhark_mc_segmap_task_110252_total_time;
        futhark_mc_task_110251_task.task_iter =
            &ctx->futhark_mc_segmap_task_110252_total_iter;
        futhark_mc_task_110251_task.sched = DYNAMIC;
        futhark_mc_task_110251_task.nested_fn =
            futhark_mc_segmap_nested_task_110255;
        
        int futhark_mc_segmap_task_110252_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110251_task);
        
        if (futhark_mc_segmap_task_110252_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101573.mem + gtid_99006 * n_m_92409 * (int64_t) 8,
                    mem_101461 + (int64_t) 0, n_m_92409 * (int64_t) 8);
        if (n_m_92409 * (int64_t) 8 > 0)
            memmove(mem_101577.mem + gtid_99006 * n_m_92409 * (int64_t) 8,
                    mem_101464 + (int64_t) 0, n_m_92409 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101446);
    free(mem_101449);
    free(mem_101452);
    free(mem_101455);
    free(mem_101458);
    free(mem_101461);
    free(mem_101464);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110224_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110224_end -
                 futhark_mc_segmap_parloop_110224_start;
        
        ctx->futhark_mc_segmap_parloop_110224_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110224_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110224_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110222(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_99005 = tid;
    int num_tasks_108577 = info.nsubtasks;
    struct futhark_mc_task_110211 *futhark_mc_task_110211 =
                                  (struct futhark_mc_task_110211 *) args;
    struct futhark_context *ctx = futhark_mc_task_110211->ctx;
    uint64_t futhark_mc_segmap_nested_task_110222_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110222_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110211->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110211->free_n_92399;
    int64_t q_92401 = futhark_mc_task_110211->free_q_92401;
    int64_t jump_92403 = futhark_mc_task_110211->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110211->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110211->free_i_92415;
    bool x_92416 = futhark_mc_task_110211->free_x_92416;
    int64_t min_res_92421 = futhark_mc_task_110211->free_min_res_92421;
    bool loop_cond_92426 = futhark_mc_task_110211->free_loop_cond_92426;
    double i64_res_92427 = futhark_mc_task_110211->free_i64_res_92427;
    struct memblock Y_mem_100186 = {.desc ="Y_mem_100186", .mem =
                                    futhark_mc_task_110211->free_Y_mem_100186,
                                    .size =0, .references =NULL};
    int64_t bytes_101445 = futhark_mc_task_110211->free_bytes_101445;
    int64_t bytes_101457 = futhark_mc_task_110211->free_bytes_101457;
    int64_t bytes_101460 = futhark_mc_task_110211->free_bytes_101460;
    struct memblock mem_101573 = {.desc ="mem_101573", .mem =
                                  futhark_mc_task_110211->free_mem_101573,
                                  .size =0, .references =NULL};
    struct memblock mem_101577 = {.desc ="mem_101577", .mem =
                                  futhark_mc_task_110211->free_mem_101577,
                                  .size =0, .references =NULL};
    int64_t iter_108828;
    struct futhark_mc_segmap_parloop_struct_110223
    futhark_mc_segmap_parloop_struct_110223;
    
    futhark_mc_segmap_parloop_struct_110223.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110223.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110223.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110223.free_q_92401 = q_92401;
    futhark_mc_segmap_parloop_struct_110223.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110223.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110223.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110223.free_x_92416 = x_92416;
    futhark_mc_segmap_parloop_struct_110223.free_min_res_92421 = min_res_92421;
    futhark_mc_segmap_parloop_struct_110223.free_loop_cond_92426 =
        loop_cond_92426;
    futhark_mc_segmap_parloop_struct_110223.free_i64_res_92427 = i64_res_92427;
    futhark_mc_segmap_parloop_struct_110223.free_Y_mem_100186 =
        Y_mem_100186.mem;
    futhark_mc_segmap_parloop_struct_110223.free_bytes_101445 = bytes_101445;
    futhark_mc_segmap_parloop_struct_110223.free_bytes_101457 = bytes_101457;
    futhark_mc_segmap_parloop_struct_110223.free_bytes_101460 = bytes_101460;
    futhark_mc_segmap_parloop_struct_110223.free_mem_101573 = mem_101573.mem;
    futhark_mc_segmap_parloop_struct_110223.free_mem_101577 = mem_101577.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110224_task;
    
    futhark_mc_segmap_parloop_110224_task.name =
        "futhark_mc_segmap_parloop_110224";
    futhark_mc_segmap_parloop_110224_task.fn = futhark_mc_segmap_parloop_110224;
    futhark_mc_segmap_parloop_110224_task.args =
        &futhark_mc_segmap_parloop_struct_110223;
    futhark_mc_segmap_parloop_110224_task.iterations = iterations;
    futhark_mc_segmap_parloop_110224_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110224_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110224_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110224_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110224_task);
    
    if (futhark_mc_segmap_parloop_110224_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110224_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110224_total_end -
                 futhark_mc_segmap_parloop_110224_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110224_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110224_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110224_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110222_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110222_end -
                 futhark_mc_segmap_nested_task_110222_start;
        
        ctx->futhark_mc_segmap_nested_task_110222_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110222_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110222_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_110273 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    int64_t free_y_94325;
    unsigned char *free_ext_mem_101584;
    unsigned char *free_ext_mem_101585;
    int64_t free_bytes_101587;
    unsigned char *free_mem_101607;
};
struct futhark_mc_segmap_parloop_struct_110275 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    int64_t free_y_94325;
    unsigned char *free_ext_mem_101584;
    unsigned char *free_ext_mem_101585;
    int64_t free_bytes_101587;
    unsigned char *free_mem_101607;
};
static int futhark_mc_segmap_parloop_110276(void *args, int64_t start,
                                            int64_t end, int flat_tid_99450,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110275
    *futhark_mc_segmap_parloop_struct_110275 =
    (struct futhark_mc_segmap_parloop_struct_110275 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110275->ctx;
    uint64_t futhark_mc_segmap_parloop_110276_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110276_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110275->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110275->free_n_92399;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110275->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110275->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110275->free_i_92415;
    int64_t y_94325 = futhark_mc_segmap_parloop_struct_110275->free_y_94325;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_segmap_parloop_struct_110275->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_segmap_parloop_struct_110275->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    int64_t bytes_101587 =
            futhark_mc_segmap_parloop_struct_110275->free_bytes_101587;
    struct memblock mem_101607 = {.desc ="mem_101607", .mem =
                                  futhark_mc_segmap_parloop_struct_110275->free_mem_101607,
                                  .size =0, .references =NULL};
    size_t mem_101591_cached_sizze_110277 = 0;
    unsigned char *mem_101591 = NULL;
    int64_t iterations = end - start;
    int64_t iter_109607 = start;
    
    if (mem_101591_cached_sizze_110277 < (size_t) bytes_101587) {
        mem_101591 = realloc(mem_101591, bytes_101587);
        mem_101591_cached_sizze_110277 = bytes_101587;
    }
    for (; iter_109607 < end; iter_109607++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109657 = m_92398;
        int64_t gtid_99451 = iter_109607;
        int64_t remnant_109658 = iter_109607 - gtid_99451;
        
        for (int64_t i_109608 = 0; i_109608 < n_92399; i_109608++) {
            int64_t m_v_109610 = sdiv64(i_109608, jump_92403);
            bool cond_109611 = m_v_109610 == y_94325;
            int64_t j_109612;
            
            if (cond_109611) {
                int64_t j_t_res_109613 = sub64(m_v_109610, (int64_t) 1);
                
                j_109612 = j_t_res_109613;
            } else {
                j_109612 = m_v_109610;
            }
            
            int64_t min_arg_109614 = mul64(jump_92403, j_109612);
            int64_t min_res_109615 = smin64(i_92415, min_arg_109614);
            int64_t defunc_0_m_fun_arg_109616 = add64((int64_t) 1, j_109612);
            int64_t min_arg_109617 = mul64(jump_92403,
                                           defunc_0_m_fun_arg_109616);
            int64_t min_res_109618 = smin64(i_92415, min_arg_109617);
            int64_t i64_arg_109619 = sub64(min_res_109618, min_res_109615);
            double i64_res_109620 = sitofp_i64_f64(i64_arg_109619);
            int64_t i64_arg_109621 = sub64(i_109608, min_res_109615);
            double i64_res_109622 = sitofp_i64_f64(i64_arg_109621);
            double u_109623 = i64_res_109622 / i64_res_109620;
            double u2_109624 = u_109623 * u_109623;
            double u3_109625 = u_109623 * u2_109624;
            double x_109626 = 2.0 * u3_109625;
            double y_109627 = 3.0 * u2_109624;
            double x_109628 = x_109626 - y_109627;
            double x_109629 = 1.0 + x_109628;
            bool x_109630 = sle64((int64_t) 0, j_109612);
            bool y_109631 = slt64(j_109612, n_m_92409);
            bool bounds_check_109632 = x_109630 && y_109631;
            bool index_certs_109633;
            
            if (!bounds_check_109632) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_109612,
                              "] out of bounds for array of shape [",
                              (long long) n_m_92409, "].",
                              "-> #0  loess.fut:713:27-33\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            double y_109634;
            
            y_109634 = ((double *) ext_mem_101585.mem)[gtid_99451 * n_m_92409 +
                                                       j_109612];
            
            double x_109635 = x_109629 * y_109634;
            double x_109636 = y_109627 - x_109626;
            bool x_109637 = sle64((int64_t) 0, defunc_0_m_fun_arg_109616);
            bool y_109638 = slt64(defunc_0_m_fun_arg_109616, n_m_92409);
            bool bounds_check_109639 = x_109637 && y_109638;
            bool index_certs_109640;
            
            if (!bounds_check_109639) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_109616,
                              "] out of bounds for array of shape [",
                              (long long) n_m_92409, "].",
                              "-> #0  loess.fut:714:27-37\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
                err = 1;
                goto cleanup;
            }
            
            double y_109641;
            
            y_109641 = ((double *) ext_mem_101585.mem)[gtid_99451 * n_m_92409 +
                                                       defunc_0_m_fun_arg_109616];
            
            double y_109642 = x_109636 * y_109641;
            double x_109643 = x_109635 + y_109642;
            double y_109644 = 2.0 * u2_109624;
            double x_109645 = u3_109625 - y_109644;
            double x_109646 = u_109623 + x_109645;
            double y_109647;
            
            y_109647 = ((double *) ext_mem_101584.mem)[gtid_99451 * n_m_92409 +
                                                       j_109612];
            
            double x_109648 = x_109646 * y_109647;
            double y_109649 = i64_res_109620 * x_109648;
            double x_109650 = x_109643 + y_109649;
            double x_109651 = u3_109625 - u2_109624;
            double y_109652;
            
            y_109652 = ((double *) ext_mem_101584.mem)[gtid_99451 * n_m_92409 +
                                                       defunc_0_m_fun_arg_109616];
            
            double x_109653 = x_109651 * y_109652;
            double y_109654 = i64_res_109620 * x_109653;
            double defunc_4_interpolate_proc_res_109655 = x_109650 + y_109654;
            
            ((double *) mem_101591)[i_109608] =
                defunc_4_interpolate_proc_res_109655;
        }
        if (n_92399 * (int64_t) 8 > 0)
            memmove(mem_101607.mem + gtid_99451 * n_92399 * (int64_t) 8,
                    mem_101591 + (int64_t) 0, n_92399 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101591);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110276_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110276_end -
                 futhark_mc_segmap_parloop_110276_start;
        
        ctx->futhark_mc_segmap_parloop_110276_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110276_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110276_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110274(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_99450 = tid;
    int num_tasks_109606 = info.nsubtasks;
    struct futhark_mc_task_110273 *futhark_mc_task_110273 =
                                  (struct futhark_mc_task_110273 *) args;
    struct futhark_context *ctx = futhark_mc_task_110273->ctx;
    uint64_t futhark_mc_segmap_task_110274_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110274_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110273->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110273->free_n_92399;
    int64_t jump_92403 = futhark_mc_task_110273->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110273->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110273->free_i_92415;
    int64_t y_94325 = futhark_mc_task_110273->free_y_94325;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_task_110273->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_task_110273->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    int64_t bytes_101587 = futhark_mc_task_110273->free_bytes_101587;
    struct memblock mem_101607 = {.desc ="mem_101607", .mem =
                                  futhark_mc_task_110273->free_mem_101607,
                                  .size =0, .references =NULL};
    int64_t iter_109607;
    struct futhark_mc_segmap_parloop_struct_110275
    futhark_mc_segmap_parloop_struct_110275;
    
    futhark_mc_segmap_parloop_struct_110275.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110275.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110275.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110275.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110275.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110275.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110275.free_y_94325 = y_94325;
    futhark_mc_segmap_parloop_struct_110275.free_ext_mem_101584 =
        ext_mem_101584.mem;
    futhark_mc_segmap_parloop_struct_110275.free_ext_mem_101585 =
        ext_mem_101585.mem;
    futhark_mc_segmap_parloop_struct_110275.free_bytes_101587 = bytes_101587;
    futhark_mc_segmap_parloop_struct_110275.free_mem_101607 = mem_101607.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110276_task;
    
    futhark_mc_segmap_parloop_110276_task.name =
        "futhark_mc_segmap_parloop_110276";
    futhark_mc_segmap_parloop_110276_task.fn = futhark_mc_segmap_parloop_110276;
    futhark_mc_segmap_parloop_110276_task.args =
        &futhark_mc_segmap_parloop_struct_110275;
    futhark_mc_segmap_parloop_110276_task.iterations = iterations;
    futhark_mc_segmap_parloop_110276_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110276_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110276_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110276_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110276_task);
    
    if (futhark_mc_segmap_parloop_110276_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110276_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110276_total_end -
                 futhark_mc_segmap_parloop_110276_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110276_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110276_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110276_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110274_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110274_end -
                 futhark_mc_segmap_task_110274_start;
        
        ctx->futhark_mc_segmap_task_110274_runs[tid]++;
        ctx->futhark_mc_segmap_task_110274_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110274_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_110279 {
    struct futhark_context *ctx;
    int64_t free_m_92398;
    int64_t free_n_92399;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    int64_t free_y_94325;
    unsigned char *free_ext_mem_101584;
    unsigned char *free_ext_mem_101585;
    int64_t free_bytes_101587;
    unsigned char *free_mem_101607;
};
struct futhark_mc_task_110282 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    int64_t free_y_94325;
    int64_t free_gtid_99457;
    unsigned char *free_ext_mem_101584;
    unsigned char *free_ext_mem_101585;
    unsigned char *free_mem_101588;
};
struct futhark_mc_segmap_parloop_struct_110284 {
    struct futhark_context *ctx;
    int64_t free_n_92399;
    int64_t free_jump_92403;
    int64_t free_n_m_92409;
    int64_t free_i_92415;
    int64_t free_y_94325;
    int64_t free_gtid_99457;
    unsigned char *free_ext_mem_101584;
    unsigned char *free_ext_mem_101585;
    unsigned char *free_mem_101588;
};
static int futhark_mc_segmap_parloop_110285(void *args, int64_t start,
                                            int64_t end, int flat_tid_109661,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110284
    *futhark_mc_segmap_parloop_struct_110284 =
    (struct futhark_mc_segmap_parloop_struct_110284 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110284->ctx;
    uint64_t futhark_mc_segmap_parloop_110285_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110285_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110284->free_n_92399;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110284->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110284->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110284->free_i_92415;
    int64_t y_94325 = futhark_mc_segmap_parloop_struct_110284->free_y_94325;
    int64_t gtid_99457 =
            futhark_mc_segmap_parloop_struct_110284->free_gtid_99457;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_segmap_parloop_struct_110284->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_segmap_parloop_struct_110284->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    struct memblock mem_101588 = {.desc ="mem_101588", .mem =
                                  futhark_mc_segmap_parloop_struct_110284->free_mem_101588,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_109712 = start;
    
    for (; iter_109712 < end; iter_109712++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109714 = n_92399;
        int64_t gtid_109662 = iter_109712;
        int64_t remnant_109715 = iter_109712 - gtid_109662;
        int64_t m_v_109663 = sdiv64(gtid_109662, jump_92403);
        bool cond_109664 = m_v_109663 == y_94325;
        int64_t j_109665;
        
        if (cond_109664) {
            int64_t j_t_res_109713 = sub64(m_v_109663, (int64_t) 1);
            
            j_109665 = j_t_res_109713;
        } else {
            j_109665 = m_v_109663;
        }
        
        int64_t min_arg_109667 = mul64(jump_92403, j_109665);
        int64_t min_res_109668 = smin64(i_92415, min_arg_109667);
        int64_t defunc_0_m_fun_arg_109669 = add64((int64_t) 1, j_109665);
        int64_t min_arg_109670 = mul64(jump_92403, defunc_0_m_fun_arg_109669);
        int64_t min_res_109671 = smin64(i_92415, min_arg_109670);
        int64_t i64_arg_109672 = sub64(min_res_109671, min_res_109668);
        double i64_res_109673 = sitofp_i64_f64(i64_arg_109672);
        int64_t i64_arg_109674 = sub64(gtid_109662, min_res_109668);
        double i64_res_109675 = sitofp_i64_f64(i64_arg_109674);
        double u_109676 = i64_res_109675 / i64_res_109673;
        double u2_109677 = u_109676 * u_109676;
        double u3_109678 = u_109676 * u2_109677;
        double x_109679 = 2.0 * u3_109678;
        double y_109680 = 3.0 * u2_109677;
        double x_109681 = x_109679 - y_109680;
        double x_109682 = 1.0 + x_109681;
        bool x_109683 = sle64((int64_t) 0, j_109665);
        bool y_109684 = slt64(j_109665, n_m_92409);
        bool bounds_check_109685 = x_109683 && y_109684;
        bool index_certs_109686;
        
        if (!bounds_check_109685) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_109665,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_92409, "].",
                                   "-> #0  loess.fut:713:27-33\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        double y_109687;
        
        y_109687 = ((double *) ext_mem_101585.mem)[gtid_99457 * n_m_92409 +
                                                   j_109665];
        
        double x_109688 = x_109682 * y_109687;
        double x_109689 = y_109680 - x_109679;
        bool x_109690 = sle64((int64_t) 0, defunc_0_m_fun_arg_109669);
        bool y_109691 = slt64(defunc_0_m_fun_arg_109669, n_m_92409);
        bool bounds_check_109692 = x_109690 && y_109691;
        bool index_certs_109693;
        
        if (!bounds_check_109692) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_109669,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_92409, "].",
                                   "-> #0  loess.fut:714:27-37\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
            err = 1;
            goto cleanup;
        }
        
        double y_109694;
        
        y_109694 = ((double *) ext_mem_101585.mem)[gtid_99457 * n_m_92409 +
                                                   defunc_0_m_fun_arg_109669];
        
        double y_109695 = x_109689 * y_109694;
        double x_109696 = x_109688 + y_109695;
        double y_109697 = 2.0 * u2_109677;
        double x_109698 = u3_109678 - y_109697;
        double x_109699 = u_109676 + x_109698;
        double y_109700;
        
        y_109700 = ((double *) ext_mem_101584.mem)[gtid_99457 * n_m_92409 +
                                                   j_109665];
        
        double x_109701 = x_109699 * y_109700;
        double y_109702 = i64_res_109673 * x_109701;
        double x_109703 = x_109696 + y_109702;
        double x_109704 = u3_109678 - u2_109677;
        double y_109705;
        
        y_109705 = ((double *) ext_mem_101584.mem)[gtid_99457 * n_m_92409 +
                                                   defunc_0_m_fun_arg_109669];
        
        double x_109706 = x_109704 * y_109705;
        double y_109707 = i64_res_109673 * x_109706;
        double defunc_4_interpolate_proc_res_109708 = x_109703 + y_109707;
        
        ((double *) mem_101588.mem)[gtid_109662] =
            defunc_4_interpolate_proc_res_109708;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110285_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110285_end -
                 futhark_mc_segmap_parloop_110285_start;
        
        ctx->futhark_mc_segmap_parloop_110285_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110285_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110285_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_110283(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_109661 = tid;
    int num_tasks_109711 = info.nsubtasks;
    struct futhark_mc_task_110282 *futhark_mc_task_110282 =
                                  (struct futhark_mc_task_110282 *) args;
    struct futhark_context *ctx = futhark_mc_task_110282->ctx;
    uint64_t futhark_mc_segmap_task_110283_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_110283_start = get_wall_time();
    
    int64_t n_92399 = futhark_mc_task_110282->free_n_92399;
    int64_t jump_92403 = futhark_mc_task_110282->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110282->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110282->free_i_92415;
    int64_t y_94325 = futhark_mc_task_110282->free_y_94325;
    int64_t gtid_99457 = futhark_mc_task_110282->free_gtid_99457;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_task_110282->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_task_110282->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    struct memblock mem_101588 = {.desc ="mem_101588", .mem =
                                  futhark_mc_task_110282->free_mem_101588,
                                  .size =0, .references =NULL};
    int64_t iter_109712;
    struct futhark_mc_segmap_parloop_struct_110284
    futhark_mc_segmap_parloop_struct_110284;
    
    futhark_mc_segmap_parloop_struct_110284.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110284.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110284.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110284.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110284.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110284.free_y_94325 = y_94325;
    futhark_mc_segmap_parloop_struct_110284.free_gtid_99457 = gtid_99457;
    futhark_mc_segmap_parloop_struct_110284.free_ext_mem_101584 =
        ext_mem_101584.mem;
    futhark_mc_segmap_parloop_struct_110284.free_ext_mem_101585 =
        ext_mem_101585.mem;
    futhark_mc_segmap_parloop_struct_110284.free_mem_101588 = mem_101588.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110285_task;
    
    futhark_mc_segmap_parloop_110285_task.name =
        "futhark_mc_segmap_parloop_110285";
    futhark_mc_segmap_parloop_110285_task.fn = futhark_mc_segmap_parloop_110285;
    futhark_mc_segmap_parloop_110285_task.args =
        &futhark_mc_segmap_parloop_struct_110284;
    futhark_mc_segmap_parloop_110285_task.iterations = iterations;
    futhark_mc_segmap_parloop_110285_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110285_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110285_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110285_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110285_task);
    
    if (futhark_mc_segmap_parloop_110285_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110285_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110285_total_end -
                 futhark_mc_segmap_parloop_110285_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110285_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110285_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110285_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_110283_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_110283_end -
                 futhark_mc_segmap_task_110283_start;
        
        ctx->futhark_mc_segmap_task_110283_runs[tid]++;
        ctx->futhark_mc_segmap_task_110283_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_110283_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_110280(void *args, int64_t start,
                                            int64_t end, int flat_tid_99456,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_110279
    *futhark_mc_segmap_parloop_struct_110279 =
    (struct futhark_mc_segmap_parloop_struct_110279 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_110279->ctx;
    uint64_t futhark_mc_segmap_parloop_110280_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110280_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_segmap_parloop_struct_110279->free_m_92398;
    int64_t n_92399 = futhark_mc_segmap_parloop_struct_110279->free_n_92399;
    int64_t jump_92403 =
            futhark_mc_segmap_parloop_struct_110279->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_segmap_parloop_struct_110279->free_n_m_92409;
    int64_t i_92415 = futhark_mc_segmap_parloop_struct_110279->free_i_92415;
    int64_t y_94325 = futhark_mc_segmap_parloop_struct_110279->free_y_94325;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_segmap_parloop_struct_110279->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_segmap_parloop_struct_110279->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    int64_t bytes_101587 =
            futhark_mc_segmap_parloop_struct_110279->free_bytes_101587;
    struct memblock mem_101607 = {.desc ="mem_101607", .mem =
                                  futhark_mc_segmap_parloop_struct_110279->free_mem_101607,
                                  .size =0, .references =NULL};
    size_t mem_101588_cached_sizze_110281 = 0;
    unsigned char *mem_101588 = NULL;
    int64_t iterations = end - start;
    int64_t iter_109660 = start;
    
    if (mem_101588_cached_sizze_110281 < (size_t) bytes_101587) {
        mem_101588 = realloc(mem_101588, bytes_101587);
        mem_101588_cached_sizze_110281 = bytes_101587;
    }
    for (; iter_109660 < end; iter_109660++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_109709 = m_92398;
        int64_t gtid_99457 = iter_109660;
        int64_t remnant_109710 = iter_109660 - gtid_99457;
        int64_t flat_tid_109661 = (int64_t) 0;
        int32_t num_tasks_109711;
        struct futhark_mc_task_110282 futhark_mc_task_110282;
        
        futhark_mc_task_110282.ctx = ctx;
        futhark_mc_task_110282.free_n_92399 = n_92399;
        futhark_mc_task_110282.free_jump_92403 = jump_92403;
        futhark_mc_task_110282.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110282.free_i_92415 = i_92415;
        futhark_mc_task_110282.free_y_94325 = y_94325;
        futhark_mc_task_110282.free_gtid_99457 = gtid_99457;
        futhark_mc_task_110282.free_ext_mem_101584 = ext_mem_101584.mem;
        futhark_mc_task_110282.free_ext_mem_101585 = ext_mem_101585.mem;
        futhark_mc_task_110282.free_mem_101588 = mem_101588;
        
        struct scheduler_segop futhark_mc_task_110282_task;
        
        futhark_mc_task_110282_task.args = &futhark_mc_task_110282;
        futhark_mc_task_110282_task.top_level_fn =
            futhark_mc_segmap_task_110283;
        futhark_mc_task_110282_task.name = "futhark_mc_segmap_task_110283";
        futhark_mc_task_110282_task.iterations = n_92399;
        futhark_mc_task_110282_task.task_time =
            &ctx->futhark_mc_segmap_task_110283_total_time;
        futhark_mc_task_110282_task.task_iter =
            &ctx->futhark_mc_segmap_task_110283_total_iter;
        futhark_mc_task_110282_task.sched = STATIC;
        futhark_mc_task_110282_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_110283_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110282_task);
        
        if (futhark_mc_segmap_task_110283_err != 0) {
            ;
            err = 1;
            goto cleanup;
        }
        if (n_92399 * (int64_t) 8 > 0)
            memmove(mem_101607.mem + gtid_99457 * n_92399 * (int64_t) 8,
                    mem_101588 + (int64_t) 0, n_92399 * (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_101588);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110280_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110280_end -
                 futhark_mc_segmap_parloop_110280_start;
        
        ctx->futhark_mc_segmap_parloop_110280_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_110280_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_110280_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_110278(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_99456 = tid;
    int num_tasks_109606 = info.nsubtasks;
    struct futhark_mc_task_110273 *futhark_mc_task_110273 =
                                  (struct futhark_mc_task_110273 *) args;
    struct futhark_context *ctx = futhark_mc_task_110273->ctx;
    uint64_t futhark_mc_segmap_nested_task_110278_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_110278_start = get_wall_time();
    
    int64_t m_92398 = futhark_mc_task_110273->free_m_92398;
    int64_t n_92399 = futhark_mc_task_110273->free_n_92399;
    int64_t jump_92403 = futhark_mc_task_110273->free_jump_92403;
    int64_t n_m_92409 = futhark_mc_task_110273->free_n_m_92409;
    int64_t i_92415 = futhark_mc_task_110273->free_i_92415;
    int64_t y_94325 = futhark_mc_task_110273->free_y_94325;
    struct memblock ext_mem_101584 = {.desc ="ext_mem_101584", .mem =
                                      futhark_mc_task_110273->free_ext_mem_101584,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_101585 = {.desc ="ext_mem_101585", .mem =
                                      futhark_mc_task_110273->free_ext_mem_101585,
                                      .size =0, .references =NULL};
    int64_t bytes_101587 = futhark_mc_task_110273->free_bytes_101587;
    struct memblock mem_101607 = {.desc ="mem_101607", .mem =
                                  futhark_mc_task_110273->free_mem_101607,
                                  .size =0, .references =NULL};
    int64_t iter_109660;
    struct futhark_mc_segmap_parloop_struct_110279
    futhark_mc_segmap_parloop_struct_110279;
    
    futhark_mc_segmap_parloop_struct_110279.ctx = ctx;
    futhark_mc_segmap_parloop_struct_110279.free_m_92398 = m_92398;
    futhark_mc_segmap_parloop_struct_110279.free_n_92399 = n_92399;
    futhark_mc_segmap_parloop_struct_110279.free_jump_92403 = jump_92403;
    futhark_mc_segmap_parloop_struct_110279.free_n_m_92409 = n_m_92409;
    futhark_mc_segmap_parloop_struct_110279.free_i_92415 = i_92415;
    futhark_mc_segmap_parloop_struct_110279.free_y_94325 = y_94325;
    futhark_mc_segmap_parloop_struct_110279.free_ext_mem_101584 =
        ext_mem_101584.mem;
    futhark_mc_segmap_parloop_struct_110279.free_ext_mem_101585 =
        ext_mem_101585.mem;
    futhark_mc_segmap_parloop_struct_110279.free_bytes_101587 = bytes_101587;
    futhark_mc_segmap_parloop_struct_110279.free_mem_101607 = mem_101607.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_110280_task;
    
    futhark_mc_segmap_parloop_110280_task.name =
        "futhark_mc_segmap_parloop_110280";
    futhark_mc_segmap_parloop_110280_task.fn = futhark_mc_segmap_parloop_110280;
    futhark_mc_segmap_parloop_110280_task.args =
        &futhark_mc_segmap_parloop_struct_110279;
    futhark_mc_segmap_parloop_110280_task.iterations = iterations;
    futhark_mc_segmap_parloop_110280_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_110280_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_110280_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_110280_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_110280_task);
    
    if (futhark_mc_segmap_parloop_110280_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_110280_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_110280_total_end -
                 futhark_mc_segmap_parloop_110280_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110280_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110280_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_110280_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_110278_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_110278_end -
                 futhark_mc_segmap_nested_task_110278_start;
        
        ctx->futhark_mc_segmap_nested_task_110278_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_110278_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_110278_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_f64_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f64_2d *futhark_new_f64_2d(struct futhark_context *ctx, const
                                          double *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f64_2d *bad = NULL;
    struct futhark_f64_2d *arr =
                          (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 8, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 8 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 8);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f64_2d *futhark_new_raw_f64_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f64_2d *bad = NULL;
    struct futhark_f64_2d *arr =
                          (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 8, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 8 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 8);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f64_2d(struct futhark_context *ctx, struct futhark_f64_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f64_2d(struct futhark_context *ctx,
                          struct futhark_f64_2d *arr, double *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 8 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 8);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f64_2d(struct futhark_context *ctx,
                                         struct futhark_f64_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f64_2d(struct futhark_context *ctx,
                                    struct futhark_f64_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_109716,
                             struct memblock Y_mem_100186, int64_t m_92398,
                             int64_t n_92399, int64_t q_92401,
                             int64_t degree_92402, int64_t jump_92403,
                             int64_t jump_threshold_1_92404,
                             int64_t jump_threshold_2_92405,
                             int64_t q_threshold_1_92406,
                             int64_t q_threshold_2_92407)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_101625;
    
    mem_out_101625.references = NULL;
    
    bool cond_92408 = jump_92403 == (int64_t) 1;
    int64_t n_m_92409;
    
    if (cond_92408) {
        n_m_92409 = n_92399;
    } else {
        bool zzero_92410 = jump_92403 == (int64_t) 0;
        bool nonzzero_92411 = !zzero_92410;
        bool nonzzero_cert_92412;
        
        if (!nonzzero_92411) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:759:38-45\n   #1  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t x_92413 = sdiv64(n_92399, jump_92403);
        int64_t n_m_f_res_92414 = add64((int64_t) 1, x_92413);
        
        n_m_92409 = n_m_f_res_92414;
    }
    
    int64_t i_92415 = sub64(n_92399, (int64_t) 1);
    bool x_92416 = sle64((int64_t) 0, i_92415);
    bool y_92417 = slt64(i_92415, n_92399);
    bool bounds_check_92418 = x_92416 && y_92417;
    bool index_certs_92419;
    
    if (!bounds_check_92418) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_92415,
                               "] out of bounds for array of shape [",
                               (long long) n_92399, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  loess.fut:764:5-54\n   #3  loess.fut:750:1-793:26\n");
        if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
            return 1;
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_92421 = smin64(n_92399, q_92401);
    bool bounds_invalid_upwards_92422 = slt64(n_m_92409, (int64_t) 0);
    bool valid_92423 = !bounds_invalid_upwards_92422;
    bool range_valid_c_92424;
    
    if (!valid_92423) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_92409, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:620:3-647:10\n   #4  loess.fut:680:15-61\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
        if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
            return 1;
        err = 1;
        goto cleanup;
    }
    
    bool loop_cond_92426 = slt64((int64_t) 1, min_res_92421);
    double i64_res_92427 = sitofp_i64_f64(q_92401);
    bool cond_92428 = slt64(jump_92403, jump_threshold_1_92404);
    bool cond_92429 = slt64(jump_92403, jump_threshold_2_92405);
    bool cond_f_res_t_res_92430 = slt64(q_92401, q_threshold_2_92407);
    bool x_92431 = cond_92429 && cond_f_res_t_res_92430;
    bool x_92432 = !cond_92428;
    bool y_92433 = x_92431 && x_92432;
    bool cond_92434 = cond_92428 || y_92433;
    struct memblock ext_mem_101585;
    
    ext_mem_101585.references = NULL;
    
    struct memblock ext_mem_101584;
    
    ext_mem_101584.references = NULL;
    if (cond_92434) {
        bool match_lit_92437 = (int64_t) 0 == degree_92402;
        int64_t binop_x_100187 = m_92398 * n_m_92409;
        int64_t binop_y_100188 = (int64_t) 8 * binop_x_100187;
        int64_t bytes_100189 = smax64((int64_t) 0, binop_y_100188);
        struct memblock ext_mem_100574;
        
        ext_mem_100574.references = NULL;
        
        struct memblock ext_mem_100573;
        
        ext_mem_100573.references = NULL;
        if (match_lit_92437) {
            struct memblock mem_100190;
            
            mem_100190.references = NULL;
            if (memblock_alloc(ctx, &mem_100190, bytes_100189, "mem_100190")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_101626 = 0; i_101626 < m_92398; i_101626++) {
                for (int64_t i_101627 = 0; i_101627 < n_m_92409; i_101627++) {
                    ((double *) mem_100190.mem)[i_101626 * n_m_92409 +
                                                i_101627] = 0.0;
                }
            }
            
            struct memblock mem_100302;
            
            mem_100302.references = NULL;
            if (memblock_alloc(ctx, &mem_100302, bytes_100189, "mem_100302")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_100191 = (int64_t) 8 * n_92399;
            int64_t bytes_100192 = smax64((int64_t) 0, binop_y_100191);
            int64_t binop_y_100203 = (int64_t) 8 * q_92401;
            int64_t bytes_100204 = smax64((int64_t) 0, binop_y_100203);
            int64_t binop_y_100206 = (int64_t) 8 * n_m_92409;
            int64_t bytes_100207 = smax64((int64_t) 0, binop_y_100206);
            int64_t flat_tid_94380 = (int64_t) 0;
            int32_t num_tasks_101628;
            int64_t flat_tid_94541 = (int64_t) 0;
            struct futhark_mc_task_109717 futhark_mc_task_109717;
            
            futhark_mc_task_109717.ctx = ctx;
            futhark_mc_task_109717.free_m_92398 = m_92398;
            futhark_mc_task_109717.free_n_92399 = n_92399;
            futhark_mc_task_109717.free_q_92401 = q_92401;
            futhark_mc_task_109717.free_jump_92403 = jump_92403;
            futhark_mc_task_109717.free_n_m_92409 = n_m_92409;
            futhark_mc_task_109717.free_i_92415 = i_92415;
            futhark_mc_task_109717.free_x_92416 = x_92416;
            futhark_mc_task_109717.free_min_res_92421 = min_res_92421;
            futhark_mc_task_109717.free_loop_cond_92426 = loop_cond_92426;
            futhark_mc_task_109717.free_i64_res_92427 = i64_res_92427;
            futhark_mc_task_109717.free_Y_mem_100186 = Y_mem_100186.mem;
            futhark_mc_task_109717.free_bytes_100192 = bytes_100192;
            futhark_mc_task_109717.free_bytes_100204 = bytes_100204;
            futhark_mc_task_109717.free_bytes_100207 = bytes_100207;
            futhark_mc_task_109717.free_mem_100302 = mem_100302.mem;
            
            struct scheduler_segop futhark_mc_task_109717_task;
            
            futhark_mc_task_109717_task.args = &futhark_mc_task_109717;
            futhark_mc_task_109717_task.top_level_fn =
                futhark_mc_segmap_task_109718;
            futhark_mc_task_109717_task.name = "futhark_mc_segmap_task_109718";
            futhark_mc_task_109717_task.iterations = m_92398;
            futhark_mc_task_109717_task.task_time =
                &ctx->futhark_mc_segmap_task_109718_total_time;
            futhark_mc_task_109717_task.task_iter =
                &ctx->futhark_mc_segmap_task_109718_total_iter;
            futhark_mc_task_109717_task.sched = DYNAMIC;
            futhark_mc_task_109717_task.nested_fn =
                futhark_mc_segmap_nested_task_109727;
            
            int futhark_mc_segmap_task_109718_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_109717_task);
            
            if (futhark_mc_segmap_task_109718_err != 0) {
                if (memblock_unref(ctx, &mem_100302, "mem_100302") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100190, "mem_100190") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_100573, "ext_mem_100573") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_100574, "ext_mem_100574") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
                    return 1;
                ;
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_100574, &mem_100302, "mem_100302") !=
                0)
                return 1;
            if (memblock_set(ctx, &ext_mem_100573, &mem_100190, "mem_100190") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_100302, "mem_100302") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_100190, "mem_100190") != 0)
                return 1;
        } else {
            bool match_lit_92616 = (int64_t) 1 == degree_92402;
            struct memblock ext_mem_100572;
            
            ext_mem_100572.references = NULL;
            
            struct memblock ext_mem_100571;
            
            ext_mem_100571.references = NULL;
            if (match_lit_92616) {
                struct memblock mem_100432;
                
                mem_100432.references = NULL;
                if (memblock_alloc(ctx, &mem_100432, bytes_100189,
                                   "mem_100432")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_100436;
                
                mem_100436.references = NULL;
                if (memblock_alloc(ctx, &mem_100436, bytes_100189,
                                   "mem_100436")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_100303 = (int64_t) 8 * n_92399;
                int64_t bytes_100304 = smax64((int64_t) 0, binop_y_100303);
                int64_t binop_y_100315 = (int64_t) 8 * q_92401;
                int64_t bytes_100316 = smax64((int64_t) 0, binop_y_100315);
                int64_t binop_y_100318 = (int64_t) 8 * n_m_92409;
                int64_t bytes_100319 = smax64((int64_t) 0, binop_y_100318);
                int64_t flat_tid_94865 = (int64_t) 0;
                int32_t num_tasks_102387;
                int64_t flat_tid_95054 = (int64_t) 0;
                struct futhark_mc_task_109772 futhark_mc_task_109772;
                
                futhark_mc_task_109772.ctx = ctx;
                futhark_mc_task_109772.free_m_92398 = m_92398;
                futhark_mc_task_109772.free_n_92399 = n_92399;
                futhark_mc_task_109772.free_q_92401 = q_92401;
                futhark_mc_task_109772.free_jump_92403 = jump_92403;
                futhark_mc_task_109772.free_n_m_92409 = n_m_92409;
                futhark_mc_task_109772.free_i_92415 = i_92415;
                futhark_mc_task_109772.free_x_92416 = x_92416;
                futhark_mc_task_109772.free_min_res_92421 = min_res_92421;
                futhark_mc_task_109772.free_loop_cond_92426 = loop_cond_92426;
                futhark_mc_task_109772.free_i64_res_92427 = i64_res_92427;
                futhark_mc_task_109772.free_Y_mem_100186 = Y_mem_100186.mem;
                futhark_mc_task_109772.free_bytes_100304 = bytes_100304;
                futhark_mc_task_109772.free_bytes_100316 = bytes_100316;
                futhark_mc_task_109772.free_bytes_100319 = bytes_100319;
                futhark_mc_task_109772.free_mem_100432 = mem_100432.mem;
                futhark_mc_task_109772.free_mem_100436 = mem_100436.mem;
                
                struct scheduler_segop futhark_mc_task_109772_task;
                
                futhark_mc_task_109772_task.args = &futhark_mc_task_109772;
                futhark_mc_task_109772_task.top_level_fn =
                    futhark_mc_segmap_task_109773;
                futhark_mc_task_109772_task.name =
                    "futhark_mc_segmap_task_109773";
                futhark_mc_task_109772_task.iterations = m_92398;
                futhark_mc_task_109772_task.task_time =
                    &ctx->futhark_mc_segmap_task_109773_total_time;
                futhark_mc_task_109772_task.task_iter =
                    &ctx->futhark_mc_segmap_task_109773_total_iter;
                futhark_mc_task_109772_task.sched = DYNAMIC;
                futhark_mc_task_109772_task.nested_fn =
                    futhark_mc_segmap_nested_task_109783;
                
                int futhark_mc_segmap_task_109773_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_109772_task);
                
                if (futhark_mc_segmap_task_109773_err != 0) {
                    if (memblock_unref(ctx, &mem_100436, "mem_100436") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_100432, "mem_100432") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100571,
                                       "ext_mem_100571") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100572,
                                       "ext_mem_100572") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100573,
                                       "ext_mem_100573") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100574,
                                       "ext_mem_100574") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101584,
                                       "ext_mem_101584") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101585,
                                       "ext_mem_101585") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_101625,
                                       "mem_out_101625") != 0)
                        return 1;
                    ;
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_100572, &mem_100432,
                                 "mem_100432") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_100571, &mem_100436,
                                 "mem_100436") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100436, "mem_100436") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100432, "mem_100432") != 0)
                    return 1;
            } else {
                struct memblock mem_100566;
                
                mem_100566.references = NULL;
                if (memblock_alloc(ctx, &mem_100566, bytes_100189,
                                   "mem_100566")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_100570;
                
                mem_100570.references = NULL;
                if (memblock_alloc(ctx, &mem_100570, bytes_100189,
                                   "mem_100570")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_100437 = (int64_t) 8 * n_92399;
                int64_t bytes_100438 = smax64((int64_t) 0, binop_y_100437);
                int64_t binop_y_100449 = (int64_t) 8 * q_92401;
                int64_t bytes_100450 = smax64((int64_t) 0, binop_y_100449);
                int64_t binop_y_100452 = (int64_t) 8 * n_m_92409;
                int64_t bytes_100453 = smax64((int64_t) 0, binop_y_100452);
                int64_t flat_tid_95435 = (int64_t) 0;
                int32_t num_tasks_103284;
                int64_t flat_tid_95656 = (int64_t) 0;
                struct futhark_mc_task_109832 futhark_mc_task_109832;
                
                futhark_mc_task_109832.ctx = ctx;
                futhark_mc_task_109832.free_m_92398 = m_92398;
                futhark_mc_task_109832.free_n_92399 = n_92399;
                futhark_mc_task_109832.free_q_92401 = q_92401;
                futhark_mc_task_109832.free_jump_92403 = jump_92403;
                futhark_mc_task_109832.free_n_m_92409 = n_m_92409;
                futhark_mc_task_109832.free_i_92415 = i_92415;
                futhark_mc_task_109832.free_x_92416 = x_92416;
                futhark_mc_task_109832.free_min_res_92421 = min_res_92421;
                futhark_mc_task_109832.free_loop_cond_92426 = loop_cond_92426;
                futhark_mc_task_109832.free_i64_res_92427 = i64_res_92427;
                futhark_mc_task_109832.free_Y_mem_100186 = Y_mem_100186.mem;
                futhark_mc_task_109832.free_bytes_100438 = bytes_100438;
                futhark_mc_task_109832.free_bytes_100450 = bytes_100450;
                futhark_mc_task_109832.free_bytes_100453 = bytes_100453;
                futhark_mc_task_109832.free_mem_100566 = mem_100566.mem;
                futhark_mc_task_109832.free_mem_100570 = mem_100570.mem;
                
                struct scheduler_segop futhark_mc_task_109832_task;
                
                futhark_mc_task_109832_task.args = &futhark_mc_task_109832;
                futhark_mc_task_109832_task.top_level_fn =
                    futhark_mc_segmap_task_109833;
                futhark_mc_task_109832_task.name =
                    "futhark_mc_segmap_task_109833";
                futhark_mc_task_109832_task.iterations = m_92398;
                futhark_mc_task_109832_task.task_time =
                    &ctx->futhark_mc_segmap_task_109833_total_time;
                futhark_mc_task_109832_task.task_iter =
                    &ctx->futhark_mc_segmap_task_109833_total_iter;
                futhark_mc_task_109832_task.sched = DYNAMIC;
                futhark_mc_task_109832_task.nested_fn =
                    futhark_mc_segmap_nested_task_109843;
                
                int futhark_mc_segmap_task_109833_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_109832_task);
                
                if (futhark_mc_segmap_task_109833_err != 0) {
                    if (memblock_unref(ctx, &mem_100570, "mem_100570") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_100566, "mem_100566") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100571,
                                       "ext_mem_100571") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100572,
                                       "ext_mem_100572") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100573,
                                       "ext_mem_100573") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_100574,
                                       "ext_mem_100574") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101584,
                                       "ext_mem_101584") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101585,
                                       "ext_mem_101585") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_101625,
                                       "mem_out_101625") != 0)
                        return 1;
                    ;
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_100572, &mem_100566,
                                 "mem_100566") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_100571, &mem_100570,
                                 "mem_100570") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100570, "mem_100570") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100566, "mem_100566") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_100574, &ext_mem_100572,
                             "ext_mem_100572") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_100573, &ext_mem_100571,
                             "ext_mem_100571") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_100571, "ext_mem_100571") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_100572, "ext_mem_100572") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_101585, &ext_mem_100574,
                         "ext_mem_100574") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_101584, &ext_mem_100573,
                         "ext_mem_100573") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_100573, "ext_mem_100573") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_100574, "ext_mem_100574") != 0)
            return 1;
    } else {
        bool cond_93061 = sle64(jump_threshold_2_92405, jump_92403);
        bool cond_t_res_93062 = slt64(q_92401, q_threshold_1_92406);
        bool x_93063 = cond_93061 && cond_t_res_93062;
        struct memblock ext_mem_101583;
        
        ext_mem_101583.references = NULL;
        
        struct memblock ext_mem_101582;
        
        ext_mem_101582.references = NULL;
        if (x_93063) {
            bool match_lit_93066 = (int64_t) 0 == degree_92402;
            int64_t binop_x_100575 = m_92398 * n_m_92409;
            int64_t binop_y_100576 = (int64_t) 8 * binop_x_100575;
            int64_t bytes_100577 = smax64((int64_t) 0, binop_y_100576);
            struct memblock ext_mem_101193;
            
            ext_mem_101193.references = NULL;
            
            struct memblock ext_mem_101192;
            
            ext_mem_101192.references = NULL;
            if (match_lit_93066) {
                struct memblock mem_100578;
                
                mem_100578.references = NULL;
                if (memblock_alloc(ctx, &mem_100578, bytes_100577,
                                   "mem_100578")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_104313 = 0; i_104313 < m_92398; i_104313++) {
                    for (int64_t i_104314 = 0; i_104314 < n_m_92409;
                         i_104314++) {
                        ((double *) mem_100578.mem)[i_104313 * n_m_92409 +
                                                    i_104314] = 0.0;
                    }
                }
                
                struct memblock mem_100723;
                
                mem_100723.references = NULL;
                if (memblock_alloc(ctx, &mem_100723, bytes_100577,
                                   "mem_100723")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_100579 = (int64_t) 8 * n_92399;
                int64_t bytes_100580 = smax64((int64_t) 0, binop_y_100579);
                int64_t binop_y_100591 = (int64_t) 8 * q_92401;
                int64_t bytes_100592 = smax64((int64_t) 0, binop_y_100591);
                int64_t binop_y_100612 = (int64_t) 8 * n_m_92409;
                int64_t bytes_100613 = smax64((int64_t) 0, binop_y_100612);
                int64_t flat_tid_96101 = (int64_t) 0;
                int32_t num_tasks_104315;
                int64_t flat_tid_96249 = (int64_t) 0;
                struct futhark_mc_task_109894 futhark_mc_task_109894;
                
                futhark_mc_task_109894.ctx = ctx;
                futhark_mc_task_109894.free_m_92398 = m_92398;
                futhark_mc_task_109894.free_n_92399 = n_92399;
                futhark_mc_task_109894.free_q_92401 = q_92401;
                futhark_mc_task_109894.free_jump_92403 = jump_92403;
                futhark_mc_task_109894.free_n_m_92409 = n_m_92409;
                futhark_mc_task_109894.free_i_92415 = i_92415;
                futhark_mc_task_109894.free_x_92416 = x_92416;
                futhark_mc_task_109894.free_min_res_92421 = min_res_92421;
                futhark_mc_task_109894.free_loop_cond_92426 = loop_cond_92426;
                futhark_mc_task_109894.free_i64_res_92427 = i64_res_92427;
                futhark_mc_task_109894.free_Y_mem_100186 = Y_mem_100186.mem;
                futhark_mc_task_109894.free_bytes_100580 = bytes_100580;
                futhark_mc_task_109894.free_bytes_100592 = bytes_100592;
                futhark_mc_task_109894.free_bytes_100613 = bytes_100613;
                futhark_mc_task_109894.free_mem_100723 = mem_100723.mem;
                
                struct scheduler_segop futhark_mc_task_109894_task;
                
                futhark_mc_task_109894_task.args = &futhark_mc_task_109894;
                futhark_mc_task_109894_task.top_level_fn =
                    futhark_mc_segmap_task_109895;
                futhark_mc_task_109894_task.name =
                    "futhark_mc_segmap_task_109895";
                futhark_mc_task_109894_task.iterations = m_92398;
                futhark_mc_task_109894_task.task_time =
                    &ctx->futhark_mc_segmap_task_109895_total_time;
                futhark_mc_task_109894_task.task_iter =
                    &ctx->futhark_mc_segmap_task_109895_total_iter;
                futhark_mc_task_109894_task.sched = DYNAMIC;
                futhark_mc_task_109894_task.nested_fn =
                    futhark_mc_segmap_nested_task_109905;
                
                int futhark_mc_segmap_task_109895_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_109894_task);
                
                if (futhark_mc_segmap_task_109895_err != 0) {
                    if (memblock_unref(ctx, &mem_100723, "mem_100723") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_100578, "mem_100578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101192,
                                       "ext_mem_101192") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101193,
                                       "ext_mem_101193") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101582,
                                       "ext_mem_101582") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101583,
                                       "ext_mem_101583") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101584,
                                       "ext_mem_101584") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101585,
                                       "ext_mem_101585") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_101625,
                                       "mem_out_101625") != 0)
                        return 1;
                    ;
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_101193, &mem_100723,
                                 "mem_100723") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_101192, &mem_100578,
                                 "mem_100578") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100723, "mem_100723") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_100578, "mem_100578") != 0)
                    return 1;
            } else {
                bool match_lit_93232 = (int64_t) 1 == degree_92402;
                struct memblock ext_mem_101191;
                
                ext_mem_101191.references = NULL;
                
                struct memblock ext_mem_101190;
                
                ext_mem_101190.references = NULL;
                if (match_lit_93232) {
                    struct memblock mem_100919;
                    
                    mem_100919.references = NULL;
                    if (memblock_alloc(ctx, &mem_100919, bytes_100577,
                                       "mem_100919")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_100923;
                    
                    mem_100923.references = NULL;
                    if (memblock_alloc(ctx, &mem_100923, bytes_100577,
                                       "mem_100923")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_100724 = (int64_t) 8 * n_92399;
                    int64_t bytes_100725 = smax64((int64_t) 0, binop_y_100724);
                    int64_t binop_y_100736 = (int64_t) 8 * q_92401;
                    int64_t bytes_100737 = smax64((int64_t) 0, binop_y_100736);
                    int64_t binop_y_100775 = (int64_t) 8 * n_m_92409;
                    int64_t bytes_100776 = smax64((int64_t) 0, binop_y_100775);
                    int64_t flat_tid_96547 = (int64_t) 0;
                    int32_t num_tasks_105019;
                    int64_t flat_tid_96724 = (int64_t) 0;
                    struct futhark_mc_task_109952 futhark_mc_task_109952;
                    
                    futhark_mc_task_109952.ctx = ctx;
                    futhark_mc_task_109952.free_m_92398 = m_92398;
                    futhark_mc_task_109952.free_n_92399 = n_92399;
                    futhark_mc_task_109952.free_q_92401 = q_92401;
                    futhark_mc_task_109952.free_jump_92403 = jump_92403;
                    futhark_mc_task_109952.free_n_m_92409 = n_m_92409;
                    futhark_mc_task_109952.free_i_92415 = i_92415;
                    futhark_mc_task_109952.free_x_92416 = x_92416;
                    futhark_mc_task_109952.free_min_res_92421 = min_res_92421;
                    futhark_mc_task_109952.free_loop_cond_92426 =
                        loop_cond_92426;
                    futhark_mc_task_109952.free_i64_res_92427 = i64_res_92427;
                    futhark_mc_task_109952.free_Y_mem_100186 = Y_mem_100186.mem;
                    futhark_mc_task_109952.free_bytes_100725 = bytes_100725;
                    futhark_mc_task_109952.free_bytes_100737 = bytes_100737;
                    futhark_mc_task_109952.free_bytes_100776 = bytes_100776;
                    futhark_mc_task_109952.free_mem_100919 = mem_100919.mem;
                    futhark_mc_task_109952.free_mem_100923 = mem_100923.mem;
                    
                    struct scheduler_segop futhark_mc_task_109952_task;
                    
                    futhark_mc_task_109952_task.args = &futhark_mc_task_109952;
                    futhark_mc_task_109952_task.top_level_fn =
                        futhark_mc_segmap_task_109953;
                    futhark_mc_task_109952_task.name =
                        "futhark_mc_segmap_task_109953";
                    futhark_mc_task_109952_task.iterations = m_92398;
                    futhark_mc_task_109952_task.task_time =
                        &ctx->futhark_mc_segmap_task_109953_total_time;
                    futhark_mc_task_109952_task.task_iter =
                        &ctx->futhark_mc_segmap_task_109953_total_iter;
                    futhark_mc_task_109952_task.sched = DYNAMIC;
                    futhark_mc_task_109952_task.nested_fn =
                        futhark_mc_segmap_nested_task_109965;
                    
                    int futhark_mc_segmap_task_109953_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_109952_task);
                    
                    if (futhark_mc_segmap_task_109953_err != 0) {
                        if (memblock_unref(ctx, &mem_100923, "mem_100923") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_100919, "mem_100919") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101190,
                                           "ext_mem_101190") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101191,
                                           "ext_mem_101191") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101192,
                                           "ext_mem_101192") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101193,
                                           "ext_mem_101193") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101582,
                                           "ext_mem_101582") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101583,
                                           "ext_mem_101583") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101584,
                                           "ext_mem_101584") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101585,
                                           "ext_mem_101585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_101625,
                                           "mem_out_101625") != 0)
                            return 1;
                        ;
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_101191, &mem_100919,
                                     "mem_100919") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_101190, &mem_100923,
                                     "mem_100923") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_100923, "mem_100923") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_100919, "mem_100919") != 0)
                        return 1;
                } else {
                    struct memblock mem_101185;
                    
                    mem_101185.references = NULL;
                    if (memblock_alloc(ctx, &mem_101185, bytes_100577,
                                       "mem_101185")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_101189;
                    
                    mem_101189.references = NULL;
                    if (memblock_alloc(ctx, &mem_101189, bytes_100577,
                                       "mem_101189")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_100924 = (int64_t) 8 * n_92399;
                    int64_t bytes_100925 = smax64((int64_t) 0, binop_y_100924);
                    int64_t binop_y_100936 = (int64_t) 8 * q_92401;
                    int64_t bytes_100937 = smax64((int64_t) 0, binop_y_100936);
                    int64_t binop_y_101011 = (int64_t) 8 * n_m_92409;
                    int64_t bytes_101012 = smax64((int64_t) 0, binop_y_101011);
                    int64_t flat_tid_97081 = (int64_t) 0;
                    int32_t num_tasks_105876;
                    int64_t flat_tid_97298 = (int64_t) 0;
                    struct futhark_mc_task_110018 futhark_mc_task_110018;
                    
                    futhark_mc_task_110018.ctx = ctx;
                    futhark_mc_task_110018.free_m_92398 = m_92398;
                    futhark_mc_task_110018.free_n_92399 = n_92399;
                    futhark_mc_task_110018.free_q_92401 = q_92401;
                    futhark_mc_task_110018.free_jump_92403 = jump_92403;
                    futhark_mc_task_110018.free_n_m_92409 = n_m_92409;
                    futhark_mc_task_110018.free_i_92415 = i_92415;
                    futhark_mc_task_110018.free_x_92416 = x_92416;
                    futhark_mc_task_110018.free_min_res_92421 = min_res_92421;
                    futhark_mc_task_110018.free_loop_cond_92426 =
                        loop_cond_92426;
                    futhark_mc_task_110018.free_i64_res_92427 = i64_res_92427;
                    futhark_mc_task_110018.free_Y_mem_100186 = Y_mem_100186.mem;
                    futhark_mc_task_110018.free_bytes_100925 = bytes_100925;
                    futhark_mc_task_110018.free_bytes_100937 = bytes_100937;
                    futhark_mc_task_110018.free_bytes_101012 = bytes_101012;
                    futhark_mc_task_110018.free_mem_101185 = mem_101185.mem;
                    futhark_mc_task_110018.free_mem_101189 = mem_101189.mem;
                    
                    struct scheduler_segop futhark_mc_task_110018_task;
                    
                    futhark_mc_task_110018_task.args = &futhark_mc_task_110018;
                    futhark_mc_task_110018_task.top_level_fn =
                        futhark_mc_segmap_task_110019;
                    futhark_mc_task_110018_task.name =
                        "futhark_mc_segmap_task_110019";
                    futhark_mc_task_110018_task.iterations = m_92398;
                    futhark_mc_task_110018_task.task_time =
                        &ctx->futhark_mc_segmap_task_110019_total_time;
                    futhark_mc_task_110018_task.task_iter =
                        &ctx->futhark_mc_segmap_task_110019_total_iter;
                    futhark_mc_task_110018_task.sched = DYNAMIC;
                    futhark_mc_task_110018_task.nested_fn =
                        futhark_mc_segmap_nested_task_110033;
                    
                    int futhark_mc_segmap_task_110019_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_110018_task);
                    
                    if (futhark_mc_segmap_task_110019_err != 0) {
                        if (memblock_unref(ctx, &mem_101189, "mem_101189") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_101185, "mem_101185") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101190,
                                           "ext_mem_101190") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101191,
                                           "ext_mem_101191") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101192,
                                           "ext_mem_101192") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101193,
                                           "ext_mem_101193") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101582,
                                           "ext_mem_101582") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101583,
                                           "ext_mem_101583") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101584,
                                           "ext_mem_101584") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101585,
                                           "ext_mem_101585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_101625,
                                           "mem_out_101625") != 0)
                            return 1;
                        ;
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_101191, &mem_101185,
                                     "mem_101185") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_101190, &mem_101189,
                                     "mem_101189") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101189, "mem_101189") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101185, "mem_101185") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_101193, &ext_mem_101191,
                                 "ext_mem_101191") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_101192, &ext_mem_101190,
                                 "ext_mem_101190") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101190, "ext_mem_101190") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101191, "ext_mem_101191") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_101583, &ext_mem_101193,
                             "ext_mem_101193") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_101582, &ext_mem_101192,
                             "ext_mem_101192") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101192, "ext_mem_101192") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101193, "ext_mem_101193") != 0)
                return 1;
        } else {
            bool match_lit_93696 = (int64_t) 0 == degree_92402;
            int64_t binop_x_101194 = m_92398 * n_m_92409;
            int64_t binop_y_101195 = (int64_t) 8 * binop_x_101194;
            int64_t bytes_101196 = smax64((int64_t) 0, binop_y_101195);
            struct memblock ext_mem_101581;
            
            ext_mem_101581.references = NULL;
            
            struct memblock ext_mem_101580;
            
            ext_mem_101580.references = NULL;
            if (match_lit_93696) {
                struct memblock mem_101197;
                
                mem_101197.references = NULL;
                if (memblock_alloc(ctx, &mem_101197, bytes_101196,
                                   "mem_101197")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_106919 = 0; i_106919 < m_92398; i_106919++) {
                    for (int64_t i_106920 = 0; i_106920 < n_m_92409;
                         i_106920++) {
                        ((double *) mem_101197.mem)[i_106919 * n_m_92409 +
                                                    i_106920] = 0.0;
                    }
                }
                
                struct memblock mem_101309;
                
                mem_101309.references = NULL;
                if (memblock_alloc(ctx, &mem_101309, bytes_101196,
                                   "mem_101309")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_101198 = (int64_t) 8 * n_92399;
                int64_t bytes_101199 = smax64((int64_t) 0, binop_y_101198);
                int64_t binop_y_101210 = (int64_t) 8 * q_92401;
                int64_t bytes_101211 = smax64((int64_t) 0, binop_y_101210);
                int64_t binop_y_101213 = (int64_t) 8 * n_m_92409;
                int64_t bytes_101214 = smax64((int64_t) 0, binop_y_101213);
                int64_t flat_tid_97729 = (int64_t) 0;
                int32_t num_tasks_106921;
                int64_t flat_tid_97890 = (int64_t) 0;
                struct futhark_mc_task_110096 futhark_mc_task_110096;
                
                futhark_mc_task_110096.ctx = ctx;
                futhark_mc_task_110096.free_m_92398 = m_92398;
                futhark_mc_task_110096.free_n_92399 = n_92399;
                futhark_mc_task_110096.free_q_92401 = q_92401;
                futhark_mc_task_110096.free_jump_92403 = jump_92403;
                futhark_mc_task_110096.free_n_m_92409 = n_m_92409;
                futhark_mc_task_110096.free_i_92415 = i_92415;
                futhark_mc_task_110096.free_x_92416 = x_92416;
                futhark_mc_task_110096.free_min_res_92421 = min_res_92421;
                futhark_mc_task_110096.free_loop_cond_92426 = loop_cond_92426;
                futhark_mc_task_110096.free_i64_res_92427 = i64_res_92427;
                futhark_mc_task_110096.free_Y_mem_100186 = Y_mem_100186.mem;
                futhark_mc_task_110096.free_bytes_101199 = bytes_101199;
                futhark_mc_task_110096.free_bytes_101211 = bytes_101211;
                futhark_mc_task_110096.free_bytes_101214 = bytes_101214;
                futhark_mc_task_110096.free_mem_101309 = mem_101309.mem;
                
                struct scheduler_segop futhark_mc_task_110096_task;
                
                futhark_mc_task_110096_task.args = &futhark_mc_task_110096;
                futhark_mc_task_110096_task.top_level_fn =
                    futhark_mc_segmap_task_110097;
                futhark_mc_task_110096_task.name =
                    "futhark_mc_segmap_task_110097";
                futhark_mc_task_110096_task.iterations = m_92398;
                futhark_mc_task_110096_task.task_time =
                    &ctx->futhark_mc_segmap_task_110097_total_time;
                futhark_mc_task_110096_task.task_iter =
                    &ctx->futhark_mc_segmap_task_110097_total_iter;
                futhark_mc_task_110096_task.sched = DYNAMIC;
                futhark_mc_task_110096_task.nested_fn =
                    futhark_mc_segmap_nested_task_110106;
                
                int futhark_mc_segmap_task_110097_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_110096_task);
                
                if (futhark_mc_segmap_task_110097_err != 0) {
                    if (memblock_unref(ctx, &mem_101309, "mem_101309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101197, "mem_101197") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101580,
                                       "ext_mem_101580") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101581,
                                       "ext_mem_101581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101582,
                                       "ext_mem_101582") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101583,
                                       "ext_mem_101583") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101584,
                                       "ext_mem_101584") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_101585,
                                       "ext_mem_101585") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_101625,
                                       "mem_out_101625") != 0)
                        return 1;
                    ;
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_101581, &mem_101309,
                                 "mem_101309") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_101580, &mem_101197,
                                 "mem_101197") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_101309, "mem_101309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_101197, "mem_101197") != 0)
                    return 1;
            } else {
                bool match_lit_93875 = (int64_t) 1 == degree_92402;
                struct memblock ext_mem_101579;
                
                ext_mem_101579.references = NULL;
                
                struct memblock ext_mem_101578;
                
                ext_mem_101578.references = NULL;
                if (match_lit_93875) {
                    struct memblock mem_101439;
                    
                    mem_101439.references = NULL;
                    if (memblock_alloc(ctx, &mem_101439, bytes_101196,
                                       "mem_101439")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_101443;
                    
                    mem_101443.references = NULL;
                    if (memblock_alloc(ctx, &mem_101443, bytes_101196,
                                       "mem_101443")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_101310 = (int64_t) 8 * n_92399;
                    int64_t bytes_101311 = smax64((int64_t) 0, binop_y_101310);
                    int64_t binop_y_101322 = (int64_t) 8 * q_92401;
                    int64_t bytes_101323 = smax64((int64_t) 0, binop_y_101322);
                    int64_t binop_y_101325 = (int64_t) 8 * n_m_92409;
                    int64_t bytes_101326 = smax64((int64_t) 0, binop_y_101325);
                    int64_t flat_tid_98214 = (int64_t) 0;
                    int32_t num_tasks_107680;
                    int64_t flat_tid_98403 = (int64_t) 0;
                    struct futhark_mc_task_110151 futhark_mc_task_110151;
                    
                    futhark_mc_task_110151.ctx = ctx;
                    futhark_mc_task_110151.free_m_92398 = m_92398;
                    futhark_mc_task_110151.free_n_92399 = n_92399;
                    futhark_mc_task_110151.free_q_92401 = q_92401;
                    futhark_mc_task_110151.free_jump_92403 = jump_92403;
                    futhark_mc_task_110151.free_n_m_92409 = n_m_92409;
                    futhark_mc_task_110151.free_i_92415 = i_92415;
                    futhark_mc_task_110151.free_x_92416 = x_92416;
                    futhark_mc_task_110151.free_min_res_92421 = min_res_92421;
                    futhark_mc_task_110151.free_loop_cond_92426 =
                        loop_cond_92426;
                    futhark_mc_task_110151.free_i64_res_92427 = i64_res_92427;
                    futhark_mc_task_110151.free_Y_mem_100186 = Y_mem_100186.mem;
                    futhark_mc_task_110151.free_bytes_101311 = bytes_101311;
                    futhark_mc_task_110151.free_bytes_101323 = bytes_101323;
                    futhark_mc_task_110151.free_bytes_101326 = bytes_101326;
                    futhark_mc_task_110151.free_mem_101439 = mem_101439.mem;
                    futhark_mc_task_110151.free_mem_101443 = mem_101443.mem;
                    
                    struct scheduler_segop futhark_mc_task_110151_task;
                    
                    futhark_mc_task_110151_task.args = &futhark_mc_task_110151;
                    futhark_mc_task_110151_task.top_level_fn =
                        futhark_mc_segmap_task_110152;
                    futhark_mc_task_110151_task.name =
                        "futhark_mc_segmap_task_110152";
                    futhark_mc_task_110151_task.iterations = m_92398;
                    futhark_mc_task_110151_task.task_time =
                        &ctx->futhark_mc_segmap_task_110152_total_time;
                    futhark_mc_task_110151_task.task_iter =
                        &ctx->futhark_mc_segmap_task_110152_total_iter;
                    futhark_mc_task_110151_task.sched = DYNAMIC;
                    futhark_mc_task_110151_task.nested_fn =
                        futhark_mc_segmap_nested_task_110162;
                    
                    int futhark_mc_segmap_task_110152_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_110151_task);
                    
                    if (futhark_mc_segmap_task_110152_err != 0) {
                        if (memblock_unref(ctx, &mem_101443, "mem_101443") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_101439, "mem_101439") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101578,
                                           "ext_mem_101578") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101579,
                                           "ext_mem_101579") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101580,
                                           "ext_mem_101580") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101581,
                                           "ext_mem_101581") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101582,
                                           "ext_mem_101582") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101583,
                                           "ext_mem_101583") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101584,
                                           "ext_mem_101584") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101585,
                                           "ext_mem_101585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_101625,
                                           "mem_out_101625") != 0)
                            return 1;
                        ;
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_101579, &mem_101439,
                                     "mem_101439") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_101578, &mem_101443,
                                     "mem_101443") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101443, "mem_101443") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101439, "mem_101439") != 0)
                        return 1;
                } else {
                    struct memblock mem_101573;
                    
                    mem_101573.references = NULL;
                    if (memblock_alloc(ctx, &mem_101573, bytes_101196,
                                       "mem_101573")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_101577;
                    
                    mem_101577.references = NULL;
                    if (memblock_alloc(ctx, &mem_101577, bytes_101196,
                                       "mem_101577")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_101444 = (int64_t) 8 * n_92399;
                    int64_t bytes_101445 = smax64((int64_t) 0, binop_y_101444);
                    int64_t binop_y_101456 = (int64_t) 8 * q_92401;
                    int64_t bytes_101457 = smax64((int64_t) 0, binop_y_101456);
                    int64_t binop_y_101459 = (int64_t) 8 * n_m_92409;
                    int64_t bytes_101460 = smax64((int64_t) 0, binop_y_101459);
                    int64_t flat_tid_98784 = (int64_t) 0;
                    int32_t num_tasks_108577;
                    int64_t flat_tid_99005 = (int64_t) 0;
                    struct futhark_mc_task_110211 futhark_mc_task_110211;
                    
                    futhark_mc_task_110211.ctx = ctx;
                    futhark_mc_task_110211.free_m_92398 = m_92398;
                    futhark_mc_task_110211.free_n_92399 = n_92399;
                    futhark_mc_task_110211.free_q_92401 = q_92401;
                    futhark_mc_task_110211.free_jump_92403 = jump_92403;
                    futhark_mc_task_110211.free_n_m_92409 = n_m_92409;
                    futhark_mc_task_110211.free_i_92415 = i_92415;
                    futhark_mc_task_110211.free_x_92416 = x_92416;
                    futhark_mc_task_110211.free_min_res_92421 = min_res_92421;
                    futhark_mc_task_110211.free_loop_cond_92426 =
                        loop_cond_92426;
                    futhark_mc_task_110211.free_i64_res_92427 = i64_res_92427;
                    futhark_mc_task_110211.free_Y_mem_100186 = Y_mem_100186.mem;
                    futhark_mc_task_110211.free_bytes_101445 = bytes_101445;
                    futhark_mc_task_110211.free_bytes_101457 = bytes_101457;
                    futhark_mc_task_110211.free_bytes_101460 = bytes_101460;
                    futhark_mc_task_110211.free_mem_101573 = mem_101573.mem;
                    futhark_mc_task_110211.free_mem_101577 = mem_101577.mem;
                    
                    struct scheduler_segop futhark_mc_task_110211_task;
                    
                    futhark_mc_task_110211_task.args = &futhark_mc_task_110211;
                    futhark_mc_task_110211_task.top_level_fn =
                        futhark_mc_segmap_task_110212;
                    futhark_mc_task_110211_task.name =
                        "futhark_mc_segmap_task_110212";
                    futhark_mc_task_110211_task.iterations = m_92398;
                    futhark_mc_task_110211_task.task_time =
                        &ctx->futhark_mc_segmap_task_110212_total_time;
                    futhark_mc_task_110211_task.task_iter =
                        &ctx->futhark_mc_segmap_task_110212_total_iter;
                    futhark_mc_task_110211_task.sched = DYNAMIC;
                    futhark_mc_task_110211_task.nested_fn =
                        futhark_mc_segmap_nested_task_110222;
                    
                    int futhark_mc_segmap_task_110212_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_110211_task);
                    
                    if (futhark_mc_segmap_task_110212_err != 0) {
                        if (memblock_unref(ctx, &mem_101577, "mem_101577") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_101573, "mem_101573") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101578,
                                           "ext_mem_101578") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101579,
                                           "ext_mem_101579") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101580,
                                           "ext_mem_101580") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101581,
                                           "ext_mem_101581") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101582,
                                           "ext_mem_101582") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101583,
                                           "ext_mem_101583") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101584,
                                           "ext_mem_101584") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_101585,
                                           "ext_mem_101585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_101625,
                                           "mem_out_101625") != 0)
                            return 1;
                        ;
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_101579, &mem_101573,
                                     "mem_101573") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_101578, &mem_101577,
                                     "mem_101577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101577, "mem_101577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_101573, "mem_101573") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_101581, &ext_mem_101579,
                                 "ext_mem_101579") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_101580, &ext_mem_101578,
                                 "ext_mem_101578") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101578, "ext_mem_101578") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_101579, "ext_mem_101579") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_101583, &ext_mem_101581,
                             "ext_mem_101581") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_101582, &ext_mem_101580,
                             "ext_mem_101580") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101580, "ext_mem_101580") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101581, "ext_mem_101581") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_101585, &ext_mem_101583,
                         "ext_mem_101583") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_101584, &ext_mem_101582,
                         "ext_mem_101582") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_101582, "ext_mem_101582") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_101583, "ext_mem_101583") != 0)
            return 1;
    }
    
    bool cond_94320 = slt64((int64_t) 1, jump_92403);
    int64_t ext_101609;
    
    if (cond_94320) {
        ext_101609 = n_92399;
    } else {
        ext_101609 = n_m_92409;
    }
    
    int64_t binop_x_101604 = m_92398 * n_92399;
    int64_t binop_y_101605 = (int64_t) 8 * binop_x_101604;
    int64_t bytes_101606 = smax64((int64_t) 0, binop_y_101605);
    struct memblock ext_mem_101608;
    
    ext_mem_101608.references = NULL;
    if (cond_94320) {
        bool zzero_94322 = jump_92403 == (int64_t) 0;
        bool nonzzero_94323 = !zzero_94322;
        bool nonzzero_cert_94324;
        
        if (!nonzzero_94323) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:724:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:723:3-727:9\n   #5  loess.fut:790:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:789:5-791:29\n   #9  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &ext_mem_101608, "ext_mem_101608") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t y_94325 = sub64(n_m_92409, (int64_t) 1);
        struct memblock mem_101607;
        
        mem_101607.references = NULL;
        if (memblock_alloc(ctx, &mem_101607, bytes_101606, "mem_101607")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_101586 = (int64_t) 8 * n_92399;
        int64_t bytes_101587 = smax64((int64_t) 0, binop_y_101586);
        int64_t flat_tid_99450 = (int64_t) 0;
        int32_t num_tasks_109606;
        int64_t flat_tid_99456 = (int64_t) 0;
        struct futhark_mc_task_110273 futhark_mc_task_110273;
        
        futhark_mc_task_110273.ctx = ctx;
        futhark_mc_task_110273.free_m_92398 = m_92398;
        futhark_mc_task_110273.free_n_92399 = n_92399;
        futhark_mc_task_110273.free_jump_92403 = jump_92403;
        futhark_mc_task_110273.free_n_m_92409 = n_m_92409;
        futhark_mc_task_110273.free_i_92415 = i_92415;
        futhark_mc_task_110273.free_y_94325 = y_94325;
        futhark_mc_task_110273.free_ext_mem_101584 = ext_mem_101584.mem;
        futhark_mc_task_110273.free_ext_mem_101585 = ext_mem_101585.mem;
        futhark_mc_task_110273.free_bytes_101587 = bytes_101587;
        futhark_mc_task_110273.free_mem_101607 = mem_101607.mem;
        
        struct scheduler_segop futhark_mc_task_110273_task;
        
        futhark_mc_task_110273_task.args = &futhark_mc_task_110273;
        futhark_mc_task_110273_task.top_level_fn =
            futhark_mc_segmap_task_110274;
        futhark_mc_task_110273_task.name = "futhark_mc_segmap_task_110274";
        futhark_mc_task_110273_task.iterations = m_92398;
        futhark_mc_task_110273_task.task_time =
            &ctx->futhark_mc_segmap_task_110274_total_time;
        futhark_mc_task_110273_task.task_iter =
            &ctx->futhark_mc_segmap_task_110274_total_iter;
        futhark_mc_task_110273_task.sched = STATIC;
        futhark_mc_task_110273_task.nested_fn =
            futhark_mc_segmap_nested_task_110278;
        
        int futhark_mc_segmap_task_110274_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_110273_task);
        
        if (futhark_mc_segmap_task_110274_err != 0) {
            if (memblock_unref(ctx, &mem_101607, "mem_101607") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101608, "ext_mem_101608") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
                return 1;
            ;
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_101608, &mem_101607, "mem_101607") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_101607, "mem_101607") != 0)
            return 1;
    } else {
        bool dim_match_94377 = n_92399 == n_m_92409;
        bool empty_or_match_cert_94378;
        
        if (!dim_match_94377) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_92398, ", ", (long long) n_m_92409,
                          ") cannot match shape of type `[",
                          (long long) m_92398, "][", (long long) n_92399,
                          "]f64`.",
                          "-> #0  loess.fut:793:5-26\n   #1  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &ext_mem_101608, "ext_mem_101608") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_101608, &ext_mem_101585,
                         "ext_mem_101585") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
        return 1;
    
    struct memblock mem_101613;
    
    mem_101613.references = NULL;
    if (memblock_alloc(ctx, &mem_101613, bytes_101606, "mem_101613")) {
        err = 1;
        goto cleanup;
    }
    if (m_92398 * n_92399 * (int64_t) 8 > 0)
        memmove(mem_101613.mem + (int64_t) 0, ext_mem_101608.mem + (int64_t) 0,
                m_92398 * n_92399 * (int64_t) 8);
    if (memblock_unref(ctx, &ext_mem_101608, "ext_mem_101608") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_101625, &mem_101613, "mem_101613") != 0)
        return 1;
    (*mem_out_p_109716).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_109716, &mem_out_101625,
                     "mem_out_101625") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_101613, "mem_101613") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_101608, "ext_mem_101608") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_101584, "ext_mem_101584") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_101585, "ext_mem_101585") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_101625, "mem_out_101625") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f64_2d **out0, const
                       struct futhark_f64_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7)
{
    struct memblock Y_mem_100186;
    
    Y_mem_100186.references = NULL;
    
    int64_t m_92398;
    int64_t n_92399;
    int64_t q_92401;
    int64_t degree_92402;
    int64_t jump_92403;
    int64_t jump_threshold_1_92404;
    int64_t jump_threshold_2_92405;
    int64_t q_threshold_1_92406;
    int64_t q_threshold_2_92407;
    struct memblock mem_out_101625;
    
    mem_out_101625.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_100186 = in0->mem;
    m_92398 = in0->shape[0];
    n_92399 = in0->shape[1];
    q_92401 = in1;
    degree_92402 = in2;
    jump_92403 = in3;
    jump_threshold_1_92404 = in4;
    jump_threshold_2_92405 = in5;
    q_threshold_1_92406 = in6;
    q_threshold_2_92407 = in7;
    if (!(m_92398 == in0->shape[0] && n_92399 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_101625, Y_mem_100186, m_92398,
                                n_92399, q_92401, degree_92402, jump_92403,
                                jump_threshold_1_92404, jump_threshold_2_92405,
                                q_threshold_1_92406, q_threshold_2_92407);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d))) !=
                NULL);
            (*out0)->mem = mem_out_101625;
            (*out0)->shape[0] = m_92398;
            (*out0)->shape[1] = n_92399;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
